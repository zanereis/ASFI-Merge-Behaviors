[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951153346","html_url":"https://github.com/apache/accumulo/pull/1400#issuecomment-951153346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1400","id":951153346,"node_id":"IC_kwDOACaFSM44sXLC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:39:30Z","updated_at":"2021-10-25T17:39:30Z","author_association":"MEMBER","body":"> I can't figure out why the apilyzer plugin didn't hit on the super of these classes being the AbstractLexicoder in the `clientImpl.lexicoder` package. Since the parent class is in a `clientImpl` package, I would think this would violate the API by exposing an internal type and get dinged by the plugin. Could this be a bug with the plugin? Any ideas?\r\n\r\nI think this wasn't a feature of the plugin originally and that it was caught after that feature was added. It's either that, or there was a bug. There may still be some limitations to the apilyzer plugin. If there's a gap in the feature set of the plugin, it can be reported at https://github.com/revelc/apilyzer-maven-plugin","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951153346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951155504","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-951155504","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":951155504,"node_id":"IC_kwDOACaFSM44sXsw","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:42:35Z","updated_at":"2021-10-25T17:42:35Z","author_association":"MEMBER","body":"> @ctubbsii you still want to review this?\r\n\r\nYes, I would like to. I'd also like to get any changes merged into the current development branch, so we can vet the change there, before attempting to backport it to 1.10.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951155504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951160826","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-951160826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":951160826,"node_id":"IC_kwDOACaFSM44sY_6","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:49:49Z","updated_at":"2021-10-25T17:49:49Z","author_association":"MEMBER","body":"> > @ctubbsii you still want to review this?\r\n> \r\n> Yes, I would like to. I'd also like to get any changes merged into the current development branch, so we can vet the change there, before attempting to backport it to 1.10.\r\n\r\nWaiting to backport to 1.10 will delay getting it pushed to the clusters currently losing files.    ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951160826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951167426","html_url":"https://github.com/apache/accumulo/pull/2321#issuecomment-951167426","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2321","id":951167426,"node_id":"IC_kwDOACaFSM44sanC","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:59:02Z","updated_at":"2021-10-25T17:59:02Z","author_association":"CONTRIBUTOR","body":"Marking as ready to review since I think it is at the point where a review is necessary to proceed. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951167426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951212399","html_url":"https://github.com/apache/accumulo/pull/2303#issuecomment-951212399","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2303","id":951212399,"node_id":"IC_kwDOACaFSM44sllv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T18:54:10Z","updated_at":"2021-10-25T18:54:10Z","author_association":"MEMBER","body":"@milleruntime I created #2327 for some IT failures caused by this change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951212399/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951236184","html_url":"https://github.com/apache/accumulo/issues/2323#issuecomment-951236184","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2323","id":951236184,"node_id":"IC_kwDOACaFSM44srZY","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T19:23:52Z","updated_at":"2021-10-25T19:23:52Z","author_association":"MEMBER","body":"Should this issue be transferred to the accumulo-website repo?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951236184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951376349","html_url":"https://github.com/apache/accumulo/pull/2293#issuecomment-951376349","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2293","id":951376349,"node_id":"IC_kwDOACaFSM44tNnd","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T22:17:52Z","updated_at":"2021-10-25T22:18:58Z","author_association":"MEMBER","body":"> Waiting to backport to 1.10 will delay getting it pushed to the clusters currently losing files.\r\n\r\nIf the changes are so substantial that it will be that difficult to apply to 2.1.0-SNAPSHOT, and that difficulty is enough to cause a delay, then it is even *more* important that we get it right in 2.1 first, so we don't create churn by applying one implementation to 1.10, a more well-vetted different implementation in 2.1, and then needing to backport the final implementation back to 1.10.\r\n\r\nI'm not suggesting 2.1 be released first... only that we have a relatively concrete idea of what the destination looks like, so that we know the 1.10 implementation is moving in that direction and not away from it.\r\n\r\nWhat I'd like to avoid is something like the debacle with https://issues.apache.org/jira/browse/ACCUMULO-4086; there, we had a patch donated for an older version that wasn't thoroughly tested or code reviewed by us. They donated it to the project, where it got a lot of code review and polishing before being applied to 2.0. The implementation was improved through that process, but the end result was different enough that the original authors would have had a bit of a headache migrating on upgrade if they had been running using the original patch.\r\n\r\nSo, we need to make sure that the implementation aligns with the direction the project is headed, rather than where it has been, to avoid those kinds of user headaches. That said, if a user wants to run with a pre-release patched version of 1.10, before we've polished it in 2.x, that's their prerogative. But, I would like to have some confidence we're not applying something in 1.10.2 that is radically different than the direction we're heading with 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951376349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951400036","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-951400036","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":951400036,"node_id":"IC_kwDOACaFSM44tTZk","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T23:03:40Z","updated_at":"2021-10-25T23:03:40Z","author_association":"CONTRIBUTOR","body":"From what I've looked at so far, this looks okay.  There are some minor check-style issues and one issue with reporting \r\n`unknown` metrics \r\n\r\nI'm still looking, but my one concern so far deals with the reporting op types in Fate metrics.  The op_types used to be a map of counters (op_name, metric counter) that were generated dynamically. When an op_type was first seen, a map entry was created and then it would be incremented each time it was seen again.  The op types were not predefined, but they are also a finite set. Currently the method that retrieves the map is being flagged as unused and I don't see a replacement, but I need to look deeper to see if it is being handled differently than what I recall.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/951400036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952023465","html_url":"https://github.com/apache/accumulo/issues/2323#issuecomment-952023465","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2323","id":952023465,"node_id":"IC_kwDOACaFSM44vrmp","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T14:54:39Z","updated_at":"2021-10-26T14:54:39Z","author_association":"CONTRIBUTOR","body":"> Should this issue be transferred to the accumulo-website repo?\r\n\r\nIt could be since that is where the work needs to be done but I didn't want it to be missed upon release. I feel like there is a greater likely hood of it being missed in the website repo since the website isn't tied to actual releases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952023465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952042635","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-952042635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":952042635,"node_id":"IC_kwDOACaFSM44vwSL","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T15:14:54Z","updated_at":"2021-10-26T15:14:54Z","author_association":"CONTRIBUTOR","body":"The `deleterows` command has similar behavior as it calls the same FaTE operation `TableRangeOp` and requires a table write lock. I think it would be good to add it as an option there as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952042635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952043385","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-952043385","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":952043385,"node_id":"IC_kwDOACaFSM44vwd5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T15:15:41Z","updated_at":"2021-10-26T15:15:41Z","author_association":"MEMBER","body":"Is merge the only option where this kind of preemption is needed, or would it be useful to take this opportunity to add in a robust preemption feature to FaTE, that could be used by other operations later?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952043385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952045123","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-952045123","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":952045123,"node_id":"IC_kwDOACaFSM44vw5D","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T15:17:31Z","updated_at":"2021-10-26T15:17:31Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  - I was thinking that this would have to be done in two parts. First, figure out how to do it, then add it where needed / applicable.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952045123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952045890","html_url":"https://github.com/apache/accumulo/issues/2323#issuecomment-952045890","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2323","id":952045890,"node_id":"IC_kwDOACaFSM44vxFC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T15:18:25Z","updated_at":"2021-10-26T15:18:25Z","author_association":"MEMBER","body":"> It could be since that is where the work needs to be done but I didn't want it to be missed upon release. I feel like there is a greater likely hood of it being missed in the website repo since the website isn't tied to actual releases.\r\n\r\nThere are [so few open issues and PRs](https://github.com/apache/accumulo-website/issues?q=is%3Aopen) on the website repo, so it'd be hard to miss something if we just review all the issues at release time.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952045890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952057951","html_url":"https://github.com/apache/accumulo/issues/2328#issuecomment-952057951","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2328","id":952057951,"node_id":"IC_kwDOACaFSM44v0Bf","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T15:31:17Z","updated_at":"2021-10-26T15:31:17Z","author_association":"CONTRIBUTOR","body":"I think any operation that requires the table write lock would benefit from this change. One in particular that I think would be really useful is `DeleteTable`. This would be very useful for users with high table turnover.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952057951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952223372","html_url":"https://github.com/apache/accumulo/pull/2329#issuecomment-952223372","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2329","id":952223372,"node_id":"IC_kwDOACaFSM44wcaM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T18:59:06Z","updated_at":"2021-10-26T18:59:06Z","author_association":"CONTRIBUTOR","body":"This does not compile, just an illustration of the approach I was thinking of.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952223372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952224740","html_url":"https://github.com/apache/accumulo/pull/2321#issuecomment-952224740","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2321","id":952224740,"node_id":"IC_kwDOACaFSM44wcvk","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T19:00:59Z","updated_at":"2021-10-26T19:00:59Z","author_association":"CONTRIBUTOR","body":"The latest changes allow the thrift exception to include a small message on why it is thrown. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952224740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952242662","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-952242662","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":952242662,"node_id":"IC_kwDOACaFSM44whHm","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T19:25:02Z","updated_at":"2021-10-26T21:26:39Z","author_association":"CONTRIBUTOR","body":"For `ManagerApitIT`, it appears it getting stuck in `getConnectionWithRetry` when it gets to the privilegedUser test case inside `z99_testPermissions_shutdown`. From what I can tell, the initial go-around gives a connection refused exception to the manager. Then every time after, the amount of managers is 0 which is why it will keep looping. \r\n\r\nEDIT: It appears that the expectation in the test that both RPC calls complete before the manager shuts down is now incorrect. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952242662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952450607","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-952450607","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":952450607,"node_id":"IC_kwDOACaFSM44xT4v","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T01:06:01Z","updated_at":"2021-10-27T01:06:01Z","author_association":"CONTRIBUTOR","body":"The thread pool exception handling has been modified on the main branch and may mitigate this issue. @dlmarion may know (or can quickly check) ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952450607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952892838","html_url":"https://github.com/apache/accumulo/pull/2305#issuecomment-952892838","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2305","id":952892838,"node_id":"IC_kwDOACaFSM44y_2m","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T12:49:36Z","updated_at":"2021-10-27T12:49:36Z","author_association":"CONTRIBUTOR","body":"Build with ITs was successful. Two IT failures (CleanUpIT and ManagerApiIT), but I think they are known to have issues at this time (see https://github.com/apache/accumulo/issues/2327). Going to merge this in.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952892838/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952902711","html_url":"https://github.com/apache/accumulo/pull/2017#issuecomment-952902711","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2017","id":952902711,"node_id":"IC_kwDOACaFSM44zCQ3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T13:00:33Z","updated_at":"2021-10-27T13:00:33Z","author_association":"CONTRIBUTOR","body":"@EdColeman - I think this can be closed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952902711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952977486","html_url":"https://github.com/apache/accumulo/pull/2330#issuecomment-952977486","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2330","id":952977486,"node_id":"IC_kwDOACaFSM44zUhO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T14:17:41Z","updated_at":"2021-10-27T14:17:41Z","author_association":"CONTRIBUTOR","body":"I wonder if there is a consequence to performing compactions on tablets with a greater number of files first versus using a random distribution (or some other scheme). I'm thinking about the case where you have unbalanced ingest into a table, will you run into a case where compactions never happen for tablets that have a light amount of ingest because the tablets that have a large amount of ingest activity are constantly compacting? Same problem for multiple tables being assigned to the same compaction service. To be clear, my concern is starvation and the users inability to change it.\r\n\r\nI wonder, if instead of using some hardcoded priority, we let the user decide a mode to use instead. For example:\r\n\r\nFIFO - compact tablets that meet the compaction ratio threshold in time order\r\nLIFO - compact tablets that meet the compaction ratio threshold in reverse time order\r\nTOTAL_FILES - compact tablets with the largest number of files first (the current approach)\r\nMINIMUM_RESULTING_FILES - the approach contained in this PR\r\netc...","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/952977486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953006941","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953006941","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953006941,"node_id":"IC_kwDOACaFSM44zbtd","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T14:49:36Z","updated_at":"2021-10-27T14:49:36Z","author_association":"CONTRIBUTOR","body":"I started looking at CleanUpIT. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953006941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953009948","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-953009948","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":953009948,"node_id":"IC_kwDOACaFSM44zccc","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T14:52:45Z","updated_at":"2021-10-27T14:52:45Z","author_association":"CONTRIBUTOR","body":"I am not sure catching `Throwable` will help in this situation but this may be a case in the code where we want to catch `Throwable`, log it and re-throw.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953009948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953042225","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953042225","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953042225,"node_id":"IC_kwDOACaFSM44zkUx","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T15:26:32Z","updated_at":"2021-10-27T15:26:46Z","author_association":"CONTRIBUTOR","body":"> I started looking at CleanUpIT.\r\n\r\nIs this IT failing simply because it is expecting to close singleton resources which ThriftTransportPool no longer is? Basing this on the comments in `CleanUp.shutdownNow()`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953042225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953047321","html_url":"https://github.com/apache/accumulo/pull/2017#issuecomment-953047321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2017","id":953047321,"node_id":"IC_kwDOACaFSM44zlkZ","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T15:32:18Z","updated_at":"2021-10-27T15:32:18Z","author_association":"CONTRIBUTOR","body":"Superseded with PR #2305","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953047321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953072783","html_url":"https://github.com/apache/accumulo/issues/1647#issuecomment-953072783","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1647","id":953072783,"node_id":"IC_kwDOACaFSM44zryP","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T16:01:44Z","updated_at":"2021-10-27T16:01:44Z","author_association":"MEMBER","body":"Should this ticket be closed/renamed? The referenced failing tests were removed in aef266c31c8a0dfbec163135c5a21606aa038344.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953072783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953101564","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953101564","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953101564,"node_id":"IC_kwDOACaFSM44zyz8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T16:34:14Z","updated_at":"2021-10-27T16:34:14Z","author_association":"CONTRIBUTOR","body":"> > I started looking at CleanUpIT.\r\n> \r\n> Is this IT failing simply because it is expecting to close singleton resources which ThriftTransportPool no longer is? Basing this on the comments in `CleanUp.shutdownNow()`\r\n\r\nYeah. When it calls `SingletonManager.setMode(Mode.CLIENT);` in `CleanUp.shutdownNow()`, it will call disable on all of the singleton services. The disable on ThriftTransportPool would get called there shutting down the thread but now its no longer a singleton so the thread isn't getting shutdown.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953101564/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953197378","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953197378","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953197378,"node_id":"IC_kwDOACaFSM440KNC","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T18:26:23Z","updated_at":"2021-10-27T18:26:23Z","author_association":"CONTRIBUTOR","body":"One solution would be to modify `CleanUp.shutdownNow()` to take a Connector object and close the client resources:\r\n<pre>\r\npublic static void shutdownNow(Connector conn) {\r\n    SingletonManager.setMode(Mode.CLIENT);\r\n    waitForZooKeeperClientThreads();\r\n    ConnectorImpl connImpl = (ConnectorImpl) conn;\r\n    connImpl.getAccumuloClient().close();\r\n  }\r\n</pre>\r\nThis will break previous usage of `CleanUp.shutdownNow()` which might be OK since it would force usage. But it could be an issue for users that call the method who don't have a `Connector` object available.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953197378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953302316","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953302316","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953302316,"node_id":"IC_kwDOACaFSM440j0s","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T20:53:21Z","updated_at":"2021-10-27T20:53:21Z","author_association":"CONTRIBUTOR","body":"I am not sure how the Manager can still accept RPC calls after being shut down but that's what the test failing in `ManagerApiIT` is testing. There are two calls to expectPermissionSuccess() made after shutting down, the first one succeeds but then it will hang indefinitely on the second. If you remove one of them, the test passes. So it seems like when the expectPermissionSuccess() succeeds, it closes things for good, which is odd since they both call the same code and should both be executing the finally in `ManagerClient`.\r\nhttps://github.com/apache/accumulo/blob/c9e3877373303997d42b465b2cdb62fd3fffd5d8/core/src/main/java/org/apache/accumulo/core/clientImpl/ManagerClient.java#L163-L166","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953302316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953331475","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-953331475","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":953331475,"node_id":"IC_kwDOACaFSM440q8T","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T21:38:55Z","updated_at":"2021-10-27T21:38:55Z","author_association":"CONTRIBUTOR","body":"Sorry, I must be missing something, or I didn't explain the situation well enough. \n\nThe tablet server itself is throwing an OOM error which is sent back to the client over the thrift RPC. The client itself is not OOM. \n\nThe existing behavior causes the batch writer to get stuck indefinitely. The binning thread should alert the user code that an error occurred so that it can retry with a new batch writer. A single bad tablet server should not bring a client writer to halt.\n\nSimilarly, when any kind of Throwable occurs in a batch writer SendTask, the task properly catches the Throwable and alerts the user code. The same should be done during mutation binning.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953331475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953334759","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953334759","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953334759,"node_id":"IC_kwDOACaFSM440rvn","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T21:45:09Z","updated_at":"2021-10-27T21:48:45Z","author_association":"CONTRIBUTOR","body":"> I am not sure how the Manager can still accept RPC calls after being shut down but that's what the test failing in ManagerApiIT is testing. There are two calls to expectPermissionSuccess() made after shutting down, the first one succeeds but then it will hang indefinitely on the second. If you remove one of them, the test passes. So it seems like when the expectPermissionSuccess() succeeds, it closes things for good, which is odd since they both call the same code and should both be executing the finally in ManagerClient.\r\n\r\nThat is what I found too. Tracing through the operation, manager doesn't finish shutting down until after the second one starts. Then it will run into a connection refused exception and then it will notice there are no managers left but will still keep retrying. I am not sure what the original intention of this test was but it does seem with the changes in #2303 either things shut down faster or it takes longer to run through the operation fully. The test originally expected both expectPermissionSuccess calls to start and finish on the same manager before either one fully closed it. Not sure why though since the test seems to only care about the permissions of the user. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953334759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953336005","html_url":"https://github.com/apache/accumulo/issues/2327#issuecomment-953336005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2327","id":953336005,"node_id":"IC_kwDOACaFSM440sDF","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T21:47:31Z","updated_at":"2021-10-27T21:52:31Z","author_association":"CONTRIBUTOR","body":"It will never get to https://github.com/apache/accumulo/blob/c9e3877373303997d42b465b2cdb62fd3fffd5d8/core/src/main/java/org/apache/accumulo/core/clientImpl/ManagerClient.java#L163-L166 on the second expectPermissionSuccess() call. It fails and hangs before it. \r\n\r\nIt will loop through here: https://github.com/apache/accumulo/blob/c9e3877373303997d42b465b2cdb62fd3fffd5d8/core/src/main/java/org/apache/accumulo/core/clientImpl/ManagerClient.java#L47-L52\r\nwhich getCconnection checks for the manager location which will become 0 before the second expectPermissionSuccess() can finish successfully/.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953336005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953377823","html_url":"https://github.com/apache/accumulo/pull/2332#issuecomment-953377823","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2332","id":953377823,"node_id":"IC_kwDOACaFSM4402Qf","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T23:15:39Z","updated_at":"2021-10-27T23:15:39Z","author_association":"CONTRIBUTOR","body":"Unlinked since it will close the issue before both ITs are fixed. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953377823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953397424","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-953397424","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":953397424,"node_id":"IC_kwDOACaFSM4407Cw","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T00:08:04Z","updated_at":"2021-10-28T00:10:30Z","author_association":"CONTRIBUTOR","body":"I admit, I'm having a hard time determining how exactly the exception is relayed through the RPC. I'll look at the stack traces again, but it's possible the OOM error  - Direct Memory is on the client side. However, I still believe this should be treated the same as it is in the SendTask\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953397424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953519743","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-953519743","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":953519743,"node_id":"IC_kwDOACaFSM441Y5_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T05:42:35Z","updated_at":"2021-10-28T05:42:35Z","author_association":"MEMBER","body":"I think this would be fixed by the work done in #1818. You list the main branch as being affected. Are you sure about that?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953519743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953758415","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-953758415","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":953758415,"node_id":"IC_kwDOACaFSM442TLP","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T11:31:57Z","updated_at":"2021-10-28T11:31:57Z","author_association":"CONTRIBUTOR","body":"I have not observed this happen on the main branch, but I see `catch Exception` is still there instead of `catch Throwable`. I do agree though that if this were to happen in main, the JVM would be terminated by the changes to NamingTheadFactory. \n\nI suppose that would theoretically resolve this considering the user code is notified (albeit aggressively). However, I would probably be unhappy if processes kept restarting randomly because of it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953758415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953814683","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-953814683","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":953814683,"node_id":"IC_kwDOACaFSM442g6b","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T12:52:58Z","updated_at":"2021-10-28T12:52:58Z","author_association":"CONTRIBUTOR","body":"Build with ITs succeeded over night after merging `main` into this branch and removing the ThreadPools methods with tracing parameters.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953814683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953837101","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-953837101","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":953837101,"node_id":"IC_kwDOACaFSM442mYt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T13:18:48Z","updated_at":"2021-10-28T13:18:48Z","author_association":"CONTRIBUTOR","body":"```\r\nthis:\r\ncatch (Exception e) {\r\nshould be changed to:\r\ncatch (Throwable e) {\r\n```\r\nWe stopped catching Throwable in #1840. Regarding the work done in #1818 , each Thread will have an uncaughtExceptionHandler that will terminate the VM on Error. I'm not suggesting that you should catch Error, but if the code in the Thread did so, then the VM would not terminate. Would you be able to provide client-side and server-side stack traces?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953837101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953853715","html_url":"https://github.com/apache/accumulo/pull/2330#issuecomment-953853715","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2330","id":953853715,"node_id":"IC_kwDOACaFSM442qcT","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T13:37:46Z","updated_at":"2021-10-28T14:09:47Z","author_association":"CONTRIBUTOR","body":">  To be clear, my concern is starvation and the users inability to change it.\r\n\r\nThe priority is decided by the pluggable compaction planner, so it could be changed by a user.  If there would be starvation, it could have happened before this change.  This change slightly improved the current default way of prioritizing that has the goal of reducing the avg number of files per tablet across the tserver.  I suspect any priority scheme that does not explicitly incorporate age always has some non-zero chance of starvation for a particular tablet.\r\n\r\nThis is based on memory, so I may be wrong, prior to the compaction changes in 2.1 the priority mechanism may have been hard coded w/o any for a user to change it. \r\n\r\n>  I'm thinking about the case where you have unbalanced ingest into a table, will you run into a case where compactions never happen for tablets that have a light amount of ingest because the tablets that have a large amount of ingest activity are constantly compacting?\r\n\r\nIn addition to giving user control over priority, 2.1 gives users another way to manage this situation.  Users can assign tables to different compaction services which can allows tables to be placed on different queues and thread pools.\r\n\r\nThe situation of starvation can only happen when queues are constantly full. I had to limit the compaction threads to one for the test just to force the condition of the queue always being full.  When the queues were not always full, I did not observe any impact from this change.\r\n\r\nOne other thing to consider when thinking about starvation is that user compactions are prioritized over system compactions in the default prio mechanism.  So system compactions can never starve user compactions.  For system compactions, I don't think the age really matters, just compact the tablet that will yield the most impact.  However for user compactions, maybe we should consider the age.  That way an older user compaction is not starved by newer user compaction.  May be good to open an issue about changing the default prio mechanism of user compactions to consider age.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953853715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953868025","html_url":"https://github.com/apache/accumulo/pull/2332#issuecomment-953868025","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2332","id":953868025,"node_id":"IC_kwDOACaFSM442t75","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T13:54:00Z","updated_at":"2021-10-28T13:54:00Z","author_association":"CONTRIBUTOR","body":"> Unlinked since it will close the issue before both ITs are fixed.\r\n\r\nThanks. I thought if I put extra words in the comment it wouldn't grab it haha","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953868025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953887988","html_url":"https://github.com/apache/accumulo/pull/2330#issuecomment-953887988","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2330","id":953887988,"node_id":"IC_kwDOACaFSM442yz0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T14:12:43Z","updated_at":"2021-10-28T14:12:43Z","author_association":"CONTRIBUTOR","body":"> I wonder, if instead of using some hardcoded priority, we let the user decide a mode to use instead.\r\n\r\nThe default compaction planner could certainly have more configuration options added to it related to priority.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953887988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953895169","html_url":"https://github.com/apache/accumulo/pull/2321#issuecomment-953895169","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2321","id":953895169,"node_id":"IC_kwDOACaFSM4420kB","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T14:20:06Z","updated_at":"2021-10-28T14:20:06Z","author_association":"CONTRIBUTOR","body":"@Manno15 were you able to test the upgrade again with this change? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953895169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953898731","html_url":"https://github.com/apache/accumulo/pull/2321#issuecomment-953898731","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2321","id":953898731,"node_id":"IC_kwDOACaFSM4421br","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T14:23:52Z","updated_at":"2021-10-28T14:23:52Z","author_association":"CONTRIBUTOR","body":"> @Manno15 were you able to test the upgrade again with this change?\r\n\r\n@milleruntime Yes, as it stands now, the exception will be thrown but will now include a reasonable description of the issue. Everything else still works as expected.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953898731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953967015","html_url":"https://github.com/apache/accumulo/pull/2332#issuecomment-953967015","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2332","id":953967015,"node_id":"IC_kwDOACaFSM443GGn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T15:39:26Z","updated_at":"2021-10-28T15:39:26Z","author_association":"MEMBER","body":"> > Unlinked since it will close the issue before both ITs are fixed.\r\n> \r\n> Thanks. I thought if I put extra words in the comment it wouldn't grab it haha\r\n\r\nIt should still be linked. The issue can be re-opened until it is closed by the other fix. I will re-link it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953967015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953972129","html_url":"https://github.com/apache/accumulo/issues/1071#issuecomment-953972129","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1071","id":953972129,"node_id":"IC_kwDOACaFSM443HWh","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T15:45:29Z","updated_at":"2021-10-28T15:45:29Z","author_association":"MEMBER","body":"Can this be closed since Accumulo no longer merges minor compactions?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953972129/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953990494","html_url":"https://github.com/apache/accumulo/pull/2333#issuecomment-953990494","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2333","id":953990494,"node_id":"IC_kwDOACaFSM443L1e","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T16:07:29Z","updated_at":"2021-10-28T16:07:29Z","author_association":"CONTRIBUTOR","body":"Actually, I think I figured out a way to do both calls in the test after shutting down. Putting up a change shortly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/953990494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954006915","html_url":"https://github.com/apache/accumulo/pull/2333#issuecomment-954006915","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2333","id":954006915,"node_id":"IC_kwDOACaFSM443P2D","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T16:27:41Z","updated_at":"2021-10-28T16:27:41Z","author_association":"CONTRIBUTOR","body":"The IT is passing with my last changes:\r\n<pre>\r\n[INFO] Running org.apache.accumulo.test.functional.ManagerApiIT\r\n[INFO] Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 19.635 s - in org.apache.accumulo.test.functional.ManagerApiIT\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954006915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954010695","html_url":"https://github.com/apache/accumulo/pull/2333#issuecomment-954010695","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2333","id":954010695,"node_id":"IC_kwDOACaFSM443QxH","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T16:32:38Z","updated_at":"2021-10-28T16:32:38Z","author_association":"CONTRIBUTOR","body":"> The IT is passing with my last changes:\r\n\r\nI can confirm the test is passing now. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954010695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954062394","html_url":"https://github.com/apache/accumulo/issues/1071#issuecomment-954062394","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1071","id":954062394,"node_id":"IC_kwDOACaFSM443dY6","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T17:43:02Z","updated_at":"2021-10-28T17:43:02Z","author_association":"MEMBER","body":"Accumulo no longer merges minor compactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954062394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954096283","html_url":"https://github.com/apache/accumulo/issues/2271#issuecomment-954096283","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2271","id":954096283,"node_id":"IC_kwDOACaFSM443lqb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T18:29:54Z","updated_at":"2021-10-28T18:29:54Z","author_association":"CONTRIBUTOR","body":"#2305 includes creating metrics for all thread pools created via the [ThreadPools](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/util/threads/ThreadPools.java) class using [MetricsUtils.addExecutorServiceMetrics](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/metrics/MetricsUtil.java#L122)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954096283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954163018","html_url":"https://github.com/apache/accumulo/issues/758#issuecomment-954163018","issue_url":"https://api.github.com/repos/apache/accumulo/issues/758","id":954163018,"node_id":"IC_kwDOACaFSM44319K","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T20:07:42Z","updated_at":"2021-10-28T20:07:42Z","author_association":"MEMBER","body":"Is it okay if I start looking into this @milleruntime? It doesn't appear the other assignee has been active for a while.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954163018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954199265","html_url":"https://github.com/apache/accumulo/issues/758#issuecomment-954199265","issue_url":"https://api.github.com/repos/apache/accumulo/issues/758","id":954199265,"node_id":"IC_kwDOACaFSM443-zh","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T20:43:14Z","updated_at":"2021-10-28T20:43:14Z","author_association":"CONTRIBUTOR","body":"> Is it okay if I start looking into this @milleruntime? It doesn't appear the other assignee has been active for a while.\r\n\r\nYeah go for it! I haven't look at this in a while.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954199265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954211291","html_url":"https://github.com/apache/accumulo/issues/758#issuecomment-954211291","issue_url":"https://api.github.com/repos/apache/accumulo/issues/758","id":954211291,"node_id":"IC_kwDOACaFSM444Bvb","user":{"login":"PircDef","id":31989480,"node_id":"MDQ6VXNlcjMxOTg5NDgw","avatar_url":"https://avatars.githubusercontent.com/u/31989480?v=4","gravatar_id":"","url":"https://api.github.com/users/PircDef","html_url":"https://github.com/PircDef","followers_url":"https://api.github.com/users/PircDef/followers","following_url":"https://api.github.com/users/PircDef/following{/other_user}","gists_url":"https://api.github.com/users/PircDef/gists{/gist_id}","starred_url":"https://api.github.com/users/PircDef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PircDef/subscriptions","organizations_url":"https://api.github.com/users/PircDef/orgs","repos_url":"https://api.github.com/users/PircDef/repos","events_url":"https://api.github.com/users/PircDef/events{/privacy}","received_events_url":"https://api.github.com/users/PircDef/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T20:56:13Z","updated_at":"2021-10-28T20:56:13Z","author_association":"MEMBER","body":"> Is it okay if I start looking into this @milleruntime? It doesn't appear the other assignee has been active for a while.\r\n\r\nIf you want to tag me when you post a PR, I'll take a look at it, too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954211291/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954262930","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-954262930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":954262930,"node_id":"IC_kwDOACaFSM444OWS","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T22:09:05Z","updated_at":"2021-10-28T22:09:05Z","author_association":"CONTRIBUTOR","body":"It would be difficult to get a stack trace. Looking it over again though I was wrong initially. The OOM error IS on the client side, thrown when thrift tries to allocate a direct byte buffer.\n\nI made a patch on my system and it appears to have prevented the batch writer from getting stuck (as expected).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954262930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954267513","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-954267513","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":954267513,"node_id":"IC_kwDOACaFSM444Pd5","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T22:17:46Z","updated_at":"2021-10-28T22:17:46Z","author_association":"CONTRIBUTOR","body":"Do you intend to submit a patch?  There is work currently being done to fix gc issues, see PR https://github.com/apache/accumulo/pull/2293 - these will be targeted to 1.10.x and main. If you can provide a 1.10.x patch, then maybe both fixes will be available to users at the same time?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954267513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954275631","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-954275631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":954275631,"node_id":"IC_kwDOACaFSM444Rcv","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T22:35:30Z","updated_at":"2021-10-28T22:35:30Z","author_association":"CONTRIBUTOR","body":"Yeah, I can certainly submit a PR. I assume from the dialog you do not want one for main?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954275631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954278989","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-954278989","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":954278989,"node_id":"IC_kwDOACaFSM444SRN","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T22:43:51Z","updated_at":"2021-10-28T22:43:51Z","author_association":"CONTRIBUTOR","body":"Sorry if I gave that impression - it is very much preferred that the solution be provided for both.  There was a discussion of this toward the end of that PR.  The tl/dr is that in the past we have run into issues if things are implemented differently in versions.\r\n\r\nI don't know will happen when that PR is merged to 1.10.x, but a bug release version seems like a possibility.  So, what I was hinting at is that maybe both fixes can make the same bug fix release - without saying or committing that such a release would happen ;-)  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954278989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954295847","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-954295847","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":954295847,"node_id":"IC_kwDOACaFSM444WYn","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T23:25:18Z","updated_at":"2021-10-28T23:25:18Z","author_association":"CONTRIBUTOR","body":"No problem, thanks! I will submit one for both versions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954295847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954800498","html_url":"https://github.com/apache/accumulo/issues/2208#issuecomment-954800498","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2208","id":954800498,"node_id":"IC_kwDOACaFSM446Rly","user":{"login":"tulikavijay","id":25117249,"node_id":"MDQ6VXNlcjI1MTE3MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/25117249?v=4","gravatar_id":"","url":"https://api.github.com/users/tulikavijay","html_url":"https://github.com/tulikavijay","followers_url":"https://api.github.com/users/tulikavijay/followers","following_url":"https://api.github.com/users/tulikavijay/following{/other_user}","gists_url":"https://api.github.com/users/tulikavijay/gists{/gist_id}","starred_url":"https://api.github.com/users/tulikavijay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tulikavijay/subscriptions","organizations_url":"https://api.github.com/users/tulikavijay/orgs","repos_url":"https://api.github.com/users/tulikavijay/repos","events_url":"https://api.github.com/users/tulikavijay/events{/privacy}","received_events_url":"https://api.github.com/users/tulikavijay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T14:42:09Z","updated_at":"2021-10-29T14:42:09Z","author_association":"CONTRIBUTOR","body":"Hi @keith-turner Can I work on this. seems like there is no PR for this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954800498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954807135","html_url":"https://github.com/apache/accumulo/issues/2208#issuecomment-954807135","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2208","id":954807135,"node_id":"IC_kwDOACaFSM446TNf","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T14:51:17Z","updated_at":"2021-10-29T14:51:17Z","author_association":"CONTRIBUTOR","body":"> Hi @keith-turner Can I work on this. seems like there is no PR for this\r\n\r\nSure.  I reassigned the issue to you.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954807135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954836856","html_url":"https://github.com/apache/accumulo/issues/758#issuecomment-954836856","issue_url":"https://api.github.com/repos/apache/accumulo/issues/758","id":954836856,"node_id":"IC_kwDOACaFSM446ad4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T15:31:35Z","updated_at":"2021-10-29T15:31:35Z","author_association":"MEMBER","body":"This may depend on #2197 being finalized.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954836856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954902565","html_url":"https://github.com/apache/accumulo/issues/758#issuecomment-954902565","issue_url":"https://api.github.com/repos/apache/accumulo/issues/758","id":954902565,"node_id":"IC_kwDOACaFSM446qgl","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T17:03:20Z","updated_at":"2021-10-29T17:03:20Z","author_association":"MEMBER","body":"> This may depend on #2197 being finalized.\r\n\r\nYea, it looks like it might. I'll work on something else until this is ready.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954902565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954904315","html_url":"https://github.com/apache/accumulo/pull/2334#issuecomment-954904315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2334","id":954904315,"node_id":"IC_kwDOACaFSM446q77","user":{"login":"tulikavijay","id":25117249,"node_id":"MDQ6VXNlcjI1MTE3MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/25117249?v=4","gravatar_id":"","url":"https://api.github.com/users/tulikavijay","html_url":"https://github.com/tulikavijay","followers_url":"https://api.github.com/users/tulikavijay/followers","following_url":"https://api.github.com/users/tulikavijay/following{/other_user}","gists_url":"https://api.github.com/users/tulikavijay/gists{/gist_id}","starred_url":"https://api.github.com/users/tulikavijay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tulikavijay/subscriptions","organizations_url":"https://api.github.com/users/tulikavijay/orgs","repos_url":"https://api.github.com/users/tulikavijay/repos","events_url":"https://api.github.com/users/tulikavijay/events{/privacy}","received_events_url":"https://api.github.com/users/tulikavijay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T17:06:17Z","updated_at":"2021-10-29T17:06:17Z","author_association":"CONTRIBUTOR","body":"I'll fix the validation","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954904315/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954904901","html_url":"https://github.com/apache/accumulo/pull/2334#issuecomment-954904901","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2334","id":954904901,"node_id":"IC_kwDOACaFSM446rFF","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T17:07:14Z","updated_at":"2021-10-29T17:07:14Z","author_association":"MEMBER","body":"It looks like the build is failing because the files have not been formatted. Are you able to run `mvn clean package -DskipTests` and commit the formatting changes that will make?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/954904901/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/955708431","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-955708431","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":955708431,"node_id":"IC_kwDOACaFSM449vQP","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-31T14:13:04Z","updated_at":"2021-10-31T14:13:04Z","author_association":"CONTRIBUTOR","body":"After looking main over more closely, I see what @dlmarion was talking about with regard to changes in #1840. I decided not to do anything on main since #1840 explicitly prevented TabletServerBatchWriter from catching Throwbles.\r\n\r\nHowever, after considering the discussion in #1840, I think the changes there were all made from the server's perspective even though TabletServerBatchWriter is primarily a client API. It seems TabletServerBatchWriter (and possibly other classes used by the client) should be more cognizant of the environment it is running in when deciding whether to report Throwables to the client verses halting the JVM. I don't think libraries should be making these kinds of decisions for their user.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/955708431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956177826","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956177826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956177826,"node_id":"IC_kwDOACaFSM44_h2i","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T12:06:34Z","updated_at":"2021-11-01T12:06:34Z","author_association":"CONTRIBUTOR","body":"> I think the changes there were all made from the server's perspective even though TabletServerBatchWriter is primarily a client API.\r\n\r\nFair point about the client API, but I'm struggling with how to deal with this. Suggestions would be welcome. The [api](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Error.html) docs say \" a reasonable application should not try to catch\" Error's. The [JLS](https://docs.oracle.com/javase/specs/jls/se8/html/jls-11.html#jls-11.3) says that \"... catching errors from which recovery is typically not possible.\"\r\n\r\nIf we want the client application to handle Error's, maybe the right approach is:\r\n\r\n  1. Only halt the VM in the AccumuloUncaughtExceptionHandler when it's running in the Accumulo server processes. Is there currently a way to determine this? One thought would be to set a system property in the AbstractServer constructor.\r\n \r\n  2. For threads in the client, allow the thread to die, and check to see whether or not it's still alive. Or maybe there is a client side uncaught exception handler.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956177826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956340936","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956340936","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956340936,"node_id":"IC_kwDOACaFSM45AJrI","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T15:38:05Z","updated_at":"2021-11-01T15:38:20Z","author_association":"CONTRIBUTOR","body":"Yeah it's tricky. Unfortunately in this situation the error is recoverable and handling it is required in order to prevent resource leaks (stuck threads in this case).\n\nIn either case, I think the system property is probably the easiest way to determine whether or not to halt. As far as notifying the user, I think the cleanest way is to use the existing mechanism (in 1.10.x) where the Throwable is re-thrown. Alternaively, it could be provided to a client side ucaught exception handler, but the BatchWriter/BatchScanner/etc would still have to be closed so the user thread is freed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956340936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956451489","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956451489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956451489,"node_id":"IC_kwDOACaFSM45Akqh","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T17:54:38Z","updated_at":"2021-11-01T17:57:03Z","author_association":"MEMBER","body":"Trying to recover from Errors seems like the moldy bread of the Java world. Yeah, sure, *maybe* you can cut around the problem, and continue eating safely, but it's not a great idea. When mold occurs, you can't trust that there's not mold in smaller, less visible amounts on the rest of the loaf. Similarly, when an Error occurs, I don't see how you can trust the rest of the state of the JVM... especially something like OutOfMemoryError, which can have cascading effects on other threads in the JVM, possibly really important ones in your dependent libraries or even internal to Java itself. Errors aren't just something you can catch, clean up, and have confidence that all is fine afterwards... they reflect a serious problem with the overall state of the application. Java's own documentation says that these are likely not recoverable, so I have a hard time understanding the desire to try to recover from them, or the confidence that one will actually be able to pull it off reliably without unforeseen consequences.\r\n\r\nEven if we were to make OutOfMemoryError in these particular threads not terminal, we can't assume Errors in the general case are safe enough to try to handle. So, we'd have to start baking in heuristics to try to determine which of the \"likely not recoverable\" errors we believe are more likely than others to be able to recover from, and we have to include assumptions about what triggered the Error as part of those heuristics. Or, we have to treat them all the same, and pass these through to calling client code, to let them decide what to do. Either way, that seems likely to increase code complexity, to support highly questionable behavior.\r\n\r\nIf there's a high demand or strong use case for it, I suppose I could support the idea of making the uncaught exception handler pluggable via client API. But, it really seems like a bad idea to me (for an implementation to do anything other than try to shut the JVM down as quickly as possible)... just like moldy bread.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956451489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956512589","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956512589","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956512589,"node_id":"IC_kwDOACaFSM45AzlN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T19:11:35Z","updated_at":"2021-11-01T19:11:35Z","author_association":"CONTRIBUTOR","body":"So, two other related thoughts here:\r\n\r\n1. There are many flavors of OutOfMemoryError. I imagine that you are trying to handle the case where it's \"java heap space\" by trying to create a smaller object (From what I read, Java heap space is thrown based on a pre-calculation of the size of the object being allocated and the max heap size, thus the VM didn't really run out of memory). It's not clear to me how you would handle other flavors of OutOfMemoryError: direct memory, metaspace, gc overhead limit exceeded, etc.\r\n\r\n2. I don't see how you can effectively handle the \"java heap space\" OOME when it occurs in another thread. The asynchronous nature of this definitely increases the complexity.\r\n\r\nA lot of the recommendations for handling OOME's deal with finding memory leaks and/or changing VM parameters. There is also the case where it's not a leak and the application is trying to allocate more memory than it was given, which leads back to changing VM parameters.\r\n\r\nThis is also a good time to remind that there are new VM [options](https://bugs.openjdk.java.net/browse/JDK-8258058) for exiting the VM on OOME, which seem handy, but do [not](https://bugs.openjdk.java.net/browse/JDK-8155004) work when the reason for OOME is the inability to create a new native thread.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956512589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956515666","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956515666","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956515666,"node_id":"IC_kwDOACaFSM45A0VS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T19:15:46Z","updated_at":"2021-11-01T19:16:44Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  - do you have any thoughts on not halting the VM from the AccumuloUncaughtExceptionHandler when it's being used in a client application? I do agree with @andrewglowacki that libraries should not be shutting down the VM.\r\n\r\nEdit - I see now, you said:\r\n> If there's a high demand or strong use case for it, I suppose I could support the idea of making the uncaught exception handler pluggable via client API.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956515666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956549872","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956549872","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956549872,"node_id":"IC_kwDOACaFSM45A8rw","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T20:06:15Z","updated_at":"2021-11-01T20:08:54Z","author_association":"MEMBER","body":"> libraries should not be shutting down the VM\r\n\r\nThe library didn't cause the OutOfMemory (unless it did, in which case, the right solution is to fix our memory leakage! :smiley_cat:). The alternative is that the library intentionally leaves the client in a bad, likely unrecoverable, state. I'm not sure that's any better. This isn't that different from a segfault in a library that causes a process to die. Or, a memory-hogging native process to cause another process in the OS to be killed by the OOM-killer. No, a library shutting down the VM isn't good... but there aren't reliably good outcomes under Error conditions, by definition... that's why they are an Error instead of an Exception.\r\n\r\n> Edit - I see now, you said:\r\n> \r\n> > If there's a high demand or strong use case for it, I suppose I could support the idea of making the uncaught exception handler pluggable via client API.\r\n\r\nI'd support this approach. But, I have two standing concerns:\r\n\r\n1. Enabling users to accidentally shoot themselves in the foot (and possibly \"blame\" Accumulo, because the errors appear to originate in Accumulo threads, and mishandling of the errors could lead to user code being affected), and\r\n2. Increased code complexity to support this use case (that we might not even recommend users exercise).\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956549872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956560433","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956560433","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956560433,"node_id":"IC_kwDOACaFSM45A_Qx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T20:20:34Z","updated_at":"2021-11-01T20:20:34Z","author_association":"CONTRIBUTOR","body":"> This isn't that different from a segfault in a library that causes a process to die. Or, a memory-hogging native process to cause another process in the OS to be killed by the OOM-killer. \r\n\r\nThere are good examples.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956560433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956602669","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-956602669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":956602669,"node_id":"IC_kwDOACaFSM45BJkt","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T21:13:58Z","updated_at":"2021-11-01T21:13:58Z","author_association":"CONTRIBUTOR","body":">  I do agree with @andrewglowacki that libraries should not be shutting down the VM.\r\n\r\nThe uncaught handler that hlts seems to be setup by Threads.createThread(...).  One possible way to make this not halt for client code is to move this to client context.  So client context could have a create thread method that does not halt in the createThread method and server context could override createThread and halt in the uncaught handler.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/956602669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957004905","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-957004905","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":957004905,"node_id":"IC_kwDOACaFSM45Crxp","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T00:49:42Z","updated_at":"2021-11-02T00:49:42Z","author_association":"CONTRIBUTOR","body":"@dlmarion exactly there are many flavors of OOM error.\n@ctubbsii OOM errors are recoverable in certain situations.\n\n1. The one I see regularly is the 'direct memory' flavor. This one occurs when you try to allocate a direct byte buffer, but you've reached your pre-configured direct memory limit. This happens because direct memory is only freed after DBBs are GC'd. This is unlike normal resources where you can call close() and the resource is freed immediately. DBBs are used in Hadoop (and Thrift apparently) to improve I/O performance. Therefore, as long as you wait a little while, direct memory OOM errors will eventually go away and they don't have anything to do with normal JVM memory.\n\n2. The other case is less exact but I still encounter it frequently. Suppose you have N threads each executing a high memory consuming operation local to the thread. Then suppose you run out of memory or reach the GC overhead limit in one or more of them, provoking a OOM error. In this situation, once the thread is terminated, the GC can run, and the JVM will have plenty of memory free again.\n\nEither way, it doesn't matter who caused the OOM error. It is up to the library maintainer to ensure resources are properly freed *in all cases*. The JVM itself does this with the try-with-resources construct. It doesn't stop to verify whether or not the exception that's unrolling the stack is a Error. It just closes the resource it's managing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957004905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957049695","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-957049695","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":957049695,"node_id":"IC_kwDOACaFSM45C2tf","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T02:46:39Z","updated_at":"2021-11-02T02:46:39Z","author_association":"CONTRIBUTOR","body":"Sorry I think I've gotten this issue quite a bit off topic. Clearly main's batch writer will not become stuck in this case, so my single PR resolves this issue. \n\nI will (or someone can if they think it's still worth addressing) can open a separate issue for Error handling in client APIs on main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957049695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957361677","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-957361677","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":957361677,"node_id":"IC_kwDOACaFSM45EC4N","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T11:42:29Z","updated_at":"2021-11-02T11:42:29Z","author_association":"CONTRIBUTOR","body":"> The uncaught handler that hlts seems to be setup by Threads.createThread(...). One possible way to make this not halt for client code is to move this to client context. So client context could have a create thread method that does not halt in the createThread method and server context could override createThread and halt in the uncaught handler.\r\n\r\nThis makes sense, but then I would have to wire up the Context in all the places, possibly modifying even more code where a Thread is created but there is no reference to the Context. If we want to make it such that an Error does not halt the client VM, then it looks like the `SingletonManager.getMode()` might do what I need. `SingletonManager.setMode(Mode.SERVER)` is only called from `ServerInfo`. If the value is `Mode.SERVER`, then halt the VM on Error. Otherwise, just log the fact that the Thread has died. To be clear this would allow the Thread to die, as would happen prior to 2.1.0, in clients. This would not propagate the Error back to the caller so that they could handle the Error.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957361677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957553134","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-957553134","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":957553134,"node_id":"IC_kwDOACaFSM45Exnu","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T13:18:27Z","updated_at":"2021-11-02T13:18:27Z","author_association":"CONTRIBUTOR","body":"> then it looks like the SingletonManager.getMode() might do what I need\r\n\r\nThat would work perfectly, I like it.  Its internal code so it could always be improved later if we think of a better way to solve the problem,  But it would be nice to fix the problem before release.\r\n\r\nI am not sure its appropriate for this particular case but one thing to consider in general from an API perspective is letting users pass in ExecutorServices and Thread Factories.  The new bulk load API accepts an ExecutorService, giving users more control over background task that execute on the client side as part of a bulk load.  I did look around a bit to see if passing in a ThreadFactory would be better than letting a user pass in an uncaught exception handler and did not come to a conclusion.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957553134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957626267","html_url":"https://github.com/apache/accumulo/pull/2324#issuecomment-957626267","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2324","id":957626267,"node_id":"IC_kwDOACaFSM45FDeb","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T13:54:29Z","updated_at":"2021-11-02T13:54:29Z","author_association":"CONTRIBUTOR","body":"@keith-turner - are you still looking?  I've updated the code to use the micrometer metrics, but if I push, the merge could make it harder to follow comments to date and didn't want to just pull the rug out without warning. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957626267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957652665","html_url":"https://github.com/apache/accumulo/pull/2324#issuecomment-957652665","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2324","id":957652665,"node_id":"IC_kwDOACaFSM45FJ65","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T14:06:59Z","updated_at":"2021-11-02T14:06:59Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - are you still looking? I've updated the code to use the micrometer metrics, but if I push, the merge could make it harder to follow comments to date and didn't want to just pull the rug out without warning.\r\n\r\nI was still planning to look over it some more.  Go ahead and push the merge, I know functionally what I have looked at and have not.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957652665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957979164","html_url":"https://github.com/apache/accumulo/issues/2331#issuecomment-957979164","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2331","id":957979164,"node_id":"IC_kwDOACaFSM45GZoc","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T17:39:00Z","updated_at":"2021-11-02T17:39:00Z","author_association":"MEMBER","body":"> @ctubbsii OOM errors are recoverable in certain situations.\r\n\r\nI agree that some are. I just don't think we can *reliably* distinguish between them, or that it's worth adding substantial code complexity to try to add in heuristics to try to distinguish. It may be worth adding minimal code complexity to allow users to decide, though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957979164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957986534","html_url":"https://github.com/apache/accumulo/pull/2339#issuecomment-957986534","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2339","id":957986534,"node_id":"IC_kwDOACaFSM45Gbbm","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T17:48:34Z","updated_at":"2021-11-02T17:48:34Z","author_association":"CONTRIBUTOR","body":"LGTM - seeing all of the places where we create an instance of SecureRandom - would there be significant benefit if a ServerContext created an instance an then it was reused anywhere that a random number was needed and context was available - possibly as a follow on PR?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957986534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957998895","html_url":"https://github.com/apache/accumulo/pull/2339#issuecomment-957998895","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2339","id":957998895,"node_id":"IC_kwDOACaFSM45Gecv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T18:04:59Z","updated_at":"2021-11-02T18:04:59Z","author_association":"MEMBER","body":"> LGTM - seeing all of the places where we create an instance of SecureRandom - would there be significant benefit if a ServerContext created an instance an then it was reused anywhere that a random number was needed and context was available - possibly as a follow on PR?\r\n\r\nSo, I thought about that... but, there's a risk of having things block if the Java security provider for SecureRandom isn't thread safe. So, I chose to limit the amount of sharing of these instances. So, if the implementation is thread-safe, there's just a few extra objects hanging around in the JVM, but if it's not thread-safe, the scope of any potential contention is limited.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/957998895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958035466","html_url":"https://github.com/apache/accumulo/issues/2341#issuecomment-958035466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2341","id":958035466,"node_id":"IC_kwDOACaFSM45GnYK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T18:43:19Z","updated_at":"2021-11-02T18:43:19Z","author_association":"CONTRIBUTOR","body":"I started looking into this issue but got sidetracked by another nasty bug in #2342. It seems like the issue here is due to the moving of system iterator classes done for #1411 and when a runtime iterator stack gets created with iterators for locality groups, the class hierarchy is broken.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958035466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958119343","html_url":"https://github.com/apache/accumulo/pull/2340#issuecomment-958119343","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2340","id":958119343,"node_id":"IC_kwDOACaFSM45G72v","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T19:54:45Z","updated_at":"2021-11-02T19:54:45Z","author_association":"CONTRIBUTOR","body":"While looking at this I noticed that 'CleanerUtil.shutdownThreadPoolExecutor` is called from only one location in the client code (TabletServerBatchReader). Should we fix that also?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958119343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958183492","html_url":"https://github.com/apache/accumulo/pull/2340#issuecomment-958183492","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2340","id":958183492,"node_id":"IC_kwDOACaFSM45HLhE","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T21:32:32Z","updated_at":"2021-11-02T21:32:32Z","author_association":"CONTRIBUTOR","body":"For reference this is maybe the only place in the API where a user can currently pass in an Executor\r\n\r\nhttps://github.com/apache/accumulo/blob/dc847b1fb971efa81e6fcc24f126e93fcc1ddf8a/core/src/main/java/org/apache/accumulo/core/client/admin/TableOperations.java#L776-L785","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958183492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958187138","html_url":"https://github.com/apache/accumulo/issues/2343#issuecomment-958187138","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2343","id":958187138,"node_id":"IC_kwDOACaFSM45HMaC","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T21:38:49Z","updated_at":"2021-11-02T21:38:49Z","author_association":"MEMBER","body":"Here is another failure\r\n\r\n```\r\n[ERROR] Tests run: 47, Failures: 0, Errors: 6, Skipped: 0, Time elapsed: 25.039 s <<< FAILURE! - in org.apache.accumulo.core.file.rfile.RFileTest                                             \r\n[ERROR] org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile13  Time elapsed: 0.752 s  <<< ERROR!                                                                                       \r\norg.apache.accumulo.core.spi.crypto.CryptoService$CryptoException: Unable to load key encryption key.                                                                                         \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test13(RFileTest.java:1344)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile13(RFileTest.java:1903)                                                                                                  \r\nCaused by: java.lang.IllegalArgumentException: Empty key                                                                                                                                      \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test13(RFileTest.java:1344)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile13(RFileTest.java:1903)                                                                                                  \r\n                                                                                                                                                                                              \r\n[ERROR] org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile14  Time elapsed: 0.001 s  <<< ERROR!                                                                                       \r\norg.apache.accumulo.core.spi.crypto.CryptoService$CryptoException: Unable to load key encryption key.                                                                                         \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test14(RFileTest.java:1360)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile14(RFileTest.java:1910)                                                                                                  \r\nCaused by: java.lang.IllegalArgumentException: Empty key                                                                                                                                      \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test14(RFileTest.java:1360)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile14(RFileTest.java:1910)                                                                                                  \r\n                                                                                                                                                                                              \r\n[ERROR] org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile16  Time elapsed: 0 s  <<< ERROR!                                                                                           \r\norg.apache.accumulo.core.spi.crypto.CryptoService$CryptoException: Unable to load key encryption key.                                                                                         \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test16(RFileTest.java:1384)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile16(RFileTest.java:1917)                                                                                                  \r\nCaused by: java.lang.IllegalArgumentException: Empty key                                                                                                                                      \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test16(RFileTest.java:1384)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile16(RFileTest.java:1917)                                                                                                  \r\n                                                                                                                                                                                              \r\n[ERROR] org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile17  Time elapsed: 0 s  <<< ERROR!                                                                                           \r\norg.apache.accumulo.core.spi.crypto.CryptoService$CryptoException: Unable to load key encryption key.                                                                                         \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test17(RFileTest.java:1407)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile17(RFileTest.java:1923)                                                                                                  \r\nCaused by: java.lang.IllegalArgumentException: Empty key                                                                                                                                      \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test17(RFileTest.java:1407)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile17(RFileTest.java:1923)                                                                                                  \r\n                                                                                                                                                                                              \r\n[ERROR] org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile18  Time elapsed: 0 s  <<< ERROR!                                                                                           \r\norg.apache.accumulo.core.spi.crypto.CryptoService$CryptoException: Unable to load key encryption key.                                                                                         \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test18(RFileTest.java:1548)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile18(RFileTest.java:1929)                                                                                                  \r\nCaused by: java.lang.IllegalArgumentException: Empty key                                                                                                                                      \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test18(RFileTest.java:1548)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile18(RFileTest.java:1929)   \r\n\r\n[ERROR] org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile19  Time elapsed: 0.053 s  <<< ERROR!                                                                                       \r\norg.apache.accumulo.core.spi.crypto.CryptoService$CryptoException: Unable to load key encryption key.                                                                                         \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test19(RFileTest.java:1599)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile19(RFileTest.java:1936)                                                                                                  \r\nCaused by: java.lang.IllegalArgumentException: Empty key                                                                                                                                      \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.test19(RFileTest.java:1599)                                                                                                          \r\n        at org.apache.accumulo.core.file.rfile.RFileTest.testEncRFile19(RFileTest.java:1936)                                                                                                  \r\n                                                                                                                                                                                              \r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 13.86 s - in org.apache.accumulo.core.spi.balancer.HostRegexTableLoadBalancerReconfigurationTest                       \r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 21.528 s - in org.apache.accumulo.fate.zookeeper.ZooSessionTest                                                        \r\n[INFO]                                                                                                                                                                                        \r\n[INFO] Results:                                                                                                                                                                               \r\n[INFO]                                                                                                                                                                                        \r\n[ERROR] Errors:                                                                                                                                                                               \r\n[ERROR]   RFileTest.testEncRFile13:1903->test13:1344  Crypto Unable to load key encrypt...                                                                                                   \r\n[ERROR]   RFileTest.testEncRFile14:1910->test14:1360  Crypto Unable to load key encrypt...                                                                                                   \r\n[ERROR]   RFileTest.testEncRFile16:1917->test16:1384  Crypto Unable to load key encrypt...                                                                                                   \r\n[ERROR]   RFileTest.testEncRFile17:1923->test17:1407  Crypto Unable to load key encrypt...                                                                                                   \r\n[ERROR]   RFileTest.testEncRFile18:1929->test18:1548  Crypto Unable to load key encrypt...                                                                                                   \r\n[ERROR]   RFileTest.testEncRFile19:1936->test19:1599  Crypto Unable to load key encrypt...                                                                                                   \r\n[INFO]                                                                                                                                                                                        \r\n[ERROR] Tests run: 1178, Failures: 0, Errors: 6, Skipped: 0                                                                                                                                   \r\n[INFO]                                                          \r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958187138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958189706","html_url":"https://github.com/apache/accumulo/issues/2343#issuecomment-958189706","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2343","id":958189706,"node_id":"IC_kwDOACaFSM45HNCK","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T21:43:24Z","updated_at":"2021-11-02T21:43:24Z","author_association":"MEMBER","body":"@milleruntime have you see this behavior?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958189706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958214391","html_url":"https://github.com/apache/accumulo/issues/2341#issuecomment-958214391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2341","id":958214391,"node_id":"IC_kwDOACaFSM45HTD3","user":{"login":"keith-ratcliffe","id":1606834,"node_id":"MDQ6VXNlcjE2MDY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1606834?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-ratcliffe","html_url":"https://github.com/keith-ratcliffe","followers_url":"https://api.github.com/users/keith-ratcliffe/followers","following_url":"https://api.github.com/users/keith-ratcliffe/following{/other_user}","gists_url":"https://api.github.com/users/keith-ratcliffe/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-ratcliffe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-ratcliffe/subscriptions","organizations_url":"https://api.github.com/users/keith-ratcliffe/orgs","repos_url":"https://api.github.com/users/keith-ratcliffe/repos","events_url":"https://api.github.com/users/keith-ratcliffe/events{/privacy}","received_events_url":"https://api.github.com/users/keith-ratcliffe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T21:54:57Z","updated_at":"2021-11-02T21:54:57Z","author_association":"CONTRIBUTOR","body":"FWIW....I temporarily modified my snapshot deployment to have `SortedMapIterator` re-implement `InterruptibleIterator` so that I could proceed with integration testing. That does seem to have resolved the issue for me, but I'm assuming that's not the desired fix, since it ostensibly violates the spirit of #1411","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958214391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958633829","html_url":"https://github.com/apache/accumulo/issues/2343#issuecomment-958633829","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2343","id":958633829,"node_id":"IC_kwDOACaFSM45I5dl","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T03:40:55Z","updated_at":"2021-11-03T03:45:01Z","author_association":"MEMBER","body":"I have seen this on the ASF Jenkins builds... but I have never seen it anywhere else. The ASF Jenkins servers aren't available for administrative access to troubleshoot the logs and state of the system when it happens, though, so it's been hard to track down. I can't reproduce it locally.\r\n\r\nAlso, just a note of caution, you shouldn't use `mvn clean test` for Accumulo, in general. For `<lengthy explanation; don't want to derail this; ask me in Slack or mailing list if you want details>`, it is better to use `mvn clean package` to run the unit tests.\r\n\r\nI tried to reproduce this by running it in a loop as fast as possible with a bash one-liner (exit condition on first failure):\r\n```bash\r\nwhile mvn clean process-test-classes surefire:test -pl start,core -Dtest=RFileTest -Dformatter.skip -Dimpsort.skip -Denforcer.skip -Dassembly.skip -Dsort.skip -Drat.skip -Dwarbucks.skip -Dmodernizer.skip -Dlicense.skip -Dremoteresources.skip; do true; done\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958633829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958671901","html_url":"https://github.com/apache/accumulo/pull/2337#issuecomment-958671901","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2337","id":958671901,"node_id":"IC_kwDOACaFSM45JCwd","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T05:53:55Z","updated_at":"2021-11-03T05:53:55Z","author_association":"MEMBER","body":"@andrewglowacki Am I right in thinking that a finished solution here will only apply to 1.10, and not to 2.1?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958671901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958672993","html_url":"https://github.com/apache/accumulo/pull/2342#issuecomment-958672993","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2342","id":958672993,"node_id":"IC_kwDOACaFSM45JDBh","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T05:58:12Z","updated_at":"2021-11-03T05:58:12Z","author_association":"MEMBER","body":"@milleruntime Does this IT currently fail, then?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958672993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958701223","html_url":"https://github.com/apache/accumulo/issues/2343#issuecomment-958701223","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2343","id":958701223,"node_id":"IC_kwDOACaFSM45JJ6n","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T07:14:29Z","updated_at":"2021-11-03T07:14:29Z","author_association":"MEMBER","body":"I think the issue is that RFileTest and CryptoTest can sometimes run concurrently, and they both use the same path for their key files (`CryptoTest.keyPath`). One might overwrite the file created by the other, so that when the other tries to read it, it gets no content. They should use unique paths. I'll prepare a PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958701223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958932073","html_url":"https://github.com/apache/accumulo/pull/2340#issuecomment-958932073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2340","id":958932073,"node_id":"IC_kwDOACaFSM45KCRp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T11:12:49Z","updated_at":"2021-11-03T11:12:49Z","author_association":"CONTRIBUTOR","body":"Thanks for the TableOperations reference. I added a deprecated annotation there too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958932073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958934185","html_url":"https://github.com/apache/accumulo/pull/2337#issuecomment-958934185","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2337","id":958934185,"node_id":"IC_kwDOACaFSM45KCyp","user":{"login":"andrewglowacki","id":5504606,"node_id":"MDQ6VXNlcjU1MDQ2MDY=","avatar_url":"https://avatars.githubusercontent.com/u/5504606?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewglowacki","html_url":"https://github.com/andrewglowacki","followers_url":"https://api.github.com/users/andrewglowacki/followers","following_url":"https://api.github.com/users/andrewglowacki/following{/other_user}","gists_url":"https://api.github.com/users/andrewglowacki/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewglowacki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewglowacki/subscriptions","organizations_url":"https://api.github.com/users/andrewglowacki/orgs","repos_url":"https://api.github.com/users/andrewglowacki/repos","events_url":"https://api.github.com/users/andrewglowacki/events{/privacy}","received_events_url":"https://api.github.com/users/andrewglowacki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T11:15:55Z","updated_at":"2021-11-03T11:15:55Z","author_association":"CONTRIBUTOR","body":"@ctubbsii yes, I think so considering 1.10 is the only version that was capable of getting stuck after all.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958934185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958981232","html_url":"https://github.com/apache/accumulo/issues/2343#issuecomment-958981232","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2343","id":958981232,"node_id":"IC_kwDOACaFSM45KORw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T12:23:55Z","updated_at":"2021-11-03T12:23:55Z","author_association":"CONTRIBUTOR","body":"I had not seen this failure but look like @ctubbsii already got a fix in #2344 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958981232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958985979","html_url":"https://github.com/apache/accumulo/issues/2343#issuecomment-958985979","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2343","id":958985979,"node_id":"IC_kwDOACaFSM45KPb7","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T12:27:53Z","updated_at":"2021-11-03T12:27:53Z","author_association":"MEMBER","body":"Thanks @ctubbsii @milleruntime, will take a look tomorrow\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958985979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958991447","html_url":"https://github.com/apache/accumulo/pull/2342#issuecomment-958991447","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2342","id":958991447,"node_id":"IC_kwDOACaFSM45KQxX","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T12:36:01Z","updated_at":"2021-11-03T12:36:01Z","author_association":"CONTRIBUTOR","body":"> @milleruntime Does this IT currently fail, then?\r\n\r\nYes. But it may not be failing for the reasons I had originally though. The check after the flush scans the metadata looking for the \"file\" column but this won't be put in the metadata table if there are no entries in the file.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/958991447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/959157451","html_url":"https://github.com/apache/accumulo/pull/2340#issuecomment-959157451","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2340","id":959157451,"node_id":"IC_kwDOACaFSM45K5TL","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T14:03:37Z","updated_at":"2021-11-03T14:03:37Z","author_association":"CONTRIBUTOR","body":"If the goal of this change is to make it so that Accumulo client code never has to catch Error, then this change will not completely achieve that goal.  Anytime we use Future or CompletableFuture w/ a thread pool we will still be catching Throwable indirectly via java Future code.  The java Future code wraps task submitted to the thread pool with code that catches Throwable, so the thread pool itself will never see errors.\r\n\r\nFor example the following code calls `supplyAsync()` which queues a CompletableFuture task on `executor`. The queued task will catch throwable and the executor would never see any errors.\r\n\r\nhttps://github.com/apache/accumulo/blob/785a3645261571f000a7adb3c7c72b07886f0587/core/src/main/java/org/apache/accumulo/core/clientImpl/bulk/BulkImport.java#L544-L563\r\n\r\nIf an error did occur the following code would see it wrapped in an ExecutionException and then wrap that in a RuntimeException and punt it back to the user.  So we would still be catching Errors in the Accumulo client code, unless we stop using Java futures.\r\n\r\nhttps://github.com/apache/accumulo/blob/785a3645261571f000a7adb3c7c72b07886f0587/core/src/main/java/org/apache/accumulo/core/clientImpl/bulk/BulkImport.java#L577-L579\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/959157451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/959209736","html_url":"https://github.com/apache/accumulo/pull/2340#issuecomment-959209736","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2340","id":959209736,"node_id":"IC_kwDOACaFSM45LGEI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T14:18:07Z","updated_at":"2021-11-03T14:18:07Z","author_association":"CONTRIBUTOR","body":"> If the goal of this change is to make it so that Accumulo client code never has to catch Error\r\n\r\nThis change is to implement your suggestion in #2331 where you said:\r\n\r\n> I am not sure its appropriate for this particular case but one thing to consider in general from an API perspective is letting users pass in ExecutorServices and Thread Factories.\r\n\r\nThere is also a change in this PR to AccumuloUncaughtExceptionHandler where the VM will not be shut down on Error when the thread is not running in an Accumulo Server process (as determined by SingletonManager.getMode).\r\n\r\nRegarding the BulkImport code above, I believe that in this case an Error would be handled by the AccumuloUncaughtExceptionHandler as [this](https://github.com/apache/accumulo/blob/785a3645261571f000a7adb3c7c72b07886f0587/core/src/main/java/org/apache/accumulo/core/clientImpl/bulk/BulkImport.java#L560) catches Exception, not Error, and the executor that is being used to run the CompletableFuture is being created by ThreadPools.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/959209736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/959243094","html_url":"https://github.com/apache/accumulo/pull/2342#issuecomment-959243094","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2342","id":959243094,"node_id":"IC_kwDOACaFSM45LONW","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-03T14:27:41Z","updated_at":"2021-11-03T14:27:41Z","author_association":"CONTRIBUTOR","body":"This test also fails on 2.0.1. It seems like the behavior (the \"file\" column won't be put in the metadata table if there are no entries in the file.) is still the same. So we might not need this IT and I may just change this to fix the NPE introduced in #1605.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/959243094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]