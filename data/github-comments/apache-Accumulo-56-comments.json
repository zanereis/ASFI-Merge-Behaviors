[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733152771","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-733152771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":733152771,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzE1Mjc3MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T18:19:37Z","updated_at":"2020-11-24T18:19:37Z","author_association":"MEMBER","body":"@cradal There are several comments from older iterations of this, that are possibly no longer relevant. For those conversations, if you have already incorporated the suggestions, you can mark them as \"Resolved\", so that way the UI doesn't show them as prominently. That will make it easier to track current, ongoing discussions related to the latest iteration of this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733152771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733210940","html_url":"https://github.com/apache/accumulo/pull/1799#issuecomment-733210940","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1799","id":733210940,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzIxMDk0MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T20:18:03Z","updated_at":"2020-11-24T20:18:03Z","author_association":"MEMBER","body":"@milleruntime This change seems to have caused a regression in the SuspendedTabletsIT test. It seemed to have gotten stuck when I reverted locally, and timed out (but without the following errors), so I can't tell for certain that this PR caused it, but it seems likely related to this PR. Here's the error I'm seeing:\r\n\r\n```java\r\n2020-11-24T14:18:55,761 [master.Master] DEBUG: [Metadata Tablets] sleeping for 60.00 seconds        \r\n2020-11-24T14:18:55,762 [master.Master] DEBUG: 3 assigned to dead servers: [1;3;29@(localhost:43027[10003cc6ca20002],null,null), 1;4;3@(localhost:43027[10003cc6ca20002],null,null), 1;5;4@(localhost:43027[10003cc6ca20002],null,null)]...\r\n2020-11-24T14:18:55,762 [master.Master] DEBUG: logs for dead servers: {localhost:43027[10003cc6ca20002]=[file:/home/christopher/git/apache/accumulo/accumulo/test/target/mini-tests/org.apache.accumulo.test.master.SuspendedTabletsIT_shutdownAndResumeTserver/accumulo/wal/localhost+43027/cbc1e3e0-31ed-4408-8edc-afc8ec92d178, file:/home/christopher/git/apache/accumulo/accumulo/test/target/mini-tests/org.apache.accumulo.test.master.SuspendedTabletsIT_shutdownAndResumeTserver/accumulo/wal/localhost+43027/ea5759f4-9818-449b-94b6-19d852dc1f6a]}\r\n2020-11-24T14:18:55,765 [master.Master] ERROR: Error processing table state for store Normal Tablets\r\njava.lang.NullPointerException: Cannot invoke \"org.apache.accumulo.core.metadata.TServerInstance.getHostAndPort()\" because \"tls.current\" is null\r\n  at org.apache.accumulo.server.master.state.LoggingTabletStateStore.suspend(LoggingTabletStateStore.java:88) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n  at org.apache.accumulo.master.TabletGroupWatcher.handleDeadTablets(TabletGroupWatcher.java:861) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n  at org.apache.accumulo.master.TabletGroupWatcher.flushChanges(TabletGroupWatcher.java:911) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT] \r\n  at org.apache.accumulo.master.TabletGroupWatcher.run(TabletGroupWatcher.java:320) [accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733210940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733222827","html_url":"https://github.com/apache/accumulo/pull/1799#issuecomment-733222827","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1799","id":733222827,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzIyMjgyNw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T20:43:31Z","updated_at":"2020-11-24T20:43:31Z","author_association":"CONTRIBUTOR","body":"> @milleruntime This change seems to have caused a regression in the SuspendedTabletsIT test. \r\n\r\nStrange since the only place that we are calling the new code is the new test I added.  I haven't even tried using it anywhere yet... yikes!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733222827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733223855","html_url":"https://github.com/apache/accumulo/pull/1799#issuecomment-733223855","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1799","id":733223855,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzIyMzg1NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T20:45:50Z","updated_at":"2020-11-24T20:45:50Z","author_association":"CONTRIBUTOR","body":"> ```java\r\n> 2020-11-24T14:18:55,761 [master.Master] DEBUG: [Metadata Tablets] sleeping for 60.00 seconds        \r\n> 2020-11-24T14:18:55,762 [master.Master] DEBUG: 3 assigned to dead servers: [1;3;29@(localhost:43027[10003cc6ca20002],null,null), 1;4;3@(localhost:43027[10003cc6ca20002],null,null), 1;5;4@(localhost:43027[10003cc6ca20002],null,null)]...\r\n> 2020-11-24T14:18:55,762 [master.Master] DEBUG: logs for dead servers: {localhost:43027[10003cc6ca20002]=[file:/home/christopher/git/apache/accumulo/accumulo/test/target/mini-tests/org.apache.accumulo.test.master.SuspendedTabletsIT_shutdownAndResumeTserver/accumulo/wal/localhost+43027/cbc1e3e0-31ed-4408-8edc-afc8ec92d178, file:/home/christopher/git/apache/accumulo/accumulo/test/target/mini-tests/org.apache.accumulo.test.master.SuspendedTabletsIT_shutdownAndResumeTserver/accumulo/wal/localhost+43027/ea5759f4-9818-449b-94b6-19d852dc1f6a]}\r\n> 2020-11-24T14:18:55,765 [master.Master] ERROR: Error processing table state for store Normal Tablets\r\n> java.lang.NullPointerException: Cannot invoke \"org.apache.accumulo.core.metadata.TServerInstance.getHostAndPort()\" because \"tls.current\" is null\r\n>   at org.apache.accumulo.server.master.state.LoggingTabletStateStore.suspend(LoggingTabletStateStore.java:88) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n>   at org.apache.accumulo.master.TabletGroupWatcher.handleDeadTablets(TabletGroupWatcher.java:861) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n>   at org.apache.accumulo.master.TabletGroupWatcher.flushChanges(TabletGroupWatcher.java:911) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT] \r\n>   at org.apache.accumulo.master.TabletGroupWatcher.run(TabletGroupWatcher.java:320) [accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n> ```\r\n\r\nThis makes me think it may be related to another previous change I made moving `TServerInstance`.  I will take a look at it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733223855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733234808","html_url":"https://github.com/apache/accumulo/pull/1799#issuecomment-733234808","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1799","id":733234808,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzIzNDgwOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T21:09:33Z","updated_at":"2020-11-24T21:09:33Z","author_association":"MEMBER","body":"> This makes me think it may be related to another previous change I made moving `TServerInstance`. I will take a look at it.\r\n\r\nThat makes more sense. I've created an issue: #1806 to track this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733234808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733282346","html_url":"https://github.com/apache/accumulo/issues/1806#issuecomment-733282346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1806","id":733282346,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzI4MjM0Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T23:01:38Z","updated_at":"2020-11-24T23:01:38Z","author_association":"CONTRIBUTOR","body":"I ran this IT prior to my changes for #1774 and it timed out.  It did not have that same error though so that is something different at least.  I do think this IT was flaky before though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733282346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733443017","html_url":"https://github.com/apache/accumulo/pull/1807#issuecomment-733443017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1807","id":733443017,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzQ0MzAxNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T03:39:24Z","updated_at":"2020-11-25T03:39:24Z","author_association":"MEMBER","body":"This should merge cleanly to the main branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733443017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733495768","html_url":"https://github.com/apache/accumulo/issues/1806#issuecomment-733495768","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1806","id":733495768,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzQ5NTc2OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T06:26:51Z","updated_at":"2020-11-25T06:26:51Z","author_association":"MEMBER","body":"Oops, apparently, I've opened similar tickets about this test in the past. While things may have gotten worse for this test recently, the overall problems with this test are already being tracked in another issue: #1791 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733495768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733496471","html_url":"https://github.com/apache/accumulo/issues/1791#issuecomment-733496471","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1791","id":733496471,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzQ5NjQ3MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T06:28:36Z","updated_at":"2020-11-25T06:28:36Z","author_association":"MEMBER","body":"@milleruntime  I assigned this issue to you, because you self-assigned #1806, which I closed as a duplicate of this one. The impetus for creating these two issues may have been separate failures... but there's no reason to track its failures on two separate issues.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733496471/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733498321","html_url":"https://github.com/apache/accumulo/pull/1804#issuecomment-733498321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1804","id":733498321,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzQ5ODMyMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T06:33:03Z","updated_at":"2020-11-25T17:51:09Z","author_association":"MEMBER","body":"All ITs passed except for known flaky tests #1574 and #1791 (EDIT: those tests failed on my laptop, but passed on a \"beefier\" Jenkins instance)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733498321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733710593","html_url":"https://github.com/apache/accumulo/issues/1454#issuecomment-733710593","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1454","id":733710593,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzcxMDU5Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T13:36:36Z","updated_at":"2020-11-25T13:36:36Z","author_association":"CONTRIBUTOR","body":"I created an issue #1809 for one of the bugs I think this change will fix.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733710593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733772902","html_url":"https://github.com/apache/accumulo/issues/1809#issuecomment-733772902","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1809","id":733772902,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzc3MjkwMg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T15:23:32Z","updated_at":"2020-11-25T15:25:11Z","author_association":"CONTRIBUTOR","body":"While the issue with large number of watchers was document in https://issues.apache.org/jira/browse/ACCUMULO-2757 - the resolution of that is still open (https://github.com/apache/accumulo/issues/1225).  This is a separate issue that aggravates the problem with lots of watches because the tservers (and the master) seem to keep unnecessary watches after a table is deleted.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733772902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733791276","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-733791276","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":733791276,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzc5MTI3Ng==","user":{"login":"BukrosSzabolcs","id":45901354,"node_id":"MDQ6VXNlcjQ1OTAxMzU0","avatar_url":"https://avatars.githubusercontent.com/u/45901354?v=4","gravatar_id":"","url":"https://api.github.com/users/BukrosSzabolcs","html_url":"https://github.com/BukrosSzabolcs","followers_url":"https://api.github.com/users/BukrosSzabolcs/followers","following_url":"https://api.github.com/users/BukrosSzabolcs/following{/other_user}","gists_url":"https://api.github.com/users/BukrosSzabolcs/gists{/gist_id}","starred_url":"https://api.github.com/users/BukrosSzabolcs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BukrosSzabolcs/subscriptions","organizations_url":"https://api.github.com/users/BukrosSzabolcs/orgs","repos_url":"https://api.github.com/users/BukrosSzabolcs/repos","events_url":"https://api.github.com/users/BukrosSzabolcs/events{/privacy}","received_events_url":"https://api.github.com/users/BukrosSzabolcs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T15:52:48Z","updated_at":"2020-11-25T15:52:48Z","author_association":"CONTRIBUTOR","body":"The test failure looks unrelated. How can I re-trigger the tests?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733791276/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733812669","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-733812669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":733812669,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzgxMjY2OQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T16:28:42Z","updated_at":"2020-11-25T16:28:42Z","author_association":"CONTRIBUTOR","body":"They all seemed to pass this time. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733812669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733831754","html_url":"https://github.com/apache/accumulo/issues/1808#issuecomment-733831754","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1808","id":733831754,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzgzMTc1NA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T17:02:26Z","updated_at":"2020-11-25T17:02:26Z","author_association":"CONTRIBUTOR","body":"I wonder if this is related to - or just similar behavior to the issue in https://github.com/apache/accumulo/issues/1689  That was also triggered by low / OOM, but I do not know at this time if LoggingRunnable was also present in the logs. My recollection is that it is was not, but mentioning for completeness if there is a possibility of a correlation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733831754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733835680","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-733835680","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":733835680,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzgzNTY4MA==","user":{"login":"BukrosSzabolcs","id":45901354,"node_id":"MDQ6VXNlcjQ1OTAxMzU0","avatar_url":"https://avatars.githubusercontent.com/u/45901354?v=4","gravatar_id":"","url":"https://api.github.com/users/BukrosSzabolcs","html_url":"https://github.com/BukrosSzabolcs","followers_url":"https://api.github.com/users/BukrosSzabolcs/followers","following_url":"https://api.github.com/users/BukrosSzabolcs/following{/other_user}","gists_url":"https://api.github.com/users/BukrosSzabolcs/gists{/gist_id}","starred_url":"https://api.github.com/users/BukrosSzabolcs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BukrosSzabolcs/subscriptions","organizations_url":"https://api.github.com/users/BukrosSzabolcs/orgs","repos_url":"https://api.github.com/users/BukrosSzabolcs/repos","events_url":"https://api.github.com/users/BukrosSzabolcs/events{/privacy}","received_events_url":"https://api.github.com/users/BukrosSzabolcs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T17:09:37Z","updated_at":"2020-11-25T17:09:37Z","author_association":"CONTRIBUTOR","body":"@Manno15 Thanks for your help!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733835680/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733839847","html_url":"https://github.com/apache/accumulo/issues/1808#issuecomment-733839847","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1808","id":733839847,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzgzOTg0Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T17:17:02Z","updated_at":"2020-11-25T17:17:02Z","author_association":"MEMBER","body":"> I wonder if this is related to - or just similar behavior to ...\r\n\r\n@EdColeman I was thinking the same things. It's certainly similar in nature. This catching of Throwable, and/or not setting UncaughtExceptionHandlers on threads we spin off is really likely to bite us. It'd be great if we could take a comprehensive look at 1) all occurrences of us catching Throwable to verify their correctness, and 2) check all thread management code to ensure we properly handle uncaught exceptions.; The main problem is there's a *lot* (of both) of those. This issue is a specific find that was directly observed to be problematic (luckily, it occurred during testing and not on a production system), that can be fixed in a targeted way, regardless of whether we get a chance to do the comprehensive look at the rest.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733839847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733847439","html_url":"https://github.com/apache/accumulo/issues/1810#issuecomment-733847439","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1810","id":733847439,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzg0NzQzOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T17:30:38Z","updated_at":"2020-11-25T17:30:38Z","author_association":"MEMBER","body":"See https://github.com/apache/accumulo/pull/1798#discussion_r529826482","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733847439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733912653","html_url":"https://github.com/apache/accumulo/pull/1812#issuecomment-733912653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1812","id":733912653,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzkxMjY1Mw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T19:41:50Z","updated_at":"2020-11-25T19:41:50Z","author_association":"CONTRIBUTOR","body":"I am pretty sure that this change cannot be back ported to 1.10 as is - there must be something else going on that makes the watcher required for this version.  When I make this change in 1.10, the master does not seem to load the metadata table - it gets stuck looping with:\r\n\r\n```\r\n(Using uno)\r\n\r\nfrom master log:\r\n\r\n2020-11-25 19:26:18,420 [state.ZooTabletStateStore] DEBUG: Returning root tablet state: +r<<@(null,localhost:9997[10000f6700f0003],localhost:9997[10000f6700f0003])\r\n2020-11-25 19:26:18,420 [master.Master] DEBUG: Root Table location State: +r<<@(null,localhost:9997[10000f6700f0003],localhost:9997[10000f6700f0003])\r\n2020-11-25 19:26:18,421 [master.Master] DEBUG: [Root Table]: scan time 0.00 seconds\r\n2020-11-25 19:26:18,421 [master.Master] DEBUG: [Root Table] sleeping for 60.00 seconds\r\n2020-11-25 19:26:28,013 [master.Master] DEBUG: Finished gathering information from 1 of 1 servers in 0.00 seconds\r\n2020-11-25 19:26:28,014 [master.Master] DEBUG: not balancing just yet, as collection of live tservers is in flux\r\n\r\ntserver log:\r\n\r\nit loads the root table and then not much else happens:\r\n\r\n2020-11-25 19:21:17,540 [state.ZooTabletStateStore] DEBUG: Returning root tablet state: +r<<@(localhost:9997[10000f6700f0003],null,null)\r\n2020-11-25 19:21:17,542 [state.ZooStore] DEBUG: Wrote localhost:9997|10000f6700f0003 to /accumulo/ca6508fd-a202-499d-a281-4e9e09aaf890/root_tablet/location\r\n2020-11-25 19:21:17,544 [state.ZooStore] DEBUG: Wrote localhost:9997|10000f6700f0003 to /accumulo/ca6508fd-a202-499d-a281-4e9e09aaf890/root_tablet/lastlocation\r\n2020-11-25 19:21:17,544 [state.ZooStore] DEBUG: Removing /root_tablet/future_location\r\n2020-11-25 19:21:17,552 [state.ZooTabletStateStore] DEBUG: Put down root tablet location\r\n2020-11-25 19:21:17,553 [tserver.TabletServer] INFO : Root tablet loaded: +r<<\r\n2020-11-25 19:21:17,773 [tserver.TabletServer] DEBUG: ScanSess tid 127.0.0.1:57460 +r 1 entries in 0.05 secs, nbTimes = [45 45 45.00 1] \r\n2020-11-25 19:21:17,893 [tserver.TabletServer] DEBUG: ScanSess tid 127.0.0.1:57460 +r 1 entries in 0.00 secs, nbTimes = [2 2 2.00 1] \r\n2020-11-25 19:21:18,103 [tserver.TabletServer] DEBUG: ScanSess tid 127.0.0.1:57460 +r 1 entries in 0.00 secs, nbTimes = [1 1 1.00 1] \r\n2020-11-25 19:21:18,504 [tserver.TabletServer] DEBUG: ScanSess tid 127.0.0.1:57460 +r 1 entries in 0.00 secs, nbTimes = [1 1 1.00 1] \r\n2020-11-25 19:21:18,935 [server.GarbageCollectionLogger] DEBUG: gc ParNew=0.00(+0.00) secs ConcurrentMarkSweep=0.08(+0.00) secs freemem=675,633,096(-63,807,312) totalmem=778,502,144\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733912653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733955095","html_url":"https://github.com/apache/accumulo/issues/1763#issuecomment-733955095","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1763","id":733955095,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzk1NTA5NQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T21:31:37Z","updated_at":"2020-11-25T21:31:37Z","author_association":"MEMBER","body":"I am looking into implementing the fix you suggested and am running into the issue of looping over an assert statement. From my understanding it is not possible to stop the loop based on the condition that an assert statement has passed(or failed for that matter). In other words, the assert statement would be called continuously, within the loop, until an added JUnit timeout occurs. Apparently there are ways to add \"rules\" to tests which could add the ability to loop until a test passes, but I'm not sure if this is something we want to use ([example](https://stackoverflow.com/questions/8295100/how-to-re-run-failed-junit-tests-immediately?rq=1)).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/733955095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/734073705","html_url":"https://github.com/apache/accumulo/issues/1763#issuecomment-734073705","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1763","id":734073705,"node_id":"MDEyOklzc3VlQ29tbWVudDczNDA3MzcwNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-26T04:56:07Z","updated_at":"2020-11-26T04:56:07Z","author_association":"MEMBER","body":"@DomGarguilo Thanks for your interest in working on this issue. I have assigned this ticket to you in response to that interest. You are correct that you can't have the assert statement execute repeatedly in a loop. However, what you can do is do a simple `if` check inside the loop and similar checks inside the loop. If the loop is an infinite loop, the only way the test won't time out is if the conditions are met. For extra measure, you can add additional assert statements after the loop. I don't think we need to resort to any complex JUnit features for this kind of thing.\r\n\r\nHere's an example of us doing a similar kind of check in an existing test: https://github.com/apache/accumulo/blob/cccac86255cd2d0ecd49e791162ca5cdf07512b6/server/base/src/test/java/org/apache/accumulo/server/master/balancer/DefaultLoadBalancerTest.java#L198-L209","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/734073705/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/734431994","html_url":"https://github.com/apache/accumulo/issues/1792#issuecomment-734431994","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1792","id":734431994,"node_id":"MDEyOklzc3VlQ29tbWVudDczNDQzMTk5NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-26T18:13:30Z","updated_at":"2020-11-26T18:13:30Z","author_association":"MEMBER","body":"I thought this was fully addressed in #1745, but it may not have been.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/734431994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735433224","html_url":"https://github.com/apache/accumulo/pull/1812#issuecomment-735433224","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1812","id":735433224,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTQzMzIyNA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-29T18:09:40Z","updated_at":"2020-11-29T18:09:40Z","author_association":"CONTRIBUTOR","body":"Looking a 1.10 - the issue seems to be exists calls that set watchers for nodes that are not created and after table deletion, will never exist - so these watchers remain set until service restart.\r\n\r\nOn createtable:\r\n\r\nIn zookeeper there are 20 watchers. The following [instance]/tables/[table_id]/conf: nodes are created:\r\n```\r\ntable.constraint.1\r\ntable.iterator.majc.vers\r\ntable.iterator.majc.vers.opt.maxVersions\r\ntable.iterator.minc.vers\r\ntable.iterator.minc.vers.opt.maxVersions\r\ntable.iterator.scan.vers\r\ntable.iterator.scan.vers.opt.maxVersions\r\n```\r\nFrom the master debug log, these node have watchers set on exist calls without the node being present:\r\n```\r\ntable.balancer\r\ntable.classpath.context\r\ntable.volume.chooser\r\n```\r\nFrom the tserver debug log:\r\n```\r\ntable.classpath.context\r\ntable.compaction.major.everything.idle\r\ntable.compaction.minor.logs.threshold\r\ntable.groups.enabled\r\ntable.majc.compaction.strategy\r\ntable.replication\r\ntable.security.scan.visibility.default\r\ntable.split.endrow.size.max\r\ntable.split.threshold\r\ntserver.dir.memdump\r\n```\r\nAfter table delete, these watchers remain:\r\n```\r\ntable.balancer\r\ntable.classpath.context\r\ntable.compaction.major.everything.idle\r\ntable.compaction.minor.logs.threshold\r\ntable.groups.enabled\r\ntable.majc.compaction.strategy\r\ntable.replication\r\ntable.security.scan.visibility.default\r\ntable.split.endrow.size.max\r\ntable.split.threshold\r\ntable.volume.chooser\r\ntserver.dir.memdump\r\ntserver.memory.maps.native.enabled\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735433224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735801360","html_url":"https://github.com/apache/accumulo/pull/1812#issuecomment-735801360","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1812","id":735801360,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTgwMTM2MA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T13:57:26Z","updated_at":"2020-11-30T13:57:26Z","author_association":"CONTRIBUTOR","body":"> This comment explains why the existence check is important. However, it's not just the existence check on its own... it's specifically the existence check _with_ the watcher, because a watcher passed to an `exists` method will register to watch for node creation events, while a watcher passed to a `getData` method will register to watch for node changed events. ZooCache needs both to work correctly.\r\n\r\nI partially agree with you.  I do not think that we need a watcher for everytime we call `exists()`.  I read the comment to mean that we need the `ZCacheWatcher` to be on the `exists()`, which I am not convinced is true anymore.  The `ZCacheWatcher` only ever removes from the cache.  Removal from the cache should probably be handled with a timeout like we do with the Guava caches.  This is a separate issue though.\r\n\r\nThat being said, there may be other watchers being passed in that depend on the event trigger from the `exists()` method, which I believe is what you are saying.  Unfortunately this code is awful and its really hard to figure out which watchers depend on this event.  @EdColeman and I were hoping we could at least fix #1809 until it can be rewritten.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735801360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735809919","html_url":"https://github.com/apache/accumulo/pull/1812#issuecomment-735809919","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1812","id":735809919,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTgwOTkxOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T14:12:48Z","updated_at":"2020-11-30T14:12:48Z","author_association":"MEMBER","body":"> @EdColeman and I were hoping we could at least fix #1809 until it can be rewritten.\r\n\r\nGiven the fact that this breaks a unit test (ZooCacheTest is now failing), I don't have a high degree of confidence that this isn't going to break other things. Given this code is as complicated as it is, it seems like it's too risky to make such a change, and we should probably just proceed to removing the need for watching so many nodes in the first place, as previously discussed in other issues for 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735809919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735810698","html_url":"https://github.com/apache/accumulo/pull/1812#issuecomment-735810698","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1812","id":735810698,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTgxMDY5OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T14:14:17Z","updated_at":"2020-11-30T14:14:17Z","author_association":"MEMBER","body":"Also, I see this is labeled for 1.10.1. I'm very reluctant to see this change happen in 1.10, unless we have a *high* degree of confidence that this isn't going to cause problems there.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735810698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735827639","html_url":"https://github.com/apache/accumulo/issues/1808#issuecomment-735827639","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1808","id":735827639,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTgyNzYzOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T14:43:10Z","updated_at":"2020-11-30T14:43:10Z","author_association":"MEMBER","body":"This is related to https://issues.apache.org/jira/browse/ACCUMULO-3723 (though this issue is much more narrowly targeted).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735827639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735862043","html_url":"https://github.com/apache/accumulo/pull/1812#issuecomment-735862043","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1812","id":735862043,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTg2MjA0Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T15:37:28Z","updated_at":"2020-11-30T15:37:28Z","author_association":"CONTRIBUTOR","body":"Closing this for 2.x.  I will attempt a more methodical fix for 1.10.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735862043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735896613","html_url":"https://github.com/apache/accumulo/issues/1809#issuecomment-735896613","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1809","id":735896613,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTg5NjYxMw==","user":{"login":"jzgithub1","id":5930146,"node_id":"MDQ6VXNlcjU5MzAxNDY=","avatar_url":"https://avatars.githubusercontent.com/u/5930146?v=4","gravatar_id":"","url":"https://api.github.com/users/jzgithub1","html_url":"https://github.com/jzgithub1","followers_url":"https://api.github.com/users/jzgithub1/followers","following_url":"https://api.github.com/users/jzgithub1/following{/other_user}","gists_url":"https://api.github.com/users/jzgithub1/gists{/gist_id}","starred_url":"https://api.github.com/users/jzgithub1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzgithub1/subscriptions","organizations_url":"https://api.github.com/users/jzgithub1/orgs","repos_url":"https://api.github.com/users/jzgithub1/repos","events_url":"https://api.github.com/users/jzgithub1/events{/privacy}","received_events_url":"https://api.github.com/users/jzgithub1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T16:33:31Z","updated_at":"2020-11-30T16:33:31Z","author_association":"CONTRIBUTOR","body":"Maybe some of the ideas in this old and closed pull request can motivate the ultimate solution to this issue:\r\n\r\nhttps://github.com/apache/accumulo/pull/1443","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735896613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735988574","html_url":"https://github.com/apache/accumulo/pull/1816#issuecomment-735988574","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1816","id":735988574,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTk4ODU3NA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T19:20:15Z","updated_at":"2020-11-30T19:20:37Z","author_association":"MEMBER","body":"Oops, I see I was off-base with this one. Will do my best to correct these issues with your suggestions in mind :+1: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735988574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735991651","html_url":"https://github.com/apache/accumulo/issues/1809#issuecomment-735991651","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1809","id":735991651,"node_id":"MDEyOklzc3VlQ29tbWVudDczNTk5MTY1MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T19:26:18Z","updated_at":"2020-11-30T19:26:18Z","author_association":"CONTRIBUTOR","body":"Here is another ticket for reference: https://github.com/apache/accumulo/issues/1423","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/735991651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736023368","html_url":"https://github.com/apache/accumulo/issues/1773#issuecomment-736023368","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1773","id":736023368,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjAyMzM2OA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T20:27:02Z","updated_at":"2020-11-30T20:28:08Z","author_association":"CONTRIBUTOR","body":"While working on #1808 I noticed that Fate runs transactions in Threads with no UncaughtExceptionHandler. I fixed this in #1818. It's possible this could be contributing to this issue. Did you happen to notice any ERROR log entries starting with `Uncaught exception in FATE runner thread` ? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736023368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736053490","html_url":"https://github.com/apache/accumulo/pull/1816#issuecomment-736053490","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1816","id":736053490,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjA1MzQ5MA==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T21:05:24Z","updated_at":"2020-11-30T21:05:24Z","author_association":"MEMBER","body":"I implemented the fix in the correct test cases. There were a few things that I was unsure about though. Not sure if I should extract the code containing the while(true) and create a separate method in order to reuse that portion of code. Not sure if I should add a local variable for the timeout length (even though there is one test case that requires a longer timeout). I added a timeout to testSingleton() which probably doesn't need it so I am unsure whether I should remove it or keep it in.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736053490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736057745","html_url":"https://github.com/apache/accumulo/pull/1818#issuecomment-736057745","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1818","id":736057745,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjA1Nzc0NQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T21:09:31Z","updated_at":"2020-11-30T21:09:31Z","author_association":"CONTRIBUTOR","body":"I made the modifications you requested. I also found another case where Threads were being created, in a class called `Daemon`. I'm starting to think I should create a class called `Threads` and consolidate all of the ThreadPoolExecutor, ExecutorService and SimpleTimer code. Also, I think we can replace SimpleTimer with ScheduledThreadPoolExecutor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736057745/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736069823","html_url":"https://github.com/apache/accumulo/issues/1225#issuecomment-736069823","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1225","id":736069823,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjA2OTgyMw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T21:33:31Z","updated_at":"2020-11-30T21:33:31Z","author_association":"CONTRIBUTOR","body":"It looks like there are a number of improvements / fixes in ZK 3.6+ for Watchers. This is a good one: https://issues.apache.org/jira/browse/ZOOKEEPER-1177","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736069823/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736073587","html_url":"https://github.com/apache/accumulo/pull/1816#issuecomment-736073587","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1816","id":736073587,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjA3MzU4Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T21:41:58Z","updated_at":"2020-11-30T21:41:58Z","author_association":"MEMBER","body":"> Not sure if I should extract the code containing the while(true) and create a separate method in order to reuse that portion of code.\r\n\r\nNo. These changes aren't big enough to warrant that.\r\n\r\n> Not sure if I should add a local variable for the timeout length (even though there is one test case that requires a longer timeout).\r\n\r\nNo. Your timeouts are fine.\r\n\r\n> I added a timeout to testSingleton() which probably doesn't need it so I am unsure whether I should remove it or keep it in.\r\n\r\nIn general, we try to make minimal unrelated changes, to make it easier to review, but it's often a judgement call. In this case, I would leave it in. It's a tiny change, and is related to your adding a timeout to all the other test cases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736073587/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736088592","html_url":"https://github.com/apache/accumulo/pull/1816#issuecomment-736088592","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1816","id":736088592,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjA4ODU5Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-30T22:15:14Z","updated_at":"2020-11-30T22:15:14Z","author_association":"MEMBER","body":"Thanks for improving the test, @DomGarguilo !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736088592/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736627725","html_url":"https://github.com/apache/accumulo/issues/1773#issuecomment-736627725","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1773","id":736627725,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjYyNzcyNQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T15:31:19Z","updated_at":"2020-12-01T15:31:19Z","author_association":"CONTRIBUTOR","body":"> While working on #1808 I noticed that Fate runs transactions in Threads with no UncaughtExceptionHandler. I fixed this in #1818. It's possible this could be contributing to this issue. Did you happen to notice any ERROR log entries starting with `Uncaught exception in FATE runner thread` ?\r\n\r\nUnfortunately I did not get a stacktrace for this issue.  @EdColeman did you remember ever seeing this error?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736627725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736633024","html_url":"https://github.com/apache/accumulo/issues/1225#issuecomment-736633024","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1225","id":736633024,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjYzMzAyNA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T15:39:30Z","updated_at":"2020-12-01T15:39:30Z","author_association":"CONTRIBUTOR","body":"We should definitely look into updating ZK to 3.6+ for Accumulo 2.1.  Has anyone attempted to run a newer ZK with Accumulo 1.9.x or 1.10?  I am wondering how backwards compatible the binaries are for ZK.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736633024/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736637364","html_url":"https://github.com/apache/accumulo/issues/1225#issuecomment-736637364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1225","id":736637364,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjYzNzM2NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T15:46:23Z","updated_at":"2020-12-01T15:46:23Z","author_association":"MEMBER","body":"@milleruntime Yes, I've run ZK 3.6 with 1.10 during testing with fluo-uno, but I have not done comprehensive testing at scale or anything like that. However, 1.10 targeted ZK 3.4 as a minimum, so while it can work with newer versions, it would be disruptive to make 1.10.1 require anything newer. So, we shouldn't bump the version we develop against for 1.10. I'm fine with bumping to 3.6 for 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736637364/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736649691","html_url":"https://github.com/apache/accumulo/issues/1225#issuecomment-736649691","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1225","id":736649691,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjY0OTY5MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T16:05:49Z","updated_at":"2020-12-01T16:05:49Z","author_association":"CONTRIBUTOR","body":"> However, 1.10 targeted ZK 3.4 as a minimum, so while it can work with newer versions, it would be disruptive to make 1.10.1 require anything newer.\r\n\r\nRight.  I was thinking upgrading ZK to 3.6 would be a good mitigation for #1809 since its looking like a direct code fix is unlikely.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736649691/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736675131","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-736675131","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":736675131,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjY3NTEzMQ==","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T16:47:21Z","updated_at":"2020-12-03T19:23:10Z","author_association":"CONTRIBUTOR","body":"I've been running one particular IT test while reviewing this PR:\r\n\r\n```shell\r\nmvn clean verify -Dtest=NoSuchTestExists -Dit.test='org.apache.accumulo.test.ShellIT#insertDeleteScanTest'\r\n```\r\n\r\nAfter each run I have been checking the failsafe directory for output. Although I've seen runs without the exception on occasion, I'm still seeing it in the output logs.\r\n\r\nAnother interesting thing of note is that when starting and stopping accumulo, I'm seeing the following exception show up with the change:\r\n\r\n```java\r\n2020-12-01T11:40:18,104 [zookeeper.ClientCnxn] ERROR: Error while calling watcher \r\njava.lang.IllegalStateException: null\r\n        at com.google.common.base.Preconditions.checkState(Preconditions.java:492) ~[guava-28.2-jre.jar:?]\r\n        at org.apache.accumulo.fate.zookeeper.ZooCache.clear(ZooCache.java:484) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.fate.zookeeper.ZooCache$ZCacheWatcher.process(ZooCache.java:174) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:535) ~[zookeeper-3.5.8.jar:3.5.8]\r\n        at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:510) ~[zookeeper-3.5.8.jar:3.5.8]\r\n```\r\n\r\nI've been re-running the IT test, but I'm still seeing the exception appear the majority of the runs.\r\n\r\nNow I'm trying to verify that I'm testing everything correctly :) I added a debug statement to the ShellIT test just to verify that I was running the correct build.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736675131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736765218","html_url":"https://github.com/apache/accumulo/pull/1819#issuecomment-736765218","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1819","id":736765218,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjc2NTIxOA==","user":{"login":"jzgithub1","id":5930146,"node_id":"MDQ6VXNlcjU5MzAxNDY=","avatar_url":"https://avatars.githubusercontent.com/u/5930146?v=4","gravatar_id":"","url":"https://api.github.com/users/jzgithub1","html_url":"https://github.com/jzgithub1","followers_url":"https://api.github.com/users/jzgithub1/followers","following_url":"https://api.github.com/users/jzgithub1/following{/other_user}","gists_url":"https://api.github.com/users/jzgithub1/gists{/gist_id}","starred_url":"https://api.github.com/users/jzgithub1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzgithub1/subscriptions","organizations_url":"https://api.github.com/users/jzgithub1/orgs","repos_url":"https://api.github.com/users/jzgithub1/repos","events_url":"https://api.github.com/users/jzgithub1/events{/privacy}","received_events_url":"https://api.github.com/users/jzgithub1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T19:22:59Z","updated_at":"2020-12-01T19:22:59Z","author_association":"CONTRIBUTOR","body":"Great idea @milleruntime!  Glad that ZooCache isn't getting changed like it was in my PR.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736765218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736788610","html_url":"https://github.com/apache/accumulo/pull/1803#issuecomment-736788610","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1803","id":736788610,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjc4ODYxMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T20:08:11Z","updated_at":"2020-12-01T20:08:11Z","author_association":"MEMBER","body":"I'm going to run the full ITs on this change, but I don't anticipate any issues with this. Thanks, @tynyttie !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736788610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736801932","html_url":"https://github.com/apache/accumulo/pull/1819#issuecomment-736801932","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1819","id":736801932,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgwMTkzMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T20:31:45Z","updated_at":"2020-12-01T20:31:45Z","author_association":"CONTRIBUTOR","body":"One big difference between this change and #1812 is that here we know exactly why we are making a call to ZooCache.  For almost of all these occurrences, the table has to already exist.  We won't ever call `new Tablet()` on a table that doesn't exist yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736801932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736802019","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-736802019","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":736802019,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgwMjAxOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T20:31:54Z","updated_at":"2020-12-01T20:31:54Z","author_association":"MEMBER","body":"> I've been running one particular IT test while reviewing this PR:\r\n> \r\n> `mvn clean verify -Dtest=NoSuchTestExists -Dit.test=org.apache.accumulo.test.ShellIT#insertDeleteScanTest`\r\n\r\nAll the ITs passed when I ran them, but I didn't pay attention to this log message. I will investigate.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736802019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736805760","html_url":"https://github.com/apache/accumulo/pull/1819#issuecomment-736805760","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1819","id":736805760,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgwNTc2MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T20:38:50Z","updated_at":"2020-12-01T20:38:50Z","author_association":"MEMBER","body":"> One big difference between this change and #1812 is that here we know exactly why we are making a call to ZooCache. For almost of all these occurrences, the table has to already exist. We won't ever call `new Tablet()` on a table that doesn't exist yet.\r\n\r\nBut these aren't just checking for properties existence of the table itself. We're also checking for properties which could be created later and whose non-existence could be cached if the watcher isn't set... like a per-table context classpath, which can change the behavior of how the next iterators are loaded for that table. If its non-existence is cached, and that cache is never updated, we will never see that this context classpath has been updated and could load the wrong iterator (or fail to load the iterator) the next time we try to read that property to load an iterator class.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736805760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736813053","html_url":"https://github.com/apache/accumulo/pull/1819#issuecomment-736813053","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1819","id":736813053,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgxMzA1Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T20:53:19Z","updated_at":"2020-12-01T20:53:19Z","author_association":"CONTRIBUTOR","body":"I didn't think this fix touched parts of the code having to do with iterators... we tend to just get the per table classpath directly like here:\r\nhttps://github.com/apache/accumulo/blob/3140f096f120883b71c75bf74e2b205ff086098a/server/base/src/main/java/org/apache/accumulo/server/conf/TableConfiguration.java#L216","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736813053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736813965","html_url":"https://github.com/apache/accumulo/pull/1819#issuecomment-736813965","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1819","id":736813965,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgxMzk2NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T20:55:00Z","updated_at":"2020-12-01T20:55:00Z","author_association":"CONTRIBUTOR","body":"> I didn't think this fix touched parts of the code having to do with iterators... we tend to just get the per table classpath directly like here:\r\n> \r\n> https://github.com/apache/accumulo/blob/3140f096f120883b71c75bf74e2b205ff086098a/server/base/src/main/java/org/apache/accumulo/server/conf/TableConfiguration.java#L216\r\n\r\nAnd here:\r\nhttps://github.com/apache/accumulo/blob/3140f096f120883b71c75bf74e2b205ff086098a/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#L516","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736813965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736822279","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-736822279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":736822279,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgyMjI3OQ==","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T21:10:14Z","updated_at":"2020-12-01T21:10:14Z","author_association":"CONTRIBUTOR","body":"That particular IT also passes, it's just that the ZooSessionShutdown exception is still occurring when I run the IT (most of the time).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736822279/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736824338","html_url":"https://github.com/apache/accumulo/pull/1819#issuecomment-736824338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1819","id":736824338,"node_id":"MDEyOklzc3VlQ29tbWVudDczNjgyNDMzOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T21:14:04Z","updated_at":"2020-12-01T21:14:04Z","author_association":"CONTRIBUTOR","body":"I converted this to a draft since it is still risky for a bug fix version.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/736824338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/737357119","html_url":"https://github.com/apache/accumulo/issues/1773#issuecomment-737357119","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1773","id":737357119,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzM1NzExOQ==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T16:50:51Z","updated_at":"2020-12-02T16:50:51Z","author_association":"CONTRIBUTOR","body":"I do not recall seeing this exception - however, there would generally be a considerable period between when the exception might have been thrown and when it was detected that the table deletion was not progressing.  If the exception was thrown once, then even if it was present, the connection might have not been made between the events. But again, I don't recall this exception being in the master log at any time.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/737357119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/737488289","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-737488289","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":737488289,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzQ4ODI4OQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T20:52:17Z","updated_at":"2020-12-02T20:52:17Z","author_association":"MEMBER","body":"Was looking into this issue and was wondering if what you are looking for differs from the `tserverOption` in [ListCompactionsCommand.java](https://github.com/apache/accumulo/blob/ca58658cce43d4758fe3b0dfcc0653cb11791850/shell/src/main/java/org/apache/accumulo/shell/commands/ListCompactionsCommand.java#L87)? From the description, it seems as though this option allows for a tserver to be passed as an argument to display the compactions of only that tserver.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/737488289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/737520005","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-737520005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":737520005,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzUyMDAwNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T21:56:24Z","updated_at":"2020-12-02T21:56:24Z","author_association":"MEMBER","body":"@DomGarguilo I think you're right. This already exists. @milleruntime can you double-check to make sure we're not missing something here? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/737520005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738011040","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-738011040","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":738011040,"node_id":"MDEyOklzc3VlQ29tbWVudDczODAxMTA0MA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T13:59:06Z","updated_at":"2020-12-03T13:59:06Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo you a right!  I think @ctubbsii 's improvement in #1783 made this no longer an issue, since the main problem was with how we were getting the information.\r\n\r\nI did notice that the error printed when the command does not find the tserver is not helpful:\r\n<pre>\r\nroot@uno> listcompactions -ts ip-10-113-12-25\r\n2020-12-03T08:53:52,805 [Shell.audit] INFO : root@uno> listcompactions -ts ip-10-113-12-25\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\nip-10-113-12-25 ERROR null\r\n</pre>\r\n\r\nI changed the title of this ticket so we can at least improve the error that gets printed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738011040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738044326","html_url":"https://github.com/apache/accumulo/pull/1803#issuecomment-738044326","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1803","id":738044326,"node_id":"MDEyOklzc3VlQ29tbWVudDczODA0NDMyNg==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T14:52:13Z","updated_at":"2020-12-03T14:53:37Z","author_association":"CONTRIBUTOR","body":"Looking into it now.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738044326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738064714","html_url":"https://github.com/apache/accumulo/pull/1803#issuecomment-738064714","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1803","id":738064714,"node_id":"MDEyOklzc3VlQ29tbWVudDczODA2NDcxNA==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T15:09:52Z","updated_at":"2020-12-03T15:09:52Z","author_association":"CONTRIBUTOR","body":"@ctubbsii On my side, I am not seeing the test fail when I run RestartIT. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738064714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738149636","html_url":"https://github.com/apache/accumulo/pull/1803#issuecomment-738149636","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1803","id":738149636,"node_id":"MDEyOklzc3VlQ29tbWVudDczODE0OTYzNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T17:15:15Z","updated_at":"2020-12-03T17:15:15Z","author_association":"MEMBER","body":"> @ctubbsii On my side, I am not seeing the test fail when I run RestartIT.\r\n\r\nTry this command in your branch: `mvn clean verify -Dtest=blah -Dit.test=RestartIT -PskipQA -DskipTests=false -DskipITs=false` and then watch the logs in `test/target/mini-tests/org.apache.accumulo.test.functional.RestartIT_restartMasterRecovery/logs/*` for the `ERROR` line with `LogSorter` while that is running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738149636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738158991","html_url":"https://github.com/apache/accumulo/pull/1803#issuecomment-738158991","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1803","id":738158991,"node_id":"MDEyOklzc3VlQ29tbWVudDczODE1ODk5MQ==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T17:23:42Z","updated_at":"2020-12-03T17:23:42Z","author_association":"CONTRIBUTOR","body":"Ok.Thank you.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738158991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738266412","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-738266412","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":738266412,"node_id":"MDEyOklzc3VlQ29tbWVudDczODI2NjQxMg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T19:51:18Z","updated_at":"2020-12-03T19:51:18Z","author_association":"MEMBER","body":"Okay, so when I \"fixed\" it, I verified the fix by running a real shell, and did not check the log messages in the ITs. After running the above ShellIT command, I can the same error message that @jmark99 was seeing. From a previous run of the `main` branch, I see the error in the following tests, so I will use those to try to verify a subsequent fix: `ShellIT,ShellServerIT,ShellConfigIT,TracerRecoversAfterOfflineTableIT,ConditionalWriterIT`\r\n\r\nAs for the ZooCache precondition... I didn't see that. However, I'd be curious to know what you are doing to reproduce that. It shouldn't be possible based on the `IllegalStateException.toString()` implementation in Java: if the detail message is null, it should just print the class name, without the `null` part. I don't see how it could even print what you saw. So, I would want a reliable way to reproduce it to test it out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738266412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738280361","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-738280361","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":738280361,"node_id":"MDEyOklzc3VlQ29tbWVudDczODI4MDM2MQ==","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T20:12:11Z","updated_at":"2020-12-03T20:12:11Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I see the ZooCache precondition error after the first time I stop a running instance of Accumulo via Fluo-Uno. I was using Hadoop 3.3.0, ZK 3.5.8, and Accumulo 2.1.0-SNAPSHOT. I had the following workflow:\r\n<pre>\r\nuno fetch accumulo\r\nuno setup accumulo \r\n... do stuff  with accumulo...\r\n</pre>\r\nAt this point, once I execute <code>uno stop accumulo</code> it appears.\r\nIt continues to occur anytime I execute <code>uno start accumulo</code> or <code>uno stop accumulo</code> after this point.\r\nNote that it is not necessary to 'do stuff'. Simply stopping that initial instance of Accumulo is enough for me to start seeing the error.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738280361/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738309134","html_url":"https://github.com/apache/accumulo/pull/1818#issuecomment-738309134","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1818","id":738309134,"node_id":"MDEyOklzc3VlQ29tbWVudDczODMwOTEzNA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T21:07:39Z","updated_at":"2020-12-03T21:07:39Z","author_association":"CONTRIBUTOR","body":"I consolidated most of the Thread and ThreadPool creation down to a consistent code path through new classes called Threads and ThreadPools. All threads created are Daemon and have an UncaughtExceptionHandler set on them. The UncaughtExceptionHandler implementation will halt the JVM when it runs into serious errors.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738309134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738336328","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-738336328","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":738336328,"node_id":"MDEyOklzc3VlQ29tbWVudDczODMzNjMyOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T21:41:11Z","updated_at":"2020-12-03T21:41:11Z","author_association":"MEMBER","body":"@jmark99 Thanks, I will try to reproduce and experiment a bit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738336328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738342570","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-738342570","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":738342570,"node_id":"MDEyOklzc3VlQ29tbWVudDczODM0MjU3MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T21:54:29Z","updated_at":"2020-12-03T21:54:29Z","author_association":"MEMBER","body":"For the ITs, it looks like ZooTraceClient is seeing Closed and/or Disconnected events when the tests finish and shut down, and assuming they are node changed events. The fix I made initially only addressed the message I was seeing in the shell, but did not address the messages in the tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738342570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738606098","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-738606098","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":738606098,"node_id":"MDEyOklzc3VlQ29tbWVudDczODYwNjA5OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T06:58:25Z","updated_at":"2020-12-04T06:58:25Z","author_association":"MEMBER","body":"Okay @jmark99, I think I've tracked it all down now. :smiley_cat: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738606098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738793126","html_url":"https://github.com/apache/accumulo/pull/1818#issuecomment-738793126","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1818","id":738793126,"node_id":"MDEyOklzc3VlQ29tbWVudDczODc5MzEyNg==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T13:47:52Z","updated_at":"2020-12-04T13:47:52Z","author_association":"CONTRIBUTOR","body":"May need to look for instances of java.util.Timer also...","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738793126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738844434","html_url":"https://github.com/apache/accumulo/pull/1817#issuecomment-738844434","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1817","id":738844434,"node_id":"MDEyOklzc3VlQ29tbWVudDczODg0NDQzNA==","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T15:24:38Z","updated_at":"2020-12-04T15:24:38Z","author_association":"CONTRIBUTOR","body":"@ctubbsii, I successfully verified by running the ShellIT tests multiple times without seeing the exception appear. I also started and stopped the Accumulo process multiple times and did not see the precondition error either. LGTM!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738844434/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738859839","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-738859839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":738859839,"node_id":"MDEyOklzc3VlQ29tbWVudDczODg1OTgzOQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T15:52:43Z","updated_at":"2020-12-04T15:52:43Z","author_association":"MEMBER","body":"@Manno15 and I were looking into this and found where the error is coming from. It appears that the error is an `IllegalStateException` which is being [caught here](https://github.com/apache/accumulo/blob/391cfbff3a29f735fb80ddd0695f50b06dd72f28/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java#L88) with `Exception e` while trying to retrieve the active compactions for a non-existant tserver. The `null` is coming from the `e.getMessage()` which is not helpful. Not quite sure how to proceed from here. Should this unhelpful message be replaced by information detailing why we think this error is being thrown (specified tserver does not exist)?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738859839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738871145","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-738871145","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":738871145,"node_id":"MDEyOklzc3VlQ29tbWVudDczODg3MTE0NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T16:13:35Z","updated_at":"2020-12-04T16:13:35Z","author_association":"CONTRIBUTOR","body":"> @Manno15 and I were looking into this and found where the error is coming from. It appears that the error is an `IllegalStateException` which is being [caught here](https://github.com/apache/accumulo/blob/391cfbff3a29f735fb80ddd0695f50b06dd72f28/shell/src/main/java/org/apache/accumulo/shell/commands/ActiveCompactionHelper.java#L88) with `Exception e` while trying to retrieve the active compactions for a non-existant tserver. The `null` is coming from the `e.getMessage()` which is not helpful. Not quite sure how to proceed from here. Should this unhelpful message be replaced by information detailing why we think this error is being thrown (specified tserver does not exist)?\r\n\r\nIt might be better to let the exception be thrown all the way up to the shell and just catch the IllegalStateException.  You could print a helpful message for the Exception with the empty message and let everything else go up to Shell.  The execute method throws Exception. I am not sure this is possible with the stream though, so perhaps that's why we are hiding the exceptions in the List of compaction strings.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738871145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738931253","html_url":"https://github.com/apache/accumulo/issues/1773#issuecomment-738931253","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1773","id":738931253,"node_id":"MDEyOklzc3VlQ29tbWVudDczODkzMTI1Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T18:02:09Z","updated_at":"2020-12-04T19:09:58Z","author_association":"CONTRIBUTOR","body":"I wonder if this could be related to a change made in 1.9.3 https://github.com/apache/accumulo/pull/727.  So it is possible that this was already fixed.  More information is needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/738931253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739127286","html_url":"https://github.com/apache/accumulo/pull/1801#issuecomment-739127286","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1801","id":739127286,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTEyNzI4Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-05T05:05:41Z","updated_at":"2020-12-05T05:05:41Z","author_association":"MEMBER","body":"@dlmarion Next time, please consider using a better format for your git log messages. Yours has an extremely long subject line and no body. Here's a good guide on formatting good git log messages: https://chris.beams.io/posts/git-commit/\r\n\r\nIn your case, using that guide, a good message might have been something similar to the following:\r\n\r\n```\r\nFix #1574 Improve reliability of MetadataMaxFilesIT (#1801)\r\n\r\n1. remove stop / start of MAC (unnecessary step)\r\n2. reduce number of tables created (use fewer resources)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739127286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739127635","html_url":"https://github.com/apache/accumulo/issues/1773#issuecomment-739127635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1773","id":739127635,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTEyNzYzNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-05T05:09:14Z","updated_at":"2020-12-05T05:09:14Z","author_association":"MEMBER","body":"@milleruntime Given the possibility that this was already fixed, and presumably, you haven't been able to reproduce it, should this be closed as \"Cannot reproduce\"? We can always reopen if it is observed again and more information is available.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739127635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739134868","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-739134868","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":739134868,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTEzNDg2OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-05T06:33:21Z","updated_at":"2020-12-05T06:33:21Z","author_association":"MEMBER","body":"I'm not sure we should let it be thrown all the way up to the shell. That could be confusing, because of the way this code gathers up all the responses and orders them. The error may be harder to debug. That said, we could definitely format this message better. For one, it would be nice if the whole stack trace was included. We could use something like https://stackoverflow.com/a/1760673 and use `e.printStackTrace(ps)` to get the full stack trace as part of the message, rather than just getting `e.getMessage()`, which isn't very helpful. At the very least, doing this would help us track down where the message is occurring, so we may be able to emit a better exception or something wherever the IllegalStateException is originating today.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739134868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739136949","html_url":"https://github.com/apache/accumulo/pull/1824#issuecomment-739136949","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1824","id":739136949,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTEzNjk0OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-05T07:00:19Z","updated_at":"2020-12-05T07:00:19Z","author_association":"MEMBER","body":"@Manno15 This is a great start. It looks like a beast of a problem, but it looks like you're headed in the right direction! The fact that so much of the API of JLine is subject to change makes me wonder if we want to just create our own internal abstraction... like a single class that wraps all the JLine stuff, and puts it all in one place, and provides more friendly methods to get to what we need. I'm thinking something along the lines of:\r\n\r\n```java\r\n  class SomeClassName {\r\n    SomeClassName() {\r\n      // set up JLine terminal and related objects here\r\n      // no JLine types used outside this class\r\n      // if we need anything from JLine, we add a convenience method below, so JLine is entirely accessed through this class\r\n    }\r\n    println(...) { ... }\r\n    readline(...) { ... }\r\n    saveHistory(...) { ... }\r\n  }\r\n\r\n  var console = new SomeClassName();\r\n  console.println(\"something\")\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739136949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739844395","html_url":"https://github.com/apache/accumulo/pull/1824#issuecomment-739844395","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1824","id":739844395,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTg0NDM5NQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T11:01:04Z","updated_at":"2020-12-07T11:01:04Z","author_association":"CONTRIBUTOR","body":"Yeah, that sounds like a great idea @ctubbsii. I will look into to implementing something like that while I continue to fix some of the areas I was unsure on. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739844395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739966220","html_url":"https://github.com/apache/accumulo/issues/1773#issuecomment-739966220","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1773","id":739966220,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTk2NjIyMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T14:51:17Z","updated_at":"2020-12-07T14:51:17Z","author_association":"CONTRIBUTOR","body":"I don't know that it was fixed (or that there is a problem).  The issue that I was referring to in #727 was #587 and had to do with metadata pollution.  I will try and talk to the admins reporting it to see if they are still seeing the problem in their deployment of 1.9.3.  It could be a lack of insight as to what is going on in the cluster since there isn't an easy way to get the state of Tablets.  I may be able to backport #1821 to version 10 so they can use it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739966220/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739975080","html_url":"https://github.com/apache/accumulo/issues/1825#issuecomment-739975080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1825","id":739975080,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTk3NTA4MA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T15:05:28Z","updated_at":"2020-12-07T15:05:28Z","author_association":"CONTRIBUTOR","body":"Thanks @QiAnXinCodeSafe but we already have an open pull request for this https://github.com/apache/accumulo/pull/1780","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/739975080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740011919","html_url":"https://github.com/apache/accumulo/pull/1823#issuecomment-740011919","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1823","id":740011919,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDAxMTkxOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T16:04:11Z","updated_at":"2020-12-07T16:04:11Z","author_association":"CONTRIBUTOR","body":"> A rename is good, but I don't know what \"TabletMem\" means from its name. It would be _really_ helpful to have a more descriptive name (rather than just a unique one to differentiate it). Or at the very least _some_ kind of javadoc on the interface definition, so that when somebody sees \"TabletMem\" in the code and asks \"what is that?\", they could gain an understanding relatively quickly from the javadoc.\r\n> \r\n> Off the top of my head, I'm thinking \"TabletMemState\" might be a little better, so even if I don't know what \"Mem\" means, I know the class represents some kind of \"state\" pertaining to a \"tablet\".\r\n\r\nI actually had TabletMemState but changed it to TabletMem because it was shorter.  The derived classes all seemed too longer to me... TabletMemStateImpl or TestTabletMemState, especially since the class is usually the impl quite a bit.  The only thing I extracted about this inner class from looking at the code was that it had to do with Memory.  What about MemoryState, TabMemory, TMemoryState, MemState?\r\n\r\n> But, the javadoc would still be helpful to understand what kind of \"state\" and what the \"mem\" means, like what's this state for? how is it used? why does it exist? The method names in the interface provide clues, but without diving deeper, I don't really know the answer to these questions... they are just the first thing I think when seeing a name like \"TabletMem\" (or even \"TabletMemState\").\r\n\r\nI agree but your guess is as good as mine.  I attempted to get rid of the interface all together but it is needed since the test uses KeyExtent but the actual server code uses Tablet. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740011919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740082175","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-740082175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":740082175,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDA4MjE3NQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T18:00:46Z","updated_at":"2020-12-07T18:00:46Z","author_association":"MEMBER","body":"I added the stack trace to the message which now reads:\r\n<pre>root@uno> listcompactions -ts nonExistantTserver\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\nERROR: null. The specified tServer, 'nonExistantTserver', was not found.\r\njava.lang.IllegalStateException\r\n\tat com.google.common.base.Preconditions.checkState(Preconditions.java:492)\r\n\tat org.apache.accumulo.core.util.HostAndPort.getPort(HostAndPort.java:108)\r\n\tat org.apache.accumulo.core.rpc.TTimeoutTransport.create(TTimeoutTransport.java:67)\r\n\tat org.apache.accumulo.core.rpc.ThriftUtil.createClientTransport(ThriftUtil.java:373)\r\n\tat org.apache.accumulo.core.clientImpl.ThriftTransportPool.createNewTransport(ThriftTransportPool.java:737)\r\n\tat org.apache.accumulo.core.clientImpl.ThriftTransportPool.getTransport(ThriftTransportPool.java:676)\r\n\tat org.apache.accumulo.core.rpc.ThriftUtil.getClient(ThriftUtil.java:131)\r\n\tat org.apache.accumulo.core.rpc.ThriftUtil.getTServerClient(ThriftUtil.java:178)\r\n\tat org.apache.accumulo.core.clientImpl.InstanceOperationsImpl.getActiveCompactions(InstanceOperationsImpl.java:176)\r\n\tat org.apache.accumulo.shell.commands.ActiveCompactionHelper.activeCompactionsForServer(ActiveCompactionHelper.java:88)\r\n\tat org.apache.accumulo.shell.commands.ActiveCompactionHelper.lambda$stream$1(ActiveCompactionHelper.java:119)\r\n-------------------------- hit any key to continue or 'q' to quit --------------------------\r\n\tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat org.apache.accumulo.fate.util.LoggingRunnable.run(LoggingRunnable.java:37)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)</pre>\r\nNot sure if anything else should be added to the message or if this formatting is okay.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740082175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740144636","html_url":"https://github.com/apache/accumulo/issues/1825#issuecomment-740144636","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1825","id":740144636,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDE0NDYzNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T19:55:56Z","updated_at":"2020-12-07T19:55:56Z","author_association":"MEMBER","body":"Also, there doesn't appear to be any such version '0.13.0-hotfix.1'. Perhaps they mean 0.13.0? In either case, this can be closed as a duplicate, since we can use the other issue to track this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740144636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740158529","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-740158529","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":740158529,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDE1ODUyOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T20:22:53Z","updated_at":"2020-12-07T20:22:53Z","author_association":"MEMBER","body":"> I added the stack trace to the message which now reads:\r\n> \r\n> root@uno> listcompactions -ts nonExistantTserver\r\n>  TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\n> ERROR: null. The specified tServer, 'nonExistantTserver', was not found.\r\n> java.lang.IllegalStateException\r\n> \tat com.google.common.base.Preconditions.checkState(Preconditions.java:492)\r\n> \tat org.apache.accumulo.core.util.HostAndPort.getPort(HostAndPort.java:108)\r\n> \tat org.apache.accumulo.core.rpc.TTimeoutTransport.create(TTimeoutTransport.java:67)\r\n> \tat org.apache.accumulo.core.rpc.ThriftUtil.createClientTransport(ThriftUtil.java:373)\r\n> \tat org.apache.accumulo.core.clientImpl.ThriftTransportPool.createNewTransport(ThriftTransportPool.java:737)\r\n> \tat org.apache.accumulo.core.clientImpl.ThriftTransportPool.getTransport(ThriftTransportPool.java:676)\r\n> \tat org.apache.accumulo.core.rpc.ThriftUtil.getClient(ThriftUtil.java:131)\r\n> \tat org.apache.accumulo.core.rpc.ThriftUtil.getTServerClient(ThriftUtil.java:178)\r\n> \tat org.apache.accumulo.core.clientImpl.InstanceOperationsImpl.getActiveCompactions(InstanceOperationsImpl.java:176)\r\n> \tat org.apache.accumulo.shell.commands.ActiveCompactionHelper.activeCompactionsForServer(ActiveCompactionHelper.java:88)\r\n> \tat org.apache.accumulo.shell.commands.ActiveCompactionHelper.lambda$stream$1(ActiveCompactionHelper.java:119)\r\n> -------------------------- hit any key to continue or 'q' to quit --------------------------\r\n> \tat java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1700)\r\n> \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n> \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n> \tat org.apache.accumulo.fate.util.LoggingRunnable.run(LoggingRunnable.java:37)\r\n> \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n> Not sure if anything else should be added to the message or if this formatting is okay.\r\n\r\nThis stack trace implies that the error we're seeing in this example is that `HostAndPort.java`'s `getPort` method should use the version of `checkState` that allows us to provide a more meaningful message, such as `the address does not include a port`.\r\n\r\nSeeing the stack trace is useful for finding out where we can improve the messages, such as that one, but I'm not sure we want to keep the full stack trace here once we've improved the messages. Maybe we can log the stack trace as a warning, but otherwise keep the regular listing with just with the message from the exception.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740158529/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740500983","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-740500983","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":740500983,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDUwMDk4Mw==","user":{"login":"BukrosSzabolcs","id":45901354,"node_id":"MDQ6VXNlcjQ1OTAxMzU0","avatar_url":"https://avatars.githubusercontent.com/u/45901354?v=4","gravatar_id":"","url":"https://api.github.com/users/BukrosSzabolcs","html_url":"https://github.com/BukrosSzabolcs","followers_url":"https://api.github.com/users/BukrosSzabolcs/followers","following_url":"https://api.github.com/users/BukrosSzabolcs/following{/other_user}","gists_url":"https://api.github.com/users/BukrosSzabolcs/gists{/gist_id}","starred_url":"https://api.github.com/users/BukrosSzabolcs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BukrosSzabolcs/subscriptions","organizations_url":"https://api.github.com/users/BukrosSzabolcs/orgs","repos_url":"https://api.github.com/users/BukrosSzabolcs/repos","events_url":"https://api.github.com/users/BukrosSzabolcs/events{/privacy}","received_events_url":"https://api.github.com/users/BukrosSzabolcs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T09:30:57Z","updated_at":"2020-12-08T09:30:57Z","author_association":"CONTRIBUTOR","body":"@ctubbsii The outstanding request was resolved and got the approval. Have you had time to do some manual testing?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740500983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740604215","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-740604215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":740604215,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDYwNDIxNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T12:59:02Z","updated_at":"2020-12-08T12:59:02Z","author_association":"MEMBER","body":"> @ctubbsii The outstanding request was resolved and got the approval. Have you had time to do some manual testing?\n\nNot yet. This is my priority today.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740604215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740647642","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-740647642","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":740647642,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDY0NzY0Mg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T14:20:32Z","updated_at":"2020-12-08T14:20:32Z","author_association":"MEMBER","body":"@BukrosSzabolcs I added a commit to merge the main branch onto this, to get it up-to-date with current main, and to resolve compiler warnings, but I'm still testing. I should be done today.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740647642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740673939","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-740673939","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":740673939,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDY3MzkzOQ==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T15:04:17Z","updated_at":"2020-12-08T15:04:17Z","author_association":"MEMBER","body":"Would something like this work better?\r\n<pre>\r\nroot@uno> listcompactions -ts myTserver\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\nERROR java.lang.IllegalStateException: null. No port was defined for given address: myTserver\r\n</pre>\r\nThe error message \"null\" is still printed, but the error name and a description of what caused the error was added while the stack trace is removed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740673939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740679671","html_url":"https://github.com/apache/accumulo/pull/1823#issuecomment-740679671","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1823","id":740679671,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDY3OTY3MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T15:14:08Z","updated_at":"2020-12-08T15:14:08Z","author_association":"CONTRIBUTOR","body":"Superseded by #1826","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740679671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740691581","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-740691581","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":740691581,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDY5MTU4MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T15:32:07Z","updated_at":"2020-12-08T15:32:07Z","author_association":"MEMBER","body":"@DomGarguilo I think if you use `checkState(booleanexpression,StringerrorMessageTemplate)` version of `checkState` in `HostAndPort.getPort`, then you get the message instead of the `null`, at least in this case. We'd still want to check the output if you pass in something that has a port, but is still an invalid server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740691581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740740073","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-740740073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":740740073,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDc0MDA3Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T16:27:18Z","updated_at":"2020-12-08T16:48:13Z","author_association":"MEMBER","body":"> This looks great to me. I did some manual testing, and everything works as expected. I do think it would be useful to see an INFO (maybe DEBUG? any opinions here?) message when each user's credentials are upgraded, though.\r\n\r\nDon't worry about this one. I will add a commit to add a log message for the upgrade action before merging. Everything here looks great! I will merge it soon. Thanks, @BukrosSzabolcs !\r\n\r\n> Also, I noticed some strange \"denied\" messages for \"performSystemAction\" when a user successfully authenticates. I don't know if that's new with this PR or not. I'm going to see if I can track it down. If it's pre-existing, then I wouldn't worry about it.\r\n\r\nIt looks like this is a pre-existing issue. Don't worry about it. (EDIT: fixed in #1827 )\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740740073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740749767","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-740749767","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":740749767,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDc0OTc2Nw==","user":{"login":"BukrosSzabolcs","id":45901354,"node_id":"MDQ6VXNlcjQ1OTAxMzU0","avatar_url":"https://avatars.githubusercontent.com/u/45901354?v=4","gravatar_id":"","url":"https://api.github.com/users/BukrosSzabolcs","html_url":"https://github.com/BukrosSzabolcs","followers_url":"https://api.github.com/users/BukrosSzabolcs/followers","following_url":"https://api.github.com/users/BukrosSzabolcs/following{/other_user}","gists_url":"https://api.github.com/users/BukrosSzabolcs/gists{/gist_id}","starred_url":"https://api.github.com/users/BukrosSzabolcs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BukrosSzabolcs/subscriptions","organizations_url":"https://api.github.com/users/BukrosSzabolcs/orgs","repos_url":"https://api.github.com/users/BukrosSzabolcs/repos","events_url":"https://api.github.com/users/BukrosSzabolcs/events{/privacy}","received_events_url":"https://api.github.com/users/BukrosSzabolcs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T16:40:40Z","updated_at":"2020-12-08T16:40:40Z","author_association":"CONTRIBUTOR","body":"Thanks for the feedback and the help @ctubbsii, @busbey !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740749767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740795957","html_url":"https://github.com/apache/accumulo/pull/1828#issuecomment-740795957","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1828","id":740795957,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDc5NTk1Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T17:49:11Z","updated_at":"2020-12-08T17:49:11Z","author_association":"MEMBER","body":"> Why not make the methods throw the exception themselves? It looks like they are already throwing `ThriftSecurityException`.\r\n\r\n1. That would be a bigger change,\r\n2. That would be inconsistent with how the methods are used today, and\r\n3. In some cases, we don't want to fail yet... as it's one of several conditions which can be satisfied to perform the operation, so the boolean is needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740795957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740797724","html_url":"https://github.com/apache/accumulo/pull/1828#issuecomment-740797724","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1828","id":740797724,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDc5NzcyNA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T17:51:44Z","updated_at":"2020-12-08T17:51:44Z","author_association":"CONTRIBUTOR","body":"> > Why not make the methods throw the exception themselves? It looks like they are already throwing `ThriftSecurityException`.\r\n> \r\n>     1. That would be a bigger change,\r\n> \r\n>     2. That would be inconsistent with how the methods are used today, and\r\n> \r\n>     3. In some cases, we don't want to fail yet... as it's one of several conditions which can be satisfied to perform the operation, so the boolean is needed.\r\n\r\nOK I see that now.  For example, the Auditing needs to know the result so it can be logged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740797724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740798502","html_url":"https://github.com/apache/accumulo/pull/1828#issuecomment-740798502","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1828","id":740798502,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDc5ODUwMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T17:52:50Z","updated_at":"2020-12-08T17:52:50Z","author_association":"CONTRIBUTOR","body":"Shouldn't spotbugs have noticed the boolean returned not being used?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740798502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740803586","html_url":"https://github.com/apache/accumulo/pull/1828#issuecomment-740803586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1828","id":740803586,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDgwMzU4Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T18:00:04Z","updated_at":"2020-12-08T18:00:04Z","author_association":"MEMBER","body":"> Shouldn't spotbugs have noticed the boolean returned not being used?\r\n\r\nIt is my understanding that spotbugs doesn't check the return value of every method, only well-known ones whose return values are expected to be used. It's possible that at level 20, it would report it. However, we run spotbugs at maxRank 16, because higher is too spammy, and the value of what it finds is diminished.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740803586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740825580","html_url":"https://github.com/apache/accumulo/pull/1830#issuecomment-740825580","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1830","id":740825580,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDgyNTU4MA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T18:33:05Z","updated_at":"2020-12-08T18:33:05Z","author_association":"CONTRIBUTOR","body":"When I get the chance, I plan on adding tests in either `ShellIT` or `ShellServerIT` to verify these permissions are checked properly","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740825580/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740870064","html_url":"https://github.com/apache/accumulo/pull/1828#issuecomment-740870064","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1828","id":740870064,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDg3MDA2NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T19:08:15Z","updated_at":"2020-12-08T19:08:15Z","author_association":"MEMBER","body":"@Manno15 has backported these fixes to 1.10.1 in #1830 , and has described tests he will add. With two approvals already, I'll merge this now, so the tests can be more easily merged forward from those changes later.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740870064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740920413","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-740920413","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":740920413,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDkyMDQxMw==","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T19:41:04Z","updated_at":"2020-12-08T19:41:04Z","author_association":"MEMBER","body":"I ran some tests to see the rest of the error messages and it seems as though the only unhelpful message is when a tserver address (valid or unvalid) is passed without a port. The combinations I tested are: (valid and invalid tserver address) in conjuntion with: (no port passed, valid port passed and invalid port passed). I will list the results from my tests below.\r\n\r\n**Valid tserver address with valid port (control)**\r\n<pre>\r\nroot@uno> listcompactions -ts thor:9997\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\n            thor:9997 |     477ms |  FULL | SYSTEM |     0 |     0 | img_thor_143943_1607455627757 | 2;d800;d700                              |     4 |        /2/t-000000l/A000010g.rf_tmp |        [] | {}\r\n...\r\n</pre>\r\n\r\n**Any terver address(valid and invalid) with no port passed (error message of interest)**\r\n<pre>\r\nroot@uno> listcompactions -ts thor\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\nthor ERROR null\r\n</pre>\r\n**Invalid tserver address with invalid port**\r\n<pre>\r\nroot@uno> listcompactions -ts NotThor:9898\r\n2020-12-08T14:31:35,262 [rpc.ThriftUtil] WARN : Failed to open transport to NotThor:9898\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\nNotThor:9898 ERROR org.apache.thrift.transport.TTransportException: java.net.UnknownHostException\r\n</pre>\r\n**Valid tserver address with invalid port**\r\n<pre>\r\nroot@uno> listcompactions -ts thor:9898\r\n2020-12-08T14:33:21,232 [rpc.ThriftUtil] WARN : Failed to open transport to thor:9898\r\n TABLET SERVER        | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\r\nthor:9898 ERROR org.apache.thrift.transport.TTransportException: java.net.ConnectException: Connection refused\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740920413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740930909","html_url":"https://github.com/apache/accumulo/issues/1760#issuecomment-740930909","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1760","id":740930909,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDkzMDkwOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T19:50:17Z","updated_at":"2020-12-08T19:50:17Z","author_association":"MEMBER","body":"Based on this, it looks like most possibilities already have meaningful messages. So it may be only the missing port case that needs a better message. I don't think we need to keep the stack traces visible if that case is addressed. However, it may still be useful to log the exception at DEBUG anyway, when it is caught.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/740930909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/741063843","html_url":"https://github.com/apache/accumulo/pull/1827#issuecomment-741063843","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1827","id":741063843,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTA2Mzg0Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T21:30:25Z","updated_at":"2020-12-08T21:30:25Z","author_association":"MEMBER","body":"This was reverted, as explained in 1fa84ae2ea7b40081a2c1a94a560cda2f91b5f36\r\nI will need to address this a different way.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/741063843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/741077616","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-741077616","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":741077616,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTA3NzYxNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T21:40:54Z","updated_at":"2020-12-08T21:40:54Z","author_association":"MEMBER","body":"@BukrosSzabolcs I ran into a problem while testing, because I made a mistake on #1827 , but I reverted that, and was able to finally merge this change in (with my added debug log statement, as discussed).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/741077616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/741078149","html_url":"https://github.com/apache/accumulo/pull/1798#issuecomment-741078149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1798","id":741078149,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTA3ODE0OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-08T21:41:19Z","updated_at":"2020-12-08T21:41:19Z","author_association":"MEMBER","body":"Thank you so much for your contribution! I'm really happy we were finally able to make this change!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/741078149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]