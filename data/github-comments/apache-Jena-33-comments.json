[{"url":"https://api.github.com/repos/apache/jena/issues/comments/1229260433","html_url":"https://github.com/apache/jena/pull/1494#issuecomment-1229260433","issue_url":"https://api.github.com/repos/apache/jena/issues/1494","id":1229260433,"node_id":"IC_kwDOAHF7Ec5JRQaR","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-27T20:26:38Z","updated_at":"2022-08-27T20:26:38Z","author_association":"MEMBER","body":"As this touches many old things, the commit log lists all the changes one-by-one for the history.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1229260433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1231307271","html_url":"https://github.com/apache/jena/issues/1498#issuecomment-1231307271","issue_url":"https://api.github.com/repos/apache/jena/issues/1498","id":1231307271,"node_id":"IC_kwDOAHF7Ec5JZEIH","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T08:07:04Z","updated_at":"2022-08-30T08:09:49Z","author_association":"MEMBER","body":"No code calls the PrefixMapping2 constructors so we can be delete it.\r\n\r\nIt says \"Updates go to the local (second) copy only\". It is (was) for locally extending prefixes mapping. In particular, it does not alter the global pmap which would be a concurrency problem.\r\n\r\nAnd if you'd let the code through, you'd find PrefixMapping.Extended is immutable. \r\n\r\n\r\nThe general solution is a buffering prefix map (records diffs). [BufferingPrefixMap](https://github.com/afs/jena-workspace/blob/main/src/main/java/dsg/buffering/BufferingPrefixMap.java).\r\nSounds like what you want is the \"add only.no flush\" temporary extensions version of that.\r\n\r\nNB `PrefixMap` vs `PrefixMapping`.\r\n  \r\nAs a general point on [JENA-2309](https://issues.apache.org/jira/browse/JENA-2309) -- Jena has many interfaces. Tweaking implementations for one use case needs to be balanced with having clear code for general use (the majority of Jena users). One-impl-does-everything can be hard to maintain. Not everything is a bug.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1231307271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1231588129","html_url":"https://github.com/apache/jena/issues/1498#issuecomment-1231588129","issue_url":"https://api.github.com/repos/apache/jena/issues/1498","id":1231588129,"node_id":"IC_kwDOAHF7Ec5JaIsh","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T12:18:43Z","updated_at":"2022-08-30T12:20:57Z","author_association":"CONTRIBUTOR","body":"Hm, the advantage of PrefixMapping2 is that the internal 'added' map is again a PrefixMapping and the lookup inherts its performance characteristics.\r\n\r\nBufferingPrefixMap only uses a plain HashMap for the additions which means iri-to-prefix lookups fall back to O(n)\r\nI guess in the presence of deletions there is not really a better way.\r\n\r\nSo BufferingPrefixMap is not a replacement from a performance perspective. \r\n\r\n> One-impl-does-everything can be hard to maintain.\r\n\r\nYes, but\r\n- most importantly, I'd expect that in general use a solution that can deliver O(log(n)) is appreciated over a O(n) one and\r\n- implementations are not *that* complex and\r\n-  the existence of PrefixMapping2 (and the removed FastAbbreviatingPrefixMap) testifies that at least at some point these use case were relevant (and they *still* are for me).\r\n\r\nI would also be fine with doing a port of PrefixMapping2 to e.g. PrefixMap2. But it's not exhilarating having to clutter my own projects with such rather basic stuff (especially when things already existed - and become subject to removal  without replacement due to my reports).\r\n\r\nAnd actually the problem is not even related to PrefixMapping2 but a needless call to removeNsPrefix in Prologue that would break any PrefixMapping2-like approach:\r\n\r\n```java\r\n// class Prologue:\r\n            String oldExpansion = prefixMap.getNsPrefixURI(prefix) ;\r\n            if ( Objects.equals(oldExpansion, expansion) )\r\n                return ;\r\n            if ( oldExpansion != null ) // <- remove\r\n                prefixMap.removeNsPrefix(prefix) ; // <- remove\r\n\r\n            // Isn't the contract of PrefixMap anyway that this should replace a prior mapping?\r\n            prefixMap.setNsPrefix(prefix, expansion) ;\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1231588129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1231686298","html_url":"https://github.com/apache/jena/issues/1498#issuecomment-1231686298","issue_url":"https://api.github.com/repos/apache/jena/issues/1498","id":1231686298,"node_id":"IC_kwDOAHF7Ec5Jagqa","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T13:40:47Z","updated_at":"2022-08-30T13:40:47Z","author_association":"MEMBER","body":"> Hm, the advantage of PrefixMapping2 is that the internal 'added' map is again a PrefixMapping and the lookup inherts its performance characteristics.\r\n\r\nThere is a `BufferingPrefixMapping` as well.\r\n\r\n> a solution that can deliver O(log(n)) is appreciated over a O(n) one\r\n\r\nI don't understand that.\r\n\r\n`PrefixMapBuffering`, `PrefixMapStd` and `BufferingPrefixMapping` are O(1) prefix lookup.\r\n\r\n> iri-to-prefix\r\n\r\nParsing involves prefix-to-iri.\r\n\r\n> it's not exhilarating having to clutter my own projects with such rather basic stuff\r\n\r\nAfter its many years of evolution, sure Jena does not meet your ideals or the requirements of your day-job, and you can see better ways of of doing things.\r\n\r\nBut Jena is what it is. Open source.\r\n\r\nCode has to be maintained over years. Code does not get written then remain unchanging.\r\nMaintenance work, questions from users, reviewing PRs, releases, security alerts ... rather basic stuff.\r\n\r\nJust recently, a lot of time has gone into the not-exhilarating work of cleaning up javadoc. Java changed. The javadoc was valid, and now (Java11) it isn't.\r\n\r\nJena is not a dumping ground. No volunteer open source project can be.\r\n\r\n> the problem is not even related to PrefixMapping2 \r\n\r\nQuite. Did you try the fix?\r\n\r\n> to avoid @afs from performing a quick fix that seals off the APIs I need\r\n\r\nDon't make this personal.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1231686298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232764820","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1232764820","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1232764820,"node_id":"IC_kwDOAHF7Ec5Jen-U","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T10:35:03Z","updated_at":"2022-08-31T10:35:03Z","author_association":"MEMBER","body":"Hi @kdejaeger \r\n\r\nCouple of information points:\r\n\r\nWas it working with 4.5.0? or is this a new installation?\r\n\r\nWhat's the server work load? In the 10 hours, very approximately, how many writes did the server receive?\r\n\r\n(I shortened the stacktrace - but I've got a local copy of the full original)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232764820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232779994","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1232779994","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1232779994,"node_id":"IC_kwDOAHF7Ec5Jerra","user":{"login":"kdejaeger","id":279268,"node_id":"MDQ6VXNlcjI3OTI2OA==","avatar_url":"https://avatars.githubusercontent.com/u/279268?v=4","gravatar_id":"","url":"https://api.github.com/users/kdejaeger","html_url":"https://github.com/kdejaeger","followers_url":"https://api.github.com/users/kdejaeger/followers","following_url":"https://api.github.com/users/kdejaeger/following{/other_user}","gists_url":"https://api.github.com/users/kdejaeger/gists{/gist_id}","starred_url":"https://api.github.com/users/kdejaeger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdejaeger/subscriptions","organizations_url":"https://api.github.com/users/kdejaeger/orgs","repos_url":"https://api.github.com/users/kdejaeger/repos","events_url":"https://api.github.com/users/kdejaeger/events{/privacy}","received_events_url":"https://api.github.com/users/kdejaeger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T10:51:35Z","updated_at":"2022-08-31T10:51:35Z","author_association":"NONE","body":"In 4.5.0 I haven't encountered this message.\r\nAround 1 to 2 writes per second.\r\nI will reboot the server later today, let it do it all over again to see what's going to happen.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232779994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232787415","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1232787415","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1232787415,"node_id":"IC_kwDOAHF7Ec5JetfX","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T11:00:33Z","updated_at":"2022-08-31T11:00:33Z","author_association":"MEMBER","body":"At first impression ... it will happen again.\r\n\r\n65536 is 2^16.\r\n\r\njavadoc of `ReentrantReadWriteLock`\r\n```\r\n * <p>This lock supports a maximum of 65535 recursive write locks\r\n * and 65535 read locks. Attempts to exceed these limits result in\r\n * {@link Error} throws from locking methods.\r\n```\r\nThe lock at fault is used for both read and write Fuseki operations, and both take it in \"read\" mode. (the \"write\" is exclusive access to finalize compaction).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232787415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232821293","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1232821293","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1232821293,"node_id":"IC_kwDOAHF7Ec5Je1wt","user":{"login":"kdejaeger","id":279268,"node_id":"MDQ6VXNlcjI3OTI2OA==","avatar_url":"https://avatars.githubusercontent.com/u/279268?v=4","gravatar_id":"","url":"https://api.github.com/users/kdejaeger","html_url":"https://github.com/kdejaeger","followers_url":"https://api.github.com/users/kdejaeger/followers","following_url":"https://api.github.com/users/kdejaeger/following{/other_user}","gists_url":"https://api.github.com/users/kdejaeger/gists{/gist_id}","starred_url":"https://api.github.com/users/kdejaeger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdejaeger/subscriptions","organizations_url":"https://api.github.com/users/kdejaeger/orgs","repos_url":"https://api.github.com/users/kdejaeger/repos","events_url":"https://api.github.com/users/kdejaeger/events{/privacy}","received_events_url":"https://api.github.com/users/kdejaeger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T11:37:14Z","updated_at":"2022-08-31T11:37:14Z","author_association":"NONE","body":"So it's like counting up for each operation. That must be a new bug since 4.6. I'll confirm when it happens again.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1232821293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1233128842","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1233128842","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1233128842,"node_id":"IC_kwDOAHF7Ec5JgA2K","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T16:00:11Z","updated_at":"2022-08-31T16:00:11Z","author_association":"MEMBER","body":"Yes, it is 4.6.0-added code.\r\n\r\nThe code is taking the lock twice and releasing it once for writes, and taking the lock once and not releasing it for reads. A build up of one per-transaction.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1233128842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1233874876","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1233874876","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1233874876,"node_id":"IC_kwDOAHF7Ec5Ji2-8","user":{"login":"kdejaeger","id":279268,"node_id":"MDQ6VXNlcjI3OTI2OA==","avatar_url":"https://avatars.githubusercontent.com/u/279268?v=4","gravatar_id":"","url":"https://api.github.com/users/kdejaeger","html_url":"https://github.com/kdejaeger","followers_url":"https://api.github.com/users/kdejaeger/followers","following_url":"https://api.github.com/users/kdejaeger/following{/other_user}","gists_url":"https://api.github.com/users/kdejaeger/gists{/gist_id}","starred_url":"https://api.github.com/users/kdejaeger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdejaeger/subscriptions","organizations_url":"https://api.github.com/users/kdejaeger/orgs","repos_url":"https://api.github.com/users/kdejaeger/repos","events_url":"https://api.github.com/users/kdejaeger/events{/privacy}","received_events_url":"https://api.github.com/users/kdejaeger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T07:40:15Z","updated_at":"2022-09-01T07:40:15Z","author_association":"NONE","body":"Hello, it happened again after 14 hours of uptime. I see you found the place to fix the bug, hopefully for a 4.6.1 release.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1233874876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1234083371","html_url":"https://github.com/apache/jena/issues/1499#issuecomment-1234083371","issue_url":"https://api.github.com/repos/apache/jena/issues/1499","id":1234083371,"node_id":"IC_kwDOAHF7Ec5Jjp4r","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T10:32:08Z","updated_at":"2022-09-01T10:32:08Z","author_association":"MEMBER","body":"Yes, there will be a 4.6.1 \"soon\" with the fix in it.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1234083371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1234088211","html_url":"https://github.com/apache/jena/pull/1506#issuecomment-1234088211","issue_url":"https://api.github.com/repos/apache/jena/issues/1506","id":1234088211,"node_id":"IC_kwDOAHF7Ec5JjrET","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T10:36:56Z","updated_at":"2022-09-01T10:36:56Z","author_association":"MEMBER","body":"Let's wait on this one.\r\n\r\nIf Jena uses 2.0.0, it may block downstream still using 1.7.x.\r\n\r\nslf4j 2.0.0 setup works differently to 1.7 (2.0.0 uses service loaders, 1.7.x has it's own private mechanism.\r\n\r\n1.8.x didn't get out of beta.\r\n\r\nAs there is no rush here, let's see how the rest of the world gets on with 2.0.0.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1234088211/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235253465","html_url":"https://github.com/apache/jena/issues/1500#issuecomment-1235253465","issue_url":"https://api.github.com/repos/apache/jena/issues/1500","id":1235253465,"node_id":"IC_kwDOAHF7Ec5JoHjZ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T09:02:12Z","updated_at":"2022-09-02T09:02:12Z","author_association":"MEMBER","body":"PR #1513 ensures the backup is written atomically. The intermediate files have a name ending \".tmp\" and chosen by the JDK library function `Files.createTempFile`.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235253465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235476041","html_url":"https://github.com/apache/jena/issues/1500#issuecomment-1235476041","issue_url":"https://api.github.com/repos/apache/jena/issues/1500","id":1235476041,"node_id":"IC_kwDOAHF7Ec5Jo95J","user":{"login":"ieugen","id":1050920,"node_id":"MDQ6VXNlcjEwNTA5MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1050920?v=4","gravatar_id":"","url":"https://api.github.com/users/ieugen","html_url":"https://github.com/ieugen","followers_url":"https://api.github.com/users/ieugen/followers","following_url":"https://api.github.com/users/ieugen/following{/other_user}","gists_url":"https://api.github.com/users/ieugen/gists{/gist_id}","starred_url":"https://api.github.com/users/ieugen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ieugen/subscriptions","organizations_url":"https://api.github.com/users/ieugen/orgs","repos_url":"https://api.github.com/users/ieugen/repos","events_url":"https://api.github.com/users/ieugen/events{/privacy}","received_events_url":"https://api.github.com/users/ieugen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T12:58:56Z","updated_at":"2022-09-02T12:58:56Z","author_association":"MEMBER","body":"Thanks. \r\nI will see if I can test it. \r\nAny idea when the next release is due? ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235476041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235563990","html_url":"https://github.com/apache/jena/issues/1500#issuecomment-1235563990","issue_url":"https://api.github.com/repos/apache/jena/issues/1500","id":1235563990,"node_id":"IC_kwDOAHF7Ec5JpTXW","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T14:20:41Z","updated_at":"2022-09-02T14:20:41Z","author_association":"MEMBER","body":"> Any idea when the next release is due?\r\n\r\nThis is not in 4.6.1 (which is currently in it's VOTE phase).\r\n\r\nYou can get development builds (daily): See https://ci-builds.apache.org/job/Jena/\r\nThese go to `https://repository.apache.org/content/repositories/snapshots/`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235563990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235885970","html_url":"https://github.com/apache/jena/issues/1500#issuecomment-1235885970","issue_url":"https://api.github.com/repos/apache/jena/issues/1500","id":1235885970,"node_id":"IC_kwDOAHF7Ec5Jqh-S","user":{"login":"ieugen","id":1050920,"node_id":"MDQ6VXNlcjEwNTA5MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1050920?v=4","gravatar_id":"","url":"https://api.github.com/users/ieugen","html_url":"https://github.com/ieugen","followers_url":"https://api.github.com/users/ieugen/followers","following_url":"https://api.github.com/users/ieugen/following{/other_user}","gists_url":"https://api.github.com/users/ieugen/gists{/gist_id}","starred_url":"https://api.github.com/users/ieugen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ieugen/subscriptions","organizations_url":"https://api.github.com/users/ieugen/orgs","repos_url":"https://api.github.com/users/ieugen/repos","events_url":"https://api.github.com/users/ieugen/events{/privacy}","received_events_url":"https://api.github.com/users/ieugen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T20:52:02Z","updated_at":"2022-09-02T20:52:02Z","author_association":"MEMBER","body":"I can vote against 4.6.1 so the release will be re-done :D (kidding, I know it's a lot of effort to make a release). \r\nThanks for implementing it so fast.\r\n\r\nDid you also implement cleanup? \r\nI did not see that part.\r\nI hope the tmp files are not written to /tmp which is very small in size.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235885970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235919484","html_url":"https://github.com/apache/jena/issues/1500#issuecomment-1235919484","issue_url":"https://api.github.com/repos/apache/jena/issues/1500","id":1235919484,"node_id":"IC_kwDOAHF7Ec5JqqJ8","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T21:46:30Z","updated_at":"2022-09-02T21:46:30Z","author_association":"MEMBER","body":"No cleanup. The PR puts in what the Fuseki engine should do -  no hard coded policy. There is no assumption on JVM cleanup.\r\n\r\nThe rest is best done outside the JVM. Maybe the deployment wants to leave them around to see what went wrong.\r\n\r\nThe tmp files are in the same directory as the final file. This means there is enough space (/tmp may be on another file system).\r\n\r\nAt worse (an OS crash), the file contents may have two names (old and new, as hard links), never no name so deleting the old name fixes that. In the same directory, local filesystem, it is even more unlikely to end up linked twice. See `man 2 rename`.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1235919484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1236055924","html_url":"https://github.com/apache/jena/issues/1500#issuecomment-1236055924","issue_url":"https://api.github.com/repos/apache/jena/issues/1500","id":1236055924,"node_id":"IC_kwDOAHF7Ec5JrLd0","user":{"login":"ieugen","id":1050920,"node_id":"MDQ6VXNlcjEwNTA5MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1050920?v=4","gravatar_id":"","url":"https://api.github.com/users/ieugen","html_url":"https://github.com/ieugen","followers_url":"https://api.github.com/users/ieugen/followers","following_url":"https://api.github.com/users/ieugen/following{/other_user}","gists_url":"https://api.github.com/users/ieugen/gists{/gist_id}","starred_url":"https://api.github.com/users/ieugen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ieugen/subscriptions","organizations_url":"https://api.github.com/users/ieugen/orgs","repos_url":"https://api.github.com/users/ieugen/repos","events_url":"https://api.github.com/users/ieugen/events{/privacy}","received_events_url":"https://api.github.com/users/ieugen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-03T05:58:06Z","updated_at":"2022-09-03T05:58:06Z","author_association":"MEMBER","body":"Thanks. \r\nI think we should add this as documentation. I made this PR: https://github.com/apache/jena-site/pull/117 . \r\nI am an apache committer - I have CLA signed.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1236055924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1237485290","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1237485290","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1237485290,"node_id":"IC_kwDOAHF7Ec5Jwobq","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-05T21:54:22Z","updated_at":"2022-09-06T07:58:02Z","author_association":"CONTRIBUTOR","body":"I incorrectly mentioned 4.5.0 in my last post; 4.6.0 is the most recent version without this PR.\r\n\r\nThe following are the recent values I get by comparing the phased loading strategy between 4.6.0 and 4.7.0-SNAPSHOT with this PR. Iteration means loading a dataset once.\r\nI verified that the right number of triples were loaded into the store.\r\n\r\n```\r\n# 20 iterations with 13 quads in 2 graphs (a new graph every 10 quads)\r\nThe intention is check that small data that doesn't fill the queue works.\r\njena 4.6.0:           39,355s\r\njena 4.7.0-SNAPSHOT:  40,553s\r\n(with a single quad it's essentially also 40s which is mostly JVM/Jena startup time rather than actual insertions)\r\n\r\n# 20 iterations with 9.876.543 quads in 99 graphs (a new graph every 100K quads)\r\njena: 4.6.0:         4094s\r\njena 4.7.0-SNAPSHOT: 3990s\r\n\r\n# 10 iterations with 9.876.543 triples\r\njena 4.6.0           1946s\r\njena 4.7.0-SNAPSHOT: 1901s\r\n```\r\nOn another day I had reversed figures such that 4.6.0 was slightly faster; but now that I repeated the runs it seems that there isn't a significant difference.\r\n\r\nSo to me it looks all good.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1237485290/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1237799506","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1237799506","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1237799506,"node_id":"IC_kwDOAHF7Ec5Jx1JS","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T08:04:41Z","updated_at":"2022-09-06T08:04:41Z","author_association":"MEMBER","body":"There are too many factors (e.g. JIT effects) to get really stable performance figures without very long warm-up and timing runs. Even when the rest of the machine is \"quiet\", there are things going on outside the JVM.\r\n\r\nI don't think anything changed between 4.5.0 and 4.6.1 that directly impacts this area. But seemingly unrelated changes elsewhere can affect when the JIT decides to kick-in and can make for visible differences.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1237799506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1237918861","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1237918861","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1237918861,"node_id":"IC_kwDOAHF7Ec5JySSN","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T09:45:03Z","updated_at":"2022-09-06T09:45:24Z","author_association":"CONTRIBUTOR","body":"> There are too many factors [...]\r\n\r\nYes, the only change I made to the element processing code is the addition of an AtomicBoolean that is checked only after every chunk for whether to terminate the parser - so there is an extra check now but the overhead should be neglectable (considering the amount of work it takes to turn bytes into elements).\r\n\r\nA current limitation is, that with large chunk sizes only taking the first few elements still has to wait for the first chunk. Though now one can at least control the chunk size.\r\n\r\nIn principle the builder API could in a future PR be extended to improve this, such as by adding support for a custom Predicate<EltStreamRDF> that allows for stopping the parser and dispatching the current chunk immediately.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1237918861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239262950","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1239262950","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1239262950,"node_id":"IC_kwDOAHF7Ec5J3abm","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T11:24:29Z","updated_at":"2022-09-07T11:24:29Z","author_association":"MEMBER","body":"Not a worry about the cost for the benefit here because it is per chunk but ... `AtomicBoolean` is not so negligible. It's a non-local memory load and they take forever.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239262950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239392959","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1239392959","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1239392959,"node_id":"IC_kwDOAHF7Ec5J36K_","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T13:29:45Z","updated_at":"2022-09-07T13:29:45Z","author_association":"MEMBER","body":"If it's just used as a flag to check whether to continue or not could probably use a `private volatile boolean` instead?  Still has to go to main memory but should have marginally less overhead than an `AtomicBoolean`","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239392959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239418815","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1239418815","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1239418815,"node_id":"IC_kwDOAHF7Ec5J4Ae_","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T13:50:28Z","updated_at":"2022-09-07T13:50:28Z","author_association":"MEMBER","body":"Probably much the same - the object itself is cacheable and optimizable. \r\nThe `AtomicBoolean` is clearer (IMO) and has useful other operations such as `getPlain` and the other memory semantics.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239418815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239477530","html_url":"https://github.com/apache/jena/issues/1516#issuecomment-1239477530","issue_url":"https://api.github.com/repos/apache/jena/issues/1516","id":1239477530,"node_id":"IC_kwDOAHF7Ec5J4O0a","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T14:36:29Z","updated_at":"2022-09-07T16:13:22Z","author_association":"MEMBER","body":"Did you mean https://fetch.spec.whatwg.org/#cors-protocol-and-credentials ?\r\n\r\nA common mode of operation, and what Shiro is doing, is to do authentication with servlet filter which is insensitive to the HTTP method. How do other system handle this?\r\n\r\nI found\r\nhttps://stackoverflow.com/questions/60786804/apache-shiro-is-breaking-the-cors-configuration-of-my-spring-boot-restapi\r\nwhich is about servlet filter order. \r\n\r\nBut not all CORS should be before authentication?\r\n\r\nI am confused about what is the right behaviour when the resource also implements OPTIONS.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239477530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239549214","html_url":"https://github.com/apache/jena/pull/1506#issuecomment-1239549214","issue_url":"https://api.github.com/repos/apache/jena/issues/1506","id":1239549214,"node_id":"IC_kwDOAHF7Ec5J4gUe","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T15:34:03Z","updated_at":"2022-09-07T15:34:03Z","author_association":"MEMBER","body":"So the question for Jena upgrading is whether slf4j-api 2.0.0 if jena updates, is compatible with 1.7.x slf4j implementations (client apps using jena).\r\n\r\nThe answer is \"no\".\r\nIt looks like a long-timescale change over unless adapters appear.\r\n\r\nhttps://www.slf4j.org/faq.html#changesInVersion200\r\n\r\nSo I suggest we do not upgrade, wait to see what happens in the rest of the world, and close this PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239549214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239766289","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1239766289","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1239766289,"node_id":"IC_kwDOAHF7Ec5J5VUR","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T19:00:57Z","updated_at":"2022-09-11T08:08:45Z","author_association":"CONTRIBUTOR","body":"I just realized that the atomic boolean is not sufficient to synchronize between\r\n```java\r\n010 Iterator.close() {\r\n020  if (!isAborted.get()) {\r\n030    isAborted.set(true);\r\n040    queue.clear();\r\n050    queue.add(poison);\r\n060  }\r\n070 }\r\n080 // and\r\n090 Destination.receive(chunk) {\r\n100  if (!isAborted.get() {\r\n110    queue.add(chunk);\r\n120  }\r\n130 }\r\n```\r\nThe issue arises in the following situation:\r\n\r\n- Parser thread is not aborted and passes the test in 100 and is now just about to run 110 which would add a chunk.\r\n- Meanwhile, the close thread executes 020 up to 040 - so isAborted is set to true and the queue is cleared.\r\n- Parser finally executes 110 and adds another chunk to the freshly cleared queue.\r\n- Closer executes 050 and adds the poison after the chunk.\r\n\r\nEffect: the client iterator will yield garbage data from somewhere down the element stream.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239766289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239766512","html_url":"https://github.com/apache/jena/issues/1516#issuecomment-1239766512","issue_url":"https://api.github.com/repos/apache/jena/issues/1516","id":1239766512,"node_id":"IC_kwDOAHF7Ec5J5VXw","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-07T19:01:14Z","updated_at":"2022-09-07T19:33:23Z","author_association":"CONTRIBUTOR","body":"Hi Andy, thanks for the answer. I agree this issue is confusing.\r\n\r\nFYI: building fuseki with #1520 does **not** seem to be related to this issue\r\n\r\nOn the whatwg page, I found this following note:\r\n\r\n> **Note**\r\n> For a [CORS-preflight request](https://fetch.spec.whatwg.org/#cors-preflight-request), [request](https://fetch.spec.whatwg.org/#concept-request)s [credentials mode](https://fetch.spec.whatwg.org/#concept-request-credentials-mode) is always \"same-origin\", i.e., it **excludes credentials**.\r\n\r\nI found these additional resources\r\n- about OPTIONS: https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/OPTIONS\r\n- about CORS with credentials: https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#requests_with_credentials\r\n\r\nBasically, the web browser will always send an OPTIONS request without any credentials (\"CORS-preflight\") and the server is supposed to reply with `HTTP/1.1 200 OK` / `Access-Control-Allow-Credentials: true` (no Content is sent)\r\n\r\nHowever, if we add `/**=authcBasic,user[admin]`, then OPTIONS are also password protected and the response is `HTTP/1.1 401 Unauthorized`\r\n\r\nThus, a shiro-protected Fuseki cannot be used with cross-site requests.\r\n\r\nYou can observe this e.g. in the \"Web developer tools > Network\" in Firefox.\r\n\r\nI also did not have much luck finding any reports about this on the shiro side. I found those 2 unanswered issues/questions from 2014:\r\n\r\n- [ ] https://issues.apache.org/jira/browse/SHIRO-508\r\n- [ ] https://lists.apache.org/thread/5s1j5l49bl282cd0xodyw5l1vzkrcqjh \r\n\r\nI believe a method-sensitive filter would be *required* to support authenticated CORS. For example an anon filter like `/**:options=anon` (pseudo-syntax, does not work)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1239766512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1240410366","html_url":"https://github.com/apache/jena/issues/1516#issuecomment-1240410366","issue_url":"https://api.github.com/repos/apache/jena/issues/1516","id":1240410366,"node_id":"IC_kwDOAHF7Ec5J7yj-","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T08:40:50Z","updated_at":"2022-09-08T08:44:09Z","author_association":"MEMBER","body":"> FYI: building fuseki with https://github.com/apache/jena/pull/1520 does not seem to be related to this issue\r\n\r\nThere was a discussion on Jetty lists about CORS+auth but I couldn't find a raised issue.\r\nhttps://www.eclipse.org/lists/jetty-users/msg08899.html\r\n\r\nIt was good to do it anyway. It's unfortunate Fuseki needs its own copy at the moment.\r\n\r\nMy long term plan is to consolidate on Fuseki Main and not have a webapp except keeping the WAR file around. i.e. change the standalone JAR. Fuseki modules will add the admin and UI functionality - this has been prototyped but still some way from being ready.\r\n\r\nWe don't get any benefit from being a webapp - the war file has always seemed to be little used compared to the standalone jar. \r\n\r\nWhat with containers and cloud, FusekiMain with a choice of [modules](https://jena.apache.org/documentation/fuseki2/fuseki-modules.html) makes more sense - c.f. Apache Httpd.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1240410366/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1240419055","html_url":"https://github.com/apache/jena/pull/1521#issuecomment-1240419055","issue_url":"https://api.github.com/repos/apache/jena/issues/1521","id":1240419055,"node_id":"IC_kwDOAHF7Ec5J70rv","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T08:48:34Z","updated_at":"2022-09-08T08:48:34Z","author_association":"MEMBER","body":"Indeed it can be. \r\n\r\nDid it make any difference to performance in some situation?. Nowadays (Java8 onwards) the compiler has \"effectively final\" - it classifies declarations based on usage.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1240419055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1240445706","html_url":"https://github.com/apache/jena/pull/1441#issuecomment-1240445706","issue_url":"https://api.github.com/repos/apache/jena/issues/1441","id":1240445706,"node_id":"IC_kwDOAHF7Ec5J77MK","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T09:12:24Z","updated_at":"2022-09-08T09:12:24Z","author_association":"MEMBER","body":"See discussion : https://lists.apache.org/thread/dgnhbtf4p3sdnrwzxpml5yo1mr9cjh43\r\n\r\nThere is another way to achieve the necessary goals.\r\n\r\nClosing this PR (which will still be here) for now.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1240445706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241646844","html_url":"https://github.com/apache/jena/issues/1524#issuecomment-1241646844","issue_url":"https://api.github.com/repos/apache/jena/issues/1524","id":1241646844,"node_id":"IC_kwDOAHF7Ec5KAgb8","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T08:08:25Z","updated_at":"2022-09-09T08:08:25Z","author_association":"MEMBER","body":"Could you provide a minimal example assembler?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241646844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241668265","html_url":"https://github.com/apache/jena/pull/1523#issuecomment-1241668265","issue_url":"https://api.github.com/repos/apache/jena/issues/1523","id":1241668265,"node_id":"IC_kwDOAHF7Ec5KAlqp","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T08:29:04Z","updated_at":"2022-09-09T08:29:04Z","author_association":"MEMBER","body":"Edits fixed.\r\n\r\nAlso, the PR has been rebased with the POM changes elsewhere.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241668265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241701141","html_url":"https://github.com/apache/jena/issues/1524#issuecomment-1241701141","issue_url":"https://api.github.com/repos/apache/jena/issues/1524","id":1241701141,"node_id":"IC_kwDOAHF7Ec5KAtsV","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T08:59:24Z","updated_at":"2022-09-09T09:09:13Z","author_association":"CONTRIBUTOR","body":"Is this minimal enough?\r\n\r\n```ttl\r\n@prefix fuseki:  <http://jena.apache.org/fuseki#> .\r\n@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\r\n@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .\r\n@prefix tdb:     <http://jena.hpl.hp.com/2008/tdb#> .\r\n@prefix tdb2:    <http://jena.apache.org/2016/tdb#> .\r\n@prefix ja:      <http://jena.hpl.hp.com/2005/11/Assembler#> .\r\n@prefix :        <http://base/#> .\r\n@prefix text:    <http://jena.apache.org/text#> .\r\n@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .\r\n@prefix adm:     <http://purl.bdrc.io/ontology/admin/> .\r\n@prefix bdo:     <http://purl.bdrc.io/ontology/core/> .\r\n@prefix bdr:     <http://purl.bdrc.io/resource/> .\r\n\r\n\r\n[] rdf:type fuseki:Server ;\r\n   fuseki:services (\r\n     :corerw\r\n   ) .\r\n\r\n:corerw rdf:type fuseki:Service ;\r\n    fuseki:name                       \"corerw\" ;     # name of the dataset in the url\r\n    fuseki:serviceQuery               \"query\" ;    # SPARQL query service\r\n    fuseki:dataset                    :core_text_dataset ;\r\n    .\r\n\r\n:core_text_dataset rdf:type     text:TextDataset ;\r\n    text:dataset   :dataset_core ;\r\n    text:index     :core_lucene_index ;\r\n    .\r\n\r\n# using TDB\r\n:dataset_core rdf:type      tdb:DatasetTDB ;\r\n     tdb:location \"/usr/local/fuseki/base/databases/core\" ;\r\n     tdb:unionDefaultGraph true ;\r\n     .\r\n\r\n# Text index description\r\n:core_lucene_index a text:TextIndexLucene ;\r\n    text:directory <file:/usr/local/fuseki/base/lucene-core> ;\r\n    text:storeValues true ;\r\n    text:multilingualSupport true ;\r\n    text:ignoreIndexErrors true ;\r\n    text:defineAnalyzers (\r\n        [ text:defineAnalyzer :kmUniAnalyzer ; \r\n          text:analyzer [ \r\n            a text:GenericAnalyzer ;\r\n            text:class \"io.bdrc.lucene.km.KhmerAnalyzer\" ;\r\n            text:params (\r\n                [ text:paramName \"normalizationlevel\" ;\r\n                  text:paramValue 3 ]\r\n                )\r\n            ] ; \r\n          ]\r\n        [ text:addLang \"km\" ;\r\n          text:analyzer [ \r\n            a text:DefinedAnalyzer ; \r\n            text:useAnalyzer :kmUniAnalyzer ;\r\n            ] ;\r\n          ]\r\n      ) ;\r\n    .\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241701141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241746395","html_url":"https://github.com/apache/jena/issues/1524#issuecomment-1241746395","issue_url":"https://api.github.com/repos/apache/jena/issues/1524","id":1241746395,"node_id":"IC_kwDOAHF7Ec5KA4vb","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T09:40:30Z","updated_at":"2022-09-09T09:40:56Z","author_association":"MEMBER","body":"> text:class \"io.bdrc.lucene.km.KhmerAnalyzer\" ;\r\n\r\nIt depends on external code. Given the jump in versions, including java8 -> java11, that might be an issue. The code doe snot trap all class load possible problems, only \"not found\".\r\n\r\n>    text:storeValues true ;\r\n    text:multilingualSupport true ;\r\n    text:ignoreIndexErrors true ;\r\n    text:defineAnalyzers (\r\n\r\nToo many things I'm not familiar with.\r\nI'll leave this with you for now.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241746395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241747301","html_url":"https://github.com/apache/jena/issues/1524#issuecomment-1241747301","issue_url":"https://api.github.com/repos/apache/jena/issues/1524","id":1241747301,"node_id":"IC_kwDOAHF7Ec5KA49l","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T09:41:29Z","updated_at":"2022-09-09T09:41:29Z","author_association":"CONTRIBUTOR","body":"great","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241747301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241825586","html_url":"https://github.com/apache/jena/issues/1524#issuecomment-1241825586","issue_url":"https://api.github.com/repos/apache/jena/issues/1524","id":1241825586,"node_id":"IC_kwDOAHF7Ec5KBMEy","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T10:58:28Z","updated_at":"2022-09-09T10:58:28Z","author_association":"CONTRIBUTOR","body":"after some debugging, it turns out this is triggered by the missing class `\"io.bdrc.lucene.km.KhmerAnalyzer\"`. There's a try / catch block but for some reason the error doesn't appear in `tomcat/logs/localhost.2022-09-09.log`, it's only when reproducing it locally in eclipse that I was able to see it. When testing locally though the NPE also appears, so there seems to be some issue further down the line when this exception occurs...\r\n\r\nI'll close this since I won't debug further but I hope this issue might help people encountering the same issue","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241825586/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241886005","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1241886005","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1241886005,"node_id":"IC_kwDOAHF7Ec5KBa01","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T11:53:57Z","updated_at":"2022-09-09T11:53:57Z","author_association":"MEMBER","body":"Not sure I fully understand that. Could you give a concrete timeline diagram? \r\n\r\nIs the problem having two sides calling \"add\" (both consumer and producer)? We already have is the AtomicBoolean for a back channel. A bit of extra work in what should be an error situation so as not to impact the normal processing is a reasonable tradeoff.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1241886005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242666783","html_url":"https://github.com/apache/jena/issues/1526#issuecomment-1242666783","issue_url":"https://api.github.com/repos/apache/jena/issues/1526","id":1242666783,"node_id":"IC_kwDOAHF7Ec5KEZcf","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-10T08:19:58Z","updated_at":"2022-09-10T08:19:58Z","author_association":"MEMBER","body":"Is the error before the request is sent?\r\n\r\nThat would be because `rsparql` doesn't know that it is an aggregate function. Aggregators have to be declared to be parsed correctly otherwise they look like plain function calls.\r\n\r\nYou could add custom Jena initialization code to the classpath to declare the aggregates.\r\n\r\nOr when the far end is ARQ, you can use the AGG syntax to indicate an aggregate.\r\n\r\n```\r\nselect ?s1 (AGG set:collect(?loc2) as ?loc2s) {\r\n```\r\n\r\nexcept `rsparql` accepts strict SPARQL 1.1 so it needs a tweak for that.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242666783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242686252","html_url":"https://github.com/apache/jena/issues/1526#issuecomment-1242686252","issue_url":"https://api.github.com/repos/apache/jena/issues/1526","id":1242686252,"node_id":"IC_kwDOAHF7Ec5KEeMs","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-10T09:45:14Z","updated_at":"2022-09-10T09:45:14Z","author_association":"CONTRIBUTOR","body":"yes the error comes and the request is never sent. I was wondering if `rsparql` was a better `curl`, so to speak, but I guess it doesn't easily work with custom aggregators because they won't be parsed correctly without additional work.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242686252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242692569","html_url":"https://github.com/apache/jena/issues/1526#issuecomment-1242692569","issue_url":"https://api.github.com/repos/apache/jena/issues/1526","id":1242692569,"node_id":"IC_kwDOAHF7Ec5KEfvZ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-10T10:11:01Z","updated_at":"2022-09-10T10:11:01Z","author_association":"MEMBER","body":"c.f. SOH `s-query`\r\n\r\nThough `curl` is fine.\r\n\r\nFuseki servers have \"?format=text\" if you want the server to text type results. Or pipeto `rset`.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242692569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242694159","html_url":"https://github.com/apache/jena/issues/1526#issuecomment-1242694159","issue_url":"https://api.github.com/repos/apache/jena/issues/1526","id":1242694159,"node_id":"IC_kwDOAHF7Ec5KEgIP","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-10T10:18:05Z","updated_at":"2022-09-10T10:18:05Z","author_association":"MEMBER","body":"#1527 changed `rsparql` to allow ARQ syntax.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242694159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242837639","html_url":"https://github.com/apache/jena/issues/1528#issuecomment-1242837639","issue_url":"https://api.github.com/repos/apache/jena/issues/1528","id":1242837639,"node_id":"IC_kwDOAHF7Ec5KFDKH","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-11T01:30:30Z","updated_at":"2022-09-11T01:30:30Z","author_association":"MEMBER","body":"Hmm, I think that could be an issue with the IDE. I remember having to close the shaded module in Eclipse. If you are using Eclipse, try that (close the module-project). Maybe the same fixes the issue in IntelliJ, although I don't know if you have to ignore the module or do something similar - https://github.com/apache/jena/tree/main/jena-shaded-guava","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242837639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242916867","html_url":"https://github.com/apache/jena/issues/1528#issuecomment-1242916867","issue_url":"https://api.github.com/repos/apache/jena/issues/1528","id":1242916867,"node_id":"IC_kwDOAHF7Ec5KFWgD","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-11T08:32:47Z","updated_at":"2022-09-15T08:52:28Z","author_association":"MEMBER","body":"Sorry it's not working cleanly first time.\r\n\r\nAs well as excluding `jena-shaded-guava` as @kinow now notes, close or don't import, the top level project. It ends up with two routes to everything which can confuse IDEs.\r\n\r\nWhich IDE do you use? We can expand the build instructions for the next person who encounters these issues.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242916867/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242942599","html_url":"https://github.com/apache/jena/issues/1528#issuecomment-1242942599","issue_url":"https://api.github.com/repos/apache/jena/issues/1528","id":1242942599,"node_id":"IC_kwDOAHF7Ec5KFcyH","user":{"login":"Bearshanjun","id":34940587,"node_id":"MDQ6VXNlcjM0OTQwNTg3","avatar_url":"https://avatars.githubusercontent.com/u/34940587?v=4","gravatar_id":"","url":"https://api.github.com/users/Bearshanjun","html_url":"https://github.com/Bearshanjun","followers_url":"https://api.github.com/users/Bearshanjun/followers","following_url":"https://api.github.com/users/Bearshanjun/following{/other_user}","gists_url":"https://api.github.com/users/Bearshanjun/gists{/gist_id}","starred_url":"https://api.github.com/users/Bearshanjun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bearshanjun/subscriptions","organizations_url":"https://api.github.com/users/Bearshanjun/orgs","repos_url":"https://api.github.com/users/Bearshanjun/repos","events_url":"https://api.github.com/users/Bearshanjun/events{/privacy}","received_events_url":"https://api.github.com/users/Bearshanjun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-11T11:21:38Z","updated_at":"2022-09-11T11:21:38Z","author_association":"NONE","body":"Thanks guys, I use IDEA 2022.2.1 , I hope it can help you","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1242942599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1243038538","html_url":"https://github.com/apache/jena/issues/1516#issuecomment-1243038538","issue_url":"https://api.github.com/repos/apache/jena/issues/1516","id":1243038538,"node_id":"IC_kwDOAHF7Ec5KF0NK","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-11T20:38:10Z","updated_at":"2022-09-11T20:38:10Z","author_association":"CONTRIBUTOR","body":"Hi Andy, good news. Your PR made me revisit the CORS source code and there is a -- let's say \"workaround\" -- in the CORS code that can make it completely stop the filter + servlet chain and create a fake preflight OPTIONS response.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1243038538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1243300154","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1243300154","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1243300154,"node_id":"IC_kwDOAHF7Ec5KG0E6","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-12T07:00:58Z","updated_at":"2022-09-12T07:18:15Z","author_association":"CONTRIBUTOR","body":"I revised my previous comment with line numbers and a better description of the issue.\r\nThe most recent commits have the AtomicBoolean replaced with an AtomicInteger representing 3 states: RUNNING, ABORTING (= abort requested) and ABORTED.\r\n\r\nThese states affect what happens when the destination receives the next chunk:\r\n- When in ABORTING state, then there is an atomic transition into ABORTED state. Subsequently, the chunk is ignored and instead the queue is cleared and the poison is placed on it.\r\n- In ABORTED state any further chunk raises an exception.\r\n- In RUNNING state the chunk is just normally added to the queue\r\n\r\nA concurrent abort() request transitions from RUNNING into ABORTING state and interrupts the parser thread.\r\nIn contrast to my previous approach, abort() no longer modifies the queue directly; this only happens in the destination based on the state.\r\n\r\n- If the destination was waiting at a full queue then it should be interrupted and do the abort action (clear queue + place poison)\r\n- Otherwise, at latest when the next chunk arrives then the abort action will trigger\r\n\r\nI hope I didn't overlook anything so that this approach is now sound. The \"art\" here is essentially getting away with only a single atomic value that is checked per chunk - next to the blocking queue. The alternative would be custom synchronized blocks rather than relying on the blocking queue's features.\r\n\r\nThe code passes the test suite but I will do some more real-world testing to be sure.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1243300154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1243392766","html_url":"https://github.com/apache/jena/issues/1516#issuecomment-1243392766","issue_url":"https://api.github.com/repos/apache/jena/issues/1516","id":1243392766,"node_id":"IC_kwDOAHF7Ec5KHKr-","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-12T08:29:10Z","updated_at":"2022-09-12T08:29:10Z","author_association":"MEMBER","body":"Hi @SimonBin,\r\n\r\nThat'll do - if I understand CORS and the code (big _if_), the filter only shortcuts preflight OPTIONS, not all OPTIONS. That's good.\r\n\r\nFuseki/Main will need a similar change and also reverse the auth and CORS filters which I'll do.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1243392766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1246315816","html_url":"https://github.com/apache/jena/issues/1532#issuecomment-1246315816","issue_url":"https://api.github.com/repos/apache/jena/issues/1532","id":1246315816,"node_id":"IC_kwDOAHF7Ec5KSUUo","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T06:45:24Z","updated_at":"2022-09-14T06:45:24Z","author_association":"MEMBER","body":"Jena does not recognise the `.ng` file extension you used.\n\nFuseki backups are written as NQuads files for which the normal extension is `.nq`\n\nSo either try renaming the backup file appropriately to use this extension, or you can try explicitly stating the RDF serialisation to the loader command. This is usually done via the `--lang` or `--syntax` options (I can't remember which applies to this command off the top of my head, run with `--help` to see the options for the command)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1246315816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1246336578","html_url":"https://github.com/apache/jena/issues/1532#issuecomment-1246336578","issue_url":"https://api.github.com/repos/apache/jena/issues/1532","id":1246336578,"node_id":"IC_kwDOAHF7Ec5KSZZC","user":{"login":"kdejaeger","id":279268,"node_id":"MDQ6VXNlcjI3OTI2OA==","avatar_url":"https://avatars.githubusercontent.com/u/279268?v=4","gravatar_id":"","url":"https://api.github.com/users/kdejaeger","html_url":"https://github.com/kdejaeger","followers_url":"https://api.github.com/users/kdejaeger/followers","following_url":"https://api.github.com/users/kdejaeger/following{/other_user}","gists_url":"https://api.github.com/users/kdejaeger/gists{/gist_id}","starred_url":"https://api.github.com/users/kdejaeger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kdejaeger/subscriptions","organizations_url":"https://api.github.com/users/kdejaeger/orgs","repos_url":"https://api.github.com/users/kdejaeger/repos","events_url":"https://api.github.com/users/kdejaeger/events{/privacy}","received_events_url":"https://api.github.com/users/kdejaeger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T07:06:17Z","updated_at":"2022-09-14T07:06:17Z","author_association":"NONE","body":"Ok thanks, I didn't notice renamed it wrongly.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1246336578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1246985842","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1246985842","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1246985842,"node_id":"IC_kwDOAHF7Ec5KU35y","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T16:03:31Z","updated_at":"2022-09-14T16:03:31Z","author_association":"CONTRIBUTOR","body":"actually the logs say that the file is considered:\r\n\r\n```\r\n15:53:13 INFO  Config          :: Load configuration: file:///usr/local/fuseki/base/configuration/core.ttl\r\n15:53:13 DEBUG info            :: Build database: /usr/local/fuseki/base/databases/core/\r\n15:53:13 DEBUG info            :: Optimizer explicitly turned off\r\n```\r\n\r\nare there changes from 3.14.0 to 4.6.1 that would affect this behavior?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1246985842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1247796834","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1247796834","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1247796834,"node_id":"IC_kwDOAHF7Ec5KX95i","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T08:55:36Z","updated_at":"2022-09-15T08:55:36Z","author_association":"CONTRIBUTOR","body":"The actual query that I'm debugging is using a jena-text query:\r\n\r\n```sparql\r\nprefix bdr:   <http://purl.bdrc.io/resource/>\r\nprefix adm:   <http://purl.bdrc.io/ontology/admin/>\r\nprefix bda:   <http://purl.bdrc.io/admindata/>\r\nprefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#>\r\nprefix text:  <http://jena.apache.org/text#>\r\n\r\nSELECT  ?res \r\nWHERE {\r\n  ?res text:query ( rdfs:label \"\\\"A concise historical account of the techniques\\\"\"@en ) .\r\n  ?resRepAdm  adm:adminAbout  ?res ;\r\n          adm:status      bda:StatusReleased\r\n}\r\n```\r\n\r\nThe performance of the text query is very good and it only returns one result (as seen in the stacktrace below), but the rest of the BGP is very slow (several seconds, this is after running it multiple times). I wanted to debug further but I can't run a jena-text query in `tdbquery` and I can't get exec logs with Fuseki because of https://github.com/apache/jena/issues/1535 so I'm not sure what to do... I suspect what slows things down is the same thing as in the query with `BIND` but I can't be sure.\r\n\r\nStacktrace:\r\n\r\n```\r\n08:54:02,094 INFO  Fuseki          :: [3] POST http://buda4.bdrc.io:13180/fuseki/corerw/\r\n08:54:02,095 INFO  Fuseki          :: [3] Query = prefix bdr:   <http://purl.bdrc.io/resource/> prefix adm:   <http://purl.bdrc.io/ontology/admin/> prefix bda:   <http://purl.bdrc.io/admindata/> prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> prefix text:  <http://jena.apache.org/text#>  SELECT  ?res  WHERE {   ?res text:query ( rdfs:label \"\\\"A concise historical account of the techniques\\\"\"@en ) .   ?resRepAdm  adm:adminAbout  ?res ;           adm:status      bda:StatusReleased }\r\n08:54:02,098 TRACE TextQueryPF     :: exec: ?res text:query (<http://www.w3.org/2000/01/rdf-schema#label> \"\\\"A concise historical account of the techniques\\\"\"@en)\r\n08:54:02,098 TRACE TextQueryPF     :: objectToStruct: x.isURI(), prop: http://www.w3.org/2000/01/rdf-schema#label at idx: 0\r\n08:54:02,098 TRACE TextQueryPF     :: objectToStruct: PROPERTY at 0 IS http://www.w3.org/2000/01/rdf-schema#label WITH pList: null\r\n08:54:02,098 TRACE TextQueryPF     :: prepareQuery with subject: ?res; params: ( properties: [http://www.w3.org/2000/01/rdf-schema#label]; query: \"A concise historical account of the techniques\"; limit: -1; lang: en; highlight: null )\r\n08:54:02,098 DEBUG TextQueryPF     :: Text query: \"A concise historical account of the techniques\" (-1)\r\n08:54:02,099 TRACE TextQueryPF     :: Caching Text query: \"A concise historical account of the techniques\" with key: >>?res -1 [http://www.w3.org/2000/01/rdf-schema#label] \"A concise historical account of the techniques\" en null<< in cache: org.apache.jena.atlas.lib.cache.CacheGuava@a092cf5\r\n08:54:02,125 TRACE TextIndexLucene :: query$ PROCESSING LIST of properties: [http://www.w3.org/2000/01/rdf-schema#label]; Lucene queryString: ; textFields: [rdfsLabel] \r\n08:54:02,125 TRACE TextIndexLucene :: query$ PROCESSED LIST of properties: [http://www.w3.org/2000/01/rdf-schema#label] with resulting qString: rdfsLabel_en:\"A concise historical account of the techniques\" rdfsLabel_bo-x-mixed:\"A concise historical account of the techniques\" rdfsLabel_bo-x-phon-en-m-tbrc:\"A concise historical account of the techniques\" rdfsLabel_bo-x-phon-en-m-thlib:\"A concise historical account of the techniques\" rdfsLabel_en-x-mixed:\"A concise historical account of the techniques\" rdfsLabel_bo-x-phon-en:\"A concise historical account of the techniques\"  \r\n08:54:02,125 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_en, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,125 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_en, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,126 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_en, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,126 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_en, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,126 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-mixed, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,126 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-mixed, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,127 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-phon-en-m-tbrc, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,127 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-phon-en-m-tbrc, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,127 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-phon-en-m-thlib, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,127 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-phon-en-m-thlib, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,128 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_en-x-mixed, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,128 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_en-x-mixed, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,128 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-phon-en, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,128 TRACE QueryMultilingualAnalyzer :: getWrappedAnalyzer langTag: en, fieldName: rdfsLabel_bo-x-phon-en, analyzer: io.bdrc.lucene.en.BDRCEnglishAnalyzer@5c112eea\r\n08:54:02,129 DEBUG TextIndexLucene :: query$ with LIST: [http://www.w3.org/2000/01/rdf-schema#label]; INPUT qString: rdfsLabel_en:\"A concise historical account of the techniques\" rdfsLabel_bo-x-mixed:\"A concise historical account of the techniques\" rdfsLabel_bo-x-phon-en-m-tbrc:\"A concise historical account of the techniques\" rdfsLabel_bo-x-phon-en-m-thlib:\"A concise historical account of the techniques\" rdfsLabel_en-x-mixed:\"A concise historical account of the techniques\" rdfsLabel_bo-x-phon-en:\"A concise historical account of the techniques\" ; with queryParserType: QueryParser; parseQuery with PerFieldAnalyzerWrapper({lang=org.apache.lucene.analysis.core.KeywordAnalyzer@410126b8, uri=org.apache.lucene.analysis.core.KeywordAnalyzer@c1bed9e, graph=org.apache.lucene.analysis.core.KeywordAnalyzer@715c680a}, default=QueryMultilingualAnalyzer(default=org.apache.lucene.analysis.standard.StandardAnalyzer@5c16f550)) YIELDS: rdfsLabel_en:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-mixed:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-phon-en-m-tbrc:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-phon-en-m-thlib:\"? concis histor account ? ? techniqu\" rdfsLabel_en-x-mixed:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-phon-en:\"? concis histor account ? ? techniqu\"; parsed query: rdfsLabel_en:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-mixed:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-phon-en-m-tbrc:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-phon-en-m-thlib:\"? concis histor account ? ? techniqu\" rdfsLabel_en-x-mixed:\"? concis histor account ? ? techniqu\" rdfsLabel_bo-x-phon-en:\"? concis histor account ? ? techniqu\"; limit: 10000\r\n08:54:02,135 TRACE TextIndexLucene :: simpleResults[1681462]: fields: [rdfsLabel] doc: Document<stored,indexed,tokenized,indexOptions=DOCS<uri:http://purl.bdrc.io/resource/TTCA153CCA27F183B6> stored,indexed,tokenized,indexOptions=DOCS<graph:http://purl.bdrc.io/graph/MW1KG9453> stored,indexed,tokenized<rdfsLabel:a concise historical account of the techniques of esoteric realization of the nyingmapa and other buddhist traditions of tibet> stored,indexed,tokenized,omitNorms,indexOptions=DOCS<lang:en> stored,indexed,tokenized,omitNorms,indexOptions=DOCS<uid:45e971b8c837181f32d6940b805dfaf529b2c16a000f751c0f0ceb3296e63bd1>>\r\n08:54:02,135 TRACE TextIndexLucene :: simpleResults[1681453]: fields: [rdfsLabel] doc: Document<stored,indexed,tokenized,indexOptions=DOCS<uri:http://purl.bdrc.io/resource/TTA0994950580DBE57> stored,indexed,tokenized,indexOptions=DOCS<graph:http://purl.bdrc.io/graph/MW1KG9453> stored,indexed,tokenized<rdfsLabel:A concise historical account of the techniques of esoteric realisation of the Nyingmapa and other Buddhist traditions of Tibet :being the text of Sngagyur rdo rje theg pa gtso bor gyur pai gtam mdor bsdus legs bshad padma dkar poi rdzing bu /by Zhe-chen Rgyal-tshab Padma-rnam-rgyal.> stored,indexed,tokenized,omitNorms,indexOptions=DOCS<lang:en-x-mixed> stored,indexed,tokenized,omitNorms,indexOptions=DOCS<uid:1e3406cf941c27df4e5110bf498ffce0e495b2b8df1ced21cd77dc2cda16410b>>\r\n08:54:02,139 TRACE TextQueryPF     :: resultsToQueryIterator CALLED with results: [TextHit{node=http://purl.bdrc.io/resource/TTCA153CCA27F183B6 literal=\"a concise historical account of the techniques of esoteric realization of the nyingmapa and other buddhist traditions of tibet\"@en score=7.712467 graph=http://purl.bdrc.io/graph/MW1KG9453 prop=http://www.w3.org/2000/01/rdf-schema#label}, TextHit{node=http://purl.bdrc.io/resource/TTA0994950580DBE57 literal=\"A concise historical account of the techniques of esoteric realisation of the Nyingmapa and other Buddhist traditions of Tibet :being the text of Sngagyur rdo rje theg pa gtso bor gyur pai gtam mdor bsdus legs bshad padma dkar poi rdzing bu /by Zhe-chen Rgyal-tshab Padma-rnam-rgyal.\"@en-x-mixed score=7.5184393 graph=http://purl.bdrc.io/graph/MW1KG9453 prop=http://www.w3.org/2000/01/rdf-schema#label}]\r\n08:54:04,187 DEBUG ConNeg          :: Accept request: application/sparql-results+json,*/*;q=0.9\r\n08:54:04,187 DEBUG ConNeg          :: Content type chosen: [application/sparql-results+json]\r\n08:54:04,187 TRACE Fuseki          :: Content-Type for response: application/sparql-results+json; charset=utf-8\r\n08:54:04,188 INFO  Fuseki          :: [3] 200 OK (2.093 s)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1247796834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249138970","html_url":"https://github.com/apache/jena/pull/1537#issuecomment-1249138970","issue_url":"https://api.github.com/repos/apache/jena/issues/1537","id":1249138970,"node_id":"IC_kwDOAHF7Ec5KdFka","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T09:25:18Z","updated_at":"2022-09-16T09:25:18Z","author_association":"MEMBER","body":"Adding yet another mechanism is not a good idea.\r\n\r\nLet's agree the proper root cause first.\r\n\r\nlog4j properties is the way to control explain logging (and it is easy to pick up the wrong\r\nlog4j properties - `-Dfuseki.loglogging=true`).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249138970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249149880","html_url":"https://github.com/apache/jena/pull/1537#issuecomment-1249149880","issue_url":"https://api.github.com/repos/apache/jena/issues/1537","id":1249149880,"node_id":"IC_kwDOAHF7Ec5KdIO4","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T09:35:50Z","updated_at":"2022-09-16T09:35:50Z","author_association":"CONTRIBUTOR","body":"Sure! I described my understanding of the root cause in https://github.com/apache/jena/issues/1535 with a few pointers to the code (which I'm not very familiar with). Is there something I didn't analyse correctly?\r\n\r\nI've just tried with `-Dfuseki.loglogging=true` and this doesn't change anything to the issue. It would be good to document it on https://jena.apache.org/documentation/fuseki2/fuseki-logging.html though","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249149880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249163743","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1249163743","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1249163743,"node_id":"IC_kwDOAHF7Ec5KdLnf","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T09:50:08Z","updated_at":"2022-09-16T09:50:08Z","author_association":"CONTRIBUTOR","body":"Now that I can see the full Fuseki logs, here is the stacktrace:\r\n\r\n[fuseki-trace.txt](https://github.com/apache/jena/files/9582857/fuseki-trace.txt)\r\n\r\ntwo relevant parts:\r\n\r\n- lines with `Optimizer explicitly turned off` (so `none.opt` has been seen)\r\n- the final query still has triples reorganized:\r\n\r\n```\r\n09:43:54,063 INFO  exec            :: Execute\r\n  ?resRepAdm <http://purl.bdrc.io/ontology/admin/status> <http://purl.bdrc.io/admindata/StatusReleased>\r\n  ?resRepAdm <http://purl.bdrc.io/ontology/admin/adminAbout> ?res\r\n```\r\n\r\nso `none.opt` is not working as expected","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249163743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249176011","html_url":"https://github.com/apache/jena/pull/1537#issuecomment-1249176011","issue_url":"https://api.github.com/repos/apache/jena/issues/1537","id":1249176011,"node_id":"IC_kwDOAHF7Ec5KdOnL","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T10:03:33Z","updated_at":"2022-09-16T10:03:33Z","author_association":"CONTRIBUTOR","body":"From a broader perspective, the core of the issue is that `Explain` has its own log level setting mechanism, independent of log4j. I'm just there are reasons for that and I don't feel confident doing a PR that would align this custom log mechanism with log4j","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249176011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249267696","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1249267696","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1249267696,"node_id":"IC_kwDOAHF7Ec5Kdk_w","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T11:48:58Z","updated_at":"2022-09-16T11:48:58Z","author_association":"MEMBER","body":"There are a few changes going it. What's the status?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249267696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249378632","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1249378632","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1249378632,"node_id":"IC_kwDOAHF7Ec5KeAFI","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T13:39:28Z","updated_at":"2022-09-16T13:39:28Z","author_association":"MEMBER","body":"Might be https://issues.apache.org/jira/browse/JENA-2317.\r\n\r\nSet ARQ optReorderBGP to false.\r\n\r\n```\r\nqparse --set arq:optReorderBGP=false --print=opt --file YourQuery.rq\r\n```\r\n\r\n`--set arq:optReorderBGP=false` should work for Fuseki on the command line.\r\n\r\nIt can be set in assemblers as well with `ja:context`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249378632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249402683","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1249402683","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1249402683,"node_id":"IC_kwDOAHF7Ec5KeF87","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T14:01:13Z","updated_at":"2022-09-16T14:06:56Z","author_association":"CONTRIBUTOR","body":"Thanks a lot for your answer, I'm quite optimistic this can solve my issue!\r\n\r\nThe `qparse` command works well (the BGP is in the initial order), I'm trying to configure Fuseki to also do that, but I've not been successful so far... I'm running it from a war file so I've changed my assembler file to have:\r\n\r\n```ttl\r\n[] rdf:type fuseki:Server ;\r\n   ja:context [ ja:cxtName \"arq:queryTimeout\" ;  ja:cxtValue \"10000,60000\" ] ;\r\n   ja:context [ ja:cxtName \"arq:optReorderBGP\" ;  ja:cxtValue false ] ;\r\n   fuseki:services (\r\n     :corerw\r\n   ) .\r\n```\r\n\r\nbut no change in the result (the BGP is still reordered after a restart of Fuseki). Is there a way to set some command line options or context through java properties when Fuseki is run in a war file?\r\n\r\nThe full assembler file:\r\n\r\n[core.ttl.zip](https://github.com/apache/jena/files/9584666/core.ttl.zip)\r\n\r\n**Edit:** I just tried with `\"false\"` instead of `false` in the ttl, no change","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249402683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249487015","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1249487015","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1249487015,"node_id":"IC_kwDOAHF7Ec5Keain","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T15:11:06Z","updated_at":"2022-09-16T15:12:25Z","author_association":"CONTRIBUTOR","body":"```\r\n10 iterations of inserting 5,000,000 quads\r\n4.6.0: 24m32,261s\r\n4.7.0: 24m56,504s\r\n\r\n20 iterations of inserting 5,432,109 quads\r\n4.6.0: 53m10,034s\r\n4.7.0: 51m39,403s\r\n```\r\n\r\nSo no significant difference in performance and counting the data in the stores matched up, also I found no issues in our hadoop setup.\r\nIt should be done.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249487015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249548979","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1249548979","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1249548979,"node_id":"IC_kwDOAHF7Ec5Kepqz","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T16:14:04Z","updated_at":"2022-09-16T16:14:04Z","author_association":"CONTRIBUTOR","body":"After some debugging, it looks like the context should be at the endpoint level. So for the record, the correct answer is\r\n\r\n```ttl\r\n[] rdf:type fuseki:Server ;\r\n   fuseki:services (\r\n     :corerw\r\n   ) .\r\n\r\n:corerw rdf:type fuseki:Service ;\r\n    fuseki:name                       \"corerw\" ;     # name of the dataset in the url\r\n    fuseki:endpoint [ \r\n        fuseki:operation fuseki:query ; \r\n        fuseki:name \"query\" ;\r\n        ja:context [ ja:cxtName \"arq:queryTimeout\" ;  ja:cxtValue \"10000,60000\" ] ;\r\n        ja:context [ ja:cxtName \"arq:optReorderBGP\" ;  ja:cxtValue false ] ;\r\n    ] ;\r\n    fuseki:serviceUpdate              \"update\" ;   # SPARQL update service\r\n    fuseki:serviceUpload              \"upload\" ;   # Non-SPARQL upload service\r\n    fuseki:serviceReadWriteGraphStore \"data\" ;     # SPARQL Graph store protocol (read and write)\r\n    fuseki:dataset                    :core_text_dataset ;\r\n    .\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249548979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249563029","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1249563029","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1249563029,"node_id":"IC_kwDOAHF7Ec5KetGV","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T16:30:12Z","updated_at":"2022-09-16T16:30:12Z","author_association":"CONTRIBUTOR","body":"the core issue is solved on my side since the performance is now ok on my server, I'm leaving this Github issue open since I still think the `none.opt` doesn't work as expected (or the documentation should change)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1249563029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250029320","html_url":"https://github.com/apache/jena/issues/1528#issuecomment-1250029320","issue_url":"https://api.github.com/repos/apache/jena/issues/1528","id":1250029320,"node_id":"IC_kwDOAHF7Ec5Kge8I","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T08:32:52Z","updated_at":"2022-09-17T08:32:52Z","author_association":"CONTRIBUTOR","body":"With IntelliJ IDE you can just disable the `jena-shaded-guava` module and it will use the dependency from public Maven repo.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250029320/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250081554","html_url":"https://github.com/apache/jena/issues/1535#issuecomment-1250081554","issue_url":"https://api.github.com/repos/apache/jena/issues/1535","id":1250081554,"node_id":"IC_kwDOAHF7Ec5KgrsS","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T14:29:47Z","updated_at":"2022-09-17T14:33:58Z","author_association":"MEMBER","body":"You have to set the context setting as well as set the logger. This allows \"explain\" on some things and not others in a server.\r\nThis can be set the executed jar (this will show server startup use of SPARQL internally - not very helpful), the server config (explain after server starts), text dataset or base dataset configurations.\r\n\r\n```\r\n   ja:context     [ ja:cxtName \"arq:logExec\" ;  ja:cxtValue \"true\" ] ;\r\n```\r\nThe `cxtValue` can also be a level - \"info\", \"fine\", \"all\"\r\n\r\nThe correct logger name is `org.apache.jena.arq.exec`.\r\n\r\nThen works for me (4.6.0).\r\n\r\njena-text logs on `org.apache.jena.arq.info`.\r\n\r\nCaution: The text dataset does not have a real context - it passes down to the storage. Historical but changing will break some usage patterns.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250081554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250081913","html_url":"https://github.com/apache/jena/pull/1537#issuecomment-1250081913","issue_url":"https://api.github.com/repos/apache/jena/issues/1537","id":1250081913,"node_id":"IC_kwDOAHF7Ec5Kgrx5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T14:32:24Z","updated_at":"2022-09-17T14:32:24Z","author_association":"MEMBER","body":"You need to set the context for execution logging. Just using log4j would result in the only possibility being \"log every dataset\". Explain allows targeting.\r\n\r\n```\r\n    [ ja:cxtName \"arq:logExec\" ;  ja:cxtValue \"true\" ] ;\r\n```\r\n\r\nSee issue #1535 - it works for me with Jena 4.6.0.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250081913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250082761","html_url":"https://github.com/apache/jena/issues/1533#issuecomment-1250082761","issue_url":"https://api.github.com/repos/apache/jena/issues/1533","id":1250082761,"node_id":"IC_kwDOAHF7Ec5Kgr_J","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T14:37:36Z","updated_at":"2022-09-17T14:37:36Z","author_association":"MEMBER","body":"General: You can set the context on the server, dataset, or endpoint. But not the service. That does not have it's own runtime context separate from its `ja:dataset`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250082761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250083623","html_url":"https://github.com/apache/jena/issues/1535#issuecomment-1250083623","issue_url":"https://api.github.com/repos/apache/jena/issues/1535","id":1250083623,"node_id":"IC_kwDOAHF7Ec5KgsMn","user":{"login":"eroux","id":60868,"node_id":"MDQ6VXNlcjYwODY4","avatar_url":"https://avatars.githubusercontent.com/u/60868?v=4","gravatar_id":"","url":"https://api.github.com/users/eroux","html_url":"https://github.com/eroux","followers_url":"https://api.github.com/users/eroux/followers","following_url":"https://api.github.com/users/eroux/following{/other_user}","gists_url":"https://api.github.com/users/eroux/gists{/gist_id}","starred_url":"https://api.github.com/users/eroux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eroux/subscriptions","organizations_url":"https://api.github.com/users/eroux/orgs","repos_url":"https://api.github.com/users/eroux/repos","events_url":"https://api.github.com/users/eroux/events{/privacy}","received_events_url":"https://api.github.com/users/eroux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T14:43:15Z","updated_at":"2022-09-17T14:43:15Z","author_association":"CONTRIBUTOR","body":"Ah yes thanks! I think it would be very helpful to update the documentation for this","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250083623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250084770","html_url":"https://github.com/apache/jena/issues/1528#issuecomment-1250084770","issue_url":"https://api.github.com/repos/apache/jena/issues/1528","id":1250084770,"node_id":"IC_kwDOAHF7Ec5Kgsei","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T14:50:43Z","updated_at":"2022-09-17T14:50:43Z","author_association":"MEMBER","body":"Yes - the best way is to omit `jena-shaded-guava` (IntelliJ or Eclipse).\r\n\r\n@Bearshanjun -- does this work for you?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250084770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250086657","html_url":"https://github.com/apache/jena/issues/1535#issuecomment-1250086657","issue_url":"https://api.github.com/repos/apache/jena/issues/1535","id":1250086657,"node_id":"IC_kwDOAHF7Ec5Kgs8B","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T15:03:00Z","updated_at":"2022-09-17T15:03:00Z","author_association":"MEMBER","body":"PR for https://jena.apache.org/documentation/query/explain.html welcome.\r\n\r\nBut basic reordering is done generally (optReorderBGP) so that FILTERs can be moved to right place before considering some other optimizations.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250086657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250092741","html_url":"https://github.com/apache/jena/pull/1475#issuecomment-1250092741","issue_url":"https://api.github.com/repos/apache/jena/issues/1475","id":1250092741,"node_id":"IC_kwDOAHF7Ec5KgubF","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T15:40:40Z","updated_at":"2022-09-17T15:41:22Z","author_association":"CONTRIBUTOR","body":"I converted back to draft because I have some pending updates which I need to benchmark against the well-working parts of the original PrefixMapStd (IRIs with / or #) first in order to determine whether performance-wise it would make sense to include them.\r\n\r\nThe general idea is to have PrefixMap implementation that auto-adapts to a given workload - such as parsing lots of queries without the overhead of updating reverse-lookup structures as well as updating them on-demand upon writing out RDF.\r\n\r\nIn essence the direction I am investigating is about building/updating the reverse-lookup (iri-to-prefix) structures lazily (upon abbreviating). This would buffer prefix-iri inserts/deletions similar to your BufferingPrefixMap; upon abbreviate only the delta is materialized into the reverse-lookup structures.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250092741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250097721","html_url":"https://github.com/apache/jena/pull/1475#issuecomment-1250097721","issue_url":"https://api.github.com/repos/apache/jena/issues/1475","id":1250097721,"node_id":"IC_kwDOAHF7Ec5Kgvo5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-17T16:11:23Z","updated_at":"2022-09-17T16:11:23Z","author_association":"MEMBER","body":"Another choice is to restrict to the basic case of prefix at the final \"/\", \"#\" and \":\" (for URNs).  Only have the \"fast path\" abbreviate.\r\n\r\nDo you have cases where abbreviation is not one of these?\r\n\r\nIf you are going for the complicated version,maybe the best way is to have a new PrefixMapCaching and leave PrefixMapStd.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250097721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250184527","html_url":"https://github.com/apache/jena/issues/1528#issuecomment-1250184527","issue_url":"https://api.github.com/repos/apache/jena/issues/1528","id":1250184527,"node_id":"IC_kwDOAHF7Ec5KhE1P","user":{"login":"Bearshanjun","id":34940587,"node_id":"MDQ6VXNlcjM0OTQwNTg3","avatar_url":"https://avatars.githubusercontent.com/u/34940587?v=4","gravatar_id":"","url":"https://api.github.com/users/Bearshanjun","html_url":"https://github.com/Bearshanjun","followers_url":"https://api.github.com/users/Bearshanjun/followers","following_url":"https://api.github.com/users/Bearshanjun/following{/other_user}","gists_url":"https://api.github.com/users/Bearshanjun/gists{/gist_id}","starred_url":"https://api.github.com/users/Bearshanjun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bearshanjun/subscriptions","organizations_url":"https://api.github.com/users/Bearshanjun/orgs","repos_url":"https://api.github.com/users/Bearshanjun/repos","events_url":"https://api.github.com/users/Bearshanjun/events{/privacy}","received_events_url":"https://api.github.com/users/Bearshanjun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-18T03:47:25Z","updated_at":"2022-09-18T03:47:25Z","author_association":"NONE","body":"Of course, thanks again for your help","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250184527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250227001","html_url":"https://github.com/apache/jena/pull/1543#issuecomment-1250227001","issue_url":"https://api.github.com/repos/apache/jena/issues/1543","id":1250227001,"node_id":"IC_kwDOAHF7Ec5KhPM5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-18T09:13:11Z","updated_at":"2022-09-18T09:13:11Z","author_association":"MEMBER","body":"Thanks.\r\n\r\nAlso some wider clean-up in-progress: b9e5bab9c0f346a137a3ba3601da071ce0baecea\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250227001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250228589","html_url":"https://github.com/apache/jena/pull/1506#issuecomment-1250228589","issue_url":"https://api.github.com/repos/apache/jena/issues/1506","id":1250228589,"node_id":"IC_kwDOAHF7Ec5KhPlt","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-18T09:24:32Z","updated_at":"2022-09-20T19:16:56Z","author_association":"MEMBER","body":"Slight bump in the road: https://issues.apache.org/jira/browse/LOG4J2-3601\r\n\r\nIf that is not accepted, each inclusion of log4j-slf4j2-impl needs to be paired with an inclusion of log4j-core.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250228589/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250332211","html_url":"https://github.com/apache/jena/pull/1478#issuecomment-1250332211","issue_url":"https://api.github.com/repos/apache/jena/issues/1478","id":1250332211,"node_id":"IC_kwDOAHF7Ec5Kho4z","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-18T15:31:58Z","updated_at":"2022-09-18T15:31:58Z","author_association":"MEMBER","body":"@Aklakan \r\nFYI: After this is merged, the code reorg #1539 PR will go in which is a small bump to forked repos.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250332211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250376590","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1250376590","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1250376590,"node_id":"IC_kwDOAHF7Ec5KhzuO","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-18T19:59:35Z","updated_at":"2022-09-18T19:59:35Z","author_association":"MEMBER","body":"After merging PR #1478, 2 of the github build actions failed:\r\n\r\nMacOS: https://github.com/apache/jena/actions/runs/3077784931\r\nWindows: https://github.com/apache/jena/actions/runs/3077784687\r\n```\r\n[INFO] Running org.apache.jena.riot.system.TS_RiotSystem\r\nError:  Tests run: 342, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 1.662 s <<< FAILURE! - in org.apache.jena.riot.system.TS_RiotSystem\r\nError:  lowLatencyParse(org.apache.jena.riot.system.TestAsyncParser)  Time elapsed: 0.25 s  <<< FAILURE!\r\njava.lang.AssertionError: Too many bytes consumed from input stream (60000)\r\n\tat org.apache.jena.riot.system.TestAsyncParser.lowLatencyParse(TestAsyncParser.java:188)\r\n```\r\n\r\nThe Linux build passed.\r\nhttps://github.com/apache/jena/actions/runs/3077784184\r\n\r\nThe github actions are part of the code base and can be run on forked repos.\r\n\r\nBuilding in these different environments (GH actions, ASF Jenkins) can be challenging. They are virtualized and extremely long pauses can occur (I've seen pauses of over 30 seconds due to the virtual machine simply not running for a while).\r\n\r\nCan the test be made more robust?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250376590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250766495","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1250766495","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1250766495,"node_id":"IC_kwDOAHF7Ec5KjS6f","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T09:11:56Z","updated_at":"2022-09-19T09:11:56Z","author_association":"MEMBER","body":"I tried again at what is often a quieter time (2022/09/19, 08:00 UTC, 10:00 CET). Sometimes test fail because of the general load on the VM hosts causing extreme bursty-ness of processing, or the I/O patterns are different in these virtualized environments.\r\n\r\nBut.\r\n\r\nMacOS still failing (different number of bytes read this time 20000 not 60000)\r\nhttps://github.com/apache/jena/actions/runs/3080754379/jobs/4978478502 \r\n\r\nWindows: (still 60000)\r\nhttps://github.com/apache/jena/actions/runs/3080780062/jobs/4978535429\r\n\r\nIf this test is testing for an expected, normal behaviour, but isn't guaranteed behaviour under all conditions (which would not be the first time Jena has encountered this), and it's impractical to make the test robust, then let's remove it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250766495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250810828","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1250810828","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1250810828,"node_id":"IC_kwDOAHF7Ec5KjdvM","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T09:56:49Z","updated_at":"2022-09-19T09:56:49Z","author_association":"CONTRIBUTOR","body":"I will look into it today what goes wrong there; the test itself should check for excessive read ahead when abort is requested; maybe it fails because of different internal buffer sizes on different os but not sure yet.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250810828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250845301","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1250845301","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1250845301,"node_id":"IC_kwDOAHF7Ec5KjmJ1","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T10:31:52Z","updated_at":"2022-09-19T10:31:52Z","author_association":"MEMBER","body":"Welcome to the demanding (hostile) world of CI servers \n\nWe can disable it if it starts to become a blockage. It's not ATM - Linux passes so it's not a code main error.\n\nAnd it's not the only unstable test. There is a small set of tests that fail often in short bursts of a few days.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250845301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250946972","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1250946972","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1250946972,"node_id":"IC_kwDOAHF7Ec5Kj--c","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T12:21:36Z","updated_at":"2022-09-19T16:12:17Z","author_association":"CONTRIBUTOR","body":"W.r.t. the failing 'lowLatencyParse' test case:\r\n\r\nIt's a bug in the test; the configured limit does not consider the farthest possible read ahead until the queue blocks because of becoming full. If I add a Thread.sleep(1000) call before leaving the try-with-resources block then the test also fails on Linux. The justification why the test fails at 60K bytes is as follows:\r\n\r\n- Chunk size is set to 100, one triple in the test is always exactly 50 bytes - so one chunk corresponds to 5000bytes.\r\n- The queue size is 10 - so it can hold triples worth 50K bytes, after that it blocks.\r\n- However, we consume 10 triples which removes one chunk, which gets filled up again - at this point we consumed 55K.\r\n- Then we abort, which clears the queue and schedules abort on the next chunk. When it arrives 60K have been consumed (this assumes that the parser thread is blocked while it invokes the destination).\r\n\r\nSo the read ahead in the test is  `(queueSize + 2) * (chunkSize * tripleByteSize)`. If the parser used buffering then a bit more could be read.\r\n\r\nBut e.g. setting the limit in the test to e.g. 70.000 should fix it.\r\n\r\n\r\n> And it's not the only unstable test. There is a small set of tests that fail often in short bursts of a few days.\r\n\r\nAre you referring to test cases for the AsyncParser or other ones?\r\n\r\nThere are a couple of test cases that spawn many (100) threads and subsequently test that all have terminated. This might be a problem in github CI pipelines which AFAIK only use 2 cores - it would be possible to decrease the number e.g. to 20 or 10.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1250946972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251311745","html_url":"https://github.com/apache/jena/pull/1475#issuecomment-1251311745","issue_url":"https://api.github.com/repos/apache/jena/issues/1475","id":1251311745,"node_id":"IC_kwDOAHF7Ec5KlYCB","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T17:15:52Z","updated_at":"2022-09-19T17:16:35Z","author_association":"CONTRIBUTOR","body":"> Another choice is to restrict to the basic case of prefix at the final \"/\", \"#\" and \":\" (for URNs). Only have the \"fast path\" abbreviate.\r\n\r\nI think your suggestions of including ':' in the list and only using fast path (without resorting to scanning) would work efficiently and be sufficient for the vast majority of use cases. Without scanning, even relative IRIs (that do not contain any of the fast track chars) wouldn't cause problems.\r\n\r\n> Do you have cases where abbreviation is not one of these?\r\n\r\nRight now I only have some initial experiments where I abuse the prefix map as a poor-mans dictionary encoding in order to reduce the amount of bytes that need to be parsed in order to produce triples/quads. For this I am using trie-based lookups to encode the data (so IRIs can be split anywhere), but I have yet to evaluate whether this actually gives a noticeable performance boost.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251311745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251383492","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1251383492","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1251383492,"node_id":"IC_kwDOAHF7Ec5KlpjE","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T18:22:45Z","updated_at":"2022-09-19T18:22:45Z","author_association":"MEMBER","body":"> > And it's not the only unstable test. There is a small set of tests that fail often in short bursts of a few days.\r\n> \r\n> Are you referring to test cases for the AsyncParser or other ones?\r\n\r\nNo - other tests - query timeout  and also TDB related ones. A number of factors including random huge pauses and I/O or virtualised I/O effects.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251383492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251386807","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1251386807","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1251386807,"node_id":"IC_kwDOAHF7Ec5KlqW3","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T18:25:19Z","updated_at":"2022-09-19T18:25:19Z","author_association":"MEMBER","body":"> There are a couple of test cases that spawn many (100) threads and subsequently test that all have terminated. This might be a problem in github CI pipelines which AFAIK only use 2 cores - it would be possible to decrease the number e.g. to 20 or 10.\r\n\r\nYes - probably a good idea to reduce the number. Many threads should not be a problem though they may go away in a very patchy manner. But if the test is good when using 10-20, it makes the suite a little bit more general.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251386807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251523038","html_url":"https://github.com/apache/jena/issues/1477#issuecomment-1251523038","issue_url":"https://api.github.com/repos/apache/jena/issues/1477","id":1251523038,"node_id":"IC_kwDOAHF7Ec5KmLne","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T20:37:27Z","updated_at":"2022-09-19T20:51:10Z","author_association":"CONTRIBUTOR","body":"I updated the tests. I just started running the windows and mac tests on my github account and I am now waiting for the results.\r\n\r\nUpdate: Both green for me :tada: ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1251523038/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1252263439","html_url":"https://github.com/apache/jena/pull/1480#issuecomment-1252263439","issue_url":"https://api.github.com/repos/apache/jena/issues/1480","id":1252263439,"node_id":"IC_kwDOAHF7Ec5KpAYP","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-20T12:09:42Z","updated_at":"2022-09-20T12:09:52Z","author_association":"MEMBER","body":"Found a workaround for the Vue Router blocker, that almost worked. I had to tweak it a little more to get everything working. Then spent some time working on warnings and minor issues with the YASG/YASQE and the file upload components.\r\n\r\nAll manual tests passed. Linter passed with no errors. Updated dependencies once again with `ncu -u` and `yarn install`. The unit tests passed after adjusting the testing libraries (that was updated too, along with Vue 3). Finally, fixing the e2e tests was easy, but good because these tests detected an important bug that would have passed by my tests.\r\n\r\nIt was when you had pagination in the table, like when you have more than 5 datasets. Pagination wasn't working due to a mistake on how to use v-model with Vue 3.\r\n\r\n@afs when you have some spare time to review this one, I think it would be interesting for the review:\r\n\r\n- see if you spot anything that looks odd in the code;\r\n- confirm it works some different way than what I used (I used Eclipse + WebStorm, running FusekiCMD on the latter, and `yarn run server` on the former/terminal);\r\n- confirm there is nothing in the UI that looks odd (I cannot tell anymore, after looking at the UI for so long, but I will take another look in a few weeks);\r\n- test some crazy things, like a query that's more complex than the simple one I used, or edit a graph (I tested it, but who knows), or if you see a table with pagination, then force it to have at least more than 1 page, etc.\r\n\r\nOnce this is merged our dependencies should be using the latest available for Vue and related dependencies. When I started this rewrite my goal was a) replace Backbone by something else like Vue , b) add dependency management , c) add tests both unit and integration/e2e , and then d) upgrade to Vue 3 .\r\n\r\nOther plans include improving the UI for accessibility (translation, color schemas, dark/light modes, vision-impaired users, etc), UIUX improvements, and allow for extensibility (like having plug-ins, or re-using parts of the UI in other applications). Almost there :beers: \r\n\r\nCheers\r\n-Bruno","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1252263439/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253353083","html_url":"https://github.com/apache/jena/pull/1480#issuecomment-1253353083","issue_url":"https://api.github.com/repos/apache/jena/issues/1480","id":1253353083,"node_id":"IC_kwDOAHF7Ec5KtKZ7","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T08:07:45Z","updated_at":"2022-09-21T08:07:45Z","author_association":"MEMBER","body":"I pulled the PR branch - the head commit is 81a8b446f4.\r\n\r\nAre you going to squash the WIP commits before merge?\r\n\r\n----\r\n\r\nI get some test failures, building from the top or just the module.\r\nThis may well be because the toolchain is not up to date (how/what can I check?) but they are timeouts so could that be the issue?\r\n\r\nThen, I pushed the PR branch to my Jena working copy and ran the github action for Linux:\r\n\r\nThe UI step worked (the build failed for other reasons - it does sometimes)\r\nhttps://github.com/afs/jena/actions/runs/3095974510/jobs/5010983697\r\n\r\n```\r\ncd jena-fuseki-ui\r\nmvn clean install\r\n```\r\ngives (extract below - full output [2022-09-21-ui-install.txt](https://github.com/apache/jena/files/9614349/2022-09-21-ui-install.txt)):\r\n\r\n```\r\n[INFO] [TESTS] ================================================================================\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   (Run Starting)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS]    Cypress:        10.8.0                                                                         \r\n[INFO] [TESTS]    Browser:        Electron 102 (headless)                                                        \r\n[INFO] [TESTS]    Node Version:   v16.13.1 (/home/afs/Jena/jena-fuseki2/jena-fuseki-ui/node/node)                \r\n[INFO] [TESTS]    Specs:          2 found (datasets.cy.js, query.cy.js)                                          \r\n[INFO] [TESTS]    Searched:       tests/e2e/specs                                                                \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]                                                                                                     \r\n[INFO] [TESTS]   Running:  datasets.cy.js                                                                  (1 of 2)\r\n[INFO] [TESTS]  DONE  Compiled successfully in 1750ms08:58:47\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]  DONE  Compiled successfully in 2023ms08:58:47\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   datasets\r\n[INFO] [TESTS]     1) Visits datasets page, also the application landing-page\r\n[INFO] [TESTS]     2) Filters without any data\r\n[INFO] [TESTS]     After creating new datasets\r\n[INFO] [TESTS]       3) \"before all\" hook for \"Visits datasets page\"\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   0 passing (24s)\r\n[INFO] [TESTS]   3 failing\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   1) datasets\r\n[INFO] [TESTS]        Visits datasets page, also the application landing-page:\r\n[INFO] [TESTS]      AssertionError: Timed out retrying after 7500ms: Expected to find element: `h2.text-center`, but never found it.\r\n[INFO] [TESTS]       at Context.eval (webpack://apache-jena-fuseki/./tests/e2e/specs/datasets.cy.js:31:7)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   2) datasets\r\n[INFO] [TESTS]        Filters without any data:\r\n[INFO] [TESTS]      AssertionError: Timed out retrying after 7500ms: Expected to find element: `#filterInput`, but never found it.\r\n[INFO] [TESTS]       at Context.eval (webpack://apache-jena-fuseki/./tests/e2e/specs/datasets.cy.js:43:7)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   3) datasets\r\n[INFO] [TESTS]        After creating new datasets\r\n[INFO] [TESTS]          \"before all\" hook for \"Visits datasets page\":\r\n[INFO] [TESTS]      AssertionError: Timed out retrying after 7500ms: Expected to find element: `#dataset-name`, but never found it.\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] Because this error occurred during a `before all` hook we are skipping the remaining tests in the current suite: `After creating new datasets`\r\n[INFO] [TESTS]       at Context.eval (webpack://apache-jena-fuseki/./tests/e2e/specs/datasets.cy.js:60:15)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   (Results)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS]    Tests:        9                                                                                \r\n[INFO] [TESTS]    Passing:      0                                                                                \r\n[INFO] [TESTS]    Failing:      3                                                                                \r\n[INFO] [TESTS]    Pending:      0                                                                                \r\n[INFO] [TESTS]    Skipped:      6                                                                                \r\n[INFO] [TESTS]    Screenshots:  3                                                                                \r\n[INFO] [TESTS]    Video:        false                                                                            \r\n[INFO] [TESTS]    Duration:     23 seconds                                                                       \r\n[INFO] [TESTS]    Spec Ran:     datasets.cy.js                                                                   \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   (Screenshots)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   -  tests/e2e/screenshots/datasets.cy.js/datasets -- Visits datasets page, also the      (1280x720)\r\n[INFO] [TESTS]      application landing-page (failed).png                                                          \r\n[INFO] [TESTS]   -  tests/e2e/screenshots/datasets.cy.js/datasets -- Filters without any data (faile     (1280x720)\r\n[INFO] [TESTS]      d).png                                                                                         \r\n[INFO] [TESTS]   -  tests/e2e/screenshots/datasets.cy.js/datasets -- After creating new datasets --      (1280x720)\r\n[INFO] [TESTS]      Visits datasets page -- before all hook (failed).png                                           \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]                                                                                                     \r\n[INFO] [TESTS]   Running:  query.cy.js                                                                     (2 of 2)\r\n[INFO] [TESTS]  DONE  Compiled successfully in 415ms08:59:13\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   Query\r\n[INFO] [TESTS]     1) \"before all\" hook for \"Uses the correct SPARQL Endpoint\"\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   0 passing (8s)\r\n[INFO] [TESTS]   1 failing\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   1) Query\r\n[INFO] [TESTS]        \"before all\" hook for \"Uses the correct SPARQL Endpoint\":\r\n[INFO] [TESTS]      AssertionError: Timed out retrying after 7500ms: Expected to find element: `#dataset-name`, but never found it.\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] Because this error occurred during a `before all` hook we are skipping the remaining tests in the current suite: `Query`\r\n[INFO] [TESTS]       at Context.eval (webpack://apache-jena-fuseki/./tests/e2e/specs/query.cy.js:30:11)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   (Results)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS]    Tests:        1                                                                                \r\n[INFO] [TESTS]    Passing:      0                                                                                \r\n[INFO] [TESTS]    Failing:      1                                                                                \r\n[INFO] [TESTS]    Pending:      0                                                                                \r\n[INFO] [TESTS]    Skipped:      0                                                                                \r\n[INFO] [TESTS]    Screenshots:  1                                                                                \r\n[INFO] [TESTS]    Video:        false                                                                            \r\n[INFO] [TESTS]    Duration:     7 seconds                                                                        \r\n[INFO] [TESTS]    Spec Ran:     query.cy.js                                                                      \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   (Screenshots)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   -  tests/e2e/screenshots/query.cy.js/Query -- Uses the correct SPARQL Endpoint -- b     (1280x720)\r\n[INFO] [TESTS]      efore all hook (failed).png                                                                    \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS] ================================================================================\r\n[INFO] [TESTS] \r\n[INFO] [TESTS]   (Run Finished)\r\n[INFO] [TESTS] \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]        Spec                                              Tests  Passing  Failing  Pending  Skipped  \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS]      datasets.cy.js                           00:23        9        -        3        -        6 \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS]      query.cy.js                              00:07        1        -        1        -        - \r\n[INFO] [TESTS]   \r\n[INFO] [TESTS]       2 of 2 failed (100%)                     00:31       10        -        4        -        6  \r\n[INFO] [TESTS] \r\n[INFO] [TESTS]  ERROR  Error: Command failed: /home/afs/Jena/jena-fuseki2/jena-fuseki-ui/node_modules/cypress/bin/cypress run --config baseUrl=http://XPS-afs-9310:8080 --headless\r\n[INFO] [TESTS] Error: Command failed: /home/afs/Jena/jena-fuseki2/jena-fuseki-ui/node_modules/cypress/bin/cypress run --config baseUrl=http://XPS-afs-9310:8080 --headless\r\n[INFO] [TESTS]     at makeError (/home/afs/Jena/jena-fuseki2/jena-fuseki-ui/node_modules/execa/index.js:174:9)\r\n[INFO] [TESTS]     at /home/afs/Jena/jena-fuseki2/jena-fuseki-ui/node_modules/execa/index.js:278:16\r\n[INFO] [TESTS]     at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\n[INFO] [TESTS] vue-cli-service test:e2e --headless exited with code 1\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253353083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253585675","html_url":"https://github.com/apache/jena/issues/1548#issuecomment-1253585675","issue_url":"https://api.github.com/repos/apache/jena/issues/1548","id":1253585675,"node_id":"IC_kwDOAHF7Ec5KuDML","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T11:41:15Z","updated_at":"2022-09-21T11:41:15Z","author_association":"CONTRIBUTOR","body":"I noticed that DatasetGraphBase uses a more succinct isEmpty() test using !contains() with Node.ANY arguments. I updated the implementation for the sake of code quality.\r\n(Can I make a new PR to an already closed issue?)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253585675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253613581","html_url":"https://github.com/apache/jena/issues/1548#issuecomment-1253613581","issue_url":"https://api.github.com/repos/apache/jena/issues/1548","id":1253613581,"node_id":"IC_kwDOAHF7Ec5KuKAN","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T12:07:16Z","updated_at":"2022-09-21T12:07:16Z","author_association":"MEMBER","body":"`contains` will create a triple (the match triple), use `contains(Triple.ANY)`.\r\n\r\n> (Can I make a new PR to an already closed issue?)\r\n\r\nEven if you can, it's messy. \r\nA PR on the current codebase avoid potential problems.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253613581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253667748","html_url":"https://github.com/apache/jena/pull/1550#issuecomment-1253667748","issue_url":"https://api.github.com/repos/apache/jena/issues/1550","id":1253667748,"node_id":"IC_kwDOAHF7Ec5KuXOk","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T12:52:25Z","updated_at":"2022-09-21T12:52:25Z","author_association":"CONTRIBUTOR","body":"Done - ah the beauty of short one-liners :)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1253667748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1254243098","html_url":"https://github.com/apache/jena/pull/1480#issuecomment-1254243098","issue_url":"https://api.github.com/repos/apache/jena/issues/1480","id":1254243098,"node_id":"IC_kwDOAHF7Ec5Kwjsa","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T21:24:07Z","updated_at":"2022-09-21T21:24:07Z","author_association":"MEMBER","body":"HI @afs \r\n\r\n> I pulled the PR branch - the head commit is [81a8b44](https://github.com/apache/jena/commit/81a8b446f44ec70d7463a94d012c3b3087d0cc50).\r\n> \r\n> Are you going to squash the WIP commits before merge?\r\n\r\nJust did that :+1: Left two commits since one of them is actually enabling the e2e tests to run in Maven (only unit tests were part of the Maven build before).\r\n\r\n> I get some test failures, building from the top or just the module. This may well be because the toolchain is not up to date (how/what can I check?) but they are timeouts so could that be the issue?\r\n\r\nCould be. Cypress is not a small executable, nor just a few JS files. Last I checked it brought several MB to run it, and is memory hungry too. @afs if you prefer I can remove it from the Maven build, and we can run it manually in our local workstations and on Jenkins or GH Actions.\r\n\r\n> Then, I pushed the PR branch to my Jena working copy and ran the github action for Linux:\r\n> \r\n> The UI step worked (the build failed for other reasons - it does sometimes) https://github.com/afs/jena/actions/runs/3095974510/jobs/5010983697\r\n\r\n:+1: It works for me locally too, but it could be because I have everything installed globally (Cypress/Yarn/etc) as I use it for other projects too, or because I used it manually to run the e2e tests so it may have downloaded something else.\r\n\r\n```bash\r\nkinow@ranma:~/Development/java/jena/jena$ mvn clean test install -Pdev\r\n# ...\r\n[INFO] Reactor Summary for Apache Jena 4.7.0-SNAPSHOT:\r\n[INFO] \r\n[INFO] Apache Jena ........................................ SUCCESS [ 12.422 s]\r\n[INFO] Apache Jena - Shadowed external libraries .......... SUCCESS [  3.357 s]\r\n[INFO] Apache Jena - IRI .................................. SUCCESS [  5.164 s]\r\n[INFO] Apache Jena - Base ................................. SUCCESS [  8.698 s]\r\n[INFO] Apache Jena - Core ................................. SUCCESS [01:07 min]\r\n[INFO] Apache Jena - ARQ .................................. SUCCESS [01:50 min]\r\n[INFO] Apache Jena - SHACL ................................ SUCCESS [ 11.209 s]\r\n[INFO] Apache Jena - ShEx ................................. SUCCESS [  9.122 s]\r\n[INFO] Apache Jena - RDF Connection ....................... SUCCESS [  4.266 s]\r\n[INFO] Apache Jena - DBOE Database Operation Environment .. SUCCESS [  0.080 s]\r\n[INFO] Apache Jena - DBOE Base ............................ SUCCESS [  3.119 s]\r\n[INFO] Apache Jena - DBOE Transactions .................... SUCCESS [  2.915 s]\r\n[INFO] Apache Jena - DBOE Indexes ......................... SUCCESS [  0.707 s]\r\n[INFO] Apache Jena - DBOE Index test suite ................ SUCCESS [  0.868 s]\r\n[INFO] Apache Jena - DBOE Transactional Datastructures .... SUCCESS [  7.366 s]\r\n[INFO] Apache Jena - DBOE Storage ......................... SUCCESS [  3.164 s]\r\n[INFO] Apache Jena - TDB1 (Native Triple Store) ........... SUCCESS [ 21.734 s]\r\n[INFO] Apache Jena - TDB2 (Native Triple Store) ........... SUCCESS [ 33.291 s]\r\n[INFO] Apache Jena - Libraries POM ........................ SUCCESS [  0.538 s]\r\n[INFO] Apache Jena - Command line tools ................... SUCCESS [ 10.126 s]\r\n[INFO] Apache Jena - SPARQL Text Search ................... SUCCESS [ 17.249 s]\r\n[INFO] Apache Jena - GeoSPARQL Engine ..................... SUCCESS [ 18.874 s]\r\n[INFO] Apache Jena - Fuseki - A SPARQL 1.1 Server ......... SUCCESS [  0.035 s]\r\n[INFO] Apache Jena - Fuseki Core Engine ................... SUCCESS [  4.532 s]\r\n[INFO] Apache Jena - Fuseki UI ............................ SUCCESS [03:48 min]\r\n[INFO] Apache Jena - Fuseki Data Access Control ........... SUCCESS [  4.916 s]\r\n[INFO] Apache Jena - Fuseki Server Main ................... SUCCESS [ 11.899 s]\r\n[INFO] Apache Jena - Fuseki Server Jar .................... SUCCESS [  4.137 s]\r\n[INFO] Apache Jena - Fuseki Webapp ........................ SUCCESS [ 12.688 s]\r\n[INFO] Apache Jena - Fuseki WAR File ...................... SUCCESS [  2.569 s]\r\n[INFO] Apache Jena - Fuseki Server Standalone Jar ......... SUCCESS [  4.718 s]\r\n[INFO] Apache Jena - Fuseki Docker Tools .................. SUCCESS [  0.332 s]\r\n[INFO] Apache Jena - Fuseki Binary Distribution ........... SUCCESS [  3.981 s]\r\n[INFO] Apache Jena - Integration Testing .................. SUCCESS [ 39.515 s]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  11:11 min\r\n[INFO] Finished at: 2022-09-22T09:17:56+12:00\r\n[INFO] ------------------------------------------------------------------------\r\n\r\n\r\nkinow@ranma:~/Development/java/jena/jena$ git log -n 2\r\ncommit e3719e7299d3f0212664f4ba6ac383b09e767443 (HEAD -> vue3, kinow/vue3)\r\nAuthor: Bruno P. Kinoshita <kinow@users.noreply.github.com>\r\nDate:   Tue Jul 26 14:19:16 2022 +1200\r\n\r\n    GH-1306: Upgrade Jena UI to Vue3\r\n\r\ncommit f8cce7cefbd7344f056798a7e795ee3c370569cc\r\nAuthor: Bruno P. Kinoshita <kinow@users.noreply.github.com>\r\nDate:   Mon Aug 15 09:08:54 2022 +1200\r\n\r\n    GH-1306: Enable e2e tests in CI\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1254243098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1256945647","html_url":"https://github.com/apache/jena/issues/1551#issuecomment-1256945647","issue_url":"https://api.github.com/repos/apache/jena/issues/1551","id":1256945647,"node_id":"IC_kwDOAHF7Ec5K63fv","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-24T11:22:32Z","updated_at":"2022-09-24T11:22:32Z","author_association":"MEMBER","body":"There's no input shown.\r\n\r\nWhat effect is the `.resolveURIs(false)` having? I can't reproduce needing it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1256945647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1256961252","html_url":"https://github.com/apache/jena/issues/1551#issuecomment-1256961252","issue_url":"https://api.github.com/repos/apache/jena/issues/1551","id":1256961252,"node_id":"IC_kwDOAHF7Ec5K67Tk","user":{"login":"bvosburgh-tq","id":87335518,"node_id":"MDQ6VXNlcjg3MzM1NTE4","avatar_url":"https://avatars.githubusercontent.com/u/87335518?v=4","gravatar_id":"","url":"https://api.github.com/users/bvosburgh-tq","html_url":"https://github.com/bvosburgh-tq","followers_url":"https://api.github.com/users/bvosburgh-tq/followers","following_url":"https://api.github.com/users/bvosburgh-tq/following{/other_user}","gists_url":"https://api.github.com/users/bvosburgh-tq/gists{/gist_id}","starred_url":"https://api.github.com/users/bvosburgh-tq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvosburgh-tq/subscriptions","organizations_url":"https://api.github.com/users/bvosburgh-tq/orgs","repos_url":"https://api.github.com/users/bvosburgh-tq/repos","events_url":"https://api.github.com/users/bvosburgh-tq/events{/privacy}","received_events_url":"https://api.github.com/users/bvosburgh-tq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-24T12:48:16Z","updated_at":"2022-09-24T12:48:30Z","author_association":"CONTRIBUTOR","body":"> There's no input shown.\r\n\r\nAhhh, sorry about that. An example URI would be `\"<http://example/invalid/iri/with_\\t_tab>\"`.\r\n\r\n> What effect is the `.resolveURIs(false)` having? I can't reproduce needing it.\r\n\r\nAgreed, I don't think  that is needed to reproduce the problem. It's just how I had the parser configured when I encountered the issue. In the PR, I have zeroed in on the real problem, which is in `TokenizerText`.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1256961252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1257213489","html_url":"https://github.com/apache/jena/issues/1498#issuecomment-1257213489","issue_url":"https://api.github.com/repos/apache/jena/issues/1498","id":1257213489,"node_id":"IC_kwDOAHF7Ec5K744x","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-25T15:00:05Z","updated_at":"2022-09-25T15:00:05Z","author_association":"CONTRIBUTOR","body":"> Don't make this personal.\r\n\r\nApologies, that was inappropriate.\r\n\r\n> Quite. Did you try the fix?\r\n\r\nThe PrefixMapping2 approach works with the PR. The change to Prologue by this PR should be valid anyway. If that class gets replaced with something more future proof I am of course fine with it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1257213489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259605036","html_url":"https://github.com/apache/jena/issues/1556#issuecomment-1259605036","issue_url":"https://api.github.com/repos/apache/jena/issues/1556","id":1259605036,"node_id":"IC_kwDOAHF7Ec5LFAws","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T14:38:08Z","updated_at":"2022-09-27T14:38:08Z","author_association":"MEMBER","body":"I'm not familiar with Gradle but it looks like you are maybe building a fat JAR with all your dependencies in it?\r\n\r\nIf this is the case then you are likely running into an issue that Jena initialisation is driven by `ServiceLoader` where each separate Jena library has a file in `META-INF/services` defining the system initialisers it uses.  Your repackaging is likely picking only one of files (because the `ServiceLoader` mechanism requires they have the same name in every library JAR file) thus resulting in partial initialisation.\r\n\r\nSee https://jena.apache.org/documentation/notes/jena-repack.html for notes on how to successfully repack Jena into a fat JAR","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259605036/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259650627","html_url":"https://github.com/apache/jena/issues/1556#issuecomment-1259650627","issue_url":"https://api.github.com/repos/apache/jena/issues/1556","id":1259650627,"node_id":"IC_kwDOAHF7Ec5LFL5D","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T15:10:21Z","updated_at":"2022-09-27T15:10:21Z","author_association":"MEMBER","body":"StackOverflow suggests some file manipulations to do this but now there seems to be gradle plugin to do this (haven't tried it):\r\n\r\nhttps://plugins.gradle.org/plugin/com.github.johnrengelman.shadow/7.0.0\r\n\r\nhttps://imperceptiblethoughts.com/shadow/configuration/merging/#merging-service-descriptor-files\r\n\r\n@sszuev If it works could you send a PR to update the documentation? Thanks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259650627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259662438","html_url":"https://github.com/apache/jena/pull/1273#issuecomment-1259662438","issue_url":"https://api.github.com/repos/apache/jena/issues/1273","id":1259662438,"node_id":"IC_kwDOAHF7Ec5LFOxm","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T15:19:09Z","updated_at":"2022-09-27T15:19:09Z","author_association":"MEMBER","body":"Hi @arne-bdt,\r\n\r\nWould it be a good idea to put in this PR in its current state as a replacement for the existing (and difficult to maintain) GraphMem? \r\n\r\nIt can be replaced again later. No application should be depending on implementation classes.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259662438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259798385","html_url":"https://github.com/apache/jena/issues/1556#issuecomment-1259798385","issue_url":"https://api.github.com/repos/apache/jena/issues/1556","id":1259798385,"node_id":"IC_kwDOAHF7Ec5LFv9x","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T17:03:39Z","updated_at":"2022-09-27T17:03:39Z","author_association":"CONTRIBUTOR","body":"> I'm not familiar with Gradle but it looks like you are maybe building a fat JAR with all your dependencies in it?\r\n> \r\n> If this is the case then you are likely running into an issue that Jena initialisation is driven by `ServiceLoader` where each separate Jena library has a file in `META-INF/services` defining the system initialisers it uses. Your repackaging is likely picking only one of files (because the `ServiceLoader` mechanism requires they have the same name in every library JAR file) thus resulting in partial initialisation.\r\n> \r\n> See https://jena.apache.org/documentation/notes/jena-repack.html for notes on how to successfully repack Jena into a fat JAR\r\n\r\nIndeed,\r\nwith the described configuration I have following zip-entries in my jar:\r\n```\r\n==========================================\r\nMETA-INF/services/org.apache.jena.sys.JenaSubsystemLifecycle\r\norg.apache.jena.riot.system.InitRIOT\r\norg.apache.jena.sparql.system.InitARQ\r\norg.apache.jena.rdfs.sys.InitRDFS\r\n\r\n==========================================\r\nMETA-INF/services/org.apache.jena.sys.JenaSubsystemLifecycle\r\norg.apache.jena.sys.InitJenaCore\r\n```\r\n\r\nthe `com.github.johnrengelman.shadow` plugin works fine, I have now single zip-entry with all 4 records inside.\r\n\r\nthe official doc (https://jena.apache.org/documentation/notes/jena-repack.html) seems to be good enough,\r\nbut probably a few more words can be added.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1259798385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1260765090","html_url":"https://github.com/apache/jena/pull/1558#issuecomment-1260765090","issue_url":"https://api.github.com/repos/apache/jena/issues/1558","id":1260765090,"node_id":"IC_kwDOAHF7Ec5LJb-i","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T11:26:17Z","updated_at":"2022-09-28T11:45:40Z","author_association":"MEMBER","body":"This is a feature of the SPARQL protocol. Doing it here means the protocol rules can be applied in one place. \r\n\r\nThe method is overridable and returns a new DatasetGraph. in the case of access control, that is clarity is import.\r\nMorphing the query is both dubious and breaks up the SPARQL protocol handling into implicit assumptions.\r\n\r\nThe reason the query engines so it is because they can be called from code. Clearing the query is a way to signal the work is done.\r\n\r\nThe correct way is to add a custom SPARQL_Processor (inherit from SPARQL_QueryDataset) if you want different behaviour.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1260765090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1260782687","html_url":"https://github.com/apache/jena/pull/1558#issuecomment-1260782687","issue_url":"https://api.github.com/repos/apache/jena/issues/1558","id":1260782687,"node_id":"IC_kwDOAHF7Ec5LJgRf","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T11:43:35Z","updated_at":"2022-09-28T11:44:22Z","author_association":"CONTRIBUTOR","body":"From a security perspective I see that it makes sense, but maybe there could be an explicit context symbol (in the dataset's context) that disables the DynamicDataset wrapping in the SPARQL_QueryDataset? This would be more portable and less heavy weight than the proposed solution.\r\n\r\nIs there any infrastructure to configure an alternative servlet via assemblers?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1260782687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1260790261","html_url":"https://github.com/apache/jena/issues/1557#issuecomment-1260790261","issue_url":"https://api.github.com/repos/apache/jena/issues/1557","id":1260790261,"node_id":"IC_kwDOAHF7Ec5LJiH1","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-28T11:50:54Z","updated_at":"2022-09-28T11:50:54Z","author_association":"MEMBER","body":"This is not a good idea. There is no guarantee the downstream query engine does support dynamic datasets. Just because the main implementations do is not a contract. For example, union graph handling is different.\r\n\r\nPutting all transformation in one place is better. That is what clearing the query is doing - signalling that here is no further work.\r\n\r\nThe correct way is to add a custom SPARQL_Processor (inherit from SPARQL_QueryDataset) if you want different behaviour.\r\n\r\nI don't see why you want to intercept the query - why send the wrong query in the first place?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1260790261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]