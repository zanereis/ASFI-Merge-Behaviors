[{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264520021","html_url":"https://github.com/apache/kafka/pull/2198#issuecomment-264520021","issue_url":"https://api.github.com/repos/apache/kafka/issues/2198","id":264520021,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUyMDAyMQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T18:03:08Z","updated_at":"2016-12-02T18:03:08Z","author_association":"CONTRIBUTOR","body":"LGTM and merged to trunk.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264520021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264524160","html_url":"https://github.com/apache/kafka/pull/1548#issuecomment-264524160","issue_url":"https://api.github.com/repos/apache/kafka/issues/1548","id":264524160,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUyNDE2MA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T18:20:54Z","updated_at":"2016-12-02T18:20:54Z","author_association":"CONTRIBUTOR","body":"@imandhan Haha, not sure what happened. Maybe there's an incidental merge somewhere in there.\r\n\r\nThere may be better recipes, but here's how I usually do it. Say I need to rebase my branch against trunk. First I do this (apache-github is the name of the the remote):\r\n```\r\ngit pull --rebase apache-github trunk\r\n```\r\nThere could be some conflicts. After you fix each conflicting file, use `git add` to mark it resolved. When everything is resolved, do `git rebase --continue` to finish the rebase. You may need to do this several times, depending on whether the individual commits have conflicts. \r\n\r\nAfter the rebase completes, run tests to make sure there are no surprises. When everything is clean, force push to your github branch. This will override the commit history so that it matches what you have locally.\r\n```\r\ngit push -f origin my-branch\r\n```\r\nIt can also help to squash your commits prior to rebasing. Then you just need one iteration of conflict resolution.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264524160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264527409","html_url":"https://github.com/apache/kafka/pull/2202#issuecomment-264527409","issue_url":"https://api.github.com/repos/apache/kafka/issues/2202","id":264527409,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUyNzQwOQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T18:33:34Z","updated_at":"2016-12-02T18:33:34Z","author_association":"MEMBER","body":"Thanks @hachikuji, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264527409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264530268","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-264530268","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":264530268,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUzMDI2OA==","user":{"login":"dpoldrugo","id":1514332,"node_id":"MDQ6VXNlcjE1MTQzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1514332?v=4","gravatar_id":"","url":"https://api.github.com/users/dpoldrugo","html_url":"https://github.com/dpoldrugo","followers_url":"https://api.github.com/users/dpoldrugo/followers","following_url":"https://api.github.com/users/dpoldrugo/following{/other_user}","gists_url":"https://api.github.com/users/dpoldrugo/gists{/gist_id}","starred_url":"https://api.github.com/users/dpoldrugo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpoldrugo/subscriptions","organizations_url":"https://api.github.com/users/dpoldrugo/orgs","repos_url":"https://api.github.com/users/dpoldrugo/repos","events_url":"https://api.github.com/users/dpoldrugo/events{/privacy}","received_events_url":"https://api.github.com/users/dpoldrugo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T18:44:54Z","updated_at":"2016-12-02T19:29:04Z","author_association":"CONTRIBUTOR","body":"@dguy @mjsax I see, but could be possible that this unit test that you propose - could not cover all the aspects of this change? That's why I prefer an IT (blackbox) test more than a unit test. And one thing more, about unit testing with all those \"hacks/mocks\" - unit test ends up tied-up to the implementation details of the app. On the other side, and IT test, where you put an input and expect the output - you don't have to worry about internals. And later refactoring is also easier.\r\n\r\nIn the IT test , I would like to do the following:\r\n- send 3 messages to a topic\r\n- setup the test in a way that:\r\n  - first message gets processed (end up in another topic)\r\n  - second fails\r\n  - recover the stream app and make sure that second and third message get processed in the right way\r\n- check state store consistency with the messages in the input topic\r\n\r\nShould I bother with this or is this scenario covered in some other IT tests?\r\n \r\n@guozhangwang Hi! You mean my proposal for the testing strategy? If yes, I would like that we all agree which is the best way to go. Can you give me an ETA for the release, or just tell me how much time I have to finish this PR?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264530268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264533854","html_url":"https://github.com/apache/kafka/pull/1548#issuecomment-264533854","issue_url":"https://api.github.com/repos/apache/kafka/issues/1548","id":264533854,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUzMzg1NA==","user":{"login":"imandhan","id":6530254,"node_id":"MDQ6VXNlcjY1MzAyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6530254?v=4","gravatar_id":"","url":"https://api.github.com/users/imandhan","html_url":"https://github.com/imandhan","followers_url":"https://api.github.com/users/imandhan/followers","following_url":"https://api.github.com/users/imandhan/following{/other_user}","gists_url":"https://api.github.com/users/imandhan/gists{/gist_id}","starred_url":"https://api.github.com/users/imandhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imandhan/subscriptions","organizations_url":"https://api.github.com/users/imandhan/orgs","repos_url":"https://api.github.com/users/imandhan/repos","events_url":"https://api.github.com/users/imandhan/events{/privacy}","received_events_url":"https://api.github.com/users/imandhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T18:59:30Z","updated_at":"2016-12-02T18:59:30Z","author_association":"CONTRIBUTOR","body":"üëç Thanks @hachikuji for the detailed walk through! I'll definitely refer it next time I'm in the same situation :) I'm not exactly sure what went wrong last night...I like the idea of squashing commits prior to rebasing - didn't know I can do that. It was annoying to keep modifying the same files for the many commits I had in this PR and squashing can take that down to one manual rebase if I understand it right.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264533854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264534654","html_url":"https://github.com/apache/kafka/pull/2202#issuecomment-264534654","issue_url":"https://api.github.com/repos/apache/kafka/issues/2202","id":264534654,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUzNDY1NA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T19:02:42Z","updated_at":"2016-12-02T19:02:42Z","author_association":"CONTRIBUTOR","body":"Discussed offline with @hachikuji. LGTM. Merged to trunk and 0.10.1.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264534654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264537930","html_url":"https://github.com/apache/kafka/pull/1788#issuecomment-264537930","issue_url":"https://api.github.com/repos/apache/kafka/issues/1788","id":264537930,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDUzNzkzMA==","user":{"login":"kkonstantine","id":16238634,"node_id":"MDQ6VXNlcjE2MjM4NjM0","avatar_url":"https://avatars.githubusercontent.com/u/16238634?v=4","gravatar_id":"","url":"https://api.github.com/users/kkonstantine","html_url":"https://github.com/kkonstantine","followers_url":"https://api.github.com/users/kkonstantine/followers","following_url":"https://api.github.com/users/kkonstantine/following{/other_user}","gists_url":"https://api.github.com/users/kkonstantine/gists{/gist_id}","starred_url":"https://api.github.com/users/kkonstantine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkonstantine/subscriptions","organizations_url":"https://api.github.com/users/kkonstantine/orgs","repos_url":"https://api.github.com/users/kkonstantine/repos","events_url":"https://api.github.com/users/kkonstantine/events{/privacy}","received_events_url":"https://api.github.com/users/kkonstantine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T19:16:43Z","updated_at":"2016-12-02T19:16:43Z","author_association":"CONTRIBUTOR","body":"Thank you @hachikuji, I appreciated all the great reviews from all of you. ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264537930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264540496","html_url":"https://github.com/apache/kafka/pull/2204#issuecomment-264540496","issue_url":"https://api.github.com/repos/apache/kafka/issues/2204","id":264540496,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU0MDQ5Ng==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T19:27:14Z","updated_at":"2016-12-02T19:27:14Z","author_association":"CONTRIBUTOR","body":"LGTM, except the comment from @ijuma on unit tests and `zipWithIndex`.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264540496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264544783","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264544783","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264544783,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU0NDc4Mw==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T19:45:02Z","updated_at":"2016-12-02T19:45:02Z","author_association":"CONTRIBUTOR","body":"@ijuma @junrao Comments addressed. Please take another look. Because the same delayed operation can be used by multiple keys, I moved the purge state into `Watchers`. Let me know if that seems reasonable. It's still a bit annoying to do this extra bookkeeping to satisfy a metric, but I don't know, maybe it's worth it.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264544783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264557809","html_url":"https://github.com/apache/kafka/pull/1796#issuecomment-264557809","issue_url":"https://api.github.com/repos/apache/kafka/issues/1796","id":264557809,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU1NzgwOQ==","user":{"login":"cotedm","id":10028669,"node_id":"MDQ6VXNlcjEwMDI4NjY5","avatar_url":"https://avatars.githubusercontent.com/u/10028669?v=4","gravatar_id":"","url":"https://api.github.com/users/cotedm","html_url":"https://github.com/cotedm","followers_url":"https://api.github.com/users/cotedm/followers","following_url":"https://api.github.com/users/cotedm/following{/other_user}","gists_url":"https://api.github.com/users/cotedm/gists{/gist_id}","starred_url":"https://api.github.com/users/cotedm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cotedm/subscriptions","organizations_url":"https://api.github.com/users/cotedm/orgs","repos_url":"https://api.github.com/users/cotedm/repos","events_url":"https://api.github.com/users/cotedm/events{/privacy}","received_events_url":"https://api.github.com/users/cotedm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T20:43:44Z","updated_at":"2016-12-02T20:43:44Z","author_association":"CONTRIBUTOR","body":"@ewencp latest commit should fix the test issues. @ijuma I was following the ``KafkaConfig`` class for consistency. There we validate with ``require`` as well. What do you think of a follow up JIRA to move everything off ``require`` on the server config side at once?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264557809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264572681","html_url":"https://github.com/apache/kafka/pull/1579#issuecomment-264572681","issue_url":"https://api.github.com/repos/apache/kafka/issues/1579","id":264572681,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU3MjY4MQ==","user":{"login":"stepio","id":5202414,"node_id":"MDQ6VXNlcjUyMDI0MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5202414?v=4","gravatar_id":"","url":"https://api.github.com/users/stepio","html_url":"https://github.com/stepio","followers_url":"https://api.github.com/users/stepio/followers","following_url":"https://api.github.com/users/stepio/following{/other_user}","gists_url":"https://api.github.com/users/stepio/gists{/gist_id}","starred_url":"https://api.github.com/users/stepio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stepio/subscriptions","organizations_url":"https://api.github.com/users/stepio/orgs","repos_url":"https://api.github.com/users/stepio/repos","events_url":"https://api.github.com/users/stepio/events{/privacy}","received_events_url":"https://api.github.com/users/stepio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-02T21:54:01Z","updated_at":"2016-12-02T21:54:01Z","author_association":"CONTRIBUTOR","body":"Any updates?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264572681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264596858","html_url":"https://github.com/apache/kafka/pull/1579#issuecomment-264596858","issue_url":"https://api.github.com/repos/apache/kafka/issues/1579","id":264596858,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU5Njg1OA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T00:14:38Z","updated_at":"2016-12-03T00:14:38Z","author_association":"CONTRIBUTOR","body":"Sorry for the late reply @stepio , I think the motivation behind this PR makes sense, but the proposed change modifies `MetricsReporter` interface, which will break anyone implementing this class (i.e. not source compatible).\r\n\r\nI'm wondering for making the mocking easier, and I'm assuming by mocking you want to add some bookkeeping logic for the function called, etc, would it be simpler to just make `KafkaMetric` not final? cc @ijuma @junrao .","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264596858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264597504","html_url":"https://github.com/apache/kafka/pull/2007#issuecomment-264597504","issue_url":"https://api.github.com/repos/apache/kafka/issues/2007","id":264597504,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDU5NzUwNA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T00:19:35Z","updated_at":"2016-12-03T00:19:35Z","author_association":"CONTRIBUTOR","body":"@bbejeck @mjsax Sorry I'm late on reviewing this PR, backlog swamps in the past few days. Will try to get back to it early next week.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264597504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264606100","html_url":"https://github.com/apache/kafka/pull/2207#issuecomment-264606100","issue_url":"https://api.github.com/repos/apache/kafka/issues/2207","id":264606100,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYwNjEwMA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T01:42:38Z","updated_at":"2016-12-03T01:42:38Z","author_association":"MEMBER","body":"Working on adding a test.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264606100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607105","html_url":"https://github.com/apache/kafka/pull/2207#issuecomment-264607105","issue_url":"https://api.github.com/repos/apache/kafka/issues/2207","id":264607105,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYwNzEwNQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T01:54:52Z","updated_at":"2016-12-03T01:54:52Z","author_association":"MEMBER","body":"The reason the tests didn't catch it is that the logging level is ERROR. I think we should merge this change and then decide how to improve this.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607217","html_url":"https://github.com/apache/kafka/pull/2207#issuecomment-264607217","issue_url":"https://api.github.com/repos/apache/kafka/issues/2207","id":264607217,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYwNzIxNw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T01:56:25Z","updated_at":"2016-12-03T01:56:25Z","author_association":"MEMBER","body":"@junrao @hachikuji @ewencp @guozhangwang Any of you can review this? Without this fix, the broker is basically broken if logging level is INFO or finer.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607952","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264607952","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264607952,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYwNzk1Mg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T02:04:14Z","updated_at":"2016-12-03T02:04:14Z","author_association":"MEMBER","body":"@hachikuji, your latest changes LGTM. How about you @junrao?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607981","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264607981","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264607981,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYwNzk4MQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T02:04:34Z","updated_at":"2016-12-03T02:04:34Z","author_association":"MEMBER","body":"Also, cc @guozhangwang @becketqin ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264607981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264610292","html_url":"https://github.com/apache/kafka/pull/2207#issuecomment-264610292","issue_url":"https://api.github.com/repos/apache/kafka/issues/2207","id":264610292,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYxMDI5Mg==","user":{"login":"vahidhashemian","id":13593506,"node_id":"MDQ6VXNlcjEzNTkzNTA2","avatar_url":"https://avatars.githubusercontent.com/u/13593506?v=4","gravatar_id":"","url":"https://api.github.com/users/vahidhashemian","html_url":"https://github.com/vahidhashemian","followers_url":"https://api.github.com/users/vahidhashemian/followers","following_url":"https://api.github.com/users/vahidhashemian/following{/other_user}","gists_url":"https://api.github.com/users/vahidhashemian/gists{/gist_id}","starred_url":"https://api.github.com/users/vahidhashemian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vahidhashemian/subscriptions","organizations_url":"https://api.github.com/users/vahidhashemian/orgs","repos_url":"https://api.github.com/users/vahidhashemian/repos","events_url":"https://api.github.com/users/vahidhashemian/events{/privacy}","received_events_url":"https://api.github.com/users/vahidhashemian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T02:38:45Z","updated_at":"2016-12-03T02:38:45Z","author_association":"CONTRIBUTOR","body":"@ijuma Thanks for the quick fix. I no longer see the issue with this fix.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264610292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264612913","html_url":"https://github.com/apache/kafka/pull/2159#issuecomment-264612913","issue_url":"https://api.github.com/repos/apache/kafka/issues/2159","id":264612913,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYxMjkxMw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T03:24:59Z","updated_at":"2016-12-03T03:24:59Z","author_association":"CONTRIBUTOR","body":"The reason that we intentionally did not enable TTL in RocksDB, as @dguy mentioned, is that it is tricky to synchronize the expiration inside RocksDB along with the corresponding changelog truncation.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264612913/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264615009","html_url":"https://github.com/apache/kafka/pull/2207#issuecomment-264615009","issue_url":"https://api.github.com/repos/apache/kafka/issues/2207","id":264615009,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYxNTAwOQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T04:08:41Z","updated_at":"2016-12-03T04:08:41Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264615009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264626034","html_url":"https://github.com/apache/kafka/pull/2199#issuecomment-264626034","issue_url":"https://api.github.com/repos/apache/kafka/issues/2199","id":264626034,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYyNjAzNA==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T08:34:46Z","updated_at":"2016-12-03T08:34:46Z","author_association":"CONTRIBUTOR","body":"This is now solved differently. Closing this PR.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264626034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264627492","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-264627492","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":264627492,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYyNzQ5Mg==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T09:10:10Z","updated_at":"2016-12-03T09:10:10Z","author_association":"CONTRIBUTOR","body":"@dpoldrugo i'm confident all cases could be covered by unit tests.  Generally if it can be covered by unit tests then that would be the preferred method. They run much quicker, are more reliable, and are much easier to debug. It would be nice if we didn't have to worry about the internals, but the code is what it is.\r\nAnyway, if you feel don't feel comfortable writing unit tests to cover this, then you can do it with integration tests. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264627492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264628130","html_url":"https://github.com/apache/kafka/pull/2209#issuecomment-264628130","issue_url":"https://api.github.com/repos/apache/kafka/issues/2209","id":264628130,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYyODEzMA==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T09:24:43Z","updated_at":"2016-12-03T09:24:43Z","author_association":"MEMBER","body":"@guozhangwang @enothereska @dguy @miguno ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264628130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264628421","html_url":"https://github.com/apache/kafka/pull/2199#issuecomment-264628421","issue_url":"https://api.github.com/repos/apache/kafka/issues/2199","id":264628421,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYyODQyMQ==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T09:30:27Z","updated_at":"2016-12-03T09:30:27Z","author_association":"MEMBER","body":"@ijuma Intellij does not respect JUnit annotation correctly in loop-testing-mode. For example `@ClassRule` should only be execute a single time, but in loop-mode it's executed every time.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264628421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264628610","html_url":"https://github.com/apache/kafka/pull/2209#issuecomment-264628610","issue_url":"https://api.github.com/repos/apache/kafka/issues/2209","id":264628610,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDYyODYxMA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T09:34:21Z","updated_at":"2016-12-03T09:34:21Z","author_association":"MEMBER","body":"Thanks for the PR @mjsax, can you please merge trunk into your branch? It seems like your branch doesn't include https://github.com/apache/kafka/commit/128d0ff91d84a3a1f5a5237133f9ec01caf18d66 for example.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264628610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264649371","html_url":"https://github.com/apache/kafka/pull/2191#issuecomment-264649371","issue_url":"https://api.github.com/repos/apache/kafka/issues/2191","id":264649371,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY0OTM3MQ==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T16:28:53Z","updated_at":"2016-12-03T16:33:50Z","author_association":"CONTRIBUTOR","body":"@xiguantiaozhan Do we also want to add this check to other listeners on the controller, too? Theoretically it is possible that the other listeners also have enqueued events in the zkClient event queue after the controller resignation. Maybe we should add this check logic to `PartitionModificationsListener`, `BrokerChangeListener`, `DeleteTopicListener`, `TopicChangeListener` as well?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264649371/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264666755","html_url":"https://github.com/apache/kafka/pull/1579#issuecomment-264666755","issue_url":"https://api.github.com/repos/apache/kafka/issues/1579","id":264666755,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY2Njc1NQ==","user":{"login":"stepio","id":5202414,"node_id":"MDQ6VXNlcjUyMDI0MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/5202414?v=4","gravatar_id":"","url":"https://api.github.com/users/stepio","html_url":"https://github.com/stepio","followers_url":"https://api.github.com/users/stepio/followers","following_url":"https://api.github.com/users/stepio/following{/other_user}","gists_url":"https://api.github.com/users/stepio/gists{/gist_id}","starred_url":"https://api.github.com/users/stepio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stepio/subscriptions","organizations_url":"https://api.github.com/users/stepio/orgs","repos_url":"https://api.github.com/users/stepio/repos","events_url":"https://api.github.com/users/stepio/events{/privacy}","received_events_url":"https://api.github.com/users/stepio/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T21:29:46Z","updated_at":"2016-12-03T21:31:36Z","author_association":"CONTRIBUTOR","body":"Hi @guozhangwang , it's Ok. Better late than never, so thank you anyway.\r\n\r\nYour solution is simpler and safer, still allowing easy testing without powermock \"hacks\". I don't think that there are many implementations of `MetricsReporter` interface (did not find any by searching on github), but still removing \"final\" is safer. My approach just improves a bit the architecture - for example, similar generics are already used in `Consumer` and `Producer` interfaces.\r\n\r\nSo you're the maintainers and decision is yours.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264666755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264671362","html_url":"https://github.com/apache/kafka/pull/2200#issuecomment-264671362","issue_url":"https://api.github.com/repos/apache/kafka/issues/2200","id":264671362,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY3MTM2Mg==","user":{"login":"kichristensen","id":2461567,"node_id":"MDQ6VXNlcjI0NjE1Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2461567?v=4","gravatar_id":"","url":"https://api.github.com/users/kichristensen","html_url":"https://github.com/kichristensen","followers_url":"https://api.github.com/users/kichristensen/followers","following_url":"https://api.github.com/users/kichristensen/following{/other_user}","gists_url":"https://api.github.com/users/kichristensen/gists{/gist_id}","starred_url":"https://api.github.com/users/kichristensen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kichristensen/subscriptions","organizations_url":"https://api.github.com/users/kichristensen/orgs","repos_url":"https://api.github.com/users/kichristensen/repos","events_url":"https://api.github.com/users/kichristensen/events{/privacy}","received_events_url":"https://api.github.com/users/kichristensen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-03T22:58:23Z","updated_at":"2016-12-03T22:58:23Z","author_association":"CONTRIBUTOR","body":"@ijuma I'm having some difficulty creating the test. The problem I'm facing is that it's the GroupCoordinator that has the bug, but the information is only used in GroupMetadataManager, meaning I would have to create a test basically testing the GroupMetadataManger instead for the GroupCoordinator.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264671362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264688617","html_url":"https://github.com/apache/kafka/pull/2191#issuecomment-264688617","issue_url":"https://api.github.com/repos/apache/kafka/issues/2191","id":264688617,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY4ODYxNw==","user":{"login":"xiguantiaozhan","id":11188598,"node_id":"MDQ6VXNlcjExMTg4NTk4","avatar_url":"https://avatars.githubusercontent.com/u/11188598?v=4","gravatar_id":"","url":"https://api.github.com/users/xiguantiaozhan","html_url":"https://github.com/xiguantiaozhan","followers_url":"https://api.github.com/users/xiguantiaozhan/followers","following_url":"https://api.github.com/users/xiguantiaozhan/following{/other_user}","gists_url":"https://api.github.com/users/xiguantiaozhan/gists{/gist_id}","starred_url":"https://api.github.com/users/xiguantiaozhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiguantiaozhan/subscriptions","organizations_url":"https://api.github.com/users/xiguantiaozhan/orgs","repos_url":"https://api.github.com/users/xiguantiaozhan/repos","events_url":"https://api.github.com/users/xiguantiaozhan/events{/privacy}","received_events_url":"https://api.github.com/users/xiguantiaozhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T07:13:19Z","updated_at":"2016-12-04T07:13:19Z","author_association":"CONTRIBUTOR","body":"@becketqin yes, though in BrokerChangeListener,  TopicChangeListener contains hasStarted.get to check if controller is shutdown, but I think we should add a controller.isActive() before to avoid it for consistency","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264688617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264696871","html_url":"https://github.com/apache/kafka/pull/2193#issuecomment-264696871","issue_url":"https://api.github.com/repos/apache/kafka/issues/2193","id":264696871,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY5Njg3MQ==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T10:54:28Z","updated_at":"2016-12-04T10:54:28Z","author_association":"CONTRIBUTOR","body":"@hachikuji @ijuma I'll let you guys decide on this. Let me know what you want to do. If not needed, I can close the PR. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264696871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264698496","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264698496","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264698496,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY5ODQ5Ng==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T11:32:23Z","updated_at":"2016-12-04T11:32:23Z","author_association":"MEMBER","body":"@hachikuji, I think you may be right. Since we iterate over the queue routinely during normal usage, it seems OK to do it for the metric too. I suggest we rename `watched` to `countWatched` and document that it's O(n).","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264698496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264698782","html_url":"https://github.com/apache/kafka/pull/2191#issuecomment-264698782","issue_url":"https://api.github.com/repos/apache/kafka/issues/2191","id":264698782,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDY5ODc4Mg==","user":{"login":"xiguantiaozhan","id":11188598,"node_id":"MDQ6VXNlcjExMTg4NTk4","avatar_url":"https://avatars.githubusercontent.com/u/11188598?v=4","gravatar_id":"","url":"https://api.github.com/users/xiguantiaozhan","html_url":"https://github.com/xiguantiaozhan","followers_url":"https://api.github.com/users/xiguantiaozhan/followers","following_url":"https://api.github.com/users/xiguantiaozhan/following{/other_user}","gists_url":"https://api.github.com/users/xiguantiaozhan/gists{/gist_id}","starred_url":"https://api.github.com/users/xiguantiaozhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiguantiaozhan/subscriptions","organizations_url":"https://api.github.com/users/xiguantiaozhan/orgs","repos_url":"https://api.github.com/users/xiguantiaozhan/repos","events_url":"https://api.github.com/users/xiguantiaozhan/events{/privacy}","received_events_url":"https://api.github.com/users/xiguantiaozhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T11:38:49Z","updated_at":"2016-12-04T11:38:49Z","author_association":"CONTRIBUTOR","body":"@ijuma @becketqin could you find time for reviewing the new pull request againÔºåthe description above shows that their may be some conflictsÔºåbut I can not find where it is.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264698782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264709141","html_url":"https://github.com/apache/kafka/pull/2204#issuecomment-264709141","issue_url":"https://api.github.com/repos/apache/kafka/issues/2204","id":264709141,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDcwOTE0MQ==","user":{"login":"ataraxer","id":1394955,"node_id":"MDQ6VXNlcjEzOTQ5NTU=","avatar_url":"https://avatars.githubusercontent.com/u/1394955?v=4","gravatar_id":"","url":"https://api.github.com/users/ataraxer","html_url":"https://github.com/ataraxer","followers_url":"https://api.github.com/users/ataraxer/followers","following_url":"https://api.github.com/users/ataraxer/following{/other_user}","gists_url":"https://api.github.com/users/ataraxer/gists{/gist_id}","starred_url":"https://api.github.com/users/ataraxer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ataraxer/subscriptions","organizations_url":"https://api.github.com/users/ataraxer/orgs","repos_url":"https://api.github.com/users/ataraxer/repos","events_url":"https://api.github.com/users/ataraxer/events{/privacy}","received_events_url":"https://api.github.com/users/ataraxer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T15:08:26Z","updated_at":"2016-12-04T15:08:26Z","author_association":"CONTRIBUTOR","body":"Rebased, reverted usage of `zipWithIndex` to `indices` and added a test case.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264709141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264723102","html_url":"https://github.com/apache/kafka/pull/2204#issuecomment-264723102","issue_url":"https://api.github.com/repos/apache/kafka/issues/2204","id":264723102,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDcyMzEwMg==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T19:00:44Z","updated_at":"2016-12-04T19:00:44Z","author_association":"CONTRIBUTOR","body":"Merged to trunk and cherry-picked to 0.10.1.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264723102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264724481","html_url":"https://github.com/apache/kafka/pull/2204#issuecomment-264724481","issue_url":"https://api.github.com/repos/apache/kafka/issues/2204","id":264724481,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDcyNDQ4MQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T19:22:22Z","updated_at":"2016-12-04T19:22:22Z","author_association":"MEMBER","body":"Thanks for your contribution @ataraxer!\r\n\r\nA note for the future (since this was already merged): the PR description becomes the commit message so it's good to update it if more information comes to light after the PR is posted. For example, if someone reads the commit message for this fix, it sounds like we merged something without understanding the underlying problem (which is not the case). Committers can also fix such things by using `git commit --amend`  before pushing.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264724481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264736815","html_url":"https://github.com/apache/kafka/pull/2210#issuecomment-264736815","issue_url":"https://api.github.com/repos/apache/kafka/issues/2210","id":264736815,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDczNjgxNQ==","user":{"login":"michaelschiff","id":1669670,"node_id":"MDQ6VXNlcjE2Njk2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/1669670?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelschiff","html_url":"https://github.com/michaelschiff","followers_url":"https://api.github.com/users/michaelschiff/followers","following_url":"https://api.github.com/users/michaelschiff/following{/other_user}","gists_url":"https://api.github.com/users/michaelschiff/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelschiff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelschiff/subscriptions","organizations_url":"https://api.github.com/users/michaelschiff/orgs","repos_url":"https://api.github.com/users/michaelschiff/repos","events_url":"https://api.github.com/users/michaelschiff/events{/privacy}","received_events_url":"https://api.github.com/users/michaelschiff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T22:29:34Z","updated_at":"2016-12-04T22:29:34Z","author_association":"CONTRIBUTOR","body":"so far this just adds a unit test that fails due to the bug - real fix coming next.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264736815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264742170","html_url":"https://github.com/apache/kafka/pull/2209#issuecomment-264742170","issue_url":"https://api.github.com/repos/apache/kafka/issues/2209","id":264742170,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDc0MjE3MA==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-04T23:56:45Z","updated_at":"2016-12-04T23:56:45Z","author_association":"MEMBER","body":"@ijuma Done.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264742170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264744053","html_url":"https://github.com/apache/kafka/pull/2072#issuecomment-264744053","issue_url":"https://api.github.com/repos/apache/kafka/issues/2072","id":264744053,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDc0NDA1Mw==","user":{"login":"huxihx","id":11549429,"node_id":"MDQ6VXNlcjExNTQ5NDI5","avatar_url":"https://avatars.githubusercontent.com/u/11549429?v=4","gravatar_id":"","url":"https://api.github.com/users/huxihx","html_url":"https://github.com/huxihx","followers_url":"https://api.github.com/users/huxihx/followers","following_url":"https://api.github.com/users/huxihx/following{/other_user}","gists_url":"https://api.github.com/users/huxihx/gists{/gist_id}","starred_url":"https://api.github.com/users/huxihx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huxihx/subscriptions","organizations_url":"https://api.github.com/users/huxihx/orgs","repos_url":"https://api.github.com/users/huxihx/repos","events_url":"https://api.github.com/users/huxihx/events{/privacy}","received_events_url":"https://api.github.com/users/huxihx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T00:25:58Z","updated_at":"2016-12-05T00:25:58Z","author_association":"CONTRIBUTOR","body":"@ijuma Sorry, but do you mean the unit test? ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264744053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264764730","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-264764730","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":264764730,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDc2NDczMA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T04:17:06Z","updated_at":"2016-12-05T04:17:06Z","author_association":"CONTRIBUTOR","body":"About the fix itself: my understanding is that the root cause is in `suspendTasksAndState(..)` where `rethrowException` is always set to true, whereas in `shutdownTasksAndState`, `rethrowException` is always set to false. And when `rethrowException` is always set to true, if `commitOffsets` failed then the rest of the operations are not set. So I'm wondering if a simpler fix would be just removing the `rethrowException` boolean in these two functions and always NOT rethrow exception but only log it.\r\n\r\nAbout unit test: I tend to second @dguy 's proposal to do it in unit test with existing mock objects as we did in `StreamThreadTest`. The basic two cases are that we want to let the `commitOffset` throw an exception (it could be any KafkaException, not necessarily CommitFailedException) in 1) `suspendTasksAndState` and 2) `shutdownTasksAndState` functions. We do not need to check the normal `commit` call as it is already covered in other tests. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264764730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264764791","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-264764791","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":264764791,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDc2NDc5MQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T04:17:55Z","updated_at":"2016-12-05T04:17:55Z","author_association":"CONTRIBUTOR","body":"@dpoldrugo I am trying to make a cut a release after all the \"must-haves\" are merged in:\r\n\r\nhttps://issues.apache.org/jira/issues/?jql=project%20%3D%20KAFKA%20AND%20resolution%20%3D%20Unresolved%20AND%20fixVersion%20%3D%200.10.1.1%20ORDER%20BY%20priority%20DESC%2C%20key%20DESC","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264764791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264766349","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264766349","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264766349,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDc2NjM0OQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T04:36:27Z","updated_at":"2016-12-05T04:36:27Z","author_association":"CONTRIBUTOR","body":"The patch itself LGTM. About the watched counter, I'm still a bit inclined towards constant not-so-accurate counter for concurrent access. as long as it is eventually correct if you keep polling it. Is it really worth-while to have O(n) time for accurately polling this metric?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264766349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264770009","html_url":"https://github.com/apache/kafka/pull/2140#issuecomment-264770009","issue_url":"https://api.github.com/repos/apache/kafka/issues/2140","id":264770009,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDc3MDAwOQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T05:17:02Z","updated_at":"2016-12-05T05:21:21Z","author_association":"CONTRIBUTOR","body":"About the naming of `Records` to `LogBuffer`, I share the same concern with @becketqin and @ijuma . My proposal would be to rename `LogEntry` to `RecordEntry` or simply `RecordAndOffset` (seems more Scala-ish), and to me it is OK to have `Records.iterator()` return `Iterator<RecordEntry>`. As for `ConsumerRecord` and `ProducerRecord`, it would be best if them both contain a `Record` field, and then `ConsumerRecord` to contain a separate `offset` field, but since it is public APIs we have to leave it as is, which is not too bad to me.\r\n\r\nAlso, I'd like to suggest we separate the renaming out of this PR for the ease of reviewing, if it is still possible to revert it back.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264770009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264807842","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-264807842","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":264807842,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDgwNzg0Mg==","user":{"login":"dpoldrugo","id":1514332,"node_id":"MDQ6VXNlcjE1MTQzMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1514332?v=4","gravatar_id":"","url":"https://api.github.com/users/dpoldrugo","html_url":"https://github.com/dpoldrugo","followers_url":"https://api.github.com/users/dpoldrugo/followers","following_url":"https://api.github.com/users/dpoldrugo/following{/other_user}","gists_url":"https://api.github.com/users/dpoldrugo/gists{/gist_id}","starred_url":"https://api.github.com/users/dpoldrugo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpoldrugo/subscriptions","organizations_url":"https://api.github.com/users/dpoldrugo/orgs","repos_url":"https://api.github.com/users/dpoldrugo/repos","events_url":"https://api.github.com/users/dpoldrugo/events{/privacy}","received_events_url":"https://api.github.com/users/dpoldrugo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T09:39:57Z","updated_at":"2016-12-05T09:39:57Z","author_association":"CONTRIBUTOR","body":"@dguy @guozhangwang ok, I'll write an unit test based on `StreamThreadTest`.\r\n\r\n@guozhangwang if we set `rethrowException` to `false` or remove it, won't users be affected by this?\r\nThen no exceptions will end-up in the user set `UncaughtExceptionHandler`, or am I wrong? And that's ok with me, as long as Kafka Streams internally knows how to recover from those exceptions. Will this be the case if we catch all `KafkaException` and don't rethrow them?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264807842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264814845","html_url":"https://github.com/apache/kafka/pull/2208#issuecomment-264814845","issue_url":"https://api.github.com/repos/apache/kafka/issues/2208","id":264814845,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDgxNDg0NQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T10:10:50Z","updated_at":"2016-12-05T10:10:50Z","author_association":"MEMBER","body":"cc @junrao ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264814845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264815306","html_url":"https://github.com/apache/kafka/pull/2200#issuecomment-264815306","issue_url":"https://api.github.com/repos/apache/kafka/issues/2200","id":264815306,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDgxNTMwNg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T10:12:59Z","updated_at":"2016-12-05T10:12:59Z","author_association":"MEMBER","body":"@kichristensen, I was thinking of something simpler. After calling `GroupCoordinator.apply`, check the value in `GroupCoordinator.offsetConfig`.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264815306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264816440","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264816440","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264816440,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDgxNjQ0MA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T10:18:18Z","updated_at":"2016-12-05T10:18:18Z","author_association":"MEMBER","body":"@guozhangwang We are doing an additional iteration (which is O(n)) in `tryCompleteWatched` if any operation is removed from the queue (completed by this or another thread) in order to maintain the `watched` field. So, it's only worth it if `watched` is called more frequently by a monitoring system (it's a `Gauge`) than `tryCompleteWatched` where an operation is removed from the queue. Is that likely to be the case?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264816440/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264816620","html_url":"https://github.com/apache/kafka/pull/2210#issuecomment-264816620","issue_url":"https://api.github.com/repos/apache/kafka/issues/2210","id":264816620,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDgxNjYyMA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T10:19:08Z","updated_at":"2016-12-05T10:19:08Z","author_association":"MEMBER","body":"cc @becketqin @junrao ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264816620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264817425","html_url":"https://github.com/apache/kafka/pull/2210#issuecomment-264817425","issue_url":"https://api.github.com/repos/apache/kafka/issues/2210","id":264817425,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDgxNzQyNQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T10:22:41Z","updated_at":"2016-12-05T10:22:41Z","author_association":"MEMBER","body":"Thanks for the PR, can you please update the PR title to be a bit more informative? For example, `KAFKA-4451: Fix OffsetIndex overflow when replicating highly compacted topic`. The PR description can then be edited to be blank as it doesn't add any useful information (this matters because the PR title becomes the commit title and the PR description becomes the rest of the commit message in the squashed commit that is merged).","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264817425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264857870","html_url":"https://github.com/apache/kafka/pull/2164#issuecomment-264857870","issue_url":"https://api.github.com/repos/apache/kafka/issues/2164","id":264857870,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDg1Nzg3MA==","user":{"login":"pjfanning","id":11783444,"node_id":"MDQ6VXNlcjExNzgzNDQ0","avatar_url":"https://avatars.githubusercontent.com/u/11783444?v=4","gravatar_id":"","url":"https://api.github.com/users/pjfanning","html_url":"https://github.com/pjfanning","followers_url":"https://api.github.com/users/pjfanning/followers","following_url":"https://api.github.com/users/pjfanning/following{/other_user}","gists_url":"https://api.github.com/users/pjfanning/gists{/gist_id}","starred_url":"https://api.github.com/users/pjfanning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjfanning/subscriptions","organizations_url":"https://api.github.com/users/pjfanning/orgs","repos_url":"https://api.github.com/users/pjfanning/repos","events_url":"https://api.github.com/users/pjfanning/events{/privacy}","received_events_url":"https://api.github.com/users/pjfanning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T13:47:24Z","updated_at":"2016-12-05T14:23:46Z","author_association":"NONE","body":"Is there an ETA for a 0.10.1.x release that includes scala 2.12 compatible jars?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264857870/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264900183","html_url":"https://github.com/apache/kafka/pull/2191#issuecomment-264900183","issue_url":"https://api.github.com/repos/apache/kafka/issues/2191","id":264900183,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkwMDE4Mw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T16:25:04Z","updated_at":"2016-12-05T16:25:04Z","author_association":"MEMBER","body":"Also, can you please the merge conflicts with trunk?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264900183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264911321","html_url":"https://github.com/apache/kafka/pull/2209#issuecomment-264911321","issue_url":"https://api.github.com/repos/apache/kafka/issues/2209","id":264911321,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxMTMyMQ==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:01:46Z","updated_at":"2016-12-05T17:01:46Z","author_association":"CONTRIBUTOR","body":"@mjsax - it is not immediately clear to me what this is fixing? Do you think you can add some unit tests to cover the change? They'll probably help with understanding the issue, too.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264911321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264912720","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-264912720","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":264912720,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxMjcyMA==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:06:54Z","updated_at":"2017-01-11T11:25:07Z","author_association":"CONTRIBUTOR","body":"![picture1](https://cloud.githubusercontent.com/assets/14234336/20894377/10456c6a-bb0d-11e6-81f9-bbae1debae8e.png)\r\n\r\nAdded two levels of logging metrics, as described in KAFKA-3811. Showing performance of PR when logging all metrics, vs just some higher level metrics in streams (see last two bars of each benchmark, the rest is details). Average of 3 runs for each test shown.\r\n\r\nAll data at: [sensors-perf.xlsx](https://github.com/apache/kafka/files/698656/sensors-perf.xlsx)\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264912720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264913402","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-264913402","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":264913402,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxMzQwMg==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:09:14Z","updated_at":"2016-12-06T10:07:52Z","author_association":"CONTRIBUTOR","body":"@ijuma @guozhangwang As part of this PR we are introducing different levels of logging for sensors, as initially described in KAFKA-3811 https://issues.apache.org/jira/browse/KAFKA-3811?focusedCommentId=15324669. Could you see if you are satisfied with the way these levels are introduced? In particular, @ijuma I'd focus on everything outside of streams, while @guozhangwang can focus on the streams part too. Thanks. cc @ewencp @gwenshap too if they have time for looking at the sensor changes. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264913402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264914421","html_url":"https://github.com/apache/kafka/pull/2209#issuecomment-264914421","issue_url":"https://api.github.com/repos/apache/kafka/issues/2209","id":264914421,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxNDQyMQ==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:13:01Z","updated_at":"2016-12-05T17:13:01Z","author_association":"MEMBER","body":"@ijuma There is another bug...\r\n@dguy Agreed. I had the same thought but wanted to trigger Jenkins build. That's why I opened the PR already.\r\n\r\nThis is actually tackling two different problems and I did discover a third one. From a bug tracking point of view it would make sense to have different PRs -- however, as all three issue make Reset tool test fails, it's not possible to get a clean build (and be sure there is not fourth one) if we split into multiple PRs... WDYT?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264914421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264915136","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-264915136","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":264915136,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxNTEzNg==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:15:36Z","updated_at":"2016-12-05T17:15:36Z","author_association":"CONTRIBUTOR","body":"@guozhangwang @mjsax @enothereska - i found this today while i was trying to run the smoke test. If we have a standby task that is updating a store that is based on an internal change log (i.e, logging is enabled), then it will throw an `UnsupportedOperationException` during `StateStore` initialization. This affects 0.10.1, too","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264915136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264915427","html_url":"https://github.com/apache/kafka/pull/2209#issuecomment-264915427","issue_url":"https://api.github.com/repos/apache/kafka/issues/2209","id":264915427,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxNTQyNw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:16:44Z","updated_at":"2016-12-05T17:16:44Z","author_association":"MEMBER","body":"@mjsax I think one PR is fine if there are unit tests for each of the issues uncovered.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264915427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264916151","html_url":"https://github.com/apache/kafka/pull/2211#issuecomment-264916151","issue_url":"https://api.github.com/repos/apache/kafka/issues/2211","id":264916151,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkxNjE1MQ==","user":{"login":"kkonstantine","id":16238634,"node_id":"MDQ6VXNlcjE2MjM4NjM0","avatar_url":"https://avatars.githubusercontent.com/u/16238634?v=4","gravatar_id":"","url":"https://api.github.com/users/kkonstantine","html_url":"https://github.com/kkonstantine","followers_url":"https://api.github.com/users/kkonstantine/followers","following_url":"https://api.github.com/users/kkonstantine/following{/other_user}","gists_url":"https://api.github.com/users/kkonstantine/gists{/gist_id}","starred_url":"https://api.github.com/users/kkonstantine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkonstantine/subscriptions","organizations_url":"https://api.github.com/users/kkonstantine/orgs","repos_url":"https://api.github.com/users/kkonstantine/repos","events_url":"https://api.github.com/users/kkonstantine/events{/privacy}","received_events_url":"https://api.github.com/users/kkonstantine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:19:28Z","updated_at":"2016-12-05T17:19:28Z","author_association":"CONTRIBUTOR","body":"Now that the code changed to collect the end offsets beforehand for all partitions, we need to first check whether there are any unread messages before we issue a blocking call to poll. ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264916151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264921972","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264921972","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264921972,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkyMTk3Mg==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:40:56Z","updated_at":"2016-12-05T17:40:56Z","author_association":"CONTRIBUTOR","body":"I went ahead and removed the separate variable tracking the size of the operations queue. It seems unlikely that the gauge is invoked as frequently as `tryCompleteWatched`.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264921972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264923518","html_url":"https://github.com/apache/kafka/pull/2140#issuecomment-264923518","issue_url":"https://api.github.com/repos/apache/kafka/issues/2140","id":264923518,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkyMzUxOA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T17:46:28Z","updated_at":"2016-12-05T17:46:28Z","author_association":"CONTRIBUTOR","body":"@guozhangwang `RecordEntry` would work for me. Keep in mind that if KIP-98 is approved, it will do more than just track the offset, so I'd rather not use something specific like `RecordAndOffset`. Since my `LogBuffer` suggestion is not too popular, I'll go ahead and revert that change. Then the hierarchy will be `Records` -> `RecordEntry` -> `Record`. Does that sound reasonable?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264923518/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264927773","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-264927773","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":264927773,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDkyNzc3Mw==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T18:01:45Z","updated_at":"2016-12-05T18:01:45Z","author_association":"CONTRIBUTOR","body":"(PR failures due to known Reset tests)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264927773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264942598","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264942598","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264942598,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk0MjU5OA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T18:56:43Z","updated_at":"2016-12-05T18:56:43Z","author_association":"CONTRIBUTOR","body":"@ijuma Updated. Haha, maybe we can finally wrap up this issue?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264942598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264945297","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264945297","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264945297,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk0NTI5Nw==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T19:06:47Z","updated_at":"2016-12-05T19:06:47Z","author_association":"MEMBER","body":"Thanks for your patience and perseverance @hachikuji, LGTM. :)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264945297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264948330","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264948330","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264948330,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk0ODMzMA==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T19:17:44Z","updated_at":"2016-12-05T19:17:44Z","author_association":"CONTRIBUTOR","body":"Merged to trunk. And cherry-picked to 0.10.1.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264948330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264950476","html_url":"https://github.com/apache/kafka/pull/2117#issuecomment-264950476","issue_url":"https://api.github.com/repos/apache/kafka/issues/2117","id":264950476,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk1MDQ3Ng==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T19:25:40Z","updated_at":"2016-12-05T19:25:40Z","author_association":"MEMBER","body":"KIP-93 was accepted.\r\n\r\nCall for final review @guozhangwang @enothereska @dguy @miguno ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264950476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264955274","html_url":"https://github.com/apache/kafka/pull/2195#issuecomment-264955274","issue_url":"https://api.github.com/repos/apache/kafka/issues/2195","id":264955274,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk1NTI3NA==","user":{"login":"junrao","id":132330,"node_id":"MDQ6VXNlcjEzMjMzMA==","avatar_url":"https://avatars.githubusercontent.com/u/132330?v=4","gravatar_id":"","url":"https://api.github.com/users/junrao","html_url":"https://github.com/junrao","followers_url":"https://api.github.com/users/junrao/followers","following_url":"https://api.github.com/users/junrao/following{/other_user}","gists_url":"https://api.github.com/users/junrao/gists{/gist_id}","starred_url":"https://api.github.com/users/junrao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junrao/subscriptions","organizations_url":"https://api.github.com/users/junrao/orgs","repos_url":"https://api.github.com/users/junrao/repos","events_url":"https://api.github.com/users/junrao/events{/privacy}","received_events_url":"https://api.github.com/users/junrao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T19:42:31Z","updated_at":"2016-12-05T19:42:31Z","author_association":"CONTRIBUTOR","body":"Thanks for the patch. LGTM. One thing worth noting is that the removal from the iterator in ConcurrentLinkedQueue just sets the item to null and only removes the link object lazily in future iterations. This means that ConcurrentLinkedQueue may hold more objects than size() reports.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264955274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264955370","html_url":"https://github.com/apache/kafka/pull/2191#issuecomment-264955370","issue_url":"https://api.github.com/repos/apache/kafka/issues/2191","id":264955370,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk1NTM3MA==","user":{"login":"becketqin","id":5778611,"node_id":"MDQ6VXNlcjU3Nzg2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5778611?v=4","gravatar_id":"","url":"https://api.github.com/users/becketqin","html_url":"https://github.com/becketqin","followers_url":"https://api.github.com/users/becketqin/followers","following_url":"https://api.github.com/users/becketqin/following{/other_user}","gists_url":"https://api.github.com/users/becketqin/gists{/gist_id}","starred_url":"https://api.github.com/users/becketqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/becketqin/subscriptions","organizations_url":"https://api.github.com/users/becketqin/orgs","repos_url":"https://api.github.com/users/becketqin/repos","events_url":"https://api.github.com/users/becketqin/events{/privacy}","received_events_url":"https://api.github.com/users/becketqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T19:42:51Z","updated_at":"2016-12-05T19:42:59Z","author_association":"CONTRIBUTOR","body":"@xiguantiaozhan You can do a `git pull --rebase [Kafka_Remote_Repo] trunk` and it should show you the conflicts.\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264955370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264964781","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-264964781","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":264964781,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk2NDc4MQ==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T20:17:54Z","updated_at":"2016-12-05T20:17:54Z","author_association":"CONTRIBUTOR","body":"@theduderog registering user-defined metrics will be in another JIRA. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264964781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264972879","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-264972879","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":264972879,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk3Mjg3OQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T20:49:45Z","updated_at":"2016-12-05T20:49:45Z","author_association":"CONTRIBUTOR","body":"LGTM, just two clarification comments.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264972879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264976603","html_url":"https://github.com/apache/kafka/pull/2188#issuecomment-264976603","issue_url":"https://api.github.com/repos/apache/kafka/issues/2188","id":264976603,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk3NjYwMw==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T21:04:06Z","updated_at":"2016-12-05T21:04:06Z","author_association":"CONTRIBUTOR","body":"@dpoldrugo Here is my reasoning about `rethrowException` and `UncaughtExceptionHandler`: in suspending tasks (cc @mjsax ):\r\n\r\n1. In both `shutdownTasksAndState` and `suspendTasksAndState`, if there is any exception thrown in any of the steps, we should still proceed to try to complete the rest of the steps by all means.\r\n\r\n2. As for whether or not we should let the user's `UncaughtExceptionHandler` be triggered, I think we should still do that in `suspendTasksAndState`, but only after all the steps are done. We could follow the example as in `KafkaProducer.close()` call, where we keep track of the `firstException` and then only throw it at the end. \r\n\r\nBTW we are currently working on exactly-once semantics of Streams, and under this project most of the internal exceptions should now be auto handled instead of throwing them all the way to users `UncaughtExceptionHandler`.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264976603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264980796","html_url":"https://github.com/apache/kafka/pull/2200#issuecomment-264980796","issue_url":"https://api.github.com/repos/apache/kafka/issues/2200","id":264980796,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk4MDc5Ng==","user":{"login":"kichristensen","id":2461567,"node_id":"MDQ6VXNlcjI0NjE1Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2461567?v=4","gravatar_id":"","url":"https://api.github.com/users/kichristensen","html_url":"https://github.com/kichristensen","followers_url":"https://api.github.com/users/kichristensen/followers","following_url":"https://api.github.com/users/kichristensen/following{/other_user}","gists_url":"https://api.github.com/users/kichristensen/gists{/gist_id}","starred_url":"https://api.github.com/users/kichristensen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kichristensen/subscriptions","organizations_url":"https://api.github.com/users/kichristensen/orgs","repos_url":"https://api.github.com/users/kichristensen/repos","events_url":"https://api.github.com/users/kichristensen/events{/privacy}","received_events_url":"https://api.github.com/users/kichristensen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T21:20:56Z","updated_at":"2016-12-05T21:20:56Z","author_association":"CONTRIBUTOR","body":"@ijuma Of course, thanks. I've updated the PR with a test","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264980796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264983825","html_url":"https://github.com/apache/kafka/pull/2140#issuecomment-264983825","issue_url":"https://api.github.com/repos/apache/kafka/issues/2140","id":264983825,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk4MzgyNQ==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T21:32:29Z","updated_at":"2016-12-05T21:32:29Z","author_association":"CONTRIBUTOR","body":"I've gone ahead and squashed commits. You can still find the old commit history here: https://github.com/hachikuji/kafka/tree/KAFKA-4390-UNSQUASHED.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264983825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264989717","html_url":"https://github.com/apache/kafka/pull/2211#issuecomment-264989717","issue_url":"https://api.github.com/repos/apache/kafka/issues/2211","id":264989717,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk4OTcxNw==","user":{"login":"kkonstantine","id":16238634,"node_id":"MDQ6VXNlcjE2MjM4NjM0","avatar_url":"https://avatars.githubusercontent.com/u/16238634?v=4","gravatar_id":"","url":"https://api.github.com/users/kkonstantine","html_url":"https://github.com/kkonstantine","followers_url":"https://api.github.com/users/kkonstantine/followers","following_url":"https://api.github.com/users/kkonstantine/following{/other_user}","gists_url":"https://api.github.com/users/kkonstantine/gists{/gist_id}","starred_url":"https://api.github.com/users/kkonstantine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkonstantine/subscriptions","organizations_url":"https://api.github.com/users/kkonstantine/orgs","repos_url":"https://api.github.com/users/kkonstantine/repos","events_url":"https://api.github.com/users/kkonstantine/events{/privacy}","received_events_url":"https://api.github.com/users/kkonstantine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T21:53:39Z","updated_at":"2016-12-05T21:53:39Z","author_association":"CONTRIBUTOR","body":"Thanks, I appreciate the review @ijuma ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264989717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264997758","html_url":"https://github.com/apache/kafka/pull/2200#issuecomment-264997758","issue_url":"https://api.github.com/repos/apache/kafka/issues/2200","id":264997758,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk5Nzc1OA==","user":{"login":"kichristensen","id":2461567,"node_id":"MDQ6VXNlcjI0NjE1Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2461567?v=4","gravatar_id":"","url":"https://api.github.com/users/kichristensen","html_url":"https://github.com/kichristensen","followers_url":"https://api.github.com/users/kichristensen/followers","following_url":"https://api.github.com/users/kichristensen/following{/other_user}","gists_url":"https://api.github.com/users/kichristensen/gists{/gist_id}","starred_url":"https://api.github.com/users/kichristensen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kichristensen/subscriptions","organizations_url":"https://api.github.com/users/kichristensen/orgs","repos_url":"https://api.github.com/users/kichristensen/repos","events_url":"https://api.github.com/users/kichristensen/events{/privacy}","received_events_url":"https://api.github.com/users/kichristensen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T22:25:41Z","updated_at":"2016-12-05T22:25:41Z","author_association":"CONTRIBUTOR","body":"@ijuma Sorry, most of it was auto generated by IntelliJ. It should be fixed now","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264997758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264999659","html_url":"https://github.com/apache/kafka/pull/2211#issuecomment-264999659","issue_url":"https://api.github.com/repos/apache/kafka/issues/2211","id":264999659,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NDk5OTY1OQ==","user":{"login":"ewencp","id":47366,"node_id":"MDQ6VXNlcjQ3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/47366?v=4","gravatar_id":"","url":"https://api.github.com/users/ewencp","html_url":"https://github.com/ewencp","followers_url":"https://api.github.com/users/ewencp/followers","following_url":"https://api.github.com/users/ewencp/following{/other_user}","gists_url":"https://api.github.com/users/ewencp/gists{/gist_id}","starred_url":"https://api.github.com/users/ewencp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ewencp/subscriptions","organizations_url":"https://api.github.com/users/ewencp/orgs","repos_url":"https://api.github.com/users/ewencp/repos","events_url":"https://api.github.com/users/ewencp/events{/privacy}","received_events_url":"https://api.github.com/users/ewencp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-05T22:33:24Z","updated_at":"2016-12-05T22:33:24Z","author_association":"CONTRIBUTOR","body":"LGTM, thanks!","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/264999659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265034005","html_url":"https://github.com/apache/kafka/pull/2210#issuecomment-265034005","issue_url":"https://api.github.com/repos/apache/kafka/issues/2210","id":265034005,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTAzNDAwNQ==","user":{"login":"michaelschiff","id":1669670,"node_id":"MDQ6VXNlcjE2Njk2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/1669670?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelschiff","html_url":"https://github.com/michaelschiff","followers_url":"https://api.github.com/users/michaelschiff/followers","following_url":"https://api.github.com/users/michaelschiff/following{/other_user}","gists_url":"https://api.github.com/users/michaelschiff/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelschiff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelschiff/subscriptions","organizations_url":"https://api.github.com/users/michaelschiff/orgs","repos_url":"https://api.github.com/users/michaelschiff/repos","events_url":"https://api.github.com/users/michaelschiff/events{/privacy}","received_events_url":"https://api.github.com/users/michaelschiff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T01:31:40Z","updated_at":"2016-12-06T01:31:40Z","author_association":"CONTRIBUTOR","body":"Got it. Let me know if anything else looks strange to you.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265034005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265049975","html_url":"https://github.com/apache/kafka/pull/2072#issuecomment-265049975","issue_url":"https://api.github.com/repos/apache/kafka/issues/2072","id":265049975,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTA0OTk3NQ==","user":{"login":"huxihx","id":11549429,"node_id":"MDQ6VXNlcjExNTQ5NDI5","avatar_url":"https://avatars.githubusercontent.com/u/11549429?v=4","gravatar_id":"","url":"https://api.github.com/users/huxihx","html_url":"https://github.com/huxihx","followers_url":"https://api.github.com/users/huxihx/followers","following_url":"https://api.github.com/users/huxihx/following{/other_user}","gists_url":"https://api.github.com/users/huxihx/gists{/gist_id}","starred_url":"https://api.github.com/users/huxihx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huxihx/subscriptions","organizations_url":"https://api.github.com/users/huxihx/orgs","repos_url":"https://api.github.com/users/huxihx/repos","events_url":"https://api.github.com/users/huxihx/events{/privacy}","received_events_url":"https://api.github.com/users/huxihx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T03:20:25Z","updated_at":"2016-12-06T03:20:25Z","author_association":"CONTRIBUTOR","body":"@ijuma Seems no MirrorMaker unit test is actually offered, although there is a MirrorMakerTest. Most of the stuffs in the MirrorMaker is private, it's a little hard to test them outside it. Could you give some advice?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265049975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265050067","html_url":"https://github.com/apache/kafka/pull/2156#issuecomment-265050067","issue_url":"https://api.github.com/repos/apache/kafka/issues/2156","id":265050067,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTA1MDA2Nw==","user":{"login":"huxihx","id":11549429,"node_id":"MDQ6VXNlcjExNTQ5NDI5","avatar_url":"https://avatars.githubusercontent.com/u/11549429?v=4","gravatar_id":"","url":"https://api.github.com/users/huxihx","html_url":"https://github.com/huxihx","followers_url":"https://api.github.com/users/huxihx/followers","following_url":"https://api.github.com/users/huxihx/following{/other_user}","gists_url":"https://api.github.com/users/huxihx/gists{/gist_id}","starred_url":"https://api.github.com/users/huxihx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huxihx/subscriptions","organizations_url":"https://api.github.com/users/huxihx/orgs","repos_url":"https://api.github.com/users/huxihx/repos","events_url":"https://api.github.com/users/huxihx/events{/privacy}","received_events_url":"https://api.github.com/users/huxihx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T03:21:06Z","updated_at":"2016-12-06T03:21:06Z","author_association":"CONTRIBUTOR","body":"@junrao could you take some time to address the comments above? Thanks","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265050067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265074848","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-265074848","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":265074848,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTA3NDg0OA==","user":{"login":"aartiguptaa","id":24277675,"node_id":"MDQ6VXNlcjI0Mjc3Njc1","avatar_url":"https://avatars.githubusercontent.com/u/24277675?v=4","gravatar_id":"","url":"https://api.github.com/users/aartiguptaa","html_url":"https://github.com/aartiguptaa","followers_url":"https://api.github.com/users/aartiguptaa/followers","following_url":"https://api.github.com/users/aartiguptaa/following{/other_user}","gists_url":"https://api.github.com/users/aartiguptaa/gists{/gist_id}","starred_url":"https://api.github.com/users/aartiguptaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aartiguptaa/subscriptions","organizations_url":"https://api.github.com/users/aartiguptaa/orgs","repos_url":"https://api.github.com/users/aartiguptaa/repos","events_url":"https://api.github.com/users/aartiguptaa/events{/privacy}","received_events_url":"https://api.github.com/users/aartiguptaa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T06:50:30Z","updated_at":"2016-12-06T07:11:05Z","author_association":"NONE","body":"@enothereska Looks good! \r\nThanks for cleaning this up and adding the missing metrics. When I took this on earlier,  Jay mentioned on a related jira (https://issues.apache.org/jira/browse/KAFKA-3811), that the usage of metrics in streams incurs an overhead because we walk through a list of sensors inside a synchronized method. When I ran the code in the PR and the simple benchmark tests, and looked at the hrof counter recordings using yourkit profiler, I observed a 5 percent CPU overhead with my fix as compared to without it. Wondering now if that was a measurement error/ test setup error?\r\nOut of curiosity, can you describe your perf testing experiment.\r\nDid you use simple benchmark for the perf counters? , can you share the example use case /automated test that you ran? How many nodes? How many tasks, topology , and which profiler tool, flight recorder/yourkit profiler?\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265074848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265104382","html_url":"https://github.com/apache/kafka/pull/1446#issuecomment-265104382","issue_url":"https://api.github.com/repos/apache/kafka/issues/1446","id":265104382,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTEwNDM4Mg==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T09:39:37Z","updated_at":"2016-12-06T09:39:37Z","author_association":"CONTRIBUTOR","body":"Thanks @aartigupta \r\n\r\nI did use yourkit, but the final numbers I put on the PR are using SimpleBenchmark.java that is included with Streams. That runs locally on my MacBook Pro 16GB, SSD, dual core. So on one node we have Kafka and the SimpleBenchmark application. I don't think yours was a measurement error, but some metrics were missing back then.\r\n","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265104382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265109229","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-265109229","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":265109229,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTEwOTIyOQ==","user":{"login":"dguy","id":54829,"node_id":"MDQ6VXNlcjU0ODI5","avatar_url":"https://avatars.githubusercontent.com/u/54829?v=4","gravatar_id":"","url":"https://api.github.com/users/dguy","html_url":"https://github.com/dguy","followers_url":"https://api.github.com/users/dguy/followers","following_url":"https://api.github.com/users/dguy/following{/other_user}","gists_url":"https://api.github.com/users/dguy/gists{/gist_id}","starred_url":"https://api.github.com/users/dguy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dguy/subscriptions","organizations_url":"https://api.github.com/users/dguy/orgs","repos_url":"https://api.github.com/users/dguy/repos","events_url":"https://api.github.com/users/dguy/events{/privacy}","received_events_url":"https://api.github.com/users/dguy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T10:01:55Z","updated_at":"2016-12-06T10:01:55Z","author_association":"CONTRIBUTOR","body":"Thanks @guozhangwang, updated","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265109229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265111069","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-265111069","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":265111069,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTExMTA2OQ==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T10:10:35Z","updated_at":"2016-12-06T10:10:35Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265111069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265127005","html_url":"https://github.com/apache/kafka/pull/2213#issuecomment-265127005","issue_url":"https://api.github.com/repos/apache/kafka/issues/2213","id":265127005,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTEyNzAwNQ==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T11:28:13Z","updated_at":"2016-12-06T11:28:13Z","author_association":"CONTRIBUTOR","body":"This PR based on https://github.com/apache/kafka/pull/750 but it uses Futures so code is match more simple.\r\nTested on high load cluster with ~100K partitions. The speedup of leader election is up to 100x.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265127005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265130956","html_url":"https://github.com/apache/kafka/pull/2214#issuecomment-265130956","issue_url":"https://api.github.com/repos/apache/kafka/issues/2214","id":265130956,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTEzMDk1Ng==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T11:49:09Z","updated_at":"2016-12-06T11:49:09Z","author_association":"CONTRIBUTOR","body":"This PR just removes global lock.\r\nIt can help to speed up the controller.\r\nI recommend to use this patch together with https://github.com/apache/kafka/pull/2213","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265130956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265132042","html_url":"https://github.com/apache/kafka/pull/2214#issuecomment-265132042","issue_url":"https://api.github.com/repos/apache/kafka/issues/2214","id":265132042,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTEzMjA0Mg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T11:54:45Z","updated_at":"2016-12-06T11:54:45Z","author_association":"MEMBER","body":"Thanks for the PR. Can you please elaborate on why it's safe to remove the global lock?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265132042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265132256","html_url":"https://github.com/apache/kafka/pull/2200#issuecomment-265132256","issue_url":"https://api.github.com/repos/apache/kafka/issues/2200","id":265132256,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTEzMjI1Ng==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T11:55:55Z","updated_at":"2016-12-06T11:55:55Z","author_association":"MEMBER","body":"LGTM, merged to trunk and 0.10.1. Note that I simplified the test a little by extracting the `OffsetConfig` construction into its own method. I hope that's OK. :)","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265132256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265146897","html_url":"https://github.com/apache/kafka/pull/2214#issuecomment-265146897","issue_url":"https://api.github.com/repos/apache/kafka/issues/2214","id":265146897,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE0Njg5Nw==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T13:15:57Z","updated_at":"2016-12-06T13:15:57Z","author_association":"CONTRIBUTOR","body":"Previously we used a global object `JSON`, now we create `JSON` on each `parseFull`. I think it can be done w/o locks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265146897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265149796","html_url":"https://github.com/apache/kafka/pull/1362#issuecomment-265149796","issue_url":"https://api.github.com/repos/apache/kafka/issues/1362","id":265149796,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE0OTc5Ng==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T13:30:23Z","updated_at":"2016-12-06T13:30:23Z","author_association":"CONTRIBUTOR","body":"@guozhangwang This has gotten a bit too complicated. Kafka Streams should return the metrics registry, but also ideally allow users to add their own metrics using a well-formed way. So it seems to me a slight modification is needed: The StreamsMetrics interface should be augmented to return the global registry as read only, so StreamMetrics.globalMetrics() should return a read-only Metrics collection. Users can add new streams metrics through StreamMetrics APIs.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265149796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265160844","html_url":"https://github.com/apache/kafka/pull/2214#issuecomment-265160844","issue_url":"https://api.github.com/repos/apache/kafka/issues/2214","id":265160844,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE2MDg0NA==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T14:20:29Z","updated_at":"2016-12-06T14:20:29Z","author_association":"MEMBER","body":"Have you measured the cost of creating a new parser each time? A change like this requires a few benchmarks to motivate it.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265160844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265167535","html_url":"https://github.com/apache/kafka/pull/2199#issuecomment-265167535","issue_url":"https://api.github.com/repos/apache/kafka/issues/2199","id":265167535,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE2NzUzNQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T14:46:16Z","updated_at":"2016-12-06T14:46:16Z","author_association":"MEMBER","body":"The actual fixes will be done in https://github.com/apache/kafka/pull/2209, but I'm merging this for now to unblock other PRs.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265167535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265168366","html_url":"https://github.com/apache/kafka/pull/2214#issuecomment-265168366","issue_url":"https://api.github.com/repos/apache/kafka/issues/2214","id":265168366,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTE2ODM2Ng==","user":{"login":"resetius","id":2862690,"node_id":"MDQ6VXNlcjI4NjI2OTA=","avatar_url":"https://avatars.githubusercontent.com/u/2862690?v=4","gravatar_id":"","url":"https://api.github.com/users/resetius","html_url":"https://github.com/resetius","followers_url":"https://api.github.com/users/resetius/followers","following_url":"https://api.github.com/users/resetius/following{/other_user}","gists_url":"https://api.github.com/users/resetius/gists{/gist_id}","starred_url":"https://api.github.com/users/resetius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/resetius/subscriptions","organizations_url":"https://api.github.com/users/resetius/orgs","repos_url":"https://api.github.com/users/resetius/repos","events_url":"https://api.github.com/users/resetius/events{/privacy}","received_events_url":"https://api.github.com/users/resetius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T14:49:14Z","updated_at":"2016-12-06T14:49:14Z","author_association":"CONTRIBUTOR","body":"Reasonable. I'll try to do some benchmarks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265168366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265245808","html_url":"https://github.com/apache/kafka/pull/2201#issuecomment-265245808","issue_url":"https://api.github.com/repos/apache/kafka/issues/2201","id":265245808,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI0NTgwOA==","user":{"login":"kkonstantine","id":16238634,"node_id":"MDQ6VXNlcjE2MjM4NjM0","avatar_url":"https://avatars.githubusercontent.com/u/16238634?v=4","gravatar_id":"","url":"https://api.github.com/users/kkonstantine","html_url":"https://github.com/kkonstantine","followers_url":"https://api.github.com/users/kkonstantine/followers","following_url":"https://api.github.com/users/kkonstantine/following{/other_user}","gists_url":"https://api.github.com/users/kkonstantine/gists{/gist_id}","starred_url":"https://api.github.com/users/kkonstantine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkonstantine/subscriptions","organizations_url":"https://api.github.com/users/kkonstantine/orgs","repos_url":"https://api.github.com/users/kkonstantine/repos","events_url":"https://api.github.com/users/kkonstantine/events{/privacy}","received_events_url":"https://api.github.com/users/kkonstantine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T19:22:15Z","updated_at":"2016-12-06T19:22:15Z","author_association":"CONTRIBUTOR","body":"The build was successful. It failed after the tests, being unable to generate the JUnit test result report. ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265245808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265246426","html_url":"https://github.com/apache/kafka/pull/2186#issuecomment-265246426","issue_url":"https://api.github.com/repos/apache/kafka/issues/2186","id":265246426,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI0NjQyNg==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T19:24:26Z","updated_at":"2016-12-06T19:24:26Z","author_association":"MEMBER","body":"Thanks for the PR, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265246426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265253661","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-265253661","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":265253661,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI1MzY2MQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T19:49:29Z","updated_at":"2016-12-06T19:49:29Z","author_association":"CONTRIBUTOR","body":"Unit test passed locally.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265253661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265258541","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-265258541","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":265258541,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI1ODU0MQ==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T20:10:15Z","updated_at":"2016-12-06T20:10:15Z","author_association":"CONTRIBUTOR","body":"Merged to trunk, cherry-picked to 0.10.1.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265258541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265263520","html_url":"https://github.com/apache/kafka/pull/2217#issuecomment-265263520","issue_url":"https://api.github.com/repos/apache/kafka/issues/2217","id":265263520,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI2MzUyMA==","user":{"login":"enothereska","id":14234336,"node_id":"MDQ6VXNlcjE0MjM0MzM2","avatar_url":"https://avatars.githubusercontent.com/u/14234336?v=4","gravatar_id":"","url":"https://api.github.com/users/enothereska","html_url":"https://github.com/enothereska","followers_url":"https://api.github.com/users/enothereska/followers","following_url":"https://api.github.com/users/enothereska/following{/other_user}","gists_url":"https://api.github.com/users/enothereska/gists{/gist_id}","starred_url":"https://api.github.com/users/enothereska/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enothereska/subscriptions","organizations_url":"https://api.github.com/users/enothereska/orgs","repos_url":"https://api.github.com/users/enothereska/repos","events_url":"https://api.github.com/users/enothereska/events{/privacy}","received_events_url":"https://api.github.com/users/enothereska/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T20:30:17Z","updated_at":"2016-12-06T20:30:17Z","author_association":"CONTRIBUTOR","body":"@mjsax @guozhangwang @ijuma ","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265263520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265264005","html_url":"https://github.com/apache/kafka/pull/2217#issuecomment-265264005","issue_url":"https://api.github.com/repos/apache/kafka/issues/2217","id":265264005,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI2NDAwNQ==","user":{"login":"ijuma","id":24747,"node_id":"MDQ6VXNlcjI0NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/24747?v=4","gravatar_id":"","url":"https://api.github.com/users/ijuma","html_url":"https://github.com/ijuma","followers_url":"https://api.github.com/users/ijuma/followers","following_url":"https://api.github.com/users/ijuma/following{/other_user}","gists_url":"https://api.github.com/users/ijuma/gists{/gist_id}","starred_url":"https://api.github.com/users/ijuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ijuma/subscriptions","organizations_url":"https://api.github.com/users/ijuma/orgs","repos_url":"https://api.github.com/users/ijuma/repos","events_url":"https://api.github.com/users/ijuma/events{/privacy}","received_events_url":"https://api.github.com/users/ijuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T20:32:19Z","updated_at":"2016-12-06T20:32:19Z","author_association":"MEMBER","body":"LGTM, can we have a JIRA for re-enabling the test?","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265264005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265266892","html_url":"https://github.com/apache/kafka/pull/2193#issuecomment-265266892","issue_url":"https://api.github.com/repos/apache/kafka/issues/2193","id":265266892,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI2Njg5Mg==","user":{"login":"guozhangwang","id":10729597,"node_id":"MDQ6VXNlcjEwNzI5NTk3","avatar_url":"https://avatars.githubusercontent.com/u/10729597?v=4","gravatar_id":"","url":"https://api.github.com/users/guozhangwang","html_url":"https://github.com/guozhangwang","followers_url":"https://api.github.com/users/guozhangwang/followers","following_url":"https://api.github.com/users/guozhangwang/following{/other_user}","gists_url":"https://api.github.com/users/guozhangwang/gists{/gist_id}","starred_url":"https://api.github.com/users/guozhangwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guozhangwang/subscriptions","organizations_url":"https://api.github.com/users/guozhangwang/orgs","repos_url":"https://api.github.com/users/guozhangwang/repos","events_url":"https://api.github.com/users/guozhangwang/events{/privacy}","received_events_url":"https://api.github.com/users/guozhangwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T20:44:51Z","updated_at":"2016-12-06T20:44:51Z","author_association":"CONTRIBUTOR","body":"@hachikuji Could you let @eno know what are the next steps? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265266892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265272934","html_url":"https://github.com/apache/kafka/pull/2212#issuecomment-265272934","issue_url":"https://api.github.com/repos/apache/kafka/issues/2212","id":265272934,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI3MjkzNA==","user":{"login":"mjsax","id":8959638,"node_id":"MDQ6VXNlcjg5NTk2Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/8959638?v=4","gravatar_id":"","url":"https://api.github.com/users/mjsax","html_url":"https://github.com/mjsax","followers_url":"https://api.github.com/users/mjsax/followers","following_url":"https://api.github.com/users/mjsax/following{/other_user}","gists_url":"https://api.github.com/users/mjsax/gists{/gist_id}","starred_url":"https://api.github.com/users/mjsax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjsax/subscriptions","organizations_url":"https://api.github.com/users/mjsax/orgs","repos_url":"https://api.github.com/users/mjsax/repos","events_url":"https://api.github.com/users/mjsax/events{/privacy}","received_events_url":"https://api.github.com/users/mjsax/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T21:09:16Z","updated_at":"2016-12-06T21:09:16Z","author_association":"MEMBER","body":"One comment. Otherwise LGTM.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265272934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265273854","html_url":"https://github.com/apache/kafka/pull/2193#issuecomment-265273854","issue_url":"https://api.github.com/repos/apache/kafka/issues/2193","id":265273854,"node_id":"MDEyOklzc3VlQ29tbWVudDI2NTI3Mzg1NA==","user":{"login":"hachikuji","id":12502538,"node_id":"MDQ6VXNlcjEyNTAyNTM4","avatar_url":"https://avatars.githubusercontent.com/u/12502538?v=4","gravatar_id":"","url":"https://api.github.com/users/hachikuji","html_url":"https://github.com/hachikuji","followers_url":"https://api.github.com/users/hachikuji/followers","following_url":"https://api.github.com/users/hachikuji/following{/other_user}","gists_url":"https://api.github.com/users/hachikuji/gists{/gist_id}","starred_url":"https://api.github.com/users/hachikuji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hachikuji/subscriptions","organizations_url":"https://api.github.com/users/hachikuji/orgs","repos_url":"https://api.github.com/users/hachikuji/repos","events_url":"https://api.github.com/users/hachikuji/events{/privacy}","received_events_url":"https://api.github.com/users/hachikuji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-12-06T21:12:56Z","updated_at":"2016-12-06T21:12:56Z","author_association":"CONTRIBUTOR","body":"@guozhangwang @enothereska From what I can tell so far, the main issue _is_ actually the call to `pollNoWakeup()` as I suggested above. One easy fix is to have `sendFetches` return a boolean indicating whether any fetches were sent. If nothing was sent, we can skip the call to `pollNoWakeup`. I tried this out and it does improve performance quite a bit.","reactions":{"url":"https://api.github.com/repos/apache/kafka/issues/comments/265273854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]