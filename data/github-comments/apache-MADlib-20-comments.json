[{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560921626","html_url":"https://github.com/apache/madlib/pull/462#issuecomment-560921626","issue_url":"https://api.github.com/repos/apache/madlib/issues/462","id":560921626,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDkyMTYyNg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T23:42:23Z","updated_at":"2019-12-02T23:42:23Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1167/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560921626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560940429","html_url":"https://github.com/apache/madlib/pull/461#issuecomment-560940429","issue_url":"https://api.github.com/repos/apache/madlib/issues/461","id":560940429,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDk0MDQyOQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T00:19:12Z","updated_at":"2019-12-03T00:19:12Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1168/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560940429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560948643","html_url":"https://github.com/apache/madlib/pull/461#issuecomment-560948643","issue_url":"https://api.github.com/repos/apache/madlib/issues/461","id":560948643,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDk0ODY0Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T00:55:43Z","updated_at":"2019-12-03T00:55:43Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1169/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/560948643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/561309363","html_url":"https://github.com/apache/madlib/pull/462#issuecomment-561309363","issue_url":"https://api.github.com/repos/apache/madlib/issues/462","id":561309363,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTMwOTM2Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T19:02:03Z","updated_at":"2019-12-03T19:02:03Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1170/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/561309363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/561444532","html_url":"https://github.com/apache/madlib/pull/461#issuecomment-561444532","issue_url":"https://api.github.com/repos/apache/madlib/issues/461","id":561444532,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTQ0NDUzMg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T02:16:42Z","updated_at":"2019-12-04T02:16:42Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1171/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/561444532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/561827179","html_url":"https://github.com/apache/madlib/pull/461#issuecomment-561827179","issue_url":"https://api.github.com/repos/apache/madlib/issues/461","id":561827179,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTgyNzE3OQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T20:33:59Z","updated_at":"2019-12-04T20:34:36Z","author_association":"NONE","body":"LGTM from functional perspective\r\n\r\n(1)\r\ntrain for 3 iterations\r\n```\r\nDROP TABLE IF EXISTS iris_multi_model, iris_multi_model_summary, iris_multi_model_info;\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                               3,                    -- num_iterations\r\n                                               0,                     -- use gpus\r\n                                              'iris_test_packed',     -- validation dataset\r\n                                               1,                     -- metrics compute frequency\r\n                                               FALSE,                 -- warm start\r\n                                              'Sophie L.',            -- name\r\n                                              'Simple MLP for iris dataset'  -- description\r\n                                             );\r\n```\r\n\r\nNow train for 3 more iterations with warm start, then do it again with warm start, for a total of 9 iterations altogether\r\n```\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                               3,                    -- num_iterations\r\n                                               0,                     -- use gpus\r\n                                              'iris_test_packed',     -- validation dataset\r\n                                               1,                     -- metrics compute frequency\r\n                                               TRUE,                 -- warm start\r\n                                              'Sophie L.',            -- name\r\n                                              'Simple MLP for iris dataset'  -- description\r\n                                             );\r\n```\r\n\r\nLook at `mst_key=3` for 3 succesive runs:\r\n```\r\ntraining_loss\r\n[0.57945317029953, 0.363865971565247, 0.285590827465057]\r\n[0.254694432020187, 0.19344100356102, 0.146936997771263]\r\n[0.132369637489319, 0.191817075014114, 0.157660290598869]\r\n\r\nvalidation_loss\r\n[0.67350971698761, 0.443352043628693, 0.309820145368576]\r\n[0.261916130781174, 0.201081365346909, 0.127666547894478]\r\n[0.0899263918399811, 0.204310938715935, 0.0784771740436554]\r\n```\r\n\r\nLook at `mst_key=4` for 3 succesive runs:\r\n```\r\ntraining_loss\r\n[0.994381964206696, 0.746099174022675, 0.608452022075653]\r\n[0.51947021484375, 0.606200277805328, 0.340667217969894]\r\n[0.439217150211334, 0.332746595144272, 0.279199987649918]\r\n\r\nvalidation_loss\r\n[1.0290435552597, 0.814084649085999, 0.709287881851196]\r\n[0.614403426647186, 0.713598251342773, 0.380535960197449]\r\n[0.498434334993362, 0.354164630174637, 0.273105055093765]\r\n```\r\nThis looks OK in principle since these losses seem to continue from the previous run.\r\n\r\n\r\n(2)\r\ndrop summary table and run warm start\r\n```\r\nInternalError: (psycopg2.InternalError) plpy.Error: madlib_keras_fit_multiple error: Input table 'iris_multi_model_summary' does not exist. (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 21, in <module>\r\n    fit_obj = madlib_keras_fit_multiple_model.FitMultipleModel(**globals())\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 42, in wrapper\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 119, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 410, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 253, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 280, in _validate_common_args\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 674, in input_tbl_valid\r\nPL/Python function \"madlib_keras_fit_multiple_model\"\r\n [SQL: \"SELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\\n                                              'iris_multi_model',     -- model_output_table\\n                                              'mst_table',            -- model_selection_table\\n                                               3,                    -- num_iterations\\n                                               0,                     -- use gpus\\n                                              'iris_test_packed',     -- validation dataset\\n                                               1,                     -- metrics compute frequency\\n                                               TRUE,                 -- warm start\\n                                              'Sophie L.',            -- name\\n                                              'Simple MLP for iris dataset'  -- description\\n                                             );\"]\r\n```\r\nOK error message\r\n\r\n\r\n(3)\r\ndrop model table and run warm start\r\n```\r\nInternalError: (psycopg2.InternalError) plpy.Error: madlib_keras_fit_multiple error: Input table 'iris_multi_model' does not exist. (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 21, in <module>\r\n    fit_obj = madlib_keras_fit_multiple_model.FitMultipleModel(**globals())\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 42, in wrapper\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 119, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 410, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 253, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 279, in _validate_common_args\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 674, in input_tbl_valid\r\nPL/Python function \"madlib_keras_fit_multiple_model\"\r\n [SQL: \"SELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\\n                                              'iris_multi_model',     -- model_output_table\\n                                              'mst_table',            -- model_selection_table\\n                                               3,                    -- num_iterations\\n                                               0,                     -- use gpus\\n                                              'iris_test_packed',     -- validation dataset\\n                                               1,                     -- metrics compute frequency\\n                                               TRUE,                 -- warm start\\n                                              'Sophie L.',            -- name\\n                                              'Simple MLP for iris dataset'  -- description\\n                                             );\"]\r\n```\r\nOK error message\r\n\r\n(4)\r\ntry diff metrics compute frequency\r\n```\r\nDROP TABLE IF EXISTS iris_multi_model, iris_multi_model_summary, iris_multi_model_info;\r\n\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                               5,                    -- num_iterations\r\n                                               0,                     -- use gpus\r\n                                              'iris_test_packed',     -- validation dataset\r\n                                               3,                     -- metrics compute frequency\r\n                                               FALSE,                 -- warm start\r\n                                              'Sophie L.',            -- name\r\n                                              'Simple MLP for iris dataset'  -- description\r\n                                             );\r\n```\r\n\r\nLook at summary table\r\n```\r\nSELECT * FROM iris_multi_model_summary;\r\n-[ RECORD 1 ]-------------+---------------------------------------------\r\nsource_table              | iris_train_packed\r\nvalidation_table          | iris_test_packed\r\nmodel                     | iris_multi_model\r\nmodel_info                | iris_multi_model_info\r\ndependent_varname         | class_text\r\nindependent_varname       | attributes\r\nmodel_arch_table          | model_arch_library\r\nnum_iterations            | 5\r\nmetrics_compute_frequency | 3\r\nwarm_start                | f\r\nname                      | Sophie L.\r\ndescription               | Simple MLP for iris dataset\r\nstart_training_time       | 2019-12-04 20:28:55.000868\r\nend_training_time         | 2019-12-04 20:29:50.155568\r\nmadlib_version            | 1.17-dev\r\nnum_classes               | 3\r\nclass_values              | {Iris-setosa,Iris-versicolor,Iris-virginica}\r\ndependent_vartype         | character varying\r\nnormalizing_const         | 1\r\nmetrics_iters             | {3,5}\r\n```\r\nOK on the {3,5}\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/561827179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/562283729","html_url":"https://github.com/apache/madlib/pull/462#issuecomment-562283729","issue_url":"https://api.github.com/repos/apache/madlib/issues/462","id":562283729,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjI4MzcyOQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-05T19:38:53Z","updated_at":"2019-12-05T19:38:53Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1172/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/562283729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/562801614","html_url":"https://github.com/apache/madlib/pull/462#issuecomment-562801614","issue_url":"https://api.github.com/repos/apache/madlib/issues/462","id":562801614,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjgwMTYxNA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-07T01:43:40Z","updated_at":"2019-12-07T01:43:40Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1173/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/562801614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/563399974","html_url":"https://github.com/apache/madlib/pull/462#issuecomment-563399974","issue_url":"https://api.github.com/repos/apache/madlib/issues/462","id":563399974,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MzM5OTk3NA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-09T19:38:25Z","updated_at":"2019-12-09T19:38:25Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1174/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/563399974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/563496299","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-563496299","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":563496299,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MzQ5NjI5OQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-10T00:01:30Z","updated_at":"2019-12-10T00:01:30Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1175/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/563496299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/564330083","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-564330083","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":564330083,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDMzMDA4Mw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-11T01:03:01Z","updated_at":"2019-12-11T01:03:01Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1176/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/564330083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565563051","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-565563051","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":565563051,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTU2MzA1MQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-13T18:52:00Z","updated_at":"2019-12-13T18:52:00Z","author_association":"NONE","body":"seeing an evaluate error that I don't remember seeing before...\r\n```\r\nDROP TABLE IF EXISTS iris_multi_model, iris_multi_model_summary, iris_multi_model_info;\r\n\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                               6,                     -- num_iterations\r\n                                               FALSE,                 -- use gpus\r\n                                              'iris_test_packed',     -- validation dataset\r\n                                               2,                     -- metrics compute frequency\r\n                                               FALSE,                 -- warm start\r\n                                              'Sophie L.',            -- name\r\n                                              'Simple MLP for iris dataset'  -- description\r\n                                             );\r\n\r\n\r\nInternalError: (psycopg2.InternalError) plpy.SPIError: plpy.Error: Number of elements in model weights(303) doesn't match model(193). (plpython.c:5038)  (seg0 slice1 10.128.0.41:40000 pid=32019) (plpython.c:5038)\r\nDETAIL:  \r\nTraceback (most recent call last):\r\n  PL/Python function \"internal_keras_eval_transition\", line 6, in <module>\r\n    return madlib_keras.internal_keras_eval_transition(**globals())\r\n  PL/Python function \"internal_keras_eval_transition\", line 727, in internal_keras_eval_transition\r\n  PL/Python function \"internal_keras_eval_transition\", line 125, in set_model_weights\r\n  PL/Python function \"internal_keras_eval_transition\", line 167, in deserialize_as_nd_weights\r\n  PL/Python function \"internal_keras_eval_transition\", line 96, in _assert\r\nPL/Python function \"internal_keras_eval_transition\"\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 21, in <module>\r\n    fit_obj = madlib_keras_fit_multiple_model.FitMultipleModel(**globals())\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 42, in wrapper\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 167, in __init__\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 174, in fit_multiple_model\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 200, in train_multiple_model\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 229, in evaluate_model\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 409, in compute_loss_and_metrics\r\n  PL/Python function \"madlib_keras_fit_multiple_model\", line 691, in get_loss_metric_from_keras_eval\r\nPL/Python function \"madlib_keras_fit_multiple_model\"\r\n [SQL: \"SELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\\n                                              'iris_multi_model',     -- model_output_table\\n                                              'mst_table',            -- model_selection_table\\n                                               6,                     -- num_iterations\\n                                               FALSE,                 -- use gpus\\n                                              'iris_test_packed',     -- validation dataset\\n                                               2,                     -- metrics compute frequency\\n                                               FALSE,                 -- warm start\\n                                              'Sophie L.',            -- name\\n                                              'Simple MLP for iris dataset'  -- description\\n                                             );\"]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565563051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565665348","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-565665348","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":565665348,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTY2NTM0OA==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-14T01:11:23Z","updated_at":"2019-12-14T01:11:23Z","author_association":"CONTRIBUTOR","body":"@fmcquillan99 Could you give it another try with the new commit?","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565665348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565669314","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-565669314","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":565669314,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTY2OTMxNA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-14T01:48:19Z","updated_at":"2019-12-14T01:48:19Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1177/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565669314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565669702","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-565669702","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":565669702,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTY2OTcwMg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-14T01:52:29Z","updated_at":"2019-12-14T01:52:29Z","author_association":"NONE","body":"@orhankislal yes it does work, thank you for the fix.\r\n\r\nI will continue testing now.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565669702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565672428","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-565672428","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":565672428,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTY3MjQyOA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-14T02:24:29Z","updated_at":"2019-12-14T02:24:29Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1178/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/565672428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566277992","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566277992","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566277992,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjI3Nzk5Mg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T22:35:55Z","updated_at":"2019-12-16T22:35:55Z","author_association":"NONE","body":"this seems too verbose to output:\r\n```\r\nSELECT madlib.load_keras_model('model_arch_library',  -- Output table,\r\n$$\r\n{\"class_name\": \"Sequential\", \"keras_version\": \"2.1.6\", \"config\": [{\"class_name\": \"Dense\", \"config\": {\"kernel_initializer\": {\"class_name\": \"VarianceScaling\", \"config\": {\"distribution\": \"uniform\", \"scale\": 1.0, \"seed\": null, \"mode\": \"fan_avg\"}}, \"name\": \"dense_1\", \"kernel_constraint\": null, \"bias_regularizer\": null, \"bias_constraint\": null, \"dtype\": \"float32\", \"activation\": \"relu\", \"trainable\": true, \"kernel_regularizer\": null, \"bias_initializer\": {\"class_name\": \"Zeros\", \"config\": {}}, \"units\": 10, \"batch_input_shape\": [null, 4], \"use_bias\": true, \"activity_regularizer\": null}}, {\"class_name\": \"Dense\", \"config\": {\"kernel_initializer\": {\"class_name\": \"VarianceScaling\", \"config\": {\"distribution\": \"uniform\", \"scale\": 1.0, \"seed\": null, \"mode\": \"fan_avg\"}}, \"name\": \"dense_2\", \"kernel_constraint\": null, \"bias_regularizer\": null, \"bias_constraint\": null, \"activation\": \"relu\", \"trainable\": true, \"kernel_regularizer\": null, \"bias_initializer\": {\"class_name\": \"Zeros\", \"config\": {}}, \"units\": 10, \"use_bias\": true, \"activity_regularizer\": null}}, {\"class_name\": \"Dense\", \"config\": {\"kernel_initializer\": {\"class_name\": \"VarianceScaling\", \"config\": {\"distribution\": \"uniform\", \"scale\": 1.0, \"seed\": null, \"mode\": \"fan_avg\"}}, \"name\": \"dense_3\", \"kernel_constraint\": null, \"bias_regularizer\": null, \"bias_constraint\": null, \"activation\": \"softmax\", \"trainable\": true, \"kernel_regularizer\": null, \"bias_initializer\": {\"class_name\": \"Zeros\", \"config\": {}}, \"units\": 3, \"use_bias\": true, \"activity_regularizer\": null}}], \"backend\": \"tensorflow\"}\r\n$$\r\n::json,         -- JSON blob\r\n                               NULL,                  -- Weights\r\n                               'Sophie',              -- Name\r\n                               'MLP with 1 hidden layer'       -- Descr\r\n);\r\n```\r\nproduces\r\n```\r\nINFO:  Keras Model Arch: Created new keras model architecture table model_arch_library.\r\nCONTEXT:  PL/Python function \"load_keras_model\"\r\nINFO:  Keras Model Arch: Added model id 1 to model_arch_library table\r\nCONTEXT:  PL/Python function \"load_keras_model\"\r\n-[ RECORD 1 ]----+-\r\nload_keras_model | \r\n\r\nTime: 105.684 ms\r\n```\r\nIs this the expected output?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566277992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566285868","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566285868","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566285868,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjI4NTg2OA==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T22:59:14Z","updated_at":"2019-12-16T22:59:14Z","author_association":"CONTRIBUTOR","body":"Yes, those are the expected output and info messages.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566285868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566307352","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566307352","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566307352,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjMwNzM1Mg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T00:05:21Z","updated_at":"2019-12-17T00:05:21Z","author_association":"NONE","body":"It says\r\n`Training set after iteration x`\r\nbut does not say\r\n`Validation set after iteration x`\r\nso at first I didn't know that the last 12 were for the validation set.\r\n\r\nIs there a way to say `Validation set after iteration x` before listing the data?\r\n\r\n```\r\n\tTime for training in iteration 4: 9.69201207161 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 5: 9.86732983589 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 6: 10.0109279156 sec\r\nDETAIL:  \r\n\tTraining set after iteration 6:\r\n\tmst_key=2: metric=0.958333313465, loss=0.183155477047\r\n\tmst_key=11: metric=0.841666638851, loss=0.825849890709\r\n\tmst_key=10: metric=0.850000023842, loss=0.270138114691\r\n\tmst_key=4: metric=0.891666650772, loss=0.308341085911\r\n\tmst_key=3: metric=0.850000023842, loss=0.273101329803\r\n\tmst_key=12: metric=0.800000011921, loss=0.981224298477\r\n\tmst_key=9: metric=0.816666662693, loss=0.39588457346\r\n\tmst_key=1: metric=0.358333319426, loss=1.10315680504\r\n\tmst_key=8: metric=0.358333319426, loss=1.09978532791\r\n\tmst_key=7: metric=0.691666662693, loss=0.468748778105\r\n\tmst_key=5: metric=0.908333361149, loss=0.47638130188\r\n\tmst_key=6: metric=0.408333331347, loss=1.00524008274\r\n\tmst_key=2: metric=1.0, loss=0.148071616888\r\n\tmst_key=11: metric=0.833333313465, loss=0.833429694176\r\n\tmst_key=10: metric=0.666666686535, loss=0.476953774691\r\n\tmst_key=4: metric=0.733333349228, loss=0.392092883587\r\n\tmst_key=3: metric=0.933333337307, loss=0.10978718102\r\n\tmst_key=12: metric=0.866666674614, loss=0.987264215946\r\n\tmst_key=9: metric=0.600000023842, loss=0.893045544624\r\n\tmst_key=1: metric=0.233333334327, loss=1.11105871201\r\n\tmst_key=8: metric=0.233333334327, loss=1.14259588718\r\n\tmst_key=7: metric=0.566666662693, loss=0.525054514408\r\n\tmst_key=5: metric=0.899999976158, loss=0.493363827467\r\n\tmst_key=6: metric=0.266666680574, loss=1.04115581512\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 7: 10.1211631298 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566307352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566338384","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566338384","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566338384,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjMzODM4NA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T01:30:44Z","updated_at":"2019-12-17T01:30:44Z","author_association":"NONE","body":"Besides my last comment, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566338384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566343228","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566343228","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566343228,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjM0MzIyOA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T01:51:29Z","updated_at":"2019-12-17T01:51:29Z","author_association":"NONE","body":"looks better\r\n```\r\n\tTime for training in iteration 4: 8.73104310036 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 5: 8.39556002617 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 6: 8.93426513672 sec\r\nDETAIL:  \r\n\tTraining set after iteration 6:\r\n\tmst_key=2: metric=0.691666662693, loss=0.472569614649\r\n\tmst_key=11: metric=0.975000023842, loss=0.136468976736\r\n\tmst_key=10: metric=0.949999988079, loss=0.109081745148\r\n\tmst_key=4: metric=0.975000023842, loss=0.178229421377\r\n\tmst_key=3: metric=0.925000011921, loss=0.184964418411\r\n\tmst_key=12: metric=0.975000023842, loss=0.141136452556\r\n\tmst_key=9: metric=0.958333313465, loss=0.0976895838976\r\n\tmst_key=1: metric=0.375, loss=1.09557545185\r\n\tmst_key=8: metric=0.975000023842, loss=0.0692544877529\r\n\tmst_key=7: metric=0.958333313465, loss=0.153927713633\r\n\tmst_key=5: metric=0.841666638851, loss=0.468217223883\r\n\tmst_key=6: metric=0.741666674614, loss=0.504250705242\r\n\tValidation set after iteration 6:\r\n\tmst_key=2: metric=0.600000023842, loss=0.418071746826\r\n\tmst_key=11: metric=1.0, loss=0.0674076601863\r\n\tmst_key=10: metric=1.0, loss=0.018841393292\r\n\tmst_key=4: metric=1.0, loss=0.101651079953\r\n\tmst_key=3: metric=0.933333337307, loss=0.149523466825\r\n\tmst_key=12: metric=1.0, loss=0.0722744837403\r\n\tmst_key=9: metric=1.0, loss=0.0356690809131\r\n\tmst_key=1: metric=0.166666671634, loss=1.12900209427\r\n\tmst_key=8: metric=1.0, loss=0.00220014923252\r\n\tmst_key=7: metric=1.0, loss=0.0267392881215\r\n\tmst_key=5: metric=0.800000011921, loss=0.491473942995\r\n\tmst_key=6: metric=0.600000023842, loss=0.556908965111\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 7: 8.56644105911 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n```\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566343228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566347431","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566347431","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566347431,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjM0NzQzMQ==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T02:10:26Z","updated_at":"2019-12-17T02:10:26Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1179/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566347431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566351870","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566351870","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566351870,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjM1MTg3MA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T02:30:43Z","updated_at":"2019-12-17T02:30:43Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1180/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566351870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566703712","html_url":"https://github.com/apache/madlib/pull/463#issuecomment-566703712","issue_url":"https://api.github.com/repos/apache/madlib/issues/463","id":566703712,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjcwMzcxMg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T19:05:59Z","updated_at":"2019-12-17T19:05:59Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1181/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/566703712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/567629547","html_url":"https://github.com/apache/madlib/pull/464#issuecomment-567629547","issue_url":"https://api.github.com/repos/apache/madlib/issues/464","id":567629547,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzYyOTU0Nw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T19:29:12Z","updated_at":"2019-12-19T19:29:12Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1182/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/567629547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/567644148","html_url":"https://github.com/apache/madlib/pull/464#issuecomment-567644148","issue_url":"https://api.github.com/repos/apache/madlib/issues/464","id":567644148,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzY0NDE0OA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T20:10:03Z","updated_at":"2019-12-19T20:10:03Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1183/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/567644148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/567712697","html_url":"https://github.com/apache/madlib/pull/465#issuecomment-567712697","issue_url":"https://api.github.com/repos/apache/madlib/issues/465","id":567712697,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzcxMjY5Nw==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T22:51:39Z","updated_at":"2019-12-19T22:51:39Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1184/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/567712697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/568125818","html_url":"https://github.com/apache/madlib/pull/466#issuecomment-568125818","issue_url":"https://api.github.com/repos/apache/madlib/issues/466","id":568125818,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODEyNTgxOA==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-20T23:37:26Z","updated_at":"2019-12-20T23:37:26Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1185/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/568125818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/568138854","html_url":"https://github.com/apache/madlib/pull/466#issuecomment-568138854","issue_url":"https://api.github.com/repos/apache/madlib/issues/466","id":568138854,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODEzODg1NA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-21T01:16:51Z","updated_at":"2019-12-21T01:16:51Z","author_association":"NONE","body":"after quick initial look:  might need to truncate info and summary tables","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/568138854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/569733542","html_url":"https://github.com/apache/madlib/pull/464#issuecomment-569733542","issue_url":"https://api.github.com/repos/apache/madlib/issues/464","id":569733542,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTczMzU0Mg==","user":{"login":"asf-ci","id":40367165,"node_id":"MDQ6VXNlcjQwMzY3MTY1","avatar_url":"https://avatars.githubusercontent.com/u/40367165?v=4","gravatar_id":"","url":"https://api.github.com/users/asf-ci","html_url":"https://github.com/asf-ci","followers_url":"https://api.github.com/users/asf-ci/followers","following_url":"https://api.github.com/users/asf-ci/following{/other_user}","gists_url":"https://api.github.com/users/asf-ci/gists{/gist_id}","starred_url":"https://api.github.com/users/asf-ci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asf-ci/subscriptions","organizations_url":"https://api.github.com/users/asf-ci/orgs","repos_url":"https://api.github.com/users/asf-ci/repos","events_url":"https://api.github.com/users/asf-ci/events{/privacy}","received_events_url":"https://api.github.com/users/asf-ci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-30T16:57:33Z","updated_at":"2019-12-30T16:57:33Z","author_association":"NONE","body":"\nRefer to this link for build results (access rights to CI server needed): \nhttps://builds.apache.org/job/madlib-pr-build/1186/\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/569733542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571377290","html_url":"https://github.com/apache/madlib/pull/466#issuecomment-571377290","issue_url":"https://api.github.com/repos/apache/madlib/issues/466","id":571377290,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTM3NzI5MA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T00:32:40Z","updated_at":"2020-01-07T00:32:40Z","author_association":"NONE","body":"The warm start logic seems OK in limited testing so far, but during autoML runs, I cannot query the `_info` table after it has been created because it has an `AccessExclusiveLock`.  I can however query the `_summary` table.  Not sure why it would have this lock?  I re-started the database and tried again but same thing: \r\n\r\n```\r\nmadlib=# select t.relname,l.locktype,page,virtualtransaction,pid,mode,granted from pg_locks l, pg_stat_all_tables t where l.relation=t.relid order by relation asc;\r\n\r\n             relname             | locktype | page | virtualtransaction |  pid  |        mode         | granted \r\n---------------------------------+----------+------+--------------------+-------+---------------------+---------\r\n train_mnist_packed              | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n train_mnist_packed              | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n train_mnist_packed              | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n train_mnist_packed_summary      | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n train_mnist_packed_summary      | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n train_mnist_packed_summary      | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n test_mnist_packed               | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n test_mnist_packed               | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n test_mnist_packed               | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n model_arch_table_mnist          | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n model_arch_table_mnist          | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n mst_diag_table_hb_mnist         | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n mst_diag_table_hb_mnist         | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n mst_diag_table_hb_mnist         | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n mst_diag_table_hb_mnist_summary | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n mst_diag_table_hb_mnist_summary | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n mst_diag_table_hb_mnist_summary | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n mnist_multi_model               | relation |      | 4/122              | 28078 | ExclusiveLock       | t\r\n mnist_multi_model               | relation |      | 4/122              | 28078 | RowExclusiveLock    | t\r\n mnist_multi_model               | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n mnist_multi_model               | relation |      | 1/164              | 28092 | RowExclusiveLock    | t\r\n mnist_multi_model               | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n mnist_multi_model               | relation |      | 1/164              | 28091 | RowExclusiveLock    | t\r\n mnist_multi_model               | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n mnist_multi_model_info          | relation |      | 1/164              | 28092 | AccessExclusiveLock | t\r\n mnist_multi_model_info          | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n mnist_multi_model_info          | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n mnist_multi_model_info          | relation |      | 1/164              | 28091 | AccessExclusiveLock | t\r\n mnist_multi_model_info          | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n mnist_multi_model_info          | relation |      | 4/122              | 28078 | AccessExclusiveLock | t\r\n mnist_multi_model_summary       | relation |      | 4/122              | 28078 | AccessShareLock     | t\r\n mnist_multi_model_summary       | relation |      | 1/164              | 28091 | AccessShareLock     | t\r\n mnist_multi_model_summary       | relation |      | 1/164              | 28092 | AccessShareLock     | t\r\n```\r\n\r\nI am not sure this is actually a problem, however, but wanted to note it here. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571377290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571779179","html_url":"https://github.com/apache/madlib/pull/466#issuecomment-571779179","issue_url":"https://api.github.com/repos/apache/madlib/issues/466","id":571779179,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTc3OTE3OQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T21:22:53Z","updated_at":"2020-01-07T21:24:52Z","author_association":"NONE","body":"Seems to pick up from where it left off when warm start is on, though these curves are somewhat flat so not super clear (see pics below).\r\n\r\n```\r\nSELECT validation_loss, validation_metrics FROM results_mnist where s=2 AND mst_key = 8;\r\n```\r\nresults in\r\n```\r\n-[ RECORD 1 ]------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nvalidation_loss    | {0.0454168096184731}\r\nvalidation_metrics | {0.986400008201599}\r\n-[ RECORD 2 ]------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nvalidation_loss    | {0.0372964888811111,0.0447742976248264,0.0334407761693001}\r\nvalidation_metrics | {0.98769998550415,0.986100018024445,0.989400029182434}\r\n-[ RECORD 3 ]------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nvalidation_loss    | {0.0316416546702385,0.0328738279640675,0.0300650335848331,0.0358279161155224,0.0323219522833824,0.0301002375781536,0.0322590619325638,0.0325789600610733,0.0320237688720226}\r\nvalidation_metrics | {0.98989999294281,0.989600002765656,0.990899980068207,0.988699972629547,0.991400003433228,0.991999983787537,0.989700019359589,0.990400016307831,0.990899980068207}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571779179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571779634","html_url":"https://github.com/apache/madlib/pull/466#issuecomment-571779634","issue_url":"https://api.github.com/repos/apache/madlib/issues/466","id":571779634,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTc3OTYzNA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-07T21:24:06Z","updated_at":"2020-01-07T21:24:06Z","author_association":"NONE","body":"![p1001](https://user-images.githubusercontent.com/10538173/71930669-f8d3db80-3150-11ea-816b-e7e04e3ddc29.jpg)\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571779634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571837636","html_url":"https://github.com/apache/madlib/pull/466#issuecomment-571837636","issue_url":"https://api.github.com/repos/apache/madlib/issues/466","id":571837636,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MTgzNzYzNg==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T00:35:41Z","updated_at":"2020-01-08T00:35:41Z","author_association":"CONTRIBUTOR","body":"@fmcquillan99 Regarding the table lock: I am actually not that surprised to see the lock on the `info` table since this is a single sql query and `delete`/`truncate` operations do enforce `access exclusive` lock. I would like to understand why the behavior is different for the summary table. We should explore it at some point but I don't see it as a bug of this implementation.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/571837636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/572210896","html_url":"https://github.com/apache/madlib/pull/467#issuecomment-572210896","issue_url":"https://api.github.com/repos/apache/madlib/issues/467","id":572210896,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MjIxMDg5Ng==","user":{"login":"reductionista","id":2644901,"node_id":"MDQ6VXNlcjI2NDQ5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2644901?v=4","gravatar_id":"","url":"https://api.github.com/users/reductionista","html_url":"https://github.com/reductionista","followers_url":"https://api.github.com/users/reductionista/followers","following_url":"https://api.github.com/users/reductionista/following{/other_user}","gists_url":"https://api.github.com/users/reductionista/gists{/gist_id}","starred_url":"https://api.github.com/users/reductionista/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reductionista/subscriptions","organizations_url":"https://api.github.com/users/reductionista/orgs","repos_url":"https://api.github.com/users/reductionista/repos","events_url":"https://api.github.com/users/reductionista/events{/privacy}","received_events_url":"https://api.github.com/users/reductionista/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-08T19:05:12Z","updated_at":"2020-01-08T19:10:18Z","author_association":"CONTRIBUTOR","body":"dev-check was failing on gpdb4.3 due to some tests of the new `array_to_bytea()` function defined in `array_ops.sql_in` that use a builtin gpdb function `array_fill()` that was first added in gpdb5.\r\n\r\nSince this function is only intended for internal use in the deep learning module, and we don't support or even include that module in gpdb4.3, I fixed the failure by adding an `m4` macro to skip both the definition and the tests of `array_to_bytea()` for gpdb4.x","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/572210896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573255892","html_url":"https://github.com/apache/madlib/pull/467#issuecomment-573255892","issue_url":"https://api.github.com/repos/apache/madlib/issues/467","id":573255892,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzI1NTg5Mg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-11T00:22:02Z","updated_at":"2020-01-11T00:24:45Z","author_association":"NONE","body":"Functional and perf tests on small cluster (1 VM, 2 segments).  I know we do not expect big improvements on a small cluster, but wanted to compare with 1.16.\r\n\r\n\r\n(1)\r\ntimings cifar-10 training set 50,000 images\r\n\r\n```\r\nDROP TABLE IF EXISTS cifar_10_train_data_packed, cifar_10_train_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('cifar_10_train_data',        -- Source table\r\n                                       'cifar_10_train_data_packed', -- Output table\r\n                                       'y',                          -- Dependent variable\r\n                                       'x',                          -- Independent variable\r\n                                        NULL,                        -- Buffer size\r\n                                        256.0                        -- Normalizing constant\r\n                                        );\r\n```\r\nresults\r\n```\r\nbuffer size | normalize | time (sec)\r\n100\t| 256.0 | 47\r\n500\t| 256.0 | 56\r\n1000 | 256.0 | 86\r\n2000 | 256.0 | 152\r\n5000 | 256.0 | 382\r\n5000 | 1.0 (no normalize) | 410\r\n5000 | NULL (no normalize) | 407\r\nmax\t| 256.0 | 1553\r\n```\r\n\r\n\r\n(2)\r\ntimings cifar-10 test set 10,000 images\r\n\r\n```\r\nDROP TABLE IF EXISTS cifar_10_test_data_packed, cifar_10_test_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('cifar_10_test_data',        -- Source table\r\n                                       'cifar_10_test_data_packed', -- Output table\r\n                                       'y',                          -- Dependent variable\r\n                                       'x',                          -- Independent variable\r\n                                        NULL,                        -- Buffer size\r\n                                        256.0                        -- Normalizing constant\r\n                                        );\r\n```\r\nresults\r\n```\r\nbuffer size | normalize | time (sec)\r\nmax\t| 256.0  118\r\n```\r\n\r\n(3)\r\ntest distribution rules\r\n\r\n```\r\nDROP TABLE IF EXISTS cifar_10_train_data_packed, cifar_10_train_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('cifar_10_train_data',        -- Source table\r\n                                       'cifar_10_train_data_packed', -- Output table\r\n                                       'y',                          -- Dependent variable\r\n                                       'x',                          -- Independent variable\r\n                                        100,                        -- Buffer size\r\n                                        NULL,                        -- Normalizing constant\r\n                                        NULL,\t\t\t\t\t     -- Number of classes\r\n                                        'gpu_segments'        -- Distribution rules\r\n                                        );\r\n\r\nERROR:  plpy.Error: training_preprocessor_dl: No GPUs configured on hosts. (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"training_preprocessor_dl\", line 24, in <module>\r\n    training_preprocessor_obj.training_preprocessor_dl()\r\n  PL/Python function \"training_preprocessor_dl\", line 820, in training_preprocessor_dl\r\n  PL/Python function \"training_preprocessor_dl\", line 340, in input_preprocessor_dl\r\nPL/Python function \"training_preprocessor_dl\"\r\n```\r\nOK\r\n\r\n\r\n(4)\r\ntest distribution rules\r\n\r\n```\r\nDROP TABLE IF EXISTS cifar_10_train_data_packed, cifar_10_train_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('cifar_10_train_data',        -- Source table\r\n                                       'cifar_10_train_data_packed', -- Output table\r\n                                       'y',                          -- Dependent variable\r\n                                       'x',                          -- Independent variable\r\n                                        100,                        -- Buffer size\r\n                                        NULL,                        -- Normalizing constant\r\n                                        NULL,\t\t\t\t\t     -- Number of classes\r\n                                        'all_segments'        -- Distribution rules\r\n                                        );\r\n```\r\nOK\r\n\r\n\r\n(5)\r\ntest distribution rules\r\n\r\n```\r\nDROP TABLE IF EXISTS segments_to_use;\r\nCREATE TABLE segments_to_use(\r\n    dbid INTEGER,\r\n    hostname TEXT\r\n);\r\nINSERT INTO segments_to_use VALUES\r\n(3, 'hostname-01');\r\n\r\nDROP TABLE IF EXISTS cifar_10_train_data_packed, cifar_10_train_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('cifar_10_train_data',        -- Source table\r\n                                       'cifar_10_train_data_packed', -- Output table\r\n                                       'y',                          -- Dependent variable\r\n                                       'x',                          -- Independent variable\r\n                                        100,                        -- Buffer size\r\n                                        NULL,                        -- Normalizing constant\r\n                                        NULL,\t\t\t\t\t     -- Number of classes\r\n                                        'segments_to_use'        -- Distribution rules\r\n                                        );\r\nselect * from cifar_10_train_data_packed_summary;\r\n\r\n-[ RECORD 1 ]-----------+---------------------------\r\nsource_table            | cifar_10_train_data\r\noutput_table            | cifar_10_train_data_packed\r\ndependent_varname       | y\r\nindependent_varname     | x\r\ndependent_vartype       | text\r\nclass_values            | {0,1,2,3,4,5,6,7,8,9}\r\nbuffer_size             | 100\r\nnormalizing_const       | 1\r\nnum_classes             | 10\r\ndistribution_rules      | {3}\r\n__internal_gpu_config__ | {1}\r\n```\r\nOK\r\n\r\n\r\n(6)\r\ntest distribution rules\r\n\r\n```\r\nDROP TABLE IF EXISTS segments_to_use;\r\nCREATE TABLE segments_to_use(\r\n    dbid INTEGER,\r\n    hostname TEXT\r\n);\r\nINSERT INTO segments_to_use VALUES\r\n(2, 'hostname-01'),\r\n(3, 'hostname-01');\r\n\r\nDROP TABLE IF EXISTS cifar_10_train_data_packed, cifar_10_train_data_packed_summary;\r\n\r\nSELECT madlib.training_preprocessor_dl('cifar_10_train_data',        -- Source table\r\n                                       'cifar_10_train_data_packed', -- Output table\r\n                                       'y',                          -- Dependent variable\r\n                                       'x',                          -- Independent variable\r\n                                        100,                        -- Buffer size\r\n                                        NULL,                        -- Normalizing constant\r\n                                        NULL,\t\t\t\t\t     -- Number of classes\r\n                                        'segments_to_use'        -- Distribution rules\r\n                                        );\r\nselect * from cifar_10_train_data_packed_summary;\r\n\r\n-[ RECORD 1 ]-----------+---------------------------\r\nsource_table            | cifar_10_train_data\r\noutput_table            | cifar_10_train_data_packed\r\ndependent_varname       | y\r\nindependent_varname     | x\r\ndependent_vartype       | text\r\nclass_values            | {0,1,2,3,4,5,6,7,8,9}\r\nbuffer_size             | 100\r\nnormalizing_const       | 1\r\nnum_classes             | 10\r\ndistribution_rules      | {2,3}\r\n__internal_gpu_config__ | {0,1}\r\n```\r\nOK\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573255892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573256543","html_url":"https://github.com/apache/madlib/pull/467#issuecomment-573256543","issue_url":"https://api.github.com/repos/apache/madlib/issues/467","id":573256543,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzI1NjU0Mw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-11T00:25:46Z","updated_at":"2020-01-11T00:25:46Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/10538173/72195133-d696c380-33c5-11ea-9204-dcc43d83e6d8.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573256543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573256832","html_url":"https://github.com/apache/madlib/pull/467#issuecomment-573256832","issue_url":"https://api.github.com/repos/apache/madlib/issues/467","id":573256832,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzI1NjgzMg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-11T00:27:32Z","updated_at":"2020-01-11T00:27:32Z","author_association":"NONE","body":"@reductionista Looking at the 5k buffer size runs, can you pls just double check in the code that we are skipping the normalization if the normalization factor is `1.0` or `NULL` ?  I am asking since there is no performance improvement on my small test cluster when I skip normalization.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573256832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573278611","html_url":"https://github.com/apache/madlib/pull/467#issuecomment-573278611","issue_url":"https://api.github.com/repos/apache/madlib/issues/467","id":573278611,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzI3ODYxMQ==","user":{"login":"reductionista","id":2644901,"node_id":"MDQ6VXNlcjI2NDQ5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2644901?v=4","gravatar_id":"","url":"https://api.github.com/users/reductionista","html_url":"https://github.com/reductionista","followers_url":"https://api.github.com/users/reductionista/followers","following_url":"https://api.github.com/users/reductionista/following{/other_user}","gists_url":"https://api.github.com/users/reductionista/gists{/gist_id}","starred_url":"https://api.github.com/users/reductionista/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reductionista/subscriptions","organizations_url":"https://api.github.com/users/reductionista/orgs","repos_url":"https://api.github.com/users/reductionista/repos","events_url":"https://api.github.com/users/reductionista/events{/privacy}","received_events_url":"https://api.github.com/users/reductionista/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-11T04:03:23Z","updated_at":"2020-01-11T04:42:03Z","author_association":"CONTRIBUTOR","body":"> @reductionista Looking at the 5k buffer size runs, can you pls just double check in the code that we are skipping the normalization if the normalization factor is `1.0` or `NULL` ? I am asking since there is no performance improvement on my small test cluster when I skip normalization.\r\n\r\nI turned on debugging for a small 3-segment cluster and verified that `scalar_array_mult()` is not called for the `NULL/1.0` cases.\r\n\r\nBreaking down the timings of the individual queries, the 4 main stages for the 5k buffer size with NULL normalization are:\r\n```\r\n1-hot encoding :   2.5s\r\nbatching:  422s\r\nredistribution: 1.5s\r\nbytea conversion:  35s\r\n```\r\n\r\nFor 5k buffer size with 256.0 normalization they look like:\r\n```\r\n1-hot encoding + normalization:  44s\r\nbatching:  445s\r\nredistribution:  1.7s\r\nbytea conversion:  0.1s\r\n```\r\n\r\nThe only thing odd I notice here is that the bytea conversion for some reason took much longer when the normalization was skipped.  I think this means there is some time spent casting INTEGER type to REAL, which either has to happen during the normalization or later during the bytea conversion--I don't think we had realized that before, but it seems to make the time savings for this case almost negligible.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573278611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573354560","html_url":"https://github.com/apache/madlib/pull/467#issuecomment-573354560","issue_url":"https://api.github.com/repos/apache/madlib/issues/467","id":573354560,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MzM1NDU2MA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-11T21:08:11Z","updated_at":"2020-01-11T21:08:11Z","author_association":"NONE","body":"@reductionista Thank you for looking into this!  Your comments seem fair to me.  Looks good!\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/573354560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/574935270","html_url":"https://github.com/apache/madlib/pull/470#issuecomment-574935270","issue_url":"https://api.github.com/repos/apache/madlib/issues/470","id":574935270,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NDkzNTI3MA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-16T01:18:51Z","updated_at":"2020-01-16T01:18:51Z","author_association":"NONE","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/574935270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/577398235","html_url":"https://github.com/apache/madlib/pull/473#issuecomment-577398235","issue_url":"https://api.github.com/repos/apache/madlib/issues/473","id":577398235,"node_id":"MDEyOklzc3VlQ29tbWVudDU3NzM5ODIzNQ==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-22T21:38:52Z","updated_at":"2020-01-22T21:38:52Z","author_association":"CONTRIBUTOR","body":"jenkins retest this","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/577398235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/580381809","html_url":"https://github.com/apache/madlib/pull/475#issuecomment-580381809","issue_url":"https://api.github.com/repos/apache/madlib/issues/475","id":580381809,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MDM4MTgwOQ==","user":{"login":"reductionista","id":2644901,"node_id":"MDQ6VXNlcjI2NDQ5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2644901?v=4","gravatar_id":"","url":"https://api.github.com/users/reductionista","html_url":"https://github.com/reductionista","followers_url":"https://api.github.com/users/reductionista/followers","following_url":"https://api.github.com/users/reductionista/following{/other_user}","gists_url":"https://api.github.com/users/reductionista/gists{/gist_id}","starred_url":"https://api.github.com/users/reductionista/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reductionista/subscriptions","organizations_url":"https://api.github.com/users/reductionista/orgs","repos_url":"https://api.github.com/users/reductionista/repos","events_url":"https://api.github.com/users/reductionista/events{/privacy}","received_events_url":"https://api.github.com/users/reductionista/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-30T18:08:32Z","updated_at":"2020-01-30T18:08:32Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/580381809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/581775873","html_url":"https://github.com/apache/madlib/pull/476#issuecomment-581775873","issue_url":"https://api.github.com/repos/apache/madlib/issues/476","id":581775873,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MTc3NTg3Mw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T07:21:28Z","updated_at":"2020-02-04T07:22:20Z","author_association":"NONE","body":"Can the `5` be parameterized based on something defined in PG or GPDB?  What if they change it to something else in the future?  We probably won't remember to go back and change the `5` to the new value","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/581775873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582053186","html_url":"https://github.com/apache/madlib/pull/476#issuecomment-582053186","issue_url":"https://api.github.com/repos/apache/madlib/issues/476","id":582053186,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjA1MzE4Ng==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T18:37:06Z","updated_at":"2020-02-04T18:37:06Z","author_association":"CONTRIBUTOR","body":"> Can the `5` be parameterized based on something defined in PG or GPDB? What if they change it to something else in the future? We probably won't remember to go back and change the `5` to the new value\r\n\r\nThat would be a good idea, but currently in PG/GPDB, this value has always been just hardcoded to 5, there is no guc/param defined for it. So for now just have it as a hardcoded value here too.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582053186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582135553","html_url":"https://github.com/apache/madlib/pull/476#issuecomment-582135553","issue_url":"https://api.github.com/repos/apache/madlib/issues/476","id":582135553,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjEzNTU1Mw==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T21:58:23Z","updated_at":"2020-02-04T21:58:23Z","author_association":"CONTRIBUTOR","body":"jenkins, retest please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582135553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582171748","html_url":"https://github.com/apache/madlib/pull/476#issuecomment-582171748","issue_url":"https://api.github.com/repos/apache/madlib/issues/476","id":582171748,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjE3MTc0OA==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-04T23:47:03Z","updated_at":"2020-02-04T23:47:03Z","author_association":"CONTRIBUTOR","body":"jenkins retest this please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582171748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582196996","html_url":"https://github.com/apache/madlib/pull/476#issuecomment-582196996","issue_url":"https://api.github.com/repos/apache/madlib/issues/476","id":582196996,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjE5Njk5Ng==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T01:22:56Z","updated_at":"2020-02-05T01:22:56Z","author_association":"NONE","body":"Do we have tests that ensure that the gp5 / gp6 selection logic is correct?  re: Orhan's review comment on the `case` type logic","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582196996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582206909","html_url":"https://github.com/apache/madlib/pull/476#issuecomment-582206909","issue_url":"https://api.github.com/repos/apache/madlib/issues/476","id":582206909,"node_id":"MDEyOklzc3VlQ29tbWVudDU4MjIwNjkwOQ==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-05T02:05:47Z","updated_at":"2020-02-05T02:05:47Z","author_association":"CONTRIBUTOR","body":"> Do we have tests that ensure that the gp5 / gp6 selection logic is correct? re: Orhan's review comment on the `case` type logic\r\n\r\nNo, hadn't added the test for it. Just added a new commit with a unit-test.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/582206909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/586151967","html_url":"https://github.com/apache/madlib/pull/479#issuecomment-586151967","issue_url":"https://api.github.com/repos/apache/madlib/issues/479","id":586151967,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjE1MTk2Nw==","user":{"login":"leskin-in","id":19490926,"node_id":"MDQ6VXNlcjE5NDkwOTI2","avatar_url":"https://avatars.githubusercontent.com/u/19490926?v=4","gravatar_id":"","url":"https://api.github.com/users/leskin-in","html_url":"https://github.com/leskin-in","followers_url":"https://api.github.com/users/leskin-in/followers","following_url":"https://api.github.com/users/leskin-in/following{/other_user}","gists_url":"https://api.github.com/users/leskin-in/gists{/gist_id}","starred_url":"https://api.github.com/users/leskin-in/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leskin-in/subscriptions","organizations_url":"https://api.github.com/users/leskin-in/orgs","repos_url":"https://api.github.com/users/leskin-in/repos","events_url":"https://api.github.com/users/leskin-in/events{/privacy}","received_events_url":"https://api.github.com/users/leskin-in/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T08:30:13Z","updated_at":"2020-02-14T08:30:13Z","author_association":"CONTRIBUTOR","body":"The last commit https://github.com/apache/madlib/pull/479/commits/5fd815f2eb47ed15e0764f01c3178b73156d40fe is another way the architecture could be determined. `uname` produces shorter (machine-readable) and probably more consistent output.\r\n\r\nThis change leads to substantial simplification of the `architecture()` CMake macro.\r\n\r\nHowever, this method to determine architecture is fundamentally different from the previously used one: `file` checks the actual Postgres / Greenplum binary, while `uname` outputs the architecture of the machine the build is run on. If the build is run on a machine whose architecture is different from the target one, `architecture()` would return incorrect results.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/586151967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/590616390","html_url":"https://github.com/apache/madlib/pull/480#issuecomment-590616390","issue_url":"https://api.github.com/repos/apache/madlib/issues/480","id":590616390,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDYxNjM5MA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T00:21:55Z","updated_at":"2020-02-25T00:28:37Z","author_association":"NONE","body":"```\r\nDROP TABLE IF EXISTS abalone_summary_exact;\r\nSELECT madlib.summary ( \r\n    'abalone_encoded',  -- source_table\r\n    'abalone_summary_exact',  -- output_table\r\n    NULL,  -- target_cols\r\n    NULL,  -- grouping_cols\r\n    TRUE,  -- get_distinct\r\n    TRUE,  -- get_quartiles\r\n    NULL,  -- quantile_array\r\n    10,    -- how_many_mfv\r\n    FALSE, -- get_estimate\r\n    NULL   -- n_cols_per_run\r\n        );\r\n                   summary                    \r\n----------------------------------------------\r\n (abalone_summary_exact,14,0.600427865982056)\r\n(1 row)\r\n\r\nTime: 684.478 ms\r\n```\r\nLGTM\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/590616390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/593677566","html_url":"https://github.com/apache/madlib/pull/484#issuecomment-593677566","issue_url":"https://api.github.com/repos/apache/madlib/issues/484","id":593677566,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MzY3NzU2Ng==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-02T23:32:00Z","updated_at":"2020-03-02T23:32:00Z","author_association":"CONTRIBUTOR","body":"I would also suggest separating out the two fixes into their own commits with a detailed commit message.\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/593677566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/596027308","html_url":"https://github.com/apache/madlib/pull/486#issuecomment-596027308","issue_url":"https://api.github.com/repos/apache/madlib/issues/486","id":596027308,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NjAyNzMwOA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-07T01:19:02Z","updated_at":"2020-03-07T01:23:52Z","author_association":"NONE","body":"(1)\r\nSSSP - filter out infinite paths\r\n\r\n```\r\nDROP TABLE IF EXISTS vertex, edge;\r\n\r\nCREATE TABLE vertex(\r\n        id INTEGER\r\n        );\r\n\r\nCREATE TABLE edge(\r\n        src INTEGER,\r\n        dest INTEGER,\r\n        weight FLOAT8\r\n        );\r\n\r\nINSERT INTO vertex VALUES\r\n(0),\r\n(1),\r\n(2),\r\n(3),\r\n(4),\r\n(5),\r\n(6),\r\n(7);\r\n\r\nINSERT INTO edge VALUES\r\n(0, 1, 1.0),\r\n(0, 2, 1.0),\r\n(0, 4, 10.0),\r\n(1, 2, 2.0),\r\n(1, 3, 10.0),\r\n(2, 3, 1.0),\r\n(2, 5, 1.0),\r\n(2, 6, 3.0),\r\n(3, 0, 1.0),\r\n(4, 0, -2.0),\r\n(5, 6, 1.0);\r\n```\r\nNote that vertex 7 is disconnect from the rest of the graph ^^^\r\n\r\n```\r\nDROP TABLE IF EXISTS out, out_summary;\r\n\r\nSELECT madlib.graph_sssp(\r\n                         'vertex',      -- Vertex table\r\n                         NULL,          -- Vertex id column (NULL means use default naming)\r\n                         'edge',        -- Edge table\r\n                         NULL,          -- Edge arguments (NULL means use default naming)\r\n                         0,             -- Source vertex for path calculation\r\n                         'out');        -- Output table of shortest paths\r\n\r\nSELECT * FROM out ORDER BY id;\r\n id | weight | parent \r\n----+--------+--------\r\n  0 |      0 |      0\r\n  1 |      1 |      0\r\n  2 |      1 |      0\r\n  3 |      2 |      2\r\n  4 |     10 |      0\r\n  5 |      2 |      2\r\n  6 |      3 |      5\r\n(7 rows)\r\n```\r\nNote that `id=7` has no row ^^^\r\nOK\r\n\r\nNow check path to 7:\r\n```\r\nDROP TABLE IF EXISTS out_path;\r\nSELECT madlib.graph_sssp_get_path('out',7, 'out_path');\r\n\r\nERROR:  plpy.Error: Graph SSSP: Vertex 7 is not present in the SSSP table out (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"graph_sssp_get_path\", line 21, in <module>\r\n    return sssp.graph_sssp_get_path(**globals())\r\n  PL/Python function \"graph_sssp_get_path\", line 507, in graph_sssp_get_path\r\nPL/Python function \"graph_sssp_get_path\"\r\n```\r\nOK\r\n\r\n\r\n(2)\r\nAPSP - filter out infinite paths\r\n\r\n```\r\nDROP TABLE IF EXISTS out, out_summary;\r\n\r\nSELECT madlib.graph_apsp(\r\n                         'vertex',      -- Vertex table\r\n                         NULL,          -- Vertix id column (NULL means use default naming)\r\n                         'edge',        -- Edge table\r\n                         NULL,          -- Edge arguments (NULL means use default naming)\r\n                         'out');        -- Output table of shortest paths\r\n\r\nselect * from out order by src, dest;\r\n src | dest | weight | parent \r\n-----+------+--------+--------\r\n   0 |    0 |      0 |      0\r\n   0 |    1 |      1 |      1\r\n   0 |    2 |      1 |      2\r\n   0 |    3 |      2 |      2\r\n   0 |    4 |     10 |      4\r\n   0 |    5 |      2 |      2\r\n   0 |    6 |      3 |      5\r\n   1 |    0 |      4 |      3\r\n   1 |    1 |      0 |      1\r\n   1 |    2 |      2 |      2\r\n   1 |    3 |      3 |      2\r\n   1 |    4 |     14 |      0\r\n   1 |    5 |      3 |      2\r\n   1 |    6 |      4 |      5\r\n   2 |    0 |      2 |      3\r\n   2 |    1 |      3 |      0\r\n   2 |    2 |      0 |      2\r\n   2 |    3 |      1 |      3\r\n   2 |    4 |     12 |      0\r\n   2 |    5 |      1 |      5\r\n   2 |    6 |      2 |      5\r\n   3 |    0 |      1 |      0\r\n   3 |    1 |      2 |      0\r\n   3 |    2 |      2 |      0\r\n   3 |    3 |      0 |      3\r\n   3 |    4 |     11 |      0\r\n   3 |    5 |      3 |      2\r\n   3 |    6 |      4 |      5\r\n   4 |    0 |     -2 |      0\r\n   4 |    1 |     -1 |      0\r\n   4 |    2 |     -1 |      0\r\n   4 |    3 |      0 |      2\r\n   4 |    4 |      0 |      4\r\n   4 |    5 |      0 |      2\r\n   4 |    6 |      1 |      5\r\n   5 |    5 |      0 |      5\r\n   5 |    6 |      1 |      6\r\n   6 |    6 |      0 |      6\r\n(38 rows)\r\n```\r\nNote that `id=7` has no row ^^^\r\nOK\r\n\r\nNow try to get path to 7:\r\n```\r\nDROP TABLE IF EXISTS out_path;\r\nSELECT madlib.graph_apsp_get_path('out',0,7,'out_path');\r\nERROR:  plpy.Error: Graph APSP: Vertex 0 and/or 7 is not present in the APSP table 7 (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"graph_apsp_get_path\", line 21, in <module>\r\n    return apsp.graph_apsp_get_path(**globals())\r\n  PL/Python function \"graph_apsp_get_path\", line 533, in graph_apsp_get_path\r\nPL/Python function \"graph_apsp_get_path\"\r\n```\r\nOK\r\n\r\n\r\n(3)\r\nMake BFS output match SSSP and APSP\r\n\r\n```\r\nDROP TABLE IF EXISTS vertex, edge;\r\n\r\nCREATE TABLE vertex(\r\n        id INTEGER\r\n        );\r\n\r\nCREATE TABLE edge(\r\n        src INTEGER,\r\n        dest INTEGER\r\n        );\r\n\r\nINSERT INTO vertex VALUES\r\n(0),\r\n(1),\r\n(2),\r\n(3),\r\n(4),\r\n(5),\r\n(6),\r\n(7),\r\n(8),\r\n(9),\r\n(10),\r\n(11);\r\n\r\nINSERT INTO edge VALUES\r\n(0, 5),\r\n(1, 0),\r\n(1, 3),\r\n(2, 6),\r\n(3, 4),\r\n(3, 5),\r\n(4, 2),\r\n(8, 9),\r\n(9, 10),\r\n(9, 11),\r\n(10, 8);\r\n\r\nDROP TABLE IF EXISTS out, out_summary;\r\n\r\nSELECT madlib.graph_bfs(\r\n                         'vertex',      -- Vertex table\r\n                         NULL,          -- Vertix id column (NULL means use default naming)\r\n                         'edge',        -- Edge table\r\n                         NULL,          -- Edge arguments (NULL means use default naming)\r\n                         3,             -- Source vertex for BFS\r\n                         'out');        -- Output table of nodes reachable from source_vertex\r\n                                        -- Default values used for the other arguments\r\n\r\nSELECT * FROM out ORDER BY dist,id;\r\n id | dist | parent \r\n----+------+--------\r\n  3 |    0 |      3\r\n  1 |    1 |      3\r\n  4 |    1 |      3\r\n  5 |    1 |      3\r\n  0 |    2 |      1\r\n  2 |    2 |      4\r\n  6 |    3 |      2\r\n(7 rows)\r\n```\r\nNote BFS now has output similar to SSSP & APSP with the \"self\" row included with `dist=0` ^^^\r\nOK\r\n\r\nThis PR LGTM\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/596027308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/597350277","html_url":"https://github.com/apache/madlib/pull/487#issuecomment-597350277","issue_url":"https://api.github.com/repos/apache/madlib/issues/487","id":597350277,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzM1MDI3Nw==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-10T22:23:46Z","updated_at":"2020-03-10T22:23:46Z","author_association":"CONTRIBUTOR","body":"@orhankislal  LGTM\r\nAre you going to create another PR for making the same changes to the graph modules or will you add another commit to this PR ?","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/597350277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/597350416","html_url":"https://github.com/apache/madlib/pull/487#issuecomment-597350416","issue_url":"https://api.github.com/repos/apache/madlib/issues/487","id":597350416,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzM1MDQxNg==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-10T22:24:13Z","updated_at":"2020-03-10T22:24:13Z","author_association":"CONTRIBUTOR","body":"Also the commit is missing a JIRA and also a brief description","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/597350416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/597355136","html_url":"https://github.com/apache/madlib/pull/487#issuecomment-597355136","issue_url":"https://api.github.com/repos/apache/madlib/issues/487","id":597355136,"node_id":"MDEyOklzc3VlQ29tbWVudDU5NzM1NTEzNg==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-10T22:39:42Z","updated_at":"2020-03-10T22:39:42Z","author_association":"CONTRIBUTOR","body":"There is a graph-related PR that might create a conflict if I make changes here. I'll make it a part of that one.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/597355136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/598414569","html_url":"https://github.com/apache/madlib/pull/489#issuecomment-598414569","issue_url":"https://api.github.com/repos/apache/madlib/issues/489","id":598414569,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODQxNDU2OQ==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-12T20:56:28Z","updated_at":"2020-03-12T20:56:28Z","author_association":"CONTRIBUTOR","body":"The PR seems fine but I have one question. I tried running dev check on GPDB 6.4 (On OS X) and it didn't fail. Since this version of greenplum doesn't have the guc yet, isn't it supposed to fail at some point?","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/598414569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/598473469","html_url":"https://github.com/apache/madlib/pull/489#issuecomment-598473469","issue_url":"https://api.github.com/repos/apache/madlib/issues/489","id":598473469,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODQ3MzQ2OQ==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-12T23:17:00Z","updated_at":"2020-03-12T23:17:00Z","author_association":"CONTRIBUTOR","body":"> The PR seems fine but I have one question. I tried running dev check on GPDB 6.4 (On OS X) and it didn't fail. Since this version of greenplum doesn't have the guc yet, isn't it supposed to fail at some point?\r\n\r\ndev-check, doesn't fail since we do not pass in large models that will have large weights(~600MB). Didn't add those tests to avoid slowing down the dev-check.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/598473469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/598479214","html_url":"https://github.com/apache/madlib/pull/489#issuecomment-598479214","issue_url":"https://api.github.com/repos/apache/madlib/issues/489","id":598479214,"node_id":"MDEyOklzc3VlQ29tbWVudDU5ODQ3OTIxNA==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-12T23:40:57Z","updated_at":"2020-03-12T23:40:57Z","author_association":"CONTRIBUTOR","body":"> > The PR seems fine but I have one question. I tried running dev check on GPDB 6.4 (On OS X) and it didn't fail. Since this version of greenplum doesn't have the guc yet, isn't it supposed to fail at some point?\r\n> \r\n> dev-check, doesn't fail since we do not pass in large models that will have large weights(~600MB). Didn't add those tests to avoid slowing down the dev-check.\r\n\r\nOK that makes sense. I just wanted to clarify that in the absence of the guc some models can still be built.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/598479214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/607477196","html_url":"https://github.com/apache/madlib/pull/473#issuecomment-607477196","issue_url":"https://api.github.com/repos/apache/madlib/issues/473","id":607477196,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzQ3NzE5Ng==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T20:36:59Z","updated_at":"2020-04-01T20:36:59Z","author_association":"CONTRIBUTOR","body":"> I tried the upgrade on my MacBookPro, from 1.16 to 1.17.0 and it threw an exception:\r\n> \r\n> ```\r\n> ERROR:  column p.prokind does not exist\r\n> LINE 12:                         p.prokind = 'a' AS proisagg\r\n>                                  ^\r\n> HINT:  Perhaps you meant to reference the column \"p.probin\".\r\n> : ERROR : False\r\n> ```\r\n> \r\n> This is with postgres 10.5:\r\n> PostgreSQL 10.5 on x86_64-apple-darwin17.7.0, compiled by Apple LLVM version 10.0.0 (clang-1000.11.45.2), 64-bit\r\n\r\nThe prokind column does not exist in PG10 (it has `proisagg` and `proiswindow` for the same purposes). Since we only support 2 versions of postgres, we dropped PG10 and added PG12 with this release. Compiling etc. should still work for PG10 but the upgrade process does use this particular column.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/607477196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/607572592","html_url":"https://github.com/apache/madlib/pull/473#issuecomment-607572592","issue_url":"https://api.github.com/repos/apache/madlib/issues/473","id":607572592,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzU3MjU5Mg==","user":{"login":"reductionista","id":2644901,"node_id":"MDQ6VXNlcjI2NDQ5MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2644901?v=4","gravatar_id":"","url":"https://api.github.com/users/reductionista","html_url":"https://github.com/reductionista","followers_url":"https://api.github.com/users/reductionista/followers","following_url":"https://api.github.com/users/reductionista/following{/other_user}","gists_url":"https://api.github.com/users/reductionista/gists{/gist_id}","starred_url":"https://api.github.com/users/reductionista/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reductionista/subscriptions","organizations_url":"https://api.github.com/users/reductionista/orgs","repos_url":"https://api.github.com/users/reductionista/repos","events_url":"https://api.github.com/users/reductionista/events{/privacy}","received_events_url":"https://api.github.com/users/reductionista/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T01:39:39Z","updated_at":"2020-04-02T01:39:39Z","author_association":"CONTRIBUTOR","body":"Upgrade succeeded on my MacBookPro with gpdb5\r\n```\r\nPostgreSQL 8.3.23 (Greenplum Database 5.23.0+dev.10.g50015fed64 build dev) on x86_64-apple-darwin18.7.0, compiled by GCC Apple LLVM version 10.0.1 (clang-1001.0.46.4), 64-bit compiled on Nov  5 2019 08:49:26 (with assert checking)\r\n```\r\nLGTM!","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/607572592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/613679547","html_url":"https://github.com/apache/madlib/pull/494#issuecomment-613679547","issue_url":"https://api.github.com/repos/apache/madlib/issues/494","id":613679547,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzY3OTU0Nw==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T21:01:48Z","updated_at":"2020-04-14T21:01:48Z","author_association":"CONTRIBUTOR","body":"jenkins retest this please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/613679547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/615439244","html_url":"https://github.com/apache/madlib/pull/494#issuecomment-615439244","issue_url":"https://api.github.com/repos/apache/madlib/issues/494","id":615439244,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNTQzOTI0NA==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-17T20:02:33Z","updated_at":"2020-04-17T20:02:33Z","author_association":"CONTRIBUTOR","body":"These changes LGTM.\r\n\r\nBut as soon as we push this commit, the madlib_keras.sql_in and madlib_keras_fit_multiple_model.sql_in dev check tests will start failing because they hardcode the version no. We should instead test that the madlib_version column is not null instead of a specific version.  \r\nSee https://github.com/apache/madlib/commit/186a28b6380bd44a87f5240ff9aabd836e023594 for more details","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/615439244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/615439988","html_url":"https://github.com/apache/madlib/pull/493#issuecomment-615439988","issue_url":"https://api.github.com/repos/apache/madlib/issues/493","id":615439988,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNTQzOTk4OA==","user":{"login":"kaknikhil","id":11729207,"node_id":"MDQ6VXNlcjExNzI5MjA3","avatar_url":"https://avatars.githubusercontent.com/u/11729207?v=4","gravatar_id":"","url":"https://api.github.com/users/kaknikhil","html_url":"https://github.com/kaknikhil","followers_url":"https://api.github.com/users/kaknikhil/followers","following_url":"https://api.github.com/users/kaknikhil/following{/other_user}","gists_url":"https://api.github.com/users/kaknikhil/gists{/gist_id}","starred_url":"https://api.github.com/users/kaknikhil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaknikhil/subscriptions","organizations_url":"https://api.github.com/users/kaknikhil/orgs","repos_url":"https://api.github.com/users/kaknikhil/repos","events_url":"https://api.github.com/users/kaknikhil/events{/privacy}","received_events_url":"https://api.github.com/users/kaknikhil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-17T20:04:35Z","updated_at":"2020-04-17T20:04:35Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/615439988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/616699134","html_url":"https://github.com/apache/madlib/pull/494#issuecomment-616699134","issue_url":"https://api.github.com/repos/apache/madlib/issues/494","id":616699134,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjY5OTEzNA==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-20T17:24:44Z","updated_at":"2020-04-20T17:24:44Z","author_association":"CONTRIBUTOR","body":"> These changes LGTM.\r\n> \r\n> But as soon as we push this commit, the madlib_keras.sql_in and madlib_keras_fit_multiple_model.sql_in dev check tests will start failing because they hardcode the version no. We should instead test that the madlib_version column is not null instead of a specific version.\r\n> See [186a28b](https://github.com/apache/madlib/commit/186a28b6380bd44a87f5240ff9aabd836e023594) for more details\r\n\r\nThose are documentation strings, tests do check for not null. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/616699134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/623785188","html_url":"https://github.com/apache/madlib/pull/496#issuecomment-623785188","issue_url":"https://api.github.com/repos/apache/madlib/issues/496","id":623785188,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMzc4NTE4OA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-05T00:56:52Z","updated_at":"2020-05-05T00:56:52Z","author_association":"NONE","body":"(1)\r\n```\r\nmadlib=# select madlib.dbscan('usage')                                                                                        ;\r\n                                    dbscan                                     \r\n-------------------------------------------------------------------------------\r\n                                                                               \r\n -----------------------------------------------------------------------       \r\n                             USAGE                                             \r\n -----------------------------------------------------------------------       \r\n SELECT madlib.dbscan(                                                         \r\n     source_table,       -- Name of the training data table                    \r\n     output_table,       -- Name of the output table                           \r\n     id_column,          -- Name of id column in source_table                  \r\n     expr_point,         -- Column name or expression for data points          \r\n     eps,                -- The minimum radius of a cluster                    \r\n     min_samples,        -- The minimum size of a cluster                      \r\n     metric              -- The name of the function to use to calculate the   \r\n                         -- distance                                           \r\n     algorithm           -- The algorithm to use for dbscan.                   \r\n     ); \r\n```\r\nMissing comma after metric\r\n\r\n\r\n(2)\r\n```\r\nmadlib=# select madlib.dbscan_predict('usage')                                                                                ;\r\nERROR:  function madlib.dbscan_predict(unknown) does not exist\r\nLINE 1: select madlib.dbscan_predict('usage')\r\n               ^\r\nHINT:  No function matches the given name and argument types. You might need to add explicit type casts.\r\n```  \r\nThis usage function seems to be missing\r\n\r\n\r\n(3) Suggest make following params optional:\r\n```\r\nmin_samples, default: 5\r\nmetric, default: 'squared_dist_norm2'\r\nalgorithm, default: 'brute_force'\r\n```\r\n\r\n\r\n(4) Can you give me an example of how you would do batch prediction?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/623785188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/624215893","html_url":"https://github.com/apache/madlib/pull/496#issuecomment-624215893","issue_url":"https://api.github.com/repos/apache/madlib/issues/496","id":624215893,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDIxNTg5Mw==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-05T18:04:01Z","updated_at":"2020-05-05T18:04:01Z","author_association":"CONTRIBUTOR","body":"@fmcquillan99 Thanks for the comments. Here is an example on how to run the prediction on a table:\r\n`select id_in, madlib.dbscan_predict('out1',data) from dbscan_train_data ;`","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/624215893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/624228952","html_url":"https://github.com/apache/madlib/pull/496#issuecomment-624228952","issue_url":"https://api.github.com/repos/apache/madlib/issues/496","id":624228952,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNDIyODk1Mg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-05T18:28:53Z","updated_at":"2020-05-05T18:48:01Z","author_association":"NONE","body":"(5)\r\nTo be consistent with knn, can we please make the algorithm `brute_force` as the base.  It seems you can do `brute` but `brute_force` does not work:\r\n```\r\nSELECT madlib.dbscan( \r\n\t\t\t\t'dbscan_train_data',\t-- source table\r\n\t\t\t\t'dbscan_result',\t\t-- output table\r\n\t\t\t\t'pid',\t\t\t\t\t-- point id column\r\n\t\t\t\t'pointsxx',\t\t\t\t-- data point\r\n\t\t\t\t 1.75,\t\t\t\t\t-- epsilon\r\n\t\t\t\t 4,\t\t\t\t\t\t-- min samples\r\n\t\t\t\t 'dist_norm2',\t-- metric\r\n\t\t\t\t'brute_force');\t\t\t-- algorithm\r\n\r\nERROR:  plpy.Error: dbscan Error: algorithm has to be one of the following: brute, kd-tree (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"dbscan\", line 21, in <module>\r\n    return dbscan.dbscan(**globals())\r\n  PL/Python function \"dbscan\", line 38, in dbscan\r\n  PL/Python function \"dbscan\", line 184, in _validate_dbscan\r\n  PL/Python function \"dbscan\", line 123, in _assert\r\nPL/Python function \"dbscan\"\r\n```\r\n\r\n\r\n(6) \r\nIt seems the column header `points` does not work, maybe in conflicts with an internal name?\r\nI think it could be a common col name so we should fix this.\r\n```\r\nSELECT madlib.dbscan( \r\n\t\t\t\t'dbscan_train_data',\t-- source table\r\n\t\t\t\t'dbscan_result',\t\t-- output table\r\n\t\t\t\t'pid',\t\t\t\t\t-- point id column\r\n\t\t\t\t'points',\t\t\t\t-- data point\r\n\t\t\t\t 1.75,\t\t\t\t\t-- epsilon\r\n\t\t\t\t 4,\t\t\t\t\t\t-- min samples\r\n\t\t\t\t 'dist_norm2',\t-- metric\r\n\t\t\t\t'brute');\t\t\t-- algorithm\r\n\r\nERROR:  plpy.SPIError: column reference \"points\" is ambiguous\r\nLINE 3:             SET points = points\r\n                                 ^\r\nQUERY:  \r\n            UPDATE dbscan_result AS t1\r\n            SET points = points\r\n            FROM dbscan_train_data AS t2\r\n            WHERE t1.pid = t2.pid\r\n        \r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"dbscan\", line 21, in <module>\r\n    return dbscan.dbscan(**globals())\r\n  PL/Python function \"dbscan\", line 109, in dbscan\r\nPL/Python function \"dbscan\"\r\n```\r\n\r\n(7)\r\nPlease check the logic with the following example from\r\nhttps://dbs.ifi.uni-heidelberg.de/files/Team/eschubert/lectures/KDDClusterAnalysis17-screen.pdf#page=215\r\n\r\nI think there should only be 3 clusters created\r\n\r\n```\r\nDROP TABLE IF EXISTS dbscan_train_data;\r\nCREATE TABLE dbscan_train_data (pid int, pointsxx double precision[]);\r\nINSERT INTO dbscan_train_data VALUES\r\n(1,  '{1, 1}'),\r\n(2,  '{2, 1}'),\r\n(3,  '{1, 2}'),\r\n(4,  '{2, 2}'),\r\n(5,  '{3, 5}'),\r\n(6,  '{3, 9}'),\r\n(7,  '{3, 10}'),\r\n(8,  '{4, 10}'),\r\n(9,  '{4, 11}'),\r\n(10,  '{5, 10}'),\r\n(11,  '{7, 10}'),\r\n(12,  '{10, 9}'),\r\n(13,  '{10, 6}'),\r\n(14,  '{9, 5}'),\r\n(15,  '{10, 5}'),\r\n(16,  '{11, 5}'),\r\n(17,  '{9, 4}'),\r\n(18,  '{10, 4}'),\r\n(19,  '{11, 4}'),\r\n(20,  '{10, 3}');\r\n\r\nDROP TABLE IF EXISTS dbscan_result;\r\nSELECT madlib.dbscan( \r\n\t\t\t\t'dbscan_train_data',\t-- source table\r\n\t\t\t\t'dbscan_result',\t\t-- output table\r\n\t\t\t\t'pid',\t\t\t\t\t-- point id column\r\n\t\t\t\t'pointsxx',\t\t\t\t-- data point\r\n\t\t\t\t 1.75,\t\t\t\t\t-- epsilon\r\n\t\t\t\t 4,\t\t\t\t\t\t-- min samples\r\n\t\t\t\t'dist_norm2',\t        -- metric\r\n\t\t\t\t'brute');     \t\t\t-- algorithm\r\n\r\nSELECT * FROM dbscan_result ORDER BY pid;\r\n\r\n pid | cluster_id | is_core_point | points \r\n-----+------------+---------------+--------\r\n   1 |          0 | t             | {1,1}\r\n   2 |          0 | t             | {2,1}\r\n   3 |          0 | t             | {1,2}\r\n   4 |          0 | t             | {2,2}\r\n   6 |          1 | f             | {3,9}\r\n   7 |          1 | t             | {3,10}\r\n   8 |          1 | t             | {4,10}\r\n   9 |          1 | t             | {4,11}\r\n  10 |          1 | f             | {5,10}\r\n  13 |          2 | t             | {10,6}\r\n  14 |          2 | t             | {9,5}\r\n  15 |          2 | t             | {10,5}\r\n  16 |          2 | t             | {11,5}\r\n  17 |          3 | t             | {9,4}\r\n  18 |          3 | t             | {10,4}\r\n  19 |          4 | t             | {11,4}\r\n  20 |          5 | t             | {10,3}\r\n(17 rows)\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/624228952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/625452328","html_url":"https://github.com/apache/madlib/pull/496#issuecomment-625452328","issue_url":"https://api.github.com/repos/apache/madlib/issues/496","id":625452328,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTQ1MjMyOA==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-07T19:29:51Z","updated_at":"2020-05-07T19:29:51Z","author_association":"CONTRIBUTOR","body":"jenkins retest this","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/625452328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/628849217","html_url":"https://github.com/apache/madlib/pull/496#issuecomment-628849217","issue_url":"https://api.github.com/repos/apache/madlib/issues/496","id":628849217,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODg0OTIxNw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-14T19:43:41Z","updated_at":"2020-05-14T19:43:41Z","author_association":"NONE","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/628849217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/628962362","html_url":"https://github.com/apache/madlib/pull/497#issuecomment-628962362","issue_url":"https://api.github.com/repos/apache/madlib/issues/497","id":628962362,"node_id":"MDEyOklzc3VlQ29tbWVudDYyODk2MjM2Mg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-15T00:54:53Z","updated_at":"2020-05-15T00:54:53Z","author_association":"NONE","body":"This is still a WIP.  Waiting for the tree method to be done to complete.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/628962362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631001436","html_url":"https://github.com/apache/madlib/pull/497#issuecomment-631001436","issue_url":"https://api.github.com/repos/apache/madlib/issues/497","id":631001436,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTAwMTQzNg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-19T18:30:28Z","updated_at":"2020-05-19T18:30:28Z","author_association":"NONE","body":"You can merge this PR now if it easier to do so, since you will be working on this file in parallel.  @orhankislal ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631001436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631510579","html_url":"https://github.com/apache/madlib/pull/498#issuecomment-631510579","issue_url":"https://api.github.com/repos/apache/madlib/issues/498","id":631510579,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTUxMDU3OQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T14:30:35Z","updated_at":"2020-05-20T14:30:35Z","author_association":"NONE","body":"Preliminary comments:\r\n\r\n(1)\r\nin addition to \r\n```\r\ndelete_custom_function(\r\n    object_table,\r\n    id\r\n)\r\n```\r\nI suggest we also support\r\n```\r\ndelete_custom_function(\r\n    object_table,\r\n    name\r\n)\r\n```\r\nsince `name` is unique and is the way that users will pass object to Keras, so I suggest we allow to delete by `name` in addition to `id`\r\n\r\n\r\n(2)\r\nduplicate object name gives an error as it should, but it is not a user friendly error: \r\n```\r\nInternalError_: AttributeError: 'module' object has no attribute 'UniqueViolation' (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"load_custom_function\", line 21, in <module>\r\n    madlib_keras_custom_function.load_custom_function(**globals())\r\n  PL/Python function \"load_custom_function\", line 42, in wrapper\r\n  PL/Python function \"load_custom_function\", line 93, in load_custom_function\r\nPL/Python function \"load_custom_function\"\r\n```\r\nCould we trap this error and give a friendlier error message?\r\n\r\n\r\n(3)\r\nselection on id not contiguous:\r\n```\r\nSELECT id, name FROM test_custom_function_table ORDER BY id;\r\n id |  name   \r\n----+---------\r\n  1 | sum_fn\r\n  3 | sum_fn1\r\n  5 | sum_fn2\r\n  ```\r\n  Is there a reason why this is not 1,2,3?  It is contiguous with model ids for model architecture table so I would expect the same thing here, plus probably what the user would expect.\r\n\r\n\r\n(4)\r\nminor spelling error\r\n\r\n```\r\nselect madlib.delete_custom_function( 'test_custom_function_table', 1);\r\n\r\nERROR:  plpy.Error: Keras Custom Funtion: Object id 1 not found (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"delete_custom_function\", line 21, in <module>\r\n    madlib_keras_custom_function.delete_custom_function(**globals())\r\n  PL/Python function \"delete_custom_function\", line 42, in wrapper\r\n  PL/Python function \"delete_custom_function\", line 121, in delete_custom_function\r\nPL/Python function \"delete_custom_function\"\r\n```\r\nmiss spelled \"Funtion\"\r\n\r\n(5)\r\nWhen we delete the last id in the table, the table gets deleted:\r\n```\r\nselect madlib.delete_custom_function( 'test_custom_function_table', 1);\r\n\r\nERROR:  plpy.Error: Keras Custom Funtion error: Input table 'test_custom_function_table' does not exist. (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"delete_custom_function\", line 21, in <module>\r\n    madlib_keras_custom_function.delete_custom_function(**globals())\r\n  PL/Python function \"delete_custom_function\", line 42, in wrapper\r\n  PL/Python function \"delete_custom_function\", line 104, in delete_custom_function\r\n  PL/Python function \"delete_custom_function\", line 619, in input_tbl_valid\r\nPL/Python function \"delete_custom_function\"\r\n```\r\nIs this expected behavior?  i.e., do we do this with model arch table?  Maybe it's OK, not sure.  The other option is to not delete the table, but leave it empty.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631510579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631706018","html_url":"https://github.com/apache/madlib/pull/498#issuecomment-631706018","issue_url":"https://api.github.com/repos/apache/madlib/issues/498","id":631706018,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTcwNjAxOA==","user":{"login":"khannaekta","id":15749573,"node_id":"MDQ6VXNlcjE1NzQ5NTcz","avatar_url":"https://avatars.githubusercontent.com/u/15749573?v=4","gravatar_id":"","url":"https://api.github.com/users/khannaekta","html_url":"https://github.com/khannaekta","followers_url":"https://api.github.com/users/khannaekta/followers","following_url":"https://api.github.com/users/khannaekta/following{/other_user}","gists_url":"https://api.github.com/users/khannaekta/gists{/gist_id}","starred_url":"https://api.github.com/users/khannaekta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/khannaekta/subscriptions","organizations_url":"https://api.github.com/users/khannaekta/orgs","repos_url":"https://api.github.com/users/khannaekta/repos","events_url":"https://api.github.com/users/khannaekta/events{/privacy}","received_events_url":"https://api.github.com/users/khannaekta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T20:24:07Z","updated_at":"2020-05-20T20:24:07Z","author_association":"CONTRIBUTOR","body":"For (1), (4): will update code for the changes\r\n\r\nFor (3), (5): These are expected behaviors aligned with model arch table load/delete helper functions. \r\n\r\n- For (3), since `id` is a sequence, if delete is called between loads, it will skip the deleted id\r\n- For (5), Kept it consistent with model arch table delete function, we can keep the table empty too, but it makes more sense to delete it as it would anyways be created on calling load with the same tablename.\r\nBelow is the flow for load/delete model arch table as well as custom function table:\r\n```\r\nload()       -> Creates table id =1\r\nload()       -> insert into table id =2\r\ndelete(id=2) -> delete from table id =2 \r\nload()       -> insert into table id =3\r\ndelete(id=3) -> delete from table id =3 \r\ndelete(id=1) -> delete from table id =1 and drop table\r\n```\r\n\r\nFor (2): When I try to load an object with same function name(on GPDB6), it fails with the following error:\r\nI ran the following (2 times):\r\n```\r\nFunction 'sum_fn1' already exists in new_tab\r\n```\r\nIt's unable to catch that exception with GPDB5. They are probably different, but I will look into it a little more\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631706018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631733108","html_url":"https://github.com/apache/madlib/pull/498#issuecomment-631733108","issue_url":"https://api.github.com/repos/apache/madlib/issues/498","id":631733108,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTczMzEwOA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-20T21:20:20Z","updated_at":"2020-05-20T21:20:20Z","author_association":"NONE","body":"Ok, thanks for the comments @khannaekta .  I agree with your assessment:\r\n\r\nFix (1), (4)\r\nLeave (3), (5) as is, OK\r\nFigure out what's up with (2) on GPDB5","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631733108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631799555","html_url":"https://github.com/apache/madlib/pull/498#issuecomment-631799555","issue_url":"https://api.github.com/repos/apache/madlib/issues/498","id":631799555,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTc5OTU1NQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-21T00:00:06Z","updated_at":"2020-05-21T00:00:30Z","author_association":"NONE","body":"(1)\r\nDelete by name\r\n\r\n```\r\nSELECT madlib.delete_custom_function( 'test_custom_function_table', 'mult_fn');\r\nINFO:  Keras Custom Function: Object id None has been deleted from test_custom_function_table.\r\nCONTEXT:  PL/Python function \"delete_custom_function\"\r\n delete_custom_function \r\n------------------------\r\n```\r\nOK\r\n\r\n\r\n(2)\r\nbetter error message:\r\n\r\n```\r\nInternalError: (psycopg2.errors.InternalError_) plpy.Error: Function 'sum_fn' already exists in test_custom_function_table (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"load_custom_function\", line 21, in <module>\r\n    madlib_keras_custom_function.load_custom_function(**globals())\r\n  PL/Python function \"load_custom_function\", line 42, in wrapper\r\n  PL/Python function \"load_custom_function\", line 98, in load_custom_function\r\nPL/Python function \"load_custom_function\"\r\n\r\n[SQL: SELECT madlib.load_custom_function('test_custom_function_table', custom_function_object_sum(), 'sum_fn', \r\n                                   'returns sum');]\r\n(Background on this error at: http://sqlalche.me/e/2j85)\r\n```\r\nOK\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/631799555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/634352089","html_url":"https://github.com/apache/madlib/pull/501#issuecomment-634352089","issue_url":"https://api.github.com/repos/apache/madlib/issues/501","id":634352089,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDM1MjA4OQ==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T00:30:07Z","updated_at":"2020-05-27T00:30:07Z","author_association":"NONE","body":"(1) \r\nshould throw error if specify custom functions but do not specify an object table\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']$$,\r\n                                              $$loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ]\r\n                                         );\r\n\r\n load_model_selection_table \r\n----------------------------\r\n\r\n(1 row)\r\n```\r\nproduces\r\n```\r\nselect * from mst_table;\r\n\r\n mst_key | model_id |                                 compile_params                                  |      fit_params       \r\n---------+----------+---------------------------------------------------------------------------------+-----------------------\r\n       3 |        1 | loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']                    | batch_size=4,epochs=1\r\n       4 |        1 | loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']                    | batch_size=8,epochs=1\r\n       7 |        2 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n       8 |        2 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n      11 |        2 | loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']                       | batch_size=4,epochs=1\r\n      12 |        2 | loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']                       | batch_size=8,epochs=1\r\n       1 |        1 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n       2 |        1 | loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n       5 |        1 | loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']                       | batch_size=4,epochs=1\r\n       6 |        1 | loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']                       | batch_size=8,epochs=1\r\n       9 |        2 | loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']                    | batch_size=4,epochs=1\r\n      10 |        2 | loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']                    | batch_size=8,epochs=1\r\n(12 rows)\r\n```\r\nand\r\n```\r\nselect * from mst_table_summary;\r\n\r\n  model_arch_table  | object_table \r\n--------------------+--------------\r\n model_arch_library | \r\n(1 row)\r\n```\r\n\r\nMaybe we should add a test for this.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/634352089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/634904316","html_url":"https://github.com/apache/madlib/pull/501#issuecomment-634904316","issue_url":"https://api.github.com/repos/apache/madlib/issues/501","id":634904316,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDkwNDMxNg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T19:51:33Z","updated_at":"2020-05-27T19:52:31Z","author_association":"NONE","body":"(1)\r\nno custom functions but specify object table\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.1)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy', optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ],\r\n                                          'test_custom_function_table'\r\n                                         );\r\n                                  \r\nSELECT * FROM mst_table_summary;\r\n\r\n  model_arch_table  |        object_table        \r\n--------------------+----------------------------\r\n model_arch_library | test_custom_function_table\r\n(1 row)\r\n```\r\nOK\r\n\r\n\r\n(2)\r\ncustom functions and right object table\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']$$,\r\n                                              $$loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ],\r\n                                          'test_custom_function_table'\r\n                                         );\r\n\r\nSELECT * FROM mst_table_summary;\r\n\r\n  model_arch_table  |        object_table        \r\n--------------------+----------------------------\r\n model_arch_library | test_custom_function_table\r\n(1 row)\r\n```\r\nOK\r\n\r\n\r\n(3)\r\ncustom functions and wrong object table\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']$$,\r\n                                              $$loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ],\r\n                                          'test_custom_function_table111'\r\n                                         );\r\n\r\nERROR:  plpy.Error: load_model_selection_table error: Input table 'test_custom_function_table111' does not exist. (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"load_model_selection_table\", line 21, in <module>\r\n    mst_loader = madlib_keras_model_selection.MstLoader(**globals())\r\n  PL/Python function \"load_model_selection_table\", line 42, in wrapper\r\n  PL/Python function \"load_model_selection_table\", line 74, in __init__\r\n  PL/Python function \"load_model_selection_table\", line 459, in __init__\r\n  PL/Python function \"load_model_selection_table\", line 462, in _validate_input_args\r\n  PL/Python function \"load_model_selection_table\", line 535, in _validate_input_output_tables\r\n  PL/Python function \"load_model_selection_table\", line 619, in input_tbl_valid\r\nPL/Python function \"load_model_selection_table\"\r\n```\r\nOK\r\n\r\n\r\n(4)\r\ncustom functions specified but not in object table\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss=sum_fn111,optimizer='Adam(lr=0.1)',metrics=['accuracy']$$,\r\n                                              $$loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ],\r\n                                          'test_custom_function_table'\r\n                                         );\r\n\r\nERROR:  plpy.Error: Compile param check failed for: loss=sum_fn111,optimizer='Adam(lr=0.1)',metrics=['accuracy'] (plpython.c:5038)\r\nDETAIL:  \r\n\r\n                    custom function 'sum_fn111' used in compile params not defined in object table 'test_custom_function_table'!\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"load_model_selection_table\", line 21, in <module>\r\n    mst_loader = madlib_keras_model_selection.MstLoader(**globals())\r\n  PL/Python function \"load_model_selection_table\", line 42, in wrapper\r\n  PL/Python function \"load_model_selection_table\", line 74, in __init__\r\n  PL/Python function \"load_model_selection_table\", line 459, in __init__\r\n  PL/Python function \"load_model_selection_table\", line 464, in _validate_input_args\r\n  PL/Python function \"load_model_selection_table\", line 530, in _validate_compile_and_fit_params\r\nPL/Python function \"load_model_selection_table\"\r\n```\r\nOK\r\n\r\n\r\n(5) \r\nshould throw error if specify custom functions but do not specify an object table\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy']$$,\r\n                                              $$loss=mult_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ]\r\n                                         );\r\n\r\n ERROR:  plpy.Error: Compile param check failed for: loss=sum_fn,optimizer='Adam(lr=0.1)',metrics=['accuracy'] (plpython.c:5038)\r\nDETAIL:  \r\n\r\n                    custom function 'sum_fn' used in compile params but input object table missing!\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"load_model_selection_table\", line 21, in <module>\r\n    mst_loader = madlib_keras_model_selection.MstLoader(**globals())\r\n  PL/Python function \"load_model_selection_table\", line 42, in wrapper\r\n  PL/Python function \"load_model_selection_table\", line 74, in __init__\r\n  PL/Python function \"load_model_selection_table\", line 459, in __init__\r\n  PL/Python function \"load_model_selection_table\", line 464, in _validate_input_args\r\n  PL/Python function \"load_model_selection_table\", line 530, in _validate_compile_and_fit_params\r\nPL/Python function \"load_model_selection_table\"\r\n\r\n```\r\nOK (This is the one that did not work before but seems fine now.)\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/634904316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/658984156","html_url":"https://github.com/apache/madlib/pull/504#issuecomment-658984156","issue_url":"https://api.github.com/repos/apache/madlib/issues/504","id":658984156,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODk4NDE1Ng==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T20:12:30Z","updated_at":"2020-07-15T20:12:30Z","author_association":"CONTRIBUTOR","body":"jenkins retest please","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/658984156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/663917176","html_url":"https://github.com/apache/madlib/pull/507#issuecomment-663917176","issue_url":"https://api.github.com/repos/apache/madlib/issues/507","id":663917176,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzkxNzE3Ng==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-25T23:40:01Z","updated_at":"2020-07-26T01:33:11Z","author_association":"NONE","body":"I am still seeing failures for HITS, pagerank and wcc.  Pls see attached notebooks.\r\n[bigint-notebooks.zip](https://github.com/apache/madlib/files/4976910/bigint-notebooks.zip)\r\n\r\nAlso user docs still need to be updated to say `INTEGER or BIGINT` etc. in each module.  I can add a commit with the user doc changes to this PR on Mon prob.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/663917176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/664703769","html_url":"https://github.com/apache/madlib/pull/507#issuecomment-664703769","issue_url":"https://api.github.com/repos/apache/madlib/issues/507","id":664703769,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDcwMzc2OQ==","user":{"login":"orhankislal","id":9490520,"node_id":"MDQ6VXNlcjk0OTA1MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9490520?v=4","gravatar_id":"","url":"https://api.github.com/users/orhankislal","html_url":"https://github.com/orhankislal","followers_url":"https://api.github.com/users/orhankislal/followers","following_url":"https://api.github.com/users/orhankislal/following{/other_user}","gists_url":"https://api.github.com/users/orhankislal/gists{/gist_id}","starred_url":"https://api.github.com/users/orhankislal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/orhankislal/subscriptions","organizations_url":"https://api.github.com/users/orhankislal/orgs","repos_url":"https://api.github.com/users/orhankislal/repos","events_url":"https://api.github.com/users/orhankislal/events{/privacy}","received_events_url":"https://api.github.com/users/orhankislal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-28T00:17:46Z","updated_at":"2020-07-28T00:17:46Z","author_association":"CONTRIBUTOR","body":"@fmcquillan99 I pushed a new commit to address these issues. As long as you use the regular SQL BIGINT notation (no trailing L: `100000000014L`, no arithmetic inside the string: `'0+100000000000'`) they all should work now. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/664703769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/664719122","html_url":"https://github.com/apache/madlib/pull/507#issuecomment-664719122","issue_url":"https://api.github.com/repos/apache/madlib/issues/507","id":664719122,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDcxOTEyMg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-28T01:13:47Z","updated_at":"2020-07-28T01:13:47Z","author_association":"NONE","body":"Yes all seem to work now with BIGINT.\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/664719122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/665787058","html_url":"https://github.com/apache/madlib/pull/507#issuecomment-665787058","issue_url":"https://api.github.com/repos/apache/madlib/issues/507","id":665787058,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTc4NzA1OA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-29T17:06:05Z","updated_at":"2020-07-29T17:06:05Z","author_association":"NONE","body":"I just re-tested page rank / personalized pagerank after last commit and it works for me.\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/665787058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/665993038","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-665993038","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":665993038,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTk5MzAzOA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-30T00:06:09Z","updated_at":"2020-07-31T18:16:14Z","author_association":"NONE","body":"errors and issues\r\n\r\n(1)\r\n```\r\nSELECT madlib.generate_model_selection_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1,2],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { \r\n                                          'lr': [1.0, 2.0, 'linear']\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8],\r\n                                           'epochs': [1] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type (grid or random, default grid) \r\n                                         5, -- num_configs (number of sampled parameters. Default=10) [to limit testing] \r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         );]\r\n```\r\nproduces\r\n```\r\nInternalError: (psycopg2.errors.InternalError_) TypeError: cannot concatenate 'str' and 'float' objects (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"generate_model_selection_configs\", line 21, in <module>\r\n    mst_loader = madlib_keras_model_selection.MstSearch(**globals())\r\n  PL/Python function \"generate_model_selection_configs\", line 42, in wrapper\r\n  PL/Python function \"generate_model_selection_configs\", line 287, in __init__\r\n  PL/Python function \"generate_model_selection_configs\", line 426, in find_random_combinations\r\n  PL/Python function \"generate_model_selection_configs\", line 490, in generate_row_string\r\nPL/Python function \"generate_model_selection_configs\"\r\n\r\n[SQL: SELECT madlib.generate_model_selection_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1,2],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { 'loss': ['categorical_crossentropy'],\r\n                                          'lr': [0.0001, 0.1, 'linear']\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8],\r\n                                           'epochs': [1] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type (grid or random, default grid) \r\n                                         5, -- num_configs (number of sampled parameters. Default=10) [to limit testing] \r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         );]\r\n(Background on this error at: http://sqlalche.me/e/2j85)\r\n```\r\n\r\nLikewise\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.generate_model_selection_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1,2],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { \r\n                                          'lr': [1.0, 2.0, 'log'],\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8],\r\n                                           'epochs': [1] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type (grid or random, default grid) \r\n                                         1, -- num_configs (number of sampled parameters. Default=10) [to limit testing] \r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         ); \r\n                                         \r\nSELECT * FROM mst_table ORDER BY mst_key;\r\n```\r\nproduces\r\n```\r\nInternalError: (psycopg2.errors.InternalError_) TypeError: cannot concatenate 'str' and 'numpy.float64' objects (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"generate_model_selection_configs\", line 21, in <module>\r\n    mst_loader = madlib_keras_model_selection.MstSearch(**globals())\r\n  PL/Python function \"generate_model_selection_configs\", line 42, in wrapper\r\n  PL/Python function \"generate_model_selection_configs\", line 287, in __init__\r\n  PL/Python function \"generate_model_selection_configs\", line 426, in find_random_combinations\r\n  PL/Python function \"generate_model_selection_configs\", line 490, in generate_row_string\r\nPL/Python function \"generate_model_selection_configs\"\r\n\r\n[SQL: SELECT madlib.generate_model_selection_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1,2],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { \r\n                                          'lr': [1.0, 2.0, 'log'],\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8],\r\n                                           'epochs': [1] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type (grid or random, default grid) \r\n                                         1, -- num_configs (number of sampled parameters. Default=10) [to limit testing] \r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         );]\r\n(Background on this error at: http://sqlalche.me/e/2j85)\r\n```\r\n\r\n(2)\r\nFor search_type = 'grid' or 'random', use should be able to enter part of the string, e.g., 'rand' for random or 'g' for for grid.  There is a MADlib function that supports this.\r\n\r\n\r\n(3)\r\nchange the name of the function from `generate_model_selection_configs`\r\nto `generate_model_configs`\r\n\r\n\r\n(4)\r\nremove exclamations ! from error messages and random capitalization. Suggested messages:\r\n\r\n\"DL: 'num_configs' and 'random_state' must be NULL for grid search\"\r\n\r\n\"DL: Cannot search from a distribution with grid search\"\r\n\r\n\"DL: 'num_configs' cannot be NULL for random search\"\r\n\r\n\"DL: 'search_type' must be either 'grid' or 'random'\"\r\n\r\n\"DL: Please choose a valid distribution type ('linear' or 'log')\"\r\n\r\n\"DL: {0} should be of the format [lower_bound, upper_bound, distribution_type]\"\r\n\r\n\r\n(5)\r\nIn addition to `linear` sampling and `log` sampling we should add another type\r\ncalled `log_near_one`\r\n```\r\nconfig_dict[cp] = 1.0 - np.power(10,  np.random.uniform (np.log10 (1.0 - param_values[1]), np.log10(1.0 - param_values[0]) ) )\r\n```\r\nThis type of sampling is useful for exponentially weighted average type params like momentum, which are very sensitive to changes near 1.  It has the effect of producing more values near 1 than regular log sampling.\r\n\r\ne.g.\r\nmomentum values in range [0.9000, 0.9005] average the prev 10 values no matter where you are in the range (no diff)\r\nbut\r\nmomentum values in range [0.9990, 0.9995] average the prev 1000 values for the left side and prev 2000 values for the right side (big diff), so you want to generate more samples nearer to the right side to get better coverage.\r\n\r\n\r\n(6)\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.generate_model_selection_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { 'loss': ['categorical_crossentropy'],\r\n                                          'optimizer': ['Adam'],\r\n                                          'lr': [0.9, 0.95, 'log'],\r\n                                          'metrics': ['accuracy']\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8, 32, 64, 128, 256, 1024, 4096],\r\n                                           'epochs': [1, 2, 3, 5, 10, 12] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type\r\n                                         5, -- num_configs\r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         ); \r\n                                         \r\nSELECT * FROM mst_table ORDER BY mst_key;\r\n```\r\nfollowed by \r\n```\r\nSELECT madlib.generate_model_selection_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { 'loss': ['categorical_crossentropy'],\r\n                                          'optimizer': ['SGD'],\r\n                                          'metrics': ['accuracy']\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8, 32, 64, 128, 256, 1024, 4096],\r\n                                           'epochs': [1, 2, 3, 5, 10, 12] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type\r\n                                         5, -- num_configs\r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         ); \r\n                                         \r\nSELECT * FROM mst_table ORDER BY mst_key;\r\n```\r\nproduces\r\n```\r\nIntegrityError: (psycopg2.errors.UniqueViolation) plpy.SPIError: duplicate key value violates unique constraint \"mst_table_model_id_key\"  (seg0 10.128.0.41:40000 pid=22297)\r\nDETAIL:  Key (model_id, compile_params, fit_params)=(1, optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy', epochs=12,batch_size=32) already exists.\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"generate_model_selection_configs\", line 22, in <module>\r\n    mst_loader.load()\r\n  PL/Python function \"generate_model_selection_configs\", line 313, in load\r\n  PL/Python function \"generate_model_selection_configs\", line 566, in insert_into_mst_table\r\nPL/Python function \"generate_model_selection_configs\"\r\n\r\n[SQL: SELECT madlib.generate_model_selection_configs( 'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { 'loss': ['categorical_crossentropy'],\r\n                                          'optimizer': ['SGD'],\r\n                                          'metrics': ['accuracy']\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8, 32, 64, 128, 256, 1024, 4096],\r\n                                           'epochs': [1, 2, 3, 5, 10, 12] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type\r\n                                         5, -- num_configs\r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         );]\r\n(Background on this error at: http://sqlalche.me/e/gkpj)\r\n```\r\nBut it only produced the error every 2nd time I did this. i.e., 1-pass it would work then the 2nd pass it would throw the error.\r\n\r\nWhen it does pass, it produces\r\n```\r\n mst_key | model_id |                                        compile_params                                        |        fit_params        \r\n---------+----------+----------------------------------------------------------------------------------------------+--------------------------\r\n       1 |        1 | optimizer='Adam(lr=0.9063214445649174)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=10,batch_size=256\r\n       2 |        1 | optimizer='Adam(lr=0.9367722192055232)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=5,batch_size=256\r\n       3 |        1 | optimizer='Adam(lr=0.9212048311857509)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=2,batch_size=32\r\n       4 |        1 | optimizer='Adam(lr=0.9193149125403647)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=3,batch_size=256\r\n       5 |        1 | optimizer='Adam(lr=0.9326284661833211)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=2,batch_size=256\r\n       6 |        1 | optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy'                       | epochs=10,batch_size=256\r\n       7 |        1 | optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy'                       | epochs=5,batch_size=8\r\n       8 |        1 | optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy'                       | epochs=2,batch_size=1024\r\n       9 |        1 | optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy'                       | epochs=3,batch_size=32\r\n      10 |        1 | optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy'                       | epochs=12,batch_size=8\r\n(10 rows)\r\n```\r\nis `optimizer='SGD()'...` correct or should it be `optimizer='SGD'...` ?\r\n\r\n\r\n(7)\r\nNot all sub-params apply to all params.  For example, for optimizer, `lr` and `decay` might only apply to certain optimizer types and not others:\r\n```\r\noptimizer='SGD'\r\noptimizer='rmsprop(lr=0.0001, decay=1e-6)'\r\noptimizer='adam(lr=0.0001)'\r\n```\r\nIn the previous method we accounted for that by doing:\r\n```\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],          -- model ids from model architecture table\r\n                                          ARRAY[               -- compile params   \r\n                                              $$loss='categorical_crossentropy',optimizer='rmsprop(lr=0.0001, decay=1e-6)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='rmsprop(lr=0.001, decay=1e-6)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='adam(lr=0.0001)',metrics=['accuracy']$$,\r\n                                              $$loss='categorical_crossentropy',optimizer='adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                -- fit params\r\n                                              $$batch_size=64,epochs=5$$, \r\n                                              $$batch_size=128,epochs=5$$\r\n                                          ]\r\n                                         );\r\n```\r\nbut how do we do this in the new method `generate_model_configs`? You could call it multiple times and incrementally build up the `mst_table` but when autoML methods call this function we need to support a 1-shot manner.  I would suggest nested dictionaries like:\r\n```\r\nSELECT madlib.generate_model_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1],              -- model ids from model architecture table\r\n                                         $$\r\n                                         { 'loss': ['categorical_crossentropy'],\r\n                                           'my_list': [\r\n                                            \t\t\t\t{'optimizer': ['SGD', 'Adagrad']},\r\n                                            \t\t\t\t{'optimizer': ['rmsprop'], 'lr': [0.9, 0.95, 'log'], 'decay': [1e-6, 1e-4, 'log']},\r\n                                            \t\t\t\t{'optimizer': ['Adam'], 'lr': [0.99, 0.995, 'log']}\r\n                                           \t\t\t   ],\r\n                                           'metrics': ['accuracy']\r\n                                         } \r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8, 32, 64, 128, 256, 1024, 4096],\r\n                                           'epochs': [1, 2, 3, 5, 10, 12] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type\r\n                                         5, -- num_configs\r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n```\r\nSo I think we should support both single dictionary and nested dictionary syntax.\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/665993038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/667323102","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-667323102","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":667323102,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzMyMzEwMg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-31T19:53:27Z","updated_at":"2020-07-31T19:53:27Z","author_association":"NONE","body":"Actually #6 is fine, I should have read this in more detail\r\n```IntegrityError: (psycopg2.errors.UniqueViolation) plpy.SPIError: duplicate key value violates unique constraint \"mst_table_model_id_key\"  (seg0 10.128.0.41:40000 pid=22297)\r\nDETAIL:  Key (model_id, compile_params, fit_params)=(1, optimizer='SGD()',metrics=['accuracy'],loss='categorical_crossentropy', epochs=12,batch_size=32) already exists.\r\n```\r\nNo need to do anything, I will put a better note in the user docs about this corner case.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/667323102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668868753","html_url":"https://github.com/apache/madlib/pull/503#issuecomment-668868753","issue_url":"https://api.github.com/repos/apache/madlib/issues/503","id":668868753,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODg2ODc1Mw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T23:04:08Z","updated_at":"2020-08-04T23:04:08Z","author_association":"NONE","body":"Tests look good so far.  Once we get the custom metrics feature in, I will do more extensive testing and update the user docs.\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668868753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668947847","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-668947847","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":668947847,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODk0Nzg0Nw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T02:53:29Z","updated_at":"2020-08-05T02:54:09Z","author_association":"NONE","body":"From my previous comments:\r\n\r\n1,2,3,4,5,7 are fixed\r\n6 is OK as is, no fix needed\r\n\r\nAdditional questions:\r\n(8)\r\nis this the right syntax for an optimizer with no params? i.e., `Adagrad()`\r\n```\r\noptimizer='Adagrad()',metrics=['accuracy'],loss='categorical_crossentropy'\r\n```\r\n\r\n(9)\r\nif I did not put an optimizer:\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\nSELECT madlib.generate_model_configs(\r\n                                        'model_arch_library', -- model architecture table\r\n                                        'mst_table',          -- model selection table output\r\n                                         ARRAY[1,2],              -- model ids from model architecture table\r\n                                         $$\r\n                                            {'loss': ['categorical_crossentropy'], \r\n                                             'optimizer_params_list': [ {'lr': [0.0001, 0.1, 'log']} ], \r\n                                             'metrics': ['accuracy']}\r\n                                         $$, -- compile_param_grid \r\n                                         $$ \r\n                                         { 'batch_size': [8],\r\n                                           'epochs': [1] \r\n                                         } \r\n                                         $$, -- fit_param_grid \r\n                                         \r\n                                         'random', -- search_type (grid or random, default grid) \r\n                                         2, -- num_configs (number of sampled parameters. Default=10) [to limit testing] \r\n                                         NULL, -- random_state \r\n                                         NULL -- object table (Default=None)  \r\n                                         );\r\n```\r\nthen `SGD` shows up:  \r\n```\r\n mst_key | model_id |                                        compile_params                                         |      fit_params       \r\n---------+----------+-----------------------------------------------------------------------------------------------+-----------------------\r\n       1 |        1 | optimizer='SGD(lr=0.002963575680717671)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=1,batch_size=8\r\n       2 |        2 | optimizer='SGD(lr=0.027802557490831045)',metrics=['accuracy'],loss='categorical_crossentropy' | epochs=1,batch_size=8\r\n(2 rows)\r\n```\r\nDo we do that or does Keras do that?","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668947847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668949266","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-668949266","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":668949266,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODk0OTI2Ng==","user":{"login":"Advitya17","id":37190647,"node_id":"MDQ6VXNlcjM3MTkwNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/37190647?v=4","gravatar_id":"","url":"https://api.github.com/users/Advitya17","html_url":"https://github.com/Advitya17","followers_url":"https://api.github.com/users/Advitya17/followers","following_url":"https://api.github.com/users/Advitya17/following{/other_user}","gists_url":"https://api.github.com/users/Advitya17/gists{/gist_id}","starred_url":"https://api.github.com/users/Advitya17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Advitya17/subscriptions","organizations_url":"https://api.github.com/users/Advitya17/orgs","repos_url":"https://api.github.com/users/Advitya17/repos","events_url":"https://api.github.com/users/Advitya17/events{/privacy}","received_events_url":"https://api.github.com/users/Advitya17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T02:57:53Z","updated_at":"2020-08-05T03:00:25Z","author_association":"CONTRIBUTOR","body":"(8) I assume it's the right syntax, and the optimizer would just take the default param values (as part of the keras documentation shown below)\r\n![image](https://user-images.githubusercontent.com/37190647/89366896-a1690000-d68c-11ea-9e82-21b98bffffb9.png)\r\n\r\n(9) Yes, I currently have SGD as the default when the user wishes to tune any optimizer params but doesn't specify an optimizer to tune.\r\n\r\nDoes that help?","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668949266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668952722","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-668952722","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":668952722,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODk1MjcyMg==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T03:08:15Z","updated_at":"2020-08-05T03:08:38Z","author_association":"NONE","body":"for (9) \r\n\r\nKeras docs say that optimizer and loss function are mandatory params, so I don't think we should put SGD if user does not specify an optimizer.  We should let it fail, no?\r\n\r\nhttps://keras.io/api/optimizers/\r\n`An optimizer is one of the two arguments required for compiling a Keras model`","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668952722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668955356","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-668955356","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":668955356,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODk1NTM1Ng==","user":{"login":"Advitya17","id":37190647,"node_id":"MDQ6VXNlcjM3MTkwNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/37190647?v=4","gravatar_id":"","url":"https://api.github.com/users/Advitya17","html_url":"https://github.com/Advitya17","followers_url":"https://api.github.com/users/Advitya17/followers","following_url":"https://api.github.com/users/Advitya17/following{/other_user}","gists_url":"https://api.github.com/users/Advitya17/gists{/gist_id}","starred_url":"https://api.github.com/users/Advitya17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Advitya17/subscriptions","organizations_url":"https://api.github.com/users/Advitya17/orgs","repos_url":"https://api.github.com/users/Advitya17/repos","events_url":"https://api.github.com/users/Advitya17/events{/privacy}","received_events_url":"https://api.github.com/users/Advitya17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T03:16:11Z","updated_at":"2020-08-05T03:18:13Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/37190647/89367810-d70ee880-d68e-11ea-8284-cfd1b30ece2e.png)\r\n\r\nAccording to the keras documentation, it seems there is a default value for optimizer as well (just that it seems to be rmsprop instead of my manually chosen SGD). \r\n\r\nFrom my understanding of the documentation and its language, yes optimizer is required for compiling a keras model, but they seem to already be using a default optimizer (and with default params) to compile the keras model when the user may not specify one. \r\n\r\nPlease correct me if I missed anything or didn't understand it right.\r\n\r\n![image](https://user-images.githubusercontent.com/37190647/89367845-edb53f80-d68e-11ea-999c-7353b33857d3.png)\r\n\r\nCompile method reference - https://keras.io/api/models/model_training_apis/#compile-method","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/668955356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/669330584","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-669330584","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":669330584,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTMzMDU4NA==","user":{"login":"Advitya17","id":37190647,"node_id":"MDQ6VXNlcjM3MTkwNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/37190647?v=4","gravatar_id":"","url":"https://api.github.com/users/Advitya17","html_url":"https://github.com/Advitya17","followers_url":"https://api.github.com/users/Advitya17/followers","following_url":"https://api.github.com/users/Advitya17/following{/other_user}","gists_url":"https://api.github.com/users/Advitya17/gists{/gist_id}","starred_url":"https://api.github.com/users/Advitya17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Advitya17/subscriptions","organizations_url":"https://api.github.com/users/Advitya17/orgs","repos_url":"https://api.github.com/users/Advitya17/repos","events_url":"https://api.github.com/users/Advitya17/events{/privacy}","received_events_url":"https://api.github.com/users/Advitya17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T17:38:27Z","updated_at":"2020-08-05T17:38:27Z","author_association":"CONTRIBUTOR","body":"I have switched the default optimizer from SGD to RMSprop. ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/669330584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/669530020","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-669530020","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":669530020,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTUzMDAyMA==","user":{"login":"Advitya17","id":37190647,"node_id":"MDQ6VXNlcjM3MTkwNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/37190647?v=4","gravatar_id":"","url":"https://api.github.com/users/Advitya17","html_url":"https://github.com/Advitya17","followers_url":"https://api.github.com/users/Advitya17/followers","following_url":"https://api.github.com/users/Advitya17/following{/other_user}","gists_url":"https://api.github.com/users/Advitya17/gists{/gist_id}","starred_url":"https://api.github.com/users/Advitya17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Advitya17/subscriptions","organizations_url":"https://api.github.com/users/Advitya17/orgs","repos_url":"https://api.github.com/users/Advitya17/repos","events_url":"https://api.github.com/users/Advitya17/events{/privacy}","received_events_url":"https://api.github.com/users/Advitya17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-05T21:46:24Z","updated_at":"2020-08-05T21:46:33Z","author_association":"CONTRIBUTOR","body":"@khannaekta I have made the changes specified above.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/669530020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/670027767","html_url":"https://github.com/apache/madlib/pull/508#issuecomment-670027767","issue_url":"https://api.github.com/repos/apache/madlib/issues/508","id":670027767,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDAyNzc2Nw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T16:15:18Z","updated_at":"2020-08-06T16:16:03Z","author_association":"NONE","body":"```\r\nmadlib=# SELECT * FROM madlib.summary( 'iris',            -- Source table\r\nmadlib(#                               'pg_temp.iris_summary'     -- Output table\r\nmadlib(#                             );\r\n     output_table     | num_col_summarized |     duration      \r\n----------------------+--------------------+-------------------\r\n pg_temp.iris_summary |                  6 | 0.192517042160034\r\n(1 row)\r\n```\r\ntested on\r\n```\r\n PostgreSQL 8.3.23 (Greenplum Database 5.18.0 build commit:6aec9959d367d46c6b4391eb9ffc82c735d20102) on x86_64-pc-linux-gnu, compiled by GCC gcc (GCC) 6.2.0, 64-bit compiled\r\n on Apr  3 2019 14:45:51\r\n```\r\n\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/670027767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/670230673","html_url":"https://github.com/apache/madlib/pull/506#issuecomment-670230673","issue_url":"https://api.github.com/repos/apache/madlib/issues/506","id":670230673,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDIzMDY3Mw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T22:56:18Z","updated_at":"2020-08-06T22:56:18Z","author_association":"NONE","body":"LGTM\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/670230673/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/671593563","html_url":"https://github.com/apache/madlib/pull/512#issuecomment-671593563","issue_url":"https://api.github.com/repos/apache/madlib/issues/512","id":671593563,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTU5MzU2Mw==","user":{"login":"Advitya17","id":37190647,"node_id":"MDQ6VXNlcjM3MTkwNjQ3","avatar_url":"https://avatars.githubusercontent.com/u/37190647?v=4","gravatar_id":"","url":"https://api.github.com/users/Advitya17","html_url":"https://github.com/Advitya17","followers_url":"https://api.github.com/users/Advitya17/followers","following_url":"https://api.github.com/users/Advitya17/following{/other_user}","gists_url":"https://api.github.com/users/Advitya17/gists{/gist_id}","starred_url":"https://api.github.com/users/Advitya17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Advitya17/subscriptions","organizations_url":"https://api.github.com/users/Advitya17/orgs","repos_url":"https://api.github.com/users/Advitya17/repos","events_url":"https://api.github.com/users/Advitya17/events{/privacy}","received_events_url":"https://api.github.com/users/Advitya17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-10T21:15:13Z","updated_at":"2020-08-10T21:15:13Z","author_association":"CONTRIBUTOR","body":"@orhankislal I have resolved the comments as mentioned.","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/671593563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/672996086","html_url":"https://github.com/apache/madlib/pull/512#issuecomment-672996086","issue_url":"https://api.github.com/repos/apache/madlib/issues/512","id":672996086,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mjk5NjA4Ng==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-12T17:01:47Z","updated_at":"2020-08-12T17:01:47Z","author_association":"NONE","body":"@Advitya17 can u rebase off master?  autoML is a separate module in the left panel https://github.com/apache/madlib/blob/master/doc/mainpage.dox.in\r\n\r\nIn this PR it is part of the old \"Setup Model Selection\" ","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/672996086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/673219074","html_url":"https://github.com/apache/madlib/pull/512#issuecomment-673219074","issue_url":"https://api.github.com/repos/apache/madlib/issues/512","id":673219074,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzIxOTA3NA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-13T02:57:22Z","updated_at":"2020-08-13T02:57:22Z","author_association":"NONE","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/673219074/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/677953577","html_url":"https://github.com/apache/madlib/pull/511#issuecomment-677953577","issue_url":"https://api.github.com/repos/apache/madlib/issues/511","id":677953577,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Nzk1MzU3Nw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T23:21:04Z","updated_at":"2020-08-20T23:21:04Z","author_association":"NONE","body":"\r\ntesting custom metrics\r\n\r\n(1)\r\ntraining 1 model at a time\r\n\r\ncustom function definition\r\n```\r\n# import database connector psycopg2 and create connection cursor\r\nimport psycopg2 as p2\r\nconn = p2.connect('postgresql://gpadmin@localhost:8000/madlib')\r\ncur = conn.cursor()\r\n\r\n# import Dill and define function\r\nimport dill\r\n\r\ndef my_loss_fn(y_true, y_pred):\r\n    import keras.backend as K \r\n    loss=K.mean(K.sum(K.square(y_true-y_pred)))\r\n    return loss\r\npb_my_loss=dill.dumps(my_loss_fn)\r\n\r\ndef mean_pred(y_true, y_pred):\r\n    import keras.backend as K \r\n    return K.mean(y_pred)\r\npb_mean_pred=dill.dumps(mean_pred)\r\n\r\ndef rmse(y_true, y_pred):\r\n    import keras.backend as K \r\n    return K.sqrt(K.mean(K.square(y_pred - y_true), axis=-1))\r\npb_rmse=dill.dumps(rmse)\r\n\r\n\r\n# call load function\r\ncur.execute(\"DROP TABLE IF EXISTS test_custom_function_table\")\r\ncur.execute(\"SELECT madlib.load_custom_function('test_custom_function_table',  %s,'my_loss_fn', 'my loss function')\", [p2.Binary(pb_my_loss)])\r\ncur.execute(\"SELECT madlib.load_custom_function('test_custom_function_table',  %s,'mean_pred', 'mean of y_pred')\", [p2.Binary(pb_mean_pred)])\r\ncur.execute(\"SELECT madlib.load_custom_function('test_custom_function_table',  %s,'rmse', 'root mean square error')\", [p2.Binary(pb_rmse)])\r\nconn.commit()\r\n```\r\n\r\nfit 1 model\r\n```\r\nDROP TABLE IF EXISTS iris_model_cl, iris_model_cl_summary;\r\n\r\nSELECT madlib.madlib_keras_fit('iris_train_packed',   -- source table\r\n                               'iris_model_cl',          -- model output table\r\n                               'model_arch_library',  -- model arch table\r\n                                1,                    -- model arch id\r\n                                $$ loss=my_loss_fn, optimizer='adam', metrics=['rmse'] $$,  -- compile_params\r\n                                $$ batch_size=5, epochs=3 $$,  -- fit_params\r\n                                10,                    -- num_iteration\r\n                               NULL, -- use_gpus,\r\n                               NULL, -- validation_table,\r\n                               NULL, -- metrics_compute_frequency,\r\n                               NULL, -- warm_start,\r\n                               NULL, -- name\r\n                               NULL, -- description\r\n                               'test_custom_function_table' -- object table\r\n                              );\r\n```\r\n\r\nproduces\r\n```\r\nINFO:  \r\n\tTime for training in iteration 1: 4.30907201767 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 2: 0.0564551353455 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 3: 0.0538399219513 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 4: 0.056825876236 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 5: 0.052964925766 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 6: 0.0547108650208 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 7: 0.0535190105438 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 8: 0.050479888916 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 9: 0.0498030185699 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 10: 0.0547761917114 sec\r\nDETAIL:  \r\n\tTime for evaluating training dataset in iteration 10: 0.160271167755 sec\r\n\tTraining set metric after iteration 10: 0.294620931149\r\n\tTraining set loss after iteration 10: 9.13136100769\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\n madlib_keras_fit \r\n------------------\r\n \r\n(1 row)\r\n\r\nTime: 6067.860 ms\r\n```\r\nOK\r\n\r\n\r\n(2)\r\ntrain multiple models\r\n\r\n```\r\nDROP TABLE IF EXISTS mst_table, mst_table_summary;\r\n\r\nSELECT madlib.load_model_selection_table('model_arch_library', -- model architecture table\r\n                                         'mst_table',          -- model selection table output\r\n                                          ARRAY[1,2],              -- model ids from model architecture table\r\n                                          ARRAY[                   -- compile params\r\n                                              $$loss=my_loss_fn,optimizer='Adam()',metrics=['rmse']$$,\r\n                                              $$loss=my_loss_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy']$$,\r\n                                              $$loss=my_loss_fn,optimizer='Adam(lr=0.001)',metrics=['accuracy']$$\r\n                                          ],\r\n                                          ARRAY[                    -- fit params\r\n                                              $$batch_size=4,epochs=1$$,\r\n                                              $$batch_size=8,epochs=1$$\r\n                                          ],\r\n                                         'test_custom_function_table'\r\n                                         );\r\n                                  \r\nSELECT * FROM mst_table ORDER BY mst_key;\r\n```\r\n\r\nproduces\r\n```\r\n mst_key | model_id |                         compile_params                          |      fit_params       \r\n---------+----------+-----------------------------------------------------------------+-----------------------\r\n       1 |        1 | loss=my_loss_fn,optimizer='Adam()',metrics=['rmse']             | batch_size=4,epochs=1\r\n       2 |        1 | loss=my_loss_fn,optimizer='Adam()',metrics=['rmse']             | batch_size=8,epochs=1\r\n       3 |        1 | loss=my_loss_fn,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n       4 |        1 | loss=my_loss_fn,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n       5 |        1 | loss=my_loss_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n       6 |        1 | loss=my_loss_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n       7 |        2 | loss=my_loss_fn,optimizer='Adam()',metrics=['rmse']             | batch_size=4,epochs=1\r\n       8 |        2 | loss=my_loss_fn,optimizer='Adam()',metrics=['rmse']             | batch_size=8,epochs=1\r\n       9 |        2 | loss=my_loss_fn,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n      10 |        2 | loss=my_loss_fn,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n      11 |        2 | loss=my_loss_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=4,epochs=1\r\n      12 |        2 | loss=my_loss_fn, optimizer='Adam(lr=0.01)',metrics=['accuracy'] | batch_size=8,epochs=1\r\n(12 rows)\r\n```\r\n\r\n```\r\nDROP TABLE IF EXISTS iris_multi_model, iris_multi_model_summary, iris_multi_model_info;\r\n\r\nSELECT madlib.madlib_keras_fit_multiple_model('iris_train_packed',    -- source_table\r\n                                              'iris_multi_model',     -- model_output_table\r\n                                              'mst_table',            -- model_selection_table\r\n                                               3,                     -- num_iterations\r\n                                              FALSE                   -- use gpus\r\n                                             );\r\n```\r\n\r\nproduces\r\n```\r\nINFO:  \r\n\tTime for training in iteration 1: 13.0232429504 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 2: 9.58937096596 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\nINFO:  \r\n\tTime for training in iteration 3: 9.76873111725 sec\r\nDETAIL:  \r\n\tTraining set after iteration 3:\r\n\tmst_key=2: metric=0.409701615572, loss=16.9745140076\r\n\tmst_key=11: metric=0.716666638851, loss=8.25237369537\r\n\tmst_key=10: metric=0.583333313465, loss=20.2344932556\r\n\tmst_key=4: metric=0.425000011921, loss=23.4776382446\r\n\tmst_key=3: metric=0.675000011921, loss=13.1436872482\r\n\tmst_key=12: metric=0.925000011921, loss=4.12444734573\r\n\tmst_key=9: metric=0.433333337307, loss=19.3265666962\r\n\tmst_key=1: metric=0.458484977484, loss=19.2592735291\r\n\tmst_key=8: metric=0.457415133715, loss=21.9753704071\r\n\tmst_key=7: metric=0.410767167807, loss=15.9223165512\r\n\tmst_key=5: metric=0.708333313465, loss=9.34871482849\r\n\tmst_key=6: metric=0.675000011921, loss=9.48431587219\r\nCONTEXT:  PL/Python function \"madlib_keras_fit_multiple_model\"\r\n madlib_keras_fit_multiple_model \r\n---------------------------------\r\n \r\n(1 row)\r\n\r\nTime: 37485.717 ms\r\n```\r\nOK\r\n\r\n\r\n(3)\r\ninfo table missing loss type\r\n\r\ncurrent info table lists the metrics type:\r\n```\r\nmadlib=# \\d iris_multi_model_info\r\n           Table \"public.iris_multi_model_info\"\r\n          Column          |        Type        | Modifiers \r\n--------------------------+--------------------+-----------\r\n mst_key                  | integer            | not null\r\n model_id                 | integer            | \r\n compile_params           | text               | \r\n fit_params               | text               | \r\n model_type               | text               | \r\n model_size               | double precision   | \r\n metrics_elapsed_time     | double precision[] | \r\n metrics_type             | text[]             | \r\n training_metrics_final   | double precision   | \r\n training_loss_final      | double precision   | \r\n training_metrics         | double precision[] | \r\n training_loss            | double precision[] | \r\n validation_metrics_final | double precision   | \r\n validation_loss_final    | double precision   | \r\n validation_metrics       | double precision[] | \r\n validation_loss          | double precision[] | \r\n```\r\n\r\nbut we should also put the loss type in:\r\n```\r\nmadlib=# \\d iris_multi_model_info\r\n           Table \"public.iris_multi_model_info\"\r\n          Column          |        Type        | Modifiers \r\n--------------------------+--------------------+-----------\r\n mst_key                  | integer            | not null\r\n model_id                 | integer            | \r\n compile_params           | text               | \r\n fit_params               | text               | \r\n model_type               | text               | \r\n model_size               | double precision   | \r\n metrics_elapsed_time     | double precision[] | \r\n metrics_type             | text[]             | \r\n loss_type                | text               |  <--new\r\n training_metrics_final   | double precision   | \r\n training_loss_final      | double precision   | \r\n training_metrics         | double precision[] | \r\n training_loss            | double precision[] | \r\n validation_metrics_final | double precision   | \r\n validation_loss_final    | double precision   | \r\n validation_metrics       | double precision[] | \r\n validation_loss          | double precision[] | \r\n```\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/677953577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/678429057","html_url":"https://github.com/apache/madlib/pull/511#issuecomment-678429057","issue_url":"https://api.github.com/repos/apache/madlib/issues/511","id":678429057,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODQyOTA1Nw==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T18:29:28Z","updated_at":"2020-08-21T18:35:04Z","author_association":"NONE","body":"(4)\r\nif I use the same function for custom function for loss and metrics\r\n```\r\n# import database connector psycopg2 and create connection cursor\r\nimport psycopg2 as p2\r\nconn = p2.connect('postgresql://gpadmin@localhost:8000/madlib')\r\ncur = conn.cursor()\r\n\r\n# import Dill and define functions\r\nimport dill\r\n\r\n# custom loss\r\ndef msee(y_true, y_pred):\r\n    import keras.backend as K \r\n    loss=K.mean(K.sum(K.square(y_true-y_pred)))\r\n    return loss\r\npb_msee=dill.dumps(msee)\r\n\r\n# custom metric\r\ndef rmse(y_true, y_pred):\r\n    import keras.backend as K \r\n    return K.sqrt(K.mean(K.square(y_pred - y_true), axis=-1))\r\npb_rmse=dill.dumps(rmse)\r\n\r\n# call load function\r\ncur.execute(\"DROP TABLE IF EXISTS test_custom_function_table\")\r\ncur.execute(\"SELECT madlib.load_custom_function('test_custom_function_table',  %s,'msee', 'mean squared error loss')\", [p2.Binary(pb_msee)])\r\ncur.execute(\"SELECT madlib.load_custom_function('test_custom_function_table',  %s,'rmse', 'root mean square error metric')\", [p2.Binary(pb_rmse)])\r\nconn.commit()\r\n```\r\n```\r\nDROP TABLE IF EXISTS iris_model_cl, iris_model_cl_summary;\r\n\r\nSELECT madlib.madlib_keras_fit('iris_train_packed',   -- source table\r\n                               'iris_model_cl',          -- model output table\r\n                               'model_arch_library',  -- model arch table\r\n                                1,                    -- model arch id\r\n                                $$ loss=msee, optimizer='adam', metrics=['msee'] $$,  -- compile_params\r\n                                $$ batch_size=5, epochs=3 $$,  -- fit_params\r\n                                3,                    -- num_iteration\r\n                               NULL, -- use_gpus,\r\n                               NULL, -- validation_table,\r\n                               NULL, -- metrics_compute_frequency,\r\n                               NULL, -- warm_start,\r\n                               NULL, -- name\r\n                               NULL, -- description\r\n                               'test_custom_function_table' -- object table\r\n                              );\r\n```\r\nproduces\r\n```\r\nInternalError: (psycopg2.errors.InternalError_) plpy.Error: Custom function ['msee', 'msee'] not defined in object table 'test_custom_function_table' (plpython.c:5038)\r\nCONTEXT:  Traceback (most recent call last):\r\n  PL/Python function \"madlib_keras_fit\", line 23, in <module>\r\n    madlib_keras.fit(**globals())\r\n  PL/Python function \"madlib_keras_fit\", line 42, in wrapper\r\n  PL/Python function \"madlib_keras_fit\", line 157, in fit\r\n  PL/Python function \"madlib_keras_fit\", line 397, in query_custom_functions_map\r\nPL/Python function \"madlib_keras_fit\"\r\n\r\n[SQL: SELECT madlib.madlib_keras_fit('iris_train_packed',   -- source table\r\n                               'iris_model_cl',          -- model output table\r\n                               'model_arch_library',  -- model arch table\r\n                                1,                    -- model arch id\r\n                                $$ loss=msee, optimizer='adam', metrics=['msee'] $$,  -- compile_params\r\n                                $$ batch_size=5, epochs=3 $$,  -- fit_params\r\n                                3,                    -- num_iteration\r\n                               NULL, -- use_gpus,\r\n                               NULL, -- validation_table,\r\n                               NULL, -- metrics_compute_frequency,\r\n                               NULL, -- warm_start,\r\n                               NULL, -- name\r\n                               NULL, -- description\r\n                               'test_custom_function_table' -- object table\r\n                              );]\r\n(Background on this error at: http://sqlalche.me/e/2j85)\r\n```\r\n\r\n(5)\r\nalso it seems from https://keras.io/api/losses/ like that standard is to put quotes around built-in functions like:\r\n```\r\n# pass optimizer by name: default parameters will be used\r\nmodel.compile(loss='sparse_categorical_crossentropy', optimizer='adam')\r\n```\r\nbut no quote for custom functions\r\n```\r\nloss_fn = keras.losses.SparseCategoricalCrossentropy()\r\nmodel.compile(loss=loss_fn, optimizer='adam')\r\n```\r\nso I suggest we use the same convention for loss functions and metrics","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/678429057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/madlib/issues/comments/679264964","html_url":"https://github.com/apache/madlib/pull/511#issuecomment-679264964","issue_url":"https://api.github.com/repos/apache/madlib/issues/511","id":679264964,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTI2NDk2NA==","user":{"login":"fmcquillan99","id":10538173,"node_id":"MDQ6VXNlcjEwNTM4MTcz","avatar_url":"https://avatars.githubusercontent.com/u/10538173?v=4","gravatar_id":"","url":"https://api.github.com/users/fmcquillan99","html_url":"https://github.com/fmcquillan99","followers_url":"https://api.github.com/users/fmcquillan99/followers","following_url":"https://api.github.com/users/fmcquillan99/following{/other_user}","gists_url":"https://api.github.com/users/fmcquillan99/gists{/gist_id}","starred_url":"https://api.github.com/users/fmcquillan99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmcquillan99/subscriptions","organizations_url":"https://api.github.com/users/fmcquillan99/orgs","repos_url":"https://api.github.com/users/fmcquillan99/repos","events_url":"https://api.github.com/users/fmcquillan99/events{/privacy}","received_events_url":"https://api.github.com/users/fmcquillan99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T17:32:03Z","updated_at":"2020-08-24T17:34:09Z","author_association":"NONE","body":"re-testing\r\n\r\n(3)\r\nadding `loss_type` to info table:\r\n```\r\nmadlib=# \\d iris_multi_model_info\r\n           Table \"public.iris_multi_model_info\"\r\n          Column          |        Type        | Modifiers \r\n--------------------------+--------------------+-----------\r\n mst_key                  | integer            | not null\r\n model_id                 | integer            | \r\n compile_params           | text               | \r\n fit_params               | text               | \r\n model_type               | text               | \r\n model_size               | double precision   | \r\n metrics_elapsed_time     | double precision[] | \r\n metrics_type             | text[]             | \r\n loss_type                | text               | \r\n training_metrics_final   | double precision   | \r\n training_loss_final      | double precision   | \r\n training_metrics         | double precision[] | \r\n training_loss            | double precision[] | \r\n validation_metrics_final | double precision   | \r\n validation_loss_final    | double precision   | \r\n validation_metrics       | double precision[] | \r\n validation_loss          | double precision[] | \r\n```\r\n```\r\nSELECT * FROM iris_multi_model_info ORDER BY training_metrics_final DESC, training_loss_final;\r\n mst_key | model_id |                      compile_params                       |      fit_params       |  model_type  |  model_size  | metrics_elapsed_time |  metrics_type   | loss_type | training_metrics_final | training_loss_final |  training_metrics   |    training_loss    | validation_metrics_final | validation_loss_final | validation_metrics | validation_loss \r\n---------+----------+-----------------------------------------------------------+-----------------------+--------------+--------------+----------------------+-----------------+-----------+------------------------+---------------------+---------------------+---------------------+--------------------------+-----------------------+--------------------+-----------------\r\n       5 |        1 | loss=rmse,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1 | madlib_keras | 0.7900390625 | {36.2402780056}      | {accuracy}      | rmse      |                  0.625 |      0.384403049946 | {0.625}             | {0.384403049945831} |                          |                       |                    | \r\n       8 |        2 | loss=rmse,optimizer='Adam()',metrics=['squared_error']    | batch_size=8,epochs=1 | madlib_keras | 1.2197265625 | {35.9148938655853}   | {squared_error} | rmse      |         0.448450267315 |      0.551081478596 | {0.448450267314911} | {0.551081478595734} |                          |                       |                    | \r\n      11 |        2 | loss=rmse,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=4,epochs=1 | madlib_keras | 1.2197265625 | {34.7360639572144}   | {accuracy}      | rmse      |          0.34999999404 |      0.373422443867 | {0.349999994039536} | {0.37342244386673}  |                          |                       |                    | \r\n      12 |        2 | loss=rmse,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1 | madlib_keras | 1.2197265625 | {35.4119808673859}   | {accuracy}      | rmse      |          0.34999999404 |      0.462386697531 | {0.349999994039536} | {0.462386697530746} |                          |                       |                    | \r\n       4 |        1 | loss=rmse, optimizer='Adam(lr=0.01)',metrics=['rmse']     | batch_size=8,epochs=1 | madlib_keras | 0.7900390625 | {35.0772519111633}   | {rmse}          | rmse      |          0.32794713974 |       0.32794713974 | {0.32794713973999}  | {0.32794713973999}  |                          |                       |                    | \r\n       6 |        1 | loss=rmse,optimizer='Adam(lr=0.001)',metrics=['accuracy'] | batch_size=8,epochs=1 | madlib_keras | 0.7900390625 | {36.3988900184631}   | {accuracy}      | rmse      |         0.324999988079 |      0.471819698811 | {0.324999988079071} | {0.471819698810577} |                          |                       |                    | \r\n       9 |        2 | loss=rmse, optimizer='Adam(lr=0.01)',metrics=['rmse']     | batch_size=4,epochs=1 | madlib_keras | 1.2197265625 | {35.5919768810272}   | {rmse}          | rmse      |         0.260808467865 |      0.260808467865 | {0.26080846786499}  | {0.26080846786499}  |                          |                       |                    | \r\n      10 |        2 | loss=rmse, optimizer='Adam(lr=0.01)',metrics=['rmse']     | batch_size=8,epochs=1 | madlib_keras | 1.2197265625 | {34.921012878418}    | {rmse}          | rmse      |         0.231591135263 |      0.231591135263 | {0.231591135263443} | {0.231591135263443} |                          |                       |                    | \r\n       7 |        2 | loss=rmse,optimizer='Adam()',metrics=['squared_error']    | batch_size=4,epochs=1 | madlib_keras | 1.2197265625 | {36.0883269309998}   | {squared_error} | rmse      |         0.221946805716 |      0.468155503273 | {0.221946805715561} | {0.46815550327301}  |                          |                       |                    | \r\n       3 |        1 | loss=rmse, optimizer='Adam(lr=0.01)',metrics=['rmse']     | batch_size=4,epochs=1 | madlib_keras | 0.7900390625 | {35.2352449893951}   | {rmse}          | rmse      |         0.181505993009 |      0.181505993009 | {0.181505993008614} | {0.181505993008614} |                          |                       |                    | \r\n       2 |        1 | loss=rmse,optimizer='Adam()',metrics=['squared_error']    | batch_size=8,epochs=1 | madlib_keras | 0.7900390625 | {34.5514559745789}   | {squared_error} | rmse      |         0.173068851233 |      0.394461244345 | {0.173068851232529} | {0.394461244344711} |                          |                       |                    | \r\n       1 |        1 | loss=rmse,optimizer='Adam()',metrics=['squared_error']    | batch_size=4,epochs=1 | madlib_keras | 0.7900390625 | {35.7443828582764}   | {squared_error} | rmse      |         0.156523838639 |      0.382581591606 | {0.156523838639259} | {0.38258159160614}  |                          |                       |                    | \r\n```\r\nOK\r\n\r\n(4)\r\n```DROP TABLE IF EXISTS iris_model_cl, iris_model_cl_summary;\r\n\r\nSELECT madlib.madlib_keras_fit('iris_train_packed',   -- source table\r\n                               'iris_model_cl',          -- model output table\r\n                               'model_arch_library',  -- model arch table\r\n                                1,                    -- model arch id\r\n                                $$ loss=rmse, optimizer='adam', metrics=['rmse'] $$,  -- compile_params\r\n                                $$ batch_size=5, epochs=3 $$,  -- fit_params\r\n                                3,                    -- num_iteration\r\n                               NULL, -- use_gpus,\r\n                               NULL, -- validation_table,\r\n                               NULL, -- metrics_compute_frequency,\r\n                               NULL, -- warm_start,\r\n                               NULL, -- name\r\n                               NULL, -- description\r\n                               'test_custom_function_table' -- object table\r\n                              );\r\n```\r\nproduces\r\n```\r\nINFO:  \r\n\tTime for training in iteration 1: 2.89410400391 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 2: 0.0521700382233 sec\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\nINFO:  \r\n\tTime for training in iteration 3: 0.0579919815063 sec\r\nDETAIL:  \r\n\tTime for evaluating training dataset in iteration 3: 0.225339174271 sec\r\n\tTraining set metric after iteration 3: 0.375931799412\r\n\tTraining set loss after iteration 3: 0.375931799412\r\nCONTEXT:  PL/Python function \"madlib_keras_fit\"\r\n-[ RECORD 1 ]----+-\r\nmadlib_keras_fit | \r\n\r\nTime: 6035.621 ms\r\n```\r\nOK\r\n\r\n(5)\r\n```\r\n$$ loss=rmse, optimizer='adam', metrics=['squared_error'] $$,  -- compile_params\r\n$$ loss='rmse', optimizer='adam', metrics=['squared_error'] $$,  -- compile_params\r\n```\r\nboth work\r\n```\r\n$$ loss=rmse, optimizer='adam', metrics=[squared_error] $$,  -- compile_params\r\n```\r\ndoes not but that is fine.  Would required too many changes to parsers.\r\nOK\r\n\r\nso overall LGTM","reactions":{"url":"https://api.github.com/repos/apache/madlib/issues/comments/679264964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]