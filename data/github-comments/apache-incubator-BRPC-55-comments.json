[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336280419","html_url":"https://github.com/apache/brpc/issues/2032#issuecomment-1336280419","issue_url":"https://api.github.com/repos/apache/brpc/issues/2032","id":1336280419,"node_id":"IC_kwDOBhmkcs5PpgVj","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-03T23:51:13Z","updated_at":"2022-12-03T23:51:13Z","author_association":"CONTRIBUTOR","body":"严格有序","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336280419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336299056","html_url":"https://github.com/apache/brpc/issues/2032#issuecomment-1336299056","issue_url":"https://api.github.com/repos/apache/brpc/issues/2032","id":1336299056,"node_id":"IC_kwDOBhmkcs5Ppk4w","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T01:55:34Z","updated_at":"2022-12-04T01:55:34Z","author_association":"NONE","body":"> 严格有序\r\n\r\n我们现在有一种需求,  同一userId的请求需要串行执行, 我们又想得到尽可能高的并发, 所以目前的想法是创建大量的ExecutionQueue, 比如1000, 同一userId的请求就哈希到对应的 ExecutionQueue,  这样是合理可行的吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336299056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336302105","html_url":"https://github.com/apache/brpc/issues/2032#issuecomment-1336302105","issue_url":"https://api.github.com/repos/apache/brpc/issues/2032","id":1336302105,"node_id":"IC_kwDOBhmkcs5PploZ","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T02:09:51Z","updated_at":"2022-12-04T02:09:51Z","author_association":"CONTRIBUTOR","body":"我觉得合理，但是你可以根据userid做个hash，这样execution_queue的数量就是可调整的了，不用和userid一一对应。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336302105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336312066","html_url":"https://github.com/apache/brpc/issues/2032#issuecomment-1336312066","issue_url":"https://api.github.com/repos/apache/brpc/issues/2032","id":1336312066,"node_id":"IC_kwDOBhmkcs5PpoEC","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T03:33:41Z","updated_at":"2022-12-04T03:33:41Z","author_association":"NONE","body":"> 我觉得合理，但是你可以根据userid做个hash，这样execution_queue的数量就是可调整的了，不用和userid一一对应。\r\n\r\nthx","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336312066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336312248","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1336312248","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1336312248,"node_id":"IC_kwDOBhmkcs5PpoG4","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T03:35:24Z","updated_at":"2022-12-04T03:35:24Z","author_association":"CONTRIBUTOR","body":"> 1. Is it normal to run two server processes and use one client process to connect with the two server processes when running rdma_performance with using RDMA to get the performance data?\r\n\r\nYes\r\n\r\n\r\n\r\n> 2\\. It rdma-old branch, when connecting one client process  & one server process, it only create one QP when running rdma_performance/verbs. However, in master branch, the client will create lots of QPs when it connects with one server process. Is this the expected behavior? You can check the QPs info with below command:\r\n\r\nIn new branch, there is also one QP between one client and one server. But in order to improve the performance of connection establishment, we create a lot of QPs at the beginning in advance. Only one will be chosen from this pool when the connection is established.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336312248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336312495","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1336312495","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1336312495,"node_id":"IC_kwDOBhmkcs5PpoKv","user":{"login":"changchengx","id":19362263,"node_id":"MDQ6VXNlcjE5MzYyMjYz","avatar_url":"https://avatars.githubusercontent.com/u/19362263?v=4","gravatar_id":"","url":"https://api.github.com/users/changchengx","html_url":"https://github.com/changchengx","followers_url":"https://api.github.com/users/changchengx/followers","following_url":"https://api.github.com/users/changchengx/following{/other_user}","gists_url":"https://api.github.com/users/changchengx/gists{/gist_id}","starred_url":"https://api.github.com/users/changchengx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changchengx/subscriptions","organizations_url":"https://api.github.com/users/changchengx/orgs","repos_url":"https://api.github.com/users/changchengx/repos","events_url":"https://api.github.com/users/changchengx/events{/privacy}","received_events_url":"https://api.github.com/users/changchengx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T03:37:57Z","updated_at":"2022-12-04T03:37:57Z","author_association":"NONE","body":"@Tuvie \r\n>\r\n> But in order to improve the performance of connection establishment\r\n>\r\nHow to improve it? What's the backend mechanism?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336312495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336313733","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1336313733","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1336313733,"node_id":"IC_kwDOBhmkcs5PpoeF","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T03:50:39Z","updated_at":"2022-12-04T03:50:39Z","author_association":"CONTRIBUTOR","body":"> How to improve it? What's the backend mechanism?\r\n\r\nAs I said, we create QPs at the beginning to reduce the overhead of ibv_create_qp at runtime. You don't need to care about it.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336313733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336331743","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1336331743","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1336331743,"node_id":"IC_kwDOBhmkcs5Pps3f","user":{"login":"changchengx","id":19362263,"node_id":"MDQ6VXNlcjE5MzYyMjYz","avatar_url":"https://avatars.githubusercontent.com/u/19362263?v=4","gravatar_id":"","url":"https://api.github.com/users/changchengx","html_url":"https://github.com/changchengx","followers_url":"https://api.github.com/users/changchengx/followers","following_url":"https://api.github.com/users/changchengx/following{/other_user}","gists_url":"https://api.github.com/users/changchengx/gists{/gist_id}","starred_url":"https://api.github.com/users/changchengx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changchengx/subscriptions","organizations_url":"https://api.github.com/users/changchengx/orgs","repos_url":"https://api.github.com/users/changchengx/repos","events_url":"https://api.github.com/users/changchengx/events{/privacy}","received_events_url":"https://api.github.com/users/changchengx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T06:21:09Z","updated_at":"2022-12-04T06:21:09Z","author_association":"NONE","body":"@Tuvie @wwbmmm \r\n>\r\n>we create QPs at the beginning to reduce the overhead of ibv_create_qp at runtime.\r\n>\r\nCould you give the test cases to show the usage scenario?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336331743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336358412","html_url":"https://github.com/apache/brpc/issues/2033#issuecomment-1336358412","issue_url":"https://api.github.com/repos/apache/brpc/issues/2033","id":1336358412,"node_id":"IC_kwDOBhmkcs5PpzYM","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T09:24:16Z","updated_at":"2022-12-04T09:24:16Z","author_association":"CONTRIBUTOR","body":"这个原因是thrift和baidu_std对异常的处理方式不同。baidu_std在框架侧没有捕获异常，thrift捕获了异常并且设置了cntl。\r\n\r\nthrift这样的实现，在调用用户callback时，如果catch到了异常，是需要保证cntl还有效的，因为需要将错误设置到cntl。而done->Run()如果将rpc返回了，那相应的，cntl、request、response这些也都会释放，所以目前是需要等callback结束，才会rpc返回。\r\n\r\n这里建议是将rpc返回之后的工作放到其他线程或者bthread做。如果一定要放在callback里的话，靠hack也可以实现，但这样会依赖thrift协议本身实现的内部逻辑，不太建议，可以看下ProcessThriftFramedRequestNoExcept函数的逻辑","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336358412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336375306","html_url":"https://github.com/apache/brpc/issues/2033#issuecomment-1336375306","issue_url":"https://api.github.com/repos/apache/brpc/issues/2033","id":1336375306,"node_id":"IC_kwDOBhmkcs5Pp3gK","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T10:44:32Z","updated_at":"2022-12-04T10:44:32Z","author_association":"NONE","body":"> ProcessThriftFramedRequestNoExcept\r\n\r\n好的，感谢，我看下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336375306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336434709","html_url":"https://github.com/apache/brpc/pull/2035#issuecomment-1336434709","issue_url":"https://api.github.com/repos/apache/brpc/issues/2035","id":1336434709,"node_id":"IC_kwDOBhmkcs5PqGAV","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-04T15:05:09Z","updated_at":"2022-12-04T15:08:55Z","author_association":"MEMBER","body":"> ### What problem does this PR solve?\r\n> Issue Number:\r\n> \r\n> Problem Summary: 目前打开single_repeated_to_array开关后，pb转json只支持root case，但是打开array_to_single_repeated开关，json转pb没有限制root case。这样会导致json转pb，pb再转回json，前后的json结构发生了变化，不符合预期。例如：\r\n> \r\n> ```\r\n> # pb\r\n> meesage Single {\r\n>     repeated int ids;\r\n> }\r\n> \r\n> message Test {\r\n>     Single single;\r\n> }\r\n> \r\n> # 打开array_to_single_repeated开关后，以下json可以转为Test\r\n> {\r\n>     \"ids\": [1,2,3]\r\n> }\r\n\r\n这个可以转为 Test? 感觉转换后应该是空 Test，看代码应该是从 json 中查找 field 进行转换，找不到 single 不应该进入到内层。\r\n例子里 ids 是不是应该是 single?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336434709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336627772","html_url":"https://github.com/apache/brpc/pull/2035#issuecomment-1336627772","issue_url":"https://api.github.com/repos/apache/brpc/issues/2035","id":1336627772,"node_id":"IC_kwDOBhmkcs5Pq1I8","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T02:03:15Z","updated_at":"2022-12-05T02:03:15Z","author_association":"CONTRIBUTOR","body":"> > ### What problem does this PR solve?\r\n> > Issue Number:\r\n> > Problem Summary: 目前打开single_repeated_to_array开关后，pb转json只支持root case，但是打开array_to_single_repeated开关，json转pb没有限制root case。这样会导致json转pb，pb再转回json，前后的json结构发生了变化，不符合预期。例如：\r\n> > ```\r\n> > # pb\r\n> > meesage Single {\r\n> >     repeated int ids;\r\n> > }\r\n> > \r\n> > message Test {\r\n> >     Single single;\r\n> > }\r\n> > \r\n> > # 打开array_to_single_repeated开关后，以下json可以转为Test\r\n> > {\r\n> >     \"ids\": [1,2,3]\r\n> > }\r\n> > ```\r\n> \r\n> 这个可以转为 Test? 感觉转换后应该是空 Test，看代码应该是从 json 中查找 field 进行转换，找不到 single 不应该进入到内层。 例子里 ids 是不是应该是 single?\r\n\r\n嗯嗯，确实写错了，应该是single。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336627772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336672187","html_url":"https://github.com/apache/brpc/issues/2025#issuecomment-1336672187","issue_url":"https://api.github.com/repos/apache/brpc/issues/2025","id":1336672187,"node_id":"IC_kwDOBhmkcs5Pq_-7","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T03:06:45Z","updated_at":"2022-12-05T03:06:45Z","author_association":"CONTRIBUTOR","body":"@SillyBoyenjoy 可以试试PR #2037 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336672187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336726349","html_url":"https://github.com/apache/brpc/pull/1814#issuecomment-1336726349","issue_url":"https://api.github.com/repos/apache/brpc/issues/1814","id":1336726349,"node_id":"IC_kwDOBhmkcs5PrNNN","user":{"login":"ChinaChenp","id":15309278,"node_id":"MDQ6VXNlcjE1MzA5Mjc4","avatar_url":"https://avatars.githubusercontent.com/u/15309278?v=4","gravatar_id":"","url":"https://api.github.com/users/ChinaChenp","html_url":"https://github.com/ChinaChenp","followers_url":"https://api.github.com/users/ChinaChenp/followers","following_url":"https://api.github.com/users/ChinaChenp/following{/other_user}","gists_url":"https://api.github.com/users/ChinaChenp/gists{/gist_id}","starred_url":"https://api.github.com/users/ChinaChenp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChinaChenp/subscriptions","organizations_url":"https://api.github.com/users/ChinaChenp/orgs","repos_url":"https://api.github.com/users/ChinaChenp/repos","events_url":"https://api.github.com/users/ChinaChenp/events{/privacy}","received_events_url":"https://api.github.com/users/ChinaChenp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T04:13:41Z","updated_at":"2022-12-05T04:13:41Z","author_association":"NONE","body":"我们刚好也遇到这个问题，居然已经修复了，感谢大佬们的贡献；","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336726349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336813489","html_url":"https://github.com/apache/brpc/issues/2040#issuecomment-1336813489","issue_url":"https://api.github.com/repos/apache/brpc/issues/2040","id":1336813489,"node_id":"IC_kwDOBhmkcs5Priex","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T06:30:58Z","updated_at":"2022-12-05T06:30:58Z","author_association":"CONTRIBUTOR","body":"本周我提交下，内部版本已经支持了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336813489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336814175","html_url":"https://github.com/apache/brpc/issues/2039#issuecomment-1336814175","issue_url":"https://api.github.com/repos/apache/brpc/issues/2039","id":1336814175,"node_id":"IC_kwDOBhmkcs5Pripf","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T06:31:54Z","updated_at":"2022-12-05T06:31:54Z","author_association":"CONTRIBUTOR","body":"有TTransportException的报错具体信息吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336814175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336823107","html_url":"https://github.com/apache/brpc/issues/2040#issuecomment-1336823107","issue_url":"https://api.github.com/repos/apache/brpc/issues/2040","id":1336823107,"node_id":"IC_kwDOBhmkcs5Prk1D","user":{"login":"ldak4747","id":10608575,"node_id":"MDQ6VXNlcjEwNjA4NTc1","avatar_url":"https://avatars.githubusercontent.com/u/10608575?v=4","gravatar_id":"","url":"https://api.github.com/users/ldak4747","html_url":"https://github.com/ldak4747","followers_url":"https://api.github.com/users/ldak4747/followers","following_url":"https://api.github.com/users/ldak4747/following{/other_user}","gists_url":"https://api.github.com/users/ldak4747/gists{/gist_id}","starred_url":"https://api.github.com/users/ldak4747/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ldak4747/subscriptions","organizations_url":"https://api.github.com/users/ldak4747/orgs","repos_url":"https://api.github.com/users/ldak4747/repos","events_url":"https://api.github.com/users/ldak4747/events{/privacy}","received_events_url":"https://api.github.com/users/ldak4747/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T06:45:58Z","updated_at":"2022-12-05T06:45:58Z","author_association":"CONTRIBUTOR","body":"非常的感谢，我怎么能及时知道更新呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336823107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336826037","html_url":"https://github.com/apache/brpc/pull/2037#issuecomment-1336826037","issue_url":"https://api.github.com/repos/apache/brpc/issues/2037","id":1336826037,"node_id":"IC_kwDOBhmkcs5Prli1","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T06:50:38Z","updated_at":"2022-12-05T06:50:38Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336826037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336828764","html_url":"https://github.com/apache/brpc/issues/2039#issuecomment-1336828764","issue_url":"https://api.github.com/repos/apache/brpc/issues/2039","id":1336828764,"node_id":"IC_kwDOBhmkcs5PrmNc","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T06:55:12Z","updated_at":"2022-12-05T06:55:12Z","author_association":"NONE","body":"> 有TTransportException的报错具体信息吗\r\n\r\n直接触发了thrift jar的exception，看起来是read返回信息时抛出的，但是服务端没有收到这条信息。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336828764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336832407","html_url":"https://github.com/apache/brpc/issues/2040#issuecomment-1336832407","issue_url":"https://api.github.com/repos/apache/brpc/issues/2040","id":1336832407,"node_id":"IC_kwDOBhmkcs5PrnGX","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T07:01:00Z","updated_at":"2022-12-05T07:01:00Z","author_association":"CONTRIBUTOR","body":"我提交完后，在这里at你，你也可以[订阅brpc邮件](https://brpc.apache.org/zh/docs/community/mailing_list/)。\r\n另外：欢迎提交 [贵公司的使用案例](https://github.com/apache/incubator-brpc/issues/1640)，帮助bRPC越来越好。\r\n十分感谢。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336832407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336846278","html_url":"https://github.com/apache/brpc/issues/2039#issuecomment-1336846278","issue_url":"https://api.github.com/repos/apache/brpc/issues/2039","id":1336846278,"node_id":"IC_kwDOBhmkcs5PrqfG","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T07:12:45Z","updated_at":"2022-12-05T07:12:45Z","author_association":"NONE","body":"> 有TTransportException的报错具体信息吗\r\n\r\nthrift jar里对应代码位置的细节见如下截图：\r\n![image](https://user-images.githubusercontent.com/26559935/205573745-3f0d8ed8-313e-4ab7-a99b-44a191c36162.png)\r\n![image](https://user-images.githubusercontent.com/26559935/205573762-c64c9905-6201-49ed-96cc-72568fd1088c.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336846278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1337244158","html_url":"https://github.com/apache/brpc/issues/2040#issuecomment-1337244158","issue_url":"https://api.github.com/repos/apache/brpc/issues/2040","id":1337244158,"node_id":"IC_kwDOBhmkcs5PtLn-","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T12:15:35Z","updated_at":"2022-12-05T12:15:35Z","author_association":"CONTRIBUTOR","body":"> 非常的感谢，我怎么能及时知道更新呢？\r\n\r\n@ldak4747 可以试试 #2041 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1337244158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1337339134","html_url":"https://github.com/apache/brpc/issues/2039#issuecomment-1337339134","issue_url":"https://api.github.com/repos/apache/brpc/issues/2039","id":1337339134,"node_id":"IC_kwDOBhmkcs5Ptiz-","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-05T13:26:50Z","updated_at":"2022-12-05T13:26:50Z","author_association":"NONE","body":"问题已找到，服务端关闭了超时没有通信的链接，关闭问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1337339134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338692366","html_url":"https://github.com/apache/brpc/issues/2040#issuecomment-1338692366","issue_url":"https://api.github.com/repos/apache/brpc/issues/2040","id":1338692366,"node_id":"IC_kwDOBhmkcs5PytMO","user":{"login":"ldak4747","id":10608575,"node_id":"MDQ6VXNlcjEwNjA4NTc1","avatar_url":"https://avatars.githubusercontent.com/u/10608575?v=4","gravatar_id":"","url":"https://api.github.com/users/ldak4747","html_url":"https://github.com/ldak4747","followers_url":"https://api.github.com/users/ldak4747/followers","following_url":"https://api.github.com/users/ldak4747/following{/other_user}","gists_url":"https://api.github.com/users/ldak4747/gists{/gist_id}","starred_url":"https://api.github.com/users/ldak4747/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ldak4747/subscriptions","organizations_url":"https://api.github.com/users/ldak4747/orgs","repos_url":"https://api.github.com/users/ldak4747/repos","events_url":"https://api.github.com/users/ldak4747/events{/privacy}","received_events_url":"https://api.github.com/users/ldak4747/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T03:31:06Z","updated_at":"2022-12-06T03:31:06Z","author_association":"CONTRIBUTOR","body":"好的我试试～","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338692366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338695222","html_url":"https://github.com/apache/brpc/pull/2041#issuecomment-1338695222","issue_url":"https://api.github.com/repos/apache/brpc/issues/2041","id":1338695222,"node_id":"IC_kwDOBhmkcs5Pyt42","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T03:37:18Z","updated_at":"2022-12-06T03:37:18Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338695222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338811947","html_url":"https://github.com/apache/brpc/pull/2027#issuecomment-1338811947","issue_url":"https://api.github.com/repos/apache/brpc/issues/2027","id":1338811947,"node_id":"IC_kwDOBhmkcs5PzKYr","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T06:04:41Z","updated_at":"2022-12-06T06:04:41Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338811947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338817575","html_url":"https://github.com/apache/brpc/pull/1975#issuecomment-1338817575","issue_url":"https://api.github.com/repos/apache/brpc/issues/1975","id":1338817575,"node_id":"IC_kwDOBhmkcs5PzLwn","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T06:10:39Z","updated_at":"2022-12-06T06:10:39Z","author_association":"CONTRIBUTOR","body":"建议补充单测","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338817575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338859738","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1338859738","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1338859738,"node_id":"IC_kwDOBhmkcs5PzWDa","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T06:37:09Z","updated_at":"2022-12-06T06:37:09Z","author_association":"CONTRIBUTOR","body":"@changchengx You can set rdma_prepared_qp_cnt=0 to disable this feature to see the difference in your setup.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338859738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338860829","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1338860829","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1338860829,"node_id":"IC_kwDOBhmkcs5PzWUd","user":{"login":"changchengx","id":19362263,"node_id":"MDQ6VXNlcjE5MzYyMjYz","avatar_url":"https://avatars.githubusercontent.com/u/19362263?v=4","gravatar_id":"","url":"https://api.github.com/users/changchengx","html_url":"https://github.com/changchengx","followers_url":"https://api.github.com/users/changchengx/followers","following_url":"https://api.github.com/users/changchengx/following{/other_user}","gists_url":"https://api.github.com/users/changchengx/gists{/gist_id}","starred_url":"https://api.github.com/users/changchengx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changchengx/subscriptions","organizations_url":"https://api.github.com/users/changchengx/orgs","repos_url":"https://api.github.com/users/changchengx/repos","events_url":"https://api.github.com/users/changchengx/events{/privacy}","received_events_url":"https://api.github.com/users/changchengx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T06:38:49Z","updated_at":"2022-12-06T06:38:49Z","author_association":"NONE","body":"@Tuvie Feedback later","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1338860829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1339255698","html_url":"https://github.com/apache/brpc/issues/705#issuecomment-1339255698","issue_url":"https://api.github.com/repos/apache/brpc/issues/705","id":1339255698,"node_id":"IC_kwDOBhmkcs5P02uS","user":{"login":"ryankeke","id":6779109,"node_id":"MDQ6VXNlcjY3NzkxMDk=","avatar_url":"https://avatars.githubusercontent.com/u/6779109?v=4","gravatar_id":"","url":"https://api.github.com/users/ryankeke","html_url":"https://github.com/ryankeke","followers_url":"https://api.github.com/users/ryankeke/followers","following_url":"https://api.github.com/users/ryankeke/following{/other_user}","gists_url":"https://api.github.com/users/ryankeke/gists{/gist_id}","starred_url":"https://api.github.com/users/ryankeke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryankeke/subscriptions","organizations_url":"https://api.github.com/users/ryankeke/orgs","repos_url":"https://api.github.com/users/ryankeke/repos","events_url":"https://api.github.com/users/ryankeke/events{/privacy}","received_events_url":"https://api.github.com/users/ryankeke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T12:32:15Z","updated_at":"2022-12-06T12:32:15Z","author_association":"NONE","body":"@phye , 请问这个问题是怎么解决的，我也遇到了同样的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1339255698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1340525163","html_url":"https://github.com/apache/brpc/issues/1488#issuecomment-1340525163","issue_url":"https://api.github.com/repos/apache/brpc/issues/1488","id":1340525163,"node_id":"IC_kwDOBhmkcs5P5spr","user":{"login":"jzy2009","id":95466414,"node_id":"U_kgDOBbCzrg","avatar_url":"https://avatars.githubusercontent.com/u/95466414?v=4","gravatar_id":"","url":"https://api.github.com/users/jzy2009","html_url":"https://github.com/jzy2009","followers_url":"https://api.github.com/users/jzy2009/followers","following_url":"https://api.github.com/users/jzy2009/following{/other_user}","gists_url":"https://api.github.com/users/jzy2009/gists{/gist_id}","starred_url":"https://api.github.com/users/jzy2009/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzy2009/subscriptions","organizations_url":"https://api.github.com/users/jzy2009/orgs","repos_url":"https://api.github.com/users/jzy2009/repos","events_url":"https://api.github.com/users/jzy2009/events{/privacy}","received_events_url":"https://api.github.com/users/jzy2009/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T07:40:49Z","updated_at":"2022-12-07T07:40:49Z","author_association":"NONE","body":"才看到，感谢，我后来通过替换成jemalloc解决的\n\nwangjin ***@***.***> 于2022年8月5日周五 18:41写道：\n\n> 跟这个问题有点像https://zhuanlan.zhihu.com/p/81683409\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-brpc/issues/1488#issuecomment-1206305333>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AWYLHLRWNX7J53F53MNBQBDVXTVVNANCNFSM5APWEGJQ>\n> .\n> You are receiving this because you commented.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1340525163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1340609222","html_url":"https://github.com/apache/brpc/issues/167#issuecomment-1340609222","issue_url":"https://api.github.com/repos/apache/brpc/issues/167","id":1340609222,"node_id":"IC_kwDOBhmkcs5P6BLG","user":{"login":"Chadlucc","id":35052472,"node_id":"MDQ6VXNlcjM1MDUyNDcy","avatar_url":"https://avatars.githubusercontent.com/u/35052472?v=4","gravatar_id":"","url":"https://api.github.com/users/Chadlucc","html_url":"https://github.com/Chadlucc","followers_url":"https://api.github.com/users/Chadlucc/followers","following_url":"https://api.github.com/users/Chadlucc/following{/other_user}","gists_url":"https://api.github.com/users/Chadlucc/gists{/gist_id}","starred_url":"https://api.github.com/users/Chadlucc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Chadlucc/subscriptions","organizations_url":"https://api.github.com/users/Chadlucc/orgs","repos_url":"https://api.github.com/users/Chadlucc/repos","events_url":"https://api.github.com/users/Chadlucc/events{/privacy}","received_events_url":"https://api.github.com/users/Chadlucc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T08:58:25Z","updated_at":"2022-12-07T08:58:25Z","author_association":"NONE","body":"不起作用啊","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1340609222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341838179","html_url":"https://github.com/apache/brpc/issues/2040#issuecomment-1341838179","issue_url":"https://api.github.com/repos/apache/brpc/issues/2040","id":1341838179,"node_id":"IC_kwDOBhmkcs5P-tNj","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T01:18:56Z","updated_at":"2022-12-08T01:18:56Z","author_association":"CONTRIBUTOR","body":"> 好的我试试～\r\n\r\n先close了，有问题可以reopen。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341838179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341892154","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1341892154","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1341892154,"node_id":"IC_kwDOBhmkcs5P-6Y6","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T02:26:38Z","updated_at":"2022-12-08T02:26:38Z","author_association":"CONTRIBUTOR","body":"贴下代码吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341892154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341893450","html_url":"https://github.com/apache/brpc/issues/2043#issuecomment-1341893450","issue_url":"https://api.github.com/repos/apache/brpc/issues/2043","id":1341893450,"node_id":"IC_kwDOBhmkcs5P-6tK","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T02:28:50Z","updated_at":"2022-12-08T02:28:50Z","author_association":"CONTRIBUTOR","body":"可以使用[streaming rpc](https://github.com/apache/incubator-brpc/blob/master/docs/cn/streaming_rpc.md) 进行双向流通信","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341893450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341927567","html_url":"https://github.com/apache/brpc/issues/2043#issuecomment-1341927567","issue_url":"https://api.github.com/repos/apache/brpc/issues/2043","id":1341927567,"node_id":"IC_kwDOBhmkcs5P_DCP","user":{"login":"sudo-rm-rf-run","id":8653159,"node_id":"MDQ6VXNlcjg2NTMxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/8653159?v=4","gravatar_id":"","url":"https://api.github.com/users/sudo-rm-rf-run","html_url":"https://github.com/sudo-rm-rf-run","followers_url":"https://api.github.com/users/sudo-rm-rf-run/followers","following_url":"https://api.github.com/users/sudo-rm-rf-run/following{/other_user}","gists_url":"https://api.github.com/users/sudo-rm-rf-run/gists{/gist_id}","starred_url":"https://api.github.com/users/sudo-rm-rf-run/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudo-rm-rf-run/subscriptions","organizations_url":"https://api.github.com/users/sudo-rm-rf-run/orgs","repos_url":"https://api.github.com/users/sudo-rm-rf-run/repos","events_url":"https://api.github.com/users/sudo-rm-rf-run/events{/privacy}","received_events_url":"https://api.github.com/users/sudo-rm-rf-run/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T03:13:26Z","updated_at":"2022-12-08T03:13:26Z","author_association":"NONE","body":"     感谢回答，我验证了下[streaming rpc](https://github.com/apache/incubator-brpc/blob/master/docs/cn/streaming_rpc.md)，确实可以达到需求，但是代码量增多不少，不利为维护。\r\n    多进程通讯，是否可以按照即是服务端也是客户端进行设计，这样也是可以达到我们的业务需求。弊端是要多维护一条链路。或者您是否有更好的建议？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341927567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341951772","html_url":"https://github.com/apache/brpc/issues/2043#issuecomment-1341951772","issue_url":"https://api.github.com/repos/apache/brpc/issues/2043","id":1341951772,"node_id":"IC_kwDOBhmkcs5P_I8c","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T03:50:45Z","updated_at":"2022-12-08T03:50:45Z","author_association":"CONTRIBUTOR","body":"> 服务端也是客户端进行设计\r\n\r\n你是指服务端反向连接客户端是吗？这样当然也是可以的，不过客户端需要多监听一个端口，并且服务端需要知晓这个端口。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341951772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341956994","html_url":"https://github.com/apache/brpc/issues/2043#issuecomment-1341956994","issue_url":"https://api.github.com/repos/apache/brpc/issues/2043","id":1341956994,"node_id":"IC_kwDOBhmkcs5P_KOC","user":{"login":"sudo-rm-rf-run","id":8653159,"node_id":"MDQ6VXNlcjg2NTMxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/8653159?v=4","gravatar_id":"","url":"https://api.github.com/users/sudo-rm-rf-run","html_url":"https://github.com/sudo-rm-rf-run","followers_url":"https://api.github.com/users/sudo-rm-rf-run/followers","following_url":"https://api.github.com/users/sudo-rm-rf-run/following{/other_user}","gists_url":"https://api.github.com/users/sudo-rm-rf-run/gists{/gist_id}","starred_url":"https://api.github.com/users/sudo-rm-rf-run/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudo-rm-rf-run/subscriptions","organizations_url":"https://api.github.com/users/sudo-rm-rf-run/orgs","repos_url":"https://api.github.com/users/sudo-rm-rf-run/repos","events_url":"https://api.github.com/users/sudo-rm-rf-run/events{/privacy}","received_events_url":"https://api.github.com/users/sudo-rm-rf-run/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T03:57:32Z","updated_at":"2022-12-08T03:57:32Z","author_association":"NONE","body":"是的，就是一个进程可以充当服务端也可以当客户端，应该是挺多业务场景，需要这样设计的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341956994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341969283","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1341969283","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1341969283,"node_id":"IC_kwDOBhmkcs5P_NOD","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T04:12:22Z","updated_at":"2022-12-08T04:12:22Z","author_association":"NONE","body":"> 贴下代码吧\r\n\r\n![image](https://user-images.githubusercontent.com/17529657/206354349-c8929561-2d0e-40e5-a8e2-79f4f43ed649.png)\r\n这个简单的demo执行是正常的, 我们的服务器上打印不正常, 打印的所有cur_stack都是一个值, 所以的cur_tid都是0, 而, 这个demo不是 (基本完全一样的代码),  唯一的区别是, demo的 bthread_start_backgroud是在主线程执行, 而我们服务器上是在 pthread_create 出来的线程中执行的.  但是 bthread_start_backgroud 返回的tid是正确的值, 就是在真正的逻辑中打印的tid都是0, stack都是同一值, 但是看日志又是并发的, 不是串行的,  而打印的stack是一个值, 我理解应该是串行的, 这就矛盾了, 麻烦帮忙看看, 有什么可能导致了服务和demo的不同","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341969283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341971247","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1341971247","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1341971247,"node_id":"IC_kwDOBhmkcs5P_Nsv","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T04:14:31Z","updated_at":"2022-12-08T04:14:31Z","author_association":"NONE","body":"> \r\n\r\n我在 RunClosure中加睡眠, 无论bthread_usleep还是 usleep, 都是同样的结果. is_main_task 在demo中基本都是false, 而在我们的服务器上绝大部分是true, 很偶尔会有false","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1341971247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342070190","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1342070190","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1342070190,"node_id":"IC_kwDOBhmkcs5P_l2u","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T05:27:48Z","updated_at":"2022-12-08T05:27:48Z","author_association":"CONTRIBUTOR","body":"可以在你服务器上执行函数里加个abort，看一下堆栈吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342070190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342103596","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1342103596","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1342103596,"node_id":"IC_kwDOBhmkcs5P_uAs","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T06:02:21Z","updated_at":"2022-12-08T06:02:21Z","author_association":"NONE","body":"> 可以在你服务器上执行函数里加个abort，看一下堆栈吗\r\n\r\n![image](https://user-images.githubusercontent.com/17529657/206369545-8ded25c5-1065-4536-90a8-eb897280e1ad.png)\r\n调用bthread_start_back_groud之前的堆栈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342103596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342123494","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1342123494","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1342123494,"node_id":"IC_kwDOBhmkcs5P_y3m","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T06:19:23Z","updated_at":"2022-12-08T06:19:23Z","author_association":"NONE","body":"> 可以在你服务器上执行函数里加个abort，看一下堆栈吗\r\n\r\n![image](https://user-images.githubusercontent.com/17529657/206372447-05032fd0-29a0-4226-9492-8d430538f54d.png)\r\nbthread环境下的堆栈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342123494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342144228","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1342144228","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1342144228,"node_id":"IC_kwDOBhmkcs5P_37k","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T06:38:45Z","updated_at":"2022-12-08T06:38:45Z","author_association":"NONE","body":"> 可以在你服务器上执行函数里加个abort，看一下堆栈吗\r\n\r\n![image](https://user-images.githubusercontent.com/17529657/206375911-7434d569-e8e9-407c-80b6-feb5580b6b46.png)\r\n可以看到调用函数得到的局部变量与gdb打印的真实值不一样,  gdb打印的真实值看起来是正确的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342144228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342256989","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1342256989","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1342256989,"node_id":"IC_kwDOBhmkcs5QATdd","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T08:23:06Z","updated_at":"2022-12-08T08:23:06Z","author_association":"CONTRIBUTOR","body":"再对比一下g、g->current_task()在日志和在gdb中的值看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342256989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342577652","html_url":"https://github.com/apache/brpc/issues/2044#issuecomment-1342577652","issue_url":"https://api.github.com/repos/apache/brpc/issues/2044","id":1342577652,"node_id":"IC_kwDOBhmkcs5QBhv0","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T11:32:21Z","updated_at":"2022-12-08T11:32:21Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/17529657/206436195-6cb72e2e-f1f2-412c-a398-9d1d126ea039.png)\r\n![image](https://user-images.githubusercontent.com/17529657/206436234-d34f700f-ac59-4f6b-abe8-81d9ab4c54b8.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342577652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342616444","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1342616444","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1342616444,"node_id":"IC_kwDOBhmkcs5QBrN8","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T11:56:20Z","updated_at":"2022-12-08T11:56:20Z","author_association":"CONTRIBUTOR","body":"不支持 redis cluster","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1342616444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343755226","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343755226","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343755226,"node_id":"IC_kwDOBhmkcs5QGBPa","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T02:23:05Z","updated_at":"2022-12-09T02:23:38Z","author_association":"NONE","body":"> 不支持 redis cluster\r\n\r\n看文档是支持的啊   \r\nhttps://github.com/apache/incubator-brpc/blob/master/docs/cn/redis_client.md#%E8%AE%BF%E9%97%AEredis%E9%9B%86%E7%BE%A4\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343755226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343776617","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343776617","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343776617,"node_id":"IC_kwDOBhmkcs5QGGdp","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T02:56:49Z","updated_at":"2022-12-09T02:56:49Z","author_association":"CONTRIBUTOR","body":"> > 不支持 redis cluster\r\n> \r\n> 看文档是支持的啊 https://github.com/apache/incubator-brpc/blob/master/docs/cn/redis_client.md#%E8%AE%BF%E9%97%AEredis%E9%9B%86%E7%BE%A4\r\n\r\n[redis cluster规范](http://redisdoc.com/topic/cluster-spec.html)要求客户端支持处理MOVED和ASK指令，目前brpc并未支持\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343776617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343779415","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343779415","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343779415,"node_id":"IC_kwDOBhmkcs5QGHJX","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T03:01:43Z","updated_at":"2022-12-09T03:01:43Z","author_association":"CONTRIBUTOR","body":"不过你上面的报错是因为没有设置Controller的request_code","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343779415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343781500","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343781500","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343781500,"node_id":"IC_kwDOBhmkcs5QGHp8","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T03:04:21Z","updated_at":"2022-12-09T03:04:21Z","author_association":"NONE","body":"> > > 不支持 redis cluster\r\n> > \r\n> > \r\n> > 看文档是支持的啊 https://github.com/apache/incubator-brpc/blob/master/docs/cn/redis_client.md#%E8%AE%BF%E9%97%AEredis%E9%9B%86%E7%BE%A4\r\n> \r\n> [redis cluster规范](http://redisdoc.com/topic/cluster-spec.html)要求客户端支持处理MOVED和ASK指令，目前brpc并未支持\r\n\r\n有支持的计划么, 目前cluster应该很普及了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343781500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343782916","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343782916","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343782916,"node_id":"IC_kwDOBhmkcs5QGIAE","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T03:05:56Z","updated_at":"2022-12-09T03:05:56Z","author_association":"NONE","body":"> > > 不支持 redis cluster\r\n> > \r\n> > \r\n> > 看文档是支持的啊 https://github.com/apache/incubator-brpc/blob/master/docs/cn/redis_client.md#%E8%AE%BF%E9%97%AEredis%E9%9B%86%E7%BE%A4\r\n> \r\n> [redis cluster规范](http://redisdoc.com/topic/cluster-spec.html)要求客户端支持处理MOVED和ASK指令，目前brpc并未支持\r\n\r\n目前的想法是使用别的异步客户端,  在bthread环境下调用异步redis, 之后yield出去, 在异步redis的callback中唤醒yield出去的bthread, 这种是否可行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343782916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343784149","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1343784149","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1343784149,"node_id":"IC_kwDOBhmkcs5QGITV","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T03:07:25Z","updated_at":"2022-12-09T03:07:25Z","author_association":"NONE","body":"> 再对比一下g、g->current_task()在日志和在gdb中的值看看\r\n\r\n![image](https://user-images.githubusercontent.com/17529657/206615243-0af5eea4-fb92-483e-87ef-85cd018f79d5.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343784149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343857320","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343857320","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343857320,"node_id":"IC_kwDOBhmkcs5QGaKo","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:10:40Z","updated_at":"2022-12-09T05:10:40Z","author_association":"CONTRIBUTOR","body":"> 目前的想法是使用别的异步客户端, 在bthread环境下调用异步redis, 之后yield出去, 在异步redis的callback中唤醒yield出去的bthread, 这种是否可行\r\n\r\n图啥呢，直接用同步接口就能达到这个效果","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343857320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343858529","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343858529","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343858529,"node_id":"IC_kwDOBhmkcs5QGadh","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:11:38Z","updated_at":"2022-12-09T05:11:38Z","author_association":"CONTRIBUTOR","body":"> \r\n> 有支持的计划么, 目前cluster应该很普及了\r\n\r\n目前没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343858529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343861542","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1343861542","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1343861542,"node_id":"IC_kwDOBhmkcs5QGbMm","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:16:14Z","updated_at":"2022-12-09T05:16:14Z","author_association":"CONTRIBUTOR","body":"看起来就是\r\ng->current_task()获取到的值不等于g->_cur_meta\r\n但是代码就是这样写的：\r\n\r\n```cpp\r\nTaskMeta* current_task() const { return _cur_meta; }\r\n```\r\n\r\n感觉可能是编译器的bug，你可尝试关闭编译优化，看看问题是否还出现","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343861542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343863504","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343863504","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343863504,"node_id":"IC_kwDOBhmkcs5QGbrQ","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:18:32Z","updated_at":"2022-12-09T05:18:32Z","author_association":"NONE","body":"> > 目前的想法是使用别的异步客户端, 在bthread环境下调用异步redis, 之后yield出去, 在异步redis的callback中唤醒yield出去的bthread, 这种是否可行\r\n> \r\n> 图啥呢，直接用同步接口就能达到这个效果\r\n\r\n同步接口, 肯定是io阻塞了啊, 直接阻塞了worker","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343863504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343866194","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1343866194","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1343866194,"node_id":"IC_kwDOBhmkcs5QGcVS","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:20:11Z","updated_at":"2022-12-09T05:20:11Z","author_association":"NONE","body":"> 看起来就是 g->current_task()获取到的值不等于g->_cur_meta 但是代码就是这样写的：\r\n> \r\n> ```c++\r\n> TaskMeta* current_task() const { return _cur_meta; }\r\n> ```\r\n> \r\n> 感觉可能是编译器的bug，你可尝试关闭编译优化，看看问题是否还出现\r\n\r\n我也这么猜测的, 晚点试试看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343866194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343867746","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343867746","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343867746,"node_id":"IC_kwDOBhmkcs5QGcti","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:21:39Z","updated_at":"2022-12-09T05:21:39Z","author_association":"CONTRIBUTOR","body":"同步接口不会阻塞worker的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343867746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343869254","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1343869254","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1343869254,"node_id":"IC_kwDOBhmkcs5QGdFG","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:23:55Z","updated_at":"2022-12-09T05:23:55Z","author_association":"CONTRIBUTOR","body":"> > 看起来就是 g->current_task()获取到的值不等于g->_cur_meta 但是代码就是这样写的：\r\n> > ```c++\r\n> > TaskMeta* current_task() const { return _cur_meta; }\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > 感觉可能是编译器的bug，你可尝试关闭编译优化，看看问题是否还出现\r\n> \r\n> 我也这么猜测的, 晚点试试看\r\n\r\n想到一个问题，你是否没有在头文件中定义NDEBUG宏？\r\n如果有的代码有这个宏，有的代码没有，会导致TaskGroup的ABI不兼容：\r\n\r\nhttps://github.com/apache/incubator-brpc/blob/master/src/bthread/task_group.h#L224\r\n\r\n从而影响_cur_meta字段的读取","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343869254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343869737","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1343869737","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1343869737,"node_id":"IC_kwDOBhmkcs5QGdMp","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T05:24:58Z","updated_at":"2022-12-09T05:24:58Z","author_association":"NONE","body":"> 同步接口不会阻塞worker的\r\n\r\n因为我们要使用cluster, 而brpc不支持, 所以无法使用brpc自带的redis客户端.  ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1343869737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1345792310","html_url":"https://github.com/apache/brpc/issues/2046#issuecomment-1345792310","issue_url":"https://api.github.com/repos/apache/brpc/issues/2046","id":1345792310,"node_id":"IC_kwDOBhmkcs5QNyk2","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T02:56:38Z","updated_at":"2022-12-12T02:56:38Z","author_association":"CONTRIBUTOR","body":"用controller.http_request().uri().set_host()可以吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1345792310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1346192593","html_url":"https://github.com/apache/brpc/issues/2046#issuecomment-1346192593","issue_url":"https://api.github.com/repos/apache/brpc/issues/2046","id":1346192593,"node_id":"IC_kwDOBhmkcs5QPUTR","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T09:56:57Z","updated_at":"2022-12-12T09:56:57Z","author_association":"NONE","body":"> 用controller.http_request().uri().set_host()可以吗？\r\n\r\n试了下, 没有加上,  也试了下 \"cntl.http_request().SetHeader(\"Host, \"xxxxxx\") 也不行 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1346192593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1346251636","html_url":"https://github.com/apache/brpc/issues/2042#issuecomment-1346251636","issue_url":"https://api.github.com/repos/apache/brpc/issues/2042","id":1346251636,"node_id":"IC_kwDOBhmkcs5QPit0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T10:40:11Z","updated_at":"2022-12-12T10:40:11Z","author_association":"CONTRIBUTOR","body":"@jiangdongzi 试试PR #2047 能否解决这个问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1346251636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1347654708","html_url":"https://github.com/apache/brpc/issues/2048#issuecomment-1347654708","issue_url":"https://api.github.com/repos/apache/brpc/issues/2048","id":1347654708,"node_id":"IC_kwDOBhmkcs5QU5Q0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:20:25Z","updated_at":"2022-12-13T02:20:25Z","author_association":"CONTRIBUTOR","body":"目前已经线上使用，暂时没有开源计划","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1347654708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1357038511","html_url":"https://github.com/apache/brpc/issues/1769#issuecomment-1357038511","issue_url":"https://api.github.com/repos/apache/brpc/issues/1769","id":1357038511,"node_id":"IC_kwDOBhmkcs5Q4sOv","user":{"login":"jialei-jialei","id":13553842,"node_id":"MDQ6VXNlcjEzNTUzODQy","avatar_url":"https://avatars.githubusercontent.com/u/13553842?v=4","gravatar_id":"","url":"https://api.github.com/users/jialei-jialei","html_url":"https://github.com/jialei-jialei","followers_url":"https://api.github.com/users/jialei-jialei/followers","following_url":"https://api.github.com/users/jialei-jialei/following{/other_user}","gists_url":"https://api.github.com/users/jialei-jialei/gists{/gist_id}","starred_url":"https://api.github.com/users/jialei-jialei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jialei-jialei/subscriptions","organizations_url":"https://api.github.com/users/jialei-jialei/orgs","repos_url":"https://api.github.com/users/jialei-jialei/repos","events_url":"https://api.github.com/users/jialei-jialei/events{/privacy}","received_events_url":"https://api.github.com/users/jialei-jialei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T03:25:11Z","updated_at":"2022-12-19T03:25:11Z","author_association":"NONE","body":"> 请问下这个怎么解决的呢，遇到了同样的问题\r\n\r\n我们把Nginx的负载均衡由7层配置成了4层，就解决了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1357038511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1357130976","html_url":"https://github.com/apache/brpc/issues/2048#issuecomment-1357130976","issue_url":"https://api.github.com/repos/apache/brpc/issues/2048","id":1357130976,"node_id":"IC_kwDOBhmkcs5Q5Czg","user":{"login":"jialei-jialei","id":13553842,"node_id":"MDQ6VXNlcjEzNTUzODQy","avatar_url":"https://avatars.githubusercontent.com/u/13553842?v=4","gravatar_id":"","url":"https://api.github.com/users/jialei-jialei","html_url":"https://github.com/jialei-jialei","followers_url":"https://api.github.com/users/jialei-jialei/followers","following_url":"https://api.github.com/users/jialei-jialei/following{/other_user}","gists_url":"https://api.github.com/users/jialei-jialei/gists{/gist_id}","starred_url":"https://api.github.com/users/jialei-jialei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jialei-jialei/subscriptions","organizations_url":"https://api.github.com/users/jialei-jialei/orgs","repos_url":"https://api.github.com/users/jialei-jialei/repos","events_url":"https://api.github.com/users/jialei-jialei/events{/privacy}","received_events_url":"https://api.github.com/users/jialei-jialei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T05:49:03Z","updated_at":"2022-12-19T05:49:03Z","author_association":"NONE","body":"关键点是改了线程模型，改成了 RTC + polling，高性能的框架基本上都要走这条路，资源切分不共享，绑核","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1357130976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363580219","html_url":"https://github.com/apache/brpc/issues/2055#issuecomment-1363580219","issue_url":"https://api.github.com/repos/apache/brpc/issues/2055","id":1363580219,"node_id":"IC_kwDOBhmkcs5RRpU7","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T03:37:38Z","updated_at":"2022-12-23T03:37:38Z","author_association":"CONTRIBUTOR","body":"是否可以改为\r\n\r\n```cpp\r\nvirtual SubCall Map(int channel_index/*starting from 0*/,\r\n                        int /*channel_count*/,\r\n                        const google::protobuf::MethodDescriptor* method,\r\n                        const google::protobuf::Message* request,\r\n                        google::protobuf::Message* response) {\r\n    return Map(channel_index, method, request, response);\r\n}\r\n```\r\n\r\n兼容一下现有代码","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363580219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363581493","html_url":"https://github.com/apache/brpc/issues/2055#issuecomment-1363581493","issue_url":"https://api.github.com/repos/apache/brpc/issues/2055","id":1363581493,"node_id":"IC_kwDOBhmkcs5RRpo1","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T03:41:05Z","updated_at":"2022-12-23T03:41:05Z","author_association":"CONTRIBUTOR","body":"可以","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363581493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363630416","html_url":"https://github.com/apache/brpc/issues/2054#issuecomment-1363630416","issue_url":"https://api.github.com/repos/apache/brpc/issues/2054","id":1363630416,"node_id":"IC_kwDOBhmkcs5RR1lQ","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T05:25:10Z","updated_at":"2022-12-23T05:27:23Z","author_association":"MEMBER","body":"> ```\r\n> 1、single_repeated_to_array字段的注释中，default是false。\r\n> 2、但是实际使用时发现，默认是开启的。例如\r\n> \"my_field\": [\"value1\"], my_field是一个repeated字段，没有设置single_repeated_to_array的情况下，仍然解析为array\r\n> ```\r\n\r\n参考这个示例：\r\nhttps://github.com/apache/incubator-brpc/blob/master/docs/cn/json2pb.md#repeated-field\r\n\r\n效果是当开启`single_repeated_to_array` 时，序列化为:\r\n```json\r\n[\"value1\"]\r\n```\r\n而不是\r\n```json\r\n{\r\n   \"my_field\": [\"value1\"]\r\n}\r\n```\r\n\r\n假设使用的 proto 是:\r\n```proto\r\nmessage foo {\r\n    repeated string my_field = 1;\r\n}\r\n```\r\n\r\n针对这个 proto, 以及消息:\r\n```json\r\n{\r\n   \"my_field\": [\"value1\"]\r\n}\r\n```\r\n\r\n无论是否设置, 转换为 proto 都应该是正常的.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363630416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363801275","html_url":"https://github.com/apache/brpc/issues/2055#issuecomment-1363801275","issue_url":"https://api.github.com/repos/apache/brpc/issues/2055","id":1363801275,"node_id":"IC_kwDOBhmkcs5RSfS7","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T09:56:04Z","updated_at":"2022-12-23T09:56:04Z","author_association":"CONTRIBUTOR","body":"#2057 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363801275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363967074","html_url":"https://github.com/apache/brpc/issues/2059#issuecomment-1363967074","issue_url":"https://api.github.com/repos/apache/brpc/issues/2059","id":1363967074,"node_id":"IC_kwDOBhmkcs5RTHxi","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T13:48:09Z","updated_at":"2022-12-23T13:48:09Z","author_association":"CONTRIBUTOR","body":"使用的多维度bvar？能否给下使用代码例子？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363967074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363987901","html_url":"https://github.com/apache/brpc/issues/2052#issuecomment-1363987901","issue_url":"https://api.github.com/repos/apache/brpc/issues/2052","id":1363987901,"node_id":"IC_kwDOBhmkcs5RTM29","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T14:14:52Z","updated_at":"2022-12-23T14:14:52Z","author_association":"CONTRIBUTOR","body":"Q1：在client、server两端都是brpc的前提下，attachment更算是proto message的一种补充。proto官方给出大小是有限制的，默认是64MB，硬制是2GB。在限制范围内，attachment和proto的区别在于序列化和反序列化，如果attachment是传proto序列化后的数据，理论上两者差距不大。\r\n\r\nQ2：理论上chunkPB是要大于rpc请求的生命周期\r\n1. 发送端如何去判断请求已经发送完了呢？同步请求rpc server，_stub函数返回时整个rpc交互已经完成收到response信息；异步请求rpc，_stub函数返回只代表请求提交给了rpc框架，结束时调用用户的回调函数；brpc应该没提供接口告诉用户当前请求已经发送了。\r\n2. 在调closure前rpc并未结束，chunkPB都是有效的。\r\n\r\n个人看法，如有错误还请指教~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1363987901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364497672","html_url":"https://github.com/apache/brpc/issues/2052#issuecomment-1364497672","issue_url":"https://api.github.com/repos/apache/brpc/issues/2052","id":1364497672,"node_id":"IC_kwDOBhmkcs5RVJUI","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-24T09:30:13Z","updated_at":"2022-12-24T09:33:57Z","author_association":"CONTRIBUTOR","body":"重新看了下文档，`chunk_PB`在使用异步请求时，`CallMethod`结束后可以释放，前提在done中不需要`chunkPB`信息\r\n![image](https://user-images.githubusercontent.com/49188857/209429944-1b1bf1e9-691c-4082-8dfd-3deed977bbe1.png)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364497672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364823171","html_url":"https://github.com/apache/brpc/issues/2059#issuecomment-1364823171","issue_url":"https://api.github.com/repos/apache/brpc/issues/2059","id":1364823171,"node_id":"IC_kwDOBhmkcs5RWYyD","user":{"login":"17336","id":74393844,"node_id":"MDQ6VXNlcjc0MzkzODQ0","avatar_url":"https://avatars.githubusercontent.com/u/74393844?v=4","gravatar_id":"","url":"https://api.github.com/users/17336","html_url":"https://github.com/17336","followers_url":"https://api.github.com/users/17336/followers","following_url":"https://api.github.com/users/17336/following{/other_user}","gists_url":"https://api.github.com/users/17336/gists{/gist_id}","starred_url":"https://api.github.com/users/17336/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/17336/subscriptions","organizations_url":"https://api.github.com/users/17336/orgs","repos_url":"https://api.github.com/users/17336/repos","events_url":"https://api.github.com/users/17336/events{/privacy}","received_events_url":"https://api.github.com/users/17336/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T02:29:28Z","updated_at":"2022-12-26T02:29:28Z","author_association":"NONE","body":"> 使用的多维度bvar？能否给下使用代码例子？\r\n\r\n不是，单维度的bvar\r\n\r\n```\r\nnamespace other_metric {\r\n    bvar::Adder<int> time;\r\n    bvar::Window<bvar::Adder<int> > time_minitue(\"metric\", \"time\", &time, 60);\r\n}\r\nvoid increase_bvar() {\r\n    while(true){\r\n        other_metric::time<<1;\r\n        std::this_thread::sleep_for(std::chrono::seconds(1));\r\n    }\r\n}\r\n\r\nint main(int argc, char* argv[]) {\r\n    // Parse gflags. We recommend you to use gflags as well.\r\n    GFLAGS_NS::ParseCommandLineFlags(&argc, &argv, true);\r\n\r\n    // Generally you only need one Server.\r\n    brpc::Server server;\r\n\r\n    // Instance of your service.\r\n    example::EchoServiceImpl echo_service_impl;\r\n\r\n    // Add the service into server. Notice the second parameter, because the\r\n    // service is put on stack, we don't want server to delete it, otherwise\r\n    // use brpc::SERVER_OWNS_SERVICE.\r\n    if (server.AddService(&echo_service_impl, \r\n                          brpc::SERVER_DOESNT_OWN_SERVICE) != 0) {\r\n        LOG(ERROR) << \"Fail to add service\";\r\n        return -1;\r\n    }\r\n\r\n    butil::EndPoint point;\r\n    if (!FLAGS_listen_addr.empty()) {\r\n        if (butil::str2endpoint(FLAGS_listen_addr.c_str(), &point) < 0) {\r\n            LOG(ERROR) << \"Invalid listen address:\" << FLAGS_listen_addr;\r\n            return -1;\r\n        }\r\n    } else {\r\n        point = butil::EndPoint(butil::IP_ANY, FLAGS_port);\r\n    }\r\n    // Start the server.\r\n    brpc::ServerOptions options;\r\n    options.idle_timeout_sec = FLAGS_idle_timeout_s;\r\n    if (server.Start(point, &options) != 0) {\r\n        LOG(ERROR) << \"Fail to start EchoServer\";\r\n        return -1;\r\n    }\r\n    std::thread t(increase_bvar);\r\n    // Wait until Ctrl-C is pressed, then Stop() and Join() the server.\r\n    server.RunUntilAskedToQuit();\r\n    t.join();\r\n    return 0;\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364823171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364826368","html_url":"https://github.com/apache/brpc/issues/2059#issuecomment-1364826368","issue_url":"https://api.github.com/repos/apache/brpc/issues/2059","id":1364826368,"node_id":"IC_kwDOBhmkcs5RWZkA","user":{"login":"17336","id":74393844,"node_id":"MDQ6VXNlcjc0MzkzODQ0","avatar_url":"https://avatars.githubusercontent.com/u/74393844?v=4","gravatar_id":"","url":"https://api.github.com/users/17336","html_url":"https://github.com/17336","followers_url":"https://api.github.com/users/17336/followers","following_url":"https://api.github.com/users/17336/following{/other_user}","gists_url":"https://api.github.com/users/17336/gists{/gist_id}","starred_url":"https://api.github.com/users/17336/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/17336/subscriptions","organizations_url":"https://api.github.com/users/17336/orgs","repos_url":"https://api.github.com/users/17336/repos","events_url":"https://api.github.com/users/17336/events{/privacy}","received_events_url":"https://api.github.com/users/17336/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T02:37:53Z","updated_at":"2022-12-26T02:37:53Z","author_association":"NONE","body":"> 使用的多维度bvar？能否给下使用代码例子？\r\n我知道了，源码里Window类型的bvar会在初始化时自动expose，但是Adder不行，需要手动expose。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364826368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364831593","html_url":"https://github.com/apache/brpc/issues/2060#issuecomment-1364831593","issue_url":"https://api.github.com/repos/apache/brpc/issues/2060","id":1364831593,"node_id":"IC_kwDOBhmkcs5RWa1p","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T02:58:04Z","updated_at":"2022-12-26T02:58:04Z","author_association":"CONTRIBUTOR","body":"这个是用来传递给Server::Stop方法的参数，不过按照注释，这个参数已不再使用\r\n\r\n```cpp\r\n    // Stop accepting new connections and requests from existing connections.\r\n    // Returns 0 on success, -1 otherwise.\r\n    int Stop(int closewait_ms/*not used anymore*/);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364831593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364866285","html_url":"https://github.com/apache/brpc/issues/2060#issuecomment-1364866285","issue_url":"https://api.github.com/repos/apache/brpc/issues/2060","id":1364866285,"node_id":"IC_kwDOBhmkcs5RWjTt","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T04:10:30Z","updated_at":"2022-12-26T04:10:30Z","author_association":"CONTRIBUTOR","body":"这样的话是否可以提个PR删掉example中的这个gflag呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364866285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364924124","html_url":"https://github.com/apache/brpc/issues/2060#issuecomment-1364924124","issue_url":"https://api.github.com/repos/apache/brpc/issues/2060","id":1364924124,"node_id":"IC_kwDOBhmkcs5RWxbc","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T06:11:46Z","updated_at":"2022-12-26T06:11:46Z","author_association":"CONTRIBUTOR","body":"可以的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364924124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364952872","html_url":"https://github.com/apache/brpc/issues/2062#issuecomment-1364952872","issue_url":"https://api.github.com/repos/apache/brpc/issues/2062","id":1364952872,"node_id":"IC_kwDOBhmkcs5RW4co","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T07:17:27Z","updated_at":"2022-12-26T07:17:27Z","author_association":"CONTRIBUTOR","body":"bvar_max_dump_multi_dimension_metric_number 这个控制可以通过/brpc_metrics dump出来的multi bvar的数量，默认是0","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364952872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364960013","html_url":"https://github.com/apache/brpc/issues/2062#issuecomment-1364960013","issue_url":"https://api.github.com/repos/apache/brpc/issues/2062","id":1364960013,"node_id":"IC_kwDOBhmkcs5RW6MN","user":{"login":"17336","id":74393844,"node_id":"MDQ6VXNlcjc0MzkzODQ0","avatar_url":"https://avatars.githubusercontent.com/u/74393844?v=4","gravatar_id":"","url":"https://api.github.com/users/17336","html_url":"https://github.com/17336","followers_url":"https://api.github.com/users/17336/followers","following_url":"https://api.github.com/users/17336/following{/other_user}","gists_url":"https://api.github.com/users/17336/gists{/gist_id}","starred_url":"https://api.github.com/users/17336/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/17336/subscriptions","organizations_url":"https://api.github.com/users/17336/orgs","repos_url":"https://api.github.com/users/17336/repos","events_url":"https://api.github.com/users/17336/events{/privacy}","received_events_url":"https://api.github.com/users/17336/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T07:31:31Z","updated_at":"2022-12-26T07:31:31Z","author_association":"NONE","body":"> 通过/brpc_metrics dump出来的multi bvar的数量，默认是0\r\n\r\n好的，十分感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364960013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364961953","html_url":"https://github.com/apache/brpc/issues/2051#issuecomment-1364961953","issue_url":"https://api.github.com/repos/apache/brpc/issues/2051","id":1364961953,"node_id":"IC_kwDOBhmkcs5RW6qh","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T07:34:56Z","updated_at":"2022-12-26T07:34:56Z","author_association":"CONTRIBUTOR","body":"brpc对于底层连接的建立，释放，共享等对于应用层是屏蔽的，可能需要你自己在应用层做一些处理来感知。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364961953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364977475","html_url":"https://github.com/apache/brpc/issues/2051#issuecomment-1364977475","issue_url":"https://api.github.com/repos/apache/brpc/issues/2051","id":1364977475,"node_id":"IC_kwDOBhmkcs5RW-dD","user":{"login":"sudo-rm-rf-run","id":8653159,"node_id":"MDQ6VXNlcjg2NTMxNTk=","avatar_url":"https://avatars.githubusercontent.com/u/8653159?v=4","gravatar_id":"","url":"https://api.github.com/users/sudo-rm-rf-run","html_url":"https://github.com/sudo-rm-rf-run","followers_url":"https://api.github.com/users/sudo-rm-rf-run/followers","following_url":"https://api.github.com/users/sudo-rm-rf-run/following{/other_user}","gists_url":"https://api.github.com/users/sudo-rm-rf-run/gists{/gist_id}","starred_url":"https://api.github.com/users/sudo-rm-rf-run/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudo-rm-rf-run/subscriptions","organizations_url":"https://api.github.com/users/sudo-rm-rf-run/orgs","repos_url":"https://api.github.com/users/sudo-rm-rf-run/repos","events_url":"https://api.github.com/users/sudo-rm-rf-run/events{/privacy}","received_events_url":"https://api.github.com/users/sudo-rm-rf-run/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-26T08:03:00Z","updated_at":"2022-12-26T08:03:00Z","author_association":"NONE","body":"现在采用定时调用checkhealth接口，进行判断连接状态，觉得这样做能感知连接状态，但是实时性不强，以及开启定时器会有一些额外性能开销。底层是为什么做这个屏蔽，是因为rpc调用规则吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1364977475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1365553587","html_url":"https://github.com/apache/brpc/pull/2064#issuecomment-1365553587","issue_url":"https://api.github.com/repos/apache/brpc/issues/2064","id":1365553587,"node_id":"IC_kwDOBhmkcs5RZLGz","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-27T02:08:17Z","updated_at":"2022-12-27T02:08:17Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1365553587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1365971073","html_url":"https://github.com/apache/brpc/issues/1991#issuecomment-1365971073","issue_url":"https://api.github.com/repos/apache/brpc/issues/1991","id":1365971073,"node_id":"IC_kwDOBhmkcs5RaxCB","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-27T15:09:54Z","updated_at":"2022-12-27T15:09:54Z","author_association":"CONTRIBUTOR","body":"比较好奇，rpc什么场景下需要协议版本的协商呢？发送或者接受某一方为类似nginx这样的http服务？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1365971073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1366564022","html_url":"https://github.com/apache/brpc/pull/2057#issuecomment-1366564022","issue_url":"https://api.github.com/repos/apache/brpc/issues/2057","id":1366564022,"node_id":"IC_kwDOBhmkcs5RdBy2","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T10:59:32Z","updated_at":"2022-12-28T10:59:32Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1366564022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1367230634","html_url":"https://github.com/apache/brpc/issues/1991#issuecomment-1367230634","issue_url":"https://api.github.com/repos/apache/brpc/issues/1991","id":1367230634,"node_id":"IC_kwDOBhmkcs5Rfkiq","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T10:46:13Z","updated_at":"2022-12-29T10:46:13Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 对这个需求比较感兴趣，想尝试去实现，提PR的话社区是否会考虑合入呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1367230634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1367693392","html_url":"https://github.com/apache/brpc/issues/1991#issuecomment-1367693392","issue_url":"https://api.github.com/repos/apache/brpc/issues/1991","id":1367693392,"node_id":"IC_kwDOBhmkcs5RhVhQ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T02:41:18Z","updated_at":"2022-12-30T02:41:18Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm 对这个需求比较感兴趣，想尝试去实现，提PR的话社区是否会考虑合入呢\r\n\r\n欢迎~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1367693392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1367840584","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-1367840584","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":1367840584,"node_id":"IC_kwDOBhmkcs5Rh5dI","user":{"login":"describe2022","id":101246748,"node_id":"U_kgDOBgjnHA","avatar_url":"https://avatars.githubusercontent.com/u/101246748?v=4","gravatar_id":"","url":"https://api.github.com/users/describe2022","html_url":"https://github.com/describe2022","followers_url":"https://api.github.com/users/describe2022/followers","following_url":"https://api.github.com/users/describe2022/following{/other_user}","gists_url":"https://api.github.com/users/describe2022/gists{/gist_id}","starred_url":"https://api.github.com/users/describe2022/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/describe2022/subscriptions","organizations_url":"https://api.github.com/users/describe2022/orgs","repos_url":"https://api.github.com/users/describe2022/repos","events_url":"https://api.github.com/users/describe2022/events{/privacy}","received_events_url":"https://api.github.com/users/describe2022/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T10:18:33Z","updated_at":"2022-12-30T10:18:33Z","author_association":"NONE","body":"> btw：StreamClose这里有个坑，因为client端上层传给brpc的是handler的指针，有可能上层析构了on_closed还会被调用，有可能访问到已经析构了的数据，这块需要处理一下\r\n\r\n请问一下这块怎么处理呢？现在只要调用StreamClose，如您说的handler被紧接着析构掉的话就会发生段错误。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1367840584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1369506674","html_url":"https://github.com/apache/brpc/issues/2052#issuecomment-1369506674","issue_url":"https://api.github.com/repos/apache/brpc/issues/2052","id":1369506674,"node_id":"IC_kwDOBhmkcs5RoQNy","user":{"login":"fzhedu","id":6490813,"node_id":"MDQ6VXNlcjY0OTA4MTM=","avatar_url":"https://avatars.githubusercontent.com/u/6490813?v=4","gravatar_id":"","url":"https://api.github.com/users/fzhedu","html_url":"https://github.com/fzhedu","followers_url":"https://api.github.com/users/fzhedu/followers","following_url":"https://api.github.com/users/fzhedu/following{/other_user}","gists_url":"https://api.github.com/users/fzhedu/gists{/gist_id}","starred_url":"https://api.github.com/users/fzhedu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fzhedu/subscriptions","organizations_url":"https://api.github.com/users/fzhedu/orgs","repos_url":"https://api.github.com/users/fzhedu/repos","events_url":"https://api.github.com/users/fzhedu/events{/privacy}","received_events_url":"https://api.github.com/users/fzhedu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T08:41:52Z","updated_at":"2023-01-03T08:41:52Z","author_association":"NONE","body":"@leaf-potato 感谢您的回复。Q2 已经没疑问了，但是 Q1 中关于用 iobuf 和直接 chunkPB 传输的性能方面还有疑问，因为我们传输的是 chunkPB list，它由多个 chunkPB 组成，可以直接传输 chunkPB list。如果用IObuf，现有 Starrocks 中将 chunkPB list 中的每个 chunkPB copy 到 IOBuf 中进行发送；接受端则需要从 IObuf 中 copy 出 chunkPB。在发送和接受端各有一次 copy，这个代价使得 IObuf 应该会慢一些。同时考虑到 IOBuf 不限制发送数据量的优势，因此我们做出一些优化：\r\n1. 针对接受端，使用 cut() 函数避免 copy，直接引用 iobuf 中的数据来 deserialize，避免原来的 copy；\r\n2. 针对发送端，当发送数据量< 2G，则直接传 serialize 的 chunkPB list，不然则 copy 到 iobuf。\r\n\r\n也就是发送数据量 >=2G 的时候在发送端的 copy 无法消除，其他的 copy 都可以消除，这样可以更高效。\r\n\r\n此外还有个问题请教一下：\r\n\r\nQ3：通过 perf，我们看到 bthread 中的 sys call 占总体 sys call 的 20% 左右，不知道是我们使用姿势有问题，或者是有优化参数可以控制？\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/6490813/210322342-3b8dc18b-8774-47b7-bf6b-09594ddb5b24.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1369506674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1370983961","html_url":"https://github.com/apache/brpc/pull/1947#issuecomment-1370983961","issue_url":"https://api.github.com/repos/apache/brpc/issues/1947","id":1370983961,"node_id":"IC_kwDOBhmkcs5Rt44Z","user":{"login":"Aaaaaaron","id":15643702,"node_id":"MDQ6VXNlcjE1NjQzNzAy","avatar_url":"https://avatars.githubusercontent.com/u/15643702?v=4","gravatar_id":"","url":"https://api.github.com/users/Aaaaaaron","html_url":"https://github.com/Aaaaaaron","followers_url":"https://api.github.com/users/Aaaaaaron/followers","following_url":"https://api.github.com/users/Aaaaaaron/following{/other_user}","gists_url":"https://api.github.com/users/Aaaaaaron/gists{/gist_id}","starred_url":"https://api.github.com/users/Aaaaaaron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aaaaaaron/subscriptions","organizations_url":"https://api.github.com/users/Aaaaaaron/orgs","repos_url":"https://api.github.com/users/Aaaaaaron/repos","events_url":"https://api.github.com/users/Aaaaaaron/events{/privacy}","received_events_url":"https://api.github.com/users/Aaaaaaron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T14:15:58Z","updated_at":"2023-01-04T14:15:58Z","author_association":"MEMBER","body":"@wwbmmm 好的 谢谢 不好意思最近比较忙😂\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1370983961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371654774","html_url":"https://github.com/apache/brpc/issues/2067#issuecomment-1371654774","issue_url":"https://api.github.com/repos/apache/brpc/issues/2067","id":1371654774,"node_id":"IC_kwDOBhmkcs5Rwcp2","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T02:02:53Z","updated_at":"2023-01-05T02:02:53Z","author_association":"CONTRIBUTOR","body":"controller为空指针的话，会直接core掉","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371654774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371721339","html_url":"https://github.com/apache/brpc/pull/2027#issuecomment-1371721339","issue_url":"https://api.github.com/repos/apache/brpc/issues/2027","id":1371721339,"node_id":"IC_kwDOBhmkcs5Rws57","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T02:57:42Z","updated_at":"2023-01-05T02:57:42Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371721339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371748915","html_url":"https://github.com/apache/brpc/issues/2068#issuecomment-1371748915","issue_url":"https://api.github.com/repos/apache/brpc/issues/2068","id":1371748915,"node_id":"IC_kwDOBhmkcs5Rwzoz","user":{"login":"ljcui","id":15341849,"node_id":"MDQ6VXNlcjE1MzQxODQ5","avatar_url":"https://avatars.githubusercontent.com/u/15341849?v=4","gravatar_id":"","url":"https://api.github.com/users/ljcui","html_url":"https://github.com/ljcui","followers_url":"https://api.github.com/users/ljcui/followers","following_url":"https://api.github.com/users/ljcui/following{/other_user}","gists_url":"https://api.github.com/users/ljcui/gists{/gist_id}","starred_url":"https://api.github.com/users/ljcui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ljcui/subscriptions","organizations_url":"https://api.github.com/users/ljcui/orgs","repos_url":"https://api.github.com/users/ljcui/repos","events_url":"https://api.github.com/users/ljcui/events{/privacy}","received_events_url":"https://api.github.com/users/ljcui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T03:42:19Z","updated_at":"2023-01-05T03:42:19Z","author_association":"NONE","body":"https://github.com/apache/incubator-brpc/tree/master/example/streaming_echo_c++ 这个有java 版本的例子吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371748915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371824785","html_url":"https://github.com/apache/brpc/issues/2068#issuecomment-1371824785","issue_url":"https://api.github.com/repos/apache/brpc/issues/2068","id":1371824785,"node_id":"IC_kwDOBhmkcs5RxGKR","user":{"login":"ljcui","id":15341849,"node_id":"MDQ6VXNlcjE1MzQxODQ5","avatar_url":"https://avatars.githubusercontent.com/u/15341849?v=4","gravatar_id":"","url":"https://api.github.com/users/ljcui","html_url":"https://github.com/ljcui","followers_url":"https://api.github.com/users/ljcui/followers","following_url":"https://api.github.com/users/ljcui/following{/other_user}","gists_url":"https://api.github.com/users/ljcui/gists{/gist_id}","starred_url":"https://api.github.com/users/ljcui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ljcui/subscriptions","organizations_url":"https://api.github.com/users/ljcui/orgs","repos_url":"https://api.github.com/users/ljcui/repos","events_url":"https://api.github.com/users/ljcui/events{/privacy}","received_events_url":"https://api.github.com/users/ljcui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T06:14:11Z","updated_at":"2023-01-05T06:14:11Z","author_association":"NONE","body":"场景是客户端是java，服务端是brpc。客户端先给服务端发送一个request，服务端收到request后，给客户端发送响应数据，只不过这个数据很大，服务端需要持续不断地发送，客户端侧持续不断的接收。有什么好的方法吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1371824785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372099116","html_url":"https://github.com/apache/brpc/issues/2069#issuecomment-1372099116","issue_url":"https://api.github.com/repos/apache/brpc/issues/2069","id":1372099116,"node_id":"IC_kwDOBhmkcs5RyJIs","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T11:27:20Z","updated_at":"2023-01-05T11:27:20Z","author_association":"CONTRIBUTOR","body":"应该是服务端打点，想在客户端获取打点信息吧？\r\n这种的话只能通过 修改 PB协议，增加对应的repeat类型字段，传递给客户端，在客户端ProcessXXXResponse函数中解包，从PB对象中获取打点数据，然后设置到cntl中。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372099116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372112897","html_url":"https://github.com/apache/brpc/issues/2069#issuecomment-1372112897","issue_url":"https://api.github.com/repos/apache/brpc/issues/2069","id":1372112897,"node_id":"IC_kwDOBhmkcs5RyMgB","user":{"login":"cmdmspaint","id":50624748,"node_id":"MDQ6VXNlcjUwNjI0NzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50624748?v=4","gravatar_id":"","url":"https://api.github.com/users/cmdmspaint","html_url":"https://github.com/cmdmspaint","followers_url":"https://api.github.com/users/cmdmspaint/followers","following_url":"https://api.github.com/users/cmdmspaint/following{/other_user}","gists_url":"https://api.github.com/users/cmdmspaint/gists{/gist_id}","starred_url":"https://api.github.com/users/cmdmspaint/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmdmspaint/subscriptions","organizations_url":"https://api.github.com/users/cmdmspaint/orgs","repos_url":"https://api.github.com/users/cmdmspaint/repos","events_url":"https://api.github.com/users/cmdmspaint/events{/privacy}","received_events_url":"https://api.github.com/users/cmdmspaint/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T11:42:46Z","updated_at":"2023-01-05T11:42:46Z","author_association":"NONE","body":"> 应该是服务端打点，想在客户端获取打点信息吧？ 这种的话只能通过 修改 PB协议，增加对应的repeat类型字段，传递给客户端，在客户端ProcessXXXResponse函数中解包，从PB对象中获取打点数据，然后设置到cntl中。\r\n\r\ncntl中已经设置上信息了 但是取的时候 编译报错了\r\n![image](https://user-images.githubusercontent.com/50624748/210772410-9652bd33-483b-4868-b86a-ab3d0563f980.png)\r\n![image](https://user-images.githubusercontent.com/50624748/210772525-11aaedcb-8bc2-4ec7-bee7-47e3c76068cf.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372112897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372113352","html_url":"https://github.com/apache/brpc/issues/2069#issuecomment-1372113352","issue_url":"https://api.github.com/repos/apache/brpc/issues/2069","id":1372113352,"node_id":"IC_kwDOBhmkcs5RyMnI","user":{"login":"cmdmspaint","id":50624748,"node_id":"MDQ6VXNlcjUwNjI0NzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50624748?v=4","gravatar_id":"","url":"https://api.github.com/users/cmdmspaint","html_url":"https://github.com/cmdmspaint","followers_url":"https://api.github.com/users/cmdmspaint/followers","following_url":"https://api.github.com/users/cmdmspaint/following{/other_user}","gists_url":"https://api.github.com/users/cmdmspaint/gists{/gist_id}","starred_url":"https://api.github.com/users/cmdmspaint/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmdmspaint/subscriptions","organizations_url":"https://api.github.com/users/cmdmspaint/orgs","repos_url":"https://api.github.com/users/cmdmspaint/repos","events_url":"https://api.github.com/users/cmdmspaint/events{/privacy}","received_events_url":"https://api.github.com/users/cmdmspaint/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T11:43:24Z","updated_at":"2023-01-05T11:43:24Z","author_association":"NONE","body":"> 应该是服务端打点，想在客户端获取打点信息吧？ 这种的话只能通过 修改 PB协议，增加对应的repeat类型字段，传递给客户端，在客户端ProcessXXXResponse函数中解包，从PB对象中获取打点数据，然后设置到cntl中。\r\n\r\n正常情况下 是直接取用就可以吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372113352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372135886","html_url":"https://github.com/apache/brpc/issues/2069#issuecomment-1372135886","issue_url":"https://api.github.com/repos/apache/brpc/issues/2069","id":1372135886,"node_id":"IC_kwDOBhmkcs5RySHO","user":{"login":"cmdmspaint","id":50624748,"node_id":"MDQ6VXNlcjUwNjI0NzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50624748?v=4","gravatar_id":"","url":"https://api.github.com/users/cmdmspaint","html_url":"https://github.com/cmdmspaint","followers_url":"https://api.github.com/users/cmdmspaint/followers","following_url":"https://api.github.com/users/cmdmspaint/following{/other_user}","gists_url":"https://api.github.com/users/cmdmspaint/gists{/gist_id}","starred_url":"https://api.github.com/users/cmdmspaint/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmdmspaint/subscriptions","organizations_url":"https://api.github.com/users/cmdmspaint/orgs","repos_url":"https://api.github.com/users/cmdmspaint/repos","events_url":"https://api.github.com/users/cmdmspaint/events{/privacy}","received_events_url":"https://api.github.com/users/cmdmspaint/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T12:07:49Z","updated_at":"2023-01-05T12:07:49Z","author_association":"NONE","body":"> 应该是服务端打点，想在客户端获取打点信息吧？ 这种的话只能通过 修改 PB协议，增加对应的repeat类型字段，传递给客户端，在客户端ProcessXXXResponse函数中解包，从PB对象中获取打点数据，然后设置到cntl中。\r\n\r\n我们是一个存储程序，远程过程调用使用的是brpc。想把在bprc controller中的信息打印到我们自己程序的日志中去。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372135886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372139568","html_url":"https://github.com/apache/brpc/issues/2069#issuecomment-1372139568","issue_url":"https://api.github.com/repos/apache/brpc/issues/2069","id":1372139568,"node_id":"IC_kwDOBhmkcs5RyTAw","user":{"login":"cmdmspaint","id":50624748,"node_id":"MDQ6VXNlcjUwNjI0NzQ4","avatar_url":"https://avatars.githubusercontent.com/u/50624748?v=4","gravatar_id":"","url":"https://api.github.com/users/cmdmspaint","html_url":"https://github.com/cmdmspaint","followers_url":"https://api.github.com/users/cmdmspaint/followers","following_url":"https://api.github.com/users/cmdmspaint/following{/other_user}","gists_url":"https://api.github.com/users/cmdmspaint/gists{/gist_id}","starred_url":"https://api.github.com/users/cmdmspaint/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmdmspaint/subscriptions","organizations_url":"https://api.github.com/users/cmdmspaint/orgs","repos_url":"https://api.github.com/users/cmdmspaint/repos","events_url":"https://api.github.com/users/cmdmspaint/events{/privacy}","received_events_url":"https://api.github.com/users/cmdmspaint/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T12:11:23Z","updated_at":"2023-01-05T12:11:23Z","author_association":"NONE","body":"> 应该是服务端打点，想在客户端获取打点信息吧？ 这种的话只能通过 修改 PB协议，增加对应的repeat类型字段，传递给客户端，在客户端ProcessXXXResponse函数中解包，从PB对象中获取打点数据，然后设置到cntl中。\r\n\r\n但是 在我们程序中通过brpc::controller取用的时候就出现了 编译报错的情况  .a和.so 确认过了是新编译的  ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1372139568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]