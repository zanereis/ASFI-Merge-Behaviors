[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301204013","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-301204013","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":301204013,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTIwNDAxMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-12T22:57:55Z","updated_at":"2017-05-12T22:57:55Z","author_association":"CONTRIBUTOR","body":"Let's rebase it on master when you have a chance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301204013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301210331","html_url":"https://github.com/apache/couchdb/issues/508#issuecomment-301210331","issue_url":"https://api.github.com/repos/apache/couchdb/issues/508","id":301210331,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTIxMDMzMQ==","user":{"login":"chladnefazole","id":28662715,"node_id":"MDQ6VXNlcjI4NjYyNzE1","avatar_url":"https://avatars.githubusercontent.com/u/28662715?v=4","gravatar_id":"","url":"https://api.github.com/users/chladnefazole","html_url":"https://github.com/chladnefazole","followers_url":"https://api.github.com/users/chladnefazole/followers","following_url":"https://api.github.com/users/chladnefazole/following{/other_user}","gists_url":"https://api.github.com/users/chladnefazole/gists{/gist_id}","starred_url":"https://api.github.com/users/chladnefazole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chladnefazole/subscriptions","organizations_url":"https://api.github.com/users/chladnefazole/orgs","repos_url":"https://api.github.com/users/chladnefazole/repos","events_url":"https://api.github.com/users/chladnefazole/events{/privacy}","received_events_url":"https://api.github.com/users/chladnefazole/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-12T23:56:53Z","updated_at":"2017-05-12T23:56:53Z","author_association":"NONE","body":"I'm also still having this problem after trying the solution above. My install is completely fresh though.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301210331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301222230","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-301222230","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":301222230,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTIyMjIzMA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-13T03:28:24Z","updated_at":"2017-05-13T03:28:24Z","author_association":"MEMBER","body":"Rebased. Forgot to push earlier. Just have that one function I'm not sure about where it went. I'm guessing the couch_server revert but will have to look harder on Monday. This branch is rebased on master but only loosely. I haven't done a full make check yet so there might be a lingering issue or two.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301222230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301254045","html_url":"https://github.com/apache/couchdb/issues/508#issuecomment-301254045","issue_url":"https://api.github.com/repos/apache/couchdb/issues/508","id":301254045,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTI1NDA0NQ==","user":{"login":"FodOskar","id":28674173,"node_id":"MDQ6VXNlcjI4Njc0MTcz","avatar_url":"https://avatars.githubusercontent.com/u/28674173?v=4","gravatar_id":"","url":"https://api.github.com/users/FodOskar","html_url":"https://github.com/FodOskar","followers_url":"https://api.github.com/users/FodOskar/followers","following_url":"https://api.github.com/users/FodOskar/following{/other_user}","gists_url":"https://api.github.com/users/FodOskar/gists{/gist_id}","starred_url":"https://api.github.com/users/FodOskar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FodOskar/subscriptions","organizations_url":"https://api.github.com/users/FodOskar/orgs","repos_url":"https://api.github.com/users/FodOskar/repos","events_url":"https://api.github.com/users/FodOskar/events{/privacy}","received_events_url":"https://api.github.com/users/FodOskar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-13T15:08:01Z","updated_at":"2017-05-13T15:08:01Z","author_association":"NONE","body":"Guys try to start couchdb with the couchDB.batch file in install/couchDB/bin... Start with sysadmin permission. On win 10 system block couchdb with normal start.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301254045/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301362008","html_url":"https://github.com/apache/couchdb/pull/522#issuecomment-301362008","issue_url":"https://api.github.com/repos/apache/couchdb/issues/522","id":301362008,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTM2MjAwOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T02:32:23Z","updated_at":"2017-05-15T02:32:23Z","author_association":"CONTRIBUTOR","body":">\r\n ```\r\n--define(TIMEOUT, 60000).\r\n+-define(TIMEOUT, 1200000).\r\n```\r\n\r\nMeant to do 120000 (x2) probably not x20?.  If that's the case then +1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301362008/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301362118","html_url":"https://github.com/apache/couchdb/pull/521#issuecomment-301362118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/521","id":301362118,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTM2MjExOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T02:33:32Z","updated_at":"2017-05-15T02:33:32Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301362118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301368364","html_url":"https://github.com/apache/couchdb/pull/520#issuecomment-301368364","issue_url":"https://api.github.com/repos/apache/couchdb/issues/520","id":301368364,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTM2ODM2NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T03:30:39Z","updated_at":"2017-05-15T03:30:39Z","author_association":"CONTRIBUTOR","body":"It seems because this is testing for a continuous replication, if task status is not there, it is probably because it hasn't been posted(updated) yet.\r\n\r\nSince this is not a primary thing we test, ignoring a failed task status check is not terrible. Wonder if we could wait for it anyway. Something like this:\r\n\r\n```\r\n \r\n+wait_for_task_status() ->\r\n+    test_util:wait(fun() ->\r\n+        case couch_task_status:all() of\r\n+            [] ->\r\n+                wait;\r\n+            Tasks ->\r\n+                Tasks\r\n+        end\r\n+    end).\r\n+\r\n \r\n     Pid = ?l2b(pid_to_list(RepPid)),\r\n     ok = wait_for_replicator(RepId),\r\n-    [RepTask] = couch_task_status:all(),\r\n+    RepTasks = wait_for_task_status(),\r\n+    ?assertNotEqual(timeout, RepTasks),\r\n+    [RepTask] = RepTasks,\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301368364/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301369355","html_url":"https://github.com/apache/couchdb/pull/518#issuecomment-301369355","issue_url":"https://api.github.com/repos/apache/couchdb/issues/518","id":301369355,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTM2OTM1NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T03:40:51Z","updated_at":"2017-05-15T03:40:51Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nAt first I was about to mention that EUnit captures and hides all the stdout output but then noticed we send output directly to console with `user` in `io:format`. So that should work. However in general `?debugFmt` is the recommended way to print during EUnit tests.  Not big deal though just a minor nit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301369355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301369616","html_url":"https://github.com/apache/couchdb/pull/517#issuecomment-301369616","issue_url":"https://api.github.com/repos/apache/couchdb/issues/517","id":301369616,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTM2OTYxNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T03:43:46Z","updated_at":"2017-05-15T03:48:05Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nThough as mentioned in other PR ?debugFmt I think is the preferred way to print during EUnit tests. Minor nit though. As this is temporary until we figure out all the flakiness issues, feel free to ignore.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301369616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301369649","html_url":"https://github.com/apache/couchdb/pull/519#issuecomment-301369649","issue_url":"https://api.github.com/repos/apache/couchdb/issues/519","id":301369649,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTM2OTY0OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T03:44:12Z","updated_at":"2017-05-15T03:44:12Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301369649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301570471","html_url":"https://github.com/apache/couchdb/pull/517#issuecomment-301570471","issue_url":"https://api.github.com/repos/apache/couchdb/issues/517","id":301570471,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTU3MDQ3MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T18:56:34Z","updated_at":"2017-05-15T18:56:34Z","author_association":"MEMBER","body":"@nickva good catch, I had tried that, but couldn‚Äôt get the caught error message to pass through `debugFmt`, so I went with the regular method.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301570471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301570591","html_url":"https://github.com/apache/couchdb/pull/518#issuecomment-301570591","issue_url":"https://api.github.com/repos/apache/couchdb/issues/518","id":301570591,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTU3MDU5MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T18:57:01Z","updated_at":"2017-05-15T18:57:01Z","author_association":"MEMBER","body":"re `debugFmt` same as in https://github.com/apache/couchdb/pull/517#issuecomment-301570471","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301570591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301576279","html_url":"https://github.com/apache/couchdb/pull/517#issuecomment-301576279","issue_url":"https://api.github.com/repos/apache/couchdb/issues/517","id":301576279,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTU3NjI3OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T19:18:48Z","updated_at":"2017-05-15T19:18:48Z","author_association":"CONTRIBUTOR","body":"Ah alright then. If `user` works then let go with that","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301576279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301576829","html_url":"https://github.com/apache/couchdb/pull/518#issuecomment-301576829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/518","id":301576829,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTU3NjgyOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-15T19:20:56Z","updated_at":"2017-05-15T19:20:56Z","author_association":"CONTRIBUTOR","body":"Alright, let's go with `user` then, minor nit anyway\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301576829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301779501","html_url":"https://github.com/apache/couchdb/issues/513#issuecomment-301779501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/513","id":301779501,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTc3OTUwMQ==","user":{"login":"dmunch","id":4660060,"node_id":"MDQ6VXNlcjQ2NjAwNjA=","avatar_url":"https://avatars.githubusercontent.com/u/4660060?v=4","gravatar_id":"","url":"https://api.github.com/users/dmunch","html_url":"https://github.com/dmunch","followers_url":"https://api.github.com/users/dmunch/followers","following_url":"https://api.github.com/users/dmunch/following{/other_user}","gists_url":"https://api.github.com/users/dmunch/gists{/gist_id}","starred_url":"https://api.github.com/users/dmunch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dmunch/subscriptions","organizations_url":"https://api.github.com/users/dmunch/orgs","repos_url":"https://api.github.com/users/dmunch/repos","events_url":"https://api.github.com/users/dmunch/events{/privacy}","received_events_url":"https://api.github.com/users/dmunch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-16T13:19:30Z","updated_at":"2017-05-16T13:19:30Z","author_association":"CONTRIBUTOR","body":"I'm not entirely sure about `pending`, but I think it's important to understand the concept of `_changes` ordering - in CouchDB 2.0 the `_changes` feed is only partially ordered. You can find more information on [this discussion](https://groups.google.com/forum/#!topic/couchdb-user-archive/WHM-dN6PZTY).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301779501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301846739","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-301846739","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":301846739,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTg0NjczOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-16T16:57:26Z","updated_at":"2017-05-17T15:34:12Z","author_association":"CONTRIBUTOR","body":"I ran couchdyno's replication tests against PSE and they all passed:\r\n\r\n```\r\n/test.sh -x\r\n==================================================================================== test session starts =====================================================================================\r\nplatform darwin -- Python 2.7.13, pytest-3.0.3, py-1.4.33, pluggy-0.4.0 -- /Users/nvatama/src/couchdyno/venv/bin/python\r\ncachedir: .cache\r\nrootdir: /Users/nvatama/src/couchdyno, inifile: pytest.ini\r\ncollected 47 items\r\n\r\ntests/test_rep_00_basics.py::test_basic_continuous PASSED\r\ntests/test_rep_00_basics.py::test_basic_10_continuous PASSED\r\ntests/test_rep_00_basics.py::test_basic_10_continuous_1000_docs PASSED\r\ntests/test_rep_00_basics.py::test_basic_normal PASSED\r\ntests/test_rep_00_basics.py::test_basic_10_normal PASSED\r\ntests/test_rep_00_basics.py::test_basic_attachment PASSED\r\ntests/test_rep_00_basics.py::test_basic_js_filter PASSED\r\ntests/test_rep_01_patterns.py::test_n_to_n_pattern[False-False] PASSED\r\ntests/test_rep_01_patterns.py::test_n_to_n_pattern[False-True] PASSED\r\ntests/test_rep_01_patterns.py::test_n_to_n_pattern[True-False] PASSED\r\ntests/test_rep_01_patterns.py::test_n_to_n_pattern[True-True] PASSED\r\ntests/test_rep_01_patterns.py::test_1_to_n_pattern PASSED\r\ntests/test_rep_01_patterns.py::test_n_to_1_pattern PASSED\r\ntests/test_rep_01_patterns.py::test_n_chain_pattern PASSED\r\ntests/test_rep_01_patterns.py::test_all_pattern_continuous PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_view_filter[False-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_view_filter[False-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_view_filter[True-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_view_filter[True-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_js_filter[False-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_js_filter[False-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_js_filter[True-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_js_filter[True-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_doc_ids_filter[False-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_doc_ids_filter[False-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_doc_ids_filter[True-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_doc_ids_filter[True-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_mango_filter[False-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_mango_filter[False-1] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_mango_filter[True-None] PASSED\r\ntests/test_rep_02_filter.py::test_n_to_n_mango_filter[True-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[False-64-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[False-64-100] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[False-100000-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[False-100000-100] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[False-attachments4-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[False-attachments5-100] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[True-64-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[True-64-100] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[True-100000-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[True-100000-100] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[True-attachments10-1] PASSED\r\ntests/test_rep_03_attachments.py::test_attachments[True-attachments11-100] PASSED\r\ntests/test_rep_04_cluster.py::test_migration_on_node_failure SKIPPED\r\ntests/test_rep_05_migration.py::test_migration_error PASSED\r\ntests/test_rep_05_migration.py::test_migration_triggered PASSED\r\ntests/test_rep_05_migration.py::test_migration_downgrade_failed SKIPPED\r\n\r\n======================================================================================= 45 passed, 2 skipped in 13390.16 seconds ========================================================================================\r\n```\r\n\r\nNinja edit from @davisp: CouchDyno can be found here: https://github.com/cloudant-labs/couchdyno","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301846739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301870619","html_url":"https://github.com/apache/couchdb/issues/513#issuecomment-301870619","issue_url":"https://api.github.com/repos/apache/couchdb/issues/513","id":301870619,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTg3MDYxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-16T18:20:17Z","updated_at":"2017-05-16T18:20:17Z","author_association":"MEMBER","body":"What @dmunch says is correct - we do not guarantee strict ordering, but we do guarantee that for any specific given document, you will get a consistent order from us such that the changes can be replayed in an idempotent fashion.\r\n\r\nHowever, the negative pending value is unexplained, and I'm changing the bug report title to reflect that as the ongoing concern in this issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301870619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301871118","html_url":"https://github.com/apache/couchdb/issues/502#issuecomment-301871118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/502","id":301871118,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTg3MTExOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-16T18:22:04Z","updated_at":"2017-05-16T18:22:04Z","author_association":"MEMBER","body":"I don't think keeping this ticket open is valuable. If you're dumb enough to set max_dbs_open smaller than q for a single database, you deserve a crash.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301871118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301876833","html_url":"https://github.com/apache/couchdb/issues/513#issuecomment-301876833","issue_url":"https://api.github.com/repos/apache/couchdb/issues/513","id":301876833,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTg3NjgzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-16T18:42:37Z","updated_at":"2017-05-16T18:42:37Z","author_association":"MEMBER","body":"Per IRC chat with @davisp:\r\n\r\n> shard combinations can cause that. because we're not sending an update_seq with the pending changes request, so if it gets a different set of shards it can go wonky like that.\r\n\r\nIn other words, both behaviours are expected with CouchDB 2.0.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301876833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301913820","html_url":"https://github.com/apache/couchdb/pull/525#issuecomment-301913820","issue_url":"https://api.github.com/repos/apache/couchdb/issues/525","id":301913820,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTkxMzgyMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-16T20:59:32Z","updated_at":"2017-05-16T20:59:32Z","author_association":"MEMBER","body":"+1 once the tests pass üå∑ üçÜ üêê ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301913820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301992963","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-301992963","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":301992963,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTk5Mjk2Mw==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T05:54:33Z","updated_at":"2017-05-17T06:20:44Z","author_association":"CONTRIBUTOR","body":"@davisp: I followed @garrensmith 's  setup and created a db using the ngen engine. It's probably documented somewhere, but how do I verify that the db created is using another engine or are we hiding that abstraction? For instance, I can do \r\n```http://localhost:15984/testdbblah?engine=blahgen```\r\nand that will work just fine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301992963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301998674","html_url":"https://github.com/apache/couchdb/pull/525#issuecomment-301998674","issue_url":"https://api.github.com/repos/apache/couchdb/issues/525","id":301998674,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMTk5ODY3NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T06:32:20Z","updated_at":"2017-05-17T06:32:20Z","author_association":"CONTRIBUTOR","body":"+1 as well","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/301998674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302040139","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302040139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302040139,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjA0MDEzOQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T09:41:55Z","updated_at":"2017-05-17T09:41:55Z","author_association":"MEMBER","body":"@tonysun83 each storage engine should have a different file extension. So if you do `http://localhost:15984/testdb?engine=ngen` and then look at the files you will see a few db files with a `.ngen` extension. \r\n\r\nFrom what I understand of this code https://github.com/apache/couchdb/blob/6375cd41afed07818ff77713fcab7f7e72e5040c/src/couch/src/couch_server.erl#L629-L642\r\nIf you do `?engine=blahgen` and that engine is not supported it will fallback to the configured default engine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302040139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302127985","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302127985","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302127985,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjEyNzk4NQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T15:30:47Z","updated_at":"2017-05-17T15:30:47Z","author_association":"MEMBER","body":"With the `/` endpoint we have a `features` field that will show if the CouchDB instance supports the new replication api. I think it might be worthwhile adding another field that shows which storage engines are supported. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302127985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302130228","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302130228","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302130228,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjEzMDIyOA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T15:37:54Z","updated_at":"2017-05-17T15:37:54Z","author_association":"MEMBER","body":"@tonysun83 The shard's db info blob should include the engine, however this wasn't included in the clustered db info because I had originally had plans on being able to upgrade the storage engine for a database. However that's not been written yet but if it were then a clustered db could have multiple engines involved for different shards and we don't currently surface shard specific information.\r\n\r\n@garrensmith That's correct. It currently just defaults to the configured default engine. And if nothing is configured the default is the legacy couch engine.\r\n\r\nGood call on the features list. That was added after the majority of the PSE dev but that'd be a good thing to support and as I recall it was fairly simple. I'll take a look at adding that today.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302130228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302194719","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302194719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302194719,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjE5NDcxOQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T18:55:05Z","updated_at":"2017-05-17T18:58:14Z","author_association":"CONTRIBUTOR","body":"@davisp: given the negative scenario above with ```http://localhost:15984/testdbblah?engine=blahgen```, a 200 was returned saying the db was created successfully, but it seems it didn't default to use the couch_bt_engine engine. I get a 500 saying internal_server_error : No DB shards could be opened. I checked and there were no .couch files for that particular db. Upon retrying to create the database(with and without the engine parameter), I get a 412 saying the db is already created.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302194719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302203262","html_url":"https://github.com/apache/couchdb/issues/499#issuecomment-302203262","issue_url":"https://api.github.com/repos/apache/couchdb/issues/499","id":302203262,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjIwMzI2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T19:23:30Z","updated_at":"2017-05-17T19:23:30Z","author_association":"MEMBER","body":"OK, labels are live on this repo. I have only normalized the pre-existing labels on the other top-level repos and not implemented the full scheme on them. Fauxton also had a few of their own labels that mostly match this system, but I'd encourage @garrensmith @michellephung @robertkowalski to complete the process in the future if desired.\r\n\r\nThanks to everyone (including the CouchDB PMC) for the feedback!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302203262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302210204","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302210204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302210204,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjIxMDIwNA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T19:42:33Z","updated_at":"2017-05-17T19:43:08Z","author_association":"CONTRIBUTOR","body":"@davisp @nickva : I'm not sure if there has been work to rebase the latest scheduler replicator with PSE.  but I'm seeing some function clauses and weird behavior in my weird scenario. \r\n1) Create a _replicator database using ngen engine (it worked, but not sure we support this?)\r\n2) Create a normal db and add some documents.\r\n3) Run a replication with create_target:true that creates a new ngen db\r\n```\r\n{\r\n  \"_id\": \"ngen_test\",\r\n  \"source\": \"http://adm:pass@localhost:15984/mydb\",\r\n  \"target\": \"http://adm:pass@localhost:15984/repngen?engine=ngen\",\r\n  \"create_target\": true\r\n}\r\n```\r\nSo after I did this, the odd behavior was that my original mydb had 7 documents, but the repngen keeps increasing in number of docs. Currently, it's at 20. and the original mydb has not changed at all. Must be something to do with the update_seq. Log is provided below. \r\n\r\nhttps://gist.github.com/tonysun83/b600e855ea0d3ae0e6ef92e388cf05c0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302210204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302251567","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302251567","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302251567,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjI1MTU2Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-17T22:41:44Z","updated_at":"2017-05-17T22:41:44Z","author_association":"MEMBER","body":"@tonysun83 Hrm, I'll add a test for that case and try and track down what's causing the 500's with the bad engine. For that and for the replicator function clause its probably a bad rebase or refactor somewhere.\r\n\r\nFor the replication you're trying I'd expect that to not work I think. Adding URL strings to replication URLs seems like it'd not work so hot. Can you check what documents have been added? My guess is that the URL string is screwing things up and the replicator ends up posting random data that gets a UUID since the target database would interpret everything after the ? as a query parameter. Once its created any post would probably be interpreted as a request to create a new document. And that's not PSE specific. A similar test on not-PSE would be to try and specify a Q or N parameter in the target URL. I'd expect similar results there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302251567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302499382","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302499382","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302499382,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjQ5OTM4Mg==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-18T18:20:52Z","updated_at":"2017-05-18T18:20:52Z","author_association":"CONTRIBUTOR","body":"@davisp:  yup, it was the URL posting random data and not engine related.  I tried with a n parameter and it produced the same errors. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302499382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302502484","html_url":"https://github.com/apache/couchdb/pull/531#issuecomment-302502484","issue_url":"https://api.github.com/repos/apache/couchdb/issues/531","id":302502484,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjUwMjQ4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-18T18:28:55Z","updated_at":"2017-05-18T18:28:55Z","author_association":"MEMBER","body":"Thanks @eiri, +1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302502484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302711625","html_url":"https://github.com/apache/couchdb/pull/532#issuecomment-302711625","issue_url":"https://api.github.com/repos/apache/couchdb/issues/532","id":302711625,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjcxMTYyNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T14:04:24Z","updated_at":"2017-05-19T14:04:24Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302711625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302713537","html_url":"https://github.com/apache/couchdb/pull/529#issuecomment-302713537","issue_url":"https://api.github.com/repos/apache/couchdb/issues/529","id":302713537,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjcxMzUzNw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T14:12:00Z","updated_at":"2017-05-19T14:12:00Z","author_association":"MEMBER","body":"+1. We'll keep investigating this but for now worse in real life is still worse. My only theory is that ets calls bump reductions faster which causes more gc which is what usually breaks couch_server under load. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302713537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302760914","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-302760914","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":302760914,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc2MDkxNA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T17:17:17Z","updated_at":"2017-05-19T17:17:17Z","author_association":"MEMBER","body":"Aha! Good catch.\n\nOn Fri, May 19, 2017 at 11:06 AM, Eric Avdey <notifications@github.com>\nwrote:\n\n> *@eiri* commented on this pull request.\n> ------------------------------\n>\n> In src/couch/src/couch_server.erl\n> <https://github.com/apache/couchdb/pull/496#discussion_r117517242>:\n>\n> > +        case couch_db_engine:exists(Engine, Path) of\n> +            true ->\n> +                [{Engine, Path} | Acc];\n> +            false ->\n> +                Acc\n> +        end\n> +    end, [], Engines).\n> +\n> +\n> +get_default_engine(Server, DbName) ->\n> +    #server{\n> +        root_dir = RootDir,\n> +        engines = Engines\n> +    } = Server,\n> +    Default = {couch_bt_engine, make_filepath(RootDir, DbName, \"couch\")},\n> +    case config:get(\"couchdb\", \"default_engine\") of\n>\n> @davisp <https://github.com/davisp> Tony right about \"default_engine\"\n> been ignored, but the problem not here, but in chttpd_db.erl\n> <https://github.com/apache/couchdb/blob/7162a24ba6b6341a9c015a5fc6b6f4d4306ba432/src/chttpd/src/chttpd_db.erl#L287l>\n> - if query \"engine\" is missing it defaults to \"couch\", so \"default_engine\"\n> is essentially always ignored.\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/pull/496#discussion_r117517242>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AABN2WfWGOc_nMwGy2uc9i-AAh4DaAuzks5r7b4RgaJpZM4NKWJX>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302760914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302766562","html_url":"https://github.com/apache/couchdb/pull/533#issuecomment-302766562","issue_url":"https://api.github.com/repos/apache/couchdb/issues/533","id":302766562,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc2NjU2Mg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T17:41:37Z","updated_at":"2017-05-19T17:41:37Z","author_association":"MEMBER","body":"Looks good to me, didn't know we have `test_util:wait/1,2,3` function. Except maybe pass timeout explicitly? \" 'wait' for how long?\" was my first question when I've seen the change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302766562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302768049","html_url":"https://github.com/apache/couchdb/pull/533#issuecomment-302768049","issue_url":"https://api.github.com/repos/apache/couchdb/issues/533","id":302768049,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc2ODA0OQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T17:47:49Z","updated_at":"2017-05-19T17:47:49Z","author_association":"CONTRIBUTOR","body":"@eiri: What timeout value would you recommend? I am considering 500.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302768049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302770333","html_url":"https://github.com/apache/couchdb/pull/533#issuecomment-302770333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/533","id":302770333,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc3MDMzMw==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T17:57:49Z","updated_at":"2017-05-19T19:09:21Z","author_association":"MEMBER","body":"@iilyak hard to guess, to be honest, 500 or 1000 both look good for me. test_util's `wait` default is 5000, but it's more fitting for the tests around os_process related modules, it's common default there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302770333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302775567","html_url":"https://github.com/apache/couchdb/pull/533#issuecomment-302775567","issue_url":"https://api.github.com/repos/apache/couchdb/issues/533","id":302775567,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc3NTU2Nw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T18:20:10Z","updated_at":"2017-05-19T18:20:10Z","author_association":"CONTRIBUTOR","body":"@wohali: Sorry for the delay.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302775567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302786585","html_url":"https://github.com/apache/couchdb/pull/533#issuecomment-302786585","issue_url":"https://api.github.com/repos/apache/couchdb/issues/533","id":302786585,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjc4NjU4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-19T19:08:02Z","updated_at":"2017-05-19T19:08:02Z","author_association":"MEMBER","body":"@iilyak Hey I'm just glad people are starting to help ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302786585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302866295","html_url":"https://github.com/apache/couchdb/pull/522#issuecomment-302866295","issue_url":"https://api.github.com/repos/apache/couchdb/issues/522","id":302866295,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjg2NjI5NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-20T11:03:43Z","updated_at":"2017-05-20T11:03:43Z","author_association":"MEMBER","body":"fixed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302866295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302898036","html_url":"https://github.com/apache/couchdb/issues/508#issuecomment-302898036","issue_url":"https://api.github.com/repos/apache/couchdb/issues/508","id":302898036,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjg5ODAzNg==","user":{"login":"tonywarn","id":12990937,"node_id":"MDQ6VXNlcjEyOTkwOTM3","avatar_url":"https://avatars.githubusercontent.com/u/12990937?v=4","gravatar_id":"","url":"https://api.github.com/users/tonywarn","html_url":"https://github.com/tonywarn","followers_url":"https://api.github.com/users/tonywarn/followers","following_url":"https://api.github.com/users/tonywarn/following{/other_user}","gists_url":"https://api.github.com/users/tonywarn/gists{/gist_id}","starred_url":"https://api.github.com/users/tonywarn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonywarn/subscriptions","organizations_url":"https://api.github.com/users/tonywarn/orgs","repos_url":"https://api.github.com/users/tonywarn/repos","events_url":"https://api.github.com/users/tonywarn/events{/privacy}","received_events_url":"https://api.github.com/users/tonywarn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-20T20:51:19Z","updated_at":"2017-05-20T20:51:19Z","author_association":"NONE","body":"Same problem here, tried everything but couchdb's windows service refuse to start. Any clue when this release that fix this issue is suppose to be released?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302898036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302898255","html_url":"https://github.com/apache/couchdb/issues/508#issuecomment-302898255","issue_url":"https://api.github.com/repos/apache/couchdb/issues/508","id":302898255,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMjg5ODI1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-20T20:54:59Z","updated_at":"2017-05-20T20:54:59Z","author_association":"MEMBER","body":"The workaround for now is to use what @FodOskar says and run the `couchdb.cmd` file as administrator manually. We'll get a fix out for this with the upcoming 2.1 release, which should happen in the next couple of weeks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/302898255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303157210","html_url":"https://github.com/apache/couchdb/pull/536#issuecomment-303157210","issue_url":"https://api.github.com/repos/apache/couchdb/issues/536","id":303157210,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzE1NzIxMA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T16:51:13Z","updated_at":"2017-05-22T16:51:13Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303157210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303193425","html_url":"https://github.com/apache/couchdb/pull/537#issuecomment-303193425","issue_url":"https://api.github.com/repos/apache/couchdb/issues/537","id":303193425,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzE5MzQyNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T19:13:57Z","updated_at":"2017-05-22T19:13:57Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303193425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303195178","html_url":"https://github.com/apache/couchdb/pull/515#issuecomment-303195178","issue_url":"https://api.github.com/repos/apache/couchdb/issues/515","id":303195178,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzE5NTE3OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T19:21:28Z","updated_at":"2017-05-22T19:21:28Z","author_association":"MEMBER","body":"@tonysun83 Any reason you haven't merged this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303195178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303195939","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303195939","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303195939,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzE5NTkzOQ==","user":{"login":"mraygalaxy","id":966394,"node_id":"MDQ6VXNlcjk2NjM5NA==","avatar_url":"https://avatars.githubusercontent.com/u/966394?v=4","gravatar_id":"","url":"https://api.github.com/users/mraygalaxy","html_url":"https://github.com/mraygalaxy","followers_url":"https://api.github.com/users/mraygalaxy/followers","following_url":"https://api.github.com/users/mraygalaxy/following{/other_user}","gists_url":"https://api.github.com/users/mraygalaxy/gists{/gist_id}","starred_url":"https://api.github.com/users/mraygalaxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mraygalaxy/subscriptions","organizations_url":"https://api.github.com/users/mraygalaxy/orgs","repos_url":"https://api.github.com/users/mraygalaxy/repos","events_url":"https://api.github.com/users/mraygalaxy/events{/privacy}","received_events_url":"https://api.github.com/users/mraygalaxy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T19:24:43Z","updated_at":"2017-05-22T19:24:43Z","author_association":"NONE","body":"Confirmed. I was hoping for regex ability on the _users database.\r\n\r\nHelp. üòÑ ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303195939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303238458","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303238458","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303238458,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzIzODQ1OA==","user":{"login":"mraygalaxy","id":966394,"node_id":"MDQ6VXNlcjk2NjM5NA==","avatar_url":"https://avatars.githubusercontent.com/u/966394?v=4","gravatar_id":"","url":"https://api.github.com/users/mraygalaxy","html_url":"https://github.com/mraygalaxy","followers_url":"https://api.github.com/users/mraygalaxy/followers","following_url":"https://api.github.com/users/mraygalaxy/following{/other_user}","gists_url":"https://api.github.com/users/mraygalaxy/gists{/gist_id}","starred_url":"https://api.github.com/users/mraygalaxy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mraygalaxy/subscriptions","organizations_url":"https://api.github.com/users/mraygalaxy/orgs","repos_url":"https://api.github.com/users/mraygalaxy/repos","events_url":"https://api.github.com/users/mraygalaxy/events{/privacy}","received_events_url":"https://api.github.com/users/mraygalaxy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T22:34:55Z","updated_at":"2017-05-22T22:34:55Z","author_association":"NONE","body":"Neither the default query against _id in the Fauxton UI or a contructed query on the command line via CURL work with the following error:\r\n\r\n>   $ curl -X POST -H \"Content-Type: application/json\" \"http://172.17.0.1:5984/_users/_find\" -d '{\"selector\" : {\"name\" : {\"$eq\" : \"demo\"}}}'\r\n\r\nResults in:\r\n\r\n>   {\"error\":\"unknown_error\",\"reason\":\"case_clause\",\"ref\":1948008234}\r\n\r\nWith the following in the couch log:\r\n\r\n> [error] 2017-05-22T22:34:06.233386Z couchdb@172.17.0.4 <0.966.0> 4bd8b22f4b req_err(1948008234) unknown_error : case_clause\r\n>     [<<\"mango_cursor_view:doc_member/3 L245\">>,<<\"mango_cursor_view:handle_message/2 L154\">>,<<\"fabric_view:maybe_send_row/1 L132\">>,<<\"rexi_utils:process_mailbox/6 L55\">>,<<\"fabric_view_all_docs:go/6 L107\">>,<<\"fabric_view_all_docs:go/5 L32\">>,<<\"mango_cursor_view:execute/3 L91\">>,<<\"mango_httpd:handle_find_req/2 L185\">>]\r\n> [notice] 2017-05-22T22:34:06.235416Z couchdb@172.17.0.4 <0.966.0> 4bd8b22f4b 172.17.0.1:5985 172.17.0.1 undefined POST /_users/_find 500 ok 66\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303238458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303242340","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303242340","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303242340,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzI0MjM0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T22:57:12Z","updated_at":"2017-05-22T22:57:12Z","author_association":"MEMBER","body":"Still fails on `master`:\r\n\r\n```\r\n[error] 2017-05-22T22:56:34.425168Z node1@127.0.0.1 <0.7789.0> 03fee44bca req_err(3984724726) unknown_error : case_clause\r\n    [<<\"mango_cursor_view:doc_member/3 L271\">>,<<\"mango_cursor_view:handle_message/2 L171\">>,<<\"fabric_view:maybe_send_row/1 L132\">>,<<\"rexi_utils:process_mailbox/6 L55\">>,<<\"fabric_view_all_docs:go/6 L112\">>,<<\"fabric_view_all_docs:go/5 L32\">>,<<\"mango_cursor_view:execute/3 L92\">>,<<\"mango_httpd:handle_find_req/2 L185\">>]\r\n[notice] 2017-05-22T22:56:34.425681Z node1@127.0.0.1 <0.7789.0> 03fee44bca localhost:15984 127.0.0.1 undefined POST /_users/_find 500 ok 12\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303242340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303246474","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303246474","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303246474,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzI0NjQ3NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T23:22:45Z","updated_at":"2017-05-22T23:22:45Z","author_association":"MEMBER","body":"After creating an index, you get the aforementioned `badrecord : vacc` error:\r\n\r\n```\r\n[error] 2017-05-22T23:22:03.877980Z node1@127.0.0.1 <0.17275.0> 81bbcf9c62 req_err(3408688270) badrecord : vacc\r\n    [<<\"fabric:query_view/6 L343\">>,<<\"mango_cursor_view:execute/3 L98\">>,<<\"mango_httpd:handle_find_req/2 L185\">>,<<\"mango_httpd:handle_req/2 L37\">>,<<\"chttpd:process_request/1 L295\">>,<<\"chttpd:handle_request_int/1 L231\">>,<<\"mochiweb_http:headers/6 L122\">>,<<\"proc_lib:init_p_do_apply/3 L237\">>]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303246474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303247041","html_url":"https://github.com/apache/couchdb/issues/528#issuecomment-303247041","issue_url":"https://api.github.com/repos/apache/couchdb/issues/528","id":303247041,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzI0NzA0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-22T23:26:13Z","updated_at":"2017-05-22T23:26:13Z","author_association":"MEMBER","body":"PR #529 closed this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303247041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303306753","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303306753","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303306753,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzMwNjc1Mw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-23T06:52:43Z","updated_at":"2017-05-23T06:52:43Z","author_association":"MEMBER","body":"_users is governed by a special permissions system. What happened when you make the request as an admin user?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303306753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303313116","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303313116","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303313116,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzMxMzExNg==","user":{"login":"fahidRM","id":6231091,"node_id":"MDQ6VXNlcjYyMzEwOTE=","avatar_url":"https://avatars.githubusercontent.com/u/6231091?v=4","gravatar_id":"","url":"https://api.github.com/users/fahidRM","html_url":"https://github.com/fahidRM","followers_url":"https://api.github.com/users/fahidRM/followers","following_url":"https://api.github.com/users/fahidRM/following{/other_user}","gists_url":"https://api.github.com/users/fahidRM/gists{/gist_id}","starred_url":"https://api.github.com/users/fahidRM/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fahidRM/subscriptions","organizations_url":"https://api.github.com/users/fahidRM/orgs","repos_url":"https://api.github.com/users/fahidRM/repos","events_url":"https://api.github.com/users/fahidRM/events{/privacy}","received_events_url":"https://api.github.com/users/fahidRM/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-23T07:25:53Z","updated_at":"2017-05-23T07:25:53Z","author_association":"NONE","body":"While trying to run Mango Query, I was logged in as an admin.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303313116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303313281","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-303313281","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":303313281,"node_id":"MDEyOklzc3VlQ29tbWVudDMwMzMxMzI4MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-23T07:26:44Z","updated_at":"2017-05-23T07:26:44Z","author_association":"MEMBER","body":"And my tests were in admin party, @janl...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/303313281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304039061","html_url":"https://github.com/apache/couchdb/pull/539#issuecomment-304039061","issue_url":"https://api.github.com/repos/apache/couchdb/issues/539","id":304039061,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDAzOTA2MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-25T15:25:18Z","updated_at":"2017-05-25T15:30:21Z","author_association":"CONTRIBUTOR","body":"This is a test restarting a 3 node cluster with 130k databases (100k regular and 30k `_replicator` dbs).\r\n\r\n![close_idle_shards_vs_master_100k_dbs_30k_replicator_dbs](https://cloud.githubusercontent.com/assets/211822/26456179/4f5072d4-413a-11e7-8378-1dfd15918ae7.png)\r\n\r\nOn the left is master and on the right is this PR. \r\n\r\nThere were no requests issued to the cluster during this time. All activity is due to internal replication and replicator processing `_replicator` db shards.\r\n\r\nLeft side crashed and restarted after some point, probably due to high memory usage. \r\n\r\nNotice memory consumption and process count continue to rise after internal sync is finished due to the replicator having to launch change feeds and checkpoint 30k * 8 = 240k shards. Closing idle shards in this case has helped free enough memory to let replicator finish checkpointing all the shards.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304039061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304089972","html_url":"https://github.com/apache/couchdb/pull/539#issuecomment-304089972","issue_url":"https://api.github.com/repos/apache/couchdb/issues/539","id":304089972,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDA4OTk3Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-25T18:41:32Z","updated_at":"2017-05-25T18:41:32Z","author_association":"CONTRIBUTOR","body":"Another test with 130k dbs (100k dbs regular + 30k `_users)  dbs.\r\n\r\n![close_idle_shards_vs_master_100k_dbs_30k_user_dbs](https://cloud.githubusercontent.com/assets/211822/26464952/83c71104-4157-11e7-83dd-24522e26f58f.png)\r\n\r\nIn this case replicator is not involved so the effect is easier to see. Memory consumption is reduced significantly (10GB -> 200 MB).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304089972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304140847","html_url":"https://github.com/apache/couchdb/pull/540#issuecomment-304140847","issue_url":"https://api.github.com/repos/apache/couchdb/issues/540","id":304140847,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDE0MDg0Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-25T22:24:06Z","updated_at":"2017-05-25T22:24:06Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304140847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304246911","html_url":"https://github.com/apache/couchdb/pull/543#issuecomment-304246911","issue_url":"https://api.github.com/repos/apache/couchdb/issues/543","id":304246911,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDI0NjkxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-26T10:22:52Z","updated_at":"2017-05-26T10:22:52Z","author_association":"MEMBER","body":"+1, thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304246911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304354170","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304354170","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304354170,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM1NDE3MA==","user":{"login":"elistevens","id":138016,"node_id":"MDQ6VXNlcjEzODAxNg==","avatar_url":"https://avatars.githubusercontent.com/u/138016?v=4","gravatar_id":"","url":"https://api.github.com/users/elistevens","html_url":"https://github.com/elistevens","followers_url":"https://api.github.com/users/elistevens/followers","following_url":"https://api.github.com/users/elistevens/following{/other_user}","gists_url":"https://api.github.com/users/elistevens/gists{/gist_id}","starred_url":"https://api.github.com/users/elistevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elistevens/subscriptions","organizations_url":"https://api.github.com/users/elistevens/orgs","repos_url":"https://api.github.com/users/elistevens/repos","events_url":"https://api.github.com/users/elistevens/events{/privacy}","received_events_url":"https://api.github.com/users/elistevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-26T18:20:22Z","updated_at":"2017-05-26T18:20:22Z","author_association":"NONE","body":"This is a similar issue to https://issues.apache.org/jira/browse/COUCHDB-2634?filter=-2","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304354170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304394200","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304394200","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304394200,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDM5NDIwMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-26T21:42:32Z","updated_at":"2017-05-26T21:42:32Z","author_association":"MEMBER","body":"Hi Eli,\r\n\r\nI don't see any straightforward way to implement this. The problem here is that all of the reduces in a design document are processed simultaneously, and all reductions within that ddoc are added together and contribute to the check for whether the reduce output is not shrinking rapidly enough. In other words, we don't know.\r\n\r\nI might be able to enhance that error line with the name of the ddoc being processed, but that's the best I can do.\r\n\r\nFYI post-2.0 that error check has been modified to be a bit more lenient and to produce a slightly different log message, see https://github.com/apache/couchdb/commit/3937fb1ef2cb4377571f488e7a20e003b5e8c69c and https://issues.apache.org/jira/browse/COUCHDB-3046 for the details. You could use the new `log` setting to get the detail you need to assist in debugging, though again by its very nature we still can't pinpoint the specific reduce function causing issues.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304394200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304426100","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304426100","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304426100,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQyNjEwMA==","user":{"login":"elistevens","id":138016,"node_id":"MDQ6VXNlcjEzODAxNg==","avatar_url":"https://avatars.githubusercontent.com/u/138016?v=4","gravatar_id":"","url":"https://api.github.com/users/elistevens","html_url":"https://github.com/elistevens","followers_url":"https://api.github.com/users/elistevens/followers","following_url":"https://api.github.com/users/elistevens/following{/other_user}","gists_url":"https://api.github.com/users/elistevens/gists{/gist_id}","starred_url":"https://api.github.com/users/elistevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elistevens/subscriptions","organizations_url":"https://api.github.com/users/elistevens/orgs","repos_url":"https://api.github.com/users/elistevens/repos","events_url":"https://api.github.com/users/elistevens/events{/privacy}","received_events_url":"https://api.github.com/users/elistevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-27T04:13:29Z","updated_at":"2017-05-27T04:13:29Z","author_association":"NONE","body":"Ah, I hadn't expected that implementation. Thanks for the link. I'm not 100% certain what `State.line_length` is, but I'm assuming it's the character length of all of the functions and data combined.\r\n\r\nIf that's true, this heuristic seems like it would trigger on literally every output if you had enough views in the design doc. Please check my logic:\r\n\r\nGive a design doc 2k views, each with a reduce that is just `return values[0]`. Have all values just be `0`.\r\n\r\n`reduce_line == \"[\" + \"0,\" * 2047 + \"0]\"` which is 4097 characters long.\r\n\r\nIf all of the keys are unique, and we've got group=exact, then `input_length =  State.line_length - code_size` should be $HUGE - $HUGE leaving something about 4k in length as the input.\r\n\r\nSo `reduce_length` is 4097, and `input_length` is about the same, and it triggers every time.\r\n\r\nNow I realize this is a pathological setup (2k views, etc.) but I think that it points to a weakness in the approach. What if the heuristic were implemented this way (I've removed the error checking for brevity):\r\n\r\n```\r\nfor(var i = 0; i < reduceFuns.length; i++) {\r\n    reductions[i] = reduceFuns[i](keys, values, rereduce);\r\n    reduction_len = JSON.stringify(reductions[i]).length\r\n    values_len = JSON.stringify(values).length\r\n    if(values.length > 3 && reduction_len > values_len / Math.sqrt(values.length)) {\r\n        // error out here\r\n    }\r\n}\r\n```\r\nI realize the re approach wastes the output of the `JSON.stringify` calls, but A) I don't know if that's relevant to performance, and B) it could probably be fixed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304426100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304432993","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304432993","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304432993,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQzMjk5Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-27T06:51:41Z","updated_at":"2017-05-27T06:52:53Z","author_association":"MEMBER","body":"That indeed will slow down view building for ddocs that have multiple views significantly, though I'd have to run numbers to prove it.\r\n\r\nThe fact is that a) 99% of views with reduces use built-ins, and b) increasingly CouchDB users are encouraged to separate views into multiple ddocs anyway, and c) in the 3.x timeframe we're hoping to replace SpiderMoney with a newer JS engine, running directly inside Erlang so I'm not sure there's a lot of appetite to fix this issue.\r\n\r\nI'll leave the ticket open...just setting your expectations correctly that no one is going to burn a lot of cycles profiling this code just to generate a slightly improved error message here for <1% of our user base.\r\n\r\nTagging @nickva since he last touched this code, in case he wants to comment further.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304432993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304453857","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304453857","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304453857,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQ1Mzg1Nw==","user":{"login":"elistevens","id":138016,"node_id":"MDQ6VXNlcjEzODAxNg==","avatar_url":"https://avatars.githubusercontent.com/u/138016?v=4","gravatar_id":"","url":"https://api.github.com/users/elistevens","html_url":"https://github.com/elistevens","followers_url":"https://api.github.com/users/elistevens/followers","following_url":"https://api.github.com/users/elistevens/following{/other_user}","gists_url":"https://api.github.com/users/elistevens/gists{/gist_id}","starred_url":"https://api.github.com/users/elistevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elistevens/subscriptions","organizations_url":"https://api.github.com/users/elistevens/orgs","repos_url":"https://api.github.com/users/elistevens/repos","events_url":"https://api.github.com/users/elistevens/events{/privacy}","received_events_url":"https://api.github.com/users/elistevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-27T14:08:40Z","updated_at":"2017-05-27T14:08:40Z","author_association":"NONE","body":"That's a fair take on it. If it's truly a WONTFIX I don't mind the ticket getting closed. I think that's a more accurate representation of reality than treating it like \"oh, nobody's gotten to it yet,\" when no one ever will.\r\n\r\nI had apparently missed the memo about one-view-per-ddoc; changing to that is probably just a one-line change to the ViewQuery base class we've got, so I might go ahead and do that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304453857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304465038","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304465038","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304465038,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDQ2NTAzOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-27T17:16:34Z","updated_at":"2017-05-27T17:16:34Z","author_association":"MEMBER","body":"I want to be careful about saying it's a universal truth of one-view-per-ddoc. The main value in multiple views per design document is to control the amount of couchjs parallelism on your server (modulus the ini file setting to control the max. number of couchjs processes spawned at once). Move to a single-view-per-ddoc approach and on a busy DB that uses all views, for unbuilt views you can starve some views while they wait for a free couchjs process.\r\n\r\nGenerally for a machine 100% dedicated to CouchDB you want to target approximately (cores - 1) couchjs processes, so that would be the equivalent number of ddocs building at the same time.\r\n\r\nIf your views are largely prebuilt, the document churn in them is fairly static and the views don't need a lot of time to constantly build, # of ddocs has less of an impact. As always, performance test your specific situation to get the data you need - CouchDB's performance is very much data dependent. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304465038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304537151","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-304537151","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":304537151,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDUzNzE1MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-28T20:08:44Z","updated_at":"2017-05-28T20:08:44Z","author_association":"CONTRIBUTOR","body":"Hi Eli,\r\n\r\nYou're right. That check is not perfect. It runs on the whole input line and whole output line. The input line includes both code for all the functions and the input values, and output includes all output values. But the check is currently mostly free. Your patch would work better and would perform the check for each function. But as Joan mentioned, it would take an extra stringify call. So I'd be inclined to keep the current implementation for that reason.\r\n\r\nThink of it as a heuristic and with a handful of views per design doc it's usually clear which one misbehaves in practice.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304537151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304537319","html_url":"https://github.com/apache/couchdb/pull/545#issuecomment-304537319","issue_url":"https://api.github.com/repos/apache/couchdb/issues/545","id":304537319,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDUzNzMxOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-28T20:11:54Z","updated_at":"2017-05-28T20:11:54Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nVery nice work. \r\n\r\nI like the look and feel of the new Jenkins pipeline UI. And groovy script is pretty easy to understand too.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304537319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304932308","html_url":"https://github.com/apache/couchdb/pull/515#issuecomment-304932308","issue_url":"https://api.github.com/repos/apache/couchdb/issues/515","id":304932308,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDkzMjMwOA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T16:24:13Z","updated_at":"2017-05-30T16:24:13Z","author_association":"CONTRIBUTOR","body":"@davisp: wups got lost in the clutter, will do that today","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304932308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304967793","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-304967793","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":304967793,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk2Nzc5Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T18:32:21Z","updated_at":"2017-05-30T18:32:21Z","author_association":"MEMBER","body":"HI @NoodleBB, at present we don't support searching for include headers or shared libraries anywhere other than the system default. Our `configure` script is not based on `autotools` - none of the environment variables you specified will work.\r\n\r\nIt is possible to update https://github.com/apache/couchdb/blob/master/src/couch/rebar.config.script to make this work specifically for couchjs in a platform-neutral fashion, by changing how we handle the JS_CFLAGS and JS_LDFLAGS variables. We'd be happy to accept a pull request here that doesn't break our current build process.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304967793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304971908","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-304971908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":304971908,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk3MTkwOA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T18:47:30Z","updated_at":"2017-05-30T18:47:30Z","author_association":"MEMBER","body":"@tonysun83 @eiri I've fixed up the input validation for invalid engines and added a log statement for when the default engine isn't set to an extension. Wanna take the new bits for a spin?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304971908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304988985","html_url":"https://github.com/apache/couchdb/issues/548#issuecomment-304988985","issue_url":"https://api.github.com/repos/apache/couchdb/issues/548","id":304988985,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk4ODk4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T19:52:27Z","updated_at":"2017-05-30T19:52:27Z","author_association":"MEMBER","body":"Seen again in the same automated run, Ubuntu 16.04, Erlang 18.3. Log excerpt here: https://paste.apache.org/8cF9","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304988985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304991835","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-304991835","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":304991835,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk5MTgzNQ==","user":{"login":"68040","id":11850083,"node_id":"MDQ6VXNlcjExODUwMDgz","avatar_url":"https://avatars.githubusercontent.com/u/11850083?v=4","gravatar_id":"","url":"https://api.github.com/users/68040","html_url":"https://github.com/68040","followers_url":"https://api.github.com/users/68040/followers","following_url":"https://api.github.com/users/68040/following{/other_user}","gists_url":"https://api.github.com/users/68040/gists{/gist_id}","starred_url":"https://api.github.com/users/68040/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/68040/subscriptions","organizations_url":"https://api.github.com/users/68040/orgs","repos_url":"https://api.github.com/users/68040/repos","events_url":"https://api.github.com/users/68040/events{/privacy}","received_events_url":"https://api.github.com/users/68040/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:03:46Z","updated_at":"2017-05-31T07:59:26Z","author_association":"NONE","body":"Hi @wohali.\r\n\r\n> at present we don't support searching for include headers or shared libraries anywhere other than the system default. \r\n\r\nNot very handy. \r\n\r\n> It is possible to update https://github.com/apache/couchdb/blob/master/src/couch/rebar.config.script to make this work (...)\r\n\r\nI tried it to change it that way... \r\n```\r\n{unix, freebsd} ->\r\n    {\"-DHAVE_CURL -I$HOME/include\", \"-DHAVE_CURL -L$HOME/lib -lmozjs185 -lcurl\"};\r\n```\r\n\r\n...but it fails at the same point again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304991835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304996638","html_url":"https://github.com/apache/couchdb/issues/547#issuecomment-304996638","issue_url":"https://api.github.com/repos/apache/couchdb/issues/547","id":304996638,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk5NjYzOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:21:57Z","updated_at":"2017-05-30T20:21:57Z","author_association":"MEMBER","body":"Fix from master cherry-picked: 9875e8b","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304996638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304997424","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-304997424","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":304997424,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk5NzQyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:25:06Z","updated_at":"2017-05-30T20:25:06Z","author_association":"MEMBER","body":"Yeah, that won't work, because there is no $ENVVAR expansion with that syntax inside of a `rebar.config` file. \r\n\r\nIf you just want it compiling for now, hard-code the path to your home directory instead of using $HOME.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304997424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304999537","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-304999537","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":304999537,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNDk5OTUzNw==","user":{"login":"68040","id":11850083,"node_id":"MDQ6VXNlcjExODUwMDgz","avatar_url":"https://avatars.githubusercontent.com/u/11850083?v=4","gravatar_id":"","url":"https://api.github.com/users/68040","html_url":"https://github.com/68040","followers_url":"https://api.github.com/users/68040/followers","following_url":"https://api.github.com/users/68040/following{/other_user}","gists_url":"https://api.github.com/users/68040/gists{/gist_id}","starred_url":"https://api.github.com/users/68040/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/68040/subscriptions","organizations_url":"https://api.github.com/users/68040/orgs","repos_url":"https://api.github.com/users/68040/repos","events_url":"https://api.github.com/users/68040/events{/privacy}","received_events_url":"https://api.github.com/users/68040/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:33:03Z","updated_at":"2017-05-31T09:14:36Z","author_association":"NONE","body":"> If you just want it compiling for now, (...)\r\n\r\nYes: now. \r\nI wanted to demonstrate my bosses and the IT-Department the advantages of CouchDB over Access in an actual use case. - ...and i don't get the the latest version of CouchDB installed.\r\n\r\n> (...) hard-code the path to your home directory instead of using $HOME.\r\n\r\nBy the way...\r\n```\r\n{unix, freebsd} ->\r\n   {\"-DHAVE_CURL -I/home/syncer/include\", \"-DHAVE_CURL -L/home/syncer/lib -lmozjs185 -lcurl\"};\r\n```\r\n...also fails. Same point, same error. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/304999537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305000157","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-305000157","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":305000157,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTAwMDE1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:35:23Z","updated_at":"2017-05-30T20:35:23Z","author_association":"MEMBER","body":"That line only applies if you specify `-c` or `--with-curl` to `configure`. Did you?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305000157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305001190","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-305001190","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":305001190,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTAwMTE5MA==","user":{"login":"68040","id":11850083,"node_id":"MDQ6VXNlcjExODUwMDgz","avatar_url":"https://avatars.githubusercontent.com/u/11850083?v=4","gravatar_id":"","url":"https://api.github.com/users/68040","html_url":"https://github.com/68040","followers_url":"https://api.github.com/users/68040/followers","following_url":"https://api.github.com/users/68040/following{/other_user}","gists_url":"https://api.github.com/users/68040/gists{/gist_id}","starred_url":"https://api.github.com/users/68040/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/68040/subscriptions","organizations_url":"https://api.github.com/users/68040/orgs","repos_url":"https://api.github.com/users/68040/repos","events_url":"https://api.github.com/users/68040/events{/privacy}","received_events_url":"https://api.github.com/users/68040/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:39:14Z","updated_at":"2017-05-31T09:15:04Z","author_association":"NONE","body":"> That line only applies if you specify `-c` or `--with-curl` to `configure`. Did you?\r\n\r\nNope. I didn't know. But now...\r\n```\r\n$ ./configure --with-curl\r\n==> configuring couchdb in rel/couchdb.config\r\nYou have configured Apache CouchDB, time to relax. Relax.\r\n```\r\n\r\nNothing changed. Make still fails. Same error.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305001190/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305004348","html_url":"https://github.com/apache/couchdb/pull/550#issuecomment-305004348","issue_url":"https://api.github.com/repos/apache/couchdb/issues/550","id":305004348,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTAwNDM0OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T20:51:07Z","updated_at":"2017-05-30T20:51:07Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305004348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305017675","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-305017675","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":305017675,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTAxNzY3NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T21:44:52Z","updated_at":"2017-05-30T21:44:52Z","author_association":"MEMBER","body":"Try `-I/home/syncer/include/js`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305017675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305025752","html_url":"https://github.com/apache/couchdb/issues/553#issuecomment-305025752","issue_url":"https://api.github.com/repos/apache/couchdb/issues/553","id":305025752,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTAyNTc1Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T22:22:08Z","updated_at":"2017-05-30T22:22:08Z","author_association":"MEMBER","body":"FYI restartServer() seems to be implemented twice, once with a 1s timeout and once with a 5s timeout. Would be good to remove the redundancy and to set an appropriate timeout.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305025752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305026785","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-305026785","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":305026785,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTAyNjc4NQ==","user":{"login":"68040","id":11850083,"node_id":"MDQ6VXNlcjExODUwMDgz","avatar_url":"https://avatars.githubusercontent.com/u/11850083?v=4","gravatar_id":"","url":"https://api.github.com/users/68040","html_url":"https://github.com/68040","followers_url":"https://api.github.com/users/68040/followers","following_url":"https://api.github.com/users/68040/following{/other_user}","gists_url":"https://api.github.com/users/68040/gists{/gist_id}","starred_url":"https://api.github.com/users/68040/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/68040/subscriptions","organizations_url":"https://api.github.com/users/68040/orgs","repos_url":"https://api.github.com/users/68040/repos","events_url":"https://api.github.com/users/68040/events{/privacy}","received_events_url":"https://api.github.com/users/68040/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-30T22:27:21Z","updated_at":"2017-05-31T09:16:14Z","author_association":"NONE","body":"> Try `-I/home/syncer/include/js`\r\n\r\nI did. Build fails. Same error. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305026785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305293259","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-305293259","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":305293259,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTI5MzI1OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T19:33:51Z","updated_at":"2017-05-31T19:33:51Z","author_association":"CONTRIBUTOR","body":"If anyone is curious here is the code coverage analysis for unit tests:\r\n\r\nTo get this had to upgrade to latest meck repo. Otherwise meck and cover don't play well with each other.\r\n\r\nAlso this includes tests themselves which makes number look a lot better than they are. But the good new is`couch_bt*`,  and `couch_db_engine` are covered pretty well\r\n\r\n```\r\nCover analysis: asf-pse/src/couch/.eunit/index.html\r\n\r\nCode Coverage:\r\nchttpd_endpoints_tests          :  98%\r\ncouch                           :   0%\r\ncouch_app                       :  75%\r\ncouch_att                       :  76%\r\ncouch_auth_cache                :  73%\r\ncouch_base32                    :  96%\r\ncouch_bt_engine                 :  89%\r\ncouch_bt_engine_compactor       :  88%\r\ncouch_bt_engine_header          :  82%\r\ncouch_bt_engine_stream          :  88%\r\ncouch_btree                     :  88%\r\ncouch_changes                   :  65%\r\ncouch_compaction_daemon         :  19%\r\ncouch_compress                  :  84%\r\ncouch_crypto                    :  41%\r\ncouch_db                        :  66%\r\ncouch_db_doc_tests              : 100%\r\ncouch_db_engine                 :  76%\r\ncouch_db_epi                    : 100%\r\ncouch_db_header                 :  82%\r\ncouch_db_mpr_tests              : 100%\r\ncouch_db_plugin                 :  91%\r\ncouch_db_updater                :  66%\r\ncouch_debug                     :   0%\r\ncouch_doc                       :  81%\r\ncouch_doc_json_tests            :  95%\r\ncouch_drv                       :  37%\r\ncouch_ejson_compare             :  18%\r\ncouch_emsort                    :  89%\r\ncouch_etag_tests                : 100%\r\ncouch_event_sup                 :   0%\r\ncouch_external_manager          :  17%\r\ncouch_external_server           :   0%\r\ncouch_file                      :  84%\r\ncouch_hotp                      :  85%\r\ncouch_httpd                     :  65%\r\ncouch_httpd_auth                :  40%\r\ncouch_httpd_db                  :  36%\r\ncouch_httpd_external            :   0%\r\ncouch_httpd_handlers            : 100%\r\ncouch_httpd_misc_handlers       :  10%\r\ncouch_httpd_multipart           :  73%\r\ncouch_httpd_oauth               :  41%\r\ncouch_httpd_proxy               :  75%\r\ncouch_httpd_rewrite             :  52%\r\ncouch_httpd_vhost               :  80%\r\ncouch_key_tree                  :  88%\r\ncouch_lru                       : 100%\r\ncouch_multidb_changes           :  93%\r\ncouch_native_process            :   0%\r\ncouch_os_daemons                :  70%\r\ncouch_os_process                :  52%\r\ncouch_passwords                 :  78%\r\ncouch_primary_sup               : 100%\r\ncouch_proc_manager              :  72%\r\ncouch_query_servers             :  50%\r\ncouch_secondary_sup             : 100%\r\ncouch_server                    :  73%\r\ncouch_stream                    :  90%\r\ncouch_sup                       :  63%\r\ncouch_task_status               :  90%\r\ncouch_totp                      : 100%\r\ncouch_users_db                  :   4%\r\ncouch_util                      :  68%\r\ncouch_uuids                     :  79%\r\ncouch_work_queue                :  77%\r\ncouchdb_attachments_tests       :  99%\r\ncouchdb_auth_tests              :  96%\r\ncouchdb_compaction_daemon_tests :  95%\r\ncouchdb_cors_tests              : 100%\r\ncouchdb_csp_tests               : 100%\r\ncouchdb_design_doc_tests        : 100%\r\ncouchdb_file_compression_tests  :  99%\r\ncouchdb_http_proxy_tests        :  90%\r\ncouchdb_location_header_tests   : 100%\r\ncouchdb_mrview_cors_tests       : 100%\r\ncouchdb_mrview_tests            :  98%\r\ncouchdb_os_daemons_tests        :  98%\r\ncouchdb_os_proc_pool            :  95%\r\ncouchdb_update_conflicts_tests  :  97%\r\ncouchdb_vhosts_tests            :  90%\r\ncouchdb_views_tests             :  94%\r\nglobal_changes_tests            :  98%\r\njson_stream_parse_tests         : 100%\r\ntest_engine_attachments         :  93%\r\ntest_engine_compaction          :  96%\r\ntest_engine_fold_changes        :  93%\r\ntest_engine_fold_docs           : 100%\r\ntest_engine_get_set_props       : 100%\r\ntest_engine_open_close_delete   : 100%\r\ntest_engine_purge_docs          : 100%\r\ntest_engine_read_write_docs     : 100%\r\ntest_engine_ref_counting        :  89%\r\ntest_engine_util                :  91%\r\ntest_request                    :  67%\r\ntest_util                       :  71%\r\ntest_web                        :  63%\r\n\r\nTotal                           : 73%\r\n==> rel (eunit)\r\n==> asf-pse (eunit)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305293259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305314606","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305314606","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305314606,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMxNDYwNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T20:55:27Z","updated_at":"2017-05-31T20:55:27Z","author_association":"MEMBER","body":"There are no errors in this logfile paste to go on. It shows a few restarts but that's it.\r\n\r\nIf you open a command prompt yourself and run the batch file in bin (couchdb.cmd) and run it, is an error displayed?\r\n\r\nAre you sure your server is not running out of RAM or CPU and the OS isn't killing CouchDB for some reason?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305314606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305315935","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305315935","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305315935,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMxNTkzNQ==","user":{"login":"JamesSc0tt","id":24981581,"node_id":"MDQ6VXNlcjI0OTgxNTgx","avatar_url":"https://avatars.githubusercontent.com/u/24981581?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesSc0tt","html_url":"https://github.com/JamesSc0tt","followers_url":"https://api.github.com/users/JamesSc0tt/followers","following_url":"https://api.github.com/users/JamesSc0tt/following{/other_user}","gists_url":"https://api.github.com/users/JamesSc0tt/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesSc0tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesSc0tt/subscriptions","organizations_url":"https://api.github.com/users/JamesSc0tt/orgs","repos_url":"https://api.github.com/users/JamesSc0tt/repos","events_url":"https://api.github.com/users/JamesSc0tt/events{/privacy}","received_events_url":"https://api.github.com/users/JamesSc0tt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:00:24Z","updated_at":"2017-05-31T21:00:24Z","author_association":"NONE","body":"http://wanconnectors.co.uk/i/t1exr.png < the error when I run it through cmd..\r\n\r\nDon't think the issue is with RAM or CPU, sitting at 13% CPU and 25% Memory usage.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305315935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305317599","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305317599","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305317599,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMxNzU5OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:06:41Z","updated_at":"2017-05-31T21:06:41Z","author_association":"CONTRIBUTOR","body":"I think you might have started multiple couchdb nodes on the same machine. Going by the \"name couchdb@localhost seems to be in use by another Erlang node\" error message.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305317599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305318096","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305318096","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305318096,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMxODA5Ng==","user":{"login":"JamesSc0tt","id":24981581,"node_id":"MDQ6VXNlcjI0OTgxNTgx","avatar_url":"https://avatars.githubusercontent.com/u/24981581?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesSc0tt","html_url":"https://github.com/JamesSc0tt","followers_url":"https://api.github.com/users/JamesSc0tt/followers","following_url":"https://api.github.com/users/JamesSc0tt/following{/other_user}","gists_url":"https://api.github.com/users/JamesSc0tt/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesSc0tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesSc0tt/subscriptions","organizations_url":"https://api.github.com/users/JamesSc0tt/orgs","repos_url":"https://api.github.com/users/JamesSc0tt/repos","events_url":"https://api.github.com/users/JamesSc0tt/events{/privacy}","received_events_url":"https://api.github.com/users/JamesSc0tt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:08:39Z","updated_at":"2017-05-31T21:08:51Z","author_association":"NONE","body":"I mean, I've uninstalled and re-installed it a few times because that's the only way it gets working, but none of them are running (or none look like they're running) so it could be possible.\r\n\r\nIs there a way I'd be able to modify that or close some?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305318096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305319608","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305319608","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305319608,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMxOTYwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:14:35Z","updated_at":"2017-05-31T21:14:35Z","author_association":"MEMBER","body":"Go to the Services control panel (under Administrative Tools) and use the option there to restart the service rather than using the batch file.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305319608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305320538","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305320538","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305320538,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyMDUzOA==","user":{"login":"JamesSc0tt","id":24981581,"node_id":"MDQ6VXNlcjI0OTgxNTgx","avatar_url":"https://avatars.githubusercontent.com/u/24981581?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesSc0tt","html_url":"https://github.com/JamesSc0tt","followers_url":"https://api.github.com/users/JamesSc0tt/followers","following_url":"https://api.github.com/users/JamesSc0tt/following{/other_user}","gists_url":"https://api.github.com/users/JamesSc0tt/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesSc0tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesSc0tt/subscriptions","organizations_url":"https://api.github.com/users/JamesSc0tt/orgs","repos_url":"https://api.github.com/users/JamesSc0tt/repos","events_url":"https://api.github.com/users/JamesSc0tt/events{/privacy}","received_events_url":"https://api.github.com/users/JamesSc0tt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:18:24Z","updated_at":"2017-05-31T21:18:24Z","author_association":"NONE","body":"I have just tried that, it doesn't seem to make a difference, so I stopped it and tried to run the batch file and got this error instead: http://wanconnectors.co.uk/i/l8h7j.png","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305320538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305320701","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305320701","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305320701,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyMDcwMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:19:08Z","updated_at":"2017-05-31T21:19:08Z","author_association":"MEMBER","body":"The user you're using to run the service from the command line doesn't have write access. You'll need to open an Administrator prompt from which to run CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305320701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305321540","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305321540","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305321540,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyMTU0MA==","user":{"login":"JamesSc0tt","id":24981581,"node_id":"MDQ6VXNlcjI0OTgxNTgx","avatar_url":"https://avatars.githubusercontent.com/u/24981581?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesSc0tt","html_url":"https://github.com/JamesSc0tt","followers_url":"https://api.github.com/users/JamesSc0tt/followers","following_url":"https://api.github.com/users/JamesSc0tt/following{/other_user}","gists_url":"https://api.github.com/users/JamesSc0tt/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesSc0tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesSc0tt/subscriptions","organizations_url":"https://api.github.com/users/JamesSc0tt/orgs","repos_url":"https://api.github.com/users/JamesSc0tt/repos","events_url":"https://api.github.com/users/JamesSc0tt/events{/privacy}","received_events_url":"https://api.github.com/users/JamesSc0tt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:22:33Z","updated_at":"2017-05-31T21:23:19Z","author_association":"NONE","body":"Sorry about that, didn't even think. It sits on `kernel-poll is not supported; \"K\" parameter ignored` and does nothing.. http://wanconnectors.co.uk/i/t4ucv.png\r\n\r\nWhen I try to do it through services, I get this error: http://wanconnectors.co.uk/i/i6bd9.png","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305321540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305321975","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305321975","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305321975,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyMTk3NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:24:17Z","updated_at":"2017-05-31T21:24:17Z","author_association":"MEMBER","body":"That's a good sign. That means CouchDB is running.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305321975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305322132","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305322132","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305322132,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyMjEzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:24:52Z","updated_at":"2017-05-31T21:24:52Z","author_association":"MEMBER","body":"I don't see any evidence of what's causing CouchDB to exit in the logs. Closing this issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305322132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305322288","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305322288","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305322288,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyMjI4OA==","user":{"login":"JamesSc0tt","id":24981581,"node_id":"MDQ6VXNlcjI0OTgxNTgx","avatar_url":"https://avatars.githubusercontent.com/u/24981581?v=4","gravatar_id":"","url":"https://api.github.com/users/JamesSc0tt","html_url":"https://github.com/JamesSc0tt","followers_url":"https://api.github.com/users/JamesSc0tt/followers","following_url":"https://api.github.com/users/JamesSc0tt/following{/other_user}","gists_url":"https://api.github.com/users/JamesSc0tt/gists{/gist_id}","starred_url":"https://api.github.com/users/JamesSc0tt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JamesSc0tt/subscriptions","organizations_url":"https://api.github.com/users/JamesSc0tt/orgs","repos_url":"https://api.github.com/users/JamesSc0tt/repos","events_url":"https://api.github.com/users/JamesSc0tt/events{/privacy}","received_events_url":"https://api.github.com/users/JamesSc0tt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:25:31Z","updated_at":"2017-05-31T21:25:31Z","author_association":"NONE","body":"I mean, it's not solved? What am I supposed to do?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305322288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305326922","html_url":"https://github.com/apache/couchdb/issues/557#issuecomment-305326922","issue_url":"https://api.github.com/repos/apache/couchdb/issues/557","id":305326922,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTMyNjkyMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-05-31T21:45:41Z","updated_at":"2017-05-31T21:45:41Z","author_association":"MEMBER","body":"This is probably a duplicate of https://github.com/apache/couchdb/issues/508 .\r\n\r\nYour log files have nothing for us to go on that suggest there's anything else going on here. What more do you expect us to do?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305326922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305401399","html_url":"https://github.com/apache/couchdb/pull/496#issuecomment-305401399","issue_url":"https://api.github.com/repos/apache/couchdb/issues/496","id":305401399,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTQwMTM5OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T06:31:05Z","updated_at":"2017-06-01T06:31:05Z","author_association":"CONTRIBUTOR","body":"PR to fix local docs compatibility with master:\r\n\r\nhttps://github.com/apache/couchdb/pull/558\r\n\r\nIssue was found by @eiri ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305401399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305596346","html_url":"https://github.com/apache/couchdb/pull/539#issuecomment-305596346","issue_url":"https://api.github.com/repos/apache/couchdb/issues/539","id":305596346,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTU5NjM0Ng==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T19:30:44Z","updated_at":"2017-06-01T19:31:06Z","author_association":"CONTRIBUTOR","body":"I know it is out of the scope of this PR but I want to mention the possibility anyway. \r\nWe could store extend statistics in the process dictionary. For example we could store following keys:\r\n  - rx_access_time\r\n  - tx_access_time\r\n  - rx_bytes (payload size of last request (last request or counter since we open?))\r\n  - tx_bytes (payload size of last request (last request or counter since we open?))\r\n  - rx_requests\r\n  - tx_requests\r\n\r\nIn this case we would kill two birds with one stone. \r\n1. we would account for both reads and writes when we make a decision to close the file.\r\n2. we can extend couch_debug to return :\r\n - recently accessed files\r\n - top N files which write the most\r\n - top N files which read the most","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305596346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305598624","html_url":"https://github.com/apache/couchdb/pull/539#issuecomment-305598624","issue_url":"https://api.github.com/repos/apache/couchdb/issues/539","id":305598624,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTU5ODYyNA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T19:38:21Z","updated_at":"2017-06-01T19:38:21Z","author_association":"CONTRIBUTOR","body":"Would it be a good idea to prevent `sysdb` (things like `_dbs` or `_nodes`) from closing?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305598624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305605762","html_url":"https://github.com/apache/couchdb/pull/539#issuecomment-305605762","issue_url":"https://api.github.com/repos/apache/couchdb/issues/539","id":305605762,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTYwNTc2Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T20:07:52Z","updated_at":"2017-06-01T20:07:52Z","author_association":"CONTRIBUTOR","body":"I did think about special casing _nodes and _dbs but from what I remember `_dbs` for example had change feeds hanging of it so it wasn't idle. I'll have to double check but I think those are kept alive anyway.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305605762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305611951","html_url":"https://github.com/apache/couchdb/pull/539#issuecomment-305611951","issue_url":"https://api.github.com/repos/apache/couchdb/issues/539","id":305611951,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTYxMTk1MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T20:32:57Z","updated_at":"2017-06-02T05:32:26Z","author_association":"CONTRIBUTOR","body":"@iilyak \r\n\r\nOn the stats idea, we could keep a few stats in there to help debug and monitor issues. Some of the things like total bytes in and out can be found out from the port drivers (efile and inet). But we could keep them in one place in the process dict to avoid digging too deep for the port driver info.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305611951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305650761","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-305650761","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":305650761,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTY1MDc2MQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-01T23:47:14Z","updated_at":"2017-06-01T23:47:14Z","author_association":"CONTRIBUTOR","body":"I noticed that we often do something like the following:\r\n```\r\n  {ok, Pid, Mon, Args} = get_index(...),\r\n  <something>\r\n  couch_index_server:close(Mon)\r\n```\r\nDid you consider implementing following helper functions\r\n```\r\nwith_index_process(Db, DDoc, ViewName, InArgs, Fun) ->\r\n    case get_view_index_pid(Db, DDoc, ViewName, Args0) of\r\n        {ok, Pid, Mon, Args} ->\r\n            try\r\n                Fun(Pid, Args)\r\n            after\r\n                ok = couch_index_server:close(Mon)\r\n            end;\r\n        {error, _Reason} = Error ->\r\n            Error\r\n    end.\r\n\r\nwith_index(Module, DbName, DDocId, Fun) ->\r\n    case get_index(Module, DbName, DDocId) of\r\n        {ok, Pid, Mon} ->\r\n            try\r\n                Fun(Pid)\r\n            after\r\n                ok = couch_index_server:close(Mon)\r\n            end;\r\n        {error, _Reason} = Error ->\r\n            Error\r\n    end.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305650761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305655282","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-305655282","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":305655282,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTY1NTI4Mg==","user":{"login":"sagelywizard","id":167249,"node_id":"MDQ6VXNlcjE2NzI0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/167249?v=4","gravatar_id":"","url":"https://api.github.com/users/sagelywizard","html_url":"https://github.com/sagelywizard","followers_url":"https://api.github.com/users/sagelywizard/followers","following_url":"https://api.github.com/users/sagelywizard/following{/other_user}","gists_url":"https://api.github.com/users/sagelywizard/gists{/gist_id}","starred_url":"https://api.github.com/users/sagelywizard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sagelywizard/subscriptions","organizations_url":"https://api.github.com/users/sagelywizard/orgs","repos_url":"https://api.github.com/users/sagelywizard/repos","events_url":"https://api.github.com/users/sagelywizard/events{/privacy}","received_events_url":"https://api.github.com/users/sagelywizard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-02T00:19:18Z","updated_at":"2017-06-02T00:19:18Z","author_association":"MEMBER","body":"Could add that. Not necessary though. We'd still need to do the manual `get_index` and `close` in some places.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305655282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305707270","html_url":"https://github.com/apache/couchdb/issues/559#issuecomment-305707270","issue_url":"https://api.github.com/repos/apache/couchdb/issues/559","id":305707270,"node_id":"MDEyOklzc3VlQ29tbWVudDMwNTcwNzI3MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-02T07:04:48Z","updated_at":"2017-06-02T07:04:48Z","author_association":"MEMBER","body":"Through instrumentation of `ddoc_cache` and `ets_lru` I suspect that this is caused by cache eviction happening after the second `GET`. Here's a log from a failed instance of the test:\r\n\r\n```\r\n[notice] 2017-06-01T23:23:40.753022Z node1@127.0.0.1 <0.325.0> 6b133c86bb 127.0.0.1:15984 127.0.0.1 undefined GET /test_suite_db_hpsbou/_design/template/_show/just-name/ba144f667c0b6e26eb5f03b684033710 304 ok 3\r\n[error] 2017-06-01T23:23:40.792726Z node1@127.0.0.1 <0.587.0> -------- ddoc_cache evicting _design/template\r\n[error] 2017-06-01T23:23:40.793209Z node1@127.0.0.1 <0.587.0> -------- ddoc_cache evicted _design/template\r\n[error] 2017-06-01T23:23:40.793479Z node1@127.0.0.1 <0.587.0> -------- ddoc_cache evicting _design/template\r\n[error] 2017-06-01T23:23:40.793546Z node1@127.0.0.1 <0.587.0> -------- ddoc_cache evicted _design/template\r\n[notice] 2017-06-01T23:23:40.794495Z node1@127.0.0.1 <0.325.0> dcca3621ed 127.0.0.1:15984 127.0.0.1 undefined PUT /test_suite_db_hpsbou/_design%2Ftemplate 201 ok 41\r\n[error] 2017-06-01T23:23:40.795740Z node1@127.0.0.1 <0.391.0> -------- ets_lru remove test_suite_db_hpsbou\r\n[error] 2017-06-01T23:23:40.796272Z node1@127.0.0.1 <0.325.0> 67dbdabbba ddoc_cache opening _design/template\r\n[error] 2017-06-01T23:23:40.796338Z node1@127.0.0.1 <0.391.0> -------- ets_lru remove test_suite_db_hpsbou\r\n[error] 2017-06-01T23:23:40.796350Z node1@127.0.0.1 <0.325.0> 67dbdabbba hit _design/template\r\n[notice] 2017-06-01T23:23:40.798244Z node1@127.0.0.1 <0.325.0> 67dbdabbba 127.0.0.1:15984 127.0.0.1 undefined GET /test_suite_db_hpsbou/_design/template/_show/just-name/ba144f667c0b6e26eb5f03b684033710 304 ok 3\r\n```\r\n\r\nWhile I didn't instrument exactly where the GET occurs it's clear that it's fairly late, certainly after the `PUT 201` is returned, and likely after the subsequent `GET` actually reads from `ddoc_cache`.\r\n\r\nDuring testing I also determined it's impossible to completely disable the `ddoc_cache`; I can only set its size to a positive integer. I'll submit a separate PR that fixes this. Once that change was implemented, and I could set `max_objects` to `0`, I ran the test in a loop 500 times and got not a single failure.\r\n\r\nOur options are:\r\n1. Change the `ddoc_cache` flush on updating a ddoc to be synchronous, not asynchronous, at least in the pathological case of a single node server. However, I am betting some Cloudant stakeholders will not want this (/cc @davisp @rnewson @nickva)\r\n2. Improve our test harness to completely disable the `ddoc_cache` for this test, then use that option when running the test. This means augmenting `dev/run` and the JS harness so that we can specify `vm.args` files. Alternately, setup `ddoc_cache` with the appropriate `config:get` calls instead of using `application:get_env`.\r\n3. Discard the single test under review (`test/javascript/tests/show_documents.js` lines 280-296) To me this is sweeping the issue under the rug, though if we are permanently changing the semantics here, it is marginally acceptable.\r\n4. Drop ETag support for _shows.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/305707270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]