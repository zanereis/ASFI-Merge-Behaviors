[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530115559","html_url":"https://github.com/apache/iceberg/pull/465#issuecomment-530115559","issue_url":"https://api.github.com/repos/apache/iceberg/issues/465","id":530115559,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDExNTU1OQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T20:55:28Z","updated_at":"2019-09-10T21:45:01Z","author_association":"CONTRIBUTOR","body":"Is this some utility that you are writing?  \r\nI used `org.apache.iceberg.mapping.MappingUtil#create` which is under the same package name and is able to access MappedFields to correctly create the `NameMapping`. \r\n\r\nMappingUtil#create only takes an Iceberg schema though","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530115559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530122253","html_url":"https://github.com/apache/iceberg/issues/451#issuecomment-530122253","issue_url":"https://api.github.com/repos/apache/iceberg/issues/451","id":530122253,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDEyMjI1Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T21:12:45Z","updated_at":"2019-09-10T21:12:45Z","author_association":"CONTRIBUTOR","body":"@bsannicolas, do you want to open a PR to fix this in master?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530122253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530122768","html_url":"https://github.com/apache/iceberg/issues/409#issuecomment-530122768","issue_url":"https://api.github.com/repos/apache/iceberg/issues/409","id":530122768,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDEyMjc2OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T21:14:04Z","updated_at":"2019-09-10T21:14:04Z","author_association":"CONTRIBUTOR","body":"Okay, I see. Yeah, we should expose the DataFile method as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530122768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530141688","html_url":"https://github.com/apache/iceberg/pull/227#issuecomment-530141688","issue_url":"https://api.github.com/repos/apache/iceberg/issues/227","id":530141688,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDE0MTY4OA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T22:15:59Z","updated_at":"2019-09-10T22:15:59Z","author_association":"CONTRIBUTOR","body":"@edgarRd  is #199 compatible with this PR . Can both of them be used together?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530141688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530144955","html_url":"https://github.com/apache/iceberg/issues/459#issuecomment-530144955","issue_url":"https://api.github.com/repos/apache/iceberg/issues/459","id":530144955,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDE0NDk1NQ==","user":{"login":"lxynov","id":47990574,"node_id":"MDQ6VXNlcjQ3OTkwNTc0","avatar_url":"https://avatars.githubusercontent.com/u/47990574?v=4","gravatar_id":"","url":"https://api.github.com/users/lxynov","html_url":"https://github.com/lxynov","followers_url":"https://api.github.com/users/lxynov/followers","following_url":"https://api.github.com/users/lxynov/following{/other_user}","gists_url":"https://api.github.com/users/lxynov/gists{/gist_id}","starred_url":"https://api.github.com/users/lxynov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lxynov/subscriptions","organizations_url":"https://api.github.com/users/lxynov/orgs","repos_url":"https://api.github.com/users/lxynov/repos","events_url":"https://api.github.com/users/lxynov/events{/privacy}","received_events_url":"https://api.github.com/users/lxynov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T22:28:33Z","updated_at":"2019-09-10T22:28:33Z","author_association":"CONTRIBUTOR","body":"I think the work can follow these steps:\r\n1. Change the method signature of `ManifestReader::read` to let it accept a map from spec ID to partition spec.\r\n2. Decouple `ManifestGroup` and `BaseSnapshot` from `TableOperations`. We'll need to include a `specsById` (a map from spec ID to partition spec) as their fields.\r\n3. Decouple `TableMetadataParser` and `TableMetadata` from `TableOperations`.\r\n\r\nSo I've created PR #467 which does the first step. Please LMK if it makes sense.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530144955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530149305","html_url":"https://github.com/apache/iceberg/pull/227#issuecomment-530149305","issue_url":"https://api.github.com/repos/apache/iceberg/issues/227","id":530149305,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDE0OTMwNQ==","user":{"login":"lxynov","id":47990574,"node_id":"MDQ6VXNlcjQ3OTkwNTc0","avatar_url":"https://avatars.githubusercontent.com/u/47990574?v=4","gravatar_id":"","url":"https://api.github.com/users/lxynov","html_url":"https://github.com/lxynov","followers_url":"https://api.github.com/users/lxynov/followers","following_url":"https://api.github.com/users/lxynov/following{/other_user}","gists_url":"https://api.github.com/users/lxynov/gists{/gist_id}","starred_url":"https://api.github.com/users/lxynov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lxynov/subscriptions","organizations_url":"https://api.github.com/users/lxynov/orgs","repos_url":"https://api.github.com/users/lxynov/repos","events_url":"https://api.github.com/users/lxynov/events{/privacy}","received_events_url":"https://api.github.com/users/lxynov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T22:46:05Z","updated_at":"2019-09-10T22:46:05Z","author_association":"CONTRIBUTOR","body":"> Thanks for the update, @linxingyuan1102. It would be great to have your help getting the spec updated. In the end, I think Presto should depend on Iceberg to convert an ORC file's schema to an Iceberg schema so that we can more easily guarantee compatibility, but in theory we should be able to re-implement the conversion to a schema with IDs.\r\n\r\n@rdblue Sorry I missed replying before. I agree that it's better to have Iceberg do the conversion for Presto. But Presto uses its own implementation of ORC reader/writer so I'm not sure how much work it will involve on the Presto side and if it's worth the efforts to do so. But let's update the spec first. We can see later if it's easy to let Presto use Iceberg's conversion method.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530149305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530154653","html_url":"https://github.com/apache/iceberg/pull/466#issuecomment-530154653","issue_url":"https://api.github.com/repos/apache/iceberg/issues/466","id":530154653,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDE1NDY1Mw==","user":{"login":"wangmiao1981","id":5033592,"node_id":"MDQ6VXNlcjUwMzM1OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5033592?v=4","gravatar_id":"","url":"https://api.github.com/users/wangmiao1981","html_url":"https://github.com/wangmiao1981","followers_url":"https://api.github.com/users/wangmiao1981/followers","following_url":"https://api.github.com/users/wangmiao1981/following{/other_user}","gists_url":"https://api.github.com/users/wangmiao1981/gists{/gist_id}","starred_url":"https://api.github.com/users/wangmiao1981/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangmiao1981/subscriptions","organizations_url":"https://api.github.com/users/wangmiao1981/orgs","repos_url":"https://api.github.com/users/wangmiao1981/repos","events_url":"https://api.github.com/users/wangmiao1981/events{/privacy}","received_events_url":"https://api.github.com/users/wangmiao1981/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T23:10:07Z","updated_at":"2019-09-10T23:10:07Z","author_association":"CONTRIBUTOR","body":"RETEST","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530154653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530172606","html_url":"https://github.com/apache/iceberg/pull/227#issuecomment-530172606","issue_url":"https://api.github.com/repos/apache/iceberg/issues/227","id":530172606,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDE3MjYwNg==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-11T00:42:01Z","updated_at":"2019-09-11T00:42:01Z","author_association":"CONTRIBUTOR","body":"@rdsr My plan was to get this column mapping in first and then rebase and use in #199 since this PR would provide the right mapping.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530172606/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530175403","html_url":"https://github.com/apache/iceberg/pull/227#issuecomment-530175403","issue_url":"https://api.github.com/repos/apache/iceberg/issues/227","id":530175403,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDE3NTQwMw==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-11T00:59:01Z","updated_at":"2019-09-11T00:59:01Z","author_association":"CONTRIBUTOR","body":"@rdblue @rdsr this should be ready for another pass whenever you have some chance, changes included:\r\n* Using ORC v1.6.0\r\n* Storing Iceberg column IDs in ORC column type attributes\r\n* Removed handling mapping state externally\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530175403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530221118","html_url":"https://github.com/apache/iceberg/pull/465#issuecomment-530221118","issue_url":"https://api.github.com/repos/apache/iceberg/issues/465","id":530221118,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDIyMTExOA==","user":{"login":"puneetzaroo","id":2358709,"node_id":"MDQ6VXNlcjIzNTg3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2358709?v=4","gravatar_id":"","url":"https://api.github.com/users/puneetzaroo","html_url":"https://github.com/puneetzaroo","followers_url":"https://api.github.com/users/puneetzaroo/followers","following_url":"https://api.github.com/users/puneetzaroo/following{/other_user}","gists_url":"https://api.github.com/users/puneetzaroo/gists{/gist_id}","starred_url":"https://api.github.com/users/puneetzaroo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puneetzaroo/subscriptions","organizations_url":"https://api.github.com/users/puneetzaroo/orgs","repos_url":"https://api.github.com/users/puneetzaroo/repos","events_url":"https://api.github.com/users/puneetzaroo/events{/privacy}","received_events_url":"https://api.github.com/users/puneetzaroo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-11T05:06:32Z","updated_at":"2019-09-11T05:06:32Z","author_association":"CONTRIBUTOR","body":"Yes, this is a utility I am writing. And yes, I do not want to  create the mapping from a table schema; as the mapping is not completely derivable from the schema itself, but is has to be carried over from a different (legacy) system.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530221118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530422464","html_url":"https://github.com/apache/iceberg/pull/227#issuecomment-530422464","issue_url":"https://api.github.com/repos/apache/iceberg/issues/227","id":530422464,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDQyMjQ2NA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-11T15:03:25Z","updated_at":"2019-09-11T15:03:25Z","author_association":"CONTRIBUTOR","body":"@edgarRd . I plan to go through the PR this week. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530422464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530572102","html_url":"https://github.com/apache/iceberg/pull/470#issuecomment-530572102","issue_url":"https://api.github.com/repos/apache/iceberg/issues/470","id":530572102,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDU3MjEwMg==","user":{"login":"moulimukherjee","id":2379129,"node_id":"MDQ6VXNlcjIzNzkxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2379129?v=4","gravatar_id":"","url":"https://api.github.com/users/moulimukherjee","html_url":"https://github.com/moulimukherjee","followers_url":"https://api.github.com/users/moulimukherjee/followers","following_url":"https://api.github.com/users/moulimukherjee/following{/other_user}","gists_url":"https://api.github.com/users/moulimukherjee/gists{/gist_id}","starred_url":"https://api.github.com/users/moulimukherjee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moulimukherjee/subscriptions","organizations_url":"https://api.github.com/users/moulimukherjee/orgs","repos_url":"https://api.github.com/users/moulimukherjee/repos","events_url":"https://api.github.com/users/moulimukherjee/events{/privacy}","received_events_url":"https://api.github.com/users/moulimukherjee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-11T21:24:21Z","updated_at":"2019-09-11T21:24:21Z","author_association":"CONTRIBUTOR","body":"I see a test failing, so am guessing the behaviour's expected. How should the `doRefresh` behave then?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530572102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530580614","html_url":"https://github.com/apache/iceberg/issues/451#issuecomment-530580614","issue_url":"https://api.github.com/repos/apache/iceberg/issues/451","id":530580614,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDU4MDYxNA==","user":{"login":"bsannicolas","id":50034283,"node_id":"MDQ6VXNlcjUwMDM0Mjgz","avatar_url":"https://avatars.githubusercontent.com/u/50034283?v=4","gravatar_id":"","url":"https://api.github.com/users/bsannicolas","html_url":"https://github.com/bsannicolas","followers_url":"https://api.github.com/users/bsannicolas/followers","following_url":"https://api.github.com/users/bsannicolas/following{/other_user}","gists_url":"https://api.github.com/users/bsannicolas/gists{/gist_id}","starred_url":"https://api.github.com/users/bsannicolas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bsannicolas/subscriptions","organizations_url":"https://api.github.com/users/bsannicolas/orgs","repos_url":"https://api.github.com/users/bsannicolas/repos","events_url":"https://api.github.com/users/bsannicolas/events{/privacy}","received_events_url":"https://api.github.com/users/bsannicolas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-11T21:51:06Z","updated_at":"2019-09-11T21:51:06Z","author_association":"CONTRIBUTOR","body":"@rdblue https://github.com/apache/incubator-iceberg/pull/469","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530580614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530614319","html_url":"https://github.com/apache/iceberg/pull/461#issuecomment-530614319","issue_url":"https://api.github.com/repos/apache/iceberg/issues/461","id":530614319,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDYxNDMxOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T00:19:42Z","updated_at":"2019-09-12T00:19:42Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, do you want to merge this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530614319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530614557","html_url":"https://github.com/apache/iceberg/pull/465#issuecomment-530614557","issue_url":"https://api.github.com/repos/apache/iceberg/issues/465","id":530614557,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDYxNDU1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T00:20:47Z","updated_at":"2019-09-12T00:20:47Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nThanks for adding this, @puneetzaroo!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530614557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530616309","html_url":"https://github.com/apache/iceberg/pull/469#issuecomment-530616309","issue_url":"https://api.github.com/repos/apache/iceberg/issues/469","id":530616309,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDYxNjMwOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T00:30:19Z","updated_at":"2019-09-12T00:30:19Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nThanks for fixing this, @bsannicolas!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530616309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530616373","html_url":"https://github.com/apache/iceberg/issues/451#issuecomment-530616373","issue_url":"https://api.github.com/repos/apache/iceberg/issues/451","id":530616373,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDYxNjM3Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T00:30:39Z","updated_at":"2019-09-12T00:30:39Z","author_association":"CONTRIBUTOR","body":"Fixed by #469. Thanks, @bsannicolas!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530616373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530616679","html_url":"https://github.com/apache/iceberg/pull/472#issuecomment-530616679","issue_url":"https://api.github.com/repos/apache/iceberg/issues/472","id":530616679,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDYxNjY3OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T00:32:17Z","updated_at":"2019-09-12T00:32:17Z","author_association":"CONTRIBUTOR","body":"Looks good to me. @aokolnychyi, can you review this as well?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530616679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530830213","html_url":"https://github.com/apache/iceberg/pull/470#issuecomment-530830213","issue_url":"https://api.github.com/repos/apache/iceberg/issues/470","id":530830213,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDgzMDIxMw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T13:37:40Z","updated_at":"2019-09-12T13:39:54Z","author_association":"CONTRIBUTOR","body":"@moulimukherjee I think `doRefresh` in `HiveTableOperations` throws `NoSuchTableException` only if the current metadata is not null. If it is null, we assume the table wasn't created. \r\n\r\nThe relevant part is:\r\n```\r\nif (currentMetadataLocation() != null) {\r\n  throw new NoSuchTableException(String.format(\"No such table: %s.%s\", database, tableName));\r\n}\r\n```\r\n\r\nI believe you should be fine as long as you follow this logic.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530830213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530835381","html_url":"https://github.com/apache/iceberg/pull/472#issuecomment-530835381","issue_url":"https://api.github.com/repos/apache/iceberg/issues/472","id":530835381,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDgzNTM4MQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T13:50:03Z","updated_at":"2019-09-12T13:50:03Z","author_association":"CONTRIBUTOR","body":"LGTM as well, just 2 minor comments.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530835381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530837685","html_url":"https://github.com/apache/iceberg/pull/461#issuecomment-530837685","issue_url":"https://api.github.com/repos/apache/iceberg/issues/461","id":530837685,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDgzNzY4NQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T13:55:33Z","updated_at":"2019-09-12T13:55:33Z","author_association":"CONTRIBUTOR","body":"Thanks, @chenjunjiedada!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530837685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530923827","html_url":"https://github.com/apache/iceberg/pull/470#issuecomment-530923827","issue_url":"https://api.github.com/repos/apache/iceberg/issues/470","id":530923827,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDkyMzgyNw==","user":{"login":"moulimukherjee","id":2379129,"node_id":"MDQ6VXNlcjIzNzkxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2379129?v=4","gravatar_id":"","url":"https://api.github.com/users/moulimukherjee","html_url":"https://github.com/moulimukherjee","followers_url":"https://api.github.com/users/moulimukherjee/followers","following_url":"https://api.github.com/users/moulimukherjee/following{/other_user}","gists_url":"https://api.github.com/users/moulimukherjee/gists{/gist_id}","starred_url":"https://api.github.com/users/moulimukherjee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moulimukherjee/subscriptions","organizations_url":"https://api.github.com/users/moulimukherjee/orgs","repos_url":"https://api.github.com/users/moulimukherjee/repos","events_url":"https://api.github.com/users/moulimukherjee/events{/privacy}","received_events_url":"https://api.github.com/users/moulimukherjee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T17:23:38Z","updated_at":"2019-09-12T17:23:38Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi Ah, let me try that. Thanks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530923827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530931641","html_url":"https://github.com/apache/iceberg/pull/470#issuecomment-530931641","issue_url":"https://api.github.com/repos/apache/iceberg/issues/470","id":530931641,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDkzMTY0MQ==","user":{"login":"moulimukherjee","id":2379129,"node_id":"MDQ6VXNlcjIzNzkxMjk=","avatar_url":"https://avatars.githubusercontent.com/u/2379129?v=4","gravatar_id":"","url":"https://api.github.com/users/moulimukherjee","html_url":"https://github.com/moulimukherjee","followers_url":"https://api.github.com/users/moulimukherjee/followers","following_url":"https://api.github.com/users/moulimukherjee/following{/other_user}","gists_url":"https://api.github.com/users/moulimukherjee/gists{/gist_id}","starred_url":"https://api.github.com/users/moulimukherjee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moulimukherjee/subscriptions","organizations_url":"https://api.github.com/users/moulimukherjee/orgs","repos_url":"https://api.github.com/users/moulimukherjee/repos","events_url":"https://api.github.com/users/moulimukherjee/events{/privacy}","received_events_url":"https://api.github.com/users/moulimukherjee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T17:44:06Z","updated_at":"2019-09-12T17:44:06Z","author_association":"CONTRIBUTOR","body":"It's working, thanks! I had missed it was calling `refreshFromMetadataLocation` with null location.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530931641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530936296","html_url":"https://github.com/apache/iceberg/pull/470#issuecomment-530936296","issue_url":"https://api.github.com/repos/apache/iceberg/issues/470","id":530936296,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDkzNjI5Ng==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T17:56:06Z","updated_at":"2019-09-12T17:56:06Z","author_association":"CONTRIBUTOR","body":"@moulimukherjee glad it helped!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530936296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530938835","html_url":"https://github.com/apache/iceberg/pull/472#issuecomment-530938835","issue_url":"https://api.github.com/repos/apache/iceberg/issues/472","id":530938835,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDkzODgzNQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T18:02:39Z","updated_at":"2019-09-12T18:02:39Z","author_association":"CONTRIBUTOR","body":"Thanks for sharing the fix, @Parth-Brahmbhatt!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/530938835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531310950","html_url":"https://github.com/apache/iceberg/pull/438#issuecomment-531310950","issue_url":"https://api.github.com/repos/apache/iceberg/issues/438","id":531310950,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTMxMDk1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-13T16:48:50Z","updated_at":"2019-09-13T16:48:50Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nThanks for working on this, @shardulm94! I think in the long term, we will want to solve this slightly differently, by assigning new IDs to the schema when fields are missing. That way, we get the same schema and the [write compatibility check](https://github.com/apache/incubator-iceberg/blob/master/api/src/main/java/org/apache/iceberg/types/CheckCompatibility.java#L32) will generate the error messages. But this is certainly an improvement over a null pointer exception, so let's go ahead with this and we can make the larger update later.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531310950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531398283","html_url":"https://github.com/apache/iceberg/pull/473#issuecomment-531398283","issue_url":"https://api.github.com/repos/apache/iceberg/issues/473","id":531398283,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTM5ODI4Mw==","user":{"login":"sujithjay","id":17567499,"node_id":"MDQ6VXNlcjE3NTY3NDk5","avatar_url":"https://avatars.githubusercontent.com/u/17567499?v=4","gravatar_id":"","url":"https://api.github.com/users/sujithjay","html_url":"https://github.com/sujithjay","followers_url":"https://api.github.com/users/sujithjay/followers","following_url":"https://api.github.com/users/sujithjay/following{/other_user}","gists_url":"https://api.github.com/users/sujithjay/gists{/gist_id}","starred_url":"https://api.github.com/users/sujithjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujithjay/subscriptions","organizations_url":"https://api.github.com/users/sujithjay/orgs","repos_url":"https://api.github.com/users/sujithjay/repos","events_url":"https://api.github.com/users/sujithjay/events{/privacy}","received_events_url":"https://api.github.com/users/sujithjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-13T21:33:58Z","updated_at":"2019-09-13T21:33:58Z","author_association":"CONTRIBUTOR","body":"cc: @rdblue, @aokolnychyi \r\nCould you please take a look? Thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531398283/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430573","html_url":"https://github.com/apache/iceberg/pull/432#issuecomment-531430573","issue_url":"https://api.github.com/repos/apache/iceberg/issues/432","id":531430573,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTQzMDU3Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-14T00:43:57Z","updated_at":"2019-09-14T00:43:57Z","author_association":"CONTRIBUTOR","body":"Sorry that I haven't reviewed this yet! I was out for ApacheCon this week and I'm going to be out until Wednesday next week. I'll have a look when I'm back.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430573/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430613","html_url":"https://github.com/apache/iceberg/pull/227#issuecomment-531430613","issue_url":"https://api.github.com/repos/apache/iceberg/issues/227","id":531430613,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTQzMDYxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-14T00:44:25Z","updated_at":"2019-09-14T00:44:25Z","author_association":"CONTRIBUTOR","body":"Sorry that I haven't reviewed this yet! I was out for ApacheCon this week and I'm going to be out until Wednesday next week. I'll have a look when I'm back.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430713","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-531430713","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":531430713,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTQzMDcxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-14T00:45:32Z","updated_at":"2019-09-14T00:45:32Z","author_association":"CONTRIBUTOR","body":"Thanks for the update, @rdsr! I'll have a look next week when I'm back.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430845","html_url":"https://github.com/apache/iceberg/pull/467#issuecomment-531430845","issue_url":"https://api.github.com/repos/apache/iceberg/issues/467","id":531430845,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTQzMDg0NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-14T00:47:13Z","updated_at":"2019-09-14T00:47:13Z","author_association":"CONTRIBUTOR","body":"Thanks @linxingyuan1102! I'm out until Wednesday next week, but I'll take a look at this and #459 when I'm back.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531430845/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531431360","html_url":"https://github.com/apache/iceberg/pull/473#issuecomment-531431360","issue_url":"https://api.github.com/repos/apache/iceberg/issues/473","id":531431360,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTQzMTM2MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-14T00:52:51Z","updated_at":"2019-09-14T00:52:51Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531431360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531431411","html_url":"https://github.com/apache/iceberg/pull/473#issuecomment-531431411","issue_url":"https://api.github.com/repos/apache/iceberg/issues/473","id":531431411,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTQzMTQxMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-14T00:53:14Z","updated_at":"2019-09-14T00:53:14Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @sujithjay!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/531431411/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532070630","html_url":"https://github.com/apache/iceberg/issues/446#issuecomment-532070630","issue_url":"https://api.github.com/repos/apache/iceberg/issues/446","id":532070630,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjA3MDYzMA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T05:53:48Z","updated_at":"2019-09-17T05:53:48Z","author_association":"CONTRIBUTOR","body":"@shardulm94 do u plan to submit a PR for this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532070630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532078652","html_url":"https://github.com/apache/iceberg/issues/446#issuecomment-532078652","issue_url":"https://api.github.com/repos/apache/iceberg/issues/446","id":532078652,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjA3ODY1Mg==","user":{"login":"shardulm94","id":6961317,"node_id":"MDQ6VXNlcjY5NjEzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/6961317?v=4","gravatar_id":"","url":"https://api.github.com/users/shardulm94","html_url":"https://github.com/shardulm94","followers_url":"https://api.github.com/users/shardulm94/followers","following_url":"https://api.github.com/users/shardulm94/following{/other_user}","gists_url":"https://api.github.com/users/shardulm94/gists{/gist_id}","starred_url":"https://api.github.com/users/shardulm94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shardulm94/subscriptions","organizations_url":"https://api.github.com/users/shardulm94/orgs","repos_url":"https://api.github.com/users/shardulm94/repos","events_url":"https://api.github.com/users/shardulm94/events{/privacy}","received_events_url":"https://api.github.com/users/shardulm94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T06:24:11Z","updated_at":"2019-09-17T06:25:45Z","author_association":"CONTRIBUTOR","body":"@rdsr I plan to, although I am not fully sure how to register the custom serializers in Spark.\r\n\r\n@aokolnychyi Did you have to modify Spark to add that line ([here](https://github.com/apache/spark/blob/master/core/src/main/scala/org/apache/spark/serializer/KryoSerializer.scala#L210)) or is there a way to get the Kryo instance used so that we can register the class from inside Iceberg?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532078652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532108738","html_url":"https://github.com/apache/iceberg/issues/446#issuecomment-532108738","issue_url":"https://api.github.com/repos/apache/iceberg/issues/446","id":532108738,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjEwODczOA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T08:01:01Z","updated_at":"2019-09-17T08:01:01Z","author_association":"CONTRIBUTOR","body":"@shardulm94 @rdsr it is possible to set this via the public API: \r\n```\r\nsparkConf.set(\"spark.kryo.registrator\", \"full-class-name-of-custom-registrator\")\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532108738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532109074","html_url":"https://github.com/apache/iceberg/issues/446#issuecomment-532109074","issue_url":"https://api.github.com/repos/apache/iceberg/issues/446","id":532109074,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjEwOTA3NA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T08:01:56Z","updated_at":"2019-09-17T08:01:56Z","author_association":"CONTRIBUTOR","body":"If the above logic works for you, it would be great to add this to our docs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532109074/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532181157","html_url":"https://github.com/apache/iceberg/issues/479#issuecomment-532181157","issue_url":"https://api.github.com/repos/apache/iceberg/issues/479","id":532181157,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjE4MTE1Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T11:32:32Z","updated_at":"2019-09-17T11:32:32Z","author_association":"CONTRIBUTOR","body":"@waterlx is it the same as [this issue](https://github.com/apache/incubator-iceberg/issues/428)?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532181157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532190246","html_url":"https://github.com/apache/iceberg/pull/478#issuecomment-532190246","issue_url":"https://api.github.com/repos/apache/iceberg/issues/478","id":532190246,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjE5MDI0Ng==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T12:03:07Z","updated_at":"2019-09-17T12:03:07Z","author_association":"COLLABORATOR","body":"Thanks @shawnding, looks like the unit test failed, you might want to close and open PR to trigger CI.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532190246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532198957","html_url":"https://github.com/apache/iceberg/issues/480#issuecomment-532198957","issue_url":"https://api.github.com/repos/apache/iceberg/issues/480","id":532198957,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjE5ODk1Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T12:30:06Z","updated_at":"2019-09-17T12:30:06Z","author_association":"CONTRIBUTOR","body":"@bryanck @rdblue what do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532198957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532221369","html_url":"https://github.com/apache/iceberg/issues/480#issuecomment-532221369","issue_url":"https://api.github.com/repos/apache/iceberg/issues/480","id":532221369,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjIyMTM2OQ==","user":{"login":"bryanck","id":5475421,"node_id":"MDQ6VXNlcjU0NzU0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5475421?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanck","html_url":"https://github.com/bryanck","followers_url":"https://api.github.com/users/bryanck/followers","following_url":"https://api.github.com/users/bryanck/following{/other_user}","gists_url":"https://api.github.com/users/bryanck/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanck/subscriptions","organizations_url":"https://api.github.com/users/bryanck/orgs","repos_url":"https://api.github.com/users/bryanck/repos","events_url":"https://api.github.com/users/bryanck/events{/privacy}","received_events_url":"https://api.github.com/users/bryanck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T13:30:12Z","updated_at":"2019-09-17T13:30:12Z","author_association":"CONTRIBUTOR","body":"The downside is that this could potentially result in many small manifests. For example, we have a bucketed table with 10k buckets, which is additionally partitioned by date and hour. So for a week of data we'd have 10k * 24 * 7 = 1.68 million manifests. What we do with RewriteManifests today is combine files into groups of four buckets and ignore date and hour, which results in 10k/4 = 2.5k manifests for a week of data. Performance with file pruning is good even though the manifests have multiple partition specs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532221369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532226622","html_url":"https://github.com/apache/iceberg/issues/481#issuecomment-532226622","issue_url":"https://api.github.com/repos/apache/iceberg/issues/481","id":532226622,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjIyNjYyMg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T13:42:35Z","updated_at":"2019-09-17T13:42:35Z","author_association":"CONTRIBUTOR","body":"@bryanck @rdblue what are your thoughts?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532226622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532229901","html_url":"https://github.com/apache/iceberg/issues/480#issuecomment-532229901","issue_url":"https://api.github.com/repos/apache/iceberg/issues/480","id":532229901,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjIyOTkwMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T13:50:39Z","updated_at":"2019-09-17T13:50:39Z","author_association":"CONTRIBUTOR","body":"@bryanck I mean a partitioning strategy in general by partition spec, which seems to be the same in your case. What will happen in case of [partition schema evolution](http://iceberg.incubator.apache.org/evolution/#partition-evolution)? Manifests are supposed to have files written with the same partition spec:\r\n\r\n> Manifests store data files from any partition, as long as the partition spec is the same for the data files","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532229901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532230748","html_url":"https://github.com/apache/iceberg/issues/480#issuecomment-532230748","issue_url":"https://api.github.com/repos/apache/iceberg/issues/480","id":532230748,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjIzMDc0OA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T13:52:40Z","updated_at":"2019-09-17T13:52:40Z","author_association":"CONTRIBUTOR","body":"I also raised a question similar to what you describe in #481. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532230748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532244627","html_url":"https://github.com/apache/iceberg/issues/480#issuecomment-532244627","issue_url":"https://api.github.com/repos/apache/iceberg/issues/480","id":532244627,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjI0NDYyNw==","user":{"login":"bryanck","id":5475421,"node_id":"MDQ6VXNlcjU0NzU0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5475421?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanck","html_url":"https://github.com/bryanck","followers_url":"https://api.github.com/users/bryanck/followers","following_url":"https://api.github.com/users/bryanck/following{/other_user}","gists_url":"https://api.github.com/users/bryanck/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanck/subscriptions","organizations_url":"https://api.github.com/users/bryanck/orgs","repos_url":"https://api.github.com/users/bryanck/repos","events_url":"https://api.github.com/users/bryanck/events{/privacy}","received_events_url":"https://api.github.com/users/bryanck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T14:24:27Z","updated_at":"2019-09-17T14:24:27Z","author_association":"CONTRIBUTOR","body":"Right, I was thinking partition, not partition spec. In that case, then I agree it makes sense.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532244627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532248616","html_url":"https://github.com/apache/iceberg/issues/481#issuecomment-532248616","issue_url":"https://api.github.com/repos/apache/iceberg/issues/481","id":532248616,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjI0ODYxNg==","user":{"login":"bryanck","id":5475421,"node_id":"MDQ6VXNlcjU0NzU0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5475421?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanck","html_url":"https://github.com/bryanck","followers_url":"https://api.github.com/users/bryanck/followers","following_url":"https://api.github.com/users/bryanck/following{/other_user}","gists_url":"https://api.github.com/users/bryanck/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanck/subscriptions","organizations_url":"https://api.github.com/users/bryanck/orgs","repos_url":"https://api.github.com/users/bryanck/repos","events_url":"https://api.github.com/users/bryanck/events{/privacy}","received_events_url":"https://api.github.com/users/bryanck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T14:33:30Z","updated_at":"2019-09-17T14:33:30Z","author_association":"CONTRIBUTOR","body":"Would clustering by a range work instead of sorting? E.g. cluster by the first partition column and ranges of the 2nd? You could make one pass through the files to determine the ranges if they aren't evenly distributed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532248616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532306836","html_url":"https://github.com/apache/iceberg/issues/245#issuecomment-532306836","issue_url":"https://api.github.com/repos/apache/iceberg/issues/245","id":532306836,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjMwNjgzNg==","user":{"login":"Voltir","id":889215,"node_id":"MDQ6VXNlcjg4OTIxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/889215?v=4","gravatar_id":"","url":"https://api.github.com/users/Voltir","html_url":"https://github.com/Voltir","followers_url":"https://api.github.com/users/Voltir/followers","following_url":"https://api.github.com/users/Voltir/following{/other_user}","gists_url":"https://api.github.com/users/Voltir/gists{/gist_id}","starred_url":"https://api.github.com/users/Voltir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Voltir/subscriptions","organizations_url":"https://api.github.com/users/Voltir/orgs","repos_url":"https://api.github.com/users/Voltir/repos","events_url":"https://api.github.com/users/Voltir/events{/privacy}","received_events_url":"https://api.github.com/users/Voltir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T16:53:48Z","updated_at":"2019-09-17T16:53:48Z","author_association":"NONE","body":"We ran into this issue as well, should the workaround land on master?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532306836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532465475","html_url":"https://github.com/apache/iceberg/issues/464#issuecomment-532465475","issue_url":"https://api.github.com/repos/apache/iceberg/issues/464","id":532465475,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjQ2NTQ3NQ==","user":{"login":"ZhijieWang","id":1463296,"node_id":"MDQ6VXNlcjE0NjMyOTY=","avatar_url":"https://avatars.githubusercontent.com/u/1463296?v=4","gravatar_id":"","url":"https://api.github.com/users/ZhijieWang","html_url":"https://github.com/ZhijieWang","followers_url":"https://api.github.com/users/ZhijieWang/followers","following_url":"https://api.github.com/users/ZhijieWang/following{/other_user}","gists_url":"https://api.github.com/users/ZhijieWang/gists{/gist_id}","starred_url":"https://api.github.com/users/ZhijieWang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZhijieWang/subscriptions","organizations_url":"https://api.github.com/users/ZhijieWang/orgs","repos_url":"https://api.github.com/users/ZhijieWang/repos","events_url":"https://api.github.com/users/ZhijieWang/events{/privacy}","received_events_url":"https://api.github.com/users/ZhijieWang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T00:26:14Z","updated_at":"2019-09-18T00:26:14Z","author_association":"NONE","body":"Wrote a basic test case for this on my local machine. Pulled the latest master branch. It failed immediately after the first time adding the column then tried to write. Not sure how yours get past the first column change.\r\n\r\n```\r\npackage org.apache.iceberg.spark.source;\r\n\r\npublic  class Record{\r\n    private Integer id;\r\n    Record(Integer id){\r\n        this.id = id;\r\n    }\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Integer id) {\r\n        this.id = id;\r\n    }\r\n}\r\n\r\n@Test\r\n  public void testAddOptionalColumnToStrucField() throws IOException {\r\n\r\n    String table_name = \"iceberg_partition_test_120\";\r\n    Schema schema = new Schema(\r\n            Types.NestedField.optional(0, \"id\", Types.IntegerType.get())\r\n    );\r\n    TableIdentifier tableIdentifier = TableIdentifier.of(\"default\", table_name);\r\n    PartitionSpec spec = PartitionSpec.builderFor(schema).identity(\"id\").build();\r\n    Table table = catalog.createTable(tableIdentifier, schema, spec);\r\n    Dataset<Row> df =  spark.createDataFrame( Lists.newArrayList(new Record(1)), Record.class);\r\n    df.write().format(\"iceberg\").mode(\"append\").save(tableIdentifier.toString());\r\n    spark.read().format(\"iceberg\").load(tableIdentifier.toString()).show();\r\n\r\n    table.updateSchema().addColumn(\"phone number\", Types.LongType.get()).commit();\r\n\r\n    df =  spark.createDataFrame( Lists.newArrayList(new Record(1)), Record.class);\r\n    df.write().format(\"iceberg\").mode(\"append\").save(tableIdentifier.toString());\r\n    spark.read().format(\"iceberg\").load(tableIdentifier.toString()).show();\r\n\r\n    table.updateSchema().addColumn(\"name\", Types.StringType.get()).commit();\r\n    df =  spark.createDataFrame( Lists.newArrayList(new Record(1)), Record.class);\r\n    df.write().format(\"iceberg\").mode(\"append\").save(tableIdentifier.toString());\r\n\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532465475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532492713","html_url":"https://github.com/apache/iceberg/pull/474#issuecomment-532492713","issue_url":"https://api.github.com/repos/apache/iceberg/issues/474","id":532492713,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjQ5MjcxMw==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T02:36:21Z","updated_at":"2019-09-18T02:36:21Z","author_association":"CONTRIBUTOR","body":"LGTM, +1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532492713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532543324","html_url":"https://github.com/apache/iceberg/issues/479#issuecomment-532543324","issue_url":"https://api.github.com/repos/apache/iceberg/issues/479","id":532543324,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjU0MzMyNA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T06:40:40Z","updated_at":"2019-09-18T06:40:53Z","author_association":"CONTRIBUTOR","body":"> @waterlx is it the same as [this issue](https://github.com/apache/incubator-iceberg/issues/428)?\r\n\r\n@aokolnychyi , yes, they are the same. Thanks for checking that. I will close this issue as a duplication of #428 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532543324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532560192","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-532560192","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":532560192,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjU2MDE5Mg==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T07:36:00Z","updated_at":"2019-09-18T07:36:00Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi @rdblue does it make any sense to you?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532560192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532773879","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-532773879","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":532773879,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjc3Mzg3OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T16:58:05Z","updated_at":"2019-09-18T16:58:05Z","author_association":"CONTRIBUTOR","body":"@waterlx, `withPartitionPath` is only public to support importing existing Hive table files. Iceberg considers building a partition path string a one-way conversion. If you want to parse partition paths, you should use your own parsing logic and pass a `StructLike` to the builder.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532773879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532833982","html_url":"https://github.com/apache/iceberg/pull/474#issuecomment-532833982","issue_url":"https://api.github.com/repos/apache/iceberg/issues/474","id":532833982,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjgzMzk4Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T19:35:56Z","updated_at":"2019-09-18T19:35:56Z","author_association":"CONTRIBUTOR","body":"I don't think this is a typo. The metadata is being refreshed from the location shown in the log message and it seems strange to me to use \"to\" instead. I'd prefer to leave this as is, or maybe update this to \"from location\" to make it more clear.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532833982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532885445","html_url":"https://github.com/apache/iceberg/pull/485#issuecomment-532885445","issue_url":"https://api.github.com/repos/apache/iceberg/issues/485","id":532885445,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjg4NTQ0NQ==","user":{"login":"sujithjay","id":17567499,"node_id":"MDQ6VXNlcjE3NTY3NDk5","avatar_url":"https://avatars.githubusercontent.com/u/17567499?v=4","gravatar_id":"","url":"https://api.github.com/users/sujithjay","html_url":"https://github.com/sujithjay","followers_url":"https://api.github.com/users/sujithjay/followers","following_url":"https://api.github.com/users/sujithjay/following{/other_user}","gists_url":"https://api.github.com/users/sujithjay/gists{/gist_id}","starred_url":"https://api.github.com/users/sujithjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujithjay/subscriptions","organizations_url":"https://api.github.com/users/sujithjay/orgs","repos_url":"https://api.github.com/users/sujithjay/repos","events_url":"https://api.github.com/users/sujithjay/events{/privacy}","received_events_url":"https://api.github.com/users/sujithjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-18T22:05:29Z","updated_at":"2019-09-19T20:48:23Z","author_association":"CONTRIBUTOR","body":"Tests are failing on CI, but they seem unrelated to the changes. FWIW, the tests pass on my machine. \r\n```\r\norg.apache.iceberg.spark.source.TestIcebergSourceHiveTables > testHiveFilesUnpartitionedTable FAILED\r\n    java.lang.RuntimeException at TestIcebergSourceHiveTables.java:258\r\n        Caused by: org.apache.thrift.transport.TTransportException at TestIcebergSourceHiveTables.java:258\r\n            Caused by: java.net.SocketException at TestIcebergSourceHiveTables.java:258\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532885445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532943540","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-532943540","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":532943540,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjk0MzU0MA==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T02:54:06Z","updated_at":"2019-09-19T02:55:33Z","author_association":"CONTRIBUTOR","body":"I'm roughly dividing this issue into 3 ongoing PRs:\r\n\r\n1. Add Bucket Spec support in Iceberg API and metadata.\r\n2. Support bucketing write in Iceberg Spark data source.\r\n3. Support bucketing read in Iceberg Spark data source.\r\n\r\nCurrently I'm working on the first task.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/532943540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533062233","html_url":"https://github.com/apache/iceberg/issues/193#issuecomment-533062233","issue_url":"https://api.github.com/repos/apache/iceberg/issues/193","id":533062233,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzA2MjIzMw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T10:06:14Z","updated_at":"2019-09-19T10:06:14Z","author_association":"COLLABORATOR","body":"@aokolnychyi @rdblue IIUC, we don't need to do extra work to support this as long as the predicate pushdown works well. The read property `parquet.filter.columnindex.enabled` defaults set to true and column indexes are built by default as well.  Please correct me if I 'm wrong.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533062233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533125087","html_url":"https://github.com/apache/iceberg/issues/428#issuecomment-533125087","issue_url":"https://api.github.com/repos/apache/iceberg/issues/428","id":533125087,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzEyNTA4Nw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T13:15:09Z","updated_at":"2019-09-19T13:15:09Z","author_association":"COLLABORATOR","body":"@aokolnychyi Do you have the plan to implement this? Or any further consideration?\r\n\r\nBTW, do we want to support TimeStamp type as well?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533125087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533126117","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-533126117","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":533126117,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzEyNjExNw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T13:17:43Z","updated_at":"2019-09-19T13:17:43Z","author_association":"COLLABORATOR","body":"@waterlx, Do you why we get an Integer type from the TimeStamp type partition? Also why you using a date value for timestamp type?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533126117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533239111","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-533239111","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":533239111,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzIzOTExMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T17:51:17Z","updated_at":"2019-09-19T17:51:17Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, the format here is what Iceberg produces for an hour partition value. Iceberg internally stores the values as the number of hours from 1970-01-01 hour 0, but that's not user-friendly. So it gets converted to YYYY-MM-DD-HH in the partition path.\r\n\r\nThe problem is that Iceberg does not _parse_ these values because creating a file path is a one-way conversion. To delete these files, you can pass the file path directly to `DeleteFiles`, or you can get a `DataFile` instance from `FindFiles` and pass that.\r\n\r\nYou could also come up with a way to parse these hour values, but we don't recommend doing this in general because of string escaping issues. That's why Iceberg considers the conversion one-way.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533239111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533274384","html_url":"https://github.com/apache/iceberg/pull/348#issuecomment-533274384","issue_url":"https://api.github.com/repos/apache/iceberg/issues/348","id":533274384,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI3NDM4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T19:28:50Z","updated_at":"2019-09-19T19:28:50Z","author_association":"CONTRIBUTOR","body":"We will need to make sure this change is in sync with the IDs assigned in the Java code. I think that's where we've been keeping the \"next ID to assign\".","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533274384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533280822","html_url":"https://github.com/apache/iceberg/pull/486#issuecomment-533280822","issue_url":"https://api.github.com/repos/apache/iceberg/issues/486","id":533280822,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI4MDgyMg==","user":{"login":"sujithjay","id":17567499,"node_id":"MDQ6VXNlcjE3NTY3NDk5","avatar_url":"https://avatars.githubusercontent.com/u/17567499?v=4","gravatar_id":"","url":"https://api.github.com/users/sujithjay","html_url":"https://github.com/sujithjay","followers_url":"https://api.github.com/users/sujithjay/followers","following_url":"https://api.github.com/users/sujithjay/following{/other_user}","gists_url":"https://api.github.com/users/sujithjay/gists{/gist_id}","starred_url":"https://api.github.com/users/sujithjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujithjay/subscriptions","organizations_url":"https://api.github.com/users/sujithjay/orgs","repos_url":"https://api.github.com/users/sujithjay/repos","events_url":"https://api.github.com/users/sujithjay/events{/privacy}","received_events_url":"https://api.github.com/users/sujithjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T19:46:09Z","updated_at":"2019-09-19T19:46:09Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, @rdblue \r\nCould you please take a look? Thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533280822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533282006","html_url":"https://github.com/apache/iceberg/pull/486#issuecomment-533282006","issue_url":"https://api.github.com/repos/apache/iceberg/issues/486","id":533282006,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI4MjAwNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T19:48:50Z","updated_at":"2019-09-19T19:48:50Z","author_association":"CONTRIBUTOR","body":"Mostly looks good, but I don't think that DeleteFiles needs to change. Thanks for working on this @sujithjay!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533282006/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533282447","html_url":"https://github.com/apache/iceberg/pull/485#issuecomment-533282447","issue_url":"https://api.github.com/repos/apache/iceberg/issues/485","id":533282447,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI4MjQ0Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T19:49:45Z","updated_at":"2019-09-19T19:49:45Z","author_association":"CONTRIBUTOR","body":"I restarted the tests. Right now that one is flaky in Travis CI and we're trying to track down why.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533282447/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533285229","html_url":"https://github.com/apache/iceberg/issues/193#issuecomment-533285229","issue_url":"https://api.github.com/repos/apache/iceberg/issues/193","id":533285229,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI4NTIyOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T19:55:56Z","updated_at":"2019-09-19T19:55:56Z","author_association":"CONTRIBUTOR","body":"We would need to implement something to take advantage of the column indexes in some engines. Any client using an Iceberg table uses its own readers for Parquet data. Spark readers are in the iceberg-spark module and use a different read path to construct records than the one built into Parquet, so we would need to add support for page indexes there.\r\n\r\nIn the long term, we want this optimization to be part of the vectorized reads because we think that reading first into Arrow (vectorized) and then converting to an in-memory row format is going to be faster than deserializing directly to the row format. That means we should invest in adding page skipping to the Parquet to Arrow conversion.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533285229/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533288481","html_url":"https://github.com/apache/iceberg/issues/481#issuecomment-533288481","issue_url":"https://api.github.com/repos/apache/iceberg/issues/481","id":533288481,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI4ODQ4MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T20:05:23Z","updated_at":"2019-09-19T20:05:23Z","author_association":"CONTRIBUTOR","body":"How does sorting help? I don't think there is anything that understands that a manifest may be sorted, so the cost of planning would be the same for sorted and unsorted.\r\n\r\nI agree with Bryan that it probably makes the most sense to come up with partition ranges that give you the right size of manifest files for the table.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533288481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533288752","html_url":"https://github.com/apache/iceberg/issues/480#issuecomment-533288752","issue_url":"https://api.github.com/repos/apache/iceberg/issues/480","id":533288752,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzI4ODc1Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T20:06:16Z","updated_at":"2019-09-19T20:06:16Z","author_association":"CONTRIBUTOR","body":"I agree with this. A manifest can only be written for one partition spec, so this is definitely a bug!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533288752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533300877","html_url":"https://github.com/apache/iceberg/pull/486#issuecomment-533300877","issue_url":"https://api.github.com/repos/apache/iceberg/issues/486","id":533300877,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzMwMDg3Nw==","user":{"login":"sujithjay","id":17567499,"node_id":"MDQ6VXNlcjE3NTY3NDk5","avatar_url":"https://avatars.githubusercontent.com/u/17567499?v=4","gravatar_id":"","url":"https://api.github.com/users/sujithjay","html_url":"https://github.com/sujithjay","followers_url":"https://api.github.com/users/sujithjay/followers","following_url":"https://api.github.com/users/sujithjay/following{/other_user}","gists_url":"https://api.github.com/users/sujithjay/gists{/gist_id}","starred_url":"https://api.github.com/users/sujithjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujithjay/subscriptions","organizations_url":"https://api.github.com/users/sujithjay/orgs","repos_url":"https://api.github.com/users/sujithjay/repos","events_url":"https://api.github.com/users/sujithjay/events{/privacy}","received_events_url":"https://api.github.com/users/sujithjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T20:41:25Z","updated_at":"2019-09-19T20:41:25Z","author_association":"CONTRIBUTOR","body":"I have made the changes, @rdblue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533300877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533323511","html_url":"https://github.com/apache/iceberg/pull/458#issuecomment-533323511","issue_url":"https://api.github.com/repos/apache/iceberg/issues/458","id":533323511,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzMyMzUxMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T21:54:36Z","updated_at":"2019-09-19T21:54:36Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @xabriel!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533323511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533341435","html_url":"https://github.com/apache/iceberg/pull/440#issuecomment-533341435","issue_url":"https://api.github.com/repos/apache/iceberg/issues/440","id":533341435,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM0MTQzNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T23:06:54Z","updated_at":"2019-09-19T23:06:54Z","author_association":"CONTRIBUTOR","body":"I'm going to close this since it has been a couple weeks without an update. Feel free to reopen if you'd like to continue it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533341435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533350397","html_url":"https://github.com/apache/iceberg/pull/486#issuecomment-533350397","issue_url":"https://api.github.com/repos/apache/iceberg/issues/486","id":533350397,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM1MDM5Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-19T23:53:31Z","updated_at":"2019-09-19T23:53:31Z","author_association":"CONTRIBUTOR","body":"Merged! Thanks for fixing this, @sujithjay!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533350397/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533354553","html_url":"https://github.com/apache/iceberg/issues/436#issuecomment-533354553","issue_url":"https://api.github.com/repos/apache/iceberg/issues/436","id":533354553,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM1NDU1Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T00:15:24Z","updated_at":"2019-09-20T00:15:24Z","author_association":"CONTRIBUTOR","body":"Closing this as well. Feel free to reopen if it turns out to be an issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533354553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533356948","html_url":"https://github.com/apache/iceberg/pull/485#issuecomment-533356948","issue_url":"https://api.github.com/repos/apache/iceberg/issues/485","id":533356948,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM1Njk0OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T00:29:09Z","updated_at":"2019-09-20T00:29:09Z","author_association":"CONTRIBUTOR","body":"Thanks @sujithjay! This looks great. I think we might have more copies of this method elsewhere if you'd like to fix those as well. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533356948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533360026","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-533360026","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":533360026,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM2MDAyNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T00:47:06Z","updated_at":"2019-09-20T00:48:54Z","author_association":"CONTRIBUTOR","body":"Thanks @jerryshao! I had a look at the doc and made some comments.\r\n\r\nThe main thing is that Iceberg already supports bucketing and has solved many of the challenges you identified, like schema evolution. There are two remaining problems:\r\n1. Writing requires users to [cluster data into buckets using a UDF](https://github.com/apache/incubator-iceberg/issues/274).\r\n2. Bucketed joins can't take advantage of Iceberg bucket values.\r\n\r\nFor problem 1, we need to allow Iceberg to control the `requiredChildDistribution` and `requiredChildOrdering` returned by [`WriteToDataSourceV2Exec`](https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/v2/WriteToDataSourceV2Exec.scala#L318). Here's [a gist that shows what we use to automatically insert distribution/ordering requirements](https://gist.github.com/rdblue/468cff86ffcdd07dcea55520ab9c267c) that allow automatic bucketing writes. That also depends on #317.\r\n\r\nWe also need a [FunctionCatalog](https://github.com/apache/spark/pull/24559) that allows us to return Iceberg transforms as UDFs that Spark can use.\r\n\r\nFor problem 2, we are planning to add support for Spark to be able to use bucket values to speed up joins. We aren't quite sure how to do this yet, but we know that Spark will need to recognize that a table is bucketed (using the Table's partitioning), get the bucket function from the table's catalog (using FunctionCatalog) and use that function to prepare data for the other side of the join. If the other side of the join uses the same partition function, then we can avoid a shuffle for that side of the join as well.\r\n\r\nHopefully this short write-up and the comments I left on the doc give you an idea of the current status of bucketed joins. Thanks for working on this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533360026/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533361224","html_url":"https://github.com/apache/iceberg/issues/482#issuecomment-533361224","issue_url":"https://api.github.com/repos/apache/iceberg/issues/482","id":533361224,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM2MTIyNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T00:54:47Z","updated_at":"2019-09-20T00:54:47Z","author_association":"CONTRIBUTOR","body":"Looks like something that should be supported. Would you like to open a PR to fix it?\r\n\r\nI think this just needs to be added here: https://github.com/apache/incubator-iceberg/blob/master/data/src/main/java/org/apache/iceberg/data/parquet/GenericParquetReaders.java#L216-L231","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533361224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533361361","html_url":"https://github.com/apache/iceberg/issues/476#issuecomment-533361361","issue_url":"https://api.github.com/repos/apache/iceberg/issues/476","id":533361361,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM2MTM2MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T00:55:40Z","updated_at":"2019-09-20T00:55:40Z","author_association":"CONTRIBUTOR","body":"We do plan to publish maven-compatible artifacts. We just haven't done the first Apache release yet.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533361361/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533386857","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-533386857","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":533386857,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzM4Njg1Nw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T03:11:12Z","updated_at":"2019-09-20T03:11:12Z","author_association":"COLLABORATOR","body":"@rdblue, Thanks for the elaboration.\r\n\r\nSo if we want to use an `hour` partition filed of `YYYY-MM-DD-HH` format in PartitionSpec.  Either we need to transform the string to a timestamp value at first, for example, `event_time_hour=1568892724618` to `withPartitionPath`.  Or we can add a function which produces a `PartitionData`  from the string. Am I correct?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533386857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533435294","html_url":"https://github.com/apache/iceberg/pull/485#issuecomment-533435294","issue_url":"https://api.github.com/repos/apache/iceberg/issues/485","id":533435294,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQzNTI5NA==","user":{"login":"sujithjay","id":17567499,"node_id":"MDQ6VXNlcjE3NTY3NDk5","avatar_url":"https://avatars.githubusercontent.com/u/17567499?v=4","gravatar_id":"","url":"https://api.github.com/users/sujithjay","html_url":"https://github.com/sujithjay","followers_url":"https://api.github.com/users/sujithjay/followers","following_url":"https://api.github.com/users/sujithjay/following{/other_user}","gists_url":"https://api.github.com/users/sujithjay/gists{/gist_id}","starred_url":"https://api.github.com/users/sujithjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujithjay/subscriptions","organizations_url":"https://api.github.com/users/sujithjay/orgs","repos_url":"https://api.github.com/users/sujithjay/repos","events_url":"https://api.github.com/users/sujithjay/events{/privacy}","received_events_url":"https://api.github.com/users/sujithjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T07:03:14Z","updated_at":"2019-09-20T07:03:14Z","author_association":"CONTRIBUTOR","body":"Sure, I will try fixing that as well. Thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533435294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533471262","html_url":"https://github.com/apache/iceberg/pull/474#issuecomment-533471262","issue_url":"https://api.github.com/repos/apache/iceberg/issues/474","id":533471262,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzQ3MTI2Mg==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T09:00:11Z","updated_at":"2019-09-20T09:42:42Z","author_association":"CONTRIBUTOR","body":"Hi @rdblue , I am a little confused. Please help to clarify, thanks!\r\nRegarding the functions of https://github.com/apache/incubator-iceberg/blob/a509e43cf93d223a3925cbdcc5a0df4ac997b889/core/src/main/java/org/apache/iceberg/BaseMetastoreTableOperations.java#L134\r\n1. If newLocation is the source location where the metadata is being refreshed from, could you please share your idea about what `currentMetadataLocation` stands for?\r\n2. Does the message of \"Refreshing table metadata from new version: newLocation\" indicate that meta data is being refreshed from `newLocation`, not that the mata data is being refreshed from `currentMetadataLocation` to `newLocation` ? Before this message is issued, shown in `SHOW CREATE TABLE` of Hive, `metadata_location` in TBLPROPERTIES is `newLocation`, while `previous_metadata_location` is `currentMetadataLocation`. So does that message mean that the meta data is being refreshing from `newLocation` to somewhere else","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533471262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533624426","html_url":"https://github.com/apache/iceberg/pull/474#issuecomment-533624426","issue_url":"https://api.github.com/repos/apache/iceberg/issues/474","id":533624426,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzYyNDQyNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T16:32:38Z","updated_at":"2019-09-20T16:32:38Z","author_association":"CONTRIBUTOR","body":"> If newLocation is the source location where the metadata is being refreshed from, could you please share your idea about what currentMetadataLocation stands for?\r\n\r\n`TableOperations` keeps track of the location that metadata was last read from. When refreshing, the location from the metastore is passed to `refreshFromMetadataLocation`, which may be the same as the currently loaded one that was used, or it may be new and should replace the currently loaded one.\r\n\r\n> Does the message of \"Refreshing table metadata from new version: newLocation\" indicate that meta data is being refreshed from newLocation, not that the mata data is being refreshed from currentMetadataLocation to newLocation ?\r\n\r\nIt indicates that `newLocation` is not the currently loaded location, so the metadata will be refreshed from the new location.\r\n\r\nI think the confusion is because there are two \"current\" states. The `TableOperations` instance has a current state that is only updated when `refresh` is called. And the table itself has a current state in the metastore. The `refreshFromMetadataLocation` method is updating the current state of `TableOperations` from the current state fetched from the metastore, the `newLocation`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533624426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533627418","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-533627418","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":533627418,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzYyNzQxOA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T16:42:03Z","updated_at":"2019-09-20T16:42:03Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, you should not parse strings into partition data. Parsing partition strings is an anti-pattern because there are many cases that will cause you to get corrupted data, like not handling escaping correctly.\r\n\r\nInstead of parsing partition strings, you can delete by path or you can get a `DataFile` instance from the table using `FindFiles`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533627418/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533691669","html_url":"https://github.com/apache/iceberg/issues/481#issuecomment-533691669","issue_url":"https://api.github.com/repos/apache/iceberg/issues/481","id":533691669,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzY5MTY2OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T20:04:48Z","updated_at":"2019-09-20T20:07:32Z","author_association":"CONTRIBUTOR","body":"Let’s consider a specific example: we have a table partitioned by col1 and further bucketed into 20 buckets by col2. On one hand, clustering by both columns is too granular and yields small manifests. Alternatively, clustering only by col1 would mean producing let’s say 5 manifests of the needed size for each top level partition. The problem is that each of those 5 manifests can contain files for the same leaf partition. As a result, we will be scanning all the metadata for the top level partition even though we query for a specific leaf partition. \r\n\r\nTo address those issues, I had multiple approaches in mind. \r\n\r\nOption 1\r\n\r\n- Estimate the size of one manifest entry by iterating through the metadata for manifests we are rewriting.\r\n- Read manifests and cluster the files.\r\n- Compute the number of files per group and estimate the size of metadata. \r\n- Use bin packing on the info from the step above assuming the clustering key is sortable. That way, we will group metadata for leaf partitions together. \r\n- Finally, group files based on bins. \r\n\r\nOption 2\r\n\r\n- Introduce a sort key in addition to the clustering key. In the example above, we can say cluster data by col1 and sort by col2.\r\n- Read manifests and cluster files. \r\n- Sort files within groups. \r\n- Write manifests respecting the target manifest size. In our case, we will produce 5 manifests but only one of them will contain data for the same leaf partition (unless we were unlucky and we closed the manifest in the middle, which we can prevent). \r\n\r\nTo sum up, sort key would only help if we also respect the target manifest size.\r\n\r\nI considered these approaches from a distributed job perspective and it seemed we would need to scan the metadata multiple times using the first option. We can cache, of course. Having entries for the same partition close to each other might be cpu-friendly. \r\n\r\n@bryanck @rdblue is my first option similar to what you suggest?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533691669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533693285","html_url":"https://github.com/apache/iceberg/pull/468#issuecomment-533693285","issue_url":"https://api.github.com/repos/apache/iceberg/issues/468","id":533693285,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzY5MzI4NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T20:10:52Z","updated_at":"2019-09-20T20:10:52Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @kings129! This is really helpful since we would need to fix this for a source release. I merged this, but without the version.txt file because we don't want to set the version statically in git.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533693285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533700172","html_url":"https://github.com/apache/iceberg/issues/457#issuecomment-533700172","issue_url":"https://api.github.com/repos/apache/iceberg/issues/457","id":533700172,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzcwMDE3Mg==","user":{"login":"sujithjay","id":17567499,"node_id":"MDQ6VXNlcjE3NTY3NDk5","avatar_url":"https://avatars.githubusercontent.com/u/17567499?v=4","gravatar_id":"","url":"https://api.github.com/users/sujithjay","html_url":"https://github.com/sujithjay","followers_url":"https://api.github.com/users/sujithjay/followers","following_url":"https://api.github.com/users/sujithjay/following{/other_user}","gists_url":"https://api.github.com/users/sujithjay/gists{/gist_id}","starred_url":"https://api.github.com/users/sujithjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sujithjay/subscriptions","organizations_url":"https://api.github.com/users/sujithjay/orgs","repos_url":"https://api.github.com/users/sujithjay/repos","events_url":"https://api.github.com/users/sujithjay/events{/privacy}","received_events_url":"https://api.github.com/users/sujithjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T20:35:35Z","updated_at":"2019-09-20T20:37:05Z","author_association":"CONTRIBUTOR","body":"You should define your iceberg schema as:\r\n```scala\r\nval schema = new Schema(\r\n      NestedField.optional(1, \"level\", StringType.get())\r\n)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533700172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533728653","html_url":"https://github.com/apache/iceberg/issues/400#issuecomment-533728653","issue_url":"https://api.github.com/repos/apache/iceberg/issues/400","id":533728653,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzcyODY1Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T22:18:01Z","updated_at":"2019-09-20T22:18:01Z","author_association":"CONTRIBUTOR","body":"Merged the fix. Thanks @kings129!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533728653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533731273","html_url":"https://github.com/apache/iceberg/issues/482#issuecomment-533731273","issue_url":"https://api.github.com/repos/apache/iceberg/issues/482","id":533731273,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzczMTI3Mw==","user":{"login":"ashleycoxley","id":7006859,"node_id":"MDQ6VXNlcjcwMDY4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7006859?v=4","gravatar_id":"","url":"https://api.github.com/users/ashleycoxley","html_url":"https://github.com/ashleycoxley","followers_url":"https://api.github.com/users/ashleycoxley/followers","following_url":"https://api.github.com/users/ashleycoxley/following{/other_user}","gists_url":"https://api.github.com/users/ashleycoxley/gists{/gist_id}","starred_url":"https://api.github.com/users/ashleycoxley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashleycoxley/subscriptions","organizations_url":"https://api.github.com/users/ashleycoxley/orgs","repos_url":"https://api.github.com/users/ashleycoxley/repos","events_url":"https://api.github.com/users/ashleycoxley/events{/privacy}","received_events_url":"https://api.github.com/users/ashleycoxley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T22:29:59Z","updated_at":"2019-09-20T22:29:59Z","author_association":"CONTRIBUTOR","body":"Done! Thanks :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533731273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533735265","html_url":"https://github.com/apache/iceberg/pull/487#issuecomment-533735265","issue_url":"https://api.github.com/repos/apache/iceberg/issues/487","id":533735265,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzczNTI2NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-20T22:51:00Z","updated_at":"2019-09-20T22:51:00Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @ashleycoxley!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533735265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533749850","html_url":"https://github.com/apache/iceberg/pull/487#issuecomment-533749850","issue_url":"https://api.github.com/repos/apache/iceberg/issues/487","id":533749850,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzc0OTg1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T00:15:02Z","updated_at":"2019-09-21T00:15:02Z","author_association":"CONTRIBUTOR","body":"Looks like there are checkstyle violations:\r\n\r\n```\r\n[ant:checkstyle] [ERROR] /home/travis/build/apache/incubator-iceberg/data/src/main/java/org/apache/iceberg/data/parquet/GenericParquetReaders.java:26: Extra separation in import group before 'java.time.Instant' [ImportOrder]\r\n[ant:checkstyle] [ERROR] /home/travis/build/apache/incubator-iceberg/data/src/main/java/org/apache/iceberg/data/parquet/GenericParquetReaders.java:379:44: '{' at column 44 should have line break after. [LeftCurly]\r\n[ant:checkstyle] [ERROR] /home/travis/build/apache/incubator-iceberg/data/src/main/java/org/apache/iceberg/data/parquet/GenericParquetReaders.java:379:103: '}' at column 103 should be alone on a line. [RightCurly]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533749850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533770093","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-533770093","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":533770093,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzc3MDA5Mw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T05:37:31Z","updated_at":"2019-09-21T05:37:31Z","author_association":"COLLABORATOR","body":"Understood now. Thanks again.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533770093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533831456","html_url":"https://github.com/apache/iceberg/issues/483#issuecomment-533831456","issue_url":"https://api.github.com/repos/apache/iceberg/issues/483","id":533831456,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzgzMTQ1Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T21:27:28Z","updated_at":"2019-09-21T21:27:28Z","author_association":"CONTRIBUTOR","body":"Great, I'm going to close this then. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533831456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533833468","html_url":"https://github.com/apache/iceberg/pull/297#issuecomment-533833468","issue_url":"https://api.github.com/repos/apache/iceberg/issues/297","id":533833468,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzgzMzQ2OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T22:05:22Z","updated_at":"2019-09-21T22:05:22Z","author_association":"CONTRIBUTOR","body":"Looks like the test failure is a style issue with imports.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533833468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533836622","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-533836622","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":533836622,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzgzNjYyMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T23:14:37Z","updated_at":"2019-09-21T23:14:37Z","author_association":"CONTRIBUTOR","body":"@rdsr, thanks for your work on this!\r\n\r\nI think there are some subtle problems with this because it changes assumptions about null values. For example, if an array-based map is not projected, the element struct will be an empty struct, not null. This assumes it will be null.\r\n\r\nThe main problem is that I'm having trouble reasoning about the changes in this PR to decide whether they are correct. That makes me think that combining projection with the read schema building is risky because it makes the whole thing hard to maintain.\r\n\r\nWhat about instead of adding the name mapping and projection into the visitor building a read schema you instead added the mapping to PruneColumns? I think that would make sense: if a field doesn't have an ID, it is pruned; if it is mapped, then it may be pruned depending on the projected ID set. Then we wouldn't need to change the code for building a projection at all and both classes would be simpler. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533836622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533837723","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-533837723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":533837723,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzgzNzcyMw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-21T23:43:54Z","updated_at":"2019-09-21T23:45:49Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @rdblue .  To be clear, I think you are referring to do something similar to my first approach where I was passing a map to `PruneColumns` to build an intermediate file avro schema, to be passed to `BuildAvroProjection`. So specifically,  this\r\n\r\n```\r\nSet<Integer> projectedIds = TypeUtil.getProjectedIds(expectedSchema);\r\n// pass name mapping here build an intermediate avro file schema\r\nSchema prunedSchema = AvroSchemaUtil.pruneColumns(newFileSchema, projectedIds, nameMapping);\r\nthis.readSchema = AvroSchemaUtil.buildAvroProjection(prunedSchema, expectedSchema, renames);\r\n```\r\n\r\nBut, this will require building an intermediate file **avro** schema. Is that fine?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533837723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533875904","html_url":"https://github.com/apache/iceberg/pull/297#issuecomment-533875904","issue_url":"https://api.github.com/repos/apache/iceberg/issues/297","id":533875904,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzg3NTkwNA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-22T12:03:30Z","updated_at":"2019-09-22T12:03:30Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue my IDE messed up the import order. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533875904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533878243","html_url":"https://github.com/apache/iceberg/pull/297#issuecomment-533878243","issue_url":"https://api.github.com/repos/apache/iceberg/issues/297","id":533878243,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzg3ODI0Mw==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-22T12:35:54Z","updated_at":"2019-09-22T12:35:54Z","author_association":"CONTRIBUTOR","body":"This is actually blocked until Apache Parquet 1.11 will be released. The converter from an Avro to Parquet schema is broken because we've removed the Jackson stuff from the public API.\r\n\r\nError:\r\n```\r\njava.lang.NoSuchMethodError: org.apache.avro.Schema$Field.defaultValue()Lorg/codehaus/jackson/JsonNode;\r\n\tat org.apache.parquet.avro.AvroRecordConverter.<init>(AvroRecordConverter.java:168)\r\n\tat org.apache.parquet.avro.AvroRecordConverter.<init>(AvroRecordConverter.java:95)\r\n\tat org.apache.parquet.avro.AvroRecordMaterializer.<init>(AvroRecordMaterializer.java:33)\r\n\tat org.apache.parquet.avro.AvroReadSupport.prepareForRead(AvroReadSupport.java:138)\r\n\tat org.apache.iceberg.parquet.ParquetReadSupport.prepareForRead(ParquetReadSupport.java:106)\r\n\tat org.apache.parquet.hadoop.InternalParquetRecordReader.initialize(InternalParquetRecordReader.java:183)\r\n\tat org.apache.parquet.hadoop.ParquetReader.initReader(ParquetReader.java:156)\r\n\tat org.apache.parquet.hadoop.ParquetReader.read(ParquetReader.java:135)\r\n\tat org.apache.iceberg.parquet.ParquetIterable$ParquetIterator.advance(ParquetIterable.java:82)\r\n\tat org.apache.iceberg.parquet.ParquetIterable$ParquetIterator.<init>(ParquetIterable.java:57)\r\n\tat org.apache.iceberg.parquet.ParquetIterable.iterator(ParquetIterable.java:43)\r\n\tat com.google.common.collect.Iterables.getOnlyElement(Iterables.java:254)\r\n\tat org.apache.iceberg.avro.TestParquetReadProjection.writeAndRead(TestParquetReadProjection.java:52)\r\n\tat org.apache.iceberg.avro.TestReadProjection.testReorderedProjection(TestReadProjection.java:106)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)\r\n\tat org.junit.rules.RunRules.evaluate(RunRules.java:20)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)\r\n\tat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:118)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:412)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533878243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533979302","html_url":"https://github.com/apache/iceberg/pull/474#issuecomment-533979302","issue_url":"https://api.github.com/repos/apache/iceberg/issues/474","id":533979302,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzk3OTMwMg==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T06:54:07Z","updated_at":"2019-09-23T06:54:07Z","author_association":"CONTRIBUTOR","body":"Thanks for the detailed explanation! Got your idea!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533979302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533981704","html_url":"https://github.com/apache/iceberg/pull/474#issuecomment-533981704","issue_url":"https://api.github.com/repos/apache/iceberg/issues/474","id":533981704,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMzk4MTcwNA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T07:04:27Z","updated_at":"2019-09-23T07:08:39Z","author_association":"CONTRIBUTOR","body":"\"Refreshing table metadata from new version: aaa\" indicates that Iceberg is refreshing the table metadata maintained in `TableOperations` (so called \"currently loaded one\", that is, the value of `currentMetadataLocation` in `BaseMetastoreTableOperations`) to use the value fetched from the metastore, that is, `newLocation` in `refreshFromMetadataLocation()`.\r\n\r\n\"from new version\" still cause confusions IMHO (make me feel like new version followed is the source version we are refreshing from, but actually it is the target version we are updating currentMetadataLocation to), but which is trivial. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/533981704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534206203","html_url":"https://github.com/apache/iceberg/pull/487#issuecomment-534206203","issue_url":"https://api.github.com/repos/apache/iceberg/issues/487","id":534206203,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDIwNjIwMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T17:41:03Z","updated_at":"2019-09-23T17:41:03Z","author_association":"CONTRIBUTOR","body":"Merged! Thanks for the quick updates, @ashleycoxley!\r\n\r\nIf you'd like to open a PR for `TIME_MILLIS` as well, I can help review it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534206203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534211145","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-534211145","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":534211145,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDIxMTE0NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T17:53:01Z","updated_at":"2019-09-23T17:53:01Z","author_association":"CONTRIBUTOR","body":"Hi @jun-ma-0, thanks for working on this!\r\n\r\nCan you update the description of this PR with how this works? I'd like to know this is backward-compatible with existing tables that store the full path. Also, how is the metadata is changed? That will affect forward-compatibility because older versions don't support relative paths.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534211145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534211386","html_url":"https://github.com/apache/iceberg/pull/488#issuecomment-534211386","issue_url":"https://api.github.com/repos/apache/iceberg/issues/488","id":534211386,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDIxMTM4Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T17:53:33Z","updated_at":"2019-09-23T17:53:33Z","author_association":"CONTRIBUTOR","body":"Merged. Thanks for the update, @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534211386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534217959","html_url":"https://github.com/apache/iceberg/issues/481#issuecomment-534217959","issue_url":"https://api.github.com/repos/apache/iceberg/issues/481","id":534217959,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDIxNzk1OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-23T18:09:56Z","updated_at":"2019-09-23T18:09:56Z","author_association":"CONTRIBUTOR","body":"Okay, I understand the motivation for sorting now. I think sorting is still a difficult way to solve this problem because you'd need to keep so many files in memory. Tables that need metadata rewrites usually have lots of data files.\r\n\r\nThe approach we took is to look at the metadata tables to get the number of entries and the current size of all manifests, and then use that to estimate how many buckets should be grouped together. Then the grouping function returns a key with `bucket_num % group_size`.\r\n\r\nThat's a much simpler approach than sorting. The drawback is that it relies on the number of files per bucket staying fairly stable, but I think that's reasonable in most cases.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/534217959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]