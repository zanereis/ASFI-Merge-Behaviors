[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658789885","html_url":"https://github.com/apache/hudi/issues/1766#issuecomment-658789885","issue_url":"https://api.github.com/repos/apache/hudi/issues/1766","id":658789885,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc4OTg4NQ==","user":{"login":"RajasekarSribalan","id":22605603,"node_id":"MDQ6VXNlcjIyNjA1NjAz","avatar_url":"https://avatars.githubusercontent.com/u/22605603?v=4","gravatar_id":"","url":"https://api.github.com/users/RajasekarSribalan","html_url":"https://github.com/RajasekarSribalan","followers_url":"https://api.github.com/users/RajasekarSribalan/followers","following_url":"https://api.github.com/users/RajasekarSribalan/following{/other_user}","gists_url":"https://api.github.com/users/RajasekarSribalan/gists{/gist_id}","starred_url":"https://api.github.com/users/RajasekarSribalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RajasekarSribalan/subscriptions","organizations_url":"https://api.github.com/users/RajasekarSribalan/orgs","repos_url":"https://api.github.com/users/RajasekarSribalan/repos","events_url":"https://api.github.com/users/RajasekarSribalan/events{/privacy}","received_events_url":"https://api.github.com/users/RajasekarSribalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:07:59Z","updated_at":"2020-07-15T14:07:59Z","author_association":"NONE","body":"Hello Balaji,\n\nI still do get incorrect entries when queried via hive. In the earlier\ncomment,I have mentioned the hive cdh version that we are using. I m really\nnot sure why it actually fetches duplicate rows.\n\nKind regards,\nRajasekar\n\nOn Wed, 15 Jul 2020, 7:25 pm Balaji Varadarajan, <notifications@github.com>\nwrote:\n\n> @RajasekarSribalan <https://github.com/RajasekarSribalan> : Sorry for the\n> delayed response. Is this still a problem ? I am not seeing any issue with\n> the table definition and as you can see from the docker demo, hive queries\n> after upserting does work fine :\n> https://hudi.apache.org/docs/docker_demo.html\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/hudi/issues/1766#issuecomment-658782603>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AFMO6IZP3NEOTL6FQFLUIPLR3WYN5ANCNFSM4OIRVWCA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658789885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658790661","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-658790661","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":658790661,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc5MDY2MQ==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:09:13Z","updated_at":"2020-07-15T14:09:13Z","author_association":"NONE","body":"Hi @bvaradar thanks for that. Does it mean that it was released on AWS yesterday? Should I use the latest EMR cluster release?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658790661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658791168","html_url":"https://github.com/apache/hudi/issues/1777#issuecomment-658791168","issue_url":"https://api.github.com/repos/apache/hudi/issues/1777","id":658791168,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc5MTE2OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:10:02Z","updated_at":"2020-07-15T14:10:02Z","author_association":"CONTRIBUTOR","body":"Thanks @WaterKnight1998 : Looks like this is resolved. Please open a new ticket if there are any other issues you are seeing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658791168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658791725","html_url":"https://github.com/apache/hudi/issues/1782#issuecomment-658791725","issue_url":"https://api.github.com/repos/apache/hudi/issues/1782","id":658791725,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc5MTcyNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:10:56Z","updated_at":"2020-07-15T14:10:56Z","author_association":"CONTRIBUTOR","body":"@sam-wmt : Pinging to see if you can provide debugging information. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658791725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658794018","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-658794018","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":658794018,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc5NDAxOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:14:46Z","updated_at":"2020-07-15T14:14:46Z","author_association":"CONTRIBUTOR","body":"Yes, @kirkuz . ccing @umehrot2 who can also chime in","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658794018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658797447","html_url":"https://github.com/apache/hudi/issues/1785#issuecomment-658797447","issue_url":"https://api.github.com/repos/apache/hudi/issues/1785","id":658797447,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODc5NzQ0Nw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:20:44Z","updated_at":"2020-07-15T14:20:44Z","author_association":"CONTRIBUTOR","body":"> @bhasudha what if i don't clean them up? ie if i just leave them there then what is the issue?\r\n\r\n@tooptoop4 : You should be cleaning these files before we archive to prevent reading partially written parquet files which were written during the failed commit. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658797447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658801170","html_url":"https://github.com/apache/hudi/issues/1788#issuecomment-658801170","issue_url":"https://api.github.com/repos/apache/hudi/issues/1788","id":658801170,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgwMTE3MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:27:11Z","updated_at":"2020-07-15T14:27:11Z","author_association":"CONTRIBUTOR","body":"Added jira : https://issues.apache.org/jira/browse/HUDI-1100 @tooptoop4 : if you are interested, please assign yourself. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658801170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658804172","html_url":"https://github.com/apache/hudi/issues/1790#issuecomment-658804172","issue_url":"https://api.github.com/repos/apache/hudi/issues/1790","id":658804172,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgwNDE3Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:32:06Z","updated_at":"2020-07-15T14:32:06Z","author_association":"CONTRIBUTOR","body":"@zuyanton : Thanks for reporting this issue. We have merged @zhedoubushishi  changes to master. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658804172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658808083","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-658808083","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":658808083,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgwODA4Mw==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:38:32Z","updated_at":"2020-07-15T14:38:32Z","author_association":"NONE","body":"Thanks guys! I'll test it out.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658808083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658813676","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-658813676","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":658813676,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgxMzY3Ng==","user":{"login":"ssomuah","id":2061955,"node_id":"MDQ6VXNlcjIwNjE5NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2061955?v=4","gravatar_id":"","url":"https://api.github.com/users/ssomuah","html_url":"https://github.com/ssomuah","followers_url":"https://api.github.com/users/ssomuah/followers","following_url":"https://api.github.com/users/ssomuah/following{/other_user}","gists_url":"https://api.github.com/users/ssomuah/gists{/gist_id}","starred_url":"https://api.github.com/users/ssomuah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssomuah/subscriptions","organizations_url":"https://api.github.com/users/ssomuah/orgs","repos_url":"https://api.github.com/users/ssomuah/repos","events_url":"https://api.github.com/users/ssomuah/events{/privacy}","received_events_url":"https://api.github.com/users/ssomuah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T14:48:15Z","updated_at":"2020-07-15T14:48:15Z","author_association":"NONE","body":"akwesi@gmail.com","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658813676/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658821557","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-658821557","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":658821557,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgyMTU1Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T15:01:55Z","updated_at":"2020-07-15T15:03:29Z","author_association":"MEMBER","body":"@zuyanton this seems like a general issue with `FileInputFormat` \r\n\r\n```\r\n int numThreads = job\r\n        .getInt(\r\n            org.apache.hadoop.mapreduce.lib.input.FileInputFormat.LIST_STATUS_NUM_THREADS,\r\n            org.apache.hadoop.mapreduce.lib.input.FileInputFormat.DEFAULT_LIST_STATUS_NUM_THREADS);\r\n```\r\n\r\ncan you try adding `spark.hadoop.mapreduce.input.fileinputformat.list-status.num-threads=8` or something to sparkConf and see if helps? (default inside Hadoop is 1) \r\n\r\ncc @n3nash IIRC you mentioned a similar approach done at uber?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658821557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658837587","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658837587","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658837587,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODgzNzU4Nw==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T15:32:28Z","updated_at":"2020-07-15T15:32:28Z","author_association":"NONE","body":"@bvaradar Thanks for quick response Balaji. To understand it correctly let me quickly run with an example\r\nThe data that is generated for a dataset will be in some range of 1MB for each 500 datasets. I had set the following properties\r\n\"hoodie.parquet.small.file.limit\": 2*1024*1024,\r\n \"hoodie.parquet.max.file.size\": 2*1024*1024*1024,\r\nSo to understand correctly  when the data write happens the size 1 MB less than the 2 MB small file limit the first parquet written will be 1 MB. The second write of the data which is another 1 MB should merge to existing parquet. For the 3 write the data will be 1 MB but the first partition is already reached the 2 MB so second parquet will be created? \r\nWhere does maxsize will be used in this process?\r\n\r\nAlso this will happen automatically or I need to specify some other properties to take this into effect apart from the two properties I have specified. \r\n\r\nAlso if want to contribute to the development of the clustering feature what will be the process for it?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658837587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658842626","html_url":"https://github.com/apache/hudi/pull/1722#issuecomment-658842626","issue_url":"https://api.github.com/repos/apache/hudi/issues/1722","id":658842626,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODg0MjYyNg==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T15:42:38Z","updated_at":"2020-07-15T15:42:38Z","author_association":"MEMBER","body":"@vinothchandar I agree we should use @umehrot2 RDD approach. \r\n>So you can also in parallel just proceed?\r\n\r\nYes, I will change this PR in parallel. \r\n>Do you just want the two util classes landed? SparkUtils/TablePathUtils?\r\n\r\nYes, @umehrot2 do you mind making a separate PR for these two classes?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658842626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658881320","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658881320","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658881320,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODg4MTMyMA==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T16:56:36Z","updated_at":"2020-07-15T16:56:36Z","author_association":"NONE","body":"@bvaradar I run with the above understanding where I set the small file size limit to 500 MB to match the 500 datasets but after write I see no change in the behavior it still creating different 1 mb parquet files. Please suggest","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658881320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658896451","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-658896451","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":658896451,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODg5NjQ1MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T17:22:06Z","updated_at":"2020-07-15T17:22:06Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg :  This sounds like a tuning problem. Please see https://github.com/apache/hudi/issues/1583#issuecomment-622894674 and https://github.com/apache/hudi/issues/654#issuecomment-489742356 \r\n\r\nThanks for your interest in contributing to clustering. You can start with going through the RFC page and looking at the jiras associated with it. Here is the link : https://cwiki.apache.org/confluence/display/HUDI/RFC+-+19+Clustering+data+for+speed+and+query+performance\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658896451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658984768","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-658984768","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":658984768,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODk4NDc2OA==","user":{"login":"zuyanton","id":67354813,"node_id":"MDQ6VXNlcjY3MzU0ODEz","avatar_url":"https://avatars.githubusercontent.com/u/67354813?v=4","gravatar_id":"","url":"https://api.github.com/users/zuyanton","html_url":"https://github.com/zuyanton","followers_url":"https://api.github.com/users/zuyanton/followers","following_url":"https://api.github.com/users/zuyanton/following{/other_user}","gists_url":"https://api.github.com/users/zuyanton/gists{/gist_id}","starred_url":"https://api.github.com/users/zuyanton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuyanton/subscriptions","organizations_url":"https://api.github.com/users/zuyanton/orgs","repos_url":"https://api.github.com/users/zuyanton/repos","events_url":"https://api.github.com/users/zuyanton/events{/privacy}","received_events_url":"https://api.github.com/users/zuyanton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T20:13:44Z","updated_at":"2020-07-15T20:13:44Z","author_association":"NONE","body":"@vinothchandar it didnt have any effect and I believe it shouldn't, since from what it looks like that parameter only gives improvement if you are trying to list statuses of multiple dirs https://github.com/apache/hadoop/blob/trunk/hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/FileInputFormat.java#L216 where is in our case its always one dir - the root location of single partition.  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/658984768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659001436","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-659001436","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":659001436,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAwMTQzNg==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T20:48:06Z","updated_at":"2020-07-15T20:48:06Z","author_association":"NONE","body":"@bvaradar  Balaji I tried the mentioned property but doesn't see the impact still see parquet generated\r\n\r\n2020-07-15 20:41:40  478.6 KiB 65254296-10d0-49d4-b168-6708e6274712-0_0-30-724_20200715204132.parquet\r\n2020-07-15 20:29:35  456.3 KiB 65254296-10d0-49d4-b168-6708e6274712-0_0-30-819_20200715202927.parquet\r\n\r\nHere are my writer hudi configs\r\n\r\nhudi_options = {\r\n\r\nÂ  | \"hoodie.table.name\": self.table_name,\r\nÂ  | \"hoodie.datasource.write.table.type\": \"COPY_ON_WRITE\",\r\nÂ  | \"hoodie.datasource.write.keygenerator.class\": \"org.apache.hudi.keygen.ComplexKeyGenerator\",\r\nÂ  | \"hoodie.datasource.write.recordkey.field\": \"dl_snapshot_date,dl_dataset,column\",\r\nÂ  | \"hoodie.datasource.write.precombine.field\": \"column\",\r\nÂ  | \"hoodie.datasource.write.table.name\": self.table_name,\r\nÂ  | \"hoodie.copyonwrite.record.size.estimate\":128,\r\nÂ  | \"hoodie.parquet.small.file.limit\": 500*1024*1024,\r\nÂ  | \"hoodie.parquet.max.file.size\": 2*1024*1024*1024,\r\nÂ  | \"hoodie.upsert.shuffle.parallelism\": 2,\r\nÂ  | \"hoodie.insert.shuffle.parallelism\": 2,\r\nÂ  | \"hoodie.embed.timeline.server\": False,\r\nÂ  | \"hoodie.datasource.write.partitionpath.field\": \"dl_snapshot_date\",\r\nÂ  | }\r\n\r\nCould you please suggest if anything is wrong?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659001436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659005038","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-659005038","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":659005038,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAwNTAzOA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T20:55:43Z","updated_at":"2020-07-15T20:55:43Z","author_association":"CONTRIBUTOR","body":"I think the finding by @zuyanton seems correct. Increasing the `num-threads` will not help because we just set the `basepath` of the table in the `inputpath` of `jobconf`. I believe we will have a good speed up, if instead of `basePath` we set `all the partition paths` in the `inputpath` of `jobconf`, and then increase the `num-threads`.\r\n\r\nAnother thing we can potentially explore is using Spark to perform this listing parallely on the cluster. But this seems like something we should target for `0.6.0` release with `Blocker` priority.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659005038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659010020","html_url":"https://github.com/apache/hudi/pull/1722#issuecomment-659010020","issue_url":"https://api.github.com/repos/apache/hudi/issues/1722","id":659010020,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAxMDAyMA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T21:05:44Z","updated_at":"2020-07-15T21:05:44Z","author_association":"CONTRIBUTOR","body":"> @vinothchandar I agree we should use @umehrot2 RDD approach.\r\n> \r\n> > So you can also in parallel just proceed?\r\n> \r\n> Yes, I will change this PR in parallel.\r\n> \r\n> > Do you just want the two util classes landed? SparkUtils/TablePathUtils?\r\n> \r\n> Yes, @umehrot2 do you mind making a separate PR for these two classes?\r\n\r\n@vinothchandar @garyli1019 thank you guys for reviewing the PR. Will look at the comments and start addressing. As for the `HudiSparkUtils/TablePathUtils` let me create a separate PR so that you can re-use those pieces for your PR and are unblocked. Meanwhile you can copy the code over to unblock coding from your side while I work on the PR. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659010020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659028374","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-659028374","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":659028374,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAyODM3NA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T21:43:25Z","updated_at":"2020-07-15T21:43:25Z","author_association":"CONTRIBUTOR","body":"@kirkuz yes the AWS Athena support was just released yesterday. Please try out the official support and if you face this issue open a support case with AWS Support, and ping on this thread as well. I will try to get someone from Athena to check it out.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659028374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659036363","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-659036363","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":659036363,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTAzNjM2Mw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T21:59:10Z","updated_at":"2020-07-15T21:59:10Z","author_association":"CONTRIBUTOR","body":"@zuyanton :  This sounds like a general  Spark/HMS query integration issue. Are we seeing similar behavior when running the same query over non-hudi table ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659036363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659044105","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-659044105","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":659044105,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA0NDEwNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T22:19:16Z","updated_at":"2020-07-15T22:19:16Z","author_association":"CONTRIBUTOR","body":"From the highlighted section in your spark UI image, it looks like there is an increase during index lookup. Between 2 runs, there is  an increase of 10 sec (around 4%). Is this the same pattern you were seeing in earlier runs. Also, I am not able to clearly see the difference between subsequent runs w.r.t total processing delay. My question is : Are you seeing more than 10 secs difference in total processing delay between subsequent runs ? If so, can you try 0.5.3 release where we fixed driver side performance issues and we have heard confirmation from users regarding speedup. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659044105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659046835","html_url":"https://github.com/apache/hudi/issues/1836#issuecomment-659046835","issue_url":"https://api.github.com/repos/apache/hudi/issues/1836","id":659046835,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA0NjgzNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T22:27:16Z","updated_at":"2020-07-15T22:27:16Z","author_association":"CONTRIBUTOR","body":"@ssomuah : If you look at other concrete implementations of HoodieRecordPayload, there are 2 constructors defined. For example : \r\n```\r\n  public OverwriteWithLatestAvroPayload(GenericRecord record, Comparable orderingVal) {\r\n    super(record, orderingVal);\r\n  }\r\n\r\n  public OverwriteWithLatestAvroPayload(Option<GenericRecord> record) {\r\n    this(record.isPresent() ? record.get() : null, (record1) -> 0); // natural order\r\n  }\r\n```\r\n\r\nYou would need the same kind of constructors in your custom payload.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659046835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659049963","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-659049963","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":659049963,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA0OTk2Mw==","user":{"login":"srsteinmetz","id":3799859,"node_id":"MDQ6VXNlcjM3OTk4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/3799859?v=4","gravatar_id":"","url":"https://api.github.com/users/srsteinmetz","html_url":"https://github.com/srsteinmetz","followers_url":"https://api.github.com/users/srsteinmetz/followers","following_url":"https://api.github.com/users/srsteinmetz/following{/other_user}","gists_url":"https://api.github.com/users/srsteinmetz/gists{/gist_id}","starred_url":"https://api.github.com/users/srsteinmetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srsteinmetz/subscriptions","organizations_url":"https://api.github.com/users/srsteinmetz/orgs","repos_url":"https://api.github.com/users/srsteinmetz/repos","events_url":"https://api.github.com/users/srsteinmetz/events{/privacy}","received_events_url":"https://api.github.com/users/srsteinmetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T22:36:27Z","updated_at":"2020-07-15T22:36:27Z","author_association":"NONE","body":"Yes I was only able to capture a few runs in a single page of the Spark UI but the processing time for the WorkflodProfile countByKey has an increasing pattern over subsequent runs. I don't see this increasing pattern for other jobs in the batches. We have upgraded to 0.5.3 which led to clear performance improvements but even on 0.5.3 we are seeing the linearly increasing processing time.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659049963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659052418","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-659052418","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":659052418,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA1MjQxOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T22:43:58Z","updated_at":"2020-07-15T22:43:58Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : The 2 parquet files you have listed are essentially different versions of the same file (file_id : 65254296-10d0-49d4-b168-6708e6274712-0_0). Each time you write, only one of this would have been created. Just to avoid confusion, can you elaborate on what you expected to see ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659052418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659057299","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-659057299","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":659057299,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA1NzI5OQ==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T22:59:23Z","updated_at":"2020-07-15T22:59:23Z","author_association":"CONTRIBUTOR","body":"@bvaradar thank you for taking a look at this. We had an internal meeting with @srsteinmetz and the team, and yes at the outset to me it looks the the total time for lookup is increasing linearly here. It seems to be that when it does `countByKey()` in `WorkloadProfie` that is also triggering some of the previous `index lookup` spark actions on the `taggedRecords RDD`. Could this be an artifact of number of parquet files/bloom filters to check keeps increasing over time ? Have we seen similar issues reported before with Hudi ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659057299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659064590","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-659064590","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":659064590,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA2NDU5MA==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T23:21:35Z","updated_at":"2020-07-15T23:21:35Z","author_association":"NONE","body":"@bvaradar I was assuming that every time we write the content will merged to the existing file based on the size limits we have specify. Other wise we will see lot small files. As from the files you see there are roughly 0.5 MB each so when we write full datastes I will have 500 of those which is what I want to avoid. \r\n ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659064590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659089308","html_url":"https://github.com/apache/hudi/issues/1836#issuecomment-659089308","issue_url":"https://api.github.com/repos/apache/hudi/issues/1836","id":659089308,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA4OTMwOA==","user":{"login":"ssomuah","id":2061955,"node_id":"MDQ6VXNlcjIwNjE5NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2061955?v=4","gravatar_id":"","url":"https://api.github.com/users/ssomuah","html_url":"https://github.com/ssomuah","followers_url":"https://api.github.com/users/ssomuah/followers","following_url":"https://api.github.com/users/ssomuah/following{/other_user}","gists_url":"https://api.github.com/users/ssomuah/gists{/gist_id}","starred_url":"https://api.github.com/users/ssomuah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ssomuah/subscriptions","organizations_url":"https://api.github.com/users/ssomuah/orgs","repos_url":"https://api.github.com/users/ssomuah/repos","events_url":"https://api.github.com/users/ssomuah/events{/privacy}","received_events_url":"https://api.github.com/users/ssomuah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T00:47:19Z","updated_at":"2020-07-16T00:47:19Z","author_association":"NONE","body":"Thank you Balaji, that was it. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659089308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659094743","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-659094743","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":659094743,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTA5NDc0Mw==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T01:06:55Z","updated_at":"2020-07-16T01:06:55Z","author_association":"CONTRIBUTOR","body":"Hi, @vinothchandar @yanghua @leesf @n3nash, ci is green, this pr is ready for review now :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659094743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659163337","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-659163337","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":659163337,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE2MzMzNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T05:13:43Z","updated_at":"2020-07-16T05:17:08Z","author_association":"CONTRIBUTOR","body":"@umehrot2 @srsteinmetz : Thanks for the information. I have not seen similar issues but looking at the trend (increase) in number of file groups and partitions  is a good angle to investigate on. Can you also attach few (subsequent) .commit files where you saw the increase in lookup time ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659163337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659174736","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-659174736","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":659174736,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE3NDczNg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T05:50:26Z","updated_at":"2020-07-16T05:50:26Z","author_association":"CONTRIBUTOR","body":"Can you try setting the config \"hoodie.bloom.index.bucketized.checking\" to false and try. Kindly report back with the observation. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659174736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659182664","html_url":"https://github.com/apache/hudi/pull/1810#issuecomment-659182664","issue_url":"https://api.github.com/repos/apache/hudi/issues/1810","id":659182664,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE4MjY2NA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T06:13:07Z","updated_at":"2020-07-16T06:13:07Z","author_association":"CONTRIBUTOR","body":"> Hi @lw309637554 , I totally understand the importance of the backward capability. IMO, that will be great if we can remove the hive dependency from `hudi-spark` and `hudi-utilities`. If we treat `syncHive` separately, we still need to include some Hive related packages in these two modules.\r\n> I had this dependency issue before while I was testing the delta streamer. I didn't use Hive at all but I need to resolve some Hive dependency conflicts in my production environment. So I'd incline to sacrifice some backward capability and move all the Hive related packages to `hudi-hive-sync`. Do you think this is possible?\r\n> Happy to hear what you guys think.\r\n\r\nthis is a good point. I think remove hive dependency from hudi-spark and  hudi-utilities is a another   work . we can open another issue resolve it ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659182664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659193833","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-659193833","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":659193833,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE5MzgzMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T06:43:58Z","updated_at":"2020-07-16T06:50:04Z","author_association":"CONTRIBUTOR","body":"It looks like hoodie.bloom.index.bucketized.checking  has the same setting in 0.4.6. So, no need to check that. Can you try checking other configs related to index lookup between 0.4.6 and 0.5.3 to see if any defaults are changes. I will check back in a day or so. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659193833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659194433","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-659194433","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":659194433,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE5NDQzMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T06:45:40Z","updated_at":"2020-07-16T06:51:59Z","author_association":"CONTRIBUTOR","body":"Also wondering if we are indeed comparing apples to apples. As the runs are happening in different setup, can you help localize by running both 0.4.6 and 0.5.3 in same setup and provide spark dag UI screenshots (jobs, stages and tasks (for skewness)) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659194433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659206804","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-659206804","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":659206804,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTIwNjgwNA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T07:12:22Z","updated_at":"2020-07-16T07:12:22Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : To grow an existing file, hudi creates a new file-version of the file and doesnt try modifying the existing file (https://hudi.apache.org/docs/concepts.html). This is to ensure snapshot isolation to readers who are reading the query when writes are happening. Note that removing older file versions is the responsibility of Hoodie Cleaner (https://cwiki.apache.org/confluence/display/HUDI/FAQ#FAQ-WhatdoestheHudicleanerdo). If you do not want to have lot of previous versions of the file lying around, you can go ahead and set the cleaner config as specified in the above link. Hope this helps. Let me know if this did not help.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659206804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659327491","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-659327491","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":659327491,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTMyNzQ5MQ==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T10:37:45Z","updated_at":"2020-07-16T13:24:37Z","author_association":"NONE","body":"Actually was using 0.4.6-SNAPSHOT before bucketized.checking code landed. I changed hoodie.bloom.index.bucketized.checking to false on hudi 0.5.3 and time down to 107mins :) \r\n\r\nhudi 0.5.3 in local mode with hoodie.bloom.index.bucketized.checking to false takes 122mins\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659327491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659342216","html_url":"https://github.com/apache/hudi/pull/1774#issuecomment-659342216","issue_url":"https://api.github.com/repos/apache/hudi/issues/1774","id":659342216,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTM0MjIxNg==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T11:10:28Z","updated_at":"2020-07-16T11:10:28Z","author_association":"CONTRIBUTOR","body":"@hddong Please check the reason why Travis failed.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659342216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659376123","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-659376123","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":659376123,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTM3NjEyMw==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T12:23:36Z","updated_at":"2020-07-16T12:23:36Z","author_association":"NONE","body":"Hi @umehrot2, I can see that it works as it should for now. I'm just wondering if it's possible to create hudi tables in Athena via AWS Glue crawler not only by running CREATE TABLE statement with hudi input format (mentioned here: https://docs.aws.amazon.com/athena/latest/ug/querying-hudi.html)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659376123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659443232","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-659443232","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":659443232,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTQ0MzIzMg==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T14:18:34Z","updated_at":"2020-07-16T14:18:34Z","author_association":"NONE","body":"btw. do you have any community slack channel?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659443232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659495533","html_url":"https://github.com/apache/hudi/pull/1774#issuecomment-659495533","issue_url":"https://api.github.com/repos/apache/hudi/issues/1774","id":659495533,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTQ5NTUzMw==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T15:40:19Z","updated_at":"2020-07-16T15:40:19Z","author_association":"CONTRIBUTOR","body":"@yanghua : It's green now.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659495533/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659501450","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-659501450","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":659501450,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTUwMTQ1MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T15:49:54Z","updated_at":"2020-07-16T15:49:54Z","author_association":"CONTRIBUTOR","body":"> btw. do you have any community slack channel?\r\n\r\nPlease add your id to https://github.com/apache/hudi/issues/143 and we will add you to slack ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659501450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659522682","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-659522682","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":659522682,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTUyMjY4Mg==","user":{"login":"srsteinmetz","id":3799859,"node_id":"MDQ6VXNlcjM3OTk4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/3799859?v=4","gravatar_id":"","url":"https://api.github.com/users/srsteinmetz","html_url":"https://github.com/srsteinmetz","followers_url":"https://api.github.com/users/srsteinmetz/followers","following_url":"https://api.github.com/users/srsteinmetz/following{/other_user}","gists_url":"https://api.github.com/users/srsteinmetz/gists{/gist_id}","starred_url":"https://api.github.com/users/srsteinmetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srsteinmetz/subscriptions","organizations_url":"https://api.github.com/users/srsteinmetz/orgs","repos_url":"https://api.github.com/users/srsteinmetz/repos","events_url":"https://api.github.com/users/srsteinmetz/events{/privacy}","received_events_url":"https://api.github.com/users/srsteinmetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T16:24:35Z","updated_at":"2020-07-16T16:24:35Z","author_association":"NONE","body":"I just started a new test and will watch for increasing processing times and post the associated .commit file.\r\n\r\nMy more recent tests have used 36 partitions and if I inspect the partitions they generally have ~1000 .log files @ ~3.8MB each and ~700 .parquet files @ 120 MB. Of those 700 .parquet files each file slice seems to retain 8 versions so the partitions have ~88 unique file slices.\r\n\r\nI have inlineComapction enabled but the load generator is currently sending updates at 10k TPS which probably results in the large number of .log files.\r\n\r\nThe table we are attempting to model has 150 TB of storage in DynamoDB. Is there any general rule of thumb around the number of partitions to use and ideal number of parquet files per partition? We may be able to work backwards from the size of the source table to determine the proper number of partitions and maxFileSize.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659522682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659558896","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-659558896","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":659558896,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTU1ODg5Ng==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T17:28:42Z","updated_at":"2020-07-16T19:29:35Z","author_association":"NONE","body":"@bvaradar Balaji I set the hoodie.cleaner.commits.retained:1 after that I see only two parquet in the filesystem. But when I load the partition using the spark I don't see all the data. For example let say I have loaded 5 datasets which are unique I only see 3 datasets.\r\nAny suggestions?\r\nParquet File\r\n2020-07-16 17:03:00  494.8 KiB 65254296-10d0-49d4-b168-6708e6274712-0_0-30-247_20200716170252.parquet\r\n2020-07-16 17:14:20  494.9 KiB 65254296-10d0-49d4-b168-6708e6274712-0_0-30-252_20200716171413.parquet\r\n\r\nThese are distinct commits I see in spark\r\n+-------------------+\r\n|_hoodie_commit_time|\r\n+-------------------+\r\n|     20200716171413|\r\n|     20200715202927|\r\n|     20200716154733|\r\n+-------------------+\r\n\r\nThese are the content of .hoddie\r\ntemptest/hudi/.hoodie/.aux',\r\n 'temptest/hudi/.hoodie/.temp',\r\n 'temptest/hudi/.hoodie/20200715202927.commit',\r\n 'temptest/hudi/.hoodie/20200715202927.commit.requested',\r\n 'temptest/hudi/.hoodie/20200715202927.inflight',\r\n 'temptest/hudi/.hoodie/20200715204132.commit',\r\n 'temptest/hudi/.hoodie/20200715204132.commit.requested',\r\n 'temptest/hudi/.hoodie/20200715204132.inflight',\r\n 'temptest/hudi/.hoodie/20200716154733.clean',\r\n 'temptest/hudi/.hoodie/20200716154733.clean.inflight',\r\n 'temptest/hudi/.hoodie/20200716154733.clean.requested',\r\n 'temptest/hudi/.hoodie/20200716154733.commit',\r\n 'temptest/hudi/.hoodie/20200716154733.commit.requested',\r\n 'temptest/hudi/.hoodie/20200716154733.inflight',\r\n 'temptest/hudi/.hoodie/20200716162313.clean',\r\n 'temptest/hudi/.hoodie/20200716162313.clean.inflight',\r\n 'temptest/hudi/.hoodie/20200716162313.clean.requested',\r\n 'temptest/hudi/.hoodie/20200716162313.commit',\r\n 'temptest/hudi/.hoodie/20200716162313.commit.requested',\r\n 'temptest/hudi/.hoodie/20200716162313.inflight',\r\n 'temptest/hudi/.hoodie/20200716163952.commit',\r\n 'temptest/hudi/.hoodie/20200716163952.commit.requested',\r\n 'temptest/hudi/.hoodie/20200716163952.inflight',\r\n 'temptest/hudi/.hoodie/20200716170252.clean',\r\n 'temptest/hudi/.hoodie/20200716170252.clean.inflight',\r\n 'temptest/hudi/.hoodie/20200716170252.clean.requested',\r\n 'temptest/hudi/.hoodie/20200716170252.commit',\r\n 'temptest/hudi/.hoodie/20200716170252.commit.requested',\r\n 'temptest/hudi/.hoodie/20200716170252.inflight',\r\n 'temptest/hudi/.hoodie/20200716171413.clean',\r\n 'temptest/hudi/.hoodie/20200716171413.clean.inflight',\r\n 'temptest/hudi/.hoodie/20200716171413.clean.requested',\r\n 'temptest/hudi/.hoodie/20200716171413.commit',\r\n 'temptest/hudi/.hoodie/20200716171413.commit.requested',\r\n 'temptest/hudi/.hoodie/20200716171413.inflight',","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659558896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659584280","html_url":"https://github.com/apache/hudi/pull/1756#issuecomment-659584280","issue_url":"https://api.github.com/repos/apache/hudi/issues/1756","id":659584280,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTU4NDI4MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T18:14:51Z","updated_at":"2020-07-16T18:14:51Z","author_association":"MEMBER","body":"thanks @lw309637554  actually was working on fixing it myself :). I am working on the marker dir deletion now. Will push to this branch later today. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659584280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659601445","html_url":"https://github.com/apache/hudi/pull/1810#issuecomment-659601445","issue_url":"https://api.github.com/repos/apache/hudi/issues/1810","id":659601445,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTYwMTQ0NQ==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T18:48:38Z","updated_at":"2020-07-16T18:48:38Z","author_association":"MEMBER","body":"> this is a good point. I think remove hive dependency from hudi-spark and hudi-utilities is a another work . we can open another issue resolve it\r\n\r\nsounds good. follow up ticket: https://issues.apache.org/jira/browse/HUDI-1101\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659601445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659617807","html_url":"https://github.com/apache/hudi/issues/1794#issuecomment-659617807","issue_url":"https://api.github.com/repos/apache/hudi/issues/1794","id":659617807,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTYxNzgwNw==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T19:20:04Z","updated_at":"2020-07-16T19:20:22Z","author_association":"CONTRIBUTOR","body":"I couldn't repro it locally (everything was ok). But in general, hive sync is required only if there are changes to partitions list (like new partitions added, removed, etc). When I tried a commit only w/ deletes, changes were reflected even w/o doing an hive sync. So, you are good to skip hive sync for those commits which has only deletes. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659617807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659631425","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-659631425","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":659631425,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTYzMTQyNQ==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T19:47:31Z","updated_at":"2020-07-16T19:47:31Z","author_association":"CONTRIBUTOR","body":"> Hi @umehrot2, I can see that it works as it should for now. I'm just wondering if it's possible to create hudi tables in Athena via AWS Glue crawler not only by running CREATE TABLE statement with hudi input format (mentioned here: https://docs.aws.amazon.com/athena/latest/ug/querying-hudi.html)\r\n\r\n@kirkuz AWS Glue does not officially support Hudi. So this may not be possible right now.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659631425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659633790","html_url":"https://github.com/apache/hudi/issues/1586#issuecomment-659633790","issue_url":"https://api.github.com/repos/apache/hudi/issues/1586","id":659633790,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTYzMzc5MA==","user":{"login":"nandurj","id":67474555,"node_id":"MDQ6VXNlcjY3NDc0NTU1","avatar_url":"https://avatars.githubusercontent.com/u/67474555?v=4","gravatar_id":"","url":"https://api.github.com/users/nandurj","html_url":"https://github.com/nandurj","followers_url":"https://api.github.com/users/nandurj/followers","following_url":"https://api.github.com/users/nandurj/following{/other_user}","gists_url":"https://api.github.com/users/nandurj/gists{/gist_id}","starred_url":"https://api.github.com/users/nandurj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nandurj/subscriptions","organizations_url":"https://api.github.com/users/nandurj/orgs","repos_url":"https://api.github.com/users/nandurj/repos","events_url":"https://api.github.com/users/nandurj/events{/privacy}","received_events_url":"https://api.github.com/users/nandurj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T19:52:31Z","updated_at":"2020-07-16T19:54:44Z","author_association":"NONE","body":"I am working with HUDI 0.5.2 on EMR 5.30. I am running the job using the Delta streamer. Below is how I am running the spark job.\r\n\r\nspark-submit --class org.apache.hudi.utilities.deltastreamer.HoodieDeltaStreamer  \\\r\n  --jars /usr/lib/spark/external/lib/spark-avro_2.11-2.4.5-amzn-0.jar \\\r\n  --master yarn --deploy-mode client \\\r\n  --executor-memory 10G --executor-cores 4 \\\r\n  file:///usr/lib/hudi/hudi-utilities-bundle_2.11-0.5.2-incubating.jar \\\r\n  --table-type COPY_ON_WRITE \\\r\n  --source-ordering-field TIMESTAMP \\\r\n  --continuous \\\r\n  --enable-hive-sync \\\r\n  --min-sync-interval-seconds 60 \\\r\n  --source-class org.apache.hudi.utilities.sources.ParquetDFSSource \\\r\n  --transformer-class org.apache.hudi.utilities.transform.AWSDmsTransformer \\\r\n  --target-base-path s3://mybucket/CoWex --target-table table_test \\\r\n  --payload-class org.apache.hudi.payload.AWSDmsAvroPayload \\\r\n  --hoodie-conf hoodie.datasource.write.recordkey.field=\"Field1, Field2, Field3\" \\\r\n  --hoodie-conf hoodie.datasource.write.keygenerator.class=org.apache.hudi.keygen.ComplexKeyGenerator \\\r\n  --hoodie-conf hoodie.datasource.write.partitionpath.field=\"Field1\" \\\r\n  --hoodie-conf hoodie.datasource.hive_sync.database=testdb \\\r\n  --hoodie-conf hoodie.datasource.hive_sync.table=test_table\\\r\n  --hoodie-conf hoodie.datasource.hive_sync.partition_fields=\"datefield\" \\\r\n  --hoodie-conf hoodie.datasource.hive_sync.partition_extractor_class=org.apache.hudi.hive.MultiPartKeysValueExtractor \\\r\n  --hoodie-conf hoodie.deltastreamer.source.dfs.root=s3://mybucket/input\r\n\r\n\r\nSpark-shell output:\r\nscala> spark.sql(\"\"\"select _hoodie_record_key from testdb.test_table\"\"\").show(false)\r\n+--------------------------------------------------------------------+          \r\n|_hoodie_record_key                                                  |\r\n+--------------------------------------------------------------------+\r\n|Field1:[0, 0]|\r\n+--------------------------------------------------------------------+\r\n\r\nFrom the above output Field2, Field3 are missing.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659633790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659655270","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-659655270","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":659655270,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTY1NTI3MA==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T20:31:15Z","updated_at":"2020-07-16T20:31:15Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/33283496/87719610-8735b380-c7ab-11ea-9eee-d55ef3d7fd36.png)\r\n\r\n@bvaradar this image shows tasks for flatMapToPair at HoodieBloomIndex.java:308 stage, how can the number of records/shuffle size be so much larger than both my input file and existing table?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659655270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659667871","html_url":"https://github.com/apache/hudi/issues/1830#issuecomment-659667871","issue_url":"https://api.github.com/repos/apache/hudi/issues/1830","id":659667871,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTY2Nzg3MQ==","user":{"login":"srsteinmetz","id":3799859,"node_id":"MDQ6VXNlcjM3OTk4NTk=","avatar_url":"https://avatars.githubusercontent.com/u/3799859?v=4","gravatar_id":"","url":"https://api.github.com/users/srsteinmetz","html_url":"https://github.com/srsteinmetz","followers_url":"https://api.github.com/users/srsteinmetz/followers","following_url":"https://api.github.com/users/srsteinmetz/following{/other_user}","gists_url":"https://api.github.com/users/srsteinmetz/gists{/gist_id}","starred_url":"https://api.github.com/users/srsteinmetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srsteinmetz/subscriptions","organizations_url":"https://api.github.com/users/srsteinmetz/orgs","repos_url":"https://api.github.com/users/srsteinmetz/repos","events_url":"https://api.github.com/users/srsteinmetz/events{/privacy}","received_events_url":"https://api.github.com/users/srsteinmetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T20:55:58Z","updated_at":"2020-07-16T20:55:58Z","author_association":"NONE","body":"\r\n[20200716204504.txt](https://github.com/apache/hudi/files/4934119/20200716204504.txt)\r\n\r\nIn my most recent test I see .deltacommit files but no .commit files. I attached one of the .deltacommit files.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659667871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659690154","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-659690154","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":659690154,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTY5MDE1NA==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T21:41:49Z","updated_at":"2020-07-16T21:41:49Z","author_association":"NONE","body":"@bvaradar @bhasudha I tried using following \r\n\"hoodie.datasource.hive_sync.use_jdbc\":False,\r\n\"hoodie.datasource.hive_sync.enable\":True,\r\nÂ \r\nMy spark is configured already with thrifturl of metastore for hive.  Does the hudi will use the thrift instance as we I have disabled the jdbc?\r\n\r\nI get the error \r\n An error occurred while calling o175.save.\\n: java.lang.NoClassDefFoundError: org/json/JSONException\\n\\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeCreateTable(SemanticAnalyzer.java:10847)\\n\\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genResolvedParseTree(SemanticAnalyzer.java:10047)\\n\\tat org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:10128)\\n\\tat org.apache.hadoop.hive.ql.parse.CalcitePlanner.analyzeInternal(CalcitePlanner.java:209)\\n\\tat org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:227)\\n\\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:424)\\n\\tat org.apache.hadoop.hive.ql.Driver.compile(Driver.java:308)\\n\\tat org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1122)\\n\\tat org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1170)\\n\\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:1059)\\n\\tat org.apache.hadoop.hive.ql.Driver.run(Driver.java:1049)\\n\\tat org.apache.hudi.hive.HoodieHiveClient.updateHiveSQLs(HoodieHiveClient.java:515)\\n\\tat org.apache.hudi.hive.HoodieHiveClient.updateHiveSQLUsingHiveDriver(HoodieHiveClient.java:498)\\n\\tat org.apache.hudi.hive.HoodieHiveClient.updateHiveSQL(HoodieHiveClient.java:488)\\n\\tat org.apache.hudi.hive.HoodieHiveClient.createTable(HoodieHiveClient.java:273)\\n\\tat org.apache.hudi.hive.HiveSyncTool.syncSchema(HiveSyncTool.java:146)\\n\\tat\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659690154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659715124","html_url":"https://github.com/apache/hudi/pull/1841#issuecomment-659715124","issue_url":"https://api.github.com/repos/apache/hudi/issues/1841","id":659715124,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTcxNTEyNA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T22:42:32Z","updated_at":"2020-07-16T22:42:32Z","author_association":"CONTRIBUTOR","body":"FYI @vinothchandar @garyli1019 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659715124/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659747098","html_url":"https://github.com/apache/hudi/pull/1810#issuecomment-659747098","issue_url":"https://api.github.com/repos/apache/hudi/issues/1810","id":659747098,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTc0NzA5OA==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T00:11:39Z","updated_at":"2020-07-17T00:11:39Z","author_association":"CONTRIBUTOR","body":"> > this is a good point. I think remove hive dependency from hudi-spark and hudi-utilities is a another work . we can open another issue resolve it\r\n> \r\n> sounds good. follow up ticket: https://issues.apache.org/jira/browse/HUDI-1101\r\n\r\nvery nice","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659747098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659747189","html_url":"https://github.com/apache/hudi/pull/1756#issuecomment-659747189","issue_url":"https://api.github.com/repos/apache/hudi/issues/1756","id":659747189,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTc0NzE4OQ==","user":{"login":"lw309637554","id":8501994,"node_id":"MDQ6VXNlcjg1MDE5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8501994?v=4","gravatar_id":"","url":"https://api.github.com/users/lw309637554","html_url":"https://github.com/lw309637554","followers_url":"https://api.github.com/users/lw309637554/followers","following_url":"https://api.github.com/users/lw309637554/following{/other_user}","gists_url":"https://api.github.com/users/lw309637554/gists{/gist_id}","starred_url":"https://api.github.com/users/lw309637554/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lw309637554/subscriptions","organizations_url":"https://api.github.com/users/lw309637554/orgs","repos_url":"https://api.github.com/users/lw309637554/repos","events_url":"https://api.github.com/users/lw309637554/events{/privacy}","received_events_url":"https://api.github.com/users/lw309637554/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T00:11:56Z","updated_at":"2020-07-17T00:11:56Z","author_association":"CONTRIBUTOR","body":"> thanks @lw309637554 actually was working on fixing it myself :). I am working on the marker dir deletion now. Will push to this branch later today.\r\n\r\n\r\n\r\n> thanks @lw309637554 actually was working on fixing it myself :). I am working on the marker dir deletion now. Will push to this branch later today.\r\n\r\nokay","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659747189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659789500","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-659789500","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":659789500,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTc4OTUwMA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T02:10:13Z","updated_at":"2020-07-17T02:10:13Z","author_association":"MEMBER","body":"@Mathieu1124 @leesf can you please share any tests you may have done in your own environment to ensure existing functionality is in tact.. This is a major signal we may not completely get with a PR review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659789500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659804284","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-659804284","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":659804284,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTgwNDI4NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T02:49:56Z","updated_at":"2020-07-17T02:49:56Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : \r\nJust to be on consistent terminology, the 2 physical files you listed is 2 different versions of the same file. So, queries will be seeing one parquet file. This is fine and expected if we are ingesting only few records per batch which can all fit in a single file. \r\n\r\nSome questions  : Are you ingesting each source dataset as a separate batch to Hudi ? If so, I only see 3 commits ? Can you paste the contents of 3 commit files : 20200716171413.commit, 20200716170252.commit and 20200716154733.commit and let me know how many records were you expecting to ingest. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659804284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659804569","html_url":"https://github.com/apache/hudi/issues/1840#issuecomment-659804569","issue_url":"https://api.github.com/repos/apache/hudi/issues/1840","id":659804569,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTgwNDU2OQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T02:50:41Z","updated_at":"2020-07-17T02:50:41Z","author_association":"CONTRIBUTOR","body":"@nsivabalan : Would you be able to take this up ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659804569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659833939","html_url":"https://github.com/apache/hudi/pull/1765#issuecomment-659833939","issue_url":"https://api.github.com/repos/apache/hudi/issues/1765","id":659833939,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTgzMzkzOQ==","user":{"login":"zuyanton","id":67354813,"node_id":"MDQ6VXNlcjY3MzU0ODEz","avatar_url":"https://avatars.githubusercontent.com/u/67354813?v=4","gravatar_id":"","url":"https://api.github.com/users/zuyanton","html_url":"https://github.com/zuyanton","followers_url":"https://api.github.com/users/zuyanton/followers","following_url":"https://api.github.com/users/zuyanton/following{/other_user}","gists_url":"https://api.github.com/users/zuyanton/gists{/gist_id}","starred_url":"https://api.github.com/users/zuyanton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuyanton/subscriptions","organizations_url":"https://api.github.com/users/zuyanton/orgs","repos_url":"https://api.github.com/users/zuyanton/repos","events_url":"https://api.github.com/users/zuyanton/events{/privacy}","received_events_url":"https://api.github.com/users/zuyanton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T04:09:48Z","updated_at":"2020-07-17T04:09:48Z","author_association":"NONE","body":"any updates ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659833939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659836676","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-659836676","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":659836676,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTgzNjY3Ng==","user":{"login":"zuyanton","id":67354813,"node_id":"MDQ6VXNlcjY3MzU0ODEz","avatar_url":"https://avatars.githubusercontent.com/u/67354813?v=4","gravatar_id":"","url":"https://api.github.com/users/zuyanton","html_url":"https://github.com/zuyanton","followers_url":"https://api.github.com/users/zuyanton/followers","following_url":"https://api.github.com/users/zuyanton/following{/other_user}","gists_url":"https://api.github.com/users/zuyanton/gists{/gist_id}","starred_url":"https://api.github.com/users/zuyanton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuyanton/subscriptions","organizations_url":"https://api.github.com/users/zuyanton/orgs","repos_url":"https://api.github.com/users/zuyanton/repos","events_url":"https://api.github.com/users/zuyanton/events{/privacy}","received_events_url":"https://api.github.com/users/zuyanton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T04:17:47Z","updated_at":"2020-07-17T04:17:47Z","author_association":"NONE","body":"@bvaradar we dont see similar issue with regular non hudi tables saved to s3 in parquet format. for regular tables \"overhead\" is the same and under one minute despite the number of partitions. Regular tables with 20k partitions as well as 100 partition take the same time to \"load\" before spark starts running its jobs where is hudi table on s3  becomes slow with 5k+ partitions. Although we use EMR 5.28 which comes with EMRFS s3 optimized committer enabled in spark by default ,so I assume whatever bottlenecks s3 has, are addressed in the committer. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659836676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659885576","html_url":"https://github.com/apache/hudi/issues/1835#issuecomment-659885576","issue_url":"https://api.github.com/repos/apache/hudi/issues/1835","id":659885576,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTg4NTU3Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T06:17:41Z","updated_at":"2020-07-17T06:17:41Z","author_association":"CONTRIBUTOR","body":"THis looks like a setup issue. Are you by any change loading multiple versions of hudi in your spark ? You can try local docker based  demo to see what you are missing : https://hudi.apache.org/docs/docker_demo.html","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659885576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659889727","html_url":"https://github.com/apache/hudi/issues/1837#issuecomment-659889727","issue_url":"https://api.github.com/repos/apache/hudi/issues/1837","id":659889727,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTg4OTcyNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T06:26:12Z","updated_at":"2020-07-17T06:26:12Z","author_association":"CONTRIBUTOR","body":"Thanks @zuyanton for reporting this issue. \r\n\r\n@umehrot2 We can solve this If we can generalize this PR : https://github.com/apache/hudi/pull/1768 to also parallelize FSUtils.getAllPartitionPaths. Would you be able to make the change ?\r\n\r\nJira : https://issues.apache.org/jira/browse/HUDI-1108","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659889727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659892874","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-659892874","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":659892874,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTg5Mjg3NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T06:33:06Z","updated_at":"2020-07-17T06:33:06Z","author_association":"CONTRIBUTOR","body":"\r\n@tooptoop4 : Can you provide us the spark DAGs with times (Job, Stage and Task level) between 0.5.3 (with bucketized bloom index on) and 0.5.3 (with bucketized bloom index off). We need to see why you are seeing such a massive performance difference. \r\n\r\nRegarding your question, Please take a look at the comment in https://github.com/apache/hudi/blob/master/hudi-client/src/main/java/org/apache/hudi/index/bloom/HoodieBloomIndex.java#L249 \r\nThis is basically an exploded RDD of record-Key with files to be compared.\r\n\r\nThanks,\r\nBalaji.V\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659892874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659898064","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-659898064","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":659898064,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTg5ODA2NA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T06:44:00Z","updated_at":"2020-07-17T06:44:41Z","author_association":"CONTRIBUTOR","body":"> @Mathieu1124 @leesf can you please share any tests you may have done in your own environment to ensure existing functionality is in tact.. This is a major signal we may not completely get with a PR review\r\n\r\n@vinothchandar, My test is limited, just all the unit tests in source code, and all the demos in the Quick-Start Guide. I am planning to test it in docker env.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659898064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659899321","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-659899321","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":659899321,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTg5OTMyMQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T06:46:30Z","updated_at":"2020-07-17T06:46:30Z","author_association":"CONTRIBUTOR","body":"Thanks @zuyanton  for the updates. IIUC, S3 optimized committer was for optimizing writes reducing the renames done. I might be wrong but I am generally curious on EMR optimizations for Spark. @umehrot2 : We can look at the option you mentioned regarding setting the partition paths and then increasing the num-threads. Is this one of the optimizations done internally within EMR spark ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659899321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659959113","html_url":"https://github.com/apache/hudi/issues/1828#issuecomment-659959113","issue_url":"https://api.github.com/repos/apache/hudi/issues/1828","id":659959113,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTk1OTExMw==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T08:30:26Z","updated_at":"2020-07-17T08:31:01Z","author_association":"NONE","body":"@umehrot2 are there any chances that it will be supported soon? Is it planned? Can I help with that somehow?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659959113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659961734","html_url":"https://github.com/apache/hudi/pull/1832#issuecomment-659961734","issue_url":"https://api.github.com/repos/apache/hudi/issues/1832","id":659961734,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTk2MTczNA==","user":{"login":"linshan-ma","id":23548282,"node_id":"MDQ6VXNlcjIzNTQ4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/23548282?v=4","gravatar_id":"","url":"https://api.github.com/users/linshan-ma","html_url":"https://github.com/linshan-ma","followers_url":"https://api.github.com/users/linshan-ma/followers","following_url":"https://api.github.com/users/linshan-ma/following{/other_user}","gists_url":"https://api.github.com/users/linshan-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/linshan-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linshan-ma/subscriptions","organizations_url":"https://api.github.com/users/linshan-ma/orgs","repos_url":"https://api.github.com/users/linshan-ma/repos","events_url":"https://api.github.com/users/linshan-ma/events{/privacy}","received_events_url":"https://api.github.com/users/linshan-ma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T08:35:07Z","updated_at":"2020-07-17T08:35:07Z","author_association":"CONTRIBUTOR","body":"> @mabin001 Thanks for you contributing, `addPartitionsToTable` and `updatePartitionsToTable ` are good to handle empty partitions and it is a more proper way IMHO.\r\n\r\nI agree with you about `addPartitionsToTable` and `updatePartitionsToTable ` are good to handle empty partitionsï¼Œbut We should determine the list is empty or not empty before calling the methodã€‚So, i think  i can delete the code of this \r\n![image](https://user-images.githubusercontent.com/23548282/87765779-d3840080-c84a-11ea-9bcd-79fdb4a7ccae.png)\r\n![image](https://user-images.githubusercontent.com/23548282/87765850-e72f6700-c84a-11ea-93e7-aca497c5fa28.png)\r\n.\r\nTestHiveSyncTool#testBasicSync   \r\n![image](https://user-images.githubusercontent.com/23548282/87766256-7177cb00-c84b-11ea-8095-cdb4cca9350b.png)\r\ncan delete  too.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659961734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659976188","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-659976188","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":659976188,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTk3NjE4OA==","user":{"login":"kirqz23","id":22114492,"node_id":"MDQ6VXNlcjIyMTE0NDky","avatar_url":"https://avatars.githubusercontent.com/u/22114492?v=4","gravatar_id":"","url":"https://api.github.com/users/kirqz23","html_url":"https://github.com/kirqz23","followers_url":"https://api.github.com/users/kirqz23/followers","following_url":"https://api.github.com/users/kirqz23/following{/other_user}","gists_url":"https://api.github.com/users/kirqz23/gists{/gist_id}","starred_url":"https://api.github.com/users/kirqz23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirqz23/subscriptions","organizations_url":"https://api.github.com/users/kirqz23/orgs","repos_url":"https://api.github.com/users/kirqz23/repos","events_url":"https://api.github.com/users/kirqz23/events{/privacy}","received_events_url":"https://api.github.com/users/kirqz23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T09:00:09Z","updated_at":"2020-07-17T09:00:09Z","author_association":"NONE","body":"kiryll.kuzniecow@gmail.com","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/659976188/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660013270","html_url":"https://github.com/apache/hudi/issues/1840#issuecomment-660013270","issue_url":"https://api.github.com/repos/apache/hudi/issues/1840","id":660013270,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDAxMzI3MA==","user":{"login":"reena-cs","id":18308856,"node_id":"MDQ6VXNlcjE4MzA4ODU2","avatar_url":"https://avatars.githubusercontent.com/u/18308856?v=4","gravatar_id":"","url":"https://api.github.com/users/reena-cs","html_url":"https://github.com/reena-cs","followers_url":"https://api.github.com/users/reena-cs/followers","following_url":"https://api.github.com/users/reena-cs/following{/other_user}","gists_url":"https://api.github.com/users/reena-cs/gists{/gist_id}","starred_url":"https://api.github.com/users/reena-cs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reena-cs/subscriptions","organizations_url":"https://api.github.com/users/reena-cs/orgs","repos_url":"https://api.github.com/users/reena-cs/repos","events_url":"https://api.github.com/users/reena-cs/events{/privacy}","received_events_url":"https://api.github.com/users/reena-cs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T10:05:37Z","updated_at":"2020-07-17T10:05:37Z","author_association":"NONE","body":"Adding \r\n\r\n\"hoodie.cleaner.commits.retained\": \"1\",\r\n\"hoodie.cleaner.fileversions.retained\": \"1\"\r\n\r\nin my option has helped me, can someone verify if i am doing the right operation?\r\nAs mentioned above we are doing this for GDPR compliance and we won't revert it back so having just the latest file will do right?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660013270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660027464","html_url":"https://github.com/apache/hudi/issues/1794#issuecomment-660027464","issue_url":"https://api.github.com/repos/apache/hudi/issues/1794","id":660027464,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDAyNzQ2NA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T10:32:14Z","updated_at":"2020-07-17T10:32:14Z","author_association":"CONTRIBUTOR","body":"please reopen if you need anything. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660027464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660030474","html_url":"https://github.com/apache/hudi/issues/1794#issuecomment-660030474","issue_url":"https://api.github.com/repos/apache/hudi/issues/1794","id":660030474,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDAzMDQ3NA==","user":{"login":"RajasekarSribalan","id":22605603,"node_id":"MDQ6VXNlcjIyNjA1NjAz","avatar_url":"https://avatars.githubusercontent.com/u/22605603?v=4","gravatar_id":"","url":"https://api.github.com/users/RajasekarSribalan","html_url":"https://github.com/RajasekarSribalan","followers_url":"https://api.github.com/users/RajasekarSribalan/followers","following_url":"https://api.github.com/users/RajasekarSribalan/following{/other_user}","gists_url":"https://api.github.com/users/RajasekarSribalan/gists{/gist_id}","starred_url":"https://api.github.com/users/RajasekarSribalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RajasekarSribalan/subscriptions","organizations_url":"https://api.github.com/users/RajasekarSribalan/orgs","repos_url":"https://api.github.com/users/RajasekarSribalan/repos","events_url":"https://api.github.com/users/RajasekarSribalan/events{/privacy}","received_events_url":"https://api.github.com/users/RajasekarSribalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T10:37:46Z","updated_at":"2020-07-17T10:37:46Z","author_association":"NONE","body":"Thank you for your response ðŸ˜Š\n\nOn Fri, 17 Jul 2020, 4:02 pm Sivabalan Narayanan, <notifications@github.com>\nwrote:\n\n> Closed #1794 <https://github.com/apache/hudi/issues/1794>.\n>\n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/hudi/issues/1794#event-3557508625>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AFMO6IY7WMYUC32D6VR4MH3R4ASD7ANCNFSM4OQ2GZNQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660030474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660049020","html_url":"https://github.com/apache/hudi/pull/1842#issuecomment-660049020","issue_url":"https://api.github.com/repos/apache/hudi/issues/1842","id":660049020,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDA0OTAyMA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T11:13:53Z","updated_at":"2020-07-17T11:13:53Z","author_association":"CONTRIBUTOR","body":"Hi, @yanghua  please take a look when free","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660049020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660050240","html_url":"https://github.com/apache/hudi/pull/1832#issuecomment-660050240","issue_url":"https://api.github.com/repos/apache/hudi/issues/1832","id":660050240,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDA1MDI0MA==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T11:16:36Z","updated_at":"2020-07-17T11:16:36Z","author_association":"CONTRIBUTOR","body":"> > @mabin001 Thanks for you contributing, `addPartitionsToTable` and `updatePartitionsToTable ` are good to handle empty partitions and it is a more proper way IMHO.\r\n> \r\n> I agree with you about `addPartitionsToTable` and `updatePartitionsToTable ` are good to handle empty partitionsï¼Œbut We should determine the list is empty or not empty before calling the methodã€‚So, i think i can delete the code of this\r\n> ![image](https://user-images.githubusercontent.com/23548282/87765779-d3840080-c84a-11ea-9bcd-79fdb4a7ccae.png)\r\n> ![image](https://user-images.githubusercontent.com/23548282/87765850-e72f6700-c84a-11ea-93e7-aca497c5fa28.png)\r\n> .\r\n> TestHiveSyncTool#testBasicSync\r\n> ![image](https://user-images.githubusercontent.com/23548282/87766256-7177cb00-c84b-11ea-8095-cdb4cca9350b.png)\r\n> can delete too.\r\n\r\nThanks for the explanation @mabin001 . In fact I do think current solution is more reasonable and cleaner IMHO, other callers would call the method without checking the empty and let the method to check empty. If you check empty before calling the method, there will be a lot of duplicate code. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660050240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660082919","html_url":"https://github.com/apache/hudi/pull/1838#issuecomment-660082919","issue_url":"https://api.github.com/repos/apache/hudi/issues/1838","id":660082919,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDA4MjkxOQ==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T12:35:52Z","updated_at":"2020-07-17T12:35:52Z","author_association":"CONTRIBUTOR","body":"@nsivabalan would you please take a look on this PR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660082919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660083266","html_url":"https://github.com/apache/hudi/pull/1727#issuecomment-660083266","issue_url":"https://api.github.com/repos/apache/hudi/issues/1727","id":660083266,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDA4MzI2Ng==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T12:36:44Z","updated_at":"2020-07-17T12:36:44Z","author_association":"CONTRIBUTOR","body":"all goes to #1827 Closing this one.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660083266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660100564","html_url":"https://github.com/apache/hudi/issues/1835#issuecomment-660100564","issue_url":"https://api.github.com/repos/apache/hudi/issues/1835","id":660100564,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDEwMDU2NA==","user":{"login":"rajgowtham24","id":68343070,"node_id":"MDQ6VXNlcjY4MzQzMDcw","avatar_url":"https://avatars.githubusercontent.com/u/68343070?v=4","gravatar_id":"","url":"https://api.github.com/users/rajgowtham24","html_url":"https://github.com/rajgowtham24","followers_url":"https://api.github.com/users/rajgowtham24/followers","following_url":"https://api.github.com/users/rajgowtham24/following{/other_user}","gists_url":"https://api.github.com/users/rajgowtham24/gists{/gist_id}","starred_url":"https://api.github.com/users/rajgowtham24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajgowtham24/subscriptions","organizations_url":"https://api.github.com/users/rajgowtham24/orgs","repos_url":"https://api.github.com/users/rajgowtham24/repos","events_url":"https://api.github.com/users/rajgowtham24/events{/privacy}","received_events_url":"https://api.github.com/users/rajgowtham24/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T13:14:39Z","updated_at":"2020-07-17T13:14:39Z","author_association":"NONE","body":"Thanks Balaji for the reply, actually i have spinned up aws emr v5.30.1 along with Hudi and using the same for code execution. I'm loading only one version of hudi into spark. Verified the same in application log file as well. \r\n\r\n\r\n20/07/17 13:06:04 INFO SparkUI: Bound SparkUI to 0.0.0.0, and started at http://ip-10-80-69-179.eu-west-1.compute.internal:4041\r\n20/07/17 13:06:04 INFO SparkContext: Added JAR file:/usr/lib/hudi/hudi-utilities-bundle.jar at spark://ip-10-80-69-179.eu-west-1.compute.internal:37251/jars/hudi-utilities-bundle.jar with timestamp 1594991164091\r\n20/07/17 13:06:04 INFO Utils: Using initial executors = 100, max of spark.dynamicAllocation.initialExecutors, spark.dynamicAllocation.minExecutors and spark.executor.instances\r\n\r\nLet me know if i need to take a look into anything apart from the above for the setup issue.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660100564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660119391","html_url":"https://github.com/apache/hudi/issues/1840#issuecomment-660119391","issue_url":"https://api.github.com/repos/apache/hudi/issues/1840","id":660119391,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDExOTM5MQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T13:53:16Z","updated_at":"2020-07-17T13:53:16Z","author_association":"CONTRIBUTOR","body":"yes, if you want all older copies to be deleted, guess you have to set the configs you have listed. For incremental pulling, point in time queries, etc older commits will still have the records. only the commit in which delete was issued will have the record deleted. So if you query the table in general with latest data, you will not see the deleted records. But if you query with a older commit time, you could see the deleted record as per that time instant, since these records are not deleted as of that time instant. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660119391/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660123935","html_url":"https://github.com/apache/hudi/pull/1792#issuecomment-660123935","issue_url":"https://api.github.com/repos/apache/hudi/issues/1792","id":660123935,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDEyMzkzNQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T14:02:04Z","updated_at":"2020-07-17T14:02:04Z","author_association":"CONTRIBUTOR","body":"@vinothchandar : awaiting your review. if this is not doable (checking delete in getInsertValue()) for some reason, we might have to make some changes to https://github.com/apache/hudi/pull/1819 as well. so would appreciate your review. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660123935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660127741","html_url":"https://github.com/apache/hudi/pull/1842#issuecomment-660127741","issue_url":"https://api.github.com/repos/apache/hudi/issues/1842","id":660127741,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDEyNzc0MQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T14:09:33Z","updated_at":"2020-07-17T14:09:33Z","author_association":"CONTRIBUTOR","body":"> I see that we call the callback in `HoodieSparkWriter` and `DeltaSync` but not in `HoodieWriteClient`, that means if users use `HoodieWriteClient` apis to write data directly, the callback will not be called, so would we move callback to `HoodieWriteClient` after each writing, so that all types of writing would reuse it?\r\n@leesf yes, should be like that. I have moved it into write client. thanks for your time, please take another look when free.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660127741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660158542","html_url":"https://github.com/apache/hudi/pull/1842#issuecomment-660158542","issue_url":"https://api.github.com/repos/apache/hudi/issues/1842","id":660158542,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDE1ODU0Mg==","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T15:06:06Z","updated_at":"2020-07-17T15:07:47Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/hudi/pull/1842?src=pr&el=h1) Report\n> Merging [#1842](https://codecov.io/gh/apache/hudi/pull/1842?src=pr&el=desc) into [master](https://codecov.io/gh/apache/hudi/commit/bf1d36fa639cae558aa388d8d547e58ad2e67aba&el=desc) will **decrease** coverage by `0.09%`.\n> The diff coverage is `44.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/hudi/pull/1842/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/hudi/pull/1842?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1842      +/-   ##\n============================================\n- Coverage     60.58%   60.48%   -0.10%     \n- Complexity     3646     3659      +13     \n============================================\n  Files           440      447       +7     \n  Lines         19055    19180     +125     \n  Branches       1923     1935      +12     \n============================================\n+ Hits          11544    11601      +57     \n- Misses         6721     6788      +67     \n- Partials        790      791       +1     \n```\n\n| Flag | Coverage Î” | Complexity Î” | |\n|---|---|---|---|\n| #hudicli | `67.99% <44.00%> (-0.40%)` | `1442.00 <12.00> (+13.00)` | :arrow_down: |\n| #hudiclient | `78.39% <44.00%> (-0.80%)` | `1270.00 <12.00> (+13.00)` | :arrow_down: |\n| #hudicommon | `54.29% <Ã¸> (Ã¸)` | `1486.00 <Ã¸> (Ã¸)` | |\n| #hudihadoopmr | `38.99% <Ã¸> (Ã¸)` | `163.00 <Ã¸> (Ã¸)` | |\n| #hudihivesync | `72.25% <Ã¸> (Ã¸)` | `121.00 <Ã¸> (Ã¸)` | |\n| #hudispark | `49.36% <Ã¸> (Ã¸)` | `121.00 <Ã¸> (Ã¸)` | |\n| #huditimelineservice | `63.47% <Ã¸> (Ã¸)` | `47.00 <Ã¸> (Ã¸)` | |\n| #hudiutilities | `74.71% <Ã¸> (Ã¸)` | `279.00 <Ã¸> (Ã¸)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/hudi/pull/1842?src=pr&el=tree) | Coverage Î” | Complexity Î” | |\n|---|---|---|---|\n| [...llback/common/HoodieBaseCommitCallbackMessage.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2FsbGJhY2svY29tbW9uL0hvb2RpZUJhc2VDb21taXRDYWxsYmFja01lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (Ã¸)` | `0.00 <0.00> (?)` | |\n| [...udi/callback/util/HoodieCommitCallbackFactory.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2FsbGJhY2svdXRpbC9Ib29kaWVDb21taXRDYWxsYmFja0ZhY3RvcnkuamF2YQ==) | `0.00% <0.00%> (Ã¸)` | `0.00 <0.00> (?)` | |\n| [.../hudi/exception/HoodieCommitCallBackException.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvZXhjZXB0aW9uL0hvb2RpZUNvbW1pdENhbGxCYWNrRXhjZXB0aW9uLmphdmE=) | `0.00% <0.00%> (Ã¸)` | `0.00 <0.00> (?)` | |\n| [...n/scala/org/apache/hudi/HoodieSparkSqlWriter.scala](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSG9vZGllU3BhcmtTcWxXcml0ZXIuc2NhbGE=) | `55.02% <Ã¸> (Ã¸)` | `0.00 <0.00> (Ã¸)` | |\n| [.../apache/hudi/client/AbstractHoodieWriteClient.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0Fic3RyYWN0SG9vZGllV3JpdGVDbGllbnQuamF2YQ==) | `69.31% <14.28%> (-4.76%)` | `18.00 <0.00> (Ã¸)` | |\n| [...java/org/apache/hudi/config/HoodieWriteConfig.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29uZmlnL0hvb2RpZVdyaXRlQ29uZmlnLmphdmE=) | `77.35% <25.00%> (-2.49%)` | `89.00 <1.00> (+1.00)` | :arrow_down: |\n| [...i/callback/impl/HoodieHttpWriteCommitCallback.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2FsbGJhY2svaW1wbC9Ib29kaWVIdHRwV3JpdGVDb21taXRDYWxsYmFjay5qYXZh) | `38.88% <38.88%> (Ã¸)` | `2.00 <2.00> (?)` | |\n| [...e/hudi/config/HoodieWriteCommitCallbackConfig.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29uZmlnL0hvb2RpZVdyaXRlQ29tbWl0Q2FsbGJhY2tDb25maWcuamF2YQ==) | `59.25% <59.25%> (Ã¸)` | `3.00 <3.00> (?)` | |\n| [...ack/client/http/HoodieWriteCallbackHttpClient.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2FsbGJhY2svY2xpZW50L2h0dHAvSG9vZGllV3JpdGVDYWxsYmFja0h0dHBDbGllbnQuamF2YQ==) | `92.85% <92.85%> (Ã¸)` | `5.00 <5.00> (?)` | |\n| [...hudi/callback/common/HoodieCommitCallbackType.java](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2FsbGJhY2svY29tbW9uL0hvb2RpZUNvbW1pdENhbGxiYWNrVHlwZS5qYXZh) | `100.00% <100.00%> (Ã¸)` | `1.00 <1.00> (?)` | |\n| ... and [8 more](https://codecov.io/gh/apache/hudi/pull/1842/diff?src=pr&el=tree-more) | |\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660158542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660174273","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-660174273","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":660174273,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDE3NDI3Mw==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T15:35:17Z","updated_at":"2020-07-17T15:35:17Z","author_association":"NONE","body":"@bvaradar I think some how there was a cleanup issue after cleanup all the files and setting\r\n\"hoodie.cleaner.commits.retained\":1, I see two parquet files consistently so this setting works. \r\nÂ Thanks for all your responses.\r\n1) Now two questions is there a way to get rid of previous 1 commit I set \"hoodie.cleaner.commits.retained\":0 seems its disable it\r\n2) Is there way to run compaction for the under the .hoddie folder as there are lot of commit info accumulating under it?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660174273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660175460","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-660175460","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":660175460,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDE3NTQ2MA==","user":{"login":"asheeshgarg","id":4348671,"node_id":"MDQ6VXNlcjQzNDg2NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4348671?v=4","gravatar_id":"","url":"https://api.github.com/users/asheeshgarg","html_url":"https://github.com/asheeshgarg","followers_url":"https://api.github.com/users/asheeshgarg/followers","following_url":"https://api.github.com/users/asheeshgarg/following{/other_user}","gists_url":"https://api.github.com/users/asheeshgarg/gists{/gist_id}","starred_url":"https://api.github.com/users/asheeshgarg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asheeshgarg/subscriptions","organizations_url":"https://api.github.com/users/asheeshgarg/orgs","repos_url":"https://api.github.com/users/asheeshgarg/repos","events_url":"https://api.github.com/users/asheeshgarg/events{/privacy}","received_events_url":"https://api.github.com/users/asheeshgarg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T15:37:24Z","updated_at":"2020-07-17T15:37:24Z","author_association":"NONE","body":"@bvaradar pease let me know if anything else need to be done to disable the jdbc interface?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660175460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660262865","html_url":"https://github.com/apache/hudi/issues/1840#issuecomment-660262865","issue_url":"https://api.github.com/repos/apache/hudi/issues/1840","id":660262865,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDI2Mjg2NQ==","user":{"login":"reena-cs","id":18308856,"node_id":"MDQ6VXNlcjE4MzA4ODU2","avatar_url":"https://avatars.githubusercontent.com/u/18308856?v=4","gravatar_id":"","url":"https://api.github.com/users/reena-cs","html_url":"https://github.com/reena-cs","followers_url":"https://api.github.com/users/reena-cs/followers","following_url":"https://api.github.com/users/reena-cs/following{/other_user}","gists_url":"https://api.github.com/users/reena-cs/gists{/gist_id}","starred_url":"https://api.github.com/users/reena-cs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reena-cs/subscriptions","organizations_url":"https://api.github.com/users/reena-cs/orgs","repos_url":"https://api.github.com/users/reena-cs/repos","events_url":"https://api.github.com/users/reena-cs/events{/privacy}","received_events_url":"https://api.github.com/users/reena-cs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T18:09:50Z","updated_at":"2020-07-17T18:09:50Z","author_association":"NONE","body":"> yes, if you want all older copies to be deleted, guess you have to set the configs you have listed. For incremental pulling, point in time queries, etc older commits will still have the records. only the commit in which delete was issued will have the record deleted. So if you query the table in general with latest data, you will not see the deleted records. But if you query with a older commit time, you could see the deleted record as per that time instant, since these records are not deleted as of that time instant.\r\n\r\nThanks, it was helpful. But i wonder how querying an older commit time will show the deleted record. Because file versions retained is set 1, then how will it retrive it?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660262865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660335554","html_url":"https://github.com/apache/hudi/issues/1840#issuecomment-660335554","issue_url":"https://api.github.com/repos/apache/hudi/issues/1840","id":660335554,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDMzNTU1NA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-17T21:00:07Z","updated_at":"2020-07-17T21:00:07Z","author_association":"CONTRIBUTOR","body":"I didn't mean it that way. if you are ok giving up older commits, then setting the two config params you posted would suffice. But incase you want to retain older commits and you also want deletes to delete all older copies, I don't think its doable as of now. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660335554/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660389870","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-660389870","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":660389870,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDM4OTg3MA==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T00:16:15Z","updated_at":"2020-07-18T00:19:49Z","author_association":"CONTRIBUTOR","body":"@zuyanton In your test with regular parquet tables you are probably not setting the following property in the spark config ```spark.sql.hive.convertMetastoreParquet=false```. When you set this property to ```false`` only then will Spark use `Parquet InputFormat` as well as its listing code. Otherwise by default Spark uses its native listing (parallelized over the cluster) and parquet readers which are supposed to be faster.\r\n\r\nHowever the way Hudi works is it uses `InputFormat` implementation. Thus for a fair comparison when you test regular parquet with Spark you should set ```spark.sql.hive.convertMetastoreParquet=false``` and I think you will observe quite similar behavior then as to what you are seeing. Would you mind trying that out once ?\r\n\r\nBut @bvaradar irrespective I think for Hudi we should always compare our performance against standard spark performance (native listing and reading) and not the performance of spark when it is made to go through InputFormat. So we need to get this fixed either ways if we have to be comparable to spark parquet performance which uses parallelized listing over the cluster. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660389870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660390473","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-660390473","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":660390473,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDM5MDQ3Mw==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T00:19:18Z","updated_at":"2020-07-18T00:19:18Z","author_association":"CONTRIBUTOR","body":"@bvaradar @zuyanton EMR S3 optimized committer only helps avoid renames. Again that does not come into effect for Hudi because of the way Hudi datasource is implemented. Hudi datasource is not an extension of ```FileFormat``` datasource of ```Spark```. It has its own commit mechanism and writing logic and does not use Sparks commit/write process. So EMR optimized committer unfortunately does not come into effect for Hudi workloads.\r\n\r\nIrrespective the committer would not have any effect on this listing performance.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660390473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660392013","html_url":"https://github.com/apache/hudi/issues/1837#issuecomment-660392013","issue_url":"https://api.github.com/repos/apache/hudi/issues/1837","id":660392013,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDM5MjAxMw==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T00:27:38Z","updated_at":"2020-07-18T00:27:38Z","author_association":"CONTRIBUTOR","body":"@bvaradar this was on our radar. I would ideally like to keep the whole **marker optimizations** separate. Also I received certain comments in my PR where folks do not want `hudi-common` to depend on `spark`. This means that we need to move out these listing logic our of `hudi-common` if we want to parallelize it with `spark context`. So lets target this in a separate PR.\r\n\r\nOne of my teammates was interested in taking this up. Let me check with him if he can pick this and if not I will. For the meanwhile, I have assigned it to myself.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660392013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660404869","html_url":"https://github.com/apache/hudi/pull/1842#issuecomment-660404869","issue_url":"https://api.github.com/repos/apache/hudi/issues/1842","id":660404869,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQwNDg2OQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T01:48:37Z","updated_at":"2020-07-18T02:55:06Z","author_association":"CONTRIBUTOR","body":"Hi, @yanghua @leesf, I was wondering maybe we should throw an exception instead of logging a warning when the callback service failed(log waring currently). \r\nSince the callback is not enabled by default, If the user enables the callback service, then the callback is really what they want, so, if any error occurred, the job should fail.\r\nwhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660404869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660408124","html_url":"https://github.com/apache/hudi/issues/1837#issuecomment-660408124","issue_url":"https://api.github.com/repos/apache/hudi/issues/1837","id":660408124,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQwODEyNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T02:13:58Z","updated_at":"2020-07-18T02:14:07Z","author_association":"MEMBER","body":"> This means that we need to move out these listing logic our of hudi-common if we want to parallelize it with spark context.\r\n\r\nI will be landing a PR over the weekend, that avoids listings for rollbacks.. consequently, I moved the place you are changing into hudi-client already.. So it should be simple to redo on top of that. \r\n\r\nOverall, We already have a `StorageSchemes` class that does different things for S3/GCS etc and HDFS/Ignite.. based on append support.. As a more elegant fix, I feel if we can take a pass at listing usages and do different forms of listing based on storage schemes.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660408124/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660412522","html_url":"https://github.com/apache/hudi/issues/1845#issuecomment-660412522","issue_url":"https://api.github.com/repos/apache/hudi/issues/1845","id":660412522,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQxMjUyMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T02:51:20Z","updated_at":"2020-07-18T02:51:20Z","author_association":"CONTRIBUTOR","body":"Thanks Sebastian for the detailed information. From looking at the code related to your originally seen exception (not the test), it has to do with plain avro schema compatibility rules. Would you mind providing both versions of schema. From the test code in PR, there are 4 different fields (various combination of nullable vs default types). I would like to see which field specifically is contributing to the issue. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660412522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660413464","html_url":"https://github.com/apache/hudi/issues/1829#issuecomment-660413464","issue_url":"https://api.github.com/repos/apache/hudi/issues/1829","id":660413464,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQxMzQ2NA==","user":{"login":"zuyanton","id":67354813,"node_id":"MDQ6VXNlcjY3MzU0ODEz","avatar_url":"https://avatars.githubusercontent.com/u/67354813?v=4","gravatar_id":"","url":"https://api.github.com/users/zuyanton","html_url":"https://github.com/zuyanton","followers_url":"https://api.github.com/users/zuyanton/followers","following_url":"https://api.github.com/users/zuyanton/following{/other_user}","gists_url":"https://api.github.com/users/zuyanton/gists{/gist_id}","starred_url":"https://api.github.com/users/zuyanton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zuyanton/subscriptions","organizations_url":"https://api.github.com/users/zuyanton/orgs","repos_url":"https://api.github.com/users/zuyanton/repos","events_url":"https://api.github.com/users/zuyanton/events{/privacy}","received_events_url":"https://api.github.com/users/zuyanton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T02:59:05Z","updated_at":"2020-07-18T02:59:05Z","author_association":"NONE","body":"@umehrot2 you are right , with ```convertMetastoreParquet``` set to ```false``` , when querying regular parquet table with 20k partitions I can see similar behavior of spark not running any jobs for first 4 minutes.  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660413464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660415532","html_url":"https://github.com/apache/hudi/issues/1833#issuecomment-660415532","issue_url":"https://api.github.com/repos/apache/hudi/issues/1833","id":660415532,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQxNTUzMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T03:16:22Z","updated_at":"2020-07-18T03:16:22Z","author_association":"CONTRIBUTOR","body":"@tooptoop4 : Pinging again to see if you can get us the information between the 2 runs w/o bucketized bloom index\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660415532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660415951","html_url":"https://github.com/apache/hudi/issues/1825#issuecomment-660415951","issue_url":"https://api.github.com/repos/apache/hudi/issues/1825","id":660415951,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQxNTk1MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T03:20:46Z","updated_at":"2020-07-18T03:20:46Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : \r\n1. We retain latest 2 commits to ensure concurrent read queries don't fail intermittently. With subsequent writes, they will be cleaned up. \r\n2. Archiving commit metadata is the job of Archival process : Please look at https://hudi.apache.org/docs/configurations.html#archiveCommitsWith for setting configurations","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660415951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660418451","html_url":"https://github.com/apache/hudi/issues/1787#issuecomment-660418451","issue_url":"https://api.github.com/repos/apache/hudi/issues/1787","id":660418451,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQxODQ1MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T03:46:16Z","updated_at":"2020-07-18T03:46:16Z","author_association":"CONTRIBUTOR","body":"@asheeshgarg : Are you running hive sync as part of spark datasource writing (using hudi-spark-bundle ?) or  in standalone mode using hudi-hive-sync-bundle ? I am trying to see which bundle is having this issue. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660418451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660423821","html_url":"https://github.com/apache/hudi/issues/1843#issuecomment-660423821","issue_url":"https://api.github.com/repos/apache/hudi/issues/1843","id":660423821,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQyMzgyMQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T04:37:36Z","updated_at":"2020-07-18T04:37:36Z","author_association":"CONTRIBUTOR","body":"Please list all the contents of the partition that you are listing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660423821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660423950","html_url":"https://github.com/apache/hudi/issues/1738#issuecomment-660423950","issue_url":"https://api.github.com/repos/apache/hudi/issues/1738","id":660423950,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQyMzk1MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T04:38:50Z","updated_at":"2020-07-18T04:38:50Z","author_association":"CONTRIBUTOR","body":"Closing this due to inactivity.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660423950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660424074","html_url":"https://github.com/apache/hudi/issues/1705#issuecomment-660424074","issue_url":"https://api.github.com/repos/apache/hudi/issues/1705","id":660424074,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQyNDA3NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T04:40:01Z","updated_at":"2020-07-18T04:40:01Z","author_association":"CONTRIBUTOR","body":"Any luck @nandini57 ? I can also create a jira if you were able to work through the hops. Let me know","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660424074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660424332","html_url":"https://github.com/apache/hudi/issues/1586#issuecomment-660424332","issue_url":"https://api.github.com/repos/apache/hudi/issues/1586","id":660424332,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQyNDMzMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T04:42:40Z","updated_at":"2020-07-18T04:42:40Z","author_association":"CONTRIBUTOR","body":"@pratyakshsharma : Would you be able to debug  this issue ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660424332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660424461","html_url":"https://github.com/apache/hudi/issues/1785#issuecomment-660424461","issue_url":"https://api.github.com/repos/apache/hudi/issues/1785","id":660424461,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQyNDQ2MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T04:44:18Z","updated_at":"2020-07-18T04:44:18Z","author_association":"CONTRIBUTOR","body":"closing this ticket. @tooptoop4 : if you have any more questions, please open a new ticket or contact in slack.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660424461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660426026","html_url":"https://github.com/apache/hudi/issues/1795#issuecomment-660426026","issue_url":"https://api.github.com/repos/apache/hudi/issues/1795","id":660426026,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQyNjAyNg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T04:59:08Z","updated_at":"2020-07-18T04:59:08Z","author_association":"CONTRIBUTOR","body":"@leesf : Added https://issues.apache.org/jira/browse/HUDI-1111 to track. Assigned to you for now. Please feel free to reassign as you see fit. \r\n\r\nThanks,\r\nBalaji.V","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660426026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660458165","html_url":"https://github.com/apache/hudi/pull/1838#issuecomment-660458165","issue_url":"https://api.github.com/repos/apache/hudi/issues/1838","id":660458165,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MDQ1ODE2NQ==","user":{"login":"shenh062326","id":9527867,"node_id":"MDQ6VXNlcjk1Mjc4Njc=","avatar_url":"https://avatars.githubusercontent.com/u/9527867?v=4","gravatar_id":"","url":"https://api.github.com/users/shenh062326","html_url":"https://github.com/shenh062326","followers_url":"https://api.github.com/users/shenh062326/followers","following_url":"https://api.github.com/users/shenh062326/following{/other_user}","gists_url":"https://api.github.com/users/shenh062326/gists{/gist_id}","starred_url":"https://api.github.com/users/shenh062326/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shenh062326/subscriptions","organizations_url":"https://api.github.com/users/shenh062326/orgs","repos_url":"https://api.github.com/users/shenh062326/repos","events_url":"https://api.github.com/users/shenh062326/events{/privacy}","received_events_url":"https://api.github.com/users/shenh062326/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-18T09:48:57Z","updated_at":"2020-07-18T09:49:29Z","author_association":"CONTRIBUTOR","body":"> Can you add a simple test to ensure the no of records inserted to a bucket approx matches the bucket weight. If we already have one, do refer it here.\r\n\r\nSure, I will add a test.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/660458165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]