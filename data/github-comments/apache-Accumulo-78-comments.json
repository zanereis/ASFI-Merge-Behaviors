[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998905541","html_url":"https://github.com/apache/accumulo/issues/2365#issuecomment-998905541","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2365","id":998905541,"node_id":"IC_kwDOACaFSM47ihbF","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T16:08:11Z","updated_at":"2021-12-21T16:08:11Z","author_association":"CONTRIBUTOR","body":"I think this is fixed for now with #2385. This can be re-opened if any issues are seen in the future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998905541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998936027","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-998936027","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":998936027,"node_id":"IC_kwDOACaFSM47io3b","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T16:49:14Z","updated_at":"2021-12-21T16:49:14Z","author_association":"CONTRIBUTOR","body":"FYI while looking at #2386, it made me think we need a catch all server utility for external compactions. I think this utility may be a good candidate to fall under that as well. I was thinking maybe we could have an \"ec-admin\" command, similar to the current \"admin\" command.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/998936027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999015875","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999015875","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999015875,"node_id":"IC_kwDOACaFSM47i8XD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T18:52:35Z","updated_at":"2021-12-21T18:52:35Z","author_association":"CONTRIBUTOR","body":"#2305 updates Accumulo 2.1.0 to use [micrometer](https://micrometer.io/). There is an option to include [JVM](https://micrometer.io/docs/ref/jvm) metrics, but I don't think it will include the information requested. It appears that something like this was [previously](https://github.com/micrometer-metrics/micrometer/issues/1024) requested of Micrometer, but the issue is still open.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999015875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999025811","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999025811","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999025811,"node_id":"IC_kwDOACaFSM47i-yT","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:09:40Z","updated_at":"2021-12-21T19:09:40Z","author_association":"CONTRIBUTOR","body":"jvm metrics would not provide the detail that this is asking for.  If I recall past discussions there have been asks to provide metrics for such things as being able to measure (at a high level)\r\n- cpu and I/O with / without encryption\r\n- cpu and I/O with alternate compute resource (GPU?)\r\n- being able to measure impact a larger tserver or multiple tservers on a node are used.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999025811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999028061","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999028061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999028061,"node_id":"IC_kwDOACaFSM47i_Vd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:13:35Z","updated_at":"2021-12-21T19:13:35Z","author_association":"CONTRIBUTOR","body":"But *this* issue is for\r\n\r\n> This issue is to capture the methods or threads that are most likely to have high CPU or high I/O utilization.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999028061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999033745","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-999033745","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":999033745,"node_id":"IC_kwDOACaFSM47jAuR","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:22:19Z","updated_at":"2021-12-21T19:22:19Z","author_association":"MEMBER","body":"> FYI while looking at #2386, it made me think we need a catch all server utility for external compactions. I think this utility may be a good candidate to fall under that as well. I was thinking maybe we could have an \"ec-admin\" command, similar to the current \"admin\" command.\r\n\r\nDo you think a follow on ticket should be created for that? Also, would this tool fall under an \"ec-admin\" command even though it checks both internal and external compactions?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999033745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999035430","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999035430","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999035430,"node_id":"IC_kwDOACaFSM47jBIm","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:24:58Z","updated_at":"2021-12-21T19:24:58Z","author_association":"CONTRIBUTOR","body":"The threads or methods used in the high level use cases I mentioned would be the items to instrument with metrics so that info could be derived in production. (Well, in  theory)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999035430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999037427","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-999037427","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":999037427,"node_id":"IC_kwDOACaFSM47jBnz","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:28:14Z","updated_at":"2021-12-21T19:28:14Z","author_association":"CONTRIBUTOR","body":"> Do you think a follow on ticket should be created for that? \r\n\r\nI may just do it to close #2386\r\n\r\n> Also, would this tool fall under an \"ec-admin\" command even though it checks both internal and external compactions?\r\n\r\nThat is a good point. If a user can make use of \"checkCompactionConfig\" without using external compactions, then it should probably hang off of the main command, with other generic server utilities.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999037427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999044155","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999044155","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999044155,"node_id":"IC_kwDOACaFSM47jDQ7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:39:57Z","updated_at":"2021-12-21T19:39:57Z","author_association":"CONTRIBUTOR","body":"You can use OS measurement tools to get IO statistics for single drives, but how do you measure IO usage of a Java application from within the application? You could, in theory, get the cpu time of the thread at the beginning and end of a method and report the difference. I'm not sure how costly that would be.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999044155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999047929","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999047929","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999047929,"node_id":"IC_kwDOACaFSM47jEL5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T19:44:20Z","updated_at":"2021-12-21T19:44:20Z","author_association":"CONTRIBUTOR","body":"Regarding IO, in the HDFS case, you should be able to get metrics from Hadoop itself. Example: https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/cm_metrics_datanode.html","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999047929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999570275","html_url":"https://github.com/apache/accumulo/pull/2398#issuecomment-999570275","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2398","id":999570275,"node_id":"IC_kwDOACaFSM47lDtj","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-22T13:17:28Z","updated_at":"2021-12-22T13:17:28Z","author_association":"CONTRIBUTOR","body":"This one will probably need to be added to KeywordStartIT as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999570275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999615807","html_url":"https://github.com/apache/accumulo/pull/2399#issuecomment-999615807","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2399","id":999615807,"node_id":"IC_kwDOACaFSM47lO0_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-22T14:25:49Z","updated_at":"2021-12-22T14:25:49Z","author_association":"CONTRIBUTOR","body":"@milleruntime  - KeywordStartIT is up to date in both PRs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999615807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999719164","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-999719164","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":999719164,"node_id":"IC_kwDOACaFSM47loD8","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-22T16:46:44Z","updated_at":"2021-12-22T16:46:44Z","author_association":"MEMBER","body":"I think these changes are finished for now and ready for review. Here is an example of the output:\r\n<details open>\r\n<summary>Input file</summary>\r\n\r\n```\r\ntserver.compaction.major.service.cs1.planner=org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner \r\ntserver.compaction.major.service.cs1.planner.opts.executors=\\\r\n[{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":8},\\\r\n{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":4},\\\r\n{\"name\":\"large\",\"type\":\"internal\",\"numThreads\":2}]\r\ntserver.compaction.major.service.cs2.planner=org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner \r\ntserver.compaction.major.service.cs2.planner.opts.executors=\\\r\n[{\"name\":\"small\",\"type\":\"internal\",\"maxSize\":\"16M\",\"numThreads\":7},\\\r\n{\"name\":\"medium\",\"type\":\"internal\",\"maxSize\":\"128M\",\"numThreads\":5},\\\r\n{\"name\":\"large\",\"type\":\"external\",\"queue\":\"dcq1\"}]\r\n```\r\n\r\n</details>  \r\n<details open>\r\n<summary>Output from tool</summary>\r\n\r\n```\r\ndgarguilo@thor:~/github/accumulo$ accumulo check-compaction-config ~/Desktop/example.properties \r\n2021-12-22T11:21:23,366 [conf.CheckCompactionConfig] INFO : Service id: cs1, planner class:org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner\r\n2021-12-22T11:21:23,409 [conf.CheckCompactionConfig] INFO : Compaction service 'cs1' requested creation of thread pool 'i.cs1.small' with 8 threads.\r\n2021-12-22T11:21:23,409 [conf.CheckCompactionConfig] INFO : Compaction service 'cs1' requested creation of thread pool 'i.cs1.large' with 2 threads.\r\n2021-12-22T11:21:23,409 [conf.CheckCompactionConfig] INFO : Compaction service 'cs1' requested creation of thread pool 'i.cs1.medium' with 4 threads.\r\n2021-12-22T11:21:23,409 [conf.CheckCompactionConfig] INFO : Service id: default, planner class:org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner\r\n2021-12-22T11:21:23,411 [conf.CheckCompactionConfig] INFO : Compaction service 'default' requested creation of thread pool 'i.default.small' with 2 threads.\r\n2021-12-22T11:21:23,411 [conf.CheckCompactionConfig] INFO : Compaction service 'default' requested creation of thread pool 'i.default.medium' with 2 threads.\r\n2021-12-22T11:21:23,411 [conf.CheckCompactionConfig] INFO : Compaction service 'default' requested creation of thread pool 'i.default.large' with 2 threads.\r\n2021-12-22T11:21:23,411 [conf.CheckCompactionConfig] INFO : Service id: cs2, planner class:org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner\r\n2021-12-22T11:21:23,413 [conf.CheckCompactionConfig] INFO : Compaction service 'cs2' requested creation of thread pool 'i.cs2.medium' with 5 threads.\r\n2021-12-22T11:21:23,413 [conf.CheckCompactionConfig] INFO : Compaction service 'cs2' requested creation of thread pool 'i.cs2.small' with 7 threads.\r\n2021-12-22T11:21:23,413 [conf.CheckCompactionConfig] INFO : Compaction service 'cs2' requested with external execution queue 'e.dcq1'\r\n2021-12-22T11:21:23,413 [conf.CheckCompactionConfig] INFO : Service id: meta, planner class:org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner\r\n2021-12-22T11:21:23,414 [conf.CheckCompactionConfig] INFO : Compaction service 'meta' requested creation of thread pool 'i.meta.huge' with 2 threads.\r\n2021-12-22T11:21:23,414 [conf.CheckCompactionConfig] INFO : Compaction service 'meta' requested creation of thread pool 'i.meta.small' with 2 threads.\r\n2021-12-22T11:21:23,414 [conf.CheckCompactionConfig] INFO : Service id: root, planner class:org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner\r\n2021-12-22T11:21:23,415 [conf.CheckCompactionConfig] INFO : Compaction service 'root' requested creation of thread pool 'i.root.small' with 1 threads.\r\n2021-12-22T11:21:23,415 [conf.CheckCompactionConfig] INFO : Compaction service 'root' requested creation of thread pool 'i.root.huge' with 1 threads.\r\n2021-12-22T11:21:23,415 [conf.CheckCompactionConfig] INFO : Properties file has passed all checks.\r\n\r\n```\r\n\r\n</details>  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999719164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999780078","html_url":"https://github.com/apache/accumulo/issues/1146#issuecomment-999780078","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1146","id":999780078,"node_id":"IC_kwDOACaFSM47l27u","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-22T18:27:09Z","updated_at":"2021-12-22T18:27:09Z","author_association":"CONTRIBUTOR","body":"It looks like [RateLimitedInputStream](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/file/streams/RateLimitedInputStream.java) wraps the `FSDataInputStream` at [CacheableBlockFile.Reader](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/file/blockfile/impl/CachableBlockFile.java#L162). We *could* emit a metric there in the `RateLimitedInputStream` methods to indicate the length of time it takes to seek or read from the underlying HDFS file InputStream. This is an example of something that we *could* do, but I'm not sure of how much value it will be.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/999780078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1002104314","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-1002104314","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":1002104314,"node_id":"IC_kwDOACaFSM47uuX6","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-28T13:24:13Z","updated_at":"2021-12-28T13:24:13Z","author_association":"CONTRIBUTOR","body":":+1:\n\nOn Tue, Dec 28, 2021 at 8:17 AM Mike Miller ***@***.***>\nwrote:\n\n> ***@***.**** approved this pull request.\n>\n> There are some nice general improvements to compaction code in this PR, in\n> addition to creating the validation tool. Looks good!\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/pull/2345#pullrequestreview-840880517>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSV4LXFS4KZRHH7XMLELUTG2IBANCNFSM5HJ3WDIA>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1002104314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1002257420","html_url":"https://github.com/apache/accumulo/issues/1733#issuecomment-1002257420","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1733","id":1002257420,"node_id":"IC_kwDOACaFSM47vTwM","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-28T19:49:14Z","updated_at":"2021-12-28T19:49:14Z","author_association":"MEMBER","body":"Looks like this can be closed since the changes made in #2259 removed this file.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1002257420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1002652154","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-1002652154","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":1002652154,"node_id":"IC_kwDOACaFSM47w0H6","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-29T15:34:21Z","updated_at":"2021-12-29T15:34:21Z","author_association":"CONTRIBUTOR","body":":+1:\n\nOn Wed, Dec 29, 2021 at 10:32 AM Mike Miller ***@***.***>\nwrote:\n\n> ***@***.**** commented on this pull request.\n> ------------------------------\n>\n> In\n> core/src/main/java/org/apache/accumulo/core/util/compaction/CompactionServicesConfig.java\n> <https://github.com/apache/accumulo/pull/2345#discussion_r776381379>:\n>\n> > +package org.apache.accumulo.core.util.compaction;\n> +\n> +import java.util.HashMap;\n> +import java.util.Map;\n> +import java.util.Objects;\n> +import java.util.function.Consumer;\n> +\n> +import org.apache.accumulo.core.conf.AccumuloConfiguration;\n> +import org.apache.accumulo.core.conf.ConfigurationTypeHelper;\n> +import org.apache.accumulo.core.conf.Property;\n> +import org.apache.accumulo.core.spi.compaction.CompactionServiceId;\n> +import org.apache.accumulo.core.spi.compaction.DefaultCompactionPlanner;\n> +\n> +import com.google.common.collect.Sets;\n> +\n> +public class CompactionServicesConfig {\n>\n> LGTM\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/pull/2345#discussion_r776381379>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSV3RY2WHQWRUH7RG7FLUTMSYVANCNFSM5HJ3WDIA>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n> You are receiving this because you commented.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1002652154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1003114362","html_url":"https://github.com/apache/accumulo/pull/2403#issuecomment-1003114362","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2403","id":1003114362,"node_id":"IC_kwDOACaFSM47yk96","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-30T17:14:18Z","updated_at":"2021-12-30T17:14:18Z","author_association":"MEMBER","body":"> * Moves the logic for parsing progress from running compactions to core so that\r\n>       server utilities can get the progress as well\r\n\r\nWere there any current server utilities that would benefit from this information or are these changes mostly to make the information more accessible for future changes?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1003114362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1003132697","html_url":"https://github.com/apache/accumulo/issues/2404#issuecomment-1003132697","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2404","id":1003132697,"node_id":"IC_kwDOACaFSM47ypcZ","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-30T18:11:45Z","updated_at":"2021-12-30T18:11:45Z","author_association":"MEMBER","body":"For context, the following is the portion of code in question:\r\nhttps://github.com/apache/accumulo/blob/1687ede211888da0dcd40323c894eff0e00fce26/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#L1423-L1429\r\nSpecifically, the question is, what should be done instead of/in addition to the error log here?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1003132697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1003150803","html_url":"https://github.com/apache/accumulo/issues/2402#issuecomment-1003150803","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2402","id":1003150803,"node_id":"IC_kwDOACaFSM47yt3T","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-30T19:12:52Z","updated_at":"2021-12-30T19:12:52Z","author_association":"MEMBER","body":"One alternate name for \"BatchScanner\" was \"ParallelScanner\". That would be a big change, but it would make more sense to leave \"setBatchSize\" with the current name, if the class was named \"ParallelScanner\".","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1003150803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004047759","html_url":"https://github.com/apache/accumulo/pull/2403#issuecomment-1004047759","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2403","id":1004047759,"node_id":"IC_kwDOACaFSM472I2P","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T12:06:34Z","updated_at":"2022-01-03T12:06:34Z","author_association":"CONTRIBUTOR","body":"> > * Moves the logic for parsing progress from running compactions to core so that\r\n> >   server utilities can get the progress as well\r\n> \r\n> Were there any current server utilities that would benefit from this information or are these changes mostly to make the information more accessible for future changes?\r\n\r\nThe `listcompactions` shell command is the only one that comes to mind. But I was planning on creating a new `ec-admin` command to hold all the commands for external compactions, to include listing running compactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004047759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004089192","html_url":"https://github.com/apache/accumulo/pull/2403#issuecomment-1004089192","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2403","id":1004089192,"node_id":"IC_kwDOACaFSM472S9o","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T13:23:23Z","updated_at":"2022-01-03T13:23:23Z","author_association":"CONTRIBUTOR","body":"I am going to merge this so I can continue working on related changes. Let me know if there was anything else you saw.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004089192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004167687","html_url":"https://github.com/apache/accumulo/pull/2345#issuecomment-1004167687","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2345","id":1004167687,"node_id":"IC_kwDOACaFSM472mIH","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T15:26:04Z","updated_at":"2022-01-03T15:26:04Z","author_association":"CONTRIBUTOR","body":":+1:\n\nOn Mon, Jan 3, 2022 at 9:21 AM Dom G. ***@***.***> wrote:\n\n> Merged #2345 <https://github.com/apache/accumulo/pull/2345> into main.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/pull/2345#event-5835538832>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSV5TAQGDNU23SXXHLLTUUGWHNANCNFSM5HJ3WDIA>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n> You are receiving this because you commented.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004167687/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004290831","html_url":"https://github.com/apache/accumulo/issues/2406#issuecomment-1004290831","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2406","id":1004290831,"node_id":"IC_kwDOACaFSM473EMP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T18:59:15Z","updated_at":"2022-01-03T18:59:15Z","author_association":"CONTRIBUTOR","body":"So, this test runs with MAC and configures Accumulo to send metrics over UDP using the StatsD protocol. All of the Accumulo server processes send the metrics to a StatsD sink running in the IT process. I'm wondering if there was an issue with MAC in this case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004290831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004307393","html_url":"https://github.com/apache/accumulo/pull/2407#issuecomment-1004307393","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2407","id":1004307393,"node_id":"IC_kwDOACaFSM473IPB","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T19:28:30Z","updated_at":"2022-01-03T19:28:30Z","author_association":"CONTRIBUTOR","body":":+1: to 'constructible'\n\nOn Mon, Jan 3, 2022 at 2:23 PM Dom G. ***@***.***> wrote:\n\n> ***@***.**** commented on this pull request.\n> ------------------------------\n>\n> In\n> start/src/main/java/org/apache/accumulo/start/spi/KeywordExecutable.java\n> <https://github.com/apache/accumulo/pull/2407#discussion_r777661535>:\n>\n> > @@ -28,7 +28,7 @@\n>   * All implementing classes who have an entry in\n>   * ***@***.*** org.apache.accumulo.start.spi.KeywordExecutable} on the classpath will\n>   * be constructed by the ***@***.*** ServiceLoader}, so they should be lightweight and quickly\n> - * constructible with a mandatory no-argument constructor. Because of this, implementing classes\n>\n> Looks like its debatable but \"constructible\" might be the correct US-en\n> spelling.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/pull/2407#pullrequestreview-842982779>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSV2TNXOWHEURZV7SWQ3UUHZUBANCNFSM5LFZZUWA>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004307393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004403860","html_url":"https://github.com/apache/accumulo/pull/2394#issuecomment-1004403860","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2394","id":1004403860,"node_id":"IC_kwDOACaFSM473fyU","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T22:34:34Z","updated_at":"2022-01-03T22:34:34Z","author_association":"CONTRIBUTOR","body":"> Did you consider using a MuliMap here? It looks like it might make for a more complicated stream so not sure that its the best option but thought I would mention it just in case.\r\n\r\n@DomGarguilo  no I did not consider that.  I used the java stream library to group the data that code produced a Map of List.  So for that case I would stick w/ whatever the stream lib produces when grouping data. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1004403860/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005181436","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005181436","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005181436,"node_id":"IC_kwDOACaFSM476dn8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-04T21:24:57Z","updated_at":"2022-01-04T21:24:57Z","author_association":"CONTRIBUTOR","body":"Checkout `LateLastContactIT` cause it starts its own `ZombieTServer` so your verify method may not work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005181436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005184202","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005184202","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005184202,"node_id":"IC_kwDOACaFSM476eTK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-04T21:29:24Z","updated_at":"2022-01-04T21:29:24Z","author_association":"CONTRIBUTOR","body":"Another check that you may be able to use is `InstanceOperations.ping()`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005184202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005648699","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005648699","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005648699,"node_id":"IC_kwDOACaFSM478Ps7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T12:35:12Z","updated_at":"2022-01-05T12:35:12Z","author_association":"CONTRIBUTOR","body":"I ran all of the ITs yesterday using GitHub Actions. All succeeded except one in ExternalCompaction3_IT that timed out during a restart of the CompactionCoordinator. The test passes locally.\r\n\r\n> Another check that you may be able to use is InstanceOperations.ping()\r\n\r\nI'm wondering if I should use `InstanceOperations.waitForBalance()` instead. This would mean that the Manager and TabletServers are  up, communicating with each other, and the `root` and `metadata` tables are hosted.\r\n\r\nAlso, I looked at the ITs that you mentioned. In most cases MAC is started and then these tests are stopping and starting single processes (Monitor, Manager, etc). Calling `verifyUp` after each one may be pretty costly in terms of time and may not provide much value given that the tests are currently succeeding. I think the current implementation meets the initial ask of failing if MAC fails to start at the beginning of the test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005648699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005671230","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005671230","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005671230,"node_id":"IC_kwDOACaFSM478VM-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T13:08:42Z","updated_at":"2022-01-05T13:08:42Z","author_association":"CONTRIBUTOR","body":"I added the following to the bottom of `verifyUp`:\r\n\r\n```\r\n    try (AccumuloClient client = Accumulo.newClient().from(getClientProperties()).build()) {\r\n      client.instanceOperations().waitForBalance();\r\n    }\r\n```\r\n\r\nand it causes this:\r\n\r\n```\r\n...\r\nCaused by: org.apache.accumulo.fate.zookeeper.ZooSession$ZooSessionShutdownException: The Accumulo singleton that that tracks zookeeper session is disabled.  This is likely caused by all AccumuloClients being closed or garbage collected.\r\n\tat org.apache.accumulo.fate.zookeeper.ZooSession.getSession(ZooSession.java:195)\r\n\tat org.apache.accumulo.fate.zookeeper.ZooSession.getAuthenticatedSession(ZooSession.java:184)\r\n\tat org.apache.accumulo.fate.zookeeper.ZooReaderWriter.getZooKeeper(ZooReaderWriter.java:58)\r\n\tat org.apache.accumulo.fate.zookeeper.ZooReader.retryLoopMutator(ZooReader.java:165)\r\n\tat org.apache.accumulo.fate.zookeeper.ZooReader.retryLoop(ZooReader.java:144)\r\n\tat org.apache.accumulo.fate.zookeeper.ZooReader.retryLoop(ZooReader.java:131)\r\n\tat org.apache.accumulo.fate.zookeeper.ZooReader.getChildren(ZooReader.java:87)\r\n\tat org.apache.accumulo.miniclusterImpl.MiniAccumuloClusterImpl.verifyUp(MiniAccumuloClusterImpl.java:640)\r\n\tat org.apache.accumulo.miniclusterImpl.MiniAccumuloClusterImpl.start(MiniAccumuloClusterImpl.java:606)\r\n\t... 31 more\r\n```\r\n\r\nI'm not sure I understand why.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005671230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005672375","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005672375","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005672375,"node_id":"IC_kwDOACaFSM478Ve3","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T13:10:14Z","updated_at":"2022-01-05T13:10:14Z","author_association":"CONTRIBUTOR","body":"> I ran all of the ITs yesterday using GitHub Actions. All succeeded except one in ExternalCompaction3_IT that timed out during a restart of the CompactionCoordinator. The test passes locally.\r\n> \r\n> > Another check that you may be able to use is InstanceOperations.ping()\r\n> \r\n> I'm wondering if I should use `InstanceOperations.waitForBalance()` instead. This would mean that the Manager and TabletServers are up, communicating with each other, and the `root` and `metadata` tables are hosted.\r\n\r\nThat is a good one too but would definitely add overhead time to the tests that we might not want.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005672375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005676069","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005676069","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005676069,"node_id":"IC_kwDOACaFSM478WYl","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T13:15:19Z","updated_at":"2022-01-05T13:15:19Z","author_association":"CONTRIBUTOR","body":"> That is a good one too but would definitely add overhead time to the tests that we might not want.\r\n\r\nOk, then I don't think I have any other changes for this PR at this time.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005676069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005681576","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005681576","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005681576,"node_id":"IC_kwDOACaFSM478Xuo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T13:23:11Z","updated_at":"2022-01-05T13:23:11Z","author_association":"CONTRIBUTOR","body":"Were you able to reproduce an IT failure due to missing native map?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005681576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005687820","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005687820","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005687820,"node_id":"IC_kwDOACaFSM478ZQM","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T13:31:50Z","updated_at":"2022-01-05T13:31:50Z","author_association":"CONTRIBUTOR","body":"Re missing native map - not sure if it applies in this case, but if you have a build fail and then try to run mini it will fail because the native map is missing,  It has to do with the build order / dependencies and  the desire to make sure mini is using native maps during testing.\r\n\r\nIf I recall, to reproduce - run a build with mvn that fails because of  something like a check-style or formatting error. Run mini in the ide - it will build and run, but not have the native maps and the error shows up in a tserver log, \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005687820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005859037","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1005859037","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1005859037,"node_id":"IC_kwDOACaFSM479DDd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T16:06:34Z","updated_at":"2022-01-05T16:06:34Z","author_association":"CONTRIBUTOR","body":"Ran `mvn clean` on command line, then attempted to run `ExternalCompaction1_IT.testExternalCompaction()` in Eclipse. It failed with the following error in 18s:\r\n\r\n```\r\njava.lang.RuntimeException: Timed out waiting for TServer information in ZooKeeper\r\n\tat org.apache.accumulo.miniclusterImpl.MiniAccumuloClusterImpl.verifyUp(MiniAccumuloClusterImpl.java:668)\r\n\tat org.apache.accumulo.miniclusterImpl.MiniAccumuloClusterImpl.start(MiniAccumuloClusterImpl.java:605)\r\n\tat org.apache.accumulo.harness.AccumuloClusterHarness.setupCluster(AccumuloClusterHarness.java:167)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nBoth TServers logs showed that they failed to load the native map and exited:\r\n\r\n```\r\n2022-01-05T16:02:50,957 [tserver.NativeMap] ERROR: FATAL! Accumulo native libraries were requested but could not be be loaded. Either set 'tserver.memory.maps.native.enabled' to false in accumulo.properties or make sure native libraries are created in directories set by the JVM system property 'accumulo.native.lib.path' in accumulo-env.sh!\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1005859037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006026333","html_url":"https://github.com/apache/accumulo/pull/2409#issuecomment-1006026333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2409","id":1006026333,"node_id":"IC_kwDOACaFSM479r5d","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T19:46:22Z","updated_at":"2022-01-05T19:46:22Z","author_association":"MEMBER","body":"When this says \"let it fail later\", does that mean stay in the retry loop and fail if all retries are exhausted? Or is it expected to fail somewhere else?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006026333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006030898","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1006030898","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1006030898,"node_id":"IC_kwDOACaFSM479tAy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T19:53:28Z","updated_at":"2022-01-05T19:53:28Z","author_association":"MEMBER","body":"FWIW, our multi-module build creates the native maps in a module that the test module depends on. So, the native maps are always built and ready for the ITs that use them in the test module when building from the command-line. However, Eclipse (and likely other IDEs) don't execute all the build tasks in the native map module when building. Specifically, they don't execute the `exec-maven-plugin` that calls `make`, because the IDE doesn't know how to execute the `exec-maven-plugin`, as it doesn't map to an action that the IDE can do. So, you have to do something like `mvn package -DskipTests` to ensure `exec-maven-plugin` builds the native maps in the `server/native` module, and then load the project into Eclipse. At that point, the ITs should be able to find the native maps without any problems. This is just a quirk of how the IDE can't do everything the command-line can.\r\n\r\nIn any case, checking that the processes are up is a nice fast-fail, so the test doesn't hang in the IDE because of this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006030898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006066945","html_url":"https://github.com/apache/accumulo/pull/2409#issuecomment-1006066945","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2409","id":1006066945,"node_id":"IC_kwDOACaFSM47910B","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-05T20:50:09Z","updated_at":"2022-01-05T20:50:09Z","author_association":"CONTRIBUTOR","body":"> When this says \"let it fail later\", does that mean stay in the retry loop and fail if all retries are exhausted?\r\n\r\nYes, exhaust the retries, don't fail on the first attempt.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006066945/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006371786","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1006371786","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1006371786,"node_id":"IC_kwDOACaFSM47_APK","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-06T08:27:34Z","updated_at":"2022-01-06T08:28:14Z","author_association":"MEMBER","body":"@dlmarion This change broke a bunch of ITs, and the numerous crashing ITs caused my Jenkins server to fall over from OOM due to zombie background MAC processes:\r\n\r\n```\r\n139 Failed Tests:\r\n    AccumuloFileOutputFormatIT.testRealWrite after 7.9 sec\r\n    AccumuloFileOutputFormatIT.writeBadVisibility after 8.1 sec\r\n    AccumuloInputFormatIT.testCorrectRangeInputSplits after 8 sec\r\n    AccumuloInputFormatIT.testSample after 8 sec\r\n    AccumuloOutputFormatIT.testMapred after 6.8 sec\r\n    AccumuloFileOutputFormatIT.testRealWrite after 7.9 sec\r\n    AccumuloFileOutputFormatIT.writeBadVisibility after 7.9 sec\r\n    AccumuloInputFormatIT.testCorrectRangeInputSplits after 7 sec\r\n    AccumuloInputFormatIT.testMapWithBatchScanner after 6.8 sec\r\n    AccumuloInputFormatIT.testGetSplits after 6.9 sec\r\n    AccumuloInputFormatIT.testSample after 7 sec\r\n    AccumuloInputFormatIT.testPartialInputSplitDelegationToConfiguration after 6.8 sec\r\n    AuditMessageIT.testDataOperationsAudits after 6.9 sec\r\n    AuditMessageIT.testImportExportOperationsAudits after 7 sec\r\n    AuditMessageIT.testDeniedAudits after 6.8 sec\r\n    AuditMessageIT.testTableOperationsAudits after 6.9 sec\r\n    AuditMessageIT.testUserOperationsAudits after 6.8 sec\r\n    BatchWriterInTabletServerIT.testNormalWrite after 8.1 sec\r\n    ClientSideIteratorIT.testIntersect after 7.9 sec\r\n    CloneIT.testClonedMarker after 7.9 sec\r\n    CloneIT.testFilesChange after 7.9 sec\r\n    CloneIT.testNoFiles after 8.1 sec\r\n    CloneIT.testSplit1 after 7.9 sec\r\n    CloneIT.testSplit2 after 7.9 sec\r\n    CloneIT.testSplit3 after 8.1 sec\r\n    ExistingMacIT.testExistingInstance after 34 sec\r\n    LargeSplitRowIT.automaticSplitLater after 6.9 sec\r\n    LargeSplitRowIT.automaticSplitWithGaps after 6.8 sec\r\n    LargeSplitRowIT.automaticSplitWith250Same after 6.9 sec\r\n    LargeSplitRowIT.automaticSplitWithoutGaps after 6.8 sec\r\n    MetaSplitIT.testRootTableSplit after 7.9 sec\r\n    MetaSplitIT.testMetadataTableSplit after 7.8 sec\r\n    MissingWalHeaderCompletesRecoveryIT.testPartialHeaderWalRecoveryCompletes after 7.7 sec\r\n    MultiTableBatchWriterIT.testOfflineTable after 8.1 sec\r\n    MultiTableBatchWriterIT.testTableRenameDataValidation after 8 sec\r\n    MultiT…\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006371786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006436032","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1006436032","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1006436032,"node_id":"IC_kwDOACaFSM47_P7A","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-06T10:06:41Z","updated_at":"2022-01-06T10:06:41Z","author_association":"MEMBER","body":"Fixed the issue identified above in #2410 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006436032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006637416","html_url":"https://github.com/apache/accumulo/pull/2408#issuecomment-1006637416","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2408","id":1006637416,"node_id":"IC_kwDOACaFSM48ABFo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-06T14:33:13Z","updated_at":"2022-01-06T14:33:13Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - That's interesting. A few of the tests passed locally and all but two passed when run using GitHub Actions. I wonder what the difference is/was. Anyway, thanks for the assist. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006637416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006732080","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-1006732080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":1006732080,"node_id":"IC_kwDOACaFSM48AYMw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-06T16:35:51Z","updated_at":"2022-01-06T16:35:51Z","author_association":"CONTRIBUTOR","body":"Any progress on this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006732080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006958926","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-1006958926","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":1006958926,"node_id":"IC_kwDOACaFSM48BPlO","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-06T21:48:27Z","updated_at":"2022-01-06T21:48:27Z","author_association":"MEMBER","body":"> Any progress on this?\r\n\r\nStill working on it. Sorry.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1006958926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007659778","html_url":"https://github.com/apache/accumulo/pull/2410#issuecomment-1007659778","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2410","id":1007659778,"node_id":"IC_kwDOACaFSM48D6sC","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T19:02:29Z","updated_at":"2022-01-07T19:02:29Z","author_association":"MEMBER","body":"@dlmarion Apparently, this fixed it for most of the tests, but there's at least one test that this breaks that I'll have to figure out: AccumuloClientIT.testClose asserts that we're in a CLIENT mode, but MiniAccumuloCluster specifically uses SERVER mode. The test passed before because mini lazily created a ServerContext that put it in SERVER mode. With these changes, the ServerContext is created sooner than it would have been.\r\n\r\nThere's a few other tests that failed as a result of my fix as well (not anywhere near the 139 that were failing before, though), but those could just be flakes. I'd have to investigate. Including the one I already mentioned, the list is:\r\n\r\n```\r\norg.apache.accumulo.test.functional.AccumuloClientIT.testClose\r\norg.apache.accumulo.test.functional.CleanUpIT.run\r\norg.apache.accumulo.test.functional.DurabilityIT.testIncreaseDurability\r\norg.apache.accumulo.test.functional.LateLastContactIT.test\r\norg.apache.accumulo.test.functional.ReadWriteIT.sunnyDay\r\norg.apache.accumulo.test.functional.RestartIT.restartManagerRecovery\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007659778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007723004","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1007723004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1007723004,"node_id":"IC_kwDOACaFSM48EKH8","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T20:34:51Z","updated_at":"2022-01-07T20:34:51Z","author_association":"CONTRIBUTOR","body":"This is essentially a \"read only\" tserver except that this process would not be tied to specific tablets.  I love the idea of separating the scans running iterators that are on the more expensive side into separate processes to avoid churn within the accumulo tservers.  The concept is relatively simple.  The trick is doing load balancing appropriately.\r\n\r\nOn thought is to allow something like Kubernetes to manage instances of these and push the load balancing to an ingress controller.  Something simple baked into accumulo would be great, but appropriate hooks to determine the health and load on one of these processes could be useful.\r\n\r\nAn additional thought to keep in mind is the ability to embed this server process in something else (e.g. a webserver or perhaps a separate microservice).  Being able to run standalone or embedded would be desirable.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007723004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007769803","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1007769803","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1007769803,"node_id":"IC_kwDOACaFSM48EVjL","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T21:59:11Z","updated_at":"2022-01-07T21:59:11Z","author_association":"CONTRIBUTOR","body":"I pushed some changes to my fork to show others what I'm thinking about. The code in the branch builds, but the ScanServer would not work as is (it would exit immediately). But it's the start of a potential implementation.\r\n\r\nhttps://github.com/dlmarion/accumulo/commit/7df6929cffcc7aa6340c45c9be503347d5d3a226\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007769803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007790437","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1007790437","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1007790437,"node_id":"IC_kwDOACaFSM48Eall","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T22:30:53Z","updated_at":"2022-01-07T22:30:53Z","author_association":"MEMBER","body":"Is this basically creating servers that act as \"clients\" under today's design, but doing client-side iterators? What's stopping users from implementing something like that on top of Accumulo today, without baking the complexity directly into Accumulo?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007790437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007845145","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1007845145","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1007845145,"node_id":"IC_kwDOACaFSM48En8Z","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-08T00:45:29Z","updated_at":"2022-01-08T00:45:29Z","author_association":"CONTRIBUTOR","body":"> Is this basically creating servers that act as \"clients\" under today's design, but doing client-side iterators?\r\n\r\nI'm not quite sure what you mean by this, but I think the answer is no. I'm not sure if you looked at the referenced commit, but if you look at the [ScanServer](https://github.com/dlmarion/accumulo/commit/7df6929cffcc7aa6340c45c9be503347d5d3a226#diff-e3f63597c5c63a83f84e46e17cf0740d4178372810b2a0e5fb8df7a37ee07d15) class in that commit you will see that it uses the same server side APIs that exist today to perform scans. It would be driven by a Scanner or BatchScanner on the client side.\r\n\r\n> What's stopping users from implementing something like that on top of Accumulo today, without baking the complexity directly into Accumulo?\r\n\r\nNothing, except that it would be brittle and they would have to come up with their own client and server-side implementations. I don't think that they would be able to easily extend TabletServer like I have done, and for sure that they would not be able to change the internals of the Accumulo client to use the new server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1007845145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009273719","html_url":"https://github.com/apache/accumulo/pull/2410#issuecomment-1009273719","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2410","id":1009273719,"node_id":"IC_kwDOACaFSM48KEt3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T19:32:57Z","updated_at":"2022-01-10T19:32:57Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I removed the use of ZooReaderWriter from MiniAccumuloClusterImpl.verifyUp. Instead, it uses the Native ZK client. Change [here](https://github.com/dlmarion/accumulo/commit/d514b7be3e6924ed23a618e36657989f9eaf340b). Running AccumuloClientIT on the command line yeilds:\r\n```\r\njava.lang.AssertionError: expected:<CLIENT> but was:<SERVER>\r\n\tat org.junit.Assert.fail(Assert.java:89)\r\n\tat org.junit.Assert.failNotEquals(Assert.java:835)\r\n\tat org.junit.Assert.assertEquals(Assert.java:120)\r\n\tat org.junit.Assert.assertEquals(Assert.java:146)\r\n\tat org.apache.accumulo.test.functional.AccumuloClientIT.testClose(AccumuloClientIT.java:191)\r\n```\r\n\r\nI'm not sure what's going on here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009273719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009309410","html_url":"https://github.com/apache/accumulo/pull/2410#issuecomment-1009309410","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2410","id":1009309410,"node_id":"IC_kwDOACaFSM48KNbi","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T20:20:32Z","updated_at":"2022-01-10T20:21:47Z","author_association":"MEMBER","body":"> @ctubbsii - I removed the use of ZooReaderWriter from MiniAccumuloClusterImpl.verifyUp. Instead, it uses the Native ZK client. Change [here](https://github.com/dlmarion/accumulo/commit/d514b7be3e6924ed23a618e36657989f9eaf340b). Running AccumuloClientIT on the command line yeilds:\r\n> \r\n> ```\r\n> java.lang.AssertionError: expected:<CLIENT> but was:<SERVER>\r\n> \tat org.junit.Assert.fail(Assert.java:89)\r\n> \tat org.junit.Assert.failNotEquals(Assert.java:835)\r\n> \tat org.junit.Assert.assertEquals(Assert.java:120)\r\n> \tat org.junit.Assert.assertEquals(Assert.java:146)\r\n> \tat org.apache.accumulo.test.functional.AccumuloClientIT.testClose(AccumuloClientIT.java:191)\r\n> ```\r\n> \r\n> I'm not sure what's going on here.\r\n\r\nThe call to `getServerContext` is the problematic part. You avoided it by removing my `getServerContext().getZooReaderWriter()` and `getServerContext().getZooKeeperRoot()`, but then you added it back in for `getServerContext().getConfiguration()` and `getServerContext().getInstanceID()`.\r\n\r\nIf the solution is to use ZooKeeper's API directly instead of our own, then we have to do it using the config for MiniAccumuloClusterImpl without instantiating the ServerContext because that's the part that sets the singleton mode to SERVER. This is timing based anyway... because for most tests, `getServerContext()` will eventually be called. We just can't have it called before `verifyUp()` because some of the tests check for the singleton mode (haven't looked into why).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009309410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009310709","html_url":"https://github.com/apache/accumulo/pull/2410#issuecomment-1009310709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2410","id":1009310709,"node_id":"IC_kwDOACaFSM48KNv1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T20:22:09Z","updated_at":"2022-01-10T20:22:09Z","author_association":"CONTRIBUTOR","body":"> The call to getServerContext is the problematic part.\r\n\r\nI just found that out by running a test in the debugger with a watch set on the SingletonManager.mode. I think I have the fix, buiding now and then going to kick off an IT run in Github Actions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009310709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009461640","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1009461640","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1009461640,"node_id":"IC_kwDOACaFSM48KymI","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T23:43:40Z","updated_at":"2022-01-10T23:48:33Z","author_association":"CONTRIBUTOR","body":"Thinking about this I had a few random thoughts that I corralled into sections below.\r\n\r\n## User experience\r\n\r\nThinking about one possible user experience is that we have a single API addition that allows scanners to specify their required consistency level.  The default would be immediate consistency, which is the current behavior.  This would make eventually consistent reads something someone would have to intentionally opt into with code changes.  No existing code written against Accumulo would start doing eventually consistent reads all of a sudden.\r\n\r\nMaybe something like the following in ScannerBase, so that the Scanner and BatchScanner will inherit the method.\r\n\r\n```java\r\nclass ScannerBase {\r\n    enum ConsistencyLevel {\r\n        IMMEDIATE,\r\n        EVENTUAL\r\n    }\r\n\r\n    /**\r\n     *  Allows setting a scanners required consistency level. If not set, the default it IMMEDIATE, which means the scanner will always see data written before the scans starts.  When set to EVENTUAL the system may be able to serve scans faster while not guaranteeing data written prior to the scan start is seen. \r\n     */\r\n    void setConsistency(ConsistencyLevel cl);\r\n   \r\n}\r\n```\r\n\r\nMaybe there does not need to be anything in the API other than this.  How eventually consistent reads are handled at run time could possibly all be directed completely by run time configuration.   Thinking that a developer will opt into eventually consistent reads (using the API) and an administrator will tweak how those are executed (through config changes at run time) in order to optimize the scans for their runtime environment.\r\n\r\n## Runtime implementation of eventually consistent reads\r\n\r\nThinking we could possibly have the following high-level concepts for the runtime implementation.\r\n\r\n * **Scan server group** : Zero or more scan servers that serve scans for a named group.  The group could run as an autoscaled pod in kubernetes.  \r\n * **Scan server** : When a scan server is started, its group name can be provided as an argument similar to how compactors are started with a queue name.  This scan server will serve eventually consistent reads for tablets.\r\n * **Table to scan group mapping** : configuration that maps Accumulo tables to a scan server group.  This allows tables to possibly have dedicated scan servers running in a kubernets pod.\r\n\r\nOne thing I am pondering is how should client chose a scan server.  The simplest implementation would be for eventually consistent scans to do the following in the accumulo client.\r\n\r\n  * Determine what scan group the table is in\r\n  * Get the list of scan servers in that group\r\n  * Randomly chose one of them\r\n\r\nI think this would work fairly well.  Scan servers could respond w/ too busy response if they are overloaded and the client could randomly select another.  It could also remember a server that reported as busy and not contact it for a while (maybe w/ exponential backoff).  \r\n\r\nOne thing I would like, but I am not sure how to achieve at the moment is stickiness for tablets in order to achieve better cache utilization.  For example, if I have 1000 scan servers maybe it would be nice if each tablet was only served by 10 of those scan servers in order to increase the chance of getting cache hits on the scan server for a given tablet.  Could probably achieve this with hashing and modulus to map a tablet to a subset of server deterministically across clients.  However, this simplistic limiting tablets to a fixed number of scan servers would not allow scaling in the case where a single tablet all of a sudden has an overwhelming number of scans.   Maybe if scan servers used a cluster wide caching mechanism, then stickiness would not be a concern.  However local cache in RAM is hard to beat if you can use it.\r\n\r\n## Prerequisites. \r\n\r\nThinking that inorder to implement this it may be best to first pay down some tech debt in the tserver and work on organizing the existing tablet scan code so that its more modular and self-contained (separated from other tablet code for writes and bookeeping).  This could lead to making it easier to reuse code in the scan server.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1009461640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1010008666","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1010008666","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1010008666,"node_id":"IC_kwDOACaFSM48M4Ja","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-11T14:19:09Z","updated_at":"2022-01-11T14:19:09Z","author_association":"CONTRIBUTOR","body":"@keith-turner - Thanks for the comment. Regarding the scan groups, I was thinking of a default naive approach with no groups but allow the user to plug their own scan server locator into the client. Maybe over time we build in some smarter options.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1010008666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1010172520","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1010172520","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1010172520,"node_id":"IC_kwDOACaFSM48NgJo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-11T17:04:05Z","updated_at":"2022-01-11T17:04:05Z","author_association":"CONTRIBUTOR","body":"FWIW, it looks like HBase has a similar concept - https://docs.cloudera.com/documentation/enterprise/6/6.3/topics/admin_hbase_read_replicas.html","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1010172520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1010543242","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1010543242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1010543242,"node_id":"IC_kwDOACaFSM48O6qK","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T01:38:10Z","updated_at":"2022-01-12T01:40:03Z","author_association":"CONTRIBUTOR","body":"The fragment below, (copied from NativeMapIT) as a unit test can detect if the native libraries are present - when the are not, the tservers will fail to start.  Currently verify up throws:\r\n```\r\njava.lang.RuntimeException: Timed out waiting for TServer information in ZooKeeper\r\n```\r\n\r\n```\r\n  @Test\r\n  public void itTest() {\r\n    System.setProperty(\"accumulo.native.lib.path\", nativeMapLocation().getAbsolutePath());\r\n    assertTrue(NativeMap.isLoaded());\r\n  }\r\n\r\n  private static File nativeMapLocation() {\r\n    File projectDir = new File(System.getProperty(\"user.dir\")).getParentFile();\r\n    return new File(projectDir, \"server/native/target/accumulo-native-\" + Constants.VERSION\r\n        + \"/accumulo-native-\" + Constants.VERSION);\r\n  }\r\n\r\n```\r\n\r\nThe tserver log shows the ultimate reason for the failure:\r\n\r\nException from Tserver log with missing native library\r\n<details>\r\n  <summary>Click to expand!</summary>\r\n\r\n```\r\n2022-01-12T01:25:14,669 [tserver.NativeMap] ERROR: Tried and failed to load Accumulo native library from ./server/native/target/accumulo-native-2.1.0-SNAPSHOT/accumulo-native-2.1.0-SNAPSHOT:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\r\njava.lang.UnsatisfiedLinkError: no accumulo in java.library.path: [./server/native/target/accumulo-native-2.1.0-SNAPSHOT/accumulo-native-2.1.0-SNAPSHOT, /usr/java/packages/lib, /usr/lib64, /lib64, /lib, /usr/lib]\r\n        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:2680) ~[?:?]\r\n        at java.lang.Runtime.loadLibrary0(Runtime.java:807) ~[?:?]\r\n        at java.lang.System.loadLibrary(System.java:1907) ~[?:?]\r\n        at org.apache.accumulo.tserver.NativeMap.<clinit>(NativeMap.java:96) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.TabletServerResourceManager.<init>(TabletServerResourceManager.java:257) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.TabletServer.<init>(TabletServer.java:347) ~[classes/:?]\r\n        at org.apache.accumulo.tserver.TabletServer.main(TabletServer.java:232) ~[classes/:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:564) ~[?:?]\r\n        at org.apache.accumulo.start.Main.lambda$execMainClass$1(Main.java:163) ~[classes/:?]\r\n        at java.lang.Thread.run(Thread.java:832) [?:?]\r\n2022-01-12T01:25:14,681 [tserver.NativeMap] ERROR: FATAL! Accumulo native libraries were requested but could not be be loaded. Either set 'tserver.memory.maps.native.enabled' to false in accumulo.properties or make sure native libraries are created in directories set by the JVM system property 'accumulo.native.lib.path' in accumulo-env.sh!\r\n```\r\n\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1010543242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1011212339","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1011212339","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1011212339,"node_id":"IC_kwDOACaFSM48ReAz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T16:12:58Z","updated_at":"2022-01-12T16:23:37Z","author_association":"CONTRIBUTOR","body":"Thinking a bit more about making tablets sticky, was thinking an algorithm like the following may be sticky and resilient to high scan load on a few tablets.  The algorithm starts off always sending a tablet to a few scan servers and when those few get busy it will exponentially expand the number of servers used.\r\n\r\n* serverAddresses[] = an array of sorted scan server addresses that is usually the same on each client.  Its eventually consistent on the client.  For brief periods when it differs, clients will choose different scan servers for the same tablets.\r\n* NSS = num scan servers which would be serverAddresses.lenght()\r\n* ISS = initial scan servers to randomly select from when querying a tablet, could start off small like 2 or 4\r\n\r\nThe algorithm is below and above are the initial variables\r\n\r\n1. serversToUse = ISS\r\n2. serverIndex = ( hash(tablet extent) % NSS + random.nextInt(serversToUse) ) % NSS\r\n3. serverAddress = serversAddresses[serverIndex]\r\n4. Send scan request to server address\r\n5. If get results then done\r\n6. If server reports as busy then set serversToUse=2*serversToUse and goto 2\r\n\r\nIn step 6 of the algorithm, we may want to sleep also.  There are two cases to consider for this : many tablets are getting many query and a few tablets are getting many queries. Trying to think through if sleeping w/ exponential backoff in both cases makes sense.\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1011212339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1011282688","html_url":"https://github.com/apache/accumulo/pull/2415#issuecomment-1011282688","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2415","id":1011282688,"node_id":"IC_kwDOACaFSM48RvMA","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T17:25:55Z","updated_at":"2022-01-12T17:25:55Z","author_association":"MEMBER","body":"> I was thinking of adding a thrift method to the `CompactionCoordinator` called `cancel()` that will call cancel on the appropriate compactor.\r\n\r\nWould this address #2386?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1011282688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1011307026","html_url":"https://github.com/apache/accumulo/pull/2415#issuecomment-1011307026","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2415","id":1011307026,"node_id":"IC_kwDOACaFSM48R1IS","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T17:55:48Z","updated_at":"2022-01-12T17:55:48Z","author_association":"CONTRIBUTOR","body":"> > I was thinking of adding a thrift method to the `CompactionCoordinator` called `cancel()` that will call cancel on the appropriate compactor.\r\n> \r\n> Would this address #2386?\r\n\r\nYup, that is the plan. I couldn't find a good way for the user to cancel the compaction so I made this external compactions admin utility. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1011307026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012421542","html_url":"https://github.com/apache/accumulo/issues/2416#issuecomment-1012421542","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2416","id":1012421542,"node_id":"IC_kwDOACaFSM48WFOm","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-13T19:00:44Z","updated_at":"2022-01-13T19:00:44Z","author_association":"CONTRIBUTOR","body":"Have you tried setting the Accumulo property `table.file.compress.type`? That is typically how you set the compression codec for files in accumulo.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012421542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012436458","html_url":"https://github.com/apache/accumulo/issues/2416#issuecomment-1012436458","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2416","id":1012436458,"node_id":"IC_kwDOACaFSM48WI3q","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-13T19:21:47Z","updated_at":"2022-01-13T19:21:47Z","author_association":"CONTRIBUTOR","body":"Hi @milleruntime - that property is specifying the codec **type**, not the actual **implementation**.  In most cases, the distinction is irrelevant.  However, alternate performance-based implementations are available and can be defined with the `io.compression.codec.${type}.class` Hadoop property.  The code as written (45a4a93) does not make use of the Hadoop configuration property.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012436458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012519727","html_url":"https://github.com/apache/accumulo/issues/2416#issuecomment-1012519727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2416","id":1012519727,"node_id":"IC_kwDOACaFSM48WdMv","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-13T21:12:48Z","updated_at":"2022-01-13T21:12:48Z","author_association":"CONTRIBUTOR","body":"> Hi @milleruntime - that property is specifying the codec **type**, not the actual **implementation**. In most cases, the distinction is irrelevant. However, alternate performance-based implementations are available and can be defined with the `io.compression.codec.${type}.class` Hadoop property. The code as written ([45a4a93](https://github.com/apache/accumulo/commit/45a4a93d2926760d6a916ae2da1d7e668ec4dcb1)) does not make use of the Hadoop configuration property.\r\n\r\nThanks for the explanation. I think I see what you are trying to do but can't seem to find any hadoop documentation about it. I haven't gone digging through the source code yet though. Do you know of any relevant hadoop documentation? Also, do you know if the `io.compression.codec` package is tied to a specific version of hadoop?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012519727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012554027","html_url":"https://github.com/apache/accumulo/issues/2416#issuecomment-1012554027","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2416","id":1012554027,"node_id":"IC_kwDOACaFSM48Wlkr","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-13T22:06:57Z","updated_at":"2022-01-13T22:06:57Z","author_association":"CONTRIBUTOR","body":"A form of this feature has been around since the Accumulo [1.3.5](https://github.com/apache/accumulo/blob/1.3.5/src/core/src/main/java/org/apache/accumulo/core/file/rfile/bcfile/Compression.java#L221) release.  It has been present in Hadoop since [2.2.x](https://github.com/apache/hadoop/blob/e103c83765898f756f88c27b2243c8dd3098a989/hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/io/file/tfile/Compression.java#L88) - this link has the code that implements this capability for the Hadoop TFile (it is virtually identical to the intended behavior in Accumulo).  Accumulo's version has had a bug since the initial commit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012554027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012709978","html_url":"https://github.com/apache/accumulo/issues/2355#issuecomment-1012709978","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2355","id":1012709978,"node_id":"IC_kwDOACaFSM48XLpa","user":{"login":"filipedfr","id":34490958,"node_id":"MDQ6VXNlcjM0NDkwOTU4","avatar_url":"https://avatars.githubusercontent.com/u/34490958?v=4","gravatar_id":"","url":"https://api.github.com/users/filipedfr","html_url":"https://github.com/filipedfr","followers_url":"https://api.github.com/users/filipedfr/followers","following_url":"https://api.github.com/users/filipedfr/following{/other_user}","gists_url":"https://api.github.com/users/filipedfr/gists{/gist_id}","starred_url":"https://api.github.com/users/filipedfr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filipedfr/subscriptions","organizations_url":"https://api.github.com/users/filipedfr/orgs","repos_url":"https://api.github.com/users/filipedfr/repos","events_url":"https://api.github.com/users/filipedfr/events{/privacy}","received_events_url":"https://api.github.com/users/filipedfr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T03:11:31Z","updated_at":"2022-01-14T03:11:31Z","author_association":"CONTRIBUTOR","body":"Worked this out in PR #2418. Sorry if I forgot to request assignment first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1012709978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013150896","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013150896","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013150896,"node_id":"IC_kwDOACaFSM48Y3Sw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T14:12:20Z","updated_at":"2022-01-14T14:12:20Z","author_association":"CONTRIBUTOR","body":"I think this looks like a good fix. And thanks for the additions to the test. The only concern I have is with the exception handling. With your changes, I am now seeing an exception printed when `CompressionTest` is run, even as it is passing. We should avoid always printing errors if it is not an error. The problem with the class loading in this part of the code is I can't tell what is supposed to be an error and what is a typical configuration. This is not necessarily an issue with your change, it is mostly trying to figure out the original intent, how it has evolved and how it works with your change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013150896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013186142","html_url":"https://github.com/apache/accumulo/pull/2418#issuecomment-1013186142","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2418","id":1013186142,"node_id":"IC_kwDOACaFSM48Y_5e","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T14:42:33Z","updated_at":"2022-01-14T14:42:33Z","author_association":"CONTRIBUTOR","body":"Thanks for the contribution @filipedfr and welcome to the Apache Accumulo community! If you would like to be listed as a contributor on Accumulo's people page please make a website PR for people.md. https://github.com/apache/accumulo-website/edit/main/pages/people.md\r\n\r\nIf you intend to make more contributions, please consider subscribing to the dev list and introducing yourself. Also, you can use the dev list or slack to reach out if you have questions about anything. https://accumulo.apache.org/contact-us/","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013186142/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013209354","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013209354","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013209354,"node_id":"IC_kwDOACaFSM48ZFkK","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T15:09:56Z","updated_at":"2022-01-14T15:09:56Z","author_association":"CONTRIBUTOR","body":"Thank you for the review.  I am concerned that the error which was previously ignored is rather fatal in certain contexts.  For example, if data is written with a codec available on a MR system (such as lzo), but not available on the Accumulo system, the data read will be trash.  There's not a good immediate fix here, the risk is relatively low, and the exception will not occur in normal operations; however, if it does happen, I'd rather know instead of attempting to track down some other irrelevant (data corruption) issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013209354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013212406","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013212406","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013212406,"node_id":"IC_kwDOACaFSM48ZGT2","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T15:13:41Z","updated_at":"2022-01-14T15:13:41Z","author_association":"CONTRIBUTOR","body":"@milleruntime I do not see an exception printed either in my local run or as part of the [GH action](https://github.com/apache/accumulo/runs/4806637183?check_suite_focus=true#step:6:476).  Could you please provide the reproduction steps where you see the exception?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013212406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013227816","html_url":"https://github.com/apache/accumulo/issues/2413#issuecomment-1013227816","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2413","id":1013227816,"node_id":"IC_kwDOACaFSM48ZKEo","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T15:33:13Z","updated_at":"2022-01-14T15:33:13Z","author_association":"MEMBER","body":"Looks like the two sources have diverged pretty far and it may not be possible to cleanly consolidate the two. \r\n\r\nI am looking into the second part of the issue now - closing the readers. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013227816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013253635","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013253635","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013253635,"node_id":"IC_kwDOACaFSM48ZQYD","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T16:05:20Z","updated_at":"2022-01-14T16:05:20Z","author_association":"CONTRIBUTOR","body":"Run: \r\n`mvn clean test -Dtest=CompressionTest`\r\n`cat <accumulo-src>./core/target/surefire-reports/org.apache.accumulo.core.file.rfile.bcfile.CompressionTest.txt`\r\nThe error is printed in the log: \r\n<pre>\r\n[main] ERROR org.apache.accumulo.core.file.rfile.bcfile.Compression [] - Unable to load codec class org.apache.hadoop.io.compress.LzoCodec for io.compression.codec.lzo.class\r\njava.lang.ClassNotFoundException: org.apache.hadoop.io.compress.LzoCodec\r\n\tat jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581) ~[?:?]\r\n\tat jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[?:?]\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?]\r\n\tat java.lang.Class.forName0(Native Method) ~[?:?]\r\n\tat java.lang.Class.forName(Class.java:315) ~[?:?]\r\n\tat org.apache.accumulo.core.file.rfile.bcfile.Compression$Algorithm.createNewCodec(Compression.java:773) [classes/:?]\r\n\tat org.apache.accumulo.core.file.rfile.bcfile.Compression$Algorithm$2.createNewCodec(Compression.java:268) [classes/:?]\r\n\tat org.apache.accumulo.core.file.rfile.bcfile.Compression$Algorithm.initCodec(Compression.java:750) [classes/:?]\r\n\tat org.apache.accumulo.core.file.rfile.bcfile.Compression$Algorithm$2.initializeDefaultCodec(Compression.java:263) [classes/:?]\r\n\tat org.apache.accumulo.core.file.rfile.bcfile.Compression$Algorithm.<clinit>(Compression.java:635) [classes/:?]\r\n\tat org.apache.accumulo.core.file.rfile.bcfile.CompressionTest.testSupport(CompressionTest.java:57) [test-classes/:?]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013253635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013259338","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013259338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013259338,"node_id":"IC_kwDOACaFSM48ZRxK","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T16:11:58Z","updated_at":"2022-01-14T16:11:58Z","author_association":"CONTRIBUTOR","body":"Thank you - this makes sense as [LZO is not bundled with Hadoop](https://www.netjstech.com/2018/04/how-to-configure-use-lzo-compression-hadoop.html) due to licensing issues.  In this case, the exception would be useful in determining which codec is missing and how to resolve the missing library.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013259338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013292005","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013292005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013292005,"node_id":"IC_kwDOACaFSM48ZZvl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T16:53:49Z","updated_at":"2022-01-14T16:53:49Z","author_association":"CONTRIBUTOR","body":"> In this case, the exception would be useful in determining which codec is missing and how to resolve the missing library.\r\n\r\nI agree but I would like to avoid printing an error if the codec is not there by default and most users aren't going to override the implementation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013292005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013312101","html_url":"https://github.com/apache/accumulo/pull/2417#issuecomment-1013312101","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2417","id":1013312101,"node_id":"IC_kwDOACaFSM48Zepl","user":{"login":"trietopsoft","id":70720273,"node_id":"MDQ6VXNlcjcwNzIwMjcz","avatar_url":"https://avatars.githubusercontent.com/u/70720273?v=4","gravatar_id":"","url":"https://api.github.com/users/trietopsoft","html_url":"https://github.com/trietopsoft","followers_url":"https://api.github.com/users/trietopsoft/followers","following_url":"https://api.github.com/users/trietopsoft/following{/other_user}","gists_url":"https://api.github.com/users/trietopsoft/gists{/gist_id}","starred_url":"https://api.github.com/users/trietopsoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trietopsoft/subscriptions","organizations_url":"https://api.github.com/users/trietopsoft/orgs","repos_url":"https://api.github.com/users/trietopsoft/repos","events_url":"https://api.github.com/users/trietopsoft/events{/privacy}","received_events_url":"https://api.github.com/users/trietopsoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T17:21:26Z","updated_at":"2022-01-14T17:21:26Z","author_association":"CONTRIBUTOR","body":"Understood.  I would suggest the following without the stack trace but enough context:\r\n\r\n```java\r\n        log.warn(\"Unable to load codec class {} for {}, reason: {}\", clazz, codecClazzProp,\r\n            e.getMessage());\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013312101/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013431932","html_url":"https://github.com/apache/accumulo/pull/2415#issuecomment-1013431932","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2415","id":1013431932,"node_id":"IC_kwDOACaFSM48Z758","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T19:53:50Z","updated_at":"2022-01-14T19:53:50Z","author_association":"CONTRIBUTOR","body":"I think this PR is ready for review. This creates the admin tool for external compactions but only with useful commands that currently work. I added RPCs for cancelling but have some ideas for a follow on task to provide more command and control.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013431932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013437556","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-1013437556","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":1013437556,"node_id":"IC_kwDOACaFSM48Z9R0","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T20:03:08Z","updated_at":"2022-01-14T20:03:25Z","author_association":"CONTRIBUTOR","body":"I think this can be merged for 2.1. @keith-turner @ctubbsii please let me know within the next week if you have any objections.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013437556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013442755","html_url":"https://github.com/apache/accumulo/issues/2416#issuecomment-1013442755","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2416","id":1013442755,"node_id":"IC_kwDOACaFSM48Z-jD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T20:11:56Z","updated_at":"2022-01-14T20:11:56Z","author_association":"MEMBER","body":"I seem to remember discussing this before. I've definitely noticed the issue before. However, I couldn't find a reference to an existing conversation about it. It might have just happened in my head :smiley_cat: \r\nA refactor of this code to make the behavior a bit more clear and intuitive would be nice.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1013442755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015368108","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1015368108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1015368108,"node_id":"IC_kwDOACaFSM48hUms","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T12:34:05Z","updated_at":"2022-01-18T12:34:05Z","author_association":"CONTRIBUTOR","body":"@EdColeman - are you saying that NativeMapIT is failing? I just ran it locally from my IDE and it ran successfully.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015368108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015377056","html_url":"https://github.com/apache/accumulo/pull/2415#issuecomment-1015377056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2415","id":1015377056,"node_id":"IC_kwDOACaFSM48hWyg","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T12:46:40Z","updated_at":"2022-01-18T12:46:40Z","author_association":"CONTRIBUTOR","body":"This looks correct. Just one comment about API security check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015377056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015419815","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1015419815","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1015419815,"node_id":"IC_kwDOACaFSM48hhOn","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T13:37:18Z","updated_at":"2022-01-18T13:37:18Z","author_association":"CONTRIBUTOR","body":"Any mini-test should fail if the native maps are not available.  As @ctubbsii pointed out - the IDE build process cannot build the correct dependencies because native maps is not a direct dependency, so if you do a mvn clean / build that fails (say because of formatting or a test)  and then you try to run an IT in an IDE, if will fail to start the tservers because the native maps are not available.\r\n\r\nThe only way that you can figure out why the tserver failed to start is to look at the log. It would be nice if the failure was reported by the mini test as failure to find native maps rather than just tserver failed to start.\r\n\r\nWhat happens frequently to me is I'll be making changes and then run an IT to verify behavior - and it will fail - my first instinct is that I broke something with my changes, forgetting that I had not run a mvn build that would put the native map in place.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015419815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015420238","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1015420238","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1015420238,"node_id":"IC_kwDOACaFSM48hhVO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T13:37:53Z","updated_at":"2022-01-18T13:37:53Z","author_association":"CONTRIBUTOR","body":"I'm starting to think that we should revert the commits associated with verifyUp(). I can't get consistent IT runs in GitHub Actions due to tests timing out. Also, some things work locally but fail in Github Actions. I'm not sure that this is worth the effort.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015420238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015505226","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1015505226","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1015505226,"node_id":"IC_kwDOACaFSM48h2FK","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T15:08:48Z","updated_at":"2022-01-18T15:08:48Z","author_association":"CONTRIBUTOR","body":"> I'm starting to think that we should revert the commits associated with verifyUp(). I can't get consistent IT runs in GitHub Actions due to tests timing out. Also, some things work locally but fail in Github Actions. I'm not sure that this is worth the effort.\r\n\r\nI was thinking this as well. Perhaps a more targeted approach would be better for tests that require native maps.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015505226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015737106","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1015737106","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1015737106,"node_id":"IC_kwDOACaFSM48iusS","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T19:09:52Z","updated_at":"2022-01-18T19:09:52Z","author_association":"CONTRIBUTOR","body":"> Trying to think through if sleeping w/ exponential backoff in both cases makes sense.\r\n\r\nI was thinking about this and started thinking the following may be good goals.\r\n\r\n 1. Only do exponential back off sleep when serversToUse has expanded to include all possible scan servers.  Do not do sleep when serversToUse is less than the possible number of scans servers.\r\n 2. Make the expansion factor of serversToUse such that we always get to all servers in a fixed number of retries.  For example if we keep getting busy signals, then we should always expand to all servers by the Nth retry no matter how many servers.\r\n\r\nThe reason for #1 is that we do not want to delay retrying with more servers in the case where only a single tablet is busy.  The reason for #2 is that we want to get to all of the servers quickly and start sleeping in the case where many servers are busy.  To accomplish #2 we can calculate the scale factor as a function of the number of servers.  For example if we had 1000 servers, started off with 3 servers, and wanted to get to all servers in 3 retries we could solve `3x^3=1000` to get the desired scale factor which is `x=(1000/3)^(1/3) =~ 6.934`.   In the previous post I made the scale factor was arbitrarily set to 2, so it would take more retries to get to all servers as the total servers increases.\r\n\r\nBelow is an example with 1000 thousand scan servers where lots are busy of how this might work.  Since there are 1000 servers we use the scale factor of 6.934 calculated above.\r\n\r\n  1. We chose randomly from 3 servers based on the tablet hash.\r\n  2. We contact the server and it reports busy. We do not sleep and retry.\r\n  3. We expand the number of scan servers to choose from to 3*6.934 = 20.802.  We randomly choose from 21 servers based on the tablet hash.\r\n  4. We contact the server and it reports busy. We do not sleep and retry.\r\n  5. We expand the number of scan servers to choose from to 20.802*6.934 = 144.241.  We randomly choose from 144 servers based on the tablet hash.\r\n  6. We contact the server and it reports busy. We do not sleep and retry.\r\n  7. We expand the number of scan servers to choose from to 144.241*6.934 = 1000.167.  We randomly choose from 1000 servers based on the tablet hash.\r\n  8. We contact the server and it reports busy. We start sleeping with exponential backoff and retrying.  Now that are picking from all servers, there is no need to expand by 6.934 anymore.\r\n  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015737106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015740771","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1015740771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1015740771,"node_id":"IC_kwDOACaFSM48ivlj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T19:14:42Z","updated_at":"2022-01-18T19:14:42Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - you mentioned that there was work to do in the tablet server as a prerequisite. Do you have any comments on what that might be?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015740771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015741550","html_url":"https://github.com/apache/accumulo/issues/2411#issuecomment-1015741550","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2411","id":1015741550,"node_id":"IC_kwDOACaFSM48ivxu","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T19:15:41Z","updated_at":"2022-01-18T19:15:41Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - you mentioned that there was work to do in the tablet server as a prerequisite. Do you have any comments on what that might be?\r\n\r\nNo, I don't have anything specific in mind ATM but I will take a look at the code and get back to you if I see anything specific. I just suspect there are things that could be done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015741550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015824806","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1015824806","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1015824806,"node_id":"IC_kwDOACaFSM48jEGm","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T20:53:26Z","updated_at":"2022-01-18T20:53:26Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - any thoughts on reverting the commits that added `verifyUp` ? You did some work in there too IIRC","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1015824806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016429473","html_url":"https://github.com/apache/accumulo/pull/2414#issuecomment-1016429473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2414","id":1016429473,"node_id":"IC_kwDOACaFSM48lXuh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T12:42:00Z","updated_at":"2022-01-19T12:42:00Z","author_association":"CONTRIBUTOR","body":"I submitted #2420 to remove this method. If that is approved, then I will close this and merge #2420.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016429473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016441279","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-1016441279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":1016441279,"node_id":"IC_kwDOACaFSM48lam_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T12:58:23Z","updated_at":"2022-01-19T12:58:23Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  - any update on this? Do you need any help?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016441279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016709740","html_url":"https://github.com/apache/accumulo/pull/2415#issuecomment-1016709740","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2415","id":1016709740,"node_id":"IC_kwDOACaFSM48mcJs","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T17:42:52Z","updated_at":"2022-01-19T17:42:52Z","author_association":"CONTRIBUTOR","body":"FYI @dlmarion I made some improvements in 4c78355 based on your comments. I just wanted to give you a heads up since you already approved this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016709740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016717738","html_url":"https://github.com/apache/accumulo/pull/2420#issuecomment-1016717738","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2420","id":1016717738,"node_id":"IC_kwDOACaFSM48meGq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T17:52:40Z","updated_at":"2022-01-19T17:52:40Z","author_association":"MEMBER","body":"I'm not sure this is necessary. I think we can get #2414 to the point where the verifyUp is still helpful, but doesn't cause test problems. Let's try to get #2414 polished, and then merged. And, then if we're still having trouble after a few rounds of testing, and the fix isn't obvious, then we can revisit this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016717738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016735091","html_url":"https://github.com/apache/accumulo/pull/2410#issuecomment-1016735091","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2410","id":1016735091,"node_id":"IC_kwDOACaFSM48miVz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T18:12:14Z","updated_at":"2022-01-19T18:12:14Z","author_association":"MEMBER","body":"For reference, the fix is being worked in #2414 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016735091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016742918","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-1016742918","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":1016742918,"node_id":"IC_kwDOACaFSM48mkQG","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T18:21:07Z","updated_at":"2022-01-19T18:21:07Z","author_association":"MEMBER","body":"> I think this can be merged for 2.1. @keith-turner @ctubbsii please let me know within the next week if you have any objections.\r\n\r\nI think it's ready, but I still had the unresolved comment about making sure that it only returns files, and not directories, which could be confirmed through some experimentation. I suggest doing a quick check to make sure the recursive file listing works as expected, only returning files and not directories before merging. But otherwise, I think it's good to go.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016742918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016745092","html_url":"https://github.com/apache/accumulo/pull/2420#issuecomment-1016745092","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2420","id":1016745092,"node_id":"IC_kwDOACaFSM48mkyE","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T18:23:38Z","updated_at":"2022-01-19T18:23:38Z","author_association":"CONTRIBUTOR","body":"> I'm not sure this is necessary. I think we can get #2414 to the point where the verifyUp is still helpful, but doesn't cause test problems. Let's try to get #2414 polished, and then merged. And, then if we're still having trouble after a few rounds of testing, and the fix isn't obvious, then we can revisit this.\r\n\r\nI would be fine with that. I am still a little concerned if the additional time for every test is worth it, if this really only helps a fraction of the ITs. \r\n\r\nIt may be a better use of time to go the other direction, aka streamline the ITs by removing less useful code from the framework (i.e. standalone overhead, support for one-off features, etc.) to try and simplify it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016745092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016752499","html_url":"https://github.com/apache/accumulo/pull/2420#issuecomment-1016752499","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2420","id":1016752499,"node_id":"IC_kwDOACaFSM48mmlz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T18:32:22Z","updated_at":"2022-01-19T18:32:22Z","author_association":"MEMBER","body":"> I would be fine with that. I am still a little concerned if the additional time for every test is worth it, if this really only helps a fraction of the ITs.\r\n\r\nUnderstood. Let's see if it's actually a significant problem first.\r\n\r\n> It may be a better use of time to go the other direction, aka streamline the ITs by removing less useful code from the framework (i.e. standalone overhead, support for one-off features, etc.) to try and simplify it.\r\n\r\nThat's a good idea, too. I wouldn't consider them mutually exclusive.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016752499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016830093","html_url":"https://github.com/apache/accumulo/pull/1259#issuecomment-1016830093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1259","id":1016830093,"node_id":"IC_kwDOACaFSM48m5iN","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T20:12:00Z","updated_at":"2022-01-19T20:12:00Z","author_association":"CONTRIBUTOR","body":"> I think it's ready, but I still had the unresolved comment about making sure that it only returns files, and not directories, which could be confirmed through some experimentation. I suggest doing a quick check to make sure the recursive file listing works as expected, only returning files and not directories before merging. But otherwise, I think it's good to go.\r\n\r\nI think we are good to go. I did a quick test with a debug statement printing each path returned by the RemoteIterator and it returned the same number of files in hdfs and did not return any of the directories:\r\n<pre>\r\n03:07:44 {main} ~/workspace/uno/install/logs/accumulo$ grep MIKE tserver1_ip-10-113-12-25.log | wc -l\r\n60\r\n03:07:53 {main} ~/workspace/uno/install/logs/accumulo$ hdfs dfs -ls -R /accumulo/tables/1/ | grep \".*rf\" | wc -l\r\n60\r\n</pre>\r\nDebug statement in `TableDiskUsage`\r\n<pre>\r\nRemoteIterator<LocatedFileStatus> ri = fs.listFiles(path, true);\r\n        while (ri.hasNext()) {\r\n          FileStatus status = ri.next();\r\n          String name = status.getPath().getName();\r\n          log.info(\"MIKE we saw: \" + status.getPath().toString());\r\n          tdu.addFileSize(name, status.getLen());\r\n        }\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1016830093/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017143942","html_url":"https://github.com/apache/accumulo/issues/2362#issuecomment-1017143942","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2362","id":1017143942,"node_id":"IC_kwDOACaFSM48oGKG","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T05:54:25Z","updated_at":"2022-01-20T05:54:25Z","author_association":"MEMBER","body":"> any update on this? Do you need any help?\r\n\r\nNo update. I'm still working on it. No, I don't need help. I just need to cut out distractions to wrap it up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017143942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017531215","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-1017531215","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":1017531215,"node_id":"IC_kwDOACaFSM48pktP","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T14:00:25Z","updated_at":"2022-01-20T14:00:25Z","author_association":"CONTRIBUTOR","body":"@ivakegg you approved this PR way back in 2017 because I assume it was relevant to a production issue. Are you still seeing issues with this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017531215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017682345","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-1017682345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":1017682345,"node_id":"IC_kwDOACaFSM48qJmp","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T16:25:05Z","updated_at":"2022-01-20T16:25:05Z","author_association":"CONTRIBUTOR","body":"@phrocker I was looking at this PR and took the liberty of merging some conflicts. I made a PR to your branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017682345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017857712","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1017857712","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1017857712,"node_id":"IC_kwDOACaFSM48q0aw","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T19:40:47Z","updated_at":"2022-01-20T19:40:47Z","author_association":"CONTRIBUTOR","body":"@dlmarion curios if this feature is something you would like to see in 2.1.0?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017857712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017869373","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1017869373","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1017869373,"node_id":"IC_kwDOACaFSM48q3Q9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T19:56:52Z","updated_at":"2022-01-20T19:56:52Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I don't have a schedule. I figured I would flesh out my idea for an implementation and see if it works. There is not a ton of code with this approach as I am reusing the existing scan code in the client and tablet server. You had commented on some load balancing strategies, which is certainly useful, but I think can be pushed down the road or to the user being able to plug in their own strategy into the client (which I what I have in this PR).\r\n\r\nMy current plan is to write some tests and test locally to see how many issues pop up. It's possible that this approach is total flop and something else is needed. If this happens to be done before 2.1.0, then great. If not, then 2.2.0 is fine too. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017869373/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017869501","html_url":"https://github.com/apache/accumulo/pull/2422#issuecomment-1017869501","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2422","id":1017869501,"node_id":"IC_kwDOACaFSM48q3S9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T19:57:05Z","updated_at":"2022-01-20T19:57:05Z","author_association":"MEMBER","body":"> @dlmarion curios if this feature is something you would like to see in 2.1.0?\r\n\r\nPlease no! I'd really like to get 2.1.0 released this century, and I think trying to include something this substantial would set us back too far for testing/code review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017869501/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017941276","html_url":"https://github.com/apache/accumulo/pull/140#issuecomment-1017941276","issue_url":"https://api.github.com/repos/apache/accumulo/issues/140","id":1017941276,"node_id":"IC_kwDOACaFSM48rI0c","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T21:25:27Z","updated_at":"2022-01-20T21:25:27Z","author_association":"CONTRIBUTOR","body":"@phrocker any idea what version of hadoop this was originally developed for? I am trying to figure out if `CodecPool` changed and if this is still a problem.\r\nhttps://hadoop.apache.org/docs/r2.4.1/api/org/apache/hadoop/io/compress/CodecPool.html","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1017941276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]