[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228014847","html_url":"https://github.com/apache/brpc/issues/1906#issuecomment-1228014847","issue_url":"https://api.github.com/repos/apache/brpc/issues/1906","id":1228014847,"node_id":"IC_kwDOBhmkcs5JMgT_","user":{"login":"zhoukangsheng","id":53427718,"node_id":"MDQ6VXNlcjUzNDI3NzE4","avatar_url":"https://avatars.githubusercontent.com/u/53427718?v=4","gravatar_id":"","url":"https://api.github.com/users/zhoukangsheng","html_url":"https://github.com/zhoukangsheng","followers_url":"https://api.github.com/users/zhoukangsheng/followers","following_url":"https://api.github.com/users/zhoukangsheng/following{/other_user}","gists_url":"https://api.github.com/users/zhoukangsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/zhoukangsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhoukangsheng/subscriptions","organizations_url":"https://api.github.com/users/zhoukangsheng/orgs","repos_url":"https://api.github.com/users/zhoukangsheng/repos","events_url":"https://api.github.com/users/zhoukangsheng/events{/privacy}","received_events_url":"https://api.github.com/users/zhoukangsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T03:35:49Z","updated_at":"2022-08-26T03:35:49Z","author_association":"NONE","body":"\r\n\r\n\r\n> 动态回收pthread worker在实践中会有一些困难，比如无法把待回收的pthread上正在执行的bthread强制调度走（bthread是主动让出），比如如何回收pthread上面的tls变量（有些是业务创建的，没有释放机制），所以没有支持worker动态调小，要调小只能重启\r\n\r\n嗯嗯，这些确实是要考虑的问题；能否在收到worker调小的通知后，随机选取几个线程进行标记，之后不再往标记的线程分配bthread任务就可以达到worker调小的目的，不知道这个思路是否可行？另外我们在使用brpc框架时，我们不建议业务代码使用tls变量，当一个bthread被多个线程调度到后，访问tls变量会存在一些未定义的行为；对于一些需要使用tls变量的场景，比如trace，我们参考brpc中的tls在bthread中做了一些二次开发，在bthread切换调度线程时，将tls变量保存在了bthread的context中，当它被其它线程调度到时，再从context中恢复到tls。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228014847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228174728","html_url":"https://github.com/apache/brpc/issues/1870#issuecomment-1228174728","issue_url":"https://api.github.com/repos/apache/brpc/issues/1870","id":1228174728,"node_id":"IC_kwDOBhmkcs5JNHWI","user":{"login":"52coder","id":5303875,"node_id":"MDQ6VXNlcjUzMDM4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/5303875?v=4","gravatar_id":"","url":"https://api.github.com/users/52coder","html_url":"https://github.com/52coder","followers_url":"https://api.github.com/users/52coder/followers","following_url":"https://api.github.com/users/52coder/following{/other_user}","gists_url":"https://api.github.com/users/52coder/gists{/gist_id}","starred_url":"https://api.github.com/users/52coder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/52coder/subscriptions","organizations_url":"https://api.github.com/users/52coder/orgs","repos_url":"https://api.github.com/users/52coder/repos","events_url":"https://api.github.com/users/52coder/events{/privacy}","received_events_url":"https://api.github.com/users/52coder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T07:53:31Z","updated_at":"2022-08-26T07:53:31Z","author_association":"NONE","body":"@TousakaRin 代码就是使用的example中的例子\r\n\r\n原始代码：https://github.com/52coder/incubator-brpc/tree/master/example/asynchronous_echo_c%2B%2B\r\nclient.cpp修改点：\r\nhttps://github.com/52coder/incubator-brpc/blob/master/example/asynchronous_echo_c%2B%2B/client.cpp#L65\r\n添加：\r\noptions.enable_circuit_breaker = true;\r\nL30行修改为rr :\r\nDEFINE_string(load_balancer, \"rr\", \"The algorithm for load balancing\");\r\n\r\nserver.cpp在改动前，先编译出来echo_server,然后在[https://github.com/52coder/incubator-brpc/blob/master/example/asynchronous_echo_c%2B%2B/server.cpp#L63前面增加如下代码：\r\ncntl->SetFailed(brpc::EREQUEST, \"Fail to parse request\");\r\n然后编译出二进制echo_server_fail，这里的想法是生成一个100%失败的server触发熔断。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228174728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228202270","html_url":"https://github.com/apache/brpc/issues/1906#issuecomment-1228202270","issue_url":"https://api.github.com/repos/apache/brpc/issues/1906","id":1228202270,"node_id":"IC_kwDOBhmkcs5JNOEe","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T08:20:19Z","updated_at":"2022-08-26T08:20:19Z","author_association":"CONTRIBUTOR","body":"> 能否在收到worker调小的通知后，随机选取几个线程进行标记，之后不再往标记的线程分配bthread任务就可以达到worker调小的目的\r\n\r\n虽然不再分配新的bthread任务，但当前执行的bthread任务的退出时间是无法预期的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228202270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228234396","html_url":"https://github.com/apache/brpc/issues/1870#issuecomment-1228234396","issue_url":"https://api.github.com/repos/apache/brpc/issues/1870","id":1228234396,"node_id":"IC_kwDOBhmkcs5JNV6c","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T08:49:38Z","updated_at":"2022-08-26T08:49:38Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/8801314/186859421-f8295556-46a1-40d1-812d-a2fab9e52819.png)\r\n我用你描述的代码是能正常熔断的，默认配置下如果server 错误率100%，第151个请求会触发熔断。\r\n这是我用的代码：https://github.com/TousakaRin/brpc/tree/circuit_breaker_test\r\n\r\n有一种可能是你的代码比较老，没有这个commit: https://github.com/apache/incubator-brpc/commit/c59aecdded0fbc01cda5b5462ef99c4d084b31ae\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228234396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228267344","html_url":"https://github.com/apache/brpc/issues/1906#issuecomment-1228267344","issue_url":"https://api.github.com/repos/apache/brpc/issues/1906","id":1228267344,"node_id":"IC_kwDOBhmkcs5JNd9Q","user":{"login":"zhoukangsheng","id":53427718,"node_id":"MDQ6VXNlcjUzNDI3NzE4","avatar_url":"https://avatars.githubusercontent.com/u/53427718?v=4","gravatar_id":"","url":"https://api.github.com/users/zhoukangsheng","html_url":"https://github.com/zhoukangsheng","followers_url":"https://api.github.com/users/zhoukangsheng/followers","following_url":"https://api.github.com/users/zhoukangsheng/following{/other_user}","gists_url":"https://api.github.com/users/zhoukangsheng/gists{/gist_id}","starred_url":"https://api.github.com/users/zhoukangsheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhoukangsheng/subscriptions","organizations_url":"https://api.github.com/users/zhoukangsheng/orgs","repos_url":"https://api.github.com/users/zhoukangsheng/repos","events_url":"https://api.github.com/users/zhoukangsheng/events{/privacy}","received_events_url":"https://api.github.com/users/zhoukangsheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T09:22:13Z","updated_at":"2022-08-26T09:22:13Z","author_association":"NONE","body":"> > 能否在收到worker调小的通知后，随机选取几个线程进行标记，之后不再往标记的线程分配bthread任务就可以达到worker调小的目的\r\n> \r\n> 虽然不再分配新的bthread任务，但当前执行的bthread任务的退出时间是无法预期的\r\n\r\n有道理，当某个bthread是个while循环，且没有调用bthread阻塞函数，是有可能独占一个pthread的，这样的pthread无法退出。但是对线上服务来说，总归是有一些pthread在不断执行新的bthread的，否则系统就无法work了。那么是否在pthread执行完一个bthread之后，在执行下一个bthread之前判断一下是否需要减小worker数就可以了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228267344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228372274","html_url":"https://github.com/apache/brpc/issues/1312#issuecomment-1228372274","issue_url":"https://api.github.com/repos/apache/brpc/issues/1312","id":1228372274,"node_id":"IC_kwDOBhmkcs5JN3ky","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T11:20:27Z","updated_at":"2022-08-26T11:20:27Z","author_association":"CONTRIBUTOR","body":"不建议同时链接brpc.so和brpc.a，可能会引起符号冲突","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228372274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228399948","html_url":"https://github.com/apache/brpc/issues/1215#issuecomment-1228399948","issue_url":"https://api.github.com/repos/apache/brpc/issues/1215","id":1228399948,"node_id":"IC_kwDOBhmkcs5JN-VM","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T11:55:24Z","updated_at":"2022-08-26T11:55:24Z","author_association":"CONTRIBUTOR","body":"原来的rdma分支不再维护，准备将rdma功能合入master：https://github.com/apache/incubator-brpc/pull/1836","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228399948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228446496","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1228446496","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1228446496,"node_id":"IC_kwDOBhmkcs5JOJsg","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-26T12:47:57Z","updated_at":"2022-08-26T12:47:57Z","author_association":"MEMBER","body":"@zyearn @jamesge please review","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1228446496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229210436","html_url":"https://github.com/apache/brpc/issues/1870#issuecomment-1229210436","issue_url":"https://api.github.com/repos/apache/brpc/issues/1870","id":1229210436,"node_id":"IC_kwDOBhmkcs5JRENE","user":{"login":"52coder","id":5303875,"node_id":"MDQ6VXNlcjUzMDM4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/5303875?v=4","gravatar_id":"","url":"https://api.github.com/users/52coder","html_url":"https://github.com/52coder","followers_url":"https://api.github.com/users/52coder/followers","following_url":"https://api.github.com/users/52coder/following{/other_user}","gists_url":"https://api.github.com/users/52coder/gists{/gist_id}","starred_url":"https://api.github.com/users/52coder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/52coder/subscriptions","organizations_url":"https://api.github.com/users/52coder/orgs","repos_url":"https://api.github.com/users/52coder/repos","events_url":"https://api.github.com/users/52coder/events{/privacy}","received_events_url":"https://api.github.com/users/52coder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-27T15:10:30Z","updated_at":"2022-08-27T15:10:30Z","author_association":"NONE","body":"> 可以贴一下完整的代码么，我在server端添加`cntl->SetFailed(brpc::EREQUEST, \"Fail to parse request\");`之后，在client看到的日志是`W0822 11:08:00.715427 748755 client.cpp:90] [E1003][10.227.87.49:8000][E1003]Failed to parse request`，而你贴的日志是Fail to **send** EchoRequest, 比较奇怪。\r\n\r\n\r\n代码是拷贝的asynchronous_echo_c++目录，修改代码是和你的https://github.com/TousakaRin/brpc/tree/circuit_breaker_test代码一样，除了没有dummy_server.port这个文件，client端打印client.cpp:42] Fail to send EchoRequest, [E1003][127.0.1.1:8003][E1003]Failed to parse request也是正常的吧，因为server端的回报设置了failed，打印这个应该没问题。\r\n\r\n重新检查了一遍，其中一个server 100%失败，跑半小时还是没有触发熔断。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229210436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229211645","html_url":"https://github.com/apache/brpc/issues/1870#issuecomment-1229211645","issue_url":"https://api.github.com/repos/apache/brpc/issues/1870","id":1229211645,"node_id":"IC_kwDOBhmkcs5JREf9","user":{"login":"52coder","id":5303875,"node_id":"MDQ6VXNlcjUzMDM4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/5303875?v=4","gravatar_id":"","url":"https://api.github.com/users/52coder","html_url":"https://github.com/52coder","followers_url":"https://api.github.com/users/52coder/followers","following_url":"https://api.github.com/users/52coder/following{/other_user}","gists_url":"https://api.github.com/users/52coder/gists{/gist_id}","starred_url":"https://api.github.com/users/52coder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/52coder/subscriptions","organizations_url":"https://api.github.com/users/52coder/orgs","repos_url":"https://api.github.com/users/52coder/repos","events_url":"https://api.github.com/users/52coder/events{/privacy}","received_events_url":"https://api.github.com/users/52coder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-27T15:17:35Z","updated_at":"2022-08-27T15:19:14Z","author_association":"NONE","body":"@TousakaRin 不知道我得测试方法是否有问题，和你的代码一样（缺少了dummy_server.port),server端编译出来两个版本，一个包含cntl->SetFailed(brpc::EREQUEST, \"Failed to parse request\");，一个不包含这行代码:\r\n./echo_server_ok --port=8001\r\n./echo_server_fail --port=8002\r\n\r\nclient.cpp中DEFINE_string(server, \"list://0.0.0.0:8001,0.0.0.0:8002\", \"IP Address of server\");\r\n./echo_client 直接运行\r\n\r\nserver和client运行在同一台ubunut物理机上面，使用的brpc版本(包含你提到的那个代码）:\r\nroot@52coder:~/incubator-brpc/example/enable_circuit_breaker_c++# git branch\r\n* (HEAD detached at 1.2.0)\r\n  master\r\n\r\n辛苦帮review下，实在没看出哪里有问题导致没有触发熔断？\r\n\r\nclient终端输出一直是（20min+)：\r\nW0827 23:17:06.067692 13282 client.cpp:42] Fail to send EchoRequest, [E1003][127.0.1.1:8002][E1003]Failed to parse request\r\nI0827 23:17:07.068715 13280 client.cpp:45] Received response from 0.0.0.0:8001: hello world (attached=bar) latency=1281us\r\nW0827 23:17:08.069341 13282 client.cpp:42] Fail to send EchoRequest, [E1003][127.0.1.1:8002][E1003]Failed to parse request\r\nI0827 23:17:09.070102 13280 client.cpp:45] Received response from 0.0.0.0:8001: hello world (attached=bar) latency=1048us\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229211645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229352138","html_url":"https://github.com/apache/brpc/issues/1870#issuecomment-1229352138","issue_url":"https://api.github.com/repos/apache/brpc/issues/1870","id":1229352138,"node_id":"IC_kwDOBhmkcs5JRmzK","user":{"login":"52coder","id":5303875,"node_id":"MDQ6VXNlcjUzMDM4NzU=","avatar_url":"https://avatars.githubusercontent.com/u/5303875?v=4","gravatar_id":"","url":"https://api.github.com/users/52coder","html_url":"https://github.com/52coder","followers_url":"https://api.github.com/users/52coder/followers","following_url":"https://api.github.com/users/52coder/following{/other_user}","gists_url":"https://api.github.com/users/52coder/gists{/gist_id}","starred_url":"https://api.github.com/users/52coder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/52coder/subscriptions","organizations_url":"https://api.github.com/users/52coder/orgs","repos_url":"https://api.github.com/users/52coder/repos","events_url":"https://api.github.com/users/52coder/events{/privacy}","received_events_url":"https://api.github.com/users/52coder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-28T01:17:22Z","updated_at":"2022-08-28T01:17:22Z","author_association":"NONE","body":"编译信息及文件列表：\r\nmake之后文件列表：\r\nroot@52coder:~/incubator-brpc/example/enable_circuit_breaker_c++# ls -lt\r\ntotal 373920\r\n-rwxr-xr-x 1 root root 95129344  8月 27 23:13 echo_server\r\n-rwxr-xr-x 1 root root 95059624  8月 27 23:13 echo_client\r\n-rw-r--r-- 1 root root   496992  8月 27 23:13 client.o\r\n-rw-r--r-- 1 root root     4803  8月 27 23:13 client.cpp\r\n-rwxr-xr-x 1 root root 95129344  8月 27 23:06 echo_server_ok\r\n-rw-r--r-- 1 root root   948400  8月 27 23:06 server.o\r\n-rw-r--r-- 1 root root     4203  8月 27 23:06 server.cpp\r\n-rwxr-xr-x 1 root root 95129432  8月 27 23:05 echo_server_fail\r\n-rw-r--r-- 1 root root        5  8月 27 23:05 dummy_server.port\r\n-rw-r--r-- 1 root root   926128  8月 27 22:54 echo.pb.o\r\n-rw-r--r-- 1 root root    22009  8月 27 22:54 echo.pb.h\r\n-rw-r--r-- 1 root root     4878  8月 27 22:52 CMakeLists.txt\r\n-rw-r--r-- 1 root root     1073  8月 27 22:52 echo.proto\r\n-rw-r--r-- 1 root root      815  8月 27 22:52 Makefile\r\n\r\n\r\nroot@52coder:~/incubator-brpc/example/enable_circuit_breaker_c++# make\r\n> Generating echo.pb.cc\r\n/usr/local/bin/protoc --cpp_out=. --proto_path=.  echo.proto\r\n> Compiling echo.pb.o\r\ng++ -c -I/usr/include/ -I../../output/include -DBRPC_WITH_GLOG=0 -DGFLAGS_NS=google -g -std=c++0x -DNDEBUG -O2 -D__const__= -pipe -W -Wall -Wno-unused-parameter -fPIC -fno-omit-frame-pointer echo.pb.cc -o echo.pb.o\r\n> Compiling client.o\r\ng++ -c -I/usr/include/ -I../../output/include -DBRPC_WITH_GLOG=0 -DGFLAGS_NS=google -g -std=c++0x -DNDEBUG -O2 -D__const__= -pipe -W -Wall -Wno-unused-parameter -fPIC -fno-omit-frame-pointer client.cpp -o client.o\r\n> Linking echo_client\r\ng++ -L/usr/lib/x86_64-linux-gnu -L../../output/lib -Xlinker \"-(\" echo.pb.o client.o -Wl,-Bstatic -lgflags -lprotobuf -lleveldb -lsnappy -lbrpc -Wl,-Bdynamic -Xlinker \"-)\" -lpthread -lssl -lcrypto -ldl -lz -lrt -o echo_client\r\n> Compiling server.o\r\ng++ -c -I/usr/include/ -I../../output/include -DBRPC_WITH_GLOG=0 -DGFLAGS_NS=google -g -std=c++0x -DNDEBUG -O2 -D__const__= -pipe -W -Wall -Wno-unused-parameter -fPIC -fno-omit-frame-pointer server.cpp -o server.o\r\nIn file included from ../../output/include/butil/resource_pool.h:89,\r\n                 from ../../output/include/brpc/socket.h:30,\r\n                 from ../../output/include/brpc/redis.h:33,\r\n                 from ../../output/include/brpc/server.h:43,\r\n                 from server.cpp:22:\r\n../../output/include/butil/resource_pool_inl.h: In instantiation of ‘static butil::ResourcePool<T>* butil::ResourcePool<T>::singleton() [with T = brpc::Socket]’:\r\n../../output/include/butil/resource_pool.h:118:38:   required from ‘int butil::return_resource(butil::ResourceId<T>) [with T = brpc::Socket]’\r\n../../output/include/brpc/socket_inl.h:112:32:   required from here\r\n../../output/include/butil/resource_pool_inl.h:368:17: warning: ‘new’ of type ‘butil::ResourcePool<brpc::Socket>’ with extended alignment 64 [-Waligned-new=]\r\n  368 |             p = new ResourcePool();\r\n      |                 ^~~~~~~~~~~~~~~~~~\r\n../../output/include/butil/resource_pool_inl.h:368:17: note: uses ‘void* operator new(std::size_t)’, which does not have an alignment parameter\r\n../../output/include/butil/resource_pool_inl.h:368:17: note: use ‘-faligned-new’ to enable C++17 over-aligned new support\r\n> Linking echo_server\r\ng++ -L/usr/lib/x86_64-linux-gnu -L../../output/lib -Xlinker \"-(\" echo.pb.o server.o -Wl,-Bstatic -lgflags -lprotobuf -lleveldb -lsnappy -lbrpc -Wl,-Bdynamic -Xlinker \"-)\" -lpthread -lssl -lcrypto -ldl -lz -lrt -o echo_server\r\nrm echo.pb.cc\r\nroot@52coder:~/incubator-brpc/example/enable_circuit_breaker_c++#","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229352138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229851130","html_url":"https://github.com/apache/brpc/pull/1146#issuecomment-1229851130","issue_url":"https://api.github.com/repos/apache/brpc/issues/1146","id":1229851130,"node_id":"IC_kwDOBhmkcs5JTgn6","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T06:49:22Z","updated_at":"2022-08-29T06:49:22Z","author_association":"CONTRIBUTOR","body":"Superceded by #1657 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1229851130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230135832","html_url":"https://github.com/apache/brpc/issues/1183#issuecomment-1230135832","issue_url":"https://api.github.com/repos/apache/brpc/issues/1183","id":1230135832,"node_id":"IC_kwDOBhmkcs5JUmIY","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:08:09Z","updated_at":"2022-08-29T11:08:09Z","author_association":"CONTRIBUTOR","body":"暂不考虑支持RDMA多网卡","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230135832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230138252","html_url":"https://github.com/apache/brpc/issues/1178#issuecomment-1230138252","issue_url":"https://api.github.com/repos/apache/brpc/issues/1178","id":1230138252,"node_id":"IC_kwDOBhmkcs5JUmuM","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:10:40Z","updated_at":"2022-08-29T11:10:40Z","author_association":"CONTRIBUTOR","body":"same as #1188 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230138252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230145972","html_url":"https://github.com/apache/brpc/issues/1153#issuecomment-1230145972","issue_url":"https://api.github.com/repos/apache/brpc/issues/1153","id":1230145972,"node_id":"IC_kwDOBhmkcs5JUom0","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:17:51Z","updated_at":"2022-08-29T11:17:51Z","author_association":"CONTRIBUTOR","body":"可以用rpc_press工具测试：https://github.com/apache/incubator-brpc/blob/master/docs/cn/rpc_press.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230145972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230149064","html_url":"https://github.com/apache/brpc/issues/1149#issuecomment-1230149064","issue_url":"https://api.github.com/repos/apache/brpc/issues/1149","id":1230149064,"node_id":"IC_kwDOBhmkcs5JUpXI","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:20:02Z","updated_at":"2022-08-29T11:20:02Z","author_association":"CONTRIBUTOR","body":"> PS：用echo_server起了一个服务，在另一台机器上通过rpc_press发请求，当qps较大时，通过brpc的监控页面，可以看到，运行时间越长，延时会越来越大。\r\n\r\n这是rpc_press的问题，已经修复：https://github.com/apache/incubator-brpc/pull/1763","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230149064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230150975","html_url":"https://github.com/apache/brpc/issues/1141#issuecomment-1230150975","issue_url":"https://api.github.com/repos/apache/brpc/issues/1141","id":1230150975,"node_id":"IC_kwDOBhmkcs5JUp0_","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:21:46Z","updated_at":"2022-08-29T11:21:46Z","author_association":"CONTRIBUTOR","body":"不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230150975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230160962","html_url":"https://github.com/apache/brpc/issues/1111#issuecomment-1230160962","issue_url":"https://api.github.com/repos/apache/brpc/issues/1111","id":1230160962,"node_id":"IC_kwDOBhmkcs5JUsRC","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:31:07Z","updated_at":"2022-08-29T11:31:07Z","author_association":"CONTRIBUTOR","body":"> > brpc不支持32位系统\r\n> > 1.有支持计划么？\r\n> > 2.如果自己去支持，是否具备可行性，成本多高？\r\n\r\n没有支持计划","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230160962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230161783","html_url":"https://github.com/apache/brpc/issues/1109#issuecomment-1230161783","issue_url":"https://api.github.com/repos/apache/brpc/issues/1109","id":1230161783,"node_id":"IC_kwDOBhmkcs5JUsd3","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:31:50Z","updated_at":"2022-08-29T11:31:50Z","author_association":"CONTRIBUTOR","body":"最新master已支持aarch64","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230161783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230181663","html_url":"https://github.com/apache/brpc/issues/1082#issuecomment-1230181663","issue_url":"https://api.github.com/repos/apache/brpc/issues/1082","id":1230181663,"node_id":"IC_kwDOBhmkcs5JUxUf","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:51:56Z","updated_at":"2022-08-29T11:51:56Z","author_association":"CONTRIBUTOR","body":"Fixed by #1838","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230181663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230184007","html_url":"https://github.com/apache/brpc/issues/1072#issuecomment-1230184007","issue_url":"https://api.github.com/repos/apache/brpc/issues/1072","id":1230184007,"node_id":"IC_kwDOBhmkcs5JUx5H","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T11:54:11Z","updated_at":"2022-08-29T11:54:11Z","author_association":"CONTRIBUTOR","body":"32位arm不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230184007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230321351","html_url":"https://github.com/apache/brpc/issues/1907#issuecomment-1230321351","issue_url":"https://api.github.com/repos/apache/brpc/issues/1907","id":1230321351,"node_id":"IC_kwDOBhmkcs5JVTbH","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T13:38:33Z","updated_at":"2022-08-29T13:38:33Z","author_association":"CONTRIBUTOR","body":"done->Run()不保证io结束才返回，这里数据的生命周期是和request_attachment的IOBuf生命周期绑在一起的，不太好确定结束的边界，bthread_local 也不可以。\r\n这里自己/上层管理具体是想怎么管理呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230321351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230328845","html_url":"https://github.com/apache/brpc/issues/1911#issuecomment-1230328845","issue_url":"https://api.github.com/repos/apache/brpc/issues/1911","id":1230328845,"node_id":"IC_kwDOBhmkcs5JVVQN","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-29T13:44:05Z","updated_at":"2022-08-29T13:44:05Z","author_association":"CONTRIBUTOR","body":"@liujianhua2016 可以试下把buf的长度改大点，改成128试试呢？可以提个patch哈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1230328845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231056215","html_url":"https://github.com/apache/brpc/issues/1335#issuecomment-1231056215","issue_url":"https://api.github.com/repos/apache/brpc/issues/1335","id":1231056215,"node_id":"IC_kwDOBhmkcs5JYG1X","user":{"login":"willwu5047","id":84893968,"node_id":"MDQ6VXNlcjg0ODkzOTY4","avatar_url":"https://avatars.githubusercontent.com/u/84893968?v=4","gravatar_id":"","url":"https://api.github.com/users/willwu5047","html_url":"https://github.com/willwu5047","followers_url":"https://api.github.com/users/willwu5047/followers","following_url":"https://api.github.com/users/willwu5047/following{/other_user}","gists_url":"https://api.github.com/users/willwu5047/gists{/gist_id}","starred_url":"https://api.github.com/users/willwu5047/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willwu5047/subscriptions","organizations_url":"https://api.github.com/users/willwu5047/orgs","repos_url":"https://api.github.com/users/willwu5047/repos","events_url":"https://api.github.com/users/willwu5047/events{/privacy}","received_events_url":"https://api.github.com/users/willwu5047/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T02:05:24Z","updated_at":"2022-08-30T02:05:24Z","author_association":"NONE","body":"@chenlei5662 把brpc内置static的bvar改成初始化之后手动分配","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231056215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231076371","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1231076371","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1231076371,"node_id":"IC_kwDOBhmkcs5JYLwT","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T02:43:29Z","updated_at":"2022-08-30T02:43:29Z","author_association":"CONTRIBUTOR","body":"It's a great contribution, and could you please share a related blog or doc for that pr? I think it will be a good learning material and we will post it to our official website, please consider this, thanks a lot.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231076371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231128605","html_url":"https://github.com/apache/brpc/issues/1907#issuecomment-1231128605","issue_url":"https://api.github.com/repos/apache/brpc/issues/1907","id":1231128605,"node_id":"IC_kwDOBhmkcs5JYYgd","user":{"login":"luliyucoordinate","id":17606906,"node_id":"MDQ6VXNlcjE3NjA2OTA2","avatar_url":"https://avatars.githubusercontent.com/u/17606906?v=4","gravatar_id":"","url":"https://api.github.com/users/luliyucoordinate","html_url":"https://github.com/luliyucoordinate","followers_url":"https://api.github.com/users/luliyucoordinate/followers","following_url":"https://api.github.com/users/luliyucoordinate/following{/other_user}","gists_url":"https://api.github.com/users/luliyucoordinate/gists{/gist_id}","starred_url":"https://api.github.com/users/luliyucoordinate/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luliyucoordinate/subscriptions","organizations_url":"https://api.github.com/users/luliyucoordinate/orgs","repos_url":"https://api.github.com/users/luliyucoordinate/repos","events_url":"https://api.github.com/users/luliyucoordinate/events{/privacy}","received_events_url":"https://api.github.com/users/luliyucoordinate/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T04:33:25Z","updated_at":"2022-08-30T04:33:25Z","author_association":"NONE","body":"> done->Run()不保证io结束才返回，这里数据的生命周期是和request_attachment的IOBuf生命周期绑在一起的，不太好确定结束的边界，bthread_local 也不可以。 这里自己/上层管理具体是想怎么管理呢？\r\n\r\n我大概能理解你的意思。我是这样理解的，deleter负责在io结束后真正的释放动作。 我有一个需求，如果我的value是一个shared_ptr，那么此时现在的deleter应该是一个ref-1的动作，但是现在的api好像没法实现？\r\n\r\n另外我还有一个问题关于fetch和cutn的。对于一个iobuf（这个iobuf实际的意义是一个std::vector<float[]>），我现在需要将每个float[]的片段拿出来，可以通过多次fetch吗，还是说fetch对一个iobuf只能发生一次。fetch得到的内存可以交给shared_ptr管理吗？比如说我的request是一个table的keys和values（table是一个<int64_t, std::shared_ptr<float[]>>类型），当我收到request的时候实际上iobuf已经分配好内存了，此时我能否将iobuf管理的内存交给我的table的shared_ptr管理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231128605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231209259","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1231209259","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1231209259,"node_id":"IC_kwDOBhmkcs5JYsMr","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T06:33:25Z","updated_at":"2022-08-30T06:35:54Z","author_association":"CONTRIBUTOR","body":"@zyearn PTAL. I removed `bazel/third_party/glog/0001-improvement-copts.patch` & rename `bazel/third_party/glog/0002-mark-override.patch` to a more meaningful name `0001-mark-override-resolve-warning.patch`. If you think the example of building with old version of bazel for user is not necessary, I can remove it.\r\n\r\nThe CI failure cannot be reproduced on my dev environment with GCC 9.4.0 & bazel 4.2.2 by running `CC=gcc CXX=g++ PURPOSE=compile-with-bazel-all-options sh build_in_travis_ci.sh`. I looked the source code, it shouldn't be such error. Please help to rerun the failed jobs if possible.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231209259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231210996","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1231210996","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1231210996,"node_id":"IC_kwDOBhmkcs5JYsn0","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T06:35:08Z","updated_at":"2022-08-30T06:35:08Z","author_association":"CONTRIBUTOR","body":"@Huixxi I didn't realize there was any special work. Please look the Bazel official document & some existing repo driven by Bazel. Please raise to me if there was truly something special with details, I can help to find some document about them.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231210996/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231382384","html_url":"https://github.com/apache/brpc/issues/1911#issuecomment-1231382384","issue_url":"https://api.github.com/repos/apache/brpc/issues/1911","id":1231382384,"node_id":"IC_kwDOBhmkcs5JZWdw","user":{"login":"liujianhua2016","id":22976845,"node_id":"MDQ6VXNlcjIyOTc2ODQ1","avatar_url":"https://avatars.githubusercontent.com/u/22976845?v=4","gravatar_id":"","url":"https://api.github.com/users/liujianhua2016","html_url":"https://github.com/liujianhua2016","followers_url":"https://api.github.com/users/liujianhua2016/followers","following_url":"https://api.github.com/users/liujianhua2016/following{/other_user}","gists_url":"https://api.github.com/users/liujianhua2016/gists{/gist_id}","starred_url":"https://api.github.com/users/liujianhua2016/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujianhua2016/subscriptions","organizations_url":"https://api.github.com/users/liujianhua2016/orgs","repos_url":"https://api.github.com/users/liujianhua2016/repos","events_url":"https://api.github.com/users/liujianhua2016/events{/privacy}","received_events_url":"https://api.github.com/users/liujianhua2016/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T09:06:22Z","updated_at":"2022-08-30T09:06:22Z","author_association":"NONE","body":"好的， 我稍后提个patch试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231382384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231498713","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1231498713","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1231498713,"node_id":"IC_kwDOBhmkcs5JZy3Z","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T10:52:38Z","updated_at":"2022-08-30T10:52:38Z","author_association":"CONTRIBUTOR","body":"> If you think the example of building with old version of bazel for user is not necessary, I can remove it.\r\n\r\nI think the example of building with old version of bazel is useful. No need to remove it.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231498713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231623806","html_url":"https://github.com/apache/brpc/pull/1913#issuecomment-1231623806","issue_url":"https://api.github.com/repos/apache/brpc/issues/1913","id":1231623806,"node_id":"IC_kwDOBhmkcs5JaRZ-","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T12:51:10Z","updated_at":"2022-08-30T12:51:10Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1231623806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232100012","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1232100012","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1232100012,"node_id":"IC_kwDOBhmkcs5JcFqs","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-30T19:53:28Z","updated_at":"2022-08-30T19:53:28Z","author_association":"MEMBER","body":"CI is fixed in the latest version. Could you merge master and submit again?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232100012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232526659","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1232526659","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1232526659,"node_id":"IC_kwDOBhmkcs5Jdt1D","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T06:41:56Z","updated_at":"2022-08-31T06:41:56Z","author_association":"CONTRIBUTOR","body":"@zyearn It works after rebase.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232526659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232946830","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1232946830","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1232946830,"node_id":"IC_kwDOBhmkcs5JfUaO","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T13:34:18Z","updated_at":"2022-08-31T13:34:18Z","author_association":"MEMBER","body":"LGTM. Thanks for the contribution.\r\n\r\nBtw, what do you think is the future work for improving Bazel in brpc?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232946830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232950946","html_url":"https://github.com/apache/brpc/pull/1899#issuecomment-1232950946","issue_url":"https://api.github.com/repos/apache/brpc/issues/1899","id":1232950946,"node_id":"IC_kwDOBhmkcs5JfVai","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T13:37:51Z","updated_at":"2022-08-31T13:37:51Z","author_association":"MEMBER","body":"https://github.com/apache/incubator-brpc/pull/1657 was merged.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232950946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232985061","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1232985061","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1232985061,"node_id":"IC_kwDOBhmkcs5Jfdvl","user":{"login":"0x2Adr1","id":2210950,"node_id":"MDQ6VXNlcjIyMTA5NTA=","avatar_url":"https://avatars.githubusercontent.com/u/2210950?v=4","gravatar_id":"","url":"https://api.github.com/users/0x2Adr1","html_url":"https://github.com/0x2Adr1","followers_url":"https://api.github.com/users/0x2Adr1/followers","following_url":"https://api.github.com/users/0x2Adr1/following{/other_user}","gists_url":"https://api.github.com/users/0x2Adr1/gists{/gist_id}","starred_url":"https://api.github.com/users/0x2Adr1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/0x2Adr1/subscriptions","organizations_url":"https://api.github.com/users/0x2Adr1/orgs","repos_url":"https://api.github.com/users/0x2Adr1/repos","events_url":"https://api.github.com/users/0x2Adr1/events{/privacy}","received_events_url":"https://api.github.com/users/0x2Adr1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T14:05:02Z","updated_at":"2022-08-31T14:05:02Z","author_association":"NONE","body":"Looks like I am coming a few minutes too late after the merge! There is a slight change to be made to make it work with Mac M1:\r\n\r\n```\r\n--- BUILD.bazel\r\n+++ BUILD.bazel\r\n@@ -48,7 +48,7 @@ LINKOPTS = [\r\n     \"-pthread\",\r\n     \"-ldl\",\r\n ] + select({\r\n-    \"@bazel_tools//tools/osx:darwin\": [\r\n+    \"@platforms//os:macos\": [\r\n         \"-framework CoreFoundation\",\r\n         \"-framework CoreGraphics\",\r\n         \"-framework CoreData\",\r\n@@ -206,7 +206,7 @@ BUTIL_SRCS = [\r\n     \"src/butil/recordio.cc\",\r\n     \"src/butil/popen.cpp\",\r\n ] + select({\r\n-    \"@bazel_tools//tools/osx:darwin\": [\r\n+    \"@platforms//os:macos\": [\r\n         \"src/butil/time/time_mac.cc\",\r\n         \"src/butil/mac/scoped_mach_port.cc\",\r\n     ],\r\n@@ -322,7 +322,7 @@ cc_library(\r\n         \"//bazel/config:brpc_with_glog\": [\"@com_github_google_glog//:glog\"],\r\n         \"//conditions:default\": [],\r\n     }) + select({\r\n-        \"@bazel_tools//tools/osx:darwin\": [\":macos_lib\"],\r\n+        \"@platforms//os:macos\": [\":macos_lib\"],\r\n         \"//conditions:default\": [],\r\n     }),\r\n )\r\n ```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1232985061/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233217055","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1233217055","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1233217055,"node_id":"IC_kwDOBhmkcs5JgWYf","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T17:25:14Z","updated_at":"2022-08-31T17:25:14Z","author_association":"MEMBER","body":"@0x2Adr1 Could you make a PR separately?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233217055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233275545","html_url":"https://github.com/apache/brpc/pull/1836#issuecomment-1233275545","issue_url":"https://api.github.com/repos/apache/brpc/issues/1836","id":1233275545,"node_id":"IC_kwDOBhmkcs5JgkqZ","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T18:28:40Z","updated_at":"2022-08-31T18:28:40Z","author_association":"MEMBER","body":"LGTM.\r\n\r\n@Tuvie 从上次提交到现在有什么bugfix吗？没有的话等 @wwbmmm 看看线上运行的稳定程度，没什么问题的话可以考虑合入了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233275545/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233276139","html_url":"https://github.com/apache/brpc/pull/1836#issuecomment-1233276139","issue_url":"https://api.github.com/repos/apache/brpc/issues/1836","id":1233276139,"node_id":"IC_kwDOBhmkcs5Jgkzr","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-31T18:29:20Z","updated_at":"2022-08-31T18:29:20Z","author_association":"MEMBER","body":"@Tuvie 有conflicts，需要merge master重新提交一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233276139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233661683","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1233661683","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1233661683,"node_id":"IC_kwDOBhmkcs5JiC7z","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T02:30:23Z","updated_at":"2022-09-01T02:30:23Z","author_association":"CONTRIBUTOR","body":"> LGTM. Thanks for the contribution.\r\n> \r\n> Btw, what do you think is the future work for improving Bazel in brpc?\r\n\r\nIt's good enough now. I don't think we need to adjust it unless we plan to change the project structure or Bazel bring a big change.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233661683/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233665399","html_url":"https://github.com/apache/brpc/issues/1912#issuecomment-1233665399","issue_url":"https://api.github.com/repos/apache/brpc/issues/1912","id":1233665399,"node_id":"IC_kwDOBhmkcs5JiD13","user":{"login":"jiangdongzi","id":17529657,"node_id":"MDQ6VXNlcjE3NTI5NjU3","avatar_url":"https://avatars.githubusercontent.com/u/17529657?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangdongzi","html_url":"https://github.com/jiangdongzi","followers_url":"https://api.github.com/users/jiangdongzi/followers","following_url":"https://api.github.com/users/jiangdongzi/following{/other_user}","gists_url":"https://api.github.com/users/jiangdongzi/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangdongzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangdongzi/subscriptions","organizations_url":"https://api.github.com/users/jiangdongzi/orgs","repos_url":"https://api.github.com/users/jiangdongzi/repos","events_url":"https://api.github.com/users/jiangdongzi/events{/privacy}","received_events_url":"https://api.github.com/users/jiangdongzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T02:37:49Z","updated_at":"2022-09-01T02:38:42Z","author_association":"NONE","body":"抓包分析, 与 https://github.com/openMF/android-client/issues/1005 这个有些类似, brpc无法理解, \"dynamic table update\"\r\n![image](https://user-images.githubusercontent.com/17529657/187820164-b31d399d-e939-437a-8456-189cd08378fa.png)\r\n这是nginx发给brpc server的第一个magic包, 如图 \r\n![image](https://user-images.githubusercontent.com/17529657/187820266-76424317-35e4-4043-94aa-afa6290ef4a7.png)\r\n\r\n@jamesge  @wwbmmm 麻烦看下 感觉是brpc对http2支持不全","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233665399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233703195","html_url":"https://github.com/apache/brpc/issues/1907#issuecomment-1233703195","issue_url":"https://api.github.com/repos/apache/brpc/issues/1907","id":1233703195,"node_id":"IC_kwDOBhmkcs5JiNEb","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T03:50:18Z","updated_at":"2022-09-01T03:50:18Z","author_association":"CONTRIBUTOR","body":"1. 这个可以考虑先把这块内存append_user_data到一个IOBuf里，然后不同query共享这个IOBuf，之后每次都把这个IOBuf append到cntl.response_attachment()上，IOBuf对指向的内存块本身是有refcount的，每次append()都只会操作refcount\r\n\r\n2. fetch会一次性返回所有的数据，且可能会发生拷贝（需要用户传一块内存进来）。如果分段取的话可以用cutn，当然也会发生拷贝。\r\n3. 内存复用的话，这里一个背景是IOBuf内部的内存不保证连续，可能是分段的。如果要复用内存，可以直接持有IOBuf，但这里复用内存有利有弊，复用减少拷贝，但是内存不连续可能导致读数据变慢。也可以选择第一次的时候拷贝一份，后面复用这一份，得结合业务场景来看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1233703195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1234138722","html_url":"https://github.com/apache/brpc/issues/1907#issuecomment-1234138722","issue_url":"https://api.github.com/repos/apache/brpc/issues/1907","id":1234138722,"node_id":"IC_kwDOBhmkcs5Jj3Zi","user":{"login":"luliyucoordinate","id":17606906,"node_id":"MDQ6VXNlcjE3NjA2OTA2","avatar_url":"https://avatars.githubusercontent.com/u/17606906?v=4","gravatar_id":"","url":"https://api.github.com/users/luliyucoordinate","html_url":"https://github.com/luliyucoordinate","followers_url":"https://api.github.com/users/luliyucoordinate/followers","following_url":"https://api.github.com/users/luliyucoordinate/following{/other_user}","gists_url":"https://api.github.com/users/luliyucoordinate/gists{/gist_id}","starred_url":"https://api.github.com/users/luliyucoordinate/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luliyucoordinate/subscriptions","organizations_url":"https://api.github.com/users/luliyucoordinate/orgs","repos_url":"https://api.github.com/users/luliyucoordinate/repos","events_url":"https://api.github.com/users/luliyucoordinate/events{/privacy}","received_events_url":"https://api.github.com/users/luliyucoordinate/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T11:20:15Z","updated_at":"2022-09-01T11:20:15Z","author_association":"NONE","body":"对于1我有些疑问，多个query如果不是共享一个static的IOBuf会有问题吧？我看IOBuf的引用计数不是线程安全的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1234138722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1234238460","html_url":"https://github.com/apache/brpc/issues/1907#issuecomment-1234238460","issue_url":"https://api.github.com/repos/apache/brpc/issues/1907","id":1234238460,"node_id":"IC_kwDOBhmkcs5JkPv8","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T12:52:59Z","updated_at":"2022-09-01T16:10:20Z","author_association":"CONTRIBUTOR","body":"这里重新解释下，简单理解的话可以认为IOBuf的线程安全性和shared_ptr的线程安全性是类似的\r\n\r\n具体的原因：IOBuf的线程安全性需要看具体会做什么样的操作，这里IOBuf::append(const IOBuf& other)执行的动作：\r\n遍历other里的每个Block，对于每个Block都执行\r\n1. 拷贝BlockRef对象\r\n2. Block的refcount+1\r\n其中2是线程安全的，因为block的引用计数成员nshared是原子变量。1是不是线程安全取决于other在拷贝期间有没有可能被并发修改，如果可能会被修改，那就是非线程安全的；如果不会被修改，是只读的，那就没问题。\r\n而整体append的线程安全性也是类似的，如果other不会被并发修改，那对other的拷贝也是线程安全的，但如果other可能会被修改，那就必然不是线程安全的。\r\n\r\n如果共享的IOBuf可能被并发修改怎么解决：本质上就是保护这个IOBuf的拷贝动作能够线程安全就可以，可以对append操作加一个锁，或者先加一个锁拷贝出一个IOBuf的副本，然后把这个副本move到response，就是cntl.response_attachment().append(const Movable& movable_other) ，两者是一样的。锁保护的对象就是共享的IOBuf\r\n\r\n对于IOBuf使用完后，对Block的ref-1，这个是线程安全的，因为这里会先atomic-1，如果减到0才会销毁block对象，能减到0说明已经没有其他任何人持有该Block的引用了。\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1234238460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1234258708","html_url":"https://github.com/apache/brpc/issues/1914#issuecomment-1234258708","issue_url":"https://api.github.com/repos/apache/brpc/issues/1914","id":1234258708,"node_id":"IC_kwDOBhmkcs5JkUsU","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-01T13:09:28Z","updated_at":"2022-09-01T13:09:45Z","author_association":"CONTRIBUTOR","body":"业务需求是想做服务端限流吗，可以参考下这个文档 https://github.com/apache/incubator-brpc/blob/master/docs/cn/auto_concurrency_limiter.md\r\n\r\n如果这个限流不能满足需求，可以参考这个限流的实现做自定义的策略开发，在ConcurrentLimiter里是可以做到统计qps信息的，而且可以比较及时地拒绝新请求。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1234258708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1235035533","html_url":"https://github.com/apache/brpc/issues/1914#issuecomment-1235035533","issue_url":"https://api.github.com/repos/apache/brpc/issues/1914","id":1235035533,"node_id":"IC_kwDOBhmkcs5JnSWN","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-02T03:43:51Z","updated_at":"2022-09-02T03:44:16Z","author_association":"CONTRIBUTOR","body":"> 业务需求是想做服务端限流吗，可以参考下这个文档 https://github.com/apache/incubator-brpc/blob/master/docs/cn/auto_concurrency_limiter.md\r\n> \r\n> 如果这个限流不能满足需求，可以参考这个限流的实现做自定义的策略开发，在ConcurrentLimiter里是可以做到统计qps信息的，而且可以比较及时地拒绝新请求。\r\n\r\n感谢大佬回答。\r\n\r\n大佬，我们这边想了解的是connections的server_connection中的out明显大于in是否说明这两个节点间的交互有问题？\r\n现在服务是正常跑的没有异常，in的统计值和服务入口qps是一致的，但是out明显比服务出口qps大。\r\n我们想知道是不是我们业务代码实现有bug，导致额外的输出开销。\r\n\r\n然后是关于降级和限流：\r\n我们这边有实现自定义限流，不过我们这边有的场景除了限流之外，还需要上游做降级。\r\n服务端自定义限流没有办法实现这样一种情况：感知到下游扛不住之后，让上游降低每个请求的算力，尽量让每个请求成功。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1235035533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236033096","html_url":"https://github.com/apache/brpc/pull/1836#issuecomment-1236033096","issue_url":"https://api.github.com/repos/apache/brpc/issues/1836","id":1236033096,"node_id":"IC_kwDOBhmkcs5JrF5I","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-03T02:55:27Z","updated_at":"2022-09-03T02:55:27Z","author_association":"CONTRIBUTOR","body":"> LGTM.\r\n> \r\n> @Tuvie 从上次提交到现在有什么bugfix吗？没有的话等 @wwbmmm 看看线上运行的稳定程度，没什么问题的话可以考虑合入了。\r\n\r\n目前暂时没有，也可以先等等","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236033096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236072156","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1236072156","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1236072156,"node_id":"IC_kwDOBhmkcs5JrPbc","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-03T08:06:28Z","updated_at":"2022-09-03T08:06:28Z","author_association":"MEMBER","body":"@hcoona MacOs上使用bazel似乎还有问题。烦请试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236072156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236233319","html_url":"https://github.com/apache/brpc/issues/1907#issuecomment-1236233319","issue_url":"https://api.github.com/repos/apache/brpc/issues/1907","id":1236233319,"node_id":"IC_kwDOBhmkcs5Jr2xn","user":{"login":"luliyucoordinate","id":17606906,"node_id":"MDQ6VXNlcjE3NjA2OTA2","avatar_url":"https://avatars.githubusercontent.com/u/17606906?v=4","gravatar_id":"","url":"https://api.github.com/users/luliyucoordinate","html_url":"https://github.com/luliyucoordinate","followers_url":"https://api.github.com/users/luliyucoordinate/followers","following_url":"https://api.github.com/users/luliyucoordinate/following{/other_user}","gists_url":"https://api.github.com/users/luliyucoordinate/gists{/gist_id}","starred_url":"https://api.github.com/users/luliyucoordinate/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luliyucoordinate/subscriptions","organizations_url":"https://api.github.com/users/luliyucoordinate/orgs","repos_url":"https://api.github.com/users/luliyucoordinate/repos","events_url":"https://api.github.com/users/luliyucoordinate/events{/privacy}","received_events_url":"https://api.github.com/users/luliyucoordinate/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-04T02:11:57Z","updated_at":"2022-09-04T02:11:57Z","author_association":"NONE","body":"了解了，感谢 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236233319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236465891","html_url":"https://github.com/apache/brpc/pull/1836#issuecomment-1236465891","issue_url":"https://api.github.com/repos/apache/brpc/issues/1836","id":1236465891,"node_id":"IC_kwDOBhmkcs5Jsvjj","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-05T01:33:41Z","updated_at":"2022-09-05T01:33:41Z","author_association":"CONTRIBUTOR","body":"> @Tuvie 有conflicts，需要merge master重新提交一下\r\n\r\ndone","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236465891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236475539","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1236475539","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1236475539,"node_id":"IC_kwDOBhmkcs5Jsx6T","user":{"login":"hcoona","id":712433,"node_id":"MDQ6VXNlcjcxMjQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/712433?v=4","gravatar_id":"","url":"https://api.github.com/users/hcoona","html_url":"https://github.com/hcoona","followers_url":"https://api.github.com/users/hcoona/followers","following_url":"https://api.github.com/users/hcoona/following{/other_user}","gists_url":"https://api.github.com/users/hcoona/gists{/gist_id}","starred_url":"https://api.github.com/users/hcoona/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hcoona/subscriptions","organizations_url":"https://api.github.com/users/hcoona/orgs","repos_url":"https://api.github.com/users/hcoona/repos","events_url":"https://api.github.com/users/hcoona/events{/privacy}","received_events_url":"https://api.github.com/users/hcoona/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-05T01:58:47Z","updated_at":"2022-09-05T01:58:47Z","author_association":"CONTRIBUTOR","body":"@guodongxiaren I've no macOS environment. Please help to post the error message & I'll try to investigate it. And please notice that @0x2Adr1 raise some additional fixes for macOS, please also try it.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236475539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236479890","html_url":"https://github.com/apache/brpc/pull/1031#issuecomment-1236479890","issue_url":"https://api.github.com/repos/apache/brpc/issues/1031","id":1236479890,"node_id":"IC_kwDOBhmkcs5Jsy-S","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-05T02:12:19Z","updated_at":"2022-09-05T02:12:19Z","author_association":"CONTRIBUTOR","body":"@hairet 这个PR和master冲突了，可以解决一下吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1236479890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237709666","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1237709666","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1237709666,"node_id":"IC_kwDOBhmkcs5JxfNi","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T06:25:39Z","updated_at":"2022-09-06T06:25:39Z","author_association":"CONTRIBUTOR","body":"Does this example meet your needs? https://github.com/apache/incubator-brpc/tree/master/example/build_with_old_bazel","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237709666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237717517","html_url":"https://github.com/apache/brpc/pull/1657#issuecomment-1237717517","issue_url":"https://api.github.com/repos/apache/brpc/issues/1657","id":1237717517,"node_id":"IC_kwDOBhmkcs5JxhIN","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T06:36:02Z","updated_at":"2022-09-06T06:36:02Z","author_association":"CONTRIBUTOR","body":"It's better to update the [getting_start document](https://github.com/apache/incubator-brpc/blob/master/docs/cn/getting_started.md)  (cn/en) with a new \"Compile brpc with bazel\" part under each platform, but I'm not familiar with bazel...","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237717517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237988051","html_url":"https://github.com/apache/brpc/issues/1914#issuecomment-1237988051","issue_url":"https://api.github.com/repos/apache/brpc/issues/1914","id":1237988051,"node_id":"IC_kwDOBhmkcs5JyjLT","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T10:51:19Z","updated_at":"2022-09-06T10:51:19Z","author_association":"CONTRIBUTOR","body":"> 我们这边想了解的是connections的server_connection中的out明显大于in是否说明这两个节点间的交互有问题？\r\n> 现在服务是正常跑的没有异常，in的统计值和服务入口qps是一致的，但是out明显比服务出口qps大。\r\n> 我们想知道是不是我们业务代码实现有bug，导致额外的输出开销。\r\n\r\n如果是h2协议的话，会有些Ack包被统计到out messages里了，导致out明显大于in。这个应该不是业务代码的问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237988051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237995056","html_url":"https://github.com/apache/brpc/issues/1915#issuecomment-1237995056","issue_url":"https://api.github.com/repos/apache/brpc/issues/1915","id":1237995056,"node_id":"IC_kwDOBhmkcs5Jyk4w","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T10:58:36Z","updated_at":"2022-09-06T10:58:36Z","author_association":"CONTRIBUTOR","body":"This is a good idea, brpc does not have integration tests yet. However, some existing unit tests are complex enough to cover integration scenarios, such as test/brpc_channel_unittest.cpp. Maybe we can extract these cases separately to make an integration test set.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1237995056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238033562","html_url":"https://github.com/apache/brpc/issues/1045#issuecomment-1238033562","issue_url":"https://api.github.com/repos/apache/brpc/issues/1045","id":1238033562,"node_id":"IC_kwDOBhmkcs5JyuSa","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T11:37:17Z","updated_at":"2022-09-06T11:37:17Z","author_association":"CONTRIBUTOR","body":"Fixed by https://github.com/apache/incubator-brpc/pull/1345","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238033562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238039148","html_url":"https://github.com/apache/brpc/issues/1919#issuecomment-1238039148","issue_url":"https://api.github.com/repos/apache/brpc/issues/1919","id":1238039148,"node_id":"IC_kwDOBhmkcs5Jyvps","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T11:44:19Z","updated_at":"2022-09-06T11:44:19Z","author_association":"CONTRIBUTOR","body":"You can change this O2 to O0: https://github.com/apache/incubator-brpc/blob/master/CMakeLists.txt#L115","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238039148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238044908","html_url":"https://github.com/apache/brpc/issues/1041#issuecomment-1238044908","issue_url":"https://api.github.com/repos/apache/brpc/issues/1041","id":1238044908,"node_id":"IC_kwDOBhmkcs5JyxDs","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T11:55:15Z","updated_at":"2022-09-06T11:55:15Z","author_association":"CONTRIBUTOR","body":"那就使用master分支吧，0.9.6是一个tag不能再改变","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238044908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238046776","html_url":"https://github.com/apache/brpc/issues/1914#issuecomment-1238046776","issue_url":"https://api.github.com/repos/apache/brpc/issues/1914","id":1238046776,"node_id":"IC_kwDOBhmkcs5Jyxg4","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T11:57:12Z","updated_at":"2022-09-06T11:57:12Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n好的，谢谢大佬解答，我这边确认下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238046776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238050016","html_url":"https://github.com/apache/brpc/issues/1019#issuecomment-1238050016","issue_url":"https://api.github.com/repos/apache/brpc/issues/1019","id":1238050016,"node_id":"IC_kwDOBhmkcs5JyyTg","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T12:00:12Z","updated_at":"2022-09-06T12:00:12Z","author_association":"CONTRIBUTOR","body":"master已支持arm64","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238050016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238185789","html_url":"https://github.com/apache/brpc/issues/1915#issuecomment-1238185789","issue_url":"https://api.github.com/repos/apache/brpc/issues/1915","id":1238185789,"node_id":"IC_kwDOBhmkcs5JzTc9","user":{"login":"loongs-zhang","id":38336731,"node_id":"MDQ6VXNlcjM4MzM2NzMx","avatar_url":"https://avatars.githubusercontent.com/u/38336731?v=4","gravatar_id":"","url":"https://api.github.com/users/loongs-zhang","html_url":"https://github.com/loongs-zhang","followers_url":"https://api.github.com/users/loongs-zhang/followers","following_url":"https://api.github.com/users/loongs-zhang/following{/other_user}","gists_url":"https://api.github.com/users/loongs-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/loongs-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loongs-zhang/subscriptions","organizations_url":"https://api.github.com/users/loongs-zhang/orgs","repos_url":"https://api.github.com/users/loongs-zhang/repos","events_url":"https://api.github.com/users/loongs-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/loongs-zhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T13:54:34Z","updated_at":"2022-09-06T13:54:34Z","author_association":"MEMBER","body":"Agree, the main purpose of integration test is to ensure that the new PR will not lead to the failure of important features.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238185789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238212871","html_url":"https://github.com/apache/brpc/issues/1919#issuecomment-1238212871","issue_url":"https://api.github.com/repos/apache/brpc/issues/1919","id":1238212871,"node_id":"IC_kwDOBhmkcs5JzaEH","user":{"login":"gaowayne","id":67108838,"node_id":"MDQ6VXNlcjY3MTA4ODM4","avatar_url":"https://avatars.githubusercontent.com/u/67108838?v=4","gravatar_id":"","url":"https://api.github.com/users/gaowayne","html_url":"https://github.com/gaowayne","followers_url":"https://api.github.com/users/gaowayne/followers","following_url":"https://api.github.com/users/gaowayne/following{/other_user}","gists_url":"https://api.github.com/users/gaowayne/gists{/gist_id}","starred_url":"https://api.github.com/users/gaowayne/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaowayne/subscriptions","organizations_url":"https://api.github.com/users/gaowayne/orgs","repos_url":"https://api.github.com/users/gaowayne/repos","events_url":"https://api.github.com/users/gaowayne/events{/privacy}","received_events_url":"https://api.github.com/users/gaowayne/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-06T14:15:00Z","updated_at":"2022-09-06T14:15:00Z","author_association":"NONE","body":"> You can change this O2 to O0: https://github.com/apache/incubator-brpc/blob/master/CMakeLists.txt#L115\r\n\r\nthank you so much. I tried that. I found I need change Makefile in root folder directly.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1238212871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1240250438","html_url":"https://github.com/apache/brpc/pull/1920#issuecomment-1240250438","issue_url":"https://api.github.com/repos/apache/brpc/issues/1920","id":1240250438,"node_id":"IC_kwDOBhmkcs5J7LhG","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T05:49:14Z","updated_at":"2022-09-08T05:49:14Z","author_association":"CONTRIBUTOR","body":"看起来是 https://github.com/apache/incubator-brpc/pull/736/files#diff-c0b6d01ee136503e4e5072ef2fbeaf851a31a2a17419ea51aa5385e440371ee5 这个PR引入的问题，原来的SplitStringIntoKeyValuePairs有trim的逻辑，而新的KeyValuePairsSplitter没有trim的逻辑\r\n\r\n@zyearn 看看怎么处理合适","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1240250438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1240492557","html_url":"https://github.com/apache/brpc/issues/1870#issuecomment-1240492557","issue_url":"https://api.github.com/repos/apache/brpc/issues/1870","id":1240492557,"node_id":"IC_kwDOBhmkcs5J8GoN","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-08T09:56:05Z","updated_at":"2022-09-08T09:56:05Z","author_association":"CONTRIBUTOR","body":" 可以在client的connection页面看一下错误数量有没有正确记录","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1240492557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1241453541","html_url":"https://github.com/apache/brpc/issues/1140#issuecomment-1241453541","issue_url":"https://api.github.com/repos/apache/brpc/issues/1140","id":1241453541,"node_id":"IC_kwDOBhmkcs5J_xPl","user":{"login":"zbhxlj","id":56293376,"node_id":"MDQ6VXNlcjU2MjkzMzc2","avatar_url":"https://avatars.githubusercontent.com/u/56293376?v=4","gravatar_id":"","url":"https://api.github.com/users/zbhxlj","html_url":"https://github.com/zbhxlj","followers_url":"https://api.github.com/users/zbhxlj/followers","following_url":"https://api.github.com/users/zbhxlj/following{/other_user}","gists_url":"https://api.github.com/users/zbhxlj/gists{/gist_id}","starred_url":"https://api.github.com/users/zbhxlj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zbhxlj/subscriptions","organizations_url":"https://api.github.com/users/zbhxlj/orgs","repos_url":"https://api.github.com/users/zbhxlj/repos","events_url":"https://api.github.com/users/zbhxlj/events{/privacy}","received_events_url":"https://api.github.com/users/zbhxlj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T03:21:49Z","updated_at":"2022-09-09T03:21:49Z","author_association":"NONE","body":"为什么呢，我也有这个疑问？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1241453541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1241462995","html_url":"https://github.com/apache/brpc/issues/1140#issuecomment-1241462995","issue_url":"https://api.github.com/repos/apache/brpc/issues/1140","id":1241462995,"node_id":"IC_kwDOBhmkcs5J_zjT","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T03:43:03Z","updated_at":"2022-09-09T03:43:03Z","author_association":"CONTRIBUTOR","body":"这个功能可以有，感兴趣的可以提个PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1241462995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1241709800","html_url":"https://github.com/apache/brpc/pull/1922#issuecomment-1241709800","issue_url":"https://api.github.com/repos/apache/brpc/issues/1922","id":1241709800,"node_id":"IC_kwDOBhmkcs5KAvzo","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-09T09:07:42Z","updated_at":"2022-09-09T09:07:42Z","author_association":"CONTRIBUTOR","body":"建议补充下相关单测","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1241709800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244807753","html_url":"https://github.com/apache/brpc/pull/1922#issuecomment-1244807753","issue_url":"https://api.github.com/repos/apache/brpc/issues/1922","id":1244807753,"node_id":"IC_kwDOBhmkcs5KMkJJ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T02:11:10Z","updated_at":"2022-09-13T02:11:10Z","author_association":"CONTRIBUTOR","body":"@yyweii 代码没什么问题了，可以补充一下文档和单测吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244807753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244860640","html_url":"https://github.com/apache/brpc/issues/1845#issuecomment-1244860640","issue_url":"https://api.github.com/repos/apache/brpc/issues/1845","id":1244860640,"node_id":"IC_kwDOBhmkcs5KMxDg","user":{"login":"cool1456","id":82799271,"node_id":"MDQ6VXNlcjgyNzk5Mjcx","avatar_url":"https://avatars.githubusercontent.com/u/82799271?v=4","gravatar_id":"","url":"https://api.github.com/users/cool1456","html_url":"https://github.com/cool1456","followers_url":"https://api.github.com/users/cool1456/followers","following_url":"https://api.github.com/users/cool1456/following{/other_user}","gists_url":"https://api.github.com/users/cool1456/gists{/gist_id}","starred_url":"https://api.github.com/users/cool1456/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool1456/subscriptions","organizations_url":"https://api.github.com/users/cool1456/orgs","repos_url":"https://api.github.com/users/cool1456/repos","events_url":"https://api.github.com/users/cool1456/events{/privacy}","received_events_url":"https://api.github.com/users/cool1456/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T03:46:17Z","updated_at":"2022-09-13T03:46:59Z","author_association":"NONE","body":"> > ![image](https://user-images.githubusercontent.com/82799271/179710523-f3c3e195-3402-4c4a-8531-11393e9ccdd6.png)\r\n> \r\n> 这个new出来的IOBuf用完有delete吗？\r\n\r\n这个buf是个引用类型，全文是\r\n``` c\r\nbutil::IOBuf &buf = new butil::IOBuf(controller->request_attachment)\r\n```\r\n试过delete buf还有一些释放内存的函数都没办法释放它","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244860640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244874417","html_url":"https://github.com/apache/brpc/issues/1845#issuecomment-1244874417","issue_url":"https://api.github.com/repos/apache/brpc/issues/1845","id":1244874417,"node_id":"IC_kwDOBhmkcs5KM0ax","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T04:13:42Z","updated_at":"2022-09-13T04:13:42Z","author_association":"CONTRIBUTOR","body":"IOBuf底层的block在释放时是不会归还给系统的，而是放在一个池子里，后续新建block的时候可以复用。所以delete buf是无法释放这部分内存的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244874417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244927981","html_url":"https://github.com/apache/brpc/issues/994#issuecomment-1244927981","issue_url":"https://api.github.com/repos/apache/brpc/issues/994","id":1244927981,"node_id":"IC_kwDOBhmkcs5KNBft","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T05:44:21Z","updated_at":"2022-09-13T05:44:21Z","author_association":"CONTRIBUTOR","body":"Fixed by https://github.com/apache/incubator-brpc-website/pull/93","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1244927981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245231503","html_url":"https://github.com/apache/brpc/issues/1335#issuecomment-1245231503","issue_url":"https://api.github.com/repos/apache/brpc/issues/1335","id":1245231503,"node_id":"IC_kwDOBhmkcs5KOLmP","user":{"login":"HSQ79815","id":38692085,"node_id":"MDQ6VXNlcjM4NjkyMDg1","avatar_url":"https://avatars.githubusercontent.com/u/38692085?v=4","gravatar_id":"","url":"https://api.github.com/users/HSQ79815","html_url":"https://github.com/HSQ79815","followers_url":"https://api.github.com/users/HSQ79815/followers","following_url":"https://api.github.com/users/HSQ79815/following{/other_user}","gists_url":"https://api.github.com/users/HSQ79815/gists{/gist_id}","starred_url":"https://api.github.com/users/HSQ79815/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HSQ79815/subscriptions","organizations_url":"https://api.github.com/users/HSQ79815/orgs","repos_url":"https://api.github.com/users/HSQ79815/repos","events_url":"https://api.github.com/users/HSQ79815/events{/privacy}","received_events_url":"https://api.github.com/users/HSQ79815/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T10:45:42Z","updated_at":"2022-09-13T10:45:42Z","author_association":"NONE","body":"@willwu5047 你好，可以详细一点吗？ 我现在也遇到了同样的问题。非常感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245231503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245296454","html_url":"https://github.com/apache/brpc/issues/1321#issuecomment-1245296454","issue_url":"https://api.github.com/repos/apache/brpc/issues/1321","id":1245296454,"node_id":"IC_kwDOBhmkcs5KObdG","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T11:46:43Z","updated_at":"2022-09-13T11:46:43Z","author_association":"CONTRIBUTOR","body":"Fixed by #1142","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245296454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245298581","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-1245298581","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":1245298581,"node_id":"IC_kwDOBhmkcs5KOb-V","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T11:48:32Z","updated_at":"2022-09-13T11:48:32Z","author_association":"CONTRIBUTOR","body":"master 已修复","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245298581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245583160","html_url":"https://github.com/apache/brpc/pull/1922#issuecomment-1245583160","issue_url":"https://api.github.com/repos/apache/brpc/issues/1922","id":1245583160,"node_id":"IC_kwDOBhmkcs5KPhc4","user":{"login":"yyweii","id":598529,"node_id":"MDQ6VXNlcjU5ODUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/598529?v=4","gravatar_id":"","url":"https://api.github.com/users/yyweii","html_url":"https://github.com/yyweii","followers_url":"https://api.github.com/users/yyweii/followers","following_url":"https://api.github.com/users/yyweii/following{/other_user}","gists_url":"https://api.github.com/users/yyweii/gists{/gist_id}","starred_url":"https://api.github.com/users/yyweii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyweii/subscriptions","organizations_url":"https://api.github.com/users/yyweii/orgs","repos_url":"https://api.github.com/users/yyweii/repos","events_url":"https://api.github.com/users/yyweii/events{/privacy}","received_events_url":"https://api.github.com/users/yyweii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T15:31:25Z","updated_at":"2022-09-13T15:31:25Z","author_association":"CONTRIBUTOR","body":"> 建议补充下相关单测\r\n\r\n已加","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245583160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245584379","html_url":"https://github.com/apache/brpc/pull/1922#issuecomment-1245584379","issue_url":"https://api.github.com/repos/apache/brpc/issues/1922","id":1245584379,"node_id":"IC_kwDOBhmkcs5KPhv7","user":{"login":"yyweii","id":598529,"node_id":"MDQ6VXNlcjU5ODUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/598529?v=4","gravatar_id":"","url":"https://api.github.com/users/yyweii","html_url":"https://github.com/yyweii","followers_url":"https://api.github.com/users/yyweii/followers","following_url":"https://api.github.com/users/yyweii/following{/other_user}","gists_url":"https://api.github.com/users/yyweii/gists{/gist_id}","starred_url":"https://api.github.com/users/yyweii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyweii/subscriptions","organizations_url":"https://api.github.com/users/yyweii/orgs","repos_url":"https://api.github.com/users/yyweii/repos","events_url":"https://api.github.com/users/yyweii/events{/privacy}","received_events_url":"https://api.github.com/users/yyweii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T15:32:18Z","updated_at":"2022-09-13T15:32:18Z","author_association":"CONTRIBUTOR","body":"> @yyweii 代码没什么问题了，可以补充一下文档和单测吗\r\n\r\n单测加好了。文档明天加上","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1245584379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246329840","html_url":"https://github.com/apache/brpc/pull/1922#issuecomment-1246329840","issue_url":"https://api.github.com/repos/apache/brpc/issues/1922","id":1246329840,"node_id":"IC_kwDOBhmkcs5KSXvw","user":{"login":"yyweii","id":598529,"node_id":"MDQ6VXNlcjU5ODUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/598529?v=4","gravatar_id":"","url":"https://api.github.com/users/yyweii","html_url":"https://github.com/yyweii","followers_url":"https://api.github.com/users/yyweii/followers","following_url":"https://api.github.com/users/yyweii/following{/other_user}","gists_url":"https://api.github.com/users/yyweii/gists{/gist_id}","starred_url":"https://api.github.com/users/yyweii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyweii/subscriptions","organizations_url":"https://api.github.com/users/yyweii/orgs","repos_url":"https://api.github.com/users/yyweii/repos","events_url":"https://api.github.com/users/yyweii/events{/privacy}","received_events_url":"https://api.github.com/users/yyweii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T06:58:48Z","updated_at":"2022-09-14T06:58:48Z","author_association":"CONTRIBUTOR","body":"> @yyweii 代码没什么问题了，可以补充一下文档和单测吗\r\n\r\n文档已加","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246329840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246638157","html_url":"https://github.com/apache/brpc/issues/836#issuecomment-1246638157","issue_url":"https://api.github.com/repos/apache/brpc/issues/836","id":1246638157,"node_id":"IC_kwDOBhmkcs5KTjBN","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T11:38:51Z","updated_at":"2022-09-14T11:38:51Z","author_association":"CONTRIBUTOR","body":"> 客户端通过http post 访问服务, content-type为urlencode时, brpc框架会如何处理? 如何让brpc框架不进行处理，交由service实现方处理? 非常感谢\r\n\r\n把request的proto定义成一个空的message就可以","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246638157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246639003","html_url":"https://github.com/apache/brpc/issues/831#issuecomment-1246639003","issue_url":"https://api.github.com/repos/apache/brpc/issues/831","id":1246639003,"node_id":"IC_kwDOBhmkcs5KTjOb","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T11:39:42Z","updated_at":"2022-09-14T11:39:42Z","author_association":"CONTRIBUTOR","body":"不是共享的，每个channel会有一个lb实例","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246639003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246643020","html_url":"https://github.com/apache/brpc/issues/808#issuecomment-1246643020","issue_url":"https://api.github.com/repos/apache/brpc/issues/808","id":1246643020,"node_id":"IC_kwDOBhmkcs5KTkNM","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T11:43:59Z","updated_at":"2022-09-14T11:43:59Z","author_association":"CONTRIBUTOR","body":"streaming_rpc和baidu_std是两个不同的协议。baidu_std用于一个request对应一个response的场景，streaming_rpc用于双向流式通信的场景","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246643020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246647571","html_url":"https://github.com/apache/brpc/issues/765#issuecomment-1246647571","issue_url":"https://api.github.com/repos/apache/brpc/issues/765","id":1246647571,"node_id":"IC_kwDOBhmkcs5KTlUT","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T11:48:50Z","updated_at":"2022-09-14T11:48:50Z","author_association":"CONTRIBUTOR","body":"master已支持多维度bvar，支持输出多维度prometheus信息：https://github.com/apache/incubator-brpc/blob/master/docs/cn/mbvar_c%2B%2B.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246647571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246650030","html_url":"https://github.com/apache/brpc/issues/745#issuecomment-1246650030","issue_url":"https://api.github.com/repos/apache/brpc/issues/745","id":1246650030,"node_id":"IC_kwDOBhmkcs5KTl6u","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-14T11:51:13Z","updated_at":"2022-09-14T11:51:13Z","author_association":"CONTRIBUTOR","body":"master已支持protobuf 3.7","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1246650030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1247964109","html_url":"https://github.com/apache/brpc/issues/707#issuecomment-1247964109","issue_url":"https://api.github.com/repos/apache/brpc/issues/707","id":1247964109,"node_id":"IC_kwDOBhmkcs5KYmvN","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T11:20:18Z","updated_at":"2022-09-15T11:20:18Z","author_association":"CONTRIBUTOR","body":"> 其就是把一个bthread任务丢给了一个work里的task_group里的remote_queue,然后取一个pl发signal,但是由于取pl的算法基于调用方线程id来算，则可能不是同一个pl\r\n\r\n不是同一个pl也没问题，因为steal task的时候会遍历所有group的remote_queue，而不仅仅是同一个pl下的group","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1247964109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1248010193","html_url":"https://github.com/apache/brpc/issues/682#issuecomment-1248010193","issue_url":"https://api.github.com/repos/apache/brpc/issues/682","id":1248010193,"node_id":"IC_kwDOBhmkcs5KYx_R","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T12:03:58Z","updated_at":"2022-09-15T12:03:58Z","author_association":"CONTRIBUTOR","body":"master已支持新版protobuf","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1248010193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249146109","html_url":"https://github.com/apache/brpc/issues/1921#issuecomment-1249146109","issue_url":"https://api.github.com/repos/apache/brpc/issues/1921","id":1249146109,"node_id":"IC_kwDOBhmkcs5KdHT9","user":{"login":"yyweii","id":598529,"node_id":"MDQ6VXNlcjU5ODUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/598529?v=4","gravatar_id":"","url":"https://api.github.com/users/yyweii","html_url":"https://github.com/yyweii","followers_url":"https://api.github.com/users/yyweii/followers","following_url":"https://api.github.com/users/yyweii/following{/other_user}","gists_url":"https://api.github.com/users/yyweii/gists{/gist_id}","starred_url":"https://api.github.com/users/yyweii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyweii/subscriptions","organizations_url":"https://api.github.com/users/yyweii/orgs","repos_url":"https://api.github.com/users/yyweii/repos","events_url":"https://api.github.com/users/yyweii/events{/privacy}","received_events_url":"https://api.github.com/users/yyweii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T09:32:09Z","updated_at":"2022-09-16T09:36:18Z","author_association":"CONTRIBUTOR","body":"这个选择还是交给用户比较好吧。如果喜欢立刻结束程序，那么回调函数里就不用catch异常，反之，在回调函数里catch所有的异常，并且根据业务给出合理的返回消息","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249146109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249150640","html_url":"https://github.com/apache/brpc/pull/1926#issuecomment-1249150640","issue_url":"https://api.github.com/repos/apache/brpc/issues/1926","id":1249150640,"node_id":"IC_kwDOBhmkcs5KdIaw","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T09:36:32Z","updated_at":"2022-09-16T09:36:32Z","author_association":"CONTRIBUTOR","body":"hi @tanzhongyi003 , PTAL","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249150640/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249199544","html_url":"https://github.com/apache/brpc/issues/657#issuecomment-1249199544","issue_url":"https://api.github.com/repos/apache/brpc/issues/657","id":1249199544,"node_id":"IC_kwDOBhmkcs5KdUW4","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T10:27:27Z","updated_at":"2022-09-16T10:27:27Z","author_association":"CONTRIBUTOR","body":"`example/atomic` this example is not exist","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249199544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249208505","html_url":"https://github.com/apache/brpc/issues/4#issuecomment-1249208505","issue_url":"https://api.github.com/repos/apache/brpc/issues/4","id":1249208505,"node_id":"IC_kwDOBhmkcs5KdWi5","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-16T10:38:03Z","updated_at":"2022-09-16T10:38:03Z","author_association":"CONTRIBUTOR","body":"没有计划","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1249208505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1250479428","html_url":"https://github.com/apache/brpc/pull/1927#issuecomment-1250479428","issue_url":"https://api.github.com/repos/apache/brpc/issues/1927","id":1250479428,"node_id":"IC_kwDOBhmkcs5KiM1E","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T02:24:20Z","updated_at":"2022-09-19T02:24:20Z","author_association":"CONTRIBUTOR","body":"这个可能会影响对现有用户代码的兼容性，要不加个gflag控制一下？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1250479428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1250623377","html_url":"https://github.com/apache/brpc/pull/1926#issuecomment-1250623377","issue_url":"https://api.github.com/repos/apache/brpc/issues/1926","id":1250623377,"node_id":"IC_kwDOBhmkcs5Kiv-R","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-19T06:36:54Z","updated_at":"2022-09-19T06:36:54Z","author_association":"MEMBER","body":"thanks","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1250623377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1252265327","html_url":"https://github.com/apache/brpc/pull/1927#issuecomment-1252265327","issue_url":"https://api.github.com/repos/apache/brpc/issues/1927","id":1252265327,"node_id":"IC_kwDOBhmkcs5KpA1v","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-20T12:11:36Z","updated_at":"2022-09-20T12:11:36Z","author_association":"CONTRIBUTOR","body":"> 这个可能会影响对现有用户代码的兼容性，要不加个gflag控制一下？\r\n\r\ndone","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1252265327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1253126854","html_url":"https://github.com/apache/brpc/pull/1927#issuecomment-1253126854","issue_url":"https://api.github.com/repos/apache/brpc/issues/1927","id":1253126854,"node_id":"IC_kwDOBhmkcs5KsTLG","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T02:24:36Z","updated_at":"2022-09-21T02:24:36Z","author_association":"CONTRIBUTOR","body":"CI单测挂了。加了gflag之后，原来的单测应该不用改了，可以加个专门针对这个gflag的单测 @chenBright ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1253126854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1253644605","html_url":"https://github.com/apache/brpc/issues/1930#issuecomment-1253644605","issue_url":"https://api.github.com/repos/apache/brpc/issues/1930","id":1253644605,"node_id":"IC_kwDOBhmkcs5KuRk9","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T12:33:35Z","updated_at":"2022-09-21T12:33:35Z","author_association":"CONTRIBUTOR","body":"应该是触发不了连接超时导致的熔断","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1253644605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1253910442","html_url":"https://github.com/apache/brpc/pull/1922#issuecomment-1253910442","issue_url":"https://api.github.com/repos/apache/brpc/issues/1922","id":1253910442,"node_id":"IC_kwDOBhmkcs5KvSeq","user":{"login":"thorneliu","id":10826201,"node_id":"MDQ6VXNlcjEwODI2MjAx","avatar_url":"https://avatars.githubusercontent.com/u/10826201?v=4","gravatar_id":"","url":"https://api.github.com/users/thorneliu","html_url":"https://github.com/thorneliu","followers_url":"https://api.github.com/users/thorneliu/followers","following_url":"https://api.github.com/users/thorneliu/following{/other_user}","gists_url":"https://api.github.com/users/thorneliu/gists{/gist_id}","starred_url":"https://api.github.com/users/thorneliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorneliu/subscriptions","organizations_url":"https://api.github.com/users/thorneliu/orgs","repos_url":"https://api.github.com/users/thorneliu/repos","events_url":"https://api.github.com/users/thorneliu/events{/privacy}","received_events_url":"https://api.github.com/users/thorneliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-21T15:59:07Z","updated_at":"2022-09-22T02:02:25Z","author_association":"CONTRIBUTOR","body":"Hi guys,\r\n\r\nFYI. 我这里基于[nacos-cli ](https://github.com/nacos-group/nacos-sdk-cpp)实现了另外一个版本的 nacos naming service:\r\nhttps://github.com/thorneliu/incubator-brpc/commit/2cf39b6d0b91318575901eba9adf00b545600f84\r\n\r\n基于这个patch, client可以:\r\n```\r\nstd::string nacosurl(\"nacos://serverAddress/namespace/groupName/serviceName/clusterId\");\r\nchannel.Init(nacosurl.c_str(), FLAGS_load_balancer.c_str(), &options)\r\n```\r\n\r\n这个naming service是通过nacos cpp sdk订阅nacos服务的服务实例变化来更新servernodes的; \r\n不好的地方在于这个实现引入了第三方库的依赖\r\n\r\n@yyweii @serverglen ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1253910442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1254595392","html_url":"https://github.com/apache/brpc/issues/1930#issuecomment-1254595392","issue_url":"https://api.github.com/repos/apache/brpc/issues/1930","id":1254595392,"node_id":"IC_kwDOBhmkcs5Kx5tA","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-22T06:40:46Z","updated_at":"2022-09-22T06:40:46Z","author_association":"CONTRIBUTOR","body":"如果出现连续三次连接超时，brpc会把[连接超时作为网络不可达来处理](https://github.com/apache/incubator-brpc/blob/3e054ab3a521ed66eb19ff1dd124f6303cfad537/src/brpc/socket.cpp#L1358)，进一步的对这个socket进行熔断。timeout 设置得过小时总是会先出发 rpc timeout，导致上面这段逻辑触发不了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1254595392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1254881089","html_url":"https://github.com/apache/brpc/issues/1809#issuecomment-1254881089","issue_url":"https://api.github.com/repos/apache/brpc/issues/1809","id":1254881089,"node_id":"IC_kwDOBhmkcs5Ky_dB","user":{"login":"BiteTheDDDDt","id":7939630,"node_id":"MDQ6VXNlcjc5Mzk2MzA=","avatar_url":"https://avatars.githubusercontent.com/u/7939630?v=4","gravatar_id":"","url":"https://api.github.com/users/BiteTheDDDDt","html_url":"https://github.com/BiteTheDDDDt","followers_url":"https://api.github.com/users/BiteTheDDDDt/followers","following_url":"https://api.github.com/users/BiteTheDDDDt/following{/other_user}","gists_url":"https://api.github.com/users/BiteTheDDDDt/gists{/gist_id}","starred_url":"https://api.github.com/users/BiteTheDDDDt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BiteTheDDDDt/subscriptions","organizations_url":"https://api.github.com/users/BiteTheDDDDt/orgs","repos_url":"https://api.github.com/users/BiteTheDDDDt/repos","events_url":"https://api.github.com/users/BiteTheDDDDt/events{/privacy}","received_events_url":"https://api.github.com/users/BiteTheDDDDt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-22T11:16:56Z","updated_at":"2022-09-22T11:16:56Z","author_association":"NONE","body":"从clang14升级到clang15，又遇到了类似的问题\r\n```cpp\r\nld.lld: error: duplicate symbol: guard variable for butil::detail::ClassNameHelper<long>::name[abi:cxx11]\r\n>>> defined at doris_main.cpp\r\n>>>            src/service/CMakeFiles/doris_be.dir/doris_main.cpp.o:(guard variable for butil::detail::ClassNameHelper<long>::name[abi:cxx11])\r\n>>> defined at key.cpp.o:(.bss._ZGVN5butil6detail15ClassNameHelperIlE4nameB5cxx11E+0x0) in archive /mnt/disk1/pxl/doris/thirdparty/installed//lib64/libbrpc.a\r\n\r\nld.lld: error: duplicate symbol: guard variable for butil::detail::ClassNameHelper<bvar::detail::MaxTo<long>>::name[abi:cxx11]\r\n>>> defined at doris_main.cpp\r\n>>>            src/service/CMakeFiles/doris_be.dir/doris_main.cpp.o:(guard variable for butil::detail::ClassNameHelper<bvar::detail::MaxTo<long>>::name[abi:cxx11])\r\n>>> defined at key.cpp.o:(.bss._ZGVN5butil6detail15ClassNameHelperIN4bvar6detail5MaxToIlEEE4nameB5cxx11E+0x0) in archive /mnt/disk1/pxl/doris/thirdparty/installed//lib64/libbrpc.a\r\n\r\nld.lld: error: duplicate symbol: guard variable for butil::detail::ClassNameHelper<bvar::detail::AddTo<long>>::name[abi:cxx11]\r\n>>> defined at rpc_fn_call.cpp\r\n>>>            rpc_fn_call.cpp.o:(guard variable for butil::detail::ClassNameHelper<bvar::detail::AddTo<long>>::name[abi:cxx11]) in archive src/exprs/libExprs.a\r\n>>> defined at task_control.cpp.o:(.bss._ZGVN5butil6detail15ClassNameHelperIN4bvar6detail5AddToIlEEE4nameB5cxx11E+0x0) in archive /mnt/disk1/pxl/doris/thirdparty/installed//lib64/libbrpc.a\r\n\r\nld.lld: error: duplicate symbol: guard variable for butil::detail::ClassNameHelper<int>::name[abi:cxx11]\r\n>>> defined at rpc_fn_call.cpp\r\n>>>            rpc_fn_call.cpp.o:(guard variable for butil::detail::ClassNameHelper<int>::name[abi:cxx11]) in archive src/exprs/libExprs.a\r\n>>> defined at index_service.cpp.o:(.bss._ZGVN5butil6detail15ClassNameHelperIiE4nameB5cxx11E+0x0) in archive /mnt/disk1/pxl/doris/thirdparty/installed//lib64/libbrpc.a\r\n\r\nld.lld: error: duplicate symbol: guard variable for butil::detail::ClassNameHelper<bvar::detail::AddTo<int>>::name[abi:cxx11]\r\n>>> defined at rpc_fn_call.cpp\r\n>>>            rpc_fn_call.cpp.o:(guard variable for butil::detail::ClassNameHelper<bvar::detail::AddTo<int>>::name[abi:cxx11]) in archive src/exprs/libExprs.a\r\n>>> defined at index_service.cpp.o:(.bss._ZGVN5butil6detail15ClassNameHelperIN4bvar6detail5AddToIiEEE4nameB5cxx11E+0x0) in archive /mnt/disk1/pxl/doris/thirdparty/installed//lib64/libbrpc.a\r\nclang-15: error: linker command failed with exit code 1\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1254881089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1254903275","html_url":"https://github.com/apache/brpc/issues/1809#issuecomment-1254903275","issue_url":"https://api.github.com/repos/apache/brpc/issues/1809","id":1254903275,"node_id":"IC_kwDOBhmkcs5KzE3r","user":{"login":"BiteTheDDDDt","id":7939630,"node_id":"MDQ6VXNlcjc5Mzk2MzA=","avatar_url":"https://avatars.githubusercontent.com/u/7939630?v=4","gravatar_id":"","url":"https://api.github.com/users/BiteTheDDDDt","html_url":"https://github.com/BiteTheDDDDt","followers_url":"https://api.github.com/users/BiteTheDDDDt/followers","following_url":"https://api.github.com/users/BiteTheDDDDt/following{/other_user}","gists_url":"https://api.github.com/users/BiteTheDDDDt/gists{/gist_id}","starred_url":"https://api.github.com/users/BiteTheDDDDt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BiteTheDDDDt/subscriptions","organizations_url":"https://api.github.com/users/BiteTheDDDDt/orgs","repos_url":"https://api.github.com/users/BiteTheDDDDt/repos","events_url":"https://api.github.com/users/BiteTheDDDDt/events{/privacy}","received_events_url":"https://api.github.com/users/BiteTheDDDDt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-22T11:39:32Z","updated_at":"2022-09-22T11:39:32Z","author_association":"NONE","body":"试了一下用ld是可以的,lld不行\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1254903275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1256855408","html_url":"https://github.com/apache/brpc/pull/1927#issuecomment-1256855408","issue_url":"https://api.github.com/repos/apache/brpc/issues/1927","id":1256855408,"node_id":"IC_kwDOBhmkcs5K6hdw","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-24T04:37:27Z","updated_at":"2022-09-24T04:37:27Z","author_association":"CONTRIBUTOR","body":"> CI单测挂了。加了gflag之后，原来的单测应该不用改了，可以加个专门针对这个gflag的单测 @chenBright\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1256855408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1256855895","html_url":"https://github.com/apache/brpc/pull/1927#issuecomment-1256855895","issue_url":"https://api.github.com/repos/apache/brpc/issues/1927","id":1256855895,"node_id":"IC_kwDOBhmkcs5K6hlX","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-24T04:38:19Z","updated_at":"2022-09-24T04:38:19Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 加单测了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1256855895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]