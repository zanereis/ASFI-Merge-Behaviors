[{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/943927809","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-943927809","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":943927809,"node_id":"IC_kwDOApKMps44QzIB","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-15T02:13:20Z","updated_at":"2021-10-15T02:13:20Z","author_association":"MEMBER","body":"The full test battery is passing locally:\r\n\r\n<details><summary>test results</summary>\r\n\r\n```bash\r\nINFO: Elapsed time: 2192.813s, Critical Path: 171.12s\r\nINFO: 5574 processes: 2392 internal, 3182 local.\r\nINFO: Build completed successfully, 5574 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.0s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.3s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.4s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.7s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 0.9s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 3.3s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 0.5s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 0.6s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 1.1s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.5s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 1.1s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 0.6s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 0.9s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 0.5s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.4s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 1.0s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 1.0s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 1.3s\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 1.0s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.0s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.3s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.1s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.2s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.1s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 0.4s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.4s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 0.4s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 0.7s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 1.4s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 2.0s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.4s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 5.4s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 0.5s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.4s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.4s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 0.9s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 1.3s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 0.7s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.4s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 1.2s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 0.7s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 0.6s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 0.9s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 0.7s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 0.8s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 0.8s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 1.5s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 0.7s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 0.8s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 0.7s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 0.8s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 0.9s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 1.0s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 0.7s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 0.6s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 1.4s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 0.6s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 0.5s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 2.9s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.7s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 1.0s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 0.9s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 0.6s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.4s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 0.7s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 5.7s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.4s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 2.7s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 2.6s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 3.0s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 10.8s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.0s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 1.0s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 1.0s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 1.1s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 1.0s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 1.0s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 1.1s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 1.0s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.0s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 1.0s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 1.0s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 1.0s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 0.9s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 1.3s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 0.6s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 0.6s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 0.6s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 0.7s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 0.9s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.7s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 0.8s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 0.7s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 1.3s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.6s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.5s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 0.9s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 1.0s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.3s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 1.5s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 0.5s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 2.1s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 1.0s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 5.5s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 4.2s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 2.2s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 7.0s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 1.9s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 2.0s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 13.7s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 0.9s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 0.5s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 1.7s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 4.2s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 2.2s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 3.7s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.8s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.5s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 1.5s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 0.9s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 0.7s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 1.6s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 1.0s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 2.7s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 1.2s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 0.6s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 0.9s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 0.7s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 1.5s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 4.7s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 1.5s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 1.9s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 2.1s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.6s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 0.4s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 2.7s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.6s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 1.2s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 0.7s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.7s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 0.5s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 1.0s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 0.6s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 0.8s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.4s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.4s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 0.7s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 0.9s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.4s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 0.5s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 2.7s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 1.6s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.4s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 0.4s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 0.9s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.5s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.3s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 1.6s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.4s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 0.5s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 3.2s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.4s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 0.8s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 3.9s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 3.1s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 1.4s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.1s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 0.8s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 1.3s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 2.2s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 1.0s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 1.5s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 1.0s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.5s\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                            PASSED in 36.3s\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.1s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.1s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.1s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.1s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 36.2s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.5s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 0.9s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.4s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 1.5s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.5s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.5s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.4s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.3s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 1.5s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 1.3s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.9s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 0.9s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 0.8s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.6s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.4s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 0.5s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 1.3s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 0.7s\r\n\r\nExecuted 233 out of 233 tests: 233 tests pass.\r\n```\r\n\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/943927809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/944410017","html_url":"https://github.com/apache/incubator-heron/issues/3453#issuecomment-944410017","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3453","id":944410017,"node_id":"IC_kwDOApKMps44So2h","user":{"login":"kirsteend","id":20645543,"node_id":"MDQ6VXNlcjIwNjQ1NTQz","avatar_url":"https://avatars.githubusercontent.com/u/20645543?v=4","gravatar_id":"","url":"https://api.github.com/users/kirsteend","html_url":"https://github.com/kirsteend","followers_url":"https://api.github.com/users/kirsteend/followers","following_url":"https://api.github.com/users/kirsteend/following{/other_user}","gists_url":"https://api.github.com/users/kirsteend/gists{/gist_id}","starred_url":"https://api.github.com/users/kirsteend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirsteend/subscriptions","organizations_url":"https://api.github.com/users/kirsteend/orgs","repos_url":"https://api.github.com/users/kirsteend/repos","events_url":"https://api.github.com/users/kirsteend/events{/privacy}","received_events_url":"https://api.github.com/users/kirsteend/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-15T15:52:14Z","updated_at":"2021-10-15T15:52:14Z","author_association":"NONE","body":"@joshfischer1108 I'm new to open source contribution and would love to take a stab at contributing this if its still up for grabs.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/944410017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/944974133","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-944974133","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":944974133,"node_id":"IC_kwDOApKMps44Uyk1","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-16T18:18:34Z","updated_at":"2021-10-16T18:18:34Z","author_association":"MEMBER","body":"@nicknezis thank you for fixing the build script! I think the next thing to work on is exercising the Python daemons...\r\n\r\nDo you think it would be handy to allow users to add to the Pod `tolerations` and the `metadata`? The Heron supplied values would take precedence, of course.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/944974133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945050628","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-945050628","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":945050628,"node_id":"IC_kwDOApKMps44VFQE","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-17T05:05:46Z","updated_at":"2021-10-17T05:05:46Z","author_association":"CONTRIBUTOR","body":"I think we're ok with `metadata` because there are properties which can set the labels and annotations. Tolerations I'm not as sure about. If my Pod Template has tolerations, will the logic currently wipe that out? I think it would make sense for the tolerations to persist.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945050628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945152865","html_url":"https://github.com/apache/incubator-heron/issues/3453#issuecomment-945152865","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3453","id":945152865,"node_id":"IC_kwDOApKMps44VeNh","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-17T16:17:52Z","updated_at":"2021-10-17T16:17:52Z","author_association":"MEMBER","body":"@kirsteend We would appreciate your contribution. How can I help you start digging in?","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945152865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945160111","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-945160111","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":945160111,"node_id":"IC_kwDOApKMps44Vf-v","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-17T17:05:59Z","updated_at":"2021-10-17T17:05:59Z","author_association":"MEMBER","body":"> If my Pod Template has tolerations, will the logic currently wipe that out?\r\n\r\nThe current logic will discard all user-provided `tolerations` and replace them with the Heron default values. Should we be replacing the Heron provided defaults with the values provided in the Pod Template? Or merge with them with Herons giving the Heron values precedence?","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945160111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945310763","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-945310763","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":945310763,"node_id":"IC_kwDOApKMps44WEwr","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-18T02:26:12Z","updated_at":"2021-10-18T02:26:12Z","author_association":"CONTRIBUTOR","body":"This is a good question. I think the merging would be best because there currently is no other way to add tolerations if they are desired.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945310763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945343876","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-945343876","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":945343876,"node_id":"IC_kwDOApKMps44WM2E","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-18T04:06:14Z","updated_at":"2021-10-18T04:06:14Z","author_association":"MEMBER","body":"Simple enough set of changes given the tweaks I made earlier. The full battery of tests is passing locally - here is to hoping TravisCI is in a good mood 🤞🏼.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945343876/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945685997","html_url":"https://github.com/apache/incubator-heron/issues/3719#issuecomment-945685997","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3719","id":945685997,"node_id":"IC_kwDOApKMps44XgXt","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-18T11:50:52Z","updated_at":"2021-10-18T11:50:52Z","author_association":"CONTRIBUTOR","body":"Which Heron image were you using? How was the image built?\n\nOn Mon, Oct 18, 2021, 6:31 AM Windham Wong ***@***.***> wrote:\n\n> I create this issue for tracking the issue of, deploying Heron to\n> Kubernetes with Helm, having issue with zookeeper.\n> Please feel free to leave your related case and log here.\n>\n> TODO:\n> I am trying to solve the issue if this is a known issue.\n>\n> The log of zookeeper is listed as below:\n>\n> Validating enviornment\n>\n> ZK_REPLICAS=3\n>\n> MY_ID=1\n>\n> ZK_LOG_LEVEL=INFO\n>\n> ZK_DATA_DIR=/var/lib/zookeeper/data\n>\n> ZK_DATA_LOG_DIR=/var/lib/zookeeper/log\n>\n> ZK_LOG_DIR=var/log/zookeeper\n>\n> ZK_CLIENT_PORT=2181\n>\n> ZK_SERVER_PORT=2888\n>\n> ZK_ELECTION_PORT=3888\n>\n> ZK_TICK_TIME=2000\n>\n> ZK_INIT_LIMIT=10\n>\n> ZK_SYNC_LIMIT=5\n>\n> ZK_MAX_CLIENT_CNXNS=60\n>\n> ZK_MIN_SESSION_TIMEOUT=4000\n>\n> ZK_MAX_SESSION_TIMEOUT=40000\n>\n> ZK_HEAP_SIZE=256M\n>\n> ZK_SNAP_RETAIN_COUNT=3\n>\n> ZK_PURGE_INTERVAL=1\n>\n> ENSEMBLE\n>\n> server.1=heron-zookeeper-0.heron-zookeeper-headless.default.svc.cluster.local:2888:3888\n>\n> server.2=heron-zookeeper-1.heron-zookeeper-headless.default.svc.cluster.local:2888:3888\n>\n> server.3=heron-zookeeper-2.heron-zookeeper-headless.default.svc.cluster.local:2888:3888\n>\n> Enviorment validation successful\n>\n> rm: cannot remove '/opt/zookeeper/conf/zookeeper.conf': Permission denied\n>\n> Creating ZooKeeper configuration\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 92: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 93: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 94: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 95: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 96: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 97: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 98: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 99: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 100: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 101: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 102: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 103: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 104: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 105: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 108: /opt/zookeeper/conf/zookeeper.conf: Permission denied\n>\n> Wrote ZooKeeper configuration file to /opt/zookeeper/conf/zookeeper.conf\n>\n> rm: cannot remove '/opt/zookeeper/conf/log4j.properties': Permission denied\n>\n> Creating ZooKeeper log4j configuration\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 138: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 139: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 140: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 141: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 142: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 143: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 144: /opt/zookeeper/conf/log4j.properties: Permission denied\n>\n> Wrote log4j configuration to /opt/zookeeper/conf/log4j.properties\n>\n> Creating ZooKeeper data directories and setting permissions\n>\n> mkdir: cannot create directory ‘var’: Permission denied\n>\n> chown: invalid user: ‘zookeeper:zookeeper’\n>\n> Created ZooKeeper data directories and set permissions in /var/lib/zookeeper/data\n>\n> Creating JVM configuration file\n>\n> Wrote JVM configuration to /opt/zookeeper/conf/java.env\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 151: /opt/zookeeper/conf/java.env: Permission denied\n>\n> /opt/zookeeper/scripts/generate-zookeeper-config.sh: line 152: /opt/zookeeper/conf/java.env: Permission denied\n>\n> ZooKeeper JMX enabled by default\n>\n> Using config: /opt/zookeeper/conf/zookeeper.conf\n>\n> mkdir: cannot create directory ‘data’: Permission denied\n>\n> mkdir: cannot create directory ‘/opt/zookeeper/bin/../logs’: Permission denied\n>\n> 2021-10-18 10:22:57,409 [myid:] - INFO  ***@***.*** - Reading configuration from: /opt/zookeeper/conf/zookeeper.conf\n>\n> 2021-10-18 10:22:57,415 [myid:] - WARN  ***@***.*** - data/zookeeper is relative. Prepend ./ to indicate that you're sure!\n>\n> 2021-10-18 10:22:57,425 [myid:] - INFO  ***@***.*** - clientPortAddress is 0.0.0.0:2181\n>\n> 2021-10-18 10:22:57,426 [myid:] - INFO  ***@***.*** - secureClientPort is not set\n>\n> 2021-10-18 10:22:57,432 [myid:] - INFO  ***@***.*** - autopurge.snapRetainCount set to 3\n>\n> 2021-10-18 10:22:57,433 [myid:] - INFO  ***@***.*** - autopurge.purgeInterval set to 1\n>\n> 2021-10-18 10:22:57,434 [myid:] - WARN  ***@***.*** - Either no config or no quorum defined in config, running  in standalone mode\n>\n> 2021-10-18 10:22:57,439 [myid:] - INFO  ***@***.*** - Log4j 1.2 jmx support found and enabled.\n>\n> 2021-10-18 10:22:57,439 [myid:] - INFO  ***@***.*** - Purge task started.\n>\n> 2021-10-18 10:22:57,455 [myid:] - INFO  ***@***.*** - Reading configuration from: /opt/zookeeper/conf/zookeeper.conf\n>\n> 2021-10-18 10:22:57,459 [myid:] - WARN  ***@***.*** - data/zookeeper is relative. Prepend ./ to indicate that you're sure!\n>\n> 2021-10-18 10:22:57,464 [myid:] - INFO  ***@***.*** - zookeeper.snapshot.trust.empty : false\n>\n> 2021-10-18 10:22:57,494 [myid:] - INFO  ***@***.*** - clientPortAddress is 0.0.0.0:2181\n>\n> 2021-10-18 10:22:57,494 [myid:] - INFO  ***@***.*** - secureClientPort is not set\n>\n> 2021-10-18 10:22:57,495 [myid:] - INFO  ***@***.*** - Starting server\n>\n> 2021-10-18 10:22:57,495 [myid:] - ERROR ***@***.*** - Error occurred while purging.\n>\n> org.apache.zookeeper.server.persistence.FileTxnSnapLog$DatadirException: Unable to create data directory data/zookeeper/version-2\n>\n>         at org.apache.zookeeper.server.persistence.FileTxnSnapLog.<init>(FileTxnSnapLog.java:127)\n>\n>         at org.apache.zookeeper.server.PurgeTxnLog.purge(PurgeTxnLog.java:79)\n>\n>         at org.apache.zookeeper.server.DatadirCleanupManager$PurgeTask.run(DatadirCleanupManager.java:140)\n>\n>         at java.base/java.util.TimerThread.mainLoop(Timer.java:556)\n>\n>         at java.base/java.util.TimerThread.run(Timer.java:506)\n>\n> 2021-10-18 10:22:57,499 [myid:] - INFO  ***@***.*** - Purge task completed.\n>\n> 2021-10-18 10:22:57,495 [myid:] - INFO  ***@***.*** - zookeeper.snapshot.trust.empty : false\n>\n> 2021-10-18 10:22:57,499 [myid:] - ERROR ***@***.*** - Unable to access datadir, exiting abnormally\n>\n> org.apache.zookeeper.server.persistence.FileTxnSnapLog$DatadirException: Unable to create data directory data/zookeeper/version-2\n>\n>         at org.apache.zookeeper.server.persistence.FileTxnSnapLog.<init>(FileTxnSnapLog.java:127)\n>\n>         at org.apache.zookeeper.server.ZooKeeperServerMain.runFromConfig(ZooKeeperServerMain.java:124)\n>\n>         at org.apache.zookeeper.server.ZooKeeperServerMain.initializeAndRun(ZooKeeperServerMain.java:106)\n>\n>         at org.apache.zookeeper.server.ZooKeeperServerMain.main(ZooKeeperServerMain.java:64)\n>\n>         at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:128)\n>\n>         at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:82)\n>\n> Unable to access datadir, exiting abnormally\n>\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-heron/issues/3719>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AABMNKQGMHESA3A6JGI47MTUHPZPJANCNFSM5GGJBPYA>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945685997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945747698","html_url":"https://github.com/apache/incubator-heron/issues/3453#issuecomment-945747698","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3453","id":945747698,"node_id":"IC_kwDOApKMps44Xvby","user":{"login":"kirsteend","id":20645543,"node_id":"MDQ6VXNlcjIwNjQ1NTQz","avatar_url":"https://avatars.githubusercontent.com/u/20645543?v=4","gravatar_id":"","url":"https://api.github.com/users/kirsteend","html_url":"https://github.com/kirsteend","followers_url":"https://api.github.com/users/kirsteend/followers","following_url":"https://api.github.com/users/kirsteend/following{/other_user}","gists_url":"https://api.github.com/users/kirsteend/gists{/gist_id}","starred_url":"https://api.github.com/users/kirsteend/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kirsteend/subscriptions","organizations_url":"https://api.github.com/users/kirsteend/orgs","repos_url":"https://api.github.com/users/kirsteend/repos","events_url":"https://api.github.com/users/kirsteend/events{/privacy}","received_events_url":"https://api.github.com/users/kirsteend/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-18T13:07:12Z","updated_at":"2021-10-18T13:07:12Z","author_association":"NONE","body":"That would be great thanks @joshfischer1108 \r\nLet me read up on #3452 and run through [website2/docs/compiling-osx.md](https://github.com/apache/incubator-heron/blob/master/website2/docs/compiling-osx.md).\r\nAlso let me know if there are any particular gaps you are looking to fill.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945747698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945923981","html_url":"https://github.com/apache/incubator-heron/issues/3453#issuecomment-945923981","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3453","id":945923981,"node_id":"IC_kwDOApKMps44YaeN","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-18T15:59:40Z","updated_at":"2021-10-18T15:59:40Z","author_association":"MEMBER","body":"compiling on OSX has some blockers at the moment.  The reason for this is that we have custom implemented rules for python.  See https://github.com/apache/incubator-heron/issues/3686\r\n\r\nIt might be easier if you started with Debian, Ubuntu18|20, or CentOS.  ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/945923981/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/946955256","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-946955256","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":946955256,"node_id":"IC_kwDOApKMps44cWP4","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-19T17:44:08Z","updated_at":"2021-10-19T17:44:08Z","author_association":"MEMBER","body":"I have added a check for multiple `executor` container specifications in the provided Pod Template. I am conflicted about whether we should be checking for this. It should not be the responsibility of the framework to verify a valid Pod Template. The complete battery of tests is passing locally.\r\n\r\n@nicknezis I think it is safe to say that the core of the functionality for the is feature is now complete, and as such, I am leaving this PR until review. I am also pinging @joshfischer1108 in case we need more reviewers.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/946955256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/947905924","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-947905924","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":947905924,"node_id":"IC_kwDOApKMps44f-WE","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-20T17:58:33Z","updated_at":"2021-10-20T17:58:33Z","author_association":"MEMBER","body":"> I have added a check for multiple `executor` container specifications in the provided Pod Template. I am conflicted about whether we should be checking for this. It should not be the responsibility of the framework to verify a valid Pod Template. The complete battery of tests is passing locally.\r\n> \r\n> @nicknezis I think it is safe to say that the core of the functionality for the is feature is now complete, and as such, I am leaving this PR until review. I am also pinging @joshfischer1108 in case we need more reviewers.\r\n\r\nI'll be able to look over this PR and the accompanying docs this weekend. I've recently restarted the build as well.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/947905924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/947926499","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-947926499","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":947926499,"node_id":"IC_kwDOApKMps44gDXj","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-20T18:25:09Z","updated_at":"2021-10-20T18:25:09Z","author_association":"MEMBER","body":"Thank you, Josh!","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/947926499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/949238236","html_url":"https://github.com/apache/incubator-heron/issues/3719#issuecomment-949238236","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3719","id":949238236,"node_id":"IC_kwDOApKMps44lDnc","user":{"login":"windhamwong","id":677625,"node_id":"MDQ6VXNlcjY3NzYyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/677625?v=4","gravatar_id":"","url":"https://api.github.com/users/windhamwong","html_url":"https://github.com/windhamwong","followers_url":"https://api.github.com/users/windhamwong/followers","following_url":"https://api.github.com/users/windhamwong/following{/other_user}","gists_url":"https://api.github.com/users/windhamwong/gists{/gist_id}","starred_url":"https://api.github.com/users/windhamwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windhamwong/subscriptions","organizations_url":"https://api.github.com/users/windhamwong/orgs","repos_url":"https://api.github.com/users/windhamwong/repos","events_url":"https://api.github.com/users/windhamwong/events{/privacy}","received_events_url":"https://api.github.com/users/windhamwong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T02:35:27Z","updated_at":"2021-10-22T02:35:56Z","author_association":"CONTRIBUTOR","body":"Confirmed that this happens when using helm, setting `.Values.zookeeper.security := true`. ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/949238236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/950704834","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-950704834","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":950704834,"node_id":"IC_kwDOApKMps44qprC","user":{"login":"windhamwong","id":677625,"node_id":"MDQ6VXNlcjY3NzYyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/677625?v=4","gravatar_id":"","url":"https://api.github.com/users/windhamwong","html_url":"https://github.com/windhamwong","followers_url":"https://api.github.com/users/windhamwong/followers","following_url":"https://api.github.com/users/windhamwong/following{/other_user}","gists_url":"https://api.github.com/users/windhamwong/gists{/gist_id}","starred_url":"https://api.github.com/users/windhamwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windhamwong/subscriptions","organizations_url":"https://api.github.com/users/windhamwong/orgs","repos_url":"https://api.github.com/users/windhamwong/repos","events_url":"https://api.github.com/users/windhamwong/events{/privacy}","received_events_url":"https://api.github.com/users/windhamwong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T09:14:36Z","updated_at":"2021-10-25T09:14:36Z","author_association":"CONTRIBUTOR","body":"Just updated to allow custom port number for NodePort","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/950704834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/950978520","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-950978520","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":950978520,"node_id":"IC_kwDOApKMps44rsfY","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T14:19:35Z","updated_at":"2021-10-25T14:19:35Z","author_association":"CONTRIBUTOR","body":"Is there a way to support asking for NodePort and letting k8s pick a random port, while also allowing for explicit port selection in the value.yml? Perhaps a property to enable/disable and another to set the value?","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/950978520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/951513314","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-951513314","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":951513314,"node_id":"IC_kwDOApKMps44tvDi","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T03:00:58Z","updated_at":"2021-10-26T03:00:58Z","author_association":"MEMBER","body":"I did some research and found [`readNamespacedConfigmap`](https://javadoc.io/doc/io.kubernetes/client-java-api/11.0.0/io/kubernetes/client/openapi/apis/CoreV1Api.html#readNamespacedConfigMap-java.lang.String-java.lang.String-java.lang.String-java.lang.Boolean-java.lang.Boolean-). This means I can simplify the code a lot and get rid of `listNamespacedConfigmap`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/951513314/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/951627279","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-951627279","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":951627279,"node_id":"IC_kwDOApKMps44uK4P","user":{"login":"windhamwong","id":677625,"node_id":"MDQ6VXNlcjY3NzYyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/677625?v=4","gravatar_id":"","url":"https://api.github.com/users/windhamwong","html_url":"https://github.com/windhamwong","followers_url":"https://api.github.com/users/windhamwong/followers","following_url":"https://api.github.com/users/windhamwong/following{/other_user}","gists_url":"https://api.github.com/users/windhamwong/gists{/gist_id}","starred_url":"https://api.github.com/users/windhamwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windhamwong/subscriptions","organizations_url":"https://api.github.com/users/windhamwong/orgs","repos_url":"https://api.github.com/users/windhamwong/repos","events_url":"https://api.github.com/users/windhamwong/events{/privacy}","received_events_url":"https://api.github.com/users/windhamwong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T07:10:52Z","updated_at":"2021-10-26T07:10:52Z","author_association":"CONTRIBUTOR","body":"> Is there a way to support asking for NodePort and letting k8s pick a random port, while also allowing for explicit port selection in the value.yml? Perhaps a property to enable/disable and another to set the value?\r\n\r\ngood idea, maybe\r\n```\r\napiserver:\r\n  NodePort:\r\n    enabled: true\r\n    port: <leave empty for random>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/951627279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/951985869","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-951985869","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":951985869,"node_id":"IC_kwDOApKMps44vibN","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T14:15:48Z","updated_at":"2021-10-26T14:15:48Z","author_association":"MEMBER","body":"> Thank you, Josh!\r\n\r\n@surahman  I must apologize.  I did not get to test the last weekend.  I will get it done by this weekend. ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/951985869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/952077827","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-952077827","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":952077827,"node_id":"IC_kwDOApKMps44v44D","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T15:53:06Z","updated_at":"2021-10-26T15:53:06Z","author_association":"MEMBER","body":"Thank you @joshfischer1108, I really appreciate someone with your OSS experience giving this a review. It is fortunate you did not review anything yet because the changes I am making today will improve performance and tidy up the code significantly.\r\n\r\nI run the complete battery of tests using a clean Heron Ubuntu 18 LTS Docker container before merging. TravisCI is exceptionally flaky so here is to hoping it is having a good day 🤞🏼. ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/952077827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/952204247","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-952204247","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":952204247,"node_id":"IC_kwDOApKMps44wXvX","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-26T18:33:03Z","updated_at":"2021-10-26T18:33:03Z","author_association":"MEMBER","body":"I got rid of the `listNamespaceConfigMaps` usage. Utilizing this really bothered me because in an actual production K8s cluster there are potentially thousands of `ConfigMap`s loaded in any given namespace. This could lead to memory issues on the Heron API server, no to mention it is exceedingly inefficient. If I can retrieve a specific `ConfigMap` on the CLI then it stands to reason that there should be a matching Java API call: `readNamespacedConfigMap`.\r\n\r\nChanges are on the `dev` branch and everything is passing with the complete testing battery. K8s cluster deployment tests are working as well. I have included the test results below. I hope TravisCI is in a good mood today 🎲 🤞🏼.\r\n\r\n<details>\r\n    <summary>Test suite in clean Heron Docker Ubuntu 18.04 LTS</summary>\r\n\r\n```bash\r\nINFO: Elapsed time: 1787.995s, Critical Path: 207.90s\r\nINFO: 5581 processes: 2396 internal, 3185 local.\r\nINFO: Build completed successfully, 5581 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.0s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.3s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.4s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.3s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 0.4s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 1.9s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 0.4s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 0.4s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.3s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 0.4s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 0.6s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 0.3s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.2s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 0.4s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.3s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 0.5s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 1.0s\r\n  WARNING: //heron/api/tests/scala:api-scala-test: Test execution time (1.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 0.6s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.0s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.3s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.0s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.2s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.0s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 0.3s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.3s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 0.3s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 0.5s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 1.3s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 1.6s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.3s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 5.3s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 0.4s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.3s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.3s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 0.7s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 0.9s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 0.3s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.4s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 1.1s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 0.6s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 0.6s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 0.6s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 0.6s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 0.5s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 0.8s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 0.5s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 0.6s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 0.6s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 0.6s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 0.6s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 0.5s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 0.5s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 0.5s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 0.5s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 2.5s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.6s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 0.5s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 0.5s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 0.6s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.3s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 0.6s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 5.5s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.2s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 2.6s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 2.5s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 3.0s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 11.0s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.0s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 0.9s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 0.9s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 0.9s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 0.9s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 0.9s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 0.9s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 0.8s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.0s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 0.9s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 0.9s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 0.9s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 0.9s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 0.8s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 0.5s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 0.5s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 0.3s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 9.5s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 0.3s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.4s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 0.5s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 0.7s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.4s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.3s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 0.7s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 0.6s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.3s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 1.8s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 0.4s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 1.1s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 2.0s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 0.4s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 3.7s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 2.3s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 1.5s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 3.0s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 0.4s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 1.5s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 1.1s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 1.6s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 11.8s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 0.4s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 0.3s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 1.1s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 2.6s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 1.3s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 1.7s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.4s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.3s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 0.8s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 1.0s\r\n//heron/schedulers/tests/java:KubernetesUtilsTest                        PASSED in 0.4s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 0.5s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 1.1s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 0.5s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 1.1s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 0.8s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 0.4s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 0.6s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 0.7s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 0.6s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 2.6s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 1.1s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 1.0s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 1.0s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.3s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 0.3s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 1.6s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.6s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 0.6s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 0.4s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 0.8s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 0.5s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.3s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 0.4s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 0.4s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.3s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 0.5s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 1.3s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 1.0s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.3s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 0.3s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 0.4s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.2s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.2s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 1.5s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.3s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 0.3s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 2.7s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.3s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 0.4s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 1.7s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 1.9s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 1.0s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.0s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 0.5s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 1.2s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 1.6s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 0.9s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 0.9s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 0.9s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.1s\r\n  WARNING: //heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest: Test execution time (1.1s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/server:stateful-restorer_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                            PASSED in 39.2s\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/util:neighbour_calculator_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.0s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.0s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 26.1s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.4s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 0.7s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.0s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 0.8s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.1s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.4s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.3s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.2s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 1.7s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 0.6s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.4s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 0.4s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 0.6s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.3s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.3s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 0.4s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 1.2s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 0.4s\r\n\r\nINFO: Build completed successfully, 5581 total actions\r\n```\r\n\r\n</details>\r\n\r\n\r\n<details>\r\n    <summary>Describe Pod acking-0</summary>\r\n\r\n```bash\r\nName:           acking-0\r\nNamespace:      default\r\nPriority:       0\r\nNode:           <none>\r\nLabels:         app=heron\r\n                controller-revision-hash=acking-7c4b6d7bb8\r\n                statefulset.kubernetes.io/pod-name=acking-0\r\n                topology=acking\r\nAnnotations:    prometheus.io/port: 8080\r\n                prometheus.io/scrape: true\r\nStatus:         Pending\r\nIP:             \r\nIPs:            <none>\r\nControlled By:  StatefulSet/acking\r\nContainers:\r\n  executor:\r\n    Image:       apache/heron:testbuild\r\n    Ports:       5555/TCP, 5556/UDP, 6001/TCP, 6002/TCP, 6003/TCP, 6004/TCP, 6005/TCP, 6006/TCP, 6007/TCP, 6008/TCP, 6009/TCP\r\n    Host Ports:  0/TCP, 0/UDP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP\r\n    Command:\r\n      sh\r\n      -c\r\n      ./heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--5007119198915049925.tar.gz . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor --topology-name=acking --topology-id=acking6cbc52b1-58bb-485a-866b-b4c4f5ce2a42 --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181 --state-manager-root=/heron --state-manager-config-file=./heron-conf/statemgr.yaml --tmanager-binary=./heron-core/bin/heron-tmanager --stmgr-binary=./heron-core/bin/heron-stmgr --metrics-manager-classpath=./heron-core/lib/metricsmgr/* --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\" --classpath=heron-api-examples.jar --heron-internals-config-file=./heron-conf/heron_internals.yaml --override-config-file=./heron-conf/override.yaml --component-ram-map=exclaim1:1073741824,word:1073741824 --component-jvm-opts=\"\" --pkg-type=jar --topology-binary-file=heron-api-examples.jar --heron-java-home=$JAVA_HOME --heron-shell-binary=./heron-core/bin/heron-shell --cluster=kubernetes --role=saad --environment=default --instance-classpath=./heron-core/lib/instance/* --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/* --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*: --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824 --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/* --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003 --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007 --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009\r\n    Limits:\r\n      cpu:     3\r\n      memory:  4Gi\r\n    Requests:\r\n      cpu:     3\r\n      memory:  4Gi\r\n    Environment:\r\n      HOST:        (v1:status.podIP)\r\n      POD_NAME:   acking-0 (v1:metadata.name)\r\n      var_one:    variable one\r\n      var_three:  variable three\r\n      var_two:    variable two\r\n    Mounts:\r\n      /shared_volume from shared-volume (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-4cxrh (ro)\r\n  sidecar-container:\r\n    Image:        alpine\r\n    Port:         <none>\r\n    Host Port:    <none>\r\n    Environment:  <none>\r\n    Mounts:\r\n      /shared_volume from shared-volume (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-4cxrh (ro)\r\nConditions:\r\n  Type           Status\r\n  PodScheduled   False \r\nVolumes:\r\n  shared-volume:\r\n    Type:       EmptyDir (a temporary directory that shares a pod's lifetime)\r\n    Medium:     \r\n    SizeLimit:  <unset>\r\n  kube-api-access-4cxrh:\r\n    Type:                    Projected (a volume that contains injected data from multiple sources)\r\n    TokenExpirationSeconds:  3607\r\n    ConfigMapName:           kube-root-ca.crt\r\n    ConfigMapOptional:       <nil>\r\n    DownwardAPI:             true\r\nQoS Class:                   Burstable\r\nNode-Selectors:              <none>\r\nTolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 10s\r\n                             node.kubernetes.io/unreachable:NoExecute op=Exists for 10s\r\nEvents:\r\n  Type     Reason            Age   From               Message\r\n  ----     ------            ----  ----               -------\r\n  Warning  FailedScheduling  44s   default-scheduler  0/1 nodes are available: 1 Insufficient cpu.\r\n```\r\n\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/952204247/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/952473046","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-952473046","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":952473046,"node_id":"IC_kwDOApKMps44xZXW","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T02:05:17Z","updated_at":"2021-10-27T02:05:17Z","author_association":"MEMBER","body":"What is wrong with TravisCI!?🤦🏼‍♂️ My last try at force-pushing to get the job on to a TravisCI cluster capable of passing the build.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/952473046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/953211624","html_url":"https://github.com/apache/incubator-heron/issues/3723#issuecomment-953211624","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3723","id":953211624,"node_id":"IC_kwDOApKMps440Nro","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T18:44:59Z","updated_at":"2021-10-27T22:02:18Z","author_association":"MEMBER","body":"This should be rather straightforward to implement for the CLI. We can use `KubernetesController.getConfigItemsByPrefix` to collect all the relevant options from the config. As per our discussions, we should be using [dynamic provisioning](https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/)?\r\n\r\nSuggested commands are below based on the Spark example, anything else we should add?\r\n\r\n```bash\r\n--config-property heron.kubernetes.persistentVolumeClaim.[volume name].options.claimName=OnDemand\r\n--config-property heron.kubernetes.persistentVolumeClaim.[volume name].options.storageClass=gp\r\n--config-property heron.kubernetes.persistentVolumeClaim.[volume name].options.sizeLimit=500Gi\r\n--config-property heron.kubernetes.persistentVolumeClaim.[volume name].mount.path=/data\r\n--config-property heron.kubernetes.persistentVolumeClaim.[volume name].mount.readOnly=false\r\n```\r\n\r\nI can start work on this but I can only take it as far as where it needs to be wired into #3710. I will then need to `rebase` onto that PR and wire it in. I will need also to clean up the test suite and perform some other general merge-conflict like clean-up operations at that point.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/953211624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/953214682","html_url":"https://github.com/apache/incubator-heron/issues/3723#issuecomment-953214682","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3723","id":953214682,"node_id":"IC_kwDOApKMps440Oba","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T18:49:22Z","updated_at":"2021-10-27T18:49:22Z","author_association":"MEMBER","body":"An idea that I had is a workflow where users put all their K8s configs, including the pod template, into a directory and then load them into a ConfigMap. The configs users wish to have loaded into the containers is then provided using `--config-property`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/953214682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/953347732","html_url":"https://github.com/apache/incubator-heron/issues/3723#issuecomment-953347732","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3723","id":953347732,"node_id":"IC_kwDOApKMps440u6U","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-27T22:09:28Z","updated_at":"2021-10-27T22:09:28Z","author_association":"MEMBER","body":"Looking through the Spark documentation there seem to be the following options supported:\r\n\r\n* options: `claimName`\r\n* options: `storageClass`\r\n* options: `sizeLimit`\r\n* mount: `path`\r\n* mount: `subPath`\r\n* mount: `readOnly`\r\n\r\nThere is a multitude of options available on the [K8s API](https://v1-18.docs.kubernetes.io/docs/reference/generated/kubernetes-api/v1.18/#persistentvolumeclaim-v1-core).\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/953347732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/954864671","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-954864671","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":954864671,"node_id":"IC_kwDOApKMps446hQf","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T16:06:21Z","updated_at":"2021-10-29T16:06:21Z","author_association":"MEMBER","body":"I realized whilst creating my slides that it makes more sense to let Heron's values for `limits` take precedence over those in the Pod Templates. The full battery of tests is passing locally, over to you TravisCI 🎲 🤞🏼 .","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/954864671/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955088288","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-955088288","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":955088288,"node_id":"IC_kwDOApKMps447X2g","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T22:47:48Z","updated_at":"2021-10-29T22:47:48Z","author_association":"CONTRIBUTOR","body":"Finally able to do some testing. I think we're still missing the `Role` update to include `configmap` resource `get` and `list`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955088288/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955091308","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-955091308","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":955091308,"node_id":"IC_kwDOApKMps447Yls","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-29T22:58:50Z","updated_at":"2021-10-29T22:58:50Z","author_association":"CONTRIBUTOR","body":"> > Is there a way to support asking for NodePort and letting k8s pick a random port, while also allowing for explicit port selection in the value.yml? Perhaps a property to enable/disable and another to set the value?\r\n> \r\n> good idea, maybe\r\n> \r\n> ```\r\n> apiserver:\r\n>   NodePort:\r\n>     enabled: true\r\n>     port: <leave empty for random>\r\n> ```\r\n\r\nYeah I think that could work.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955091308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955314447","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-955314447","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":955314447,"node_id":"IC_kwDOApKMps448PEP","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-30T15:20:11Z","updated_at":"2021-10-30T15:20:11Z","author_association":"MEMBER","body":"Thank you @nicknezis for all the time and effort you have put into this PR, I really appreciate it.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955314447/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955582829","html_url":"https://github.com/apache/incubator-heron/pull/3717#issuecomment-955582829","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3717","id":955582829,"node_id":"IC_kwDOApKMps449Qlt","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-30T19:43:38Z","updated_at":"2021-10-30T19:43:38Z","author_association":"MEMBER","body":"Thank you @joshfischer1108, I  really appreciate your time and effort!","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955582829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955811557","html_url":"https://github.com/apache/incubator-heron/issues/3723#issuecomment-955811557","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3723","id":955811557,"node_id":"IC_kwDOApKMps44-Ibl","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-31T23:24:48Z","updated_at":"2021-10-31T23:24:48Z","author_association":"MEMBER","body":"I have the PVC assembly part of the PR completed and I am now working on wiring all this up to make sure it works correctly with custom Pod Templates.\r\n\r\nCommands:\r\n```bash\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.claimName=nameOfVolumeClaim\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.storageClassName=storageClassNameOfChoice\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.accessModes=comma,separated,list\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.sizeLimit=555Gi\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.volumeMode=volumeModeOfChoice\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.path=path/to/mount\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumeNameOfChoice.subPath=sub/path/to/mount\r\n```\r\n\r\nWill generate the PVC:\r\n```yaml\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  name: nameOfVolumeClaim\r\nspec:\r\n  volumeName: volumeNameOfChoice\r\n  accessModes:\r\n    - comma\r\n    - separated\r\n    - list\r\n  volumeMode: volumeModeOfChoice\r\n  resources:\r\n    requests:\r\n      storage: 555Gi\r\n  storageClassName: storageClassNameOfChoice\r\n```\r\n\r\nEntries will be made in the Pod for a `Volume` and in the `executor` container for the `VolumeMount` with the `path` as well as the `subPath`, as required.\r\n\r\nThe commands above are all that I have added for now but the code is designed so that you can easily add an enum for the PVC property. You would then need to add an entry to the switch statement which adds it to the actual PVC. This should make things more maintainable and significantly more extensible.\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/955811557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/956449189","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-956449189","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":956449189,"node_id":"IC_kwDOApKMps45AkGl","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T17:51:21Z","updated_at":"2021-11-01T17:51:21Z","author_association":"MEMBER","body":"Thank you @joshfischer1108 I really appreciate you looking these changes over!","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/956449189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/956454687","html_url":"https://github.com/apache/incubator-heron/pull/3009#issuecomment-956454687","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3009","id":956454687,"node_id":"IC_kwDOApKMps45Alcf","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T17:59:15Z","updated_at":"2021-11-01T17:59:57Z","author_association":"MEMBER","body":"Thanks for the clean up @julienledem.  It's a good reminder that I don't go back through the old issues/prs and clean up enough 😄 ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/956454687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/956900813","html_url":"https://github.com/apache/incubator-heron/issues/3686#issuecomment-956900813","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3686","id":956900813,"node_id":"IC_kwDOApKMps45CSXN","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-01T23:39:19Z","updated_at":"2021-11-01T23:39:19Z","author_association":"MEMBER","body":"https://github.com/pantsbuild/pex/releases/tag/v2.1.23","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/956900813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957592887","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-957592887","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":957592887,"node_id":"IC_kwDOApKMps45E7U3","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T13:38:19Z","updated_at":"2021-11-02T13:38:19Z","author_association":"MEMBER","body":"> Thank you @joshfischer1108 I really appreciate you looking these changes over!\r\n\r\nOk the build is green 🙌 .  Let's go!","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957592887/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957601846","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-957601846","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":957601846,"node_id":"IC_kwDOApKMps45E9g2","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T13:42:47Z","updated_at":"2021-11-02T13:42:47Z","author_association":"MEMBER","body":"Thank you @joshfischer1108 🎆 ! There is another PR incoming sometime today or tomorrow for the CLI PVC support 😄 ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957601846/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957606350","html_url":"https://github.com/apache/incubator-heron/pull/3710#issuecomment-957606350","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3710","id":957606350,"node_id":"IC_kwDOApKMps45E-nO","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T13:45:00Z","updated_at":"2021-11-02T13:45:00Z","author_association":"MEMBER","body":"I will wait for that PR to come in then I think we are ready to create another Heron release and work towards graduating out of the incubator.\r\n\r\n💯 ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957606350/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957941351","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-957941351","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":957941351,"node_id":"IC_kwDOApKMps45GQZn","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-02T16:53:38Z","updated_at":"2021-11-02T16:53:38Z","author_association":"MEMBER","body":"@joshfischer1108 and @nicknezis preliminary PR has been created. I am running deployment testing on a Docker Ubuntu 18.04LTS container. There is a full battery of tests for the changes that I have made except for those changes which would require a testing base upgrade.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/957941351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961440275","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-961440275","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":961440275,"node_id":"IC_kwDOApKMps45TmoT","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-04T21:27:32Z","updated_at":"2021-11-04T23:23:01Z","author_association":"MEMBER","body":"Deployment testing with `Persistent Volume Claim` created, a `Volume`, and `Volume Mounts` all created successfully. I have not configured a `StorageClass` which is why there is an error in the status of the Pod.\r\n\r\nManual cleanup of the `Persistent Volume Claim` is required and there will be a `conflict` error if the PVC names clash during submit.\r\n\r\n<details><summary>Commands</summary>\r\n\r\n```bash\r\n~/bin/heron submit kubernetes ~/.heron/examples/heron-api-examples.jar \\\r\n--verbose \\\r\n--config-property heron.kubernetes.pod.template.configmap.name=pod-templ-cf-map.pod-template.yaml \\\r\norg.apache.heron.examples.api.AckingTopology acking \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.claimName=volume-claim-name \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.storageClassName=storage-class-name \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.accessModes=ReadWriteOnce,ReadOnlyMany \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.sizeLimit=555Gi \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.volumeMode=Block \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.path=path/to/mount \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.subPath=sub/path/to/mount\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Persistent Volume Claim</summary>\r\n\r\n```bash\r\nName:          volume-claim-name\r\nNamespace:     default\r\nStorageClass:  storage-class-name\r\nStatus:        Pending\r\nVolume:        volumenameofchoice\r\nLabels:        <none>\r\nAnnotations:   <none>\r\nFinalizers:    [kubernetes.io/pvc-protection]\r\nCapacity:      0\r\nAccess Modes:  \r\nVolumeMode:    Block\r\nUsed By:       acking-0\r\n               acking-1\r\n               acking-2\r\nEvents:        <none>\r\n\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Describe Pod</summary>\r\n\r\n```bash\r\nName:           acking-1\r\nNamespace:      default\r\nPriority:       0\r\nNode:           <none>\r\nLabels:         app=heron\r\n                controller-revision-hash=acking-7fd8fb9fbd\r\n                statefulset.kubernetes.io/pod-name=acking-1\r\n                topology=acking\r\nAnnotations:    prometheus.io/port: 8080\r\n                prometheus.io/scrape: true\r\nStatus:         Pending\r\nIP:             \r\nIPs:            <none>\r\nControlled By:  StatefulSet/acking\r\nContainers:\r\n  executor:\r\n    Image:       apache/heron:testbuild\r\n    Ports:       5555/TCP, 5556/UDP, 6001/TCP, 6002/TCP, 6003/TCP, 6004/TCP, 6005/TCP, 6006/TCP, 6007/TCP, 6008/TCP, 6009/TCP\r\n    Host Ports:  0/TCP, 0/UDP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP, 0/TCP\r\n    Command:\r\n      sh\r\n      -c\r\n      ./heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--543424291072273987.tar.gz . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor --topology-name=acking --topology-id=acking32cfd6f1-a5f7-4472-a251-311397a61f3f --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181 --state-manager-root=/heron --state-manager-config-file=./heron-conf/statemgr.yaml --tmanager-binary=./heron-core/bin/heron-tmanager --stmgr-binary=./heron-core/bin/heron-stmgr --metrics-manager-classpath=./heron-core/lib/metricsmgr/* --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\" --classpath=heron-api-examples.jar --heron-internals-config-file=./heron-conf/heron_internals.yaml --override-config-file=./heron-conf/override.yaml --component-ram-map=exclaim1:1073741824,word:1073741824 --component-jvm-opts=\"\" --pkg-type=jar --topology-binary-file=heron-api-examples.jar --heron-java-home=$JAVA_HOME --heron-shell-binary=./heron-core/bin/heron-shell --cluster=kubernetes --role=saad --environment=default --instance-classpath=./heron-core/lib/instance/* --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/* --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*: --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824 --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/* --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003 --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007 --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009\r\n    Limits:\r\n      cpu:     3\r\n      memory:  4Gi\r\n    Requests:\r\n      cpu:     3\r\n      memory:  4Gi\r\n    Environment:\r\n      HOST:        (v1:status.podIP)\r\n      POD_NAME:   acking-1 (v1:metadata.name)\r\n      var_one:    variable one\r\n      var_three:  variable three\r\n      var_two:    variable two\r\n    Mounts:\r\n      /shared_volume from shared-volume (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-8scq5 (ro)\r\n      path/to/mount from volumenameofchoice (rw,path=\"sub/path/to/mount\")\r\n  sidecar-container:\r\n    Image:        alpine\r\n    Port:         <none>\r\n    Host Port:    <none>\r\n    Environment:  <none>\r\n    Mounts:\r\n      /shared_volume from shared-volume (rw)\r\n      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-8scq5 (ro)\r\nConditions:\r\n  Type           Status\r\n  PodScheduled   False \r\nVolumes:\r\n  shared-volume:\r\n    Type:       EmptyDir (a temporary directory that shares a pod's lifetime)\r\n    Medium:     \r\n    SizeLimit:  <unset>\r\n  volumenameofchoice:\r\n    Type:       PersistentVolumeClaim (a reference to a PersistentVolumeClaim in the same namespace)\r\n    ClaimName:  volume-claim-name\r\n    ReadOnly:   false\r\n  kube-api-access-8scq5:\r\n    Type:                    Projected (a volume that contains injected data from multiple sources)\r\n    TokenExpirationSeconds:  3607\r\n    ConfigMapName:           kube-root-ca.crt\r\n    ConfigMapOptional:       <nil>\r\n    DownwardAPI:             true\r\nQoS Class:                   Burstable\r\nNode-Selectors:              <none>\r\nTolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 10s\r\n                             node.kubernetes.io/unreachable:NoExecute op=Exists for 10s\r\nEvents:\r\n  Type     Reason            Age                  From               Message\r\n  ----     ------            ----                 ----               -------\r\n  Warning  FailedScheduling  52s (x3 over 3m20s)  default-scheduler  0/1 nodes are available: 1 pod has unbound immediate PersistentVolumeClaims.\r\n```\r\n\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961440275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961594821","html_url":"https://github.com/apache/incubator-heron/pull/3726#issuecomment-961594821","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3726","id":961594821,"node_id":"IC_kwDOApKMps45UMXF","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T03:12:14Z","updated_at":"2021-11-05T03:12:14Z","author_association":"MEMBER","body":"#3686","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961594821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961675830","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-961675830","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":961675830,"node_id":"IC_kwDOApKMps45UgI2","user":{"login":"windhamwong","id":677625,"node_id":"MDQ6VXNlcjY3NzYyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/677625?v=4","gravatar_id":"","url":"https://api.github.com/users/windhamwong","html_url":"https://github.com/windhamwong","followers_url":"https://api.github.com/users/windhamwong/followers","following_url":"https://api.github.com/users/windhamwong/following{/other_user}","gists_url":"https://api.github.com/users/windhamwong/gists{/gist_id}","starred_url":"https://api.github.com/users/windhamwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windhamwong/subscriptions","organizations_url":"https://api.github.com/users/windhamwong/orgs","repos_url":"https://api.github.com/users/windhamwong/repos","events_url":"https://api.github.com/users/windhamwong/events{/privacy}","received_events_url":"https://api.github.com/users/windhamwong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T07:19:35Z","updated_at":"2021-11-05T07:19:35Z","author_association":"CONTRIBUTOR","body":"@nicknezis have a look :D","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961675830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961891632","html_url":"https://github.com/apache/incubator-heron/pull/3727#issuecomment-961891632","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3727","id":961891632,"node_id":"IC_kwDOApKMps45VU0w","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T13:23:45Z","updated_at":"2021-11-07T03:48:44Z","author_association":"MEMBER","body":"Fix https://github.com/apache/incubator-heron/issues/3686","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961891632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961959088","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-961959088","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":961959088,"node_id":"IC_kwDOApKMps45VlSw","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T14:52:13Z","updated_at":"2021-11-05T14:52:13Z","author_association":"CONTRIBUTOR","body":"I'll hopefully get some time to test soon. But in the meantime I have a question.\r\n\r\nDoes this support mounting pre-existing PVCs and also dynamically creating the PVC? In the Spark implementation they had a special claim name `OnDemand` that would signify to create a dynamic PVC. With the current implementation, it seems we always create a new PVC. If so, this would preclude the ability to mount existing PVCs.\r\n\r\nFor the dynamic PVCs, I think it's ok that the PVC is not cleaned up dynamically when the analytic is killed. Perhaps that can be a config item on the scheduler that toggles the behavior of whether it should clean up any dynamically provisioned PVCs? We can always add this feature later. Not a blocker for merging this current Pull Request.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961959088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961988798","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-961988798","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":961988798,"node_id":"IC_kwDOApKMps45Vsi-","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T15:25:11Z","updated_at":"2021-11-05T15:25:11Z","author_association":"CONTRIBUTOR","body":"Going to do some testing and maybe add the ability to use a random port number. Also just noticed that this feature branch is not made off of the main branch. We should rebase so that it can merge without any of the ARM branch's dependencies.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/961988798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962005835","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-962005835","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":962005835,"node_id":"IC_kwDOApKMps45VwtL","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T15:47:35Z","updated_at":"2021-11-05T15:47:35Z","author_association":"MEMBER","body":"> Does this support mounting pre-existing PVCs and also dynamically creating the PVC? In the Spark implementation they had a special claim name `OnDemand` that would signify to create a dynamic PVC. With the current implementation, it seems we always create a new PVC. If so, this would preclude the ability to mount existing PVCs.\r\n\r\nCorrect, this implementation will always create a new dynamic PVC but the `OnDemand` functionality should be straightforward. There needs to be a CLI parameter for the `OnDemand` option and an addition to the `createPersistentVolumeClaims` routine to skip the PVC generation. The PVC to K8s deployment will then not deploy a PVC to the K8s cluster. The mounts and volumes will be added as they are now.\r\n\r\n> For the dynamic PVCs, I think it's ok that the PVC is not cleaned up dynamically when the analytic is killed. Perhaps that can be a config item on the scheduler that toggles the behavior of whether it should clean up any dynamically provisioned PVCs? We can always add this feature later. Not a blocker for merging this current Pull Request.\r\n\r\nI was looking into this and we need to understand the various components within Heron very well before making changes that will store resources created in the K8s cluster.\r\n\r\nI am also working on trying to validate input for these configs (names and required parameters) because it is a hateful experience when the configs are bad. I do not think we should be doing any of this and that it should be the user's responsibility to get the commands right, what do you think? These checks add complexity and execution overhead during the submit process.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962005835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962139320","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-962139320","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":962139320,"node_id":"IC_kwDOApKMps45WRS4","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T18:56:48Z","updated_at":"2021-11-05T19:10:03Z","author_association":"MEMBER","body":"The reason Spark uses the `Claim Name` of `OnDemand` might be because it generates a PVC name based on the workload's name. If we were to do the same we could potentially get away with cleaning up on demand PVCs without having to update the scheduler. We would need a naming convention:\r\n\r\n```bash\r\n[Topology Name]-ondemand-[Volume-Name]\r\n```\r\n\r\nThe question then becomes one of how we clean up all of the `OnDemand` claims. You could list the claims and generate a list of the ones with a prefix of `[Topology Name]-ondemand-` and axe them. We need to keep in mind that there may very well be thousands of claims and we cannot request a list by prefix from K8s.\r\n\r\nWe may be able to use the `fieldSelector` and `labelSelector` in [`listNamespacedPersistentVolumeClaim`](https://javadoc.io/static/io.kubernetes/client-java-api/11.0.0/io/kubernetes/client/openapi/apis/CoreV1Api.html#listNamespacedPersistentVolumeClaim-java.lang.String-java.lang.String-java.lang.Boolean-java.lang.String-java.lang.String-java.lang.String-java.lang.Integer-java.lang.String-java.lang.String-java.lang.Integer-java.lang.Boolean-) creatively to restrict returned values but we will need to add them to the PVC's on creation.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962139320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962214212","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-962214212","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":962214212,"node_id":"IC_kwDOApKMps45WjlE","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T20:54:55Z","updated_at":"2021-11-05T20:54:55Z","author_association":"CONTRIBUTOR","body":"> The reason Spark uses the `Claim Name` of `OnDemand` might be because it generates a PVC name based on the workload's name. If we were to do the same we could potentially get away with cleaning up on demand PVCs without having to update the scheduler. We would need a naming convention:\r\n> \r\n> ```shell\r\n> [Topology Name]-ondemand-[Volume-Name]\r\n> ```\r\n> \r\n\r\nCorrect. I think having the naming convention is fair decision because it is auto generated. If the scheduler is configured to cleanup dynamic PVCs, one way we can do this is with the naming convention. \r\n\r\n> The question then becomes one of how we clean up all of the `OnDemand` claims. You could list the claims and generate a list of the ones with a prefix of `[Topology Name]-ondemand-` and axe them. We need to keep in mind that there may very well be thousands of claims and we cannot request a list by prefix from K8s.\r\n> \r\n\r\nAlso we could add k8s labels to the PVCs which allows for a simple query to k8s to retrieve the list of PVCs that match the Selector that we would create.\r\n\r\nThis is an [old version](https://github.com/apache/incubator-heron/blob/fd7fde0518562d60a7a85679715e2b15ee464d37/heron/schedulers/src/java/com/twitter/heron/scheduler/kubernetes/KubernetesCompat.java#L37) of the Heron k8s scheduler that used to delete Pods (before using StatefulSet). Note how we create a Selector that is used in the subsequent delete call. The Selector matched the labels which were on the PodSpec [here](https://github.com/apache/incubator-heron/blob/fd7fde0518562d60a7a85679715e2b15ee464d37/heron/schedulers/src/java/com/twitter/heron/scheduler/kubernetes/AppsV1beta1Controller.java#L286).\r\n\r\nSo if we are making the PVCs, we can add a combination of labels that will be specific enough to not auto-delete other PVCs. Then use these labels to know what to delete.\r\n\r\n> We may be able to use the `fieldSelector` and `labelSelector` in [`listNamespacedPersistentVolumeClaim`](https://javadoc.io/static/io.kubernetes/client-java-api/11.0.0/io/kubernetes/client/openapi/apis/CoreV1Api.html#listNamespacedPersistentVolumeClaim-java.lang.String-java.lang.String-java.lang.Boolean-java.lang.String-java.lang.String-java.lang.String-java.lang.Integer-java.lang.String-java.lang.String-java.lang.Integer-java.lang.Boolean-) creatively to restrict returned values but we will need to add them to the PVC's on creation.\r\n\r\nYup!","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962214212/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962238294","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-962238294","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":962238294,"node_id":"IC_kwDOApKMps45WpdW","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T21:40:28Z","updated_at":"2021-11-05T21:40:28Z","author_association":"MEMBER","body":"Thank you @nicknezis that is very helpful info!\r\n\r\nI think we can add two selector labels to the PVC:\r\n\r\n```yaml\r\nselector:\r\n  topology: <topology-name>\r\n  onDemand: true\r\n```\r\n\r\nThen we can form the `labelSelector` as:\r\n\r\n```java\r\ntopology=<topology-name>,onDemand=true\r\n```\r\n\r\nI think this should be minimally specific enough to act as a candidate key to select all PVC's associated with a specific topology.\r\n\r\nAs for the `Claim Name` I think we need something unique enough to not cause collisions in the cluster:\r\n\r\n```java\r\nondemand-[Topology Name]-[Volume-Name]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962238294/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962248948","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-962248948","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":962248948,"node_id":"IC_kwDOApKMps45WsD0","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-05T22:05:38Z","updated_at":"2021-11-05T22:05:38Z","author_association":"CONTRIBUTOR","body":"@windhamwong I made the branch off of `master` branch. \r\n\r\nI also realized that `helm` was stripping away the comments in the generated `values.yml` file. This issue was documented [here](https://github.com/helm/helm/issues/6951). It's fixed in Helm 3.1.0, so I updated the version of Helm that we are using.\r\n\r\nI also did some minor refactoring of the values to start aggregating `apiserver`, `tracker` and `ui` sets of properties.\r\n\r\nI also moved the `apiserver` Service up in `tools.yml` to group it with the other two `Service` definitions.\r\n\r\nI also mirrored your logic to add `NodePort` support to the other two services.\r\n\r\nI chose to keep the default behavior with k8s auto picking the NodePort. ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962248948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962658132","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-962658132","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":962658132,"node_id":"IC_kwDOApKMps45YP9U","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-07T18:22:17Z","updated_at":"2021-11-08T01:32:07Z","author_association":"MEMBER","body":"Most of the last piece of the puzzle for supporting both dynamic and statically backed PVCs is now complete. The final piece is the clean up of the dynamically backed/provisioned PVCs which I am debugging right now in Minikube.\r\n\r\n@nicknezis I am hoping you have some experience with this having transitioned Heron to `StatefulSet`s. I have the `Selector matchLabels` set up correctly, as indicated by the PVC's YAML below, but the `matchLabels` are unable to select the PVC. I am employing the [`deleteCollectionNamespacedPersistentVolumeClaim`](https://javadoc.io/doc/io.kubernetes/client-java-api/11.0.0/io/kubernetes/client/openapi/apis/CoreV1Api.html#deleteCollectionNamespacedPersistentVolumeClaim-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.Integer-java.lang.String-java.lang.Integer-java.lang.Boolean-java.lang.String-java.lang.String-java.lang.String-java.lang.Integer-io.kubernetes.client.openapi.models.V1DeleteOptions-) method. I can confirm that the `matchLabel` pattern being generated is as follows:\r\n\r\n```yaml\r\nonDemand=true,topology=acking\r\n```\r\n\r\n<details><summary>PVC Spec</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  creationTimestamp: \"2021-11-07T16:27:51Z\"\r\n  finalizers:\r\n  - kubernetes.io/pvc-protection\r\n  name: ondemand-acking-volumenameofchoice\r\n  namespace: default\r\n  resourceVersion: \"714\"\r\n  uid: 38f7a7fb-12f2-4315-a5bd-4f346061fdc9\r\nspec:\r\n  accessModes:\r\n  - ReadWriteOnce\r\n  - ReadOnlyMany\r\n  resources:\r\n    requests:\r\n      storage: 555Gi\r\n  selector:\r\n    matchLabels:\r\n      onDemand: \"true\"\r\n      topology: acking\r\n  storageClassName: storage-class-name\r\n  volumeMode: Block\r\n  volumeName: volumenameofchoice\r\nstatus:\r\n  phase: Pending\r\n```\r\n\r\n</details>\r\n\r\nI have also attempted to match against a single `matchLabel` of `topology` to no avail.\r\n\r\n<details><summary>Submit Command</summary>\r\n\r\n```yaml\r\n~/bin/heron submit kubernetes ~/.heron/examples/heron-api-examples.jar \\\r\n--verbose \\\r\n--config-property heron.kubernetes.pod.template.configmap.name=pod-templ-cf-map.pod-template.yaml \\\r\norg.apache.heron.examples.api.AckingTopology acking \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.claimName=OnDemand \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.storageClassName=storage-class-name \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.accessModes=ReadWriteOnce,ReadOnlyMany \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.sizeLimit=555Gi \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.volumeMode=Block \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.path=path/to/mount \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.volumenameofchoice.subPath=sub/path/to/mount\r\n```\r\n\r\n</details>\r\n\r\nI  am also testing by loading the PVC spec into K8s and using Kubectl to select the PVC with issues:\r\n\r\n```bash\r\n❯ minikube kubectl -- get persistentvolumeclaims --selector=topology=acking\r\nNo resources found in default namespace.\r\n```\r\n\r\n***Edit:*** I did some reading and I think I have this figured out. I confused the purpose of the `matchLabel`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962658132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962802157","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-962802157","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":962802157,"node_id":"IC_kwDOApKMps45YzHt","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-08T04:27:01Z","updated_at":"2021-11-08T04:41:27Z","author_association":"CONTRIBUTOR","body":"So I think the issue may be that you are using the Selector Match Labels when really you need to put Labels in the Object Metadata. Take a look at this [old code](https://github.com/apache/incubator-heron/blob/fd7fde0518562d60a7a85679715e2b15ee464d37/heron/schedulers/src/java/com/twitter/heron/scheduler/kubernetes/AppsV1beta1Controller.java#L296) that put labels on the PodSpec.\r\n\r\nThe PVC's Selector (as is the case for other objects also) is used as the query to match on something else's metadata labels. In this case, a PVC can be configured with a Selector to find specific types of Persistent Volumes (PV).\r\n\r\nEdit: Just noticed your edit. LOL. Sounds like you quickly realized the difference of selector vs metadata labels. I'll leave my comment above in case it's helpful for anyone else reading this thread.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/962802157/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/963306214","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-963306214","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":963306214,"node_id":"IC_kwDOApKMps45auLm","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-08T16:04:54Z","updated_at":"2021-11-08T16:14:12Z","author_association":"MEMBER","body":"Thank you for looking into this and confirming my suspicion, I genuinely appreciate having someone else looking over things as well :smile:. I have confused `matchLabels` with `labels` that are matched to rather than ones that will be matched to other resources.\r\n\r\nI have run the full battery of tests locally as well as completed deployment testing. I believe the production code is stable enough for broader testing. I will be reviewing the test suite and expanding it if necessary.\r\n\r\nThe only addition I feel I can make to the production code is to validate input for lowercase `RFC-1123` compliance. This will slow the code down because of regex matching. Other than this, I believe we have a feature RC here.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/963306214/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/963770479","html_url":"https://github.com/apache/incubator-heron/pull/3721#issuecomment-963770479","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3721","id":963770479,"node_id":"IC_kwDOApKMps45cfhv","user":{"login":"windhamwong","id":677625,"node_id":"MDQ6VXNlcjY3NzYyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/677625?v=4","gravatar_id":"","url":"https://api.github.com/users/windhamwong","html_url":"https://github.com/windhamwong","followers_url":"https://api.github.com/users/windhamwong/followers","following_url":"https://api.github.com/users/windhamwong/following{/other_user}","gists_url":"https://api.github.com/users/windhamwong/gists{/gist_id}","starred_url":"https://api.github.com/users/windhamwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windhamwong/subscriptions","organizations_url":"https://api.github.com/users/windhamwong/orgs","repos_url":"https://api.github.com/users/windhamwong/repos","events_url":"https://api.github.com/users/windhamwong/events{/privacy}","received_events_url":"https://api.github.com/users/windhamwong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-09T03:03:28Z","updated_at":"2021-11-09T03:03:28Z","author_association":"CONTRIBUTOR","body":"The pushed code looks alright to me.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/963770479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/964439233","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-964439233","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":964439233,"node_id":"IC_kwDOApKMps45fCzB","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-09T18:54:14Z","updated_at":"2021-11-09T18:55:43Z","author_association":"MEMBER","body":"I have added lowercase `RFC-1123` validation for `Volume`, `Claim`, as well as `Storage Class` names. I have tested the validation through the test suite but have not had the opportunity to run deployment testing with them. The full battery of tests is passing locally. This should hopefully catch errors before anything gets handed over to K8s.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/964439233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965724443","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965724443","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965724443,"node_id":"IC_kwDOApKMps45j8kb","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T20:34:18Z","updated_at":"2021-11-10T21:03:31Z","author_association":"CONTRIBUTOR","body":"Just started some testing in Kubernetes. Deployed the `acking` topology, but when I tried to kill it, I received the following: `Failed to connect to K8s cluster to delete Persistent Volume Claims for topology `acking`. A manual clean-up is required.`\r\n\r\nThis was a submission without enabling any PVCs for the pods.\r\n\r\n**_Edit:_** Disregard, I think I used an old Helm chart that didn't have the new PVC permissions.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965724443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965769772","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965769772","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965769772,"node_id":"IC_kwDOApKMps45kHos","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T21:38:49Z","updated_at":"2021-11-10T21:38:49Z","author_association":"MEMBER","body":"No worries, I am not sure if the Helm Chart I edited is minimal enough as far as permissions go - can we get away without the `list` permission? I am performing all of my testing on Minikube in a clean environment (`delete --all`) and perform a manual deployment each time.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965769772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965783577","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965783577","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965783577,"node_id":"IC_kwDOApKMps45kLAZ","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T21:58:22Z","updated_at":"2021-11-10T21:58:22Z","author_association":"CONTRIBUTOR","body":"So even after adding the permissions, I still get the forbidden failure when deleting. I'll keep investigating.\r\n\r\nI did continue testing with the `ondemand`. It was able to create the PVC, but they stay in a pending state. I'm not sure, but might be an issue with how I configured things. One potential issue or design consideration... it seems to only make a single PVC for the entire topology. I was assuming it would be a PVC per pod. Here is the naming convention from the [Spark code](https://github.com/apache/spark/blob/de59e01aa4853ef951da080c0d1908d53d133ebe/resource-managers/kubernetes/core/src/main/scala/org/apache/spark/deploy/k8s/features/MountVolumesFeatureStep.scala#L76). It seems they have an index `$i` on the end as they loop through?","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965783577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965797454","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965797454","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965797454,"node_id":"IC_kwDOApKMps45kOZO","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T22:16:32Z","updated_at":"2021-11-10T22:20:39Z","author_association":"MEMBER","body":"Could you please try to dump the PVC with the `get persistentvolumeclaims [claim-name] -o yaml` and see if something is off? You can do the same for the Pod's configs.\r\n\r\nI am able to `create` and `delete` all the generated PVC's in Minikube, so I think this is a permission-based issue. I to see the status as in `pending` but that is because I either do not have the claims setup for statically backed storage or the dynamically backed storage enabled and configured.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965797454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965805550","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965805550","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965805550,"node_id":"IC_kwDOApKMps45kQXu","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T22:30:30Z","updated_at":"2021-11-11T01:08:51Z","author_association":"MEMBER","body":"> One potential issue or design consideration... it seems to only make a single PVC for the entire topology. I was assuming it would be a PVC per pod. Here is the naming convention from the [Spark code](https://github.com/apache/spark/blob/de59e01aa4853ef951da080c0d1908d53d133ebe/resource-managers/kubernetes/core/src/main/scala/org/apache/spark/deploy/k8s/features/MountVolumesFeatureStep.scala#L76). It seems they have an index `$i` on the end as they loop through?\r\n\r\nThe design is such that a single PVC is generated per dynamically allocated/backed volume for the entire `StatefulSet`. All of the `executor` pods will gain entries added for the `Volume Mounts` and the entire pod template will receive an entry for the shared `Volume`. Since it is a shared `Volume` for the `StatefulSet`, my assumption being this is to support amongst many other things, a shared disk between support containers makes perfect sense. You may allocate as many PVCs as you want for topology, though.\r\n\r\n**_Edit:_** If we can use variables in the K8s Pod Template which K8s can resolve, specifically for the Pod number, then this can be done. Say we have the variable `$pod.number` then I would only need to update the following two entries in the configs:\r\n`PersistentVolumeClaim.metadata.name`: ondemand-[topology-name]-[volume-name]-$pod.number\r\n`Volumes.name`: [volume-name]-$pod.number\r\n\r\nWith this, we make the above field entries with variables in the Pod Templates. When the PVCs are deployed to K8s we add the `$pod.number` suffix to the PVC names on the fly. This is all dependant on the ability to extract the Pod number via a variable.\r\n\r\n*Nevertheless, if there is no way we can reference fields in the Pod Template in other fields within the template, I can not see how this can be achieved. There would need to be API access to the individual Pods within the `StatefulSet` to adjust the fields for `Volume Mounts`. Creating the `Volume` and `Persistent Volume Claims` remains a nonissue.*","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965805550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965813459","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965813459","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965813459,"node_id":"IC_kwDOApKMps45kSTT","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-10T22:45:26Z","updated_at":"2021-11-10T23:44:42Z","author_association":"MEMBER","body":"I can confirm the ability to launch and kill a topology with/without a Pod Template as well as being able to launch a topology with a statically and dynamically backed PVC. The dynamically backed PVC is deleted on kill. I am testing in Minikube on a clean environment (`delete --all`) with the latest PR build.\r\n\r\n<details><summary>Without dynamic PVC: kubectl get pod acking-1 -o yaml</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  annotations:\r\n    prometheus.io/port: \"8080\"\r\n    prometheus.io/scrape: \"true\"\r\n  creationTimestamp: \"2021-11-10T22:36:19Z\"\r\n  generateName: acking-\r\n  labels:\r\n    app: heron\r\n    controller-revision-hash: acking-7cf596b959\r\n    statefulset.kubernetes.io/pod-name: acking-1\r\n    topology: acking\r\n  name: acking-1\r\n  namespace: default\r\n  ownerReferences:\r\n  - apiVersion: apps/v1\r\n    blockOwnerDeletion: true\r\n    controller: true\r\n    kind: StatefulSet\r\n    name: acking\r\n    uid: 7638b318-645b-41e1-b0c9-47e124207a13\r\n  resourceVersion: \"852\"\r\n  uid: 1e125904-6c32-4c69-a48a-ba85a4136d9b\r\nspec:\r\n  containers:\r\n  - command:\r\n    - sh\r\n    - -c\r\n    - './heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n      distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--358503390991778356.tar.gz\r\n      . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n      --topology-name=acking --topology-id=acking8c323447-bce6-4a35-9b2f-7b6e1b9cc46d\r\n      --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181 --state-manager-root=/heron\r\n      --state-manager-config-file=./heron-conf/statemgr.yaml --tmanager-binary=./heron-core/bin/heron-tmanager\r\n      --stmgr-binary=./heron-core/bin/heron-stmgr --metrics-manager-classpath=./heron-core/lib/metricsmgr/*\r\n      --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\" --classpath=heron-api-examples.jar\r\n      --heron-internals-config-file=./heron-conf/heron_internals.yaml --override-config-file=./heron-conf/override.yaml\r\n      --component-ram-map=exclaim1:1073741824,word:1073741824 --component-jvm-opts=\"\"\r\n      --pkg-type=jar --topology-binary-file=heron-api-examples.jar --heron-java-home=$JAVA_HOME\r\n      --heron-shell-binary=./heron-core/bin/heron-shell --cluster=kubernetes --role=saad\r\n      --environment=default --instance-classpath=./heron-core/lib/instance/* --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml\r\n      --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n      --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n      --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n      --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n      --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n      --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n      --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n      --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n      --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n    env:\r\n    - name: HOST\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: status.podIP\r\n    - name: POD_NAME\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: metadata.name\r\n    - name: var_one\r\n      value: variable one\r\n    - name: var_three\r\n      value: variable three\r\n    - name: var_two\r\n      value: variable two\r\n    image: apache/heron:testbuild\r\n    imagePullPolicy: IfNotPresent\r\n    name: executor\r\n    ports:\r\n    - containerPort: 5555\r\n      name: tcp-port-kept\r\n      protocol: TCP\r\n    - containerPort: 5556\r\n      name: udp-port-kept\r\n      protocol: UDP\r\n    - containerPort: 6001\r\n      name: server\r\n      protocol: TCP\r\n    - containerPort: 6002\r\n      name: tmanager-ctl\r\n      protocol: TCP\r\n    - containerPort: 6003\r\n      name: tmanager-stats\r\n      protocol: TCP\r\n    - containerPort: 6004\r\n      name: shell-port\r\n      protocol: TCP\r\n    - containerPort: 6005\r\n      name: metrics-mgr\r\n      protocol: TCP\r\n    - containerPort: 6006\r\n      name: scheduler\r\n      protocol: TCP\r\n    - containerPort: 6007\r\n      name: metrics-cache-m\r\n      protocol: TCP\r\n    - containerPort: 6008\r\n      name: metrics-cache-s\r\n      protocol: TCP\r\n    - containerPort: 6009\r\n      name: ckptmgr\r\n      protocol: TCP\r\n    resources:\r\n      limits:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n      requests:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n    securityContext:\r\n      allowPrivilegeEscalation: false\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: path/to/mount\r\n      name: volumenameofchoice\r\n      subPath: sub/path/to/mount\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-lbslq\r\n      readOnly: true\r\n  - image: alpine\r\n    imagePullPolicy: Always\r\n    name: sidecar-container\r\n    resources: {}\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-lbslq\r\n      readOnly: true\r\n  dnsPolicy: ClusterFirst\r\n  enableServiceLinks: true\r\n  hostname: acking-1\r\n  preemptionPolicy: PreemptLowerPriority\r\n  priority: 0\r\n  restartPolicy: Always\r\n  schedulerName: default-scheduler\r\n  securityContext: {}\r\n  serviceAccount: default\r\n  serviceAccountName: default\r\n  subdomain: acking\r\n  terminationGracePeriodSeconds: 0\r\n  tolerations:\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/not-ready\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/unreachable\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  volumes:\r\n  - emptyDir: {}\r\n    name: shared-volume\r\n  - name: volumenameofchoice\r\n    persistentVolumeClaim:\r\n      claimName: volume-claim-name\r\n  - name: kube-api-access-lbslq\r\n    projected:\r\n      defaultMode: 420\r\n      sources:\r\n      - serviceAccountToken:\r\n          expirationSeconds: 3607\r\n          path: token\r\n      - configMap:\r\n          items:\r\n          - key: ca.crt\r\n            path: ca.crt\r\n          name: kube-root-ca.crt\r\n      - downwardAPI:\r\n          items:\r\n          - fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.namespace\r\n            path: namespace\r\nstatus:\r\n  conditions:\r\n  - lastProbeTime: null\r\n    lastTransitionTime: \"2021-11-10T22:36:19Z\"\r\n    message: '0/1 nodes are available: 1 persistentvolumeclaim \"volume-claim-name\"\r\n      not found.'\r\n    reason: Unschedulable\r\n    status: \"False\"\r\n    type: PodScheduled\r\n  phase: Pending\r\n  qosClass: Burstable\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>With dynamic PVC: kubectl get pod acking-1 -o yaml</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  annotations:\r\n    prometheus.io/port: \"8080\"\r\n    prometheus.io/scrape: \"true\"\r\n  creationTimestamp: \"2021-11-10T22:39:57Z\"\r\n  generateName: acking-\r\n  labels:\r\n    app: heron\r\n    controller-revision-hash: acking-59fdd8c858\r\n    statefulset.kubernetes.io/pod-name: acking-1\r\n    topology: acking\r\n  name: acking-1\r\n  namespace: default\r\n  ownerReferences:\r\n  - apiVersion: apps/v1\r\n    blockOwnerDeletion: true\r\n    controller: true\r\n    kind: StatefulSet\r\n    name: acking\r\n    uid: dc5ae063-672f-4b1c-98cd-0936cd02a1b0\r\n  resourceVersion: \"1060\"\r\n  uid: cbe65fc2-cddf-496d-b633-68fad946c9b1\r\nspec:\r\n  containers:\r\n  - command:\r\n    - sh\r\n    - -c\r\n    - './heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n      distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--4583400108540459301.tar.gz\r\n      . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n      --topology-name=acking --topology-id=acking1f62dd17-33f9-4a72-98e7-daca680e9f16\r\n      --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181 --state-manager-root=/heron\r\n      --state-manager-config-file=./heron-conf/statemgr.yaml --tmanager-binary=./heron-core/bin/heron-tmanager\r\n      --stmgr-binary=./heron-core/bin/heron-stmgr --metrics-manager-classpath=./heron-core/lib/metricsmgr/*\r\n      --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\" --classpath=heron-api-examples.jar\r\n      --heron-internals-config-file=./heron-conf/heron_internals.yaml --override-config-file=./heron-conf/override.yaml\r\n      --component-ram-map=exclaim1:1073741824,word:1073741824 --component-jvm-opts=\"\"\r\n      --pkg-type=jar --topology-binary-file=heron-api-examples.jar --heron-java-home=$JAVA_HOME\r\n      --heron-shell-binary=./heron-core/bin/heron-shell --cluster=kubernetes --role=saad\r\n      --environment=default --instance-classpath=./heron-core/lib/instance/* --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml\r\n      --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n      --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n      --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n      --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n      --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n      --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n      --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n      --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n      --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n    env:\r\n    - name: HOST\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: status.podIP\r\n    - name: POD_NAME\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: metadata.name\r\n    - name: var_one\r\n      value: variable one\r\n    - name: var_three\r\n      value: variable three\r\n    - name: var_two\r\n      value: variable two\r\n    image: apache/heron:testbuild\r\n    imagePullPolicy: IfNotPresent\r\n    name: executor\r\n    ports:\r\n    - containerPort: 5555\r\n      name: tcp-port-kept\r\n      protocol: TCP\r\n    - containerPort: 5556\r\n      name: udp-port-kept\r\n      protocol: UDP\r\n    - containerPort: 6001\r\n      name: server\r\n      protocol: TCP\r\n    - containerPort: 6002\r\n      name: tmanager-ctl\r\n      protocol: TCP\r\n    - containerPort: 6003\r\n      name: tmanager-stats\r\n      protocol: TCP\r\n    - containerPort: 6004\r\n      name: shell-port\r\n      protocol: TCP\r\n    - containerPort: 6005\r\n      name: metrics-mgr\r\n      protocol: TCP\r\n    - containerPort: 6006\r\n      name: scheduler\r\n      protocol: TCP\r\n    - containerPort: 6007\r\n      name: metrics-cache-m\r\n      protocol: TCP\r\n    - containerPort: 6008\r\n      name: metrics-cache-s\r\n      protocol: TCP\r\n    - containerPort: 6009\r\n      name: ckptmgr\r\n      protocol: TCP\r\n    resources:\r\n      limits:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n      requests:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n    securityContext:\r\n      allowPrivilegeEscalation: false\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: path/to/mount\r\n      name: volumenameofchoice\r\n      subPath: sub/path/to/mount\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-njblm\r\n      readOnly: true\r\n  - image: alpine\r\n    imagePullPolicy: Always\r\n    name: sidecar-container\r\n    resources: {}\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-njblm\r\n      readOnly: true\r\n  dnsPolicy: ClusterFirst\r\n  enableServiceLinks: true\r\n  hostname: acking-1\r\n  preemptionPolicy: PreemptLowerPriority\r\n  priority: 0\r\n  restartPolicy: Always\r\n  schedulerName: default-scheduler\r\n  securityContext: {}\r\n  serviceAccount: default\r\n  serviceAccountName: default\r\n  subdomain: acking\r\n  terminationGracePeriodSeconds: 0\r\n  tolerations:\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/not-ready\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/unreachable\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  volumes:\r\n  - emptyDir: {}\r\n    name: shared-volume\r\n  - name: volumenameofchoice\r\n    persistentVolumeClaim:\r\n      claimName: ondemand-acking-volumenameofchoice\r\n  - name: kube-api-access-njblm\r\n    projected:\r\n      defaultMode: 420\r\n      sources:\r\n      - serviceAccountToken:\r\n          expirationSeconds: 3607\r\n          path: token\r\n      - configMap:\r\n          items:\r\n          - key: ca.crt\r\n            path: ca.crt\r\n          name: kube-root-ca.crt\r\n      - downwardAPI:\r\n          items:\r\n          - fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.namespace\r\n            path: namespace\r\nstatus:\r\n  conditions:\r\n  - lastProbeTime: null\r\n    lastTransitionTime: \"2021-11-10T22:39:57Z\"\r\n    message: '0/1 nodes are available: 1 pod has unbound immediate PersistentVolumeClaims.'\r\n    reason: Unschedulable\r\n    status: \"False\"\r\n    type: PodScheduled\r\n  phase: Pending\r\n  qosClass: Burstable\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>kubectl get persistentvolumeclaims ondemand-acking-volumenameofchoice -o yaml</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  creationTimestamp: \"2021-11-10T22:39:57Z\"\r\n  finalizers:\r\n  - kubernetes.io/pvc-protection\r\n  labels:\r\n    onDemand: \"true\"\r\n    topology: acking\r\n  name: ondemand-acking-volumenameofchoice\r\n  namespace: default\r\n  resourceVersion: \"1048\"\r\n  uid: 34a9bb66-db51-4abe-bc65-a8b45eef1593\r\nspec:\r\n  accessModes:\r\n  - ReadWriteOnce\r\n  - ReadOnlyMany\r\n  resources:\r\n    requests:\r\n      storage: 555Gi\r\n  storageClassName: storage-class-name\r\n  volumeMode: Block\r\n  volumeName: volumenameofchoice\r\nstatus:\r\n  phase: Pending\r\n```\r\n\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965813459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965959201","html_url":"https://github.com/apache/incubator-heron/issues/3724#issuecomment-965959201","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3724","id":965959201,"node_id":"IC_kwDOApKMps45k14h","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T03:36:01Z","updated_at":"2021-11-11T03:36:01Z","author_association":"CONTRIBUTOR","body":"This is the command submitted to the analytic StatefulSet (acking example)...\r\n```\r\n'./heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n          distributedlog://heronkube-zookeeper:2181/heron/acking-root-tag-0-7601280679230606520.tar.gz\r\n          . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n          --topology-name=acking --topology-id=acking51615bf4-a65b-4701-a9a3-ac65d8008fd6\r\n          --topology-defn-file=acking.defn --state-manager-connection=heronkube-zookeeper:2181\r\n          --state-manager-root=/heron --state-manager-config-file=./heron-conf/statemgr.yaml\r\n          --tmanager-binary=./heron-core/bin/heron-tmanager --stmgr-binary=./heron-core/bin/heron-stmgr\r\n          --metrics-manager-classpath=./heron-core/lib/metricsmgr/* --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\"\r\n          --classpath=heron-api-examples.jar --heron-internals-config-file=./heron-conf/heron_internals.yaml\r\n          --override-config-file=./heron-conf/override.yaml --component-ram-map=exclaim1:1073741824,word:1073741824\r\n          --component-jvm-opts=\"\" --pkg-type=jar --topology-binary-file=heron-api-examples.jar\r\n          --heron-java-home=$JAVA_HOME --heron-shell-binary=./heron-core/bin/heron-shell\r\n          --cluster=heronkube --role=root --environment=default --instance-classpath=./heron-core/lib/instance/*\r\n          --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n          --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n          --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n          --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n          --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n          --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n          --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n          --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n          --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n```\r\nI believe the `SHARD_ID` is used internal to the pod to determine what to run. `SHARD_ID` seems to be created from the `POD_NAME` which is metadata.name in the StatefulSet.\r\n```\r\n        env:\r\n        - name: HOST\r\n          valueFrom:\r\n            fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: status.podIP\r\n        - name: POD_NAME\r\n          valueFrom:\r\n            fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.name\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965959201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965961400","html_url":"https://github.com/apache/incubator-heron/issues/3724#issuecomment-965961400","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3724","id":965961400,"node_id":"IC_kwDOApKMps45k2a4","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T03:42:49Z","updated_at":"2021-11-11T03:56:27Z","author_association":"CONTRIBUTOR","body":"In the Heron executor, this is the [logic](https://github.com/apache/incubator-heron/blob/ff7093f95c479cdd45278f1698c6a4782678219c/heron/executor/src/python/heron_executor.py#L990) that decides which processes are launched inside of the container. \r\n```\r\n    if self.shard == 0:\r\n      commands = self._get_tmanager_processes()\r\n    else:\r\n      self._untar_if_needed()\r\n      commands = self._get_streaming_processes()\r\n```\r\nSo the management StatefulSet should just work, but we will need to figure out how to increment the `SHARD_ID` by 1 for the executor processing StatefulSet. Maybe updating `SHARD_ID=${POD_NAME##*-}` to `SHARD_ID=$(expr ${POD_NAME##*-} + 1)` (or something better if your bash-fu is better than mine. :)","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965961400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965972239","html_url":"https://github.com/apache/incubator-heron/pull/3727#issuecomment-965972239","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3727","id":965972239,"node_id":"IC_kwDOApKMps45k5EP","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T04:13:00Z","updated_at":"2021-11-11T04:13:00Z","author_association":"MEMBER","body":"^________^; Thanks @nicknezis ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965972239/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965989191","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-965989191","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":965989191,"node_id":"IC_kwDOApKMps45k9NH","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T04:55:07Z","updated_at":"2021-11-11T05:12:56Z","author_association":"CONTRIBUTOR","body":"One thought for the `ondemand` approach would be that perhaps we should be leveraging the `VolumeClaimTemplate` feature of a StatefulSet. Here is an [example](https://stackoverflow.com/questions/53927587/kubernetes-multiple-pvc-with-statefulset-for-each-pod-vs-single-pvc-for-all-pods). This would allow for a PVC per pod without having to manually create them. Kubernetes will automatically create with the pod's ordinal number. This might also help answer how we handle the `addContainer` call which can be called when someone rescales a running Heron topology. In this case any new pods would get a new PVC. I think it's ok to leave the PVC if the analytic is scaled down because we will cleanup all PVCs when the topology is killed.\r\n\r\n**_Edit:_** This would also allow us to keep most of your logic the same. I do agree there is benefit in having the single shared volume so don't want to lose that. I perhaps was describing things with too strong a focus on the `ondemand` use case.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/965989191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966002157","html_url":"https://github.com/apache/incubator-heron/pull/3729#issuecomment-966002157","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3729","id":966002157,"node_id":"IC_kwDOApKMps45lAXt","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T05:29:28Z","updated_at":"2021-11-11T05:29:28Z","author_association":"CONTRIBUTOR","body":"This may fix #3170 ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966002157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966399651","html_url":"https://github.com/apache/incubator-heron/issues/3724#issuecomment-966399651","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3724","id":966399651,"node_id":"IC_kwDOApKMps45mhaj","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T15:34:15Z","updated_at":"2021-11-11T15:34:15Z","author_association":"MEMBER","body":"That last issue should be simple enough:\r\n\r\nhttps://github.com/apache/incubator-heron/blob/4f588cfe003ee47264e564d25d694c1300d32fbc/heron/schedulers/src/java/org/apache/heron/scheduler/kubernetes/V1Controller.java#L345-L347\r\n\r\nbecomes:\r\n\r\n```java\r\n  private static String setShardIdEnvironmentVariableCommand(boolean isExecutor) {\r\n    final String pattern = String.format(\"%%s=%s && echo shardId=${%%s}\",\r\n        isExecutor ? \"$((${POD_NAME##*-} + 1))\" : \"${POD_NAME##*-}\");\r\n    return String.format(pattern, ENV_SHARD_ID, ENV_SHARD_ID);\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966399651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966401332","html_url":"https://github.com/apache/incubator-heron/issues/3724#issuecomment-966401332","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3724","id":966401332,"node_id":"IC_kwDOApKMps45mh00","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T15:36:26Z","updated_at":"2021-11-11T15:36:26Z","author_association":"MEMBER","body":"We will need to create and teardown a `Service` to allow traffic between the `StatefulSet`s, I am thinking a single ingress/egress TCP/IP port of `6000` in the `executor` containers should suffice.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966401332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966415541","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-966415541","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":966415541,"node_id":"IC_kwDOApKMps45mlS1","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-11T15:54:43Z","updated_at":"2021-11-11T19:16:39Z","author_association":"MEMBER","body":"`VolumeClaimTemplate`s is a cleaner way of handling all this, I shall switch over to using them. I think we can remove the shared PVC volume; there are certain things that should be left to being manually created in Pod Templates. I need to figure out how to rejig the code.\r\n\r\nOn a side note, we need to fix the CI issues. The `statemgr_unit` test needs to be fixed and we _need_ the ability to manually retrigger the CI pipeline.\r\n\r\n**_Edit:_** switching to the `VolumeClaimTemplate` seems to be ~a simple~ an \"involved\" adjustment with a lot of test updates. I am figuring things out.\r\n\r\nWe are going to need to drop the `claimName` option and switch to only using only `Volume Claim Templates` going forward. This will allow people to set up a statically backed PV or expect a dynamically backed one using the `storageClassName` option. If nothing is provided for the `storageClassName` a statically backed PV will be expected. This means PVCs will always be generated and deployed whenever anyone uses these CLI options. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966415541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966758847","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-966758847","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":966758847,"node_id":"IC_kwDOApKMps45n5G_","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T02:05:25Z","updated_at":"2021-11-12T02:07:26Z","author_association":"MEMBER","body":"@nicknezis: Setup and tear down of all PVCs with/without Pod Templates as well as testing without PVCs successful. I have dumped the `YAML` below to make life easier. Full testing battery passing locally.\r\n\r\n**_STATIC:_**\r\n\r\n<details><summary>StatefulSet</summary>\r\n\r\n```yaml\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  creationTimestamp: \"2021-11-12T01:56:24Z\"\r\n  generation: 1\r\n  name: acking\r\n  namespace: default\r\n  resourceVersion: \"1421\"\r\n  uid: 6e991292-575c-4cbb-b200-3e4a315cf4b6\r\nspec:\r\n  podManagementPolicy: Parallel\r\n  replicas: 3\r\n  revisionHistoryLimit: 10\r\n  selector:\r\n    matchLabels:\r\n      app: heron\r\n      topology: acking\r\n  serviceName: acking\r\n  template:\r\n    metadata:\r\n      annotations:\r\n        prometheus.io/port: \"8080\"\r\n        prometheus.io/scrape: \"true\"\r\n      creationTimestamp: null\r\n      labels:\r\n        app: heron\r\n        topology: acking\r\n    spec:\r\n      containers:\r\n      - command:\r\n        - sh\r\n        - -c\r\n        - './heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n          distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--5861445565125076364.tar.gz\r\n          . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n          --topology-name=acking --topology-id=ackingac5a762c-c2d2-45fc-8b59-f83acfff7564\r\n          --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181\r\n          --state-manager-root=/heron --state-manager-config-file=./heron-conf/statemgr.yaml\r\n          --tmanager-binary=./heron-core/bin/heron-tmanager --stmgr-binary=./heron-core/bin/heron-stmgr\r\n          --metrics-manager-classpath=./heron-core/lib/metricsmgr/* --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\"\r\n          --classpath=heron-api-examples.jar --heron-internals-config-file=./heron-conf/heron_internals.yaml\r\n          --override-config-file=./heron-conf/override.yaml --component-ram-map=exclaim1:1073741824,word:1073741824\r\n          --component-jvm-opts=\"\" --pkg-type=jar --topology-binary-file=heron-api-examples.jar\r\n          --heron-java-home=$JAVA_HOME --heron-shell-binary=./heron-core/bin/heron-shell\r\n          --cluster=kubernetes --role=saad --environment=default --instance-classpath=./heron-core/lib/instance/*\r\n          --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n          --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n          --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n          --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n          --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n          --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n          --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n          --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n          --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n        env:\r\n        - name: HOST\r\n          valueFrom:\r\n            fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: status.podIP\r\n        - name: POD_NAME\r\n          valueFrom:\r\n            fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.name\r\n        - name: var_one\r\n          value: variable one\r\n        - name: var_three\r\n          value: variable three\r\n        - name: var_two\r\n          value: variable two\r\n        image: apache/heron:testbuild\r\n        imagePullPolicy: IfNotPresent\r\n        name: executor\r\n        ports:\r\n        - containerPort: 5555\r\n          name: tcp-port-kept\r\n          protocol: TCP\r\n        - containerPort: 5556\r\n          name: udp-port-kept\r\n          protocol: UDP\r\n        - containerPort: 6001\r\n          name: server\r\n          protocol: TCP\r\n        - containerPort: 6002\r\n          name: tmanager-ctl\r\n          protocol: TCP\r\n        - containerPort: 6003\r\n          name: tmanager-stats\r\n          protocol: TCP\r\n        - containerPort: 6004\r\n          name: shell-port\r\n          protocol: TCP\r\n        - containerPort: 6005\r\n          name: metrics-mgr\r\n          protocol: TCP\r\n        - containerPort: 6006\r\n          name: scheduler\r\n          protocol: TCP\r\n        - containerPort: 6007\r\n          name: metrics-cache-m\r\n          protocol: TCP\r\n        - containerPort: 6008\r\n          name: metrics-cache-s\r\n          protocol: TCP\r\n        - containerPort: 6009\r\n          name: ckptmgr\r\n          protocol: TCP\r\n        resources:\r\n          limits:\r\n            cpu: \"3\"\r\n            memory: 4Gi\r\n          requests:\r\n            cpu: \"3\"\r\n            memory: 4Gi\r\n        securityContext:\r\n          allowPrivilegeEscalation: false\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n        volumeMounts:\r\n        - mountPath: /shared_volume\r\n          name: shared-volume\r\n        - mountPath: path/to/mount\r\n          name: volumenameofchoice\r\n          subPath: sub/path/to/mount\r\n      - image: alpine\r\n        imagePullPolicy: Always\r\n        name: sidecar-container\r\n        resources: {}\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n        volumeMounts:\r\n        - mountPath: /shared_volume\r\n          name: shared-volume\r\n      dnsPolicy: ClusterFirst\r\n      restartPolicy: Always\r\n      schedulerName: default-scheduler\r\n      securityContext: {}\r\n      terminationGracePeriodSeconds: 0\r\n      tolerations:\r\n      - effect: NoExecute\r\n        key: node.kubernetes.io/not-ready\r\n        operator: Exists\r\n        tolerationSeconds: 10\r\n      - effect: NoExecute\r\n        key: node.kubernetes.io/unreachable\r\n        operator: Exists\r\n        tolerationSeconds: 10\r\n      volumes:\r\n      - emptyDir: {}\r\n        name: shared-volume\r\n  updateStrategy:\r\n    rollingUpdate:\r\n      partition: 0\r\n    type: RollingUpdate\r\n  volumeClaimTemplates:\r\n  - apiVersion: v1\r\n    kind: PersistentVolumeClaim\r\n    metadata:\r\n      creationTimestamp: null\r\n      labels:\r\n        onDemand: \"true\"\r\n        topology: acking\r\n      name: volumenameofchoice\r\n    spec:\r\n      accessModes:\r\n      - ReadWriteOnce\r\n      - ReadOnlyMany\r\n      resources:\r\n        requests:\r\n          storage: 555Gi\r\n      volumeMode: Block\r\n    status:\r\n      phase: Pending\r\nstatus:\r\n  collisionCount: 0\r\n  currentReplicas: 3\r\n  currentRevision: acking-8688f48fb8\r\n  observedGeneration: 1\r\n  replicas: 3\r\n  updateRevision: acking-8688f48fb8\r\n  updatedReplicas: 3\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Pod</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  annotations:\r\n    prometheus.io/port: \"8080\"\r\n    prometheus.io/scrape: \"true\"\r\n  creationTimestamp: \"2021-11-12T01:50:55Z\"\r\n  generateName: acking-\r\n  labels:\r\n    app: heron\r\n    controller-revision-hash: acking-5f56945486\r\n    statefulset.kubernetes.io/pod-name: acking-1\r\n    topology: acking\r\n  name: acking-1\r\n  namespace: default\r\n  ownerReferences:\r\n  - apiVersion: apps/v1\r\n    blockOwnerDeletion: true\r\n    controller: true\r\n    kind: StatefulSet\r\n    name: acking\r\n    uid: 22b719a9-9b7d-4d63-8365-e76b44a50abe\r\n  resourceVersion: \"960\"\r\n  uid: 35118297-0949-4648-b12f-8b755e583436\r\nspec:\r\n  containers:\r\n  - command:\r\n    - sh\r\n    - -c\r\n    - './heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n      distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--1817385379878734459.tar.gz\r\n      . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n      --topology-name=acking --topology-id=ackingff8ff63d-977f-49ba-8521-11375f9c41d6\r\n      --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181 --state-manager-root=/heron\r\n      --state-manager-config-file=./heron-conf/statemgr.yaml --tmanager-binary=./heron-core/bin/heron-tmanager\r\n      --stmgr-binary=./heron-core/bin/heron-stmgr --metrics-manager-classpath=./heron-core/lib/metricsmgr/*\r\n      --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\" --classpath=heron-api-examples.jar\r\n      --heron-internals-config-file=./heron-conf/heron_internals.yaml --override-config-file=./heron-conf/override.yaml\r\n      --component-ram-map=exclaim1:1073741824,word:1073741824 --component-jvm-opts=\"\"\r\n      --pkg-type=jar --topology-binary-file=heron-api-examples.jar --heron-java-home=$JAVA_HOME\r\n      --heron-shell-binary=./heron-core/bin/heron-shell --cluster=kubernetes --role=saad\r\n      --environment=default --instance-classpath=./heron-core/lib/instance/* --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml\r\n      --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n      --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n      --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n      --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n      --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n      --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n      --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n      --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n      --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n    env:\r\n    - name: HOST\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: status.podIP\r\n    - name: POD_NAME\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: metadata.name\r\n    - name: var_one\r\n      value: variable one\r\n    - name: var_three\r\n      value: variable three\r\n    - name: var_two\r\n      value: variable two\r\n    image: apache/heron:testbuild\r\n    imagePullPolicy: IfNotPresent\r\n    name: executor\r\n    ports:\r\n    - containerPort: 5555\r\n      name: tcp-port-kept\r\n      protocol: TCP\r\n    - containerPort: 5556\r\n      name: udp-port-kept\r\n      protocol: UDP\r\n    - containerPort: 6001\r\n      name: server\r\n      protocol: TCP\r\n    - containerPort: 6002\r\n      name: tmanager-ctl\r\n      protocol: TCP\r\n    - containerPort: 6003\r\n      name: tmanager-stats\r\n      protocol: TCP\r\n    - containerPort: 6004\r\n      name: shell-port\r\n      protocol: TCP\r\n    - containerPort: 6005\r\n      name: metrics-mgr\r\n      protocol: TCP\r\n    - containerPort: 6006\r\n      name: scheduler\r\n      protocol: TCP\r\n    - containerPort: 6007\r\n      name: metrics-cache-m\r\n      protocol: TCP\r\n    - containerPort: 6008\r\n      name: metrics-cache-s\r\n      protocol: TCP\r\n    - containerPort: 6009\r\n      name: ckptmgr\r\n      protocol: TCP\r\n    resources:\r\n      limits:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n      requests:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n    securityContext:\r\n      allowPrivilegeEscalation: false\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: path/to/mount\r\n      name: volumenameofchoice\r\n      subPath: sub/path/to/mount\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-b8b88\r\n      readOnly: true\r\n  - image: alpine\r\n    imagePullPolicy: Always\r\n    name: sidecar-container\r\n    resources: {}\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-b8b88\r\n      readOnly: true\r\n  dnsPolicy: ClusterFirst\r\n  enableServiceLinks: true\r\n  hostname: acking-1\r\n  preemptionPolicy: PreemptLowerPriority\r\n  priority: 0\r\n  restartPolicy: Always\r\n  schedulerName: default-scheduler\r\n  securityContext: {}\r\n  serviceAccount: default\r\n  serviceAccountName: default\r\n  subdomain: acking\r\n  terminationGracePeriodSeconds: 0\r\n  tolerations:\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/not-ready\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/unreachable\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  volumes:\r\n  - name: volumenameofchoice\r\n    persistentVolumeClaim:\r\n      claimName: volumenameofchoice-acking-1\r\n  - emptyDir: {}\r\n    name: shared-volume\r\n  - name: kube-api-access-b8b88\r\n    projected:\r\n      defaultMode: 420\r\n      sources:\r\n      - serviceAccountToken:\r\n          expirationSeconds: 3607\r\n          path: token\r\n      - configMap:\r\n          items:\r\n          - key: ca.crt\r\n            path: ca.crt\r\n          name: kube-root-ca.crt\r\n      - downwardAPI:\r\n          items:\r\n          - fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.namespace\r\n            path: namespace\r\nstatus:\r\n  conditions:\r\n  - lastProbeTime: null\r\n    lastTransitionTime: \"2021-11-12T01:50:55Z\"\r\n    message: '0/1 nodes are available: 1 pod has unbound immediate PersistentVolumeClaims.'\r\n    reason: Unschedulable\r\n    status: \"False\"\r\n    type: PodScheduled\r\n  phase: Pending\r\n  qosClass: Burstable\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>PVC</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  annotations:\r\n    volume.beta.kubernetes.io/storage-provisioner: k8s.io/minikube-hostpath\r\n  creationTimestamp: \"2021-11-12T01:50:55Z\"\r\n  finalizers:\r\n  - kubernetes.io/pvc-protection\r\n  labels:\r\n    app: heron\r\n    onDemand: \"true\"\r\n    topology: acking\r\n  name: volumenameofchoice-acking-0\r\n  namespace: default\r\n  resourceVersion: \"954\"\r\n  uid: 0e8c8aec-ce54-410e-8790-5da2238af798\r\nspec:\r\n  accessModes:\r\n  - ReadWriteOnce\r\n  - ReadOnlyMany\r\n  resources:\r\n    requests:\r\n      storage: 555Gi\r\n  storageClassName: standard\r\n  volumeMode: Block\r\nstatus:\r\n  phase: Pending\r\n```\r\n\r\n</details>\r\n\r\n**_DYNAMIC:_**\r\n\r\n<details><summary>StatefulSet</summary>\r\n\r\n```yaml\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  creationTimestamp: \"2021-11-12T01:53:56Z\"\r\n  generation: 1\r\n  name: acking\r\n  namespace: default\r\n  resourceVersion: \"1212\"\r\n  uid: 597877ea-4601-4bf0-80e3-72f9db78ad47\r\nspec:\r\n  podManagementPolicy: Parallel\r\n  replicas: 3\r\n  revisionHistoryLimit: 10\r\n  selector:\r\n    matchLabels:\r\n      app: heron\r\n      topology: acking\r\n  serviceName: acking\r\n  template:\r\n    metadata:\r\n      annotations:\r\n        prometheus.io/port: \"8080\"\r\n        prometheus.io/scrape: \"true\"\r\n      creationTimestamp: null\r\n      labels:\r\n        app: heron\r\n        topology: acking\r\n    spec:\r\n      containers:\r\n      - command:\r\n        - sh\r\n        - -c\r\n        - './heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n          distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--6172080214638514375.tar.gz\r\n          . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n          --topology-name=acking --topology-id=acking6a21ddc3-dbab-4c25-8a54-dcd3b0264b55\r\n          --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181\r\n          --state-manager-root=/heron --state-manager-config-file=./heron-conf/statemgr.yaml\r\n          --tmanager-binary=./heron-core/bin/heron-tmanager --stmgr-binary=./heron-core/bin/heron-stmgr\r\n          --metrics-manager-classpath=./heron-core/lib/metricsmgr/* --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\"\r\n          --classpath=heron-api-examples.jar --heron-internals-config-file=./heron-conf/heron_internals.yaml\r\n          --override-config-file=./heron-conf/override.yaml --component-ram-map=exclaim1:1073741824,word:1073741824\r\n          --component-jvm-opts=\"\" --pkg-type=jar --topology-binary-file=heron-api-examples.jar\r\n          --heron-java-home=$JAVA_HOME --heron-shell-binary=./heron-core/bin/heron-shell\r\n          --cluster=kubernetes --role=saad --environment=default --instance-classpath=./heron-core/lib/instance/*\r\n          --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n          --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n          --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n          --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n          --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n          --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n          --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n          --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n          --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n        env:\r\n        - name: HOST\r\n          valueFrom:\r\n            fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: status.podIP\r\n        - name: POD_NAME\r\n          valueFrom:\r\n            fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.name\r\n        - name: var_one\r\n          value: variable one\r\n        - name: var_three\r\n          value: variable three\r\n        - name: var_two\r\n          value: variable two\r\n        image: apache/heron:testbuild\r\n        imagePullPolicy: IfNotPresent\r\n        name: executor\r\n        ports:\r\n        - containerPort: 5555\r\n          name: tcp-port-kept\r\n          protocol: TCP\r\n        - containerPort: 5556\r\n          name: udp-port-kept\r\n          protocol: UDP\r\n        - containerPort: 6001\r\n          name: server\r\n          protocol: TCP\r\n        - containerPort: 6002\r\n          name: tmanager-ctl\r\n          protocol: TCP\r\n        - containerPort: 6003\r\n          name: tmanager-stats\r\n          protocol: TCP\r\n        - containerPort: 6004\r\n          name: shell-port\r\n          protocol: TCP\r\n        - containerPort: 6005\r\n          name: metrics-mgr\r\n          protocol: TCP\r\n        - containerPort: 6006\r\n          name: scheduler\r\n          protocol: TCP\r\n        - containerPort: 6007\r\n          name: metrics-cache-m\r\n          protocol: TCP\r\n        - containerPort: 6008\r\n          name: metrics-cache-s\r\n          protocol: TCP\r\n        - containerPort: 6009\r\n          name: ckptmgr\r\n          protocol: TCP\r\n        resources:\r\n          limits:\r\n            cpu: \"3\"\r\n            memory: 4Gi\r\n          requests:\r\n            cpu: \"3\"\r\n            memory: 4Gi\r\n        securityContext:\r\n          allowPrivilegeEscalation: false\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n        volumeMounts:\r\n        - mountPath: /shared_volume\r\n          name: shared-volume\r\n        - mountPath: path/to/mount\r\n          name: volumenameofchoice\r\n          subPath: sub/path/to/mount\r\n      - image: alpine\r\n        imagePullPolicy: Always\r\n        name: sidecar-container\r\n        resources: {}\r\n        terminationMessagePath: /dev/termination-log\r\n        terminationMessagePolicy: File\r\n        volumeMounts:\r\n        - mountPath: /shared_volume\r\n          name: shared-volume\r\n      dnsPolicy: ClusterFirst\r\n      restartPolicy: Always\r\n      schedulerName: default-scheduler\r\n      securityContext: {}\r\n      terminationGracePeriodSeconds: 0\r\n      tolerations:\r\n      - effect: NoExecute\r\n        key: node.kubernetes.io/not-ready\r\n        operator: Exists\r\n        tolerationSeconds: 10\r\n      - effect: NoExecute\r\n        key: node.kubernetes.io/unreachable\r\n        operator: Exists\r\n        tolerationSeconds: 10\r\n      volumes:\r\n      - emptyDir: {}\r\n        name: shared-volume\r\n  updateStrategy:\r\n    rollingUpdate:\r\n      partition: 0\r\n    type: RollingUpdate\r\n  volumeClaimTemplates:\r\n  - apiVersion: v1\r\n    kind: PersistentVolumeClaim\r\n    metadata:\r\n      creationTimestamp: null\r\n      labels:\r\n        onDemand: \"true\"\r\n        topology: acking\r\n      name: volumenameofchoice\r\n    spec:\r\n      accessModes:\r\n      - ReadWriteOnce\r\n      - ReadOnlyMany\r\n      resources:\r\n        requests:\r\n          storage: 555Gi\r\n      storageClassName: storage-class-name\r\n      volumeMode: Block\r\n    status:\r\n      phase: Pending\r\nstatus:\r\n  collisionCount: 0\r\n  currentReplicas: 3\r\n  currentRevision: acking-5cbfb4df4c\r\n  observedGeneration: 1\r\n  replicas: 3\r\n  updateRevision: acking-5cbfb4df4c\r\n  updatedReplicas: 3\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Pod</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: Pod\r\nmetadata:\r\n  annotations:\r\n    prometheus.io/port: \"8080\"\r\n    prometheus.io/scrape: \"true\"\r\n  creationTimestamp: \"2021-11-12T01:53:56Z\"\r\n  generateName: acking-\r\n  labels:\r\n    app: heron\r\n    controller-revision-hash: acking-5cbfb4df4c\r\n    statefulset.kubernetes.io/pod-name: acking-1\r\n    topology: acking\r\n  name: acking-1\r\n  namespace: default\r\n  ownerReferences:\r\n  - apiVersion: apps/v1\r\n    blockOwnerDeletion: true\r\n    controller: true\r\n    kind: StatefulSet\r\n    name: acking\r\n    uid: 597877ea-4601-4bf0-80e3-72f9db78ad47\r\n  resourceVersion: \"1205\"\r\n  uid: eec86082-2259-4fe7-999a-10f7e58d2e79\r\nspec:\r\n  containers:\r\n  - command:\r\n    - sh\r\n    - -c\r\n    - './heron-core/bin/heron-downloader-config kubernetes && ./heron-core/bin/heron-downloader\r\n      distributedlog://zookeeper:2181/heronbkdl/acking-saad-tag-0--6172080214638514375.tar.gz\r\n      . && SHARD_ID=${POD_NAME##*-} && echo shardId=${SHARD_ID} && ./heron-core/bin/heron-executor\r\n      --topology-name=acking --topology-id=acking6a21ddc3-dbab-4c25-8a54-dcd3b0264b55\r\n      --topology-defn-file=acking.defn --state-manager-connection=zookeeper:2181 --state-manager-root=/heron\r\n      --state-manager-config-file=./heron-conf/statemgr.yaml --tmanager-binary=./heron-core/bin/heron-tmanager\r\n      --stmgr-binary=./heron-core/bin/heron-stmgr --metrics-manager-classpath=./heron-core/lib/metricsmgr/*\r\n      --instance-jvm-opts=\"LVhYOitIZWFwRHVtcE9uT3V0T2ZNZW1vcnlFcnJvcg(61)(61)\" --classpath=heron-api-examples.jar\r\n      --heron-internals-config-file=./heron-conf/heron_internals.yaml --override-config-file=./heron-conf/override.yaml\r\n      --component-ram-map=exclaim1:1073741824,word:1073741824 --component-jvm-opts=\"\"\r\n      --pkg-type=jar --topology-binary-file=heron-api-examples.jar --heron-java-home=$JAVA_HOME\r\n      --heron-shell-binary=./heron-core/bin/heron-shell --cluster=kubernetes --role=saad\r\n      --environment=default --instance-classpath=./heron-core/lib/instance/* --metrics-sinks-config-file=./heron-conf/metrics_sinks.yaml\r\n      --scheduler-classpath=./heron-core/lib/scheduler/*:./heron-core/lib/packing/*:./heron-core/lib/statemgr/*\r\n      --python-instance-binary=./heron-core/bin/heron-python-instance --cpp-instance-binary=./heron-core/bin/heron-cpp-instance\r\n      --metricscache-manager-classpath=./heron-core/lib/metricscachemgr/* --metricscache-manager-mode=disabled\r\n      --is-stateful=false --checkpoint-manager-classpath=./heron-core/lib/ckptmgr/*:./heron-core/lib/statefulstorage/*:\r\n      --stateful-config-file=./heron-conf/stateful.yaml --checkpoint-manager-ram=1073741824\r\n      --health-manager-mode=disabled --health-manager-classpath=./heron-core/lib/healthmgr/*\r\n      --shard=$SHARD_ID --server-port=6001 --tmanager-controller-port=6002 --tmanager-stats-port=6003\r\n      --shell-port=6004 --metrics-manager-port=6005 --scheduler-port=6006 --metricscache-manager-server-port=6007\r\n      --metricscache-manager-stats-port=6008 --checkpoint-manager-port=6009'\r\n    env:\r\n    - name: HOST\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: status.podIP\r\n    - name: POD_NAME\r\n      valueFrom:\r\n        fieldRef:\r\n          apiVersion: v1\r\n          fieldPath: metadata.name\r\n    - name: var_one\r\n      value: variable one\r\n    - name: var_three\r\n      value: variable three\r\n    - name: var_two\r\n      value: variable two\r\n    image: apache/heron:testbuild\r\n    imagePullPolicy: IfNotPresent\r\n    name: executor\r\n    ports:\r\n    - containerPort: 5555\r\n      name: tcp-port-kept\r\n      protocol: TCP\r\n    - containerPort: 5556\r\n      name: udp-port-kept\r\n      protocol: UDP\r\n    - containerPort: 6001\r\n      name: server\r\n      protocol: TCP\r\n    - containerPort: 6002\r\n      name: tmanager-ctl\r\n      protocol: TCP\r\n    - containerPort: 6003\r\n      name: tmanager-stats\r\n      protocol: TCP\r\n    - containerPort: 6004\r\n      name: shell-port\r\n      protocol: TCP\r\n    - containerPort: 6005\r\n      name: metrics-mgr\r\n      protocol: TCP\r\n    - containerPort: 6006\r\n      name: scheduler\r\n      protocol: TCP\r\n    - containerPort: 6007\r\n      name: metrics-cache-m\r\n      protocol: TCP\r\n    - containerPort: 6008\r\n      name: metrics-cache-s\r\n      protocol: TCP\r\n    - containerPort: 6009\r\n      name: ckptmgr\r\n      protocol: TCP\r\n    resources:\r\n      limits:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n      requests:\r\n        cpu: \"3\"\r\n        memory: 4Gi\r\n    securityContext:\r\n      allowPrivilegeEscalation: false\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: path/to/mount\r\n      name: volumenameofchoice\r\n      subPath: sub/path/to/mount\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-bdwcl\r\n      readOnly: true\r\n  - image: alpine\r\n    imagePullPolicy: Always\r\n    name: sidecar-container\r\n    resources: {}\r\n    terminationMessagePath: /dev/termination-log\r\n    terminationMessagePolicy: File\r\n    volumeMounts:\r\n    - mountPath: /shared_volume\r\n      name: shared-volume\r\n    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount\r\n      name: kube-api-access-bdwcl\r\n      readOnly: true\r\n  dnsPolicy: ClusterFirst\r\n  enableServiceLinks: true\r\n  hostname: acking-1\r\n  preemptionPolicy: PreemptLowerPriority\r\n  priority: 0\r\n  restartPolicy: Always\r\n  schedulerName: default-scheduler\r\n  securityContext: {}\r\n  serviceAccount: default\r\n  serviceAccountName: default\r\n  subdomain: acking\r\n  terminationGracePeriodSeconds: 0\r\n  tolerations:\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/not-ready\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  - effect: NoExecute\r\n    key: node.kubernetes.io/unreachable\r\n    operator: Exists\r\n    tolerationSeconds: 10\r\n  volumes:\r\n  - name: volumenameofchoice\r\n    persistentVolumeClaim:\r\n      claimName: volumenameofchoice-acking-1\r\n  - emptyDir: {}\r\n    name: shared-volume\r\n  - name: kube-api-access-bdwcl\r\n    projected:\r\n      defaultMode: 420\r\n      sources:\r\n      - serviceAccountToken:\r\n          expirationSeconds: 3607\r\n          path: token\r\n      - configMap:\r\n          items:\r\n          - key: ca.crt\r\n            path: ca.crt\r\n          name: kube-root-ca.crt\r\n      - downwardAPI:\r\n          items:\r\n          - fieldRef:\r\n              apiVersion: v1\r\n              fieldPath: metadata.namespace\r\n            path: namespace\r\nstatus:\r\n  conditions:\r\n  - lastProbeTime: null\r\n    lastTransitionTime: \"2021-11-12T01:53:56Z\"\r\n    message: '0/1 nodes are available: 1 pod has unbound immediate PersistentVolumeClaims.'\r\n    reason: Unschedulable\r\n    status: \"False\"\r\n    type: PodScheduled\r\n  phase: Pending\r\n  qosClass: Burstable\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>PVC</summary>\r\n\r\n```yaml\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  creationTimestamp: \"2021-11-12T01:53:56Z\"\r\n  finalizers:\r\n  - kubernetes.io/pvc-protection\r\n  labels:\r\n    app: heron\r\n    onDemand: \"true\"\r\n    topology: acking\r\n  name: volumenameofchoice-acking-0\r\n  namespace: default\r\n  resourceVersion: \"1190\"\r\n  uid: b7a4c403-b749-452b-ac70-16c6a9e158d6\r\nspec:\r\n  accessModes:\r\n  - ReadWriteOnce\r\n  - ReadOnlyMany\r\n  resources:\r\n    requests:\r\n      storage: 555Gi\r\n  storageClassName: storage-class-name\r\n  volumeMode: Block\r\nstatus:\r\n  phase: Pending\r\n```\r\n\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966758847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966790673","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-966790673","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":966790673,"node_id":"IC_kwDOApKMps45oA4R","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T03:24:52Z","updated_at":"2021-11-12T19:06:56Z","author_association":"MEMBER","body":"I have updated the usage [documentation](https://github.com/apache/incubator-heron/blob/274f86c3567cd8633eb8c97e968e0c35d06e903c/website2/docs/schedulers-k8s-persistent-volume-claims.md) and merged in the updates. Let us see if TravisCI is in a good mood 🎲 🤞🏼...\r\n\r\n**_Edit:_** Updated with potential use cases  [documentation](https://github.com/apache/incubator-heron/blob/c7a97694e111fa3e4bf222fe13ee90d9638c3786/website2/docs/schedulers-k8s-persistent-volume-claims.md).","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/966790673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967224610","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967224610","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967224610,"node_id":"IC_kwDOApKMps45pq0i","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T15:57:44Z","updated_at":"2021-11-12T15:57:44Z","author_association":"MEMBER","body":"Let's wait until CI passes before merging","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967224610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967400325","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967400325","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967400325,"node_id":"IC_kwDOApKMps45qVuF","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T19:36:38Z","updated_at":"2021-11-12T19:36:38Z","author_association":"CONTRIBUTOR","body":"My testing on another branch is currently failing and I think it might be related to this issue. ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967400325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967610720","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967610720","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967610720,"node_id":"IC_kwDOApKMps45rJFg","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T21:39:26Z","updated_at":"2021-11-12T21:39:26Z","author_association":"CONTRIBUTOR","body":"@thinker0 I'm still having issues with the build. I originally got this issue (https://github.com/python-zk/kazoo/pull/609) in the `heron-tracker`, but I bumped the version of Kazoo dependency to 2.8.0. That fixed that issue, but I now get the following:\r\n```\r\nkubectl -n pir logs heronkube-tools-bf7cf598-w46bs -c heron-tracker\r\n[2021-11-12 21:28:15 +0000] [ERROR]: Exception while getting state_managers.\r\nTraceback (most recent call last):\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/.bootstrap/pex/pex.py\", line 476, in execute\r\n    exit_value = self._wrap_coverage(self._wrap_profiling, self._execute)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/.bootstrap/pex/pex.py\", line 401, in _wrap_coverage\r\n    return runner(*args)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/.bootstrap/pex/pex.py\", line 432, in _wrap_profiling\r\n    return runner(*args)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/.bootstrap/pex/pex.py\", line 532, in _execute\r\n    return self.execute_entry(self._pex_info.entry_point)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/.bootstrap/pex/pex.py\", line 679, in execute_entry\r\n    return self.execute_module(entry_point, alter_sys)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/.bootstrap/pex/pex.py\", line 691, in execute_module\r\n    runpy.run_module(module_name, run_name=\"__main__\", alter_sys=alter_sys)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 207, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/lib/python3.8/runpy.py\", line 97, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"/usr/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/tools/tracker/src/python/main.py\", line 231, in <module>\r\n    cli() # pylint: disable=no-value-for-parameter\r\n  File \"/root/.pex/installed_wheels/386b0f74344f046086c84bc4bc5c4f27f2f9a108/click-7.1.2-py2.py3-none-any.whl/click/core.py\", line 829, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"/root/.pex/installed_wheels/386b0f74344f046086c84bc4bc5c4f27f2f9a108/click-7.1.2-py2.py3-none-any.whl/click/core.py\", line 782, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/root/.pex/installed_wheels/386b0f74344f046086c84bc4bc5c4f27f2f9a108/click-7.1.2-py2.py3-none-any.whl/click/core.py\", line 1066, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\n  File \"/root/.pex/installed_wheels/386b0f74344f046086c84bc4bc5c4f27f2f9a108/click-7.1.2-py2.py3-none-any.whl/click/core.py\", line 610, in invoke\r\n    return callback(*args, **kwargs)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/tools/tracker/src/python/main.py\", line 204, in cli\r\n    application = Application(config)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/tools/tracker/src/python/main.py\", line 50, in __init__\r\n    self.tracker.synch_topologies()\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/tools/tracker/src/python/tracker.py\", line 121, in synch_topologies\r\n    self.state_managers = statemanagerfactory.get_all_state_managers(self.config.statemgr_config)\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/statemgrs/src/python/statemanagerfactory.py\", line 48, in get_all_state_managers\r\n    raise ex\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/statemgrs/src/python/statemanagerfactory.py\", line 43, in get_all_state_managers\r\n    state_managers.extend(get_all_zk_state_managers(conf))\r\n  File \"/root/.pex/unzipped_pexes/3a087e21a1133580c59570c4b7dc76153a7fb1f5/heron/statemgrs/src/python/statemanagerfactory.py\", line 72, in get_all_zk_state_managers\r\n    tunnelhost = location['tunnelhost']\r\nKeyError: 'tunnelhost'\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967610720/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967616737","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967616737","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967616737,"node_id":"IC_kwDOApKMps45rKjh","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T21:43:04Z","updated_at":"2021-11-12T21:43:04Z","author_association":"MEMBER","body":"@nicknezis It looks like the CI build failed on this PR.  I have not looked into the details of why it failed yet.   Can we revert the merge until proven it will pass?","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967616737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967700663","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967700663","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967700663,"node_id":"IC_kwDOApKMps45rfC3","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T22:24:55Z","updated_at":"2021-11-12T22:24:55Z","author_association":"CONTRIBUTOR","body":"Yes, but we also need to revert this issue: https://github.com/apache/incubator-heron/pull/3727","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967700663/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967728423","html_url":"https://github.com/apache/incubator-heron/issues/3733#issuecomment-967728423","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3733","id":967728423,"node_id":"IC_kwDOApKMps45rl0n","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T23:36:07Z","updated_at":"2021-11-12T23:36:07Z","author_association":"MEMBER","body":"I have isolated the issue to the exact same one in each of the tests:\r\n\r\n```java\r\nwhile (dummy_stmgr->NumStartBPMsgs() == 0) sleep(1);\r\n```\r\n\r\nThe associated code snippets for each test:\r\n\r\nhttps://github.com/apache/incubator-heron/blob/c32c09a0f09caca74dbf5715aa0632f0a50356c9/heron/stmgr/tests/cpp/server/stmgr_unittest.cpp#L1030-L1031\r\nhttps://github.com/apache/incubator-heron/blob/c32c09a0f09caca74dbf5715aa0632f0a50356c9/heron/stmgr/tests/cpp/server/stmgr_unittest.cpp#L1140-L1141\r\nhttps://github.com/apache/incubator-heron/blob/c32c09a0f09caca74dbf5715aa0632f0a50356c9/heron/stmgr/tests/cpp/server/stmgr_unittest.cpp#L1397-L1398\r\n\r\nThe tests all hang in a busy-wait loop waiting for back pressure build-up.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967728423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967729571","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967729571","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967729571,"node_id":"IC_kwDOApKMps45rmGj","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T23:39:54Z","updated_at":"2021-11-12T23:39:54Z","author_association":"MEMBER","body":"it will fix\r\n\r\n```\r\n  pex_file = os.environ.get('PEX', None)\r\n  if pex_file is not None:\r\n    return normalized_class_path(str(Path(pex_file).resolve(strict=True).parent.parent))\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967729571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967731642","html_url":"https://github.com/apache/incubator-heron/pull/3727#issuecomment-967731642","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3727","id":967731642,"node_id":"IC_kwDOApKMps45rmm6","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T23:47:21Z","updated_at":"2021-11-12T23:47:21Z","author_association":"MEMBER","body":"Add https://github.com/apache/incubator-heron/pull/3734","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967731642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967732309","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967732309","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967732309,"node_id":"IC_kwDOApKMps45rmxV","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-12T23:49:59Z","updated_at":"2021-11-12T23:49:59Z","author_association":"MEMBER","body":"https://github.com/apache/incubator-heron/pull/3734","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967732309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967757470","html_url":"https://github.com/apache/incubator-heron/pull/3736#issuecomment-967757470","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3736","id":967757470,"node_id":"IC_kwDOApKMps45rs6e","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T01:42:20Z","updated_at":"2021-11-13T01:42:20Z","author_association":"MEMBER","body":"Base image repo can be found here: https://github.com/joshfischer1108/heron-centos7","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967757470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967757574","html_url":"https://github.com/apache/incubator-heron/pull/3736#issuecomment-967757574","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3736","id":967757574,"node_id":"IC_kwDOApKMps45rs8G","user":{"login":"joshfischer1108","id":5785700,"node_id":"MDQ6VXNlcjU3ODU3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/5785700?v=4","gravatar_id":"","url":"https://api.github.com/users/joshfischer1108","html_url":"https://github.com/joshfischer1108","followers_url":"https://api.github.com/users/joshfischer1108/followers","following_url":"https://api.github.com/users/joshfischer1108/following{/other_user}","gists_url":"https://api.github.com/users/joshfischer1108/gists{/gist_id}","starred_url":"https://api.github.com/users/joshfischer1108/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshfischer1108/subscriptions","organizations_url":"https://api.github.com/users/joshfischer1108/orgs","repos_url":"https://api.github.com/users/joshfischer1108/repos","events_url":"https://api.github.com/users/joshfischer1108/events{/privacy}","received_events_url":"https://api.github.com/users/joshfischer1108/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T01:43:02Z","updated_at":"2021-11-13T01:43:02Z","author_association":"MEMBER","body":"With this change we should be able to release centos7 containers next release.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967757574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967771067","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-967771067","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":967771067,"node_id":"IC_kwDOApKMps45rwO7","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T03:22:42Z","updated_at":"2021-11-13T03:22:42Z","author_association":"MEMBER","body":"New commits from other branches have broken the pipeline:\r\n```bash\r\nTraceback (most recent call last):\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/.bootstrap/pex/pex.py\", line 476, in execute\r\n    exit_value = self._wrap_coverage(self._wrap_profiling, self._execute)\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/.bootstrap/pex/pex.py\", line 401, in _wrap_coverage\r\n    return runner(*args)\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/.bootstrap/pex/pex.py\", line 432, in _wrap_profiling\r\n    return runner(*args)\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/.bootstrap/pex/pex.py\", line 532, in _execute\r\n    return self.execute_entry(self._pex_info.entry_point)\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/.bootstrap/pex/pex.py\", line 679, in execute_entry\r\n    return self.execute_module(entry_point, alter_sys)\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/.bootstrap/pex/pex.py\", line 691, in execute_module\r\n    runpy.run_module(module_name, run_name=\"__main__\", alter_sys=alter_sys)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 205, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/integration_test/src/python/local_test_runner/main.py\", line 180, in <module>\r\n    main()\r\n  File \"/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/integration_test/src/python/local_test_runner/main.py\", line 115, in main\r\n    conf_string = pkgutil.get_data(__name__, conf_file).decode()\r\n  File \"/usr/lib/python3.6/pkgutil.py\", line 634, in get_data\r\n    return loader.get_data(resource_name)\r\n  File \"<frozen importlib._bootstrap_external>\", line 832, in get_data\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/travis/.pex/unzipped_pexes/9aaea117cab7d477701d8d2e3495171bd049d9bd/integration_test/src/python/local_test_runner/integration_test/src/python/local_test_runner/resources/test.conf'\r\nThe command \"scripts/travis/ci.sh\" exited with 1.\r\n```\r\n\r\nI have dropped down to the `Pod Template` PR merge.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967771067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967778038","html_url":"https://github.com/apache/incubator-heron/pull/3731#issuecomment-967778038","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3731","id":967778038,"node_id":"IC_kwDOApKMps45rx72","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T04:28:16Z","updated_at":"2021-11-13T04:28:16Z","author_association":"CONTRIBUTOR","body":"That fixed it. Thank you!","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967778038/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967785558","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-967785558","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":967785558,"node_id":"IC_kwDOApKMps45rzxW","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T05:28:25Z","updated_at":"2021-11-13T05:28:25Z","author_association":"CONTRIBUTOR","body":"I figured out why I couldn't delete any topologies. Our Helm chart didn't have the `deletecollection` permission. Added it to the branch.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967785558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967791007","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-967791007","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":967791007,"node_id":"IC_kwDOApKMps45r1Gf","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T06:23:58Z","updated_at":"2021-11-13T06:23:58Z","author_association":"CONTRIBUTOR","body":"Apologies for the delay in testing. Now that the other Python issue is resolved, I'm again able to submit and kill topologies. It seems that the scheduler is always attempting to create new PVCs. \r\n\r\nI created the following PVC:\r\n```\r\napiVersion: v1\r\nkind: PersistentVolumeClaim\r\nmetadata:\r\n  name: nez-big-storage\r\nspec:\r\n  accessModes:\r\n  - ReadWriteMany\r\n  resources:\r\n    requests:\r\n      storage: 5Gi\r\n  storageClassName: standard\r\n  volumeMode: Filesystem\r\n```\r\n\r\nAnd then submitted the following: \r\n```\r\nheron submit heronkube \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.nez-volume-name.readOnly=true \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.nez-volume-name.path=/tmp/nez \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.nez-volume-name.subPath=was/here \\\r\n--config-property heron.kubernetes.volumes.persistentVolumeClaim.nez-volume-name.claimname=nez-big-storage \\\r\n/heron/examples/heron-api-examples.jar org.apache.heron.examples.api.AckingTopology acking\r\n```\r\n\r\nThe pre-provisioned PVC would be mounted at the above path `/tmp/nez` with a `volumeMount` named `nez-volume-name`. Not this is the volume name, as opposed to the volume claim name.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967791007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967792144","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-967792144","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":967792144,"node_id":"IC_kwDOApKMps45r1YQ","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T06:33:46Z","updated_at":"2021-11-13T06:33:46Z","author_association":"CONTRIBUTOR","body":"The \"dynamic\" creation of the PVCs would only happen when the special claim name `OnDemand` is used. This would be a special toggle that triggers the logic to dynamically create the PVC with the Claim Template. Only then do we use the other options to populate the Claim Template.\r\n\r\nI think we're getting close. Hopefully that explanation helps.\r\n\r\nOne thing I notice on the Spark config structure that might be worth noting, they use the `mount` and `options` to distinguish the volume mount set of configs and the options that are specific to the type of storage. In our case, so far we are only implementing the PVC approach, but in the future we might also add `hostPath`. I'm not sure if having the `mount` and `options` configuration hierarchy helps make the code cleaner. I can see things still working the way you currently have the naming, so it might not be a big deal.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/967792144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968090797","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-968090797","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":968090797,"node_id":"IC_kwDOApKMps45s-St","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T16:00:57Z","updated_at":"2021-11-13T16:00:57Z","author_association":"MEMBER","body":"Thank you for taking the time to look at this!\r\n\r\nI think it is important to keep in mind the following key limitations of a `StatefulSet`:\r\n\r\n* Pod templates are copied verbatim.\r\n* Volumes are shared with all Pods.\r\n* The same volume mounts are duplicated in matching containers across Pods.\r\n* Only way to have unique volumes per pod is to leverage `volumeClaimTemplates`.\r\n\r\nPlease see [***Stable Storage***](https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/).\r\n\r\nIf you would like to mount a volume you have already created you need to name it based on the naming convention K8s uses. K8s will initially attempt locating a persistent volume that matches the persistent volume claim, if that fails it attempts to generate a dynamically backed volume.\r\n\r\nIf I proceed to add volumes to the `StatefulSet`, those volumes will be shared in all Pods. To mount a volume in a Pod you need to have a linked Volume in the Pod's spec. We could have some bash trickery that mounts the unique Volume into a container, but that volume will be shared with all other Pods. The long and the short of it is that we will end up right back where we started with the Volume being shared with all Pods.\r\n\r\nIt is bad design to utilize the same CLI parameter to mount both unique and shared volumes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968090797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968160231","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968160231","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968160231,"node_id":"IC_kwDOApKMps45tPPn","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T22:57:12Z","updated_at":"2021-11-14T00:16:07Z","author_association":"MEMBER","body":"After a lot of code digging and multithreaded debugging on the command line in GDB I have isolated and fixed the bug with the failing test on a 4 core machine. The test is also passing on a machine with many more cores.\r\n\r\nThe issue is with backpressure buildup in the three problematic tests. The bolt threads are killed and the spouts are allowed to build backpressure to set up the scenario for the \"event\" in the test. I have tweaked the high/low watermarks for the backpressure as well as tweaked the spout counts to get the tests to work faster.\r\n\r\nThere are some weird `PEX` errors that are coming up but if the CI runtime passes the 100-105min mark we can safely assume the `stmgr_unittest` is now passing in entirety in the CI pipeline as well.\r\n\r\n**_Edit:_** It can be flaky but will pass locally. It will pass by the 3rd automatic run attempt for the unit test.\r\n\r\n<details><summary>First run</summary>\r\n\r\n```bash\r\nINFO: Elapsed time: 379.150s, Critical Path: 353.90s\r\nINFO: 235 processes: 236 local.\r\nINFO: Build completed successfully, 235 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.1s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.5s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.3s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.3s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 0.5s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 2.0s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 0.5s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 0.4s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.4s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 0.5s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 0.4s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 0.3s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.5s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 0.3s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.3s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 0.5s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 0.9s\r\n  WARNING: //heron/api/tests/scala:api-scala-test: Test execution time (0.9s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 0.6s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.0s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.4s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.1s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.2s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.0s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 0.3s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.3s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 0.4s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 0.6s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 1.1s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 1.5s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.3s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 5.1s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 0.4s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.4s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.3s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 0.9s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 1.0s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 0.4s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.4s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 1.3s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 0.9s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 1.0s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 0.8s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 0.6s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 0.5s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 0.9s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 0.5s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 0.6s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 0.7s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 0.7s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 0.6s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 0.5s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 0.5s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 0.5s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 0.5s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 2.6s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.6s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 0.7s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 0.6s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 0.7s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.3s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 0.6s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 5.6s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.3s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 2.7s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 2.5s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 3.1s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 11.0s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.1s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 1.2s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 1.1s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 1.2s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 1.2s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 1.1s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 1.2s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 1.0s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.1s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 1.1s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 1.1s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 1.1s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 1.1s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 1.1s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 0.7s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 0.5s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 9.5s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 0.6s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 0.8s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.5s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.4s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 0.6s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 0.5s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.3s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 0.4s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 1.9s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 0.4s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 2.4s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 1.4s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 3.6s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 0.5s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 1.4s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 1.5s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 1.7s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 11.8s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 0.4s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 0.4s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 0.8s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 2.9s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 1.4s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 1.8s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.4s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.3s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 0.9s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 0.8s\r\n//heron/schedulers/tests/java:KubernetesUtilsTest                        PASSED in 0.4s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 0.5s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 0.9s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 0.6s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 1.3s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 0.8s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 0.5s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 0.7s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 0.6s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 0.7s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 2.1s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 1.0s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 1.0s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 1.2s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.3s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 0.3s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 1.7s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.4s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 0.7s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 0.5s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 0.8s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 0.5s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.3s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 0.5s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 0.4s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.3s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 0.5s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 1.4s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 1.0s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.3s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 0.2s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 0.3s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.3s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.2s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 1.6s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.3s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 0.3s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 1.5s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.3s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 0.4s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 2.0s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 2.0s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 1.1s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.0s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 0.6s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 1.3s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 1.1s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 1.1s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 1.2s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 1.1s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.4s\r\n  WARNING: //heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest: Test execution time (1.4s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/server:stateful-restorer_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.1s\r\n  WARNING: //heron/stmgr/tests/cpp/util:neighbour_calculator_unittest: Test execution time (0.1s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.1s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.1s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 26.2s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.4s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 0.7s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.2s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 1.0s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.2s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.5s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.4s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.3s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 1.5s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 0.7s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.4s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 0.5s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 0.6s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.3s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.3s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 0.4s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 1.6s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 0.4s\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                             FLAKY, failed in 1 out of 2 in 315.1s\r\n  Stats over 2 runs: max = 315.1s, min = 37.0s, avg = 176.0s, dev = 139.0s\r\n  /root/.cache/bazel/_bazel_root/f4ab758bd53020512013f7dfa13b6902/execroot/org_apache_heron/bazel-out/k8-fastbuild/testlogs/heron/stmgr/tests/cpp/server/stmgr_unittest/test_attempts/attempt_1.log\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Second run</summary>\r\n\r\n```bash\r\nINFO: 235 processes: 1 internal, 234 local.\r\nINFO: Build completed successfully, 235 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.1s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.4s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.5s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.3s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 0.5s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 2.1s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 0.6s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 0.5s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 0.5s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.4s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 0.5s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 0.8s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 1.0s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.3s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 0.4s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 0.6s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 1.3s\r\n  WARNING: //heron/api/tests/scala:api-scala-test: Test execution time (1.3s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 1.3s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.0s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.3s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.1s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.2s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.1s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 0.4s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.4s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 0.5s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 0.9s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 1.8s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 1.9s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.3s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 5.6s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 0.4s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.4s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.4s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 1.0s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 1.0s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 0.4s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.5s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 1.6s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 1.6s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 0.7s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 0.6s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 0.8s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 1.1s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 0.8s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 1.9s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 0.5s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 1.2s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 1.3s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 0.6s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 1.3s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 0.7s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 0.7s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 0.8s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 0.7s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 0.7s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 0.8s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 2.8s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.6s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 0.6s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 1.4s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 1.7s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.3s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 0.9s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 5.8s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.3s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 2.7s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 2.6s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 3.2s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 11.2s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.2s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 1.2s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 1.2s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 1.4s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 1.3s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 1.2s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 1.3s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 1.1s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.3s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 1.2s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 1.3s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 1.7s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 1.6s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 1.5s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 0.8s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 0.5s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 0.5s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 0.7s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 0.6s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 0.6s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.5s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.4s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 1.7s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 1.1s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.5s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 0.6s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 1.3s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 2.2s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 0.5s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 2.7s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 2.2s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 6.0s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 1.2s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 2.4s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 1.8s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 3.3s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 12.5s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 1.1s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 0.6s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 1.8s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 3.8s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 2.7s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 3.6s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.5s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.6s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 1.8s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 1.2s\r\n//heron/schedulers/tests/java:KubernetesUtilsTest                        PASSED in 0.6s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 0.8s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 1.1s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 0.9s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 1.9s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 1.0s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 0.7s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 0.8s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 0.6s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 0.7s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 4.0s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 2.4s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 1.5s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 2.8s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.3s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 0.4s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 2.1s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.3s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 0.8s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 0.7s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.4s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 0.4s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 0.9s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 1.2s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.3s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 0.6s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 0.5s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.4s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 0.9s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 2.4s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 1.8s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.5s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 0.2s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 0.3s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.5s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.2s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 2.8s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.3s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 0.7s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 2.0s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.4s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 0.7s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 3.0s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 2.8s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 1.6s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.0s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 0.8s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 2.5s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 1.2s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 1.3s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 1.1s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 1.2s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.9s\r\n  WARNING: //heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest: Test execution time (1.9s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/server:stateful-restorer_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                            PASSED in 34.4s\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/util:neighbour_calculator_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.1s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.0s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 26.2s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.6s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 1.3s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.5s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 1.1s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.4s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.8s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.8s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.4s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 1.5s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 1.7s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.6s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 0.5s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 0.6s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.4s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.9s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 0.4s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 2.5s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 0.5s\r\n\r\nINFO: Build completed successfully, 235 total actions\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Third run</summary>\r\n\r\n```bash\r\nINFO: 235 processes: 1 internal, 234 local.\r\nINFO: Build completed successfully, 235 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.1s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.7s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.3s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.4s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 1.2s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 2.8s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 0.7s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 0.8s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 0.9s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.3s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 0.6s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 0.4s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 0.3s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.3s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 0.5s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.3s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 0.5s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 1.5s\r\n  WARNING: //heron/api/tests/scala:api-scala-test: Test execution time (1.5s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 1.2s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.1s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.5s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.0s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.1s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.2s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.1s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 0.5s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.3s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 0.4s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 0.8s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 1.5s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 1.6s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.3s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 5.2s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 0.5s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.5s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.3s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 1.0s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 1.0s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 0.5s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.5s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 1.5s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 1.0s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 0.7s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 0.8s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 0.8s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 1.2s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 1.1s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 1.1s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 1.0s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 0.8s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 1.5s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 1.6s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 1.6s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 1.3s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 1.3s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 0.8s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 0.8s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 0.8s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 0.9s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 2.6s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.6s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 0.6s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 0.6s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 0.6s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.3s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 1.0s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 5.6s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.3s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 2.8s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 2.5s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 3.2s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 11.3s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.2s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 1.2s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 1.1s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 1.3s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 1.2s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 1.2s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 1.3s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 1.2s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.4s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 1.5s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 1.1s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 1.1s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 1.2s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 1.1s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 0.6s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 0.6s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.7s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 9.5s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 0.9s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 0.8s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.6s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.5s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 0.9s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 0.8s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.3s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 1.4s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 0.7s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 1.8s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 2.8s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 0.8s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 3.4s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 2.9s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 2.2s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 6.9s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 1.4s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 2.3s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 1.9s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 2.3s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 3.6s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 13.0s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 1.2s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 0.7s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 2.1s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 5.2s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 2.3s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 3.3s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.6s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.6s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 1.7s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 1.5s\r\n//heron/schedulers/tests/java:KubernetesUtilsTest                        PASSED in 0.9s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 0.7s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 1.7s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 0.5s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 2.1s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 1.6s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 0.9s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 1.0s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 0.8s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 1.2s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 3.5s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 1.9s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 1.7s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 1.4s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.4s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 0.6s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 2.2s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.4s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 0.8s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 0.8s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.5s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 1.1s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 1.2s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 0.5s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.4s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 0.5s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 0.9s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.3s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 1.0s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 3.5s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 2.5s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.4s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 0.4s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 0.3s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.4s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.3s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 3.2s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.3s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 0.8s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 1.6s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.3s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 0.6s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 4.2s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 2.3s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 2.0s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.0s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 0.7s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 2.1s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 1.2s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 1.2s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 1.2s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 1.2s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.7s\r\n  WARNING: //heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest: Test execution time (1.7s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/server:stateful-restorer_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                            PASSED in 36.1s\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/util:neighbour_calculator_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.1s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.0s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.1s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 26.2s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.5s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 1.6s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.3s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 1.1s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.3s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.6s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.5s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.4s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 2.0s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 1.0s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.7s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 0.5s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 0.7s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.5s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.5s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 0.4s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 1.4s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 0.5s\r\n\r\nINFO: Build completed successfully, 235 total actions\r\n```\r\n\r\n</details>\r\n\r\n<details><summary>Fourth run (clean build and test)</summary>\r\n\r\n```bash\r\nINFO: Elapsed time: 1935.743s, Critical Path: 148.47s\r\nINFO: 5628 processes: 2424 internal, 3204 local.\r\nINFO: Build completed successfully, 5628 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.0s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.4s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.3s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.3s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 0.6s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 2.2s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 0.5s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 0.5s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 0.4s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.3s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 0.5s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 0.5s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 0.4s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 0.3s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.4s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 0.4s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.5s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 0.7s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 1.2s\r\n  WARNING: //heron/api/tests/scala:api-scala-test: Test execution time (1.2s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 0.7s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.1s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.3s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.1s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.0s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.3s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.0s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 0.4s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.3s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 0.7s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 0.7s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 2.0s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 2.5s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.5s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 5.1s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 0.4s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.4s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.3s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 1.1s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 1.3s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 0.5s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.5s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 1.9s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 0.6s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 0.6s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 0.5s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 0.8s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 0.5s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 0.8s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 1.0s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 0.5s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 0.6s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 0.8s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 0.8s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 0.7s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 0.7s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 0.8s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 0.7s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 0.7s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 0.5s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 0.8s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 2.5s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.6s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 1.2s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 0.7s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 0.6s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.5s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 0.7s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 5.6s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.3s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 2.7s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 2.6s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 3.3s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 11.0s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.2s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 1.3s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 1.1s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 1.1s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 1.3s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 1.2s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 1.1s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 1.0s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.2s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 1.1s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 1.1s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 1.1s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 1.3s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 1.1s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 0.6s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 0.5s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 0.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 0.4s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 0.7s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 9.5s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 0.8s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 0.5s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 0.6s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.6s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 0.8s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 0.9s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.4s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.4s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 0.9s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 0.5s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.3s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 2.6s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 0.5s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 1.4s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 1.8s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 0.4s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 3.8s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 4.3s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 2.1s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 3.7s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 0.5s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 2.1s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 2.3s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 1.6s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 1.7s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 12.8s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 0.7s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 0.3s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 0.8s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 4.2s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 1.7s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 1.9s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.4s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.5s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 1.2s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 0.8s\r\n//heron/schedulers/tests/java:KubernetesUtilsTest                        PASSED in 0.5s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 0.8s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 1.5s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 1.1s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 2.4s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 1.1s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 0.6s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 1.0s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 0.4s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 1.0s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 2.9s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 1.4s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 1.1s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 1.6s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.4s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 0.4s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 1.9s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.6s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 0.7s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 0.5s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.5s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 0.9s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 0.6s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 0.3s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.3s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.6s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 0.5s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 0.8s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.3s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 0.6s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 1.5s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 1.6s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.4s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 0.3s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 0.3s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.3s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.3s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 2.5s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.6s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 0.4s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 1.9s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.5s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 0.8s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 3.0s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 1.9s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 1.7s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.0s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 0.6s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 1.3s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 1.5s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 1.1s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 1.1s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 1.0s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.3s\r\n  WARNING: //heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest: Test execution time (1.3s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/server:stateful-restorer_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                            PASSED in 35.3s\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.0s\r\n  WARNING: //heron/stmgr/tests/cpp/util:neighbour_calculator_unittest: Test execution time (0.0s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.0s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.1s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.0s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 36.2s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.5s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 0.7s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.7s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 1.1s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.2s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.6s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.3s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.3s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 1.5s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 0.7s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.5s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 0.6s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 0.9s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.4s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.4s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 0.4s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 1.3s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 0.5s\r\n```\r\n\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968160231/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968201882","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968201882","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968201882,"node_id":"IC_kwDOApKMps45tZaa","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T04:02:48Z","updated_at":"2021-11-14T04:02:48Z","author_association":"MEMBER","body":"@surahman \r\nAfter the Pex upgrade, the location of test.conf changes, so it seems to be necessary to change the location of the conf file in the test code.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968201882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968203193","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968203193","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968203193,"node_id":"IC_kwDOApKMps45tZu5","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T04:18:50Z","updated_at":"2021-11-14T04:18:50Z","author_association":"MEMBER","body":"@thinker0 Thank you! I see the following two references to `test.conf`:\r\n\r\n```bash\r\nintegration_test/src/python/local_test_runner/BUILD:        \"resources/test.conf\",\r\nintegration_test/src/python/local_test_runner/main.py:DEFAULT_TEST_CONF_FILE = \"integration_test/src/python/local_test_runner/resources/test.conf\"\r\n```\r\n\r\nAre we supposed to update to the following?\r\n\r\n```bash\r\nintegration_test/src/python/local_test_runner/main.py:DEFAULT_TEST_CONF_FILE = \"resources/test.conf\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968203193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968203904","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968203904","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968203904,"node_id":"IC_kwDOApKMps45tZ6A","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T04:28:25Z","updated_at":"2021-11-14T04:28:25Z","author_association":"MEMBER","body":"It worked fine in package, but it seems that the code and resource location are different when pex is executed.\r\n```\r\n % ./bazel-bin/integration_test/src/python/local_test_runner/local-test-runner\r\nTraceback (most recent call last):\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/.bootstrap/pex/pex.py\", line 476, in execute\r\n    exit_value = self._wrap_coverage(self._wrap_profiling, self._execute)\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/.bootstrap/pex/pex.py\", line 401, in _wrap_coverage\r\n    return runner(*args)\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/.bootstrap/pex/pex.py\", line 432, in _wrap_profiling\r\n    return runner(*args)\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/.bootstrap/pex/pex.py\", line 532, in _execute\r\n    return self.execute_entry(self._pex_info.entry_point)\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/.bootstrap/pex/pex.py\", line 679, in execute_entry\r\n    return self.execute_module(entry_point, alter_sys)\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/.bootstrap/pex/pex.py\", line 691, in execute_module\r\n    runpy.run_module(module_name, run_name=\"__main__\", alter_sys=alter_sys)\r\n  File \"/usr/local/Cellar/python@3.8/3.8.12_1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\", line 207, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/local/Cellar/python@3.8/3.8.12_1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\", line 97, in _run_module_code\r\n    _run_code(code, mod_globals, init_globals,\r\n  File \"/usr/local/Cellar/python@3.8/3.8.12_1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/runpy.py\", line 87, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/integration_test/src/python/local_test_runner/main.py\", line 180, in <module>\r\n    main()\r\n  File \"/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/integration_test/src/python/local_test_runner/main.py\", line 115, in main\r\n    conf_string = pkgutil.get_data(__name__, conf_file).decode()\r\n  File \"/usr/local/Cellar/python@3.8/3.8.12_1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/pkgutil.py\", line 638, in get_data\r\n    return loader.get_data(resource_name)\r\n  File \"<frozen importlib._bootstrap_external>\", line 1032, in get_data\r\nFileNotFoundError: [Errno 2] No such file or directory: '/Users/thinker0/.pex/unzipped_pexes/711d1b3191bfc9248ac2f22a0e8bd8a6c5687d01/integration_test/src/python/local_test_runner/integration_test/src/python/local_test_runner/resources/test.conf'\r\nthinker0@house3s-iMac heron % find /Users/thinker0/.pex/ -name test.conf -ls\r\n13001283648        8 -rw-r-----    1 thinker0         staff                 471 Nov 14 13:12 /Users/thinker0/.pex//user_code/068ce22b8f5f9a55a36f8b5366021bc93c943fcd/integration_test/src/python/local_test_runner/resources/test.conf\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968203904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968204398","html_url":"https://github.com/apache/incubator-heron/pull/3725#issuecomment-968204398","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3725","id":968204398,"node_id":"IC_kwDOApKMps45taBu","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T04:33:41Z","updated_at":"2021-11-14T04:36:15Z","author_association":"CONTRIBUTOR","body":"Yes, the case where we mount an existing PVC, this would be a shared PVC accessed by all pods. (i.e. `ReadWriteMany` or `ReadOnlyMany`)\r\n\r\nOne `ReadOnlyMany` example is you could mount a read only PVC with files such as certificates and certificate authorities. \r\n\r\nFor `ReadWriteMany` you can also mount a shared drive for large file access. There are cases in which streaming data is smaller references to larger files. The bolts would have access to the shared volumes to access larger files. The bolts could do file scan actions for specific files based on the metadata only stream.\r\n\r\nThe case for the dynamic per-pod mounts using the PersistentVolumeClaim Template would be for local checkpointing and log file storage. Currently in each pod there is a `log-files` folder in each container that writes the Spout/Bolt logs to the container's built in storage. With the dynamic PVC mount, one could configure to use a system like Rook/Ceph to provide dynamic storage that does not use the Docker volume which might be more limited.\r\n\r\nIf there is a better suggestion for the CLI parameters, I'm cool with that. I was merely using the Spark design as a starting point. I see the value in how they structured the subsets of config under `mount` and `options` that supports handling the different storage types (i.e. `nfs`, `pvc`, `hostPath`, etc). But we could totally have a more explicit set of config.\r\n\r\nI think it's my fault for discussing both the static mount and dynamic mont. Hopefully I didn't confuse things too much. I really was looking to mirror what Spark provided in terms of the functionality. I think their `OnDemand` and `local` are the only cases which get the per pod specific storage. The other cases, the pods share the same storage.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968204398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968205792","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968205792","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968205792,"node_id":"IC_kwDOApKMps45taXg","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T04:48:17Z","updated_at":"2021-11-14T04:48:17Z","author_association":"CONTRIBUTOR","body":"This is super impressive. I'd love to see how you setup/used gdb for the debugging.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968205792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968207653","html_url":"https://github.com/apache/incubator-heron/issues/3724#issuecomment-968207653","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3724","id":968207653,"node_id":"IC_kwDOApKMps45ta0l","user":{"login":"nicknezis","id":181930,"node_id":"MDQ6VXNlcjE4MTkzMA==","avatar_url":"https://avatars.githubusercontent.com/u/181930?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknezis","html_url":"https://github.com/nicknezis","followers_url":"https://api.github.com/users/nicknezis/followers","following_url":"https://api.github.com/users/nicknezis/following{/other_user}","gists_url":"https://api.github.com/users/nicknezis/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknezis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknezis/subscriptions","organizations_url":"https://api.github.com/users/nicknezis/orgs","repos_url":"https://api.github.com/users/nicknezis/repos","events_url":"https://api.github.com/users/nicknezis/events{/privacy}","received_events_url":"https://api.github.com/users/nicknezis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T05:05:28Z","updated_at":"2021-11-14T05:05:28Z","author_association":"CONTRIBUTOR","body":"Yes, I think if we have a headless Service for each StatefulSet, they should be addressable. Heron will use Zookeeper for the discovery. Each process will self-register with their hostname which is provided by the headless Service. If you want, I can show you where in the Heron Executor that logic lives. It's basically a `hostname` type call.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968207653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968315800","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968315800","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968315800,"node_id":"IC_kwDOApKMps45t1OY","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T15:47:51Z","updated_at":"2021-11-14T17:11:12Z","author_association":"MEMBER","body":"Thank you for your kind words. The updates do not appear to be aggressive enough for Travis CI and it is now a calibration task. I am restricting the CPU in Docker to 1.5 to see if I can isolate it locally.\r\n\r\nMy advice would be to use Eclipse because it supports pretty much every language. I am not going to install Eclipse and go through the process of configuring everything.\r\n\r\n* Configure the build with the `-g` debug flag in `config/configure.ac`.\r\n* Launch the `heron-dev` docker container.\r\n* `docker ps` and then `docker exec -it` to open a second terminal into the `heron-dev`.\r\n* Install `gdb` attach and set your breakpoint `-b` and watchpoints in your tests.\r\n* Run the `stmg_unittest` in isolation.\r\n* Good bug hunting.\r\n\r\n**_EDIT:_** I do not like referencing Stackoverflow but [this too](https://stackoverflow.com/questions/45812725/c-debugging-with-gdb-bazel-emacs).\r\n\r\n<details><summary>Docker 1.5 CPU build and test</summary>\r\n\r\n```bash\r\nINFO: Elapsed time: 3726.921s, Critical Path: 514.36s\r\nINFO: 5243 processes: 2403 internal, 2840 local.\r\nINFO: Build completed successfully, 5243 total actions\r\n//heron/api/tests/cpp:serialization_unittest                             PASSED in 0.0s\r\n//heron/api/tests/java:BaseWindowedBoltTest                              PASSED in 0.8s\r\n//heron/api/tests/java:ConfigTest                                        PASSED in 0.5s\r\n//heron/api/tests/java:CountStatAndMetricTest                            PASSED in 0.3s\r\n//heron/api/tests/java:GeneralReduceByKeyAndWindowOperatorTest           PASSED in 1.2s\r\n//heron/api/tests/java:HeronSubmitterTest                                PASSED in 6.4s\r\n//heron/api/tests/java:JoinOperatorTest                                  PASSED in 2.4s\r\n//heron/api/tests/java:KVStreamletShadowTest                             PASSED in 1.0s\r\n//heron/api/tests/java:KeyByOperatorTest                                 PASSED in 1.1s\r\n//heron/api/tests/java:LatencyStatAndMetricTest                          PASSED in 0.6s\r\n//heron/api/tests/java:ReduceByKeyAndWindowOperatorTest                  PASSED in 2.3s\r\n//heron/api/tests/java:StreamletImplTest                                 PASSED in 1.8s\r\n//heron/api/tests/java:StreamletShadowTest                               PASSED in 1.0s\r\n//heron/api/tests/java:StreamletUtilsTest                                PASSED in 1.5s\r\n//heron/api/tests/java:UtilsTest                                         PASSED in 0.7s\r\n//heron/api/tests/java:WaterMarkEventGeneratorTest                       PASSED in 0.9s\r\n//heron/api/tests/java:WindowManagerTest                                 PASSED in 0.6s\r\n//heron/api/tests/java:WindowedBoltExecutorTest                          PASSED in 2.2s\r\n//heron/api/tests/scala:api-scala-test                                   PASSED in 4.9s\r\n  WARNING: //heron/api/tests/scala:api-scala-test: Test execution time (4.9s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/ckptmgr/tests/java:CheckpointManagerServerTest                   PASSED in 1.5s\r\n//heron/common/tests/cpp/basics:fileutils_unittest                       PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:rid_unittest                             PASSED in 0.1s\r\n//heron/common/tests/cpp/basics:strutils_unittest                        PASSED in 0.0s\r\n//heron/common/tests/cpp/basics:utils_unittest                           PASSED in 0.1s\r\n//heron/common/tests/cpp/config:topology-config-helper_unittest          PASSED in 0.0s\r\n//heron/common/tests/cpp/errors:errors_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/errors:module_unittest                          PASSED in 0.2s\r\n//heron/common/tests/cpp/errors:syserrs_unittest                         PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:count-metric_unittest                   PASSED in 0.0s\r\n//heron/common/tests/cpp/metrics:mean-metric_unittest                    PASSED in 0.2s\r\n//heron/common/tests/cpp/metrics:multi-count-metric_unittest             PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:multi-mean-metric_unittest              PASSED in 0.1s\r\n//heron/common/tests/cpp/metrics:time-spent-metric_unittest              PASSED in 1.4s\r\n//heron/common/tests/cpp/network:http_unittest                           PASSED in 0.2s\r\n//heron/common/tests/cpp/network:order_unittest                          PASSED in 0.1s\r\n//heron/common/tests/cpp/network:packet_unittest                         PASSED in 0.1s\r\n//heron/common/tests/cpp/network:piper_unittest                          PASSED in 2.0s\r\n//heron/common/tests/cpp/network:rate_limit_unittest                     PASSED in 4.1s\r\n//heron/common/tests/cpp/network:switch_unittest                         PASSED in 0.4s\r\n//heron/common/tests/cpp/threads:spcountdownlatch_unittest               PASSED in 2.1s\r\n//heron/common/tests/java:ByteAmountTest                                 PASSED in 1.3s\r\n//heron/common/tests/java:CommunicatorTest                               PASSED in 0.5s\r\n//heron/common/tests/java:ConfigReaderTest                               PASSED in 1.7s\r\n//heron/common/tests/java:EchoTest                                       PASSED in 1.7s\r\n//heron/common/tests/java:FileUtilsTest                                  PASSED in 4.0s\r\n//heron/common/tests/java:HeronServerTest                                PASSED in 2.2s\r\n//heron/common/tests/java:PackageTypeTest                                PASSED in 0.6s\r\n//heron/common/tests/java:SysUtilsTest                                   PASSED in 7.0s\r\n//heron/common/tests/java:SystemConfigTest                               PASSED in 1.0s\r\n//heron/common/tests/java:TopologyUtilsTest                              PASSED in 0.7s\r\n//heron/common/tests/java:WakeableLooperTest                             PASSED in 1.6s\r\n//heron/common/tests/python/pex_loader:pex_loader_unittest               PASSED in 1.4s\r\n//heron/downloaders/tests/java:DLDownloaderTest                          PASSED in 3.1s\r\n//heron/downloaders/tests/java:ExtractorTests                            PASSED in 1.1s\r\n//heron/downloaders/tests/java:RegistryTest                              PASSED in 0.7s\r\n//heron/executor/tests/python:executor_unittest                          PASSED in 2.6s\r\n//heron/healthmgr/tests/java:BackPressureDetectorTest                    PASSED in 3.7s\r\n//heron/healthmgr/tests/java:BackPressureSensorTest                      PASSED in 1.7s\r\n//heron/healthmgr/tests/java:BufferSizeSensorTest                        PASSED in 1.4s\r\n//heron/healthmgr/tests/java:DataSkewDiagnoserTest                       PASSED in 3.6s\r\n//heron/healthmgr/tests/java:ExecuteCountSensorTest                      PASSED in 1.4s\r\n//heron/healthmgr/tests/java:GrowingWaitQueueDetectorTest                PASSED in 1.7s\r\n//heron/healthmgr/tests/java:HealthManagerTest                           PASSED in 2.7s\r\n//heron/healthmgr/tests/java:HealthPolicyConfigReaderTest                PASSED in 1.1s\r\n//heron/healthmgr/tests/java:LargeWaitQueueDetectorTest                  PASSED in 0.9s\r\n//heron/healthmgr/tests/java:MetricsCacheMetricsProviderTest             PASSED in 1.3s\r\n//heron/healthmgr/tests/java:PackingPlanProviderTest                     PASSED in 2.0s\r\n//heron/healthmgr/tests/java:ProcessingRateSkewDetectorTest              PASSED in 1.4s\r\n//heron/healthmgr/tests/java:ScaleUpResolverTest                         PASSED in 1.8s\r\n//heron/healthmgr/tests/java:SlowInstanceDiagnoserTest                   PASSED in 1.9s\r\n//heron/healthmgr/tests/java:UnderProvisioningDiagnoserTest              PASSED in 1.3s\r\n//heron/healthmgr/tests/java:WaitQueueSkewDetectorTest                   PASSED in 2.1s\r\n//heron/instance/tests/java:ActivateDeactivateTest                       PASSED in 1.0s\r\n//heron/instance/tests/java:BoltInstanceTest                             PASSED in 1.0s\r\n//heron/instance/tests/java:BoltStatefulInstanceTest                     PASSED in 3.1s\r\n//heron/instance/tests/java:ConnectTest                                  PASSED in 0.8s\r\n//heron/instance/tests/java:CustomGroupingTest                           PASSED in 1.8s\r\n//heron/instance/tests/java:EmitDirectBoltTest                           PASSED in 1.7s\r\n//heron/instance/tests/java:EmitDirectSpoutTest                          PASSED in 1.8s\r\n//heron/instance/tests/java:GlobalMetricsTest                            PASSED in 0.6s\r\n//heron/instance/tests/java:HandleReadTest                               PASSED in 1.3s\r\n//heron/instance/tests/java:HandleWriteTest                              PASSED in 6.7s\r\n//heron/instance/tests/java:MultiAssignableMetricTest                    PASSED in 0.5s\r\n//heron/instance/tests/java:SpoutInstanceTest                            PASSED in 3.3s\r\n//heron/instance/tests/java:SpoutStatefulInstanceTest                    PASSED in 3.3s\r\n//heron/instance/tests/python/network:event_looper_unittest              PASSED in 4.7s\r\n//heron/instance/tests/python/network:gateway_looper_unittest            PASSED in 11.5s\r\n//heron/instance/tests/python/network:heron_client_unittest              PASSED in 1.4s\r\n//heron/instance/tests/python/network:metricsmgr_client_unittest         PASSED in 1.4s\r\n//heron/instance/tests/python/network:protocol_unittest                  PASSED in 1.8s\r\n//heron/instance/tests/python/network:st_stmgrcli_unittest               PASSED in 2.6s\r\n//heron/instance/tests/python/utils:communicator_unittest                PASSED in 1.6s\r\n//heron/instance/tests/python/utils:custom_grouping_unittest             PASSED in 2.0s\r\n//heron/instance/tests/python/utils:global_metrics_unittest              PASSED in 2.2s\r\n//heron/instance/tests/python/utils:log_unittest                         PASSED in 1.7s\r\n//heron/instance/tests/python/utils:metrics_helper_unittest              PASSED in 1.4s\r\n//heron/instance/tests/python/utils:outgoing_tuple_helper_unittest       PASSED in 2.6s\r\n//heron/instance/tests/python/utils:pplan_helper_unittest                PASSED in 1.4s\r\n//heron/instance/tests/python/utils:py_metrics_unittest                  PASSED in 1.4s\r\n//heron/instance/tests/python/utils:topology_context_impl_unittest       PASSED in 2.7s\r\n//heron/instance/tests/python/utils:tuple_helper_unittest                PASSED in 2.4s\r\n//heron/io/dlog/tests/java:DLInputStreamTest                             PASSED in 1.2s\r\n//heron/io/dlog/tests/java:DLOutputStreamTest                            PASSED in 1.3s\r\n//heron/metricscachemgr/tests/java:CacheCoreTest                         PASSED in 1.4s\r\n//heron/metricscachemgr/tests/java:MetricsCacheQueryUtilsTest            PASSED in 1.0s\r\n//heron/metricscachemgr/tests/java:MetricsCacheTest                      PASSED in 1.2s\r\n//heron/metricsmgr/tests/java:FileSinkTest                               PASSED in 1.0s\r\n//heron/metricsmgr/tests/java:HandleTManagerLocationTest                 PASSED in 0.8s\r\n//heron/metricsmgr/tests/java:MetricsCacheSinkTest                       PASSED in 10.0s\r\n//heron/metricsmgr/tests/java:MetricsManagerServerTest                   PASSED in 1.9s\r\n//heron/metricsmgr/tests/java:MetricsUtilTests                           PASSED in 1.0s\r\n//heron/metricsmgr/tests/java:PrometheusSinkTests                        PASSED in 1.9s\r\n//heron/metricsmgr/tests/java:SinkExecutorTest                           PASSED in 1.0s\r\n//heron/metricsmgr/tests/java:TManagerSinkTest                           PASSED in 9.9s\r\n//heron/metricsmgr/tests/java:WebSinkTest                                PASSED in 1.2s\r\n//heron/packing/tests/java:FirstFitDecreasingPackingTest                 PASSED in 1.9s\r\n//heron/packing/tests/java:PackingPlanBuilderTest                        PASSED in 0.6s\r\n//heron/packing/tests/java:PackingUtilsTest                              PASSED in 0.7s\r\n//heron/packing/tests/java:ResourceCompliantRRPackingTest                PASSED in 4.1s\r\n//heron/packing/tests/java:RoundRobinPackingTest                         PASSED in 2.1s\r\n//heron/packing/tests/java:ScorerTest                                    PASSED in 0.6s\r\n//heron/scheduler-core/tests/java:HttpServiceSchedulerClientTest         PASSED in 4.6s\r\n//heron/scheduler-core/tests/java:JsonFormatterUtilsTest                 PASSED in 1.0s\r\n//heron/scheduler-core/tests/java:LaunchRunnerTest                       PASSED in 4.4s\r\n//heron/scheduler-core/tests/java:LauncherUtilsTest                      PASSED in 7.0s\r\n//heron/scheduler-core/tests/java:LibrarySchedulerClientTest             PASSED in 0.9s\r\n//heron/scheduler-core/tests/java:RuntimeManagerMainTest                 PASSED in 9.9s\r\n//heron/scheduler-core/tests/java:RuntimeManagerRunnerTest               PASSED in 7.8s\r\n//heron/scheduler-core/tests/java:SchedulerClientFactoryTest             PASSED in 3.4s\r\n//heron/scheduler-core/tests/java:SchedulerMainTest                      PASSED in 14.0s\r\n//heron/scheduler-core/tests/java:SchedulerServerTest                    PASSED in 0.9s\r\n//heron/scheduler-core/tests/java:SchedulerUtilsTest                     PASSED in 5.2s\r\n//heron/scheduler-core/tests/java:SubmitDryRunRenderTest                 PASSED in 8.9s\r\n//heron/scheduler-core/tests/java:SubmitterMainTest                      PASSED in 7.1s\r\n//heron/scheduler-core/tests/java:UpdateDryRunRenderTest                 PASSED in 7.1s\r\n//heron/scheduler-core/tests/java:UpdateTopologyManagerTest              PASSED in 15.7s\r\n//heron/schedulers/tests/java:AuroraCLIControllerTest                    PASSED in 0.9s\r\n//heron/schedulers/tests/java:AuroraContextTest                          PASSED in 1.1s\r\n//heron/schedulers/tests/java:AuroraLauncherTest                         PASSED in 1.9s\r\n//heron/schedulers/tests/java:AuroraSchedulerTest                        PASSED in 7.5s\r\n//heron/schedulers/tests/java:HeronExecutorTaskTest                      PASSED in 4.4s\r\n//heron/schedulers/tests/java:HeronMasterDriverTest                      PASSED in 7.1s\r\n//heron/schedulers/tests/java:KubernetesContextTest                      PASSED in 0.7s\r\n//heron/schedulers/tests/java:KubernetesControllerTest                   PASSED in 0.8s\r\n//heron/schedulers/tests/java:KubernetesLauncherTest                     PASSED in 2.3s\r\n//heron/schedulers/tests/java:KubernetesSchedulerTest                    PASSED in 1.5s\r\n//heron/schedulers/tests/java:KubernetesUtilsTest                        PASSED in 1.2s\r\n//heron/schedulers/tests/java:LaunchableTaskTest                         PASSED in 1.3s\r\n//heron/schedulers/tests/java:LocalLauncherTest                          PASSED in 5.6s\r\n//heron/schedulers/tests/java:LocalSchedulerTest                         PASSED in 1.2s\r\n//heron/schedulers/tests/java:MarathonControllerTest                     PASSED in 6.5s\r\n//heron/schedulers/tests/java:MarathonLauncherTest                       PASSED in 2.1s\r\n//heron/schedulers/tests/java:MarathonSchedulerTest                      PASSED in 1.2s\r\n//heron/schedulers/tests/java:MesosFrameworkTest                         PASSED in 2.5s\r\n//heron/schedulers/tests/java:MesosLauncherTest                          PASSED in 1.5s\r\n//heron/schedulers/tests/java:MesosSchedulerTest                         PASSED in 2.3s\r\n//heron/schedulers/tests/java:NomadSchedulerTest                         PASSED in 10.2s\r\n//heron/schedulers/tests/java:SlurmControllerTest                        PASSED in 4.0s\r\n//heron/schedulers/tests/java:SlurmLauncherTest                          PASSED in 7.0s\r\n//heron/schedulers/tests/java:SlurmSchedulerTest                         PASSED in 5.2s\r\n//heron/schedulers/tests/java:TaskResourcesTest                          PASSED in 0.8s\r\n//heron/schedulers/tests/java:TaskUtilsTest                              PASSED in 1.1s\r\n//heron/schedulers/tests/java:V1ControllerTest                           PASSED in 6.2s\r\n//heron/schedulers/tests/java:VolumesTests                               PASSED in 0.7s\r\n//heron/schedulers/tests/java:YarnLauncherTest                           PASSED in 3.2s\r\n//heron/schedulers/tests/java:YarnSchedulerTest                          PASSED in 6.1s\r\n//heron/simulator/tests/java:AllGroupingTest                             PASSED in 0.7s\r\n//heron/simulator/tests/java:CustomGroupingTest                          PASSED in 1.2s\r\n//heron/simulator/tests/java:FieldsGroupingTest                          PASSED in 4.0s\r\n//heron/simulator/tests/java:InstanceExecutorTest                        PASSED in 2.5s\r\n//heron/simulator/tests/java:LowestGroupingTest                          PASSED in 1.1s\r\n//heron/simulator/tests/java:RotatingMapTest                             PASSED in 0.5s\r\n//heron/simulator/tests/java:ShuffleGroupingTest                         PASSED in 0.8s\r\n//heron/simulator/tests/java:SimulatorTest                               PASSED in 3.0s\r\n//heron/simulator/tests/java:TopologyManagerTest                         PASSED in 1.7s\r\n//heron/simulator/tests/java:TupleCacheTest                              PASSED in 0.7s\r\n//heron/simulator/tests/java:XORManagerTest                              PASSED in 1.4s\r\n//heron/spi/tests/java:ConfigLoaderTest                                  PASSED in 5.9s\r\n//heron/spi/tests/java:ConfigTest                                        PASSED in 3.2s\r\n//heron/spi/tests/java:ContextTest                                       PASSED in 0.8s\r\n//heron/spi/tests/java:ExceptionInfoTest                                 PASSED in 1.1s\r\n//heron/spi/tests/java:KeysTest                                          PASSED in 1.2s\r\n//heron/spi/tests/java:MetricsInfoTest                                   PASSED in 0.8s\r\n//heron/spi/tests/java:MetricsRecordTest                                 PASSED in 0.5s\r\n//heron/spi/tests/java:NetworkUtilsTest                                  PASSED in 5.2s\r\n//heron/spi/tests/java:PackingPlanTest                                   PASSED in 0.8s\r\n//heron/spi/tests/java:ResourceTest                                      PASSED in 1.1s\r\n//heron/spi/tests/java:ShellUtilsTest                                    PASSED in 6.3s\r\n//heron/spi/tests/java:TokenSubTest                                      PASSED in 0.6s\r\n//heron/spi/tests/java:UploaderUtilsTest                                 PASSED in 2.0s\r\n//heron/statefulstorages/tests/java:DlogStorageTest                      PASSED in 10.2s\r\n//heron/statefulstorages/tests/java:HDFSStorageTest                      PASSED in 7.6s\r\n//heron/statefulstorages/tests/java:LocalFileSystemStorageTest           PASSED in 4.1s\r\n//heron/statemgrs/tests/cpp:zk-statemgr_unittest                         PASSED in 0.2s\r\n//heron/statemgrs/tests/java:CuratorStateManagerTest                     PASSED in 2.4s\r\n//heron/statemgrs/tests/java:LocalFileSystemStateManagerTest             PASSED in 3.3s\r\n//heron/statemgrs/tests/java:ZkUtilsTest                                 PASSED in 7.2s\r\n//heron/statemgrs/tests/python:configloader_unittest                     PASSED in 1.3s\r\n//heron/statemgrs/tests/python:statemanagerfactory_unittest              PASSED in 2.5s\r\n//heron/statemgrs/tests/python:zkstatemanager_unittest                   PASSED in 1.5s\r\n//heron/stmgr/tests/cpp/grouping:all-grouping_unittest                   PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:custom-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:fields-grouping_unittest                PASSED in 0.1s\r\n//heron/stmgr/tests/cpp/grouping:lowest-grouping_unittest                PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/grouping:shuffle-grouping_unittest               PASSED in 0.0s\r\n//heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest               PASSED in 1.7s\r\n  WARNING: //heron/stmgr/tests/cpp/server:checkpoint-gateway_unittest: Test execution time (1.7s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stateful-restorer_unittest                PASSED in 0.2s\r\n  WARNING: //heron/stmgr/tests/cpp/server:stateful-restorer_unittest: Test execution time (0.2s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/server:stmgr_unittest                            PASSED in 43.6s\r\n//heron/stmgr/tests/cpp/util:neighbour_calculator_unittest               PASSED in 0.1s\r\n  WARNING: //heron/stmgr/tests/cpp/util:neighbour_calculator_unittest: Test execution time (0.1s excluding execution overhead) outside of range for MODERATE tests. Consider setting timeout=\"short\" or size=\"small\".\r\n//heron/stmgr/tests/cpp/util:rotating-map_unittest                       PASSED in 0.1s\r\n//heron/stmgr/tests/cpp/util:tuple-cache_unittest                        PASSED in 3.7s\r\n//heron/stmgr/tests/cpp/util:xor-manager_unittest                        PASSED in 4.0s\r\n//heron/tmanager/tests/cpp/server:stateful_checkpointer_unittest         PASSED in 0.1s\r\n//heron/tmanager/tests/cpp/server:stateful_restorer_unittest             PASSED in 5.1s\r\n//heron/tmanager/tests/cpp/server:tcontroller_unittest                   PASSED in 0.1s\r\n//heron/tmanager/tests/cpp/server:tmanager_unittest                      PASSED in 27.2s\r\n//heron/tools/apiserver/tests/java:ConfigUtilsTests                      PASSED in 0.9s\r\n//heron/tools/apiserver/tests/java:TopologyResourceTests                 PASSED in 1.8s\r\n//heron/tools/cli/tests/python:client_command_unittest                   PASSED in 1.6s\r\n//heron/tools/cli/tests/python:opts_unittest                             PASSED in 1.3s\r\n//heron/tools/explorer/tests/python:explorer_unittest                    PASSED in 1.8s\r\n//heron/tools/tracker/tests/python:query_operator_unittest               PASSED in 1.9s\r\n//heron/tools/tracker/tests/python:query_unittest                        PASSED in 1.7s\r\n//heron/tools/tracker/tests/python:topology_unittest                     PASSED in 1.6s\r\n//heron/tools/tracker/tests/python:tracker_unittest                      PASSED in 2.5s\r\n//heron/uploaders/tests/java:DlogUploaderTest                            PASSED in 1.6s\r\n//heron/uploaders/tests/java:GcsUploaderTests                            PASSED in 0.9s\r\n//heron/uploaders/tests/java:HdfsUploaderTest                            PASSED in 1.1s\r\n//heron/uploaders/tests/java:HttpUploaderTest                            PASSED in 2.0s\r\n//heron/uploaders/tests/java:LocalFileSystemConfigTest                   PASSED in 0.6s\r\n//heron/uploaders/tests/java:LocalFileSystemContextTest                  PASSED in 0.6s\r\n//heron/uploaders/tests/java:LocalFileSystemUploaderTest                 PASSED in 1.6s\r\n//heron/uploaders/tests/java:S3UploaderTest                              PASSED in 3.1s\r\n//heron/uploaders/tests/java:ScpUploaderTest                             PASSED in 1.5s\r\n```\r\n\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968315800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968338155","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968338155","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968338155,"node_id":"IC_kwDOApKMps45t6rr","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T18:05:53Z","updated_at":"2021-11-14T18:17:25Z","author_association":"MEMBER","body":"@thinker0 we have more PEX related errors, any insights? I have no experience with PEX or this part of the code base.\r\n\r\n```bash\r\n===> Starting heron integration_test scala at 2021-11-14 17:55:18\r\n[2021-11-14 17:55:19 +0000] [INFO]: Starting server at port 8080\r\nTraceback (most recent call last):\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/.bootstrap/pex/pex.py\", line 476, in execute\r\n    exit_value = self._wrap_coverage(self._wrap_profiling, self._execute)\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/.bootstrap/pex/pex.py\", line 401, in _wrap_coverage\r\n    return runner(*args)\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/.bootstrap/pex/pex.py\", line 432, in _wrap_profiling\r\n    return runner(*args)\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/.bootstrap/pex/pex.py\", line 532, in _execute\r\n    return self.execute_entry(self._pex_info.entry_point)\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/.bootstrap/pex/pex.py\", line 679, in execute_entry\r\n    return self.execute_module(entry_point, alter_sys)\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/.bootstrap/pex/pex.py\", line 691, in execute_module\r\n    runpy.run_module(module_name, run_name=\"__main__\", alter_sys=alter_sys)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 205, in run_module\r\n    return _run_module_code(code, init_globals, run_name, mod_spec)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/integration_test/src/python/test_runner/main.py\", line 479, in <module>\r\n    main()\r\n  File \"/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/integration_test/src/python/test_runner/main.py\", line 428, in main\r\n    conf_string = pkgutil.get_data(__name__, conf_file).decode()\r\n  File \"/usr/lib/python3.6/pkgutil.py\", line 634, in get_data\r\n    return loader.get_data(resource_name)\r\n  File \"<frozen importlib._bootstrap_external>\", line 832, in get_data\r\nFileNotFoundError: [Errno 2] No such file or directory: '/home/travis/.pex/unzipped_pexes/d5bd60b574982804743c6708dcbf1c059d9b38f3/integration_test/src/python/test_runner/integration_test/src/python/test_runner/resources/test.json'\r\n```\r\n\r\nFrom this it appears to be `conf` related:\r\n\r\n```bash\r\n    conf_string = pkgutil.get_data(__name__, conf_file).decode()\r\n  File \"/usr/lib/python3.6/pkgutil.py\", line 634, in get_data\r\n    return loader.get_data(resource_name)\r\n  File \"<frozen importlib._bootstrap_external>\", line 832, in get_data\r\nFileNotFoundError: [Errno 2] No such file or directory: \r\n```\r\n\r\nOn the upside, it seems to have run for 119mins (~2hrs) so maybe the settings for the `stmgr_unittest` are more aggressive enough... Let us see.\r\n\r\n**_Edit:_** I think I got it.\r\n\r\n```bash\r\nintegration_test/src/python/test_runner/main.py:DEFAULT_TEST_CONF_FILE = \"integration_test/src/python/test_runner/resources/test.json\"\r\nintegration_test/src/python/topology_test_runner/main.py:DEFAULT_TEST_CONF_FILE = \"integration_test/src/python/topology_test_runner/resources/test.json\"\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968338155/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968366271","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968366271","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968366271,"node_id":"IC_kwDOApKMps45uBi_","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-14T21:24:43Z","updated_at":"2021-11-14T21:24:43Z","author_association":"MEMBER","body":"Tally-ho folks. I think I have fixed the `stmgr_unittest`.\r\n\r\nCurrent build failure issue:\r\n```bash\r\n[2021-11-14 21:02:56 +0000] [INFO]: Total integration topology test time = 731s\r\n[2021-11-14 21:02:56 +0000] [ERROR]: FAILURE: 1/6 tests failed:\r\n[2021-11-14 21:02:56 +0000] [ERROR]:   - [504s]  : 20211114205045_IntegrationTopologyTest_FieldsGrouping_7e1ba576-9264-4df2-bfda-57af1da884db\r\nNo output has been received in the last 10m0s, this potentially indicates a stalled build or something wrong with the build itself.\r\nCheck the details on how to adjust your build configuration on: https://docs.travis-ci.com/user/common-build-problems/#build-times-out-because-no-output-was-received\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968366271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968405925","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968405925","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968405925,"node_id":"IC_kwDOApKMps45uLOl","user":{"login":"surahman","id":3979925,"node_id":"MDQ6VXNlcjM5Nzk5MjU=","avatar_url":"https://avatars.githubusercontent.com/u/3979925?v=4","gravatar_id":"","url":"https://api.github.com/users/surahman","html_url":"https://github.com/surahman","followers_url":"https://api.github.com/users/surahman/followers","following_url":"https://api.github.com/users/surahman/following{/other_user}","gists_url":"https://api.github.com/users/surahman/gists{/gist_id}","starred_url":"https://api.github.com/users/surahman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/surahman/subscriptions","organizations_url":"https://api.github.com/users/surahman/orgs","repos_url":"https://api.github.com/users/surahman/repos","events_url":"https://api.github.com/users/surahman/events{/privacy}","received_events_url":"https://api.github.com/users/surahman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T00:40:30Z","updated_at":"2021-11-15T00:40:30Z","author_association":"MEMBER","body":"@joshfischer1108 could you please review and merge?\r\n\r\nBoth parallel runs [1](https://app.travis-ci.com/github/apache/incubator-heron/builds/241741076) and [2](https://app.travis-ci.com/github/apache/incubator-heron/builds/241743708) have passed and the CI pipeline is now fixed 🎆.\r\n\r\nI do not have permission to link issues to PRs but issue #3733 is the issue referencing this PR.","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968405925/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968409390","html_url":"https://github.com/apache/incubator-heron/pull/3735#issuecomment-968409390","issue_url":"https://api.github.com/repos/apache/incubator-heron/issues/3735","id":968409390,"node_id":"IC_kwDOApKMps45uMEu","user":{"login":"thinker0","id":357785,"node_id":"MDQ6VXNlcjM1Nzc4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/357785?v=4","gravatar_id":"","url":"https://api.github.com/users/thinker0","html_url":"https://github.com/thinker0","followers_url":"https://api.github.com/users/thinker0/followers","following_url":"https://api.github.com/users/thinker0/following{/other_user}","gists_url":"https://api.github.com/users/thinker0/gists{/gist_id}","starred_url":"https://api.github.com/users/thinker0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thinker0/subscriptions","organizations_url":"https://api.github.com/users/thinker0/orgs","repos_url":"https://api.github.com/users/thinker0/repos","events_url":"https://api.github.com/users/thinker0/events{/privacy}","received_events_url":"https://api.github.com/users/thinker0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T00:52:00Z","updated_at":"2021-11-15T00:52:00Z","author_association":"MEMBER","body":"+1 ","reactions":{"url":"https://api.github.com/repos/apache/incubator-heron/issues/comments/968409390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]