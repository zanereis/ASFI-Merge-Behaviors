[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332591436","html_url":"https://github.com/apache/couchdb/issues/842#issuecomment-332591436","issue_url":"https://api.github.com/repos/apache/couchdb/issues/842","id":332591436,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU5MTQzNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T17:13:16Z","updated_at":"2017-09-27T17:13:16Z","author_association":"MEMBER","body":"Erlang also needs port 4369 open between machines. This is used by the Erlang port mapper daemon (epmd) which is used to determine which of the ports (9100-9200 are used for each connecting node.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332591436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332591847","html_url":"https://github.com/apache/couchdb/issues/842#issuecomment-332591847","issue_url":"https://api.github.com/repos/apache/couchdb/issues/842","id":332591847,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU5MTg0Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T17:14:43Z","updated_at":"2017-09-27T17:14:43Z","author_association":"MEMBER","body":"FYI this is in the documentation you linked to already, at the top of the page:\r\n\r\n> Erlang uses TCP port 4369 (EPMD) to find other nodes, so all servers must be able to speak to each other on this port. In an Erlang Cluster, all nodes are connected to all other nodes. A mesh.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332591847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332593366","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-332593366","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":332593366,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU5MzM2Ng==","user":{"login":"rvanzon","id":815029,"node_id":"MDQ6VXNlcjgxNTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/815029?v=4","gravatar_id":"","url":"https://api.github.com/users/rvanzon","html_url":"https://github.com/rvanzon","followers_url":"https://api.github.com/users/rvanzon/followers","following_url":"https://api.github.com/users/rvanzon/following{/other_user}","gists_url":"https://api.github.com/users/rvanzon/gists{/gist_id}","starred_url":"https://api.github.com/users/rvanzon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvanzon/subscriptions","organizations_url":"https://api.github.com/users/rvanzon/orgs","repos_url":"https://api.github.com/users/rvanzon/repos","events_url":"https://api.github.com/users/rvanzon/events{/privacy}","received_events_url":"https://api.github.com/users/rvanzon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T17:19:58Z","updated_at":"2017-09-27T17:19:58Z","author_association":"NONE","body":"@wohali thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332593366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332667420","html_url":"https://github.com/apache/couchdb/pull/839#issuecomment-332667420","issue_url":"https://api.github.com/repos/apache/couchdb/issues/839","id":332667420,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjY2NzQyMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T21:57:07Z","updated_at":"2017-09-27T21:57:07Z","author_association":"MEMBER","body":"@tonysun83 Jenkins desperately needs these changes so I'm pushing the merge button. Hope you're OK with that ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332667420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332686326","html_url":"https://github.com/apache/couchdb/pull/845#issuecomment-332686326","issue_url":"https://api.github.com/repos/apache/couchdb/issues/845","id":332686326,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjY4NjMyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T23:43:11Z","updated_at":"2017-09-27T23:43:11Z","author_association":"MEMBER","body":"Note: I don't know if we actually want to document this just yet. It's for advanced users for now; if they need it, they will have it.\r\n\r\nIf we add ferd/recon to our dependencies, as we've discussed on and off, then we might include some shortcuts for basic stats gathering to the Troubleshooting section of the documentation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332686326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332815485","html_url":"https://github.com/apache/couchdb/issues/783#issuecomment-332815485","issue_url":"https://api.github.com/repos/apache/couchdb/issues/783","id":332815485,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjgxNTQ4NQ==","user":{"login":"dsietz","id":21245551,"node_id":"MDQ6VXNlcjIxMjQ1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/21245551?v=4","gravatar_id":"","url":"https://api.github.com/users/dsietz","html_url":"https://github.com/dsietz","followers_url":"https://api.github.com/users/dsietz/followers","following_url":"https://api.github.com/users/dsietz/following{/other_user}","gists_url":"https://api.github.com/users/dsietz/gists{/gist_id}","starred_url":"https://api.github.com/users/dsietz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsietz/subscriptions","organizations_url":"https://api.github.com/users/dsietz/orgs","repos_url":"https://api.github.com/users/dsietz/repos","events_url":"https://api.github.com/users/dsietz/events{/privacy}","received_events_url":"https://api.github.com/users/dsietz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T12:03:18Z","updated_at":"2017-09-28T12:03:18Z","author_association":"NONE","body":"Just to add to wohali statement \r\n\r\n> One thing to watch out for is that as you create the admin user on every node independently, you'll need to be sure that the ini file contains the identical hashed password on each node if you expect sessions to work correctly with the entire cluster residing behind a load balancer.\r\n\r\nYou also need to make sure that the secret is also the same on all the nodes if you are using cookie authentication.\r\n\r\n[couch_httpd_auth]\r\nsecret","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332815485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332873855","html_url":"https://github.com/apache/couchdb/issues/783#issuecomment-332873855","issue_url":"https://api.github.com/repos/apache/couchdb/issues/783","id":332873855,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjg3Mzg1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T15:30:38Z","updated_at":"2017-09-28T15:30:38Z","author_association":"MEMBER","body":"I want to revise my advice on the `inet_dist_listen` range, as I was wrong. You should be able to crank this down to a single port, i.e. have `_min` and `_max` match. All the restriction does is to say \"this local node can use this range (of 1).\" So long as you don't try to open a second node with that same port range restriction on the same machine, you're fine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332873855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332918395","html_url":"https://github.com/apache/couchdb/pull/847#issuecomment-332918395","issue_url":"https://api.github.com/repos/apache/couchdb/issues/847","id":332918395,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjkxODM5NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T18:08:15Z","updated_at":"2017-09-28T18:08:15Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332918395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332941671","html_url":"https://github.com/apache/couchdb/pull/846#issuecomment-332941671","issue_url":"https://api.github.com/repos/apache/couchdb/issues/846","id":332941671,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjk0MTY3MQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T19:36:33Z","updated_at":"2017-09-28T19:36:33Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332941671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332944278","html_url":"https://github.com/apache/couchdb/pull/846#issuecomment-332944278","issue_url":"https://api.github.com/repos/apache/couchdb/issues/846","id":332944278,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjk0NDI3OA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T19:47:06Z","updated_at":"2017-09-28T19:47:06Z","author_association":"CONTRIBUTOR","body":"LGTM\r\n```\r\n  couch_replicator_scheduler_job: scheduler_job_format_status_test...ok\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332944278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332990422","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-332990422","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":332990422,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjk5MDQyMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T23:25:50Z","updated_at":"2017-09-29T10:03:23Z","author_association":"MEMBER","body":"This is an Erlang bug:\r\n\r\nhttps://bugs.erlang.org/browse/ERL-439\r\n\r\nThis commit fixed the problem:\r\n\r\nhttps://github.com/erlang/otp/commit/882c90f72ba4e298aa5a7796661c28053c540a96\r\n\r\nIf you can build Erlang from source, try applying this change and you should be good to go. CouchDB isn't ready yet for Erlang 20, so you'll need a build of Erlang 19.x or older that includes this one-line change for High Sierra builds to work correctly.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332990422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332993558","html_url":"https://github.com/apache/couchdb/pull/827#issuecomment-332993558","issue_url":"https://api.github.com/repos/apache/couchdb/issues/827","id":332993558,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjk5MzU1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-28T23:48:22Z","updated_at":"2017-09-28T23:48:22Z","author_association":"MEMBER","body":"Hi @almightyju , I'd like to push forward with this. I also want you to get the credit for the change!\r\n\r\nYou don't have to restart the server with a different config, just change it as part of your `setup()` function, and set it back to the default value in your `teardown()` function. Here's an example:\r\n\r\nhttps://github.com/apache/couchdb/blob/master/src/couch/test/couchdb_mrview_cors_tests.erl#L32-L57\r\n\r\nIf you need more guidance, I'm happy to work together with you on this, just let me know.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332993558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333042258","html_url":"https://github.com/apache/couchdb/issues/850#issuecomment-333042258","issue_url":"https://api.github.com/repos/apache/couchdb/issues/850","id":333042258,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0MjI1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:29:12Z","updated_at":"2017-09-29T06:29:12Z","author_association":"MEMBER","body":"Duplicate of apache/couchdb-fauxton#929 which has been fixed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333042258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333042672","html_url":"https://github.com/apache/couchdb/issues/836#issuecomment-333042672","issue_url":"https://api.github.com/repos/apache/couchdb/issues/836","id":333042672,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0MjY3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:32:07Z","updated_at":"2017-09-29T06:32:07Z","author_association":"MEMBER","body":"This is not a CouchDB bug. This tracker is for bugs only.\r\n\r\nYou should ask this question on our user mailing list (user@couchdb.apache.org) or our IRC/Slack channels.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333042672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333042893","html_url":"https://github.com/apache/couchdb/issues/813#issuecomment-333042893","issue_url":"https://api.github.com/repos/apache/couchdb/issues/813","id":333042893,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0Mjg5Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:33:31Z","updated_at":"2017-09-29T06:33:31Z","author_association":"MEMBER","body":"See #848 for an update to meck that might fix the problem.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333042893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043024","html_url":"https://github.com/apache/couchdb/issues/805#issuecomment-333043024","issue_url":"https://api.github.com/repos/apache/couchdb/issues/805","id":333043024,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0MzAyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:34:17Z","updated_at":"2017-09-29T06:34:17Z","author_association":"MEMBER","body":"/cc @rnewson Robert do you know what changed here? I believe you were the last one to touch the CORS code, but I might be wrong.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043105","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-333043105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":333043105,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0MzEwNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:34:50Z","updated_at":"2017-09-29T06:34:50Z","author_association":"MEMBER","body":"Duplicate of #732.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043323","html_url":"https://github.com/apache/couchdb/issues/794#issuecomment-333043323","issue_url":"https://api.github.com/repos/apache/couchdb/issues/794","id":333043323,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0MzMyMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:36:15Z","updated_at":"2017-09-29T06:36:15Z","author_association":"MEMBER","body":"I doubt the issue is erlang:binary_to_term/1.\r\n\r\nIf you are trying to handle >1000 req/sec you might need more RAM. Have you tried this on a bigger machine?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043830","html_url":"https://github.com/apache/couchdb/issues/796#issuecomment-333043830","issue_url":"https://api.github.com/repos/apache/couchdb/issues/796","id":333043830,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0MzgzMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:39:36Z","updated_at":"2017-09-29T06:39:36Z","author_association":"MEMBER","body":"Can you run the Node process on a different machine? My guess is disk performance in your VM is the big issue.\r\n\r\nSomeone from https://neighbourhood.ie should have reached out to you already; if not, you can contact them directly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333043830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333044246","html_url":"https://github.com/apache/couchdb/issues/790#issuecomment-333044246","issue_url":"https://api.github.com/repos/apache/couchdb/issues/790","id":333044246,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0NDI0Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:42:13Z","updated_at":"2017-09-29T06:42:13Z","author_association":"MEMBER","body":"There's not enough information to go on here, but this sounds like deployment architecture issues, not a CouchDB bug. Here are some standard recommendations:\r\n\r\n* Upgrade to CouchDB 2.1 if you can, replication is improved in this release.\r\n* Try running a 3-node CouchDB 2.1 cluster with a load balancer in front if you are not already.\r\n* Use Mango views and selectors if you can, instead of JavaScript views, for improved performance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333044246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333047148","html_url":"https://github.com/apache/couchdb/issues/776#issuecomment-333047148","issue_url":"https://api.github.com/repos/apache/couchdb/issues/776","id":333047148,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0NzE0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T06:59:38Z","updated_at":"2017-09-29T06:59:38Z","author_association":"MEMBER","body":"Sounds like a configuration issue. Those are normal lines in the CouchDB log, not errors.\r\n\r\nRoot cause that replication fails is that you can't access CouchDB from off-machine. You should be able to, from another computer. hit http://<your-server>:5984/ in a browser or with curl and see a response.\r\n\r\nYou do NOT want to bind the [httpd] (port 5986) interface to 0.0.0.0. This is a huge security risk. Only bind the [chttpd] (port 5984) interface to 0.0.0.0.\r\n\r\nAlso, try disabling CORS for now. You can re-enable it once you're able to see CouchDB from another machine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333047148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333047556","html_url":"https://github.com/apache/couchdb/issues/770#issuecomment-333047556","issue_url":"https://api.github.com/repos/apache/couchdb/issues/770","id":333047556,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0NzU1Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T07:01:44Z","updated_at":"2017-09-29T07:01:44Z","author_association":"MEMBER","body":"Try changing replication source from \"Local database\" to \"Remote database\" and specify the database address as `http://admin:password@127.0.0.1:5984/dbname` . See if this works?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333047556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333049515","html_url":"https://github.com/apache/couchdb/issues/758#issuecomment-333049515","issue_url":"https://api.github.com/repos/apache/couchdb/issues/758","id":333049515,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA0OTUxNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T07:12:21Z","updated_at":"2017-09-29T07:12:21Z","author_association":"MEMBER","body":"The error is clear - your database has file corruption. The binary data there is showing the nodes in the btree, but a byte-by-byte analysis is not something anyone on the project right now has time to complete.\r\n\r\nThe most likely scenarios for this are that you are in a virtualised environment where the disk goes away, you have `delayed_commits` set to `true` and a disk is intermittently failing (lesson: ALWAYS set `delayed_commits` to `false`!), or you are using network-attached storage (such as EBS) and the volume has become corrupted. If you're in a cloud/hosted environment, you may want to check with your hosting provider to determine if anything can be done to guarantee disk performance. Another possibility is failing RAM that caused a bit-flip, or (yes, really) cosmic rays doing the same. The typical safeguard for this in production is to only run on servers with ECC RAM.\r\n\r\nCouchDB 1.6.1 has been running in the field for many years on hundreds of thousands of servers, and there are no known issues that definitively cause corruption in databases aside from the well-known scenarios described above.\r\n\r\nYour best options are:\r\n\r\n1. Restore the database from backup prior to when file corruption occurred. (You are backing up your server, aren't you? ðŸ˜‰ )\r\n2. Write a custom replication to read documents from the database and skip documents that fail. You may not be able to use the `/{db}/_changes` feed for this if there is corruption in the sequence; try using `/{db}/_all_docs` if this is true\r\n3. [Neighbourhoodie](https://neighbourhood.ie/) provides a professional (paid) CouchDB database recovery service when databases have been corrupted if you are completely unable to recover the data yourself. You will need to provide them with a zip/tar of the database directory for this service.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333049515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333050083","html_url":"https://github.com/apache/couchdb/issues/758#issuecomment-333050083","issue_url":"https://api.github.com/repos/apache/couchdb/issues/758","id":333050083,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzA1MDA4Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T07:15:25Z","updated_at":"2017-09-29T07:15:25Z","author_association":"MEMBER","body":"One last comment - you mention purging. Do you mean use of the actual `/{db}/_purge` endpoint, or just document deletion? As the warning in the documentation states, this is an endpoint of last resort. It's possible that use of `/{db}/_purge` for anything other than the occasional deletion may have introduced corruption -- this is a usage scenario the CouchDB team doesn't support.\r\n\r\n> [Purging a document](http://docs.couchdb.org/en/1.6.1/api/database/misc.html?highlight=purge) from a database should only be done as a last resort when sensitive information has been introduced inadvertently into a database. In clustered or replicated environments it is very difficult to guarantee that a particular purged document has been removed from all replicas. Do not rely on this API as a way of doing secure deletion.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333050083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333124403","html_url":"https://github.com/apache/couchdb/pull/848#issuecomment-333124403","issue_url":"https://api.github.com/repos/apache/couchdb/issues/848","id":333124403,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzEyNDQwMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T13:20:59Z","updated_at":"2017-09-29T13:20:59Z","author_association":"CONTRIBUTOR","body":"I verified that latest meck fixes the cover issue, can now run cover on couch_replicator app.\r\n\r\nWith master it results in this:\r\n\r\n```\r\ncouch_replicator_docs: check_convert_options_fail_test...ok\r\n[done in 0.012 s]\r\nmodule 'couch_replicator_doc_processor_worker'\r\nundefined\r\n*** context setup failed ***\r\n**in function meck_proc:set_expect/2 (src/meck_proc.erl, line 113)\r\nin call from meck:expect/4 (src/meck.erl, line 245)\r\nin call from couch_replicator_doc_processor_worker:setup/0 (src/couch_replicator_doc_processor_worker.erl, line 251)\r\n**error:{case_clause,\r\n    {error,\r\n        {compile_forms,\r\n            {error,\r\n                [{\"cover.erl\",\r\n                  [{75,erl_lint,{undefined_function,{compile_beam,2}}}]}],\r\n                []}}}}\r\n\r\n```\r\n\r\nWith meck 0.8.8\r\n\r\n```\r\n [done in 38.750 s]\r\n=======================================================\r\n  All 334 tests passed.\r\nCover analysis: /Users/nvatama/asf/src/couch_replicator/.eunit/index.html\r\n\r\nCode Coverage:\r\ncouch_replicator                               :  49%\r\ncouch_replicator_api_wrap                      :  67%\r\ncouch_replicator_app                           : 100%\r\ncouch_replicator_attachments_too_large         : 100%\r\ncouch_replicator_changes_reader                :  50%\r\ncouch_replicator_clustering                    :  47%\r\ncouch_replicator_compact_tests                 :  93%\r\ncouch_replicator_connection                    :  80%\r\ncouch_replicator_db_changes                    :  53%\r\ncouch_replicator_doc_processor                 :  69%\r\ncouch_replicator_doc_processor_worker          :  89%\r\ncouch_replicator_docs                          :  56%\r\ncouch_replicator_fabric                        :   0%\r\ncouch_replicator_fabric_rpc                    :   0%\r\ncouch_replicator_filtered_tests                : 100%\r\ncouch_replicator_filters                       :  77%\r\ncouch_replicator_httpc                         :  46%\r\ncouch_replicator_httpc_pool                    :  80%\r\ncouch_replicator_httpd                         :  12%\r\ncouch_replicator_httpd_util                    :   0%\r\ncouch_replicator_id_too_long_tests             : 100%\r\ncouch_replicator_ids                           :  88%\r\ncouch_replicator_job_sup                       :   0%\r\ncouch_replicator_large_atts_tests              : 100%\r\ncouch_replicator_manager                       :  50%\r\ncouch_replicator_many_leaves_tests             : 100%\r\ncouch_replicator_missing_stubs_tests           : 100%\r\ncouch_replicator_modules_load_tests            : 100%\r\ncouch_replicator_notifier                      :  66%\r\ncouch_replicator_proxy_tests                   : 100%\r\ncouch_replicator_rate_limiter                  :  67%\r\ncouch_replicator_rate_limiter_tables           :  87%\r\ncouch_replicator_scheduler                     :  78%\r\ncouch_replicator_scheduler_job                 :  63%\r\ncouch_replicator_scheduler_sup                 : 100%\r\ncouch_replicator_selector_tests                : 100%\r\ncouch_replicator_small_max_request_size_target :  96%\r\ncouch_replicator_stats                         :  92%\r\ncouch_replicator_sup                           : 100%\r\ncouch_replicator_test_helper                   :  98%\r\ncouch_replicator_use_checkpoints_tests         :  95%\r\ncouch_replicator_utils                         :  80%\r\ncouch_replicator_worker                        :  85%\r\njson_stream_parse                              :  47%\r\n\r\nTotal                                          : 70%\r\n==> rel (eunit)\r\n==> asf (eunit)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333124403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333144845","html_url":"https://github.com/apache/couchdb/issues/851#issuecomment-333144845","issue_url":"https://api.github.com/repos/apache/couchdb/issues/851","id":333144845,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE0NDg0NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T14:39:47Z","updated_at":"2017-09-29T14:39:47Z","author_association":"MEMBER","body":"A million dbs on a single cluster could become daunting eventually, but db-per-user allows you to horizontally scale things, so every 100k or so users can live on their own cluster, e.g. with a little but of HTTP routing magic in front.\r\n\r\nMake sure to use q=1 for per-user-dbs, otherwise youâ€™ll run out of resources within a single cluster too quickly.\r\n\r\nAll this assuming you do not have millions of users just yet, and are ramping up over time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333144845/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333157135","html_url":"https://github.com/apache/couchdb/pull/852#issuecomment-333157135","issue_url":"https://api.github.com/repos/apache/couchdb/issues/852","id":333157135,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE1NzEzNQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T15:24:13Z","updated_at":"2017-09-29T15:24:13Z","author_association":"MEMBER","body":"But do we really want coverage to be always enabled? It's going to be executing on each travis run, adding to a running time and making logs even less readable and it's not even actionable item - it doesn't really affect review process, more like curiosity and test strategy driving metrics, not part of CI pipe.\r\n\r\nWhat I'm trying to say, if that's possible, I'd personally prefer to have coverage functionality ad-hoc, as a part of `make` command.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333157135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333169255","html_url":"https://github.com/apache/couchdb/pull/852#issuecomment-333169255","issue_url":"https://api.github.com/repos/apache/couchdb/issues/852","id":333169255,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE2OTI1NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T16:09:32Z","updated_at":"2017-09-29T16:09:32Z","author_association":"CONTRIBUTOR","body":"It was already running for a few apps and didn't seem to add too much overhead.\r\n\r\nIs there is a easy way to toggle it on and off without having a rebar.config.script or something like that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333169255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333170513","html_url":"https://github.com/apache/couchdb/issues/805#issuecomment-333170513","issue_url":"https://api.github.com/repos/apache/couchdb/issues/805","id":333170513,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE3MDUxMw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T16:14:56Z","updated_at":"2017-09-29T16:14:56Z","author_association":"MEMBER","body":"hm, not me. @chewbranca maybe?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333170513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333180109","html_url":"https://github.com/apache/couchdb/pull/827#issuecomment-333180109","issue_url":"https://api.github.com/repos/apache/couchdb/issues/827","id":333180109,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE4MDEwOQ==","user":{"login":"almightyju","id":7722347,"node_id":"MDQ6VXNlcjc3MjIzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/7722347?v=4","gravatar_id":"","url":"https://api.github.com/users/almightyju","html_url":"https://github.com/almightyju","followers_url":"https://api.github.com/users/almightyju/followers","following_url":"https://api.github.com/users/almightyju/following{/other_user}","gists_url":"https://api.github.com/users/almightyju/gists{/gist_id}","starred_url":"https://api.github.com/users/almightyju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/almightyju/subscriptions","organizations_url":"https://api.github.com/users/almightyju/orgs","repos_url":"https://api.github.com/users/almightyju/repos","events_url":"https://api.github.com/users/almightyju/events{/privacy}","received_events_url":"https://api.github.com/users/almightyju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T16:54:53Z","updated_at":"2017-09-29T16:54:53Z","author_association":"CONTRIBUTOR","body":"@wohali, finally got the tests done, I really do dislike erlang :/\r\n\r\nAnyway, new tests are passing for me, not confident about the need for clustered and backdoor for this so I've only tested against the clustered port.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333180109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333181450","html_url":"https://github.com/apache/couchdb/pull/852#issuecomment-333181450","issue_url":"https://api.github.com/repos/apache/couchdb/issues/852","id":333181450,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE4MTQ1MA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T17:00:41Z","updated_at":"2017-09-29T17:00:41Z","author_association":"MEMBER","body":"It's running for couch_epi and couch_log, I believe, for both because they've been build from a scratch, test cover was usable for development and then got included as a part of a bigger merge, not because it was turned on exclusively. We don't know how much overhead that adds, because we never measured it :)\r\n\r\nMy point thought not about performance penalty per se, but about unnecessary movement. In CI the generated reports not visible and not easily accessible, apart from scrolling the endless log, so it's not really helpful to have them always on.\r\n\r\nIn general I'm +0 on this change. If you get +1 from someone I wouldn't block it, our test suite already bulky and verbose, adding coverage not going to change things dramatically.\r\n\r\nI don't know easy way to make rebar switch cover, sorry :/ In rebar3 it is a separate command, which makes sense for me, but our rebar, I'm afraid, would require script trickery. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333181450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333182103","html_url":"https://github.com/apache/couchdb/pull/827#issuecomment-333182103","issue_url":"https://api.github.com/repos/apache/couchdb/issues/827","id":333182103,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE4MjEwMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T17:03:26Z","updated_at":"2017-09-29T17:03:26Z","author_association":"MEMBER","body":"Only clustered matters here, the node-local port is deprecated for all communications other than essential system admin tasks.\r\n\r\nLooks good! Assuming the Travis changes pass, we can merge this PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333182103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333186674","html_url":"https://github.com/apache/couchdb/pull/827#issuecomment-333186674","issue_url":"https://api.github.com/repos/apache/couchdb/issues/827","id":333186674,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE4NjY3NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T17:23:17Z","updated_at":"2017-09-29T17:23:17Z","author_association":"MEMBER","body":"Thanks again @almightyju - great job, and congrats on your first-time contribution to Apache CouchDB! ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333186674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333186941","html_url":"https://github.com/apache/couchdb/pull/852#issuecomment-333186941","issue_url":"https://api.github.com/repos/apache/couchdb/issues/852","id":333186941,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzE4Njk0MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T17:24:19Z","updated_at":"2017-09-29T17:24:19Z","author_association":"CONTRIBUTOR","body":"I saw a consistent failure on 16 and 17 in one of the tests. Closing it for now, will investigate it later.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333186941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333201205","html_url":"https://github.com/apache/couchdb/issues/781#issuecomment-333201205","issue_url":"https://api.github.com/repos/apache/couchdb/issues/781","id":333201205,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzIwMTIwNQ==","user":{"login":"rajudev","id":2010120,"node_id":"MDQ6VXNlcjIwMTAxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/2010120?v=4","gravatar_id":"","url":"https://api.github.com/users/rajudev","html_url":"https://github.com/rajudev","followers_url":"https://api.github.com/users/rajudev/followers","following_url":"https://api.github.com/users/rajudev/following{/other_user}","gists_url":"https://api.github.com/users/rajudev/gists{/gist_id}","starred_url":"https://api.github.com/users/rajudev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajudev/subscriptions","organizations_url":"https://api.github.com/users/rajudev/orgs","repos_url":"https://api.github.com/users/rajudev/repos","events_url":"https://api.github.com/users/rajudev/events{/privacy}","received_events_url":"https://api.github.com/users/rajudev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T18:21:25Z","updated_at":"2017-09-29T18:21:25Z","author_association":"NONE","body":"@wohali This is a must have, as there are many people who want it on Debian. Do you want any volunteering efforts for this particular task. I could help here. \r\nAlso any idea, why the Jessie repo for couchdb, is not allowing me to source the package from the repo?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333201205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333202271","html_url":"https://github.com/apache/couchdb/issues/781#issuecomment-333202271","issue_url":"https://api.github.com/repos/apache/couchdb/issues/781","id":333202271,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzIwMjI3MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T18:25:54Z","updated_at":"2017-09-29T18:25:54Z","author_association":"MEMBER","body":"Please remember that these are *convenience binaries* and that the only official release of Apache CouchDB is the source code. Anything else is a best-effort basis.\r\n\r\nWe don't at present build srpms / debian source packages.\r\n\r\nIf you want to see this move faster, PRs are welcome on these repositories:\r\n\r\nhttps://github.com/apache/couchdb-ci\r\nhttps://github.com/apache/couchdb-pkg\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333202271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333208502","html_url":"https://github.com/apache/couchdb/issues/781#issuecomment-333208502","issue_url":"https://api.github.com/repos/apache/couchdb/issues/781","id":333208502,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzIwODUwMg==","user":{"login":"rajudev","id":2010120,"node_id":"MDQ6VXNlcjIwMTAxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/2010120?v=4","gravatar_id":"","url":"https://api.github.com/users/rajudev","html_url":"https://github.com/rajudev","followers_url":"https://api.github.com/users/rajudev/followers","following_url":"https://api.github.com/users/rajudev/following{/other_user}","gists_url":"https://api.github.com/users/rajudev/gists{/gist_id}","starred_url":"https://api.github.com/users/rajudev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajudev/subscriptions","organizations_url":"https://api.github.com/users/rajudev/orgs","repos_url":"https://api.github.com/users/rajudev/repos","events_url":"https://api.github.com/users/rajudev/events{/privacy}","received_events_url":"https://api.github.com/users/rajudev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-29T18:51:08Z","updated_at":"2017-09-29T18:51:08Z","author_association":"NONE","body":"I see that the initial blocker for getting a Debian stretch image ofdocker-ansible is now resolved already. \r\nSo the delay is now from our side. Let me see if a PR is required for anything here. \r\n https://github.com/William-Yeh/docker-ansible/pull/31","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333208502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333322461","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-333322461","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":333322461,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMyMjQ2MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T17:13:20Z","updated_at":"2017-09-30T17:13:20Z","author_association":"MEMBER","body":"Thanks everyone for raising this and your patience with us resolving the issue.\r\n\r\nCan you all please download this and report back? Thanks!\r\n\r\n- zip: https://dist.apache.org/repos/dist/release/couchdb/binary/mac/2.1.0/Apache-CouchDB-2.1.0-1.zip\r\n- sha256: https://dist.apache.org/repos/dist/release/couchdb/binary/mac/2.1.0/Apache-CouchDB-2.1.0-1.zip.s256\r\n- sha512: https://dist.apache.org/repos/dist/release/couchdb/binary/mac/2.1.0/Apache-CouchDB-2.1.0-1.zip.s512\r\n- gig signature: https://dist.apache.org/repos/dist/release/couchdb/binary/mac/2.1.0/Apache-CouchDB-2.1.0-1.zip.asc\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333322461/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333323613","html_url":"https://github.com/apache/couchdb/issues/844#issuecomment-333323613","issue_url":"https://api.github.com/repos/apache/couchdb/issues/844","id":333323613,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMyMzYxMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T17:31:21Z","updated_at":"2017-09-30T17:31:21Z","author_association":"MEMBER","body":"> I have no suggestions, because I'm not sure what the problem is with deleting the stateless tokens.\r\n\r\nThe problem is that the tokens are stateless. That means they are not stored on the server. That means they can not be deleted, because they donâ€™t exist.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333323613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333325891","html_url":"https://github.com/apache/couchdb/issues/844#issuecomment-333325891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/844","id":333325891,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMyNTg5MQ==","user":{"login":"realulim","id":17084846,"node_id":"MDQ6VXNlcjE3MDg0ODQ2","avatar_url":"https://avatars.githubusercontent.com/u/17084846?v=4","gravatar_id":"","url":"https://api.github.com/users/realulim","html_url":"https://github.com/realulim","followers_url":"https://api.github.com/users/realulim/followers","following_url":"https://api.github.com/users/realulim/following{/other_user}","gists_url":"https://api.github.com/users/realulim/gists{/gist_id}","starred_url":"https://api.github.com/users/realulim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/realulim/subscriptions","organizations_url":"https://api.github.com/users/realulim/orgs","repos_url":"https://api.github.com/users/realulim/repos","events_url":"https://api.github.com/users/realulim/events{/privacy}","received_events_url":"https://api.github.com/users/realulim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T18:08:25Z","updated_at":"2017-09-30T18:08:25Z","author_association":"NONE","body":"Ok, then I have misunderstood how the procedure works. I thought stateless meant that they are not related to a user session, i. e. the server does not keep state. So if the server does not store the tokens, an attacker can use them indefinitely? In terms of security they are equivalent to the username/password combination then?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333325891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333326890","html_url":"https://github.com/apache/couchdb/pull/853#issuecomment-333326890","issue_url":"https://api.github.com/repos/apache/couchdb/issues/853","id":333326890,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMyNjg5MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T18:25:38Z","updated_at":"2017-09-30T18:25:38Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333326890/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333327749","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-333327749","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":333327749,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMyNzc0OQ==","user":{"login":"dj-at-work","id":8239167,"node_id":"MDQ6VXNlcjgyMzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8239167?v=4","gravatar_id":"","url":"https://api.github.com/users/dj-at-work","html_url":"https://github.com/dj-at-work","followers_url":"https://api.github.com/users/dj-at-work/followers","following_url":"https://api.github.com/users/dj-at-work/following{/other_user}","gists_url":"https://api.github.com/users/dj-at-work/gists{/gist_id}","starred_url":"https://api.github.com/users/dj-at-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dj-at-work/subscriptions","organizations_url":"https://api.github.com/users/dj-at-work/orgs","repos_url":"https://api.github.com/users/dj-at-work/repos","events_url":"https://api.github.com/users/dj-at-work/events{/privacy}","received_events_url":"https://api.github.com/users/dj-at-work/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T18:39:20Z","updated_at":"2017-09-30T18:40:13Z","author_association":"NONE","body":"Hi @janl, thank you! \r\nI did a quick test and it looks fine so far. I will do more tests in the next days.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333327749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333327909","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-333327909","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":333327909,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMyNzkwOQ==","user":{"login":"Chris-Andrews","id":10078518,"node_id":"MDQ6VXNlcjEwMDc4NTE4","avatar_url":"https://avatars.githubusercontent.com/u/10078518?v=4","gravatar_id":"","url":"https://api.github.com/users/Chris-Andrews","html_url":"https://github.com/Chris-Andrews","followers_url":"https://api.github.com/users/Chris-Andrews/followers","following_url":"https://api.github.com/users/Chris-Andrews/following{/other_user}","gists_url":"https://api.github.com/users/Chris-Andrews/gists{/gist_id}","starred_url":"https://api.github.com/users/Chris-Andrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Chris-Andrews/subscriptions","organizations_url":"https://api.github.com/users/Chris-Andrews/orgs","repos_url":"https://api.github.com/users/Chris-Andrews/repos","events_url":"https://api.github.com/users/Chris-Andrews/events{/privacy}","received_events_url":"https://api.github.com/users/Chris-Andrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T18:42:12Z","updated_at":"2017-09-30T18:42:12Z","author_association":"NONE","body":"I just tested as well. The new binary fixes the issue for me. Thanks @janl ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333327909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333331411","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-333331411","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":333331411,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMzMTQxMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T19:42:39Z","updated_at":"2017-09-30T19:42:39Z","author_association":"MEMBER","body":"@TheNightbear @Chris-Andrews Thanks! New zip up on the site: https://github.com/apache/couchdb-www/commit/b7a7235e6ee125b5f5fb998e64783016b3adc987","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333331411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333333038","html_url":"https://github.com/apache/couchdb/issues/844#issuecomment-333333038","issue_url":"https://api.github.com/repos/apache/couchdb/issues/844","id":333333038,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMzMzAzOA==","user":{"login":"realulim","id":17084846,"node_id":"MDQ6VXNlcjE3MDg0ODQ2","avatar_url":"https://avatars.githubusercontent.com/u/17084846?v=4","gravatar_id":"","url":"https://api.github.com/users/realulim","html_url":"https://github.com/realulim","followers_url":"https://api.github.com/users/realulim/followers","following_url":"https://api.github.com/users/realulim/following{/other_user}","gists_url":"https://api.github.com/users/realulim/gists{/gist_id}","starred_url":"https://api.github.com/users/realulim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/realulim/subscriptions","organizations_url":"https://api.github.com/users/realulim/orgs","repos_url":"https://api.github.com/users/realulim/repos","events_url":"https://api.github.com/users/realulim/events{/privacy}","received_events_url":"https://api.github.com/users/realulim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T20:11:06Z","updated_at":"2017-09-30T20:11:06Z","author_association":"NONE","body":"Let me rephrase my last comment, it was written in too much of a hurry, for which I apologize.\r\n\r\nWhat I didn't understand is that \"stateless tokens\" in CouchDB actually means more than simply not storing tokens. It means \"no sessions\". You could have sessions with stateless tokens (see my example below).\r\n\r\nThe point of token authentication in a general sense is that the user does not have to send his credentials with every request, so if a token is intercepted (CSRF, MITM, ...) the attacker has less than the credentials. \"Less\" means, for example, that once the user \"logs out\", all tokens become worthless. The point of this ticket was to suggest this functionality - a way to invalidate all tokens still out there.\r\n\r\nHowever, the server would have to store at least the timestamp of the last \"log out\" operation, then it could refuse all tokens coming in after that timestamp. The next \"log in\" event (session creation) would then delete this timestamp. And session creation is only possible with the credentials, which the attacker doesn't have (I assume the credentials are hashed/salted).\r\n\r\nA completely stateless solution is not possible, because all the token contains is the user's credentials and we cannot invalidate the credentials. But storing one additional timestamp per user would still be stateless in the sense that it doesn't change CouchDB's scaling properties. It is not a per-session value (which indeed would affect scalability), but a per-user value that could even be eventually consistent.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333333038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333333680","html_url":"https://github.com/apache/couchdb/issues/844#issuecomment-333333680","issue_url":"https://api.github.com/repos/apache/couchdb/issues/844","id":333333680,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzMzMzY4MA==","user":{"login":"realulim","id":17084846,"node_id":"MDQ6VXNlcjE3MDg0ODQ2","avatar_url":"https://avatars.githubusercontent.com/u/17084846?v=4","gravatar_id":"","url":"https://api.github.com/users/realulim","html_url":"https://github.com/realulim","followers_url":"https://api.github.com/users/realulim/followers","following_url":"https://api.github.com/users/realulim/following{/other_user}","gists_url":"https://api.github.com/users/realulim/gists{/gist_id}","starred_url":"https://api.github.com/users/realulim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/realulim/subscriptions","organizations_url":"https://api.github.com/users/realulim/orgs","repos_url":"https://api.github.com/users/realulim/repos","events_url":"https://api.github.com/users/realulim/events{/privacy}","received_events_url":"https://api.github.com/users/realulim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-30T20:22:43Z","updated_at":"2017-09-30T20:22:43Z","author_association":"NONE","body":"s/delete the timestamp/update the timestamp (so old tokens don't regain validity ;-)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333333680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333345588","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-333345588","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":333345588,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM0NTU4OA==","user":{"login":"hugazo","id":27823668,"node_id":"MDQ6VXNlcjI3ODIzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/27823668?v=4","gravatar_id":"","url":"https://api.github.com/users/hugazo","html_url":"https://github.com/hugazo","followers_url":"https://api.github.com/users/hugazo/followers","following_url":"https://api.github.com/users/hugazo/following{/other_user}","gists_url":"https://api.github.com/users/hugazo/gists{/gist_id}","starred_url":"https://api.github.com/users/hugazo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hugazo/subscriptions","organizations_url":"https://api.github.com/users/hugazo/orgs","repos_url":"https://api.github.com/users/hugazo/repos","events_url":"https://api.github.com/users/hugazo/events{/privacy}","received_events_url":"https://api.github.com/users/hugazo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T00:44:53Z","updated_at":"2017-10-01T00:44:53Z","author_association":"NONE","body":"Just a quick follow-up, everything working OK.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333345588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363517","html_url":"https://github.com/apache/couchdb/issues/544#issuecomment-333363517","issue_url":"https://api.github.com/repos/apache/couchdb/issues/544","id":333363517,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2MzUxNw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:08:27Z","updated_at":"2017-10-01T09:08:27Z","author_association":"MEMBER","body":"Letâ€™s make this a wontfix for now as per [@wohaliâ€™s comment](https://github.com/apache/couchdb/issues/544#issuecomment-304432993).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363643","html_url":"https://github.com/apache/couchdb/issues/546#issuecomment-333363643","issue_url":"https://api.github.com/repos/apache/couchdb/issues/546","id":333363643,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2MzY0Mw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:10:51Z","updated_at":"2017-10-01T09:10:51Z","author_association":"MEMBER","body":"Added needhelp label, closing for inactivity until somebody sends a PR","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363705","html_url":"https://github.com/apache/couchdb/issues/674#issuecomment-333363705","issue_url":"https://api.github.com/repos/apache/couchdb/issues/674","id":333363705,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2MzcwNQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:11:59Z","updated_at":"2017-10-01T09:11:59Z","author_association":"MEMBER","body":"Closing for inactivity. Reopen if the issue re-appears.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363755","html_url":"https://github.com/apache/couchdb/issues/584#issuecomment-333363755","issue_url":"https://api.github.com/repos/apache/couchdb/issues/584","id":333363755,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2Mzc1NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:12:45Z","updated_at":"2017-10-01T09:12:45Z","author_association":"MEMBER","body":"Closing for inactivity. Please reopen with a reproducible test case.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363886","html_url":"https://github.com/apache/couchdb/issues/594#issuecomment-333363886","issue_url":"https://api.github.com/repos/apache/couchdb/issues/594","id":333363886,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2Mzg4Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:15:19Z","updated_at":"2017-10-01T09:15:19Z","author_association":"MEMBER","body":"This is not likely to move forward without a PR, and there might still be opposition to the feature then (just setting expectations here for anyone going to attempt this. Added needhelp label, reopen when PR exists.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363989","html_url":"https://github.com/apache/couchdb/issues/602#issuecomment-333363989","issue_url":"https://api.github.com/repos/apache/couchdb/issues/602","id":333363989,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2Mzk4OQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:17:17Z","updated_at":"2017-10-01T09:17:17Z","author_association":"MEMBER","body":"@kocolosk are you saying that you should only ever put as many nodes into maintenance mode as can be spared by quorum? If yes, then this could be a wontfix.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333363989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333364343","html_url":"https://github.com/apache/couchdb/issues/619#issuecomment-333364343","issue_url":"https://api.github.com/repos/apache/couchdb/issues/619","id":333364343,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2NDM0Mw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T09:24:21Z","updated_at":"2017-10-01T09:24:21Z","author_association":"MEMBER","body":"Closing for inactivity, do reopen with a PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333364343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333367732","html_url":"https://github.com/apache/couchdb/pull/756#issuecomment-333367732","issue_url":"https://api.github.com/repos/apache/couchdb/issues/756","id":333367732,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2NzczMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T10:36:52Z","updated_at":"2017-10-01T10:36:52Z","author_association":"MEMBER","body":"> it appears that couchdb/src/couch_peruser/test/couch_peruser_test.erl#L98-106 results in the couch_peruser pid disappearing.\r\n\r\n@chewbranca how to reproduce this?\r\n\r\n`make eunit suites=couch_peruser` works fine locally, and Travis seems to agree, the failing build fails on unrelated mango tests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333367732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333369676","html_url":"https://github.com/apache/couchdb/pull/756#issuecomment-333369676","issue_url":"https://api.github.com/repos/apache/couchdb/issues/756","id":333369676,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM2OTY3Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T11:16:36Z","updated_at":"2017-10-01T11:16:36Z","author_association":"MEMBER","body":"> the failing build fails on unrelated mango tests.\r\n\r\nnevertheless, I pushed a commit that makes the mango test runner more reliable on slow build nodes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333369676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333398240","html_url":"https://github.com/apache/couchdb/issues/718#issuecomment-333398240","issue_url":"https://api.github.com/repos/apache/couchdb/issues/718","id":333398240,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM5ODI0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T18:55:06Z","updated_at":"2017-10-01T18:55:06Z","author_association":"MEMBER","body":"This was a documentation bug, addressed here:\r\n\r\nhttps://github.com/apache/couchdb-documentation/commit/6cd1044e1813fc054da8f911fd39ed8215a5bba6\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333398240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333398540","html_url":"https://github.com/apache/couchdb/issues/718#issuecomment-333398540","issue_url":"https://api.github.com/repos/apache/couchdb/issues/718","id":333398540,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM5ODU0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T18:59:31Z","updated_at":"2017-10-01T18:59:31Z","author_association":"MEMBER","body":"In case it's not clear:\r\n\r\n```\r\n[daemons]\r\nhttpsd = {chttpd, start_link, [https]}\r\n```\r\nis the right setting, and your bind is in the wrong place, it should be:\r\n```\r\n[chttpd]\r\nbind_address = 0.0.0.0\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333398540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333398811","html_url":"https://github.com/apache/couchdb/issues/733#issuecomment-333398811","issue_url":"https://api.github.com/repos/apache/couchdb/issues/733","id":333398811,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM5ODgxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T19:03:08Z","updated_at":"2017-10-01T19:03:08Z","author_association":"MEMBER","body":"Please share your full `etc/` directory contents from both boxes (with any `[admins]` sections removed!) for us to look at this further.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333398811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333399163","html_url":"https://github.com/apache/couchdb/issues/737#issuecomment-333399163","issue_url":"https://api.github.com/repos/apache/couchdb/issues/737","id":333399163,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM5OTE2Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T19:08:28Z","updated_at":"2017-10-01T19:08:28Z","author_association":"MEMBER","body":"Please provide any errors from your couchdb.log that relate to this issue. We can't help diagnose any errors if we don't see them.\r\n\r\nIt is understood that big views will take a long time to calculate the first time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333399163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333399369","html_url":"https://github.com/apache/couchdb/issues/747#issuecomment-333399369","issue_url":"https://api.github.com/repos/apache/couchdb/issues/747","id":333399369,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzM5OTM2OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T19:11:46Z","updated_at":"2017-10-01T19:11:46Z","author_association":"MEMBER","body":"Documentation bug fixed via apache/couchdb-documentation#167.\r\n\r\n@S-Aggarwal your problem is that you need to change this:\r\n\r\n```\r\n[httpd]\r\nauthentication_handlers = {chttpd_auth, proxy_authentication_handler}, {chttpd_auth, default_authentication_handler}\r\n```\r\n\r\nto this:\r\n\r\n```\r\n[chttpd]\r\nauthentication_handlers = {couch_httpd_auth, cookie_authentication_handler}, {couch_httpd_auth, proxy_authentication_handler}, {couch_httpd_auth, default_authentication_handler}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333399369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333402607","html_url":"https://github.com/apache/couchdb/issues/855#issuecomment-333402607","issue_url":"https://api.github.com/repos/apache/couchdb/issues/855","id":333402607,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwMjYwNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T20:01:29Z","updated_at":"2017-10-01T20:01:29Z","author_association":"MEMBER","body":"This is a child ticket of #617","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333402607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333402834","html_url":"https://github.com/apache/couchdb/issues/854#issuecomment-333402834","issue_url":"https://api.github.com/repos/apache/couchdb/issues/854","id":333402834,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwMjgzNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T20:05:04Z","updated_at":"2017-10-01T20:05:04Z","author_association":"MEMBER","body":"Note that the khash test suite uses this extensively, too:\r\n\r\n```\r\ntest/gen_term.erl:56: Warning: random:uniform/0: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:65: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:70: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:78: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:83: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:84: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:88: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:89: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:102: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/gen_term.erl:110: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\nCompiled test/gen_term.erl\r\ntest/khash_test.erl:3: Warning: export_all flag enabled - all functions will be exported\r\ntest/khash_test.erl:86: Warning: erlang:now/0: Deprecated BIF. See the \"Time and Time Correction in Erlang\" chapter of the ERTS User's Guide for more information.\r\ntest/khash_test.erl:86: Warning: random:seed/1: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/khash_test.erl:370: Warning: random:uniform/0: the 'random' module is deprecated; use the 'rand' module instead\r\ntest/khash_test.erl:382: Warning: random:uniform/1: the 'random' module is deprecated; use the 'rand' module instead\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333402834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333405644","html_url":"https://github.com/apache/couchdb/issues/770#issuecomment-333405644","issue_url":"https://api.github.com/repos/apache/couchdb/issues/770","id":333405644,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwNTY0NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T20:49:41Z","updated_at":"2017-10-01T20:49:41Z","author_association":"MEMBER","body":"Also, we can help better if you provide the lines in the couchdb.log that show the errors on failed replication.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333405644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333405913","html_url":"https://github.com/apache/couchdb/issues/779#issuecomment-333405913","issue_url":"https://api.github.com/repos/apache/couchdb/issues/779","id":333405913,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwNTkxMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T20:53:49Z","updated_at":"2017-10-01T20:53:49Z","author_association":"MEMBER","body":"Oh, the documentation was already updated with v2.0 docs:\r\n\r\n```\r\nwhatsnew/2.0.rst:* The ``/_log`` endpoint was removed.\r\n```\r\n\r\nClosing this issue.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333405913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333406885","html_url":"https://github.com/apache/couchdb/issues/805#issuecomment-333406885","issue_url":"https://api.github.com/repos/apache/couchdb/issues/805","id":333406885,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwNjg4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T21:08:36Z","updated_at":"2017-10-01T21:08:36Z","author_association":"MEMBER","body":"@t0nylai I've looked at the source code and there has literally been no change to the CORS support between 2.0 and 2.1, except for a single change to add max_age support, and another to add helper functions for hooks:\r\n\r\nhttps://github.com/apache/couchdb/commit/0cfd56a6413b18f8970c69b90dfec675cf4c4b38\r\nhttps://github.com/apache/couchdb/commit/4f80b40666d9ac77d4bca038eb7bdbe9a9ff3a84\r\n\r\n* is still supported for origins, or should be.\r\n\r\nI'm going to close this, because as far as I can tell there is no CouchDB bug here. If you have specific usage questions you can try our user@couchdb.apache.org mailing list, where I'm sure you'll find more people who use CORS in CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333406885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333406915","html_url":"https://github.com/apache/couchdb/issues/781#issuecomment-333406915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/781","id":333406915,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwNjkxNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T21:09:11Z","updated_at":"2017-10-01T21:09:11Z","author_association":"MEMBER","body":"This is currently blocked by problems building SM1.8.5 on stretch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333406915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333406953","html_url":"https://github.com/apache/couchdb/issues/813#issuecomment-333406953","issue_url":"https://api.github.com/repos/apache/couchdb/issues/813","id":333406953,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwNjk1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T21:09:50Z","updated_at":"2017-10-01T21:09:50Z","author_association":"MEMBER","body":"Change has been merged, closing this unless reproducible on master.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333406953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333409058","html_url":"https://github.com/apache/couchdb/issues/823#issuecomment-333409058","issue_url":"https://api.github.com/repos/apache/couchdb/issues/823","id":333409058,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwOTA1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T21:42:42Z","updated_at":"2017-10-01T21:42:42Z","author_association":"MEMBER","body":"The problem here is that `require_value_user` is performed during _authentication_ phase, whereas checking for permissions for `_up` is done as an `authorization` phase check. Authentication happens before authorization.\r\n\r\nRight now, the authentication handlers are completely agnostic of the path of the request that comes in; introducing an exception to that flow duplicates the code in the authorization layer. If we're only ever going to allow access to `/_up` that's one thing, but if this ever needs to be extended for other endpoints, we'll be repeating ourselves, which could lead to inconsistent choices being made and increase the complexity of maintaining this code.\r\n\r\nI'll look at doing a PR, but there's no guarantees it'll land unchallenged in the code.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333409058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333409951","html_url":"https://github.com/apache/couchdb/pull/856#issuecomment-333409951","issue_url":"https://api.github.com/repos/apache/couchdb/issues/856","id":333409951,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQwOTk1MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T21:57:57Z","updated_at":"2017-10-01T21:57:57Z","author_association":"MEMBER","body":"Note that I'm worried about the precedent that this sets, but I do agree that `_up` is an innocuous hole to punch through the authentication layer.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333409951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333411340","html_url":"https://github.com/apache/couchdb/pull/856#issuecomment-333411340","issue_url":"https://api.github.com/repos/apache/couchdb/issues/856","id":333411340,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQxMTM0MA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T22:24:22Z","updated_at":"2017-10-01T22:24:22Z","author_association":"MEMBER","body":"require_valid_user=true means every request needs auth no matter how innocuous so Iâ€™m -1 on \r\nprinciple. \r\n\r\nthereâ€™s a specific module that handles authorisation logic, so the patch is not quite right either. \r\n\r\nðŸ™‚","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333411340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333411480","html_url":"https://github.com/apache/couchdb/pull/856#issuecomment-333411480","issue_url":"https://api.github.com/repos/apache/couchdb/issues/856","id":333411480,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQxMTQ4MA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T22:26:40Z","updated_at":"2017-10-01T22:26:40Z","author_association":"MEMBER","body":"Iâ€™d remove my veto if the check is done in the right module and is separately configurable, defaulting to match require_valid_user. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333411480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333412925","html_url":"https://github.com/apache/couchdb/pull/856#issuecomment-333412925","issue_url":"https://api.github.com/repos/apache/couchdb/issues/856","id":333412925,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQxMjkyNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-01T22:54:18Z","updated_at":"2017-10-01T22:54:18Z","author_association":"MEMBER","body":"@rnewson Not sure which module you're referring to here. I _think_ the flow looks something like:\r\n\r\n`mochiweb` â†’ `chttpd:process_request` â†’ `chttpd:authenticate_request` â†’ (list of handlers, which starts with) `chttpd_auth:default_authentication_handler` â†’ `couch_httpd_auth:default_authentication_handler`\r\n\r\nwhich is why the patch ended up where it did. I can't put it in `chttpd_auth_request` because authorization happens after authentication, right?\r\n\r\nHappy to add the extra config check, that makes perfect sense. I could even see listing the endpoints to unprotect, though that's not strictly necessary.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333412925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333489119","html_url":"https://github.com/apache/couchdb/issues/823#issuecomment-333489119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/823","id":333489119,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzQ4OTExOQ==","user":{"login":"calonso","id":2392041,"node_id":"MDQ6VXNlcjIzOTIwNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2392041?v=4","gravatar_id":"","url":"https://api.github.com/users/calonso","html_url":"https://github.com/calonso","followers_url":"https://api.github.com/users/calonso/followers","following_url":"https://api.github.com/users/calonso/following{/other_user}","gists_url":"https://api.github.com/users/calonso/gists{/gist_id}","starred_url":"https://api.github.com/users/calonso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calonso/subscriptions","organizations_url":"https://api.github.com/users/calonso/orgs","repos_url":"https://api.github.com/users/calonso/repos","events_url":"https://api.github.com/users/calonso/events{/privacy}","received_events_url":"https://api.github.com/users/calonso/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T09:49:43Z","updated_at":"2017-10-02T09:49:43Z","author_association":"NONE","body":"Amazing, thanks!!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333489119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333525878","html_url":"https://github.com/apache/couchdb/issues/776#issuecomment-333525878","issue_url":"https://api.github.com/repos/apache/couchdb/issues/776","id":333525878,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzUyNTg3OA==","user":{"login":"Shardj","id":5624120,"node_id":"MDQ6VXNlcjU2MjQxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/5624120?v=4","gravatar_id":"","url":"https://api.github.com/users/Shardj","html_url":"https://github.com/Shardj","followers_url":"https://api.github.com/users/Shardj/followers","following_url":"https://api.github.com/users/Shardj/following{/other_user}","gists_url":"https://api.github.com/users/Shardj/gists{/gist_id}","starred_url":"https://api.github.com/users/Shardj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Shardj/subscriptions","organizations_url":"https://api.github.com/users/Shardj/orgs","repos_url":"https://api.github.com/users/Shardj/repos","events_url":"https://api.github.com/users/Shardj/events{/privacy}","received_events_url":"https://api.github.com/users/Shardj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T12:55:24Z","updated_at":"2017-10-02T12:55:24Z","author_association":"NONE","body":"Hi wohali,\r\n\r\n> Root cause that replication fails is that you can't access CouchDB from off-machine. \r\n\r\nThat was the whole problem\r\n\r\nYeah I know about the security risk for 5986 being bound to 0.0.0.0, I was just trying stuff out. The config error never got fixed, no idea what the problem was or is. Doesn't matter now anyway since I have the production database up and working just fine so I'm using that for testing until launch. This issue already gave me enough headaches and it was likely just something wrong with my machines config since other couchdb setups I've done work just fine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333525878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333562139","html_url":"https://github.com/apache/couchdb/issues/857#issuecomment-333562139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/857","id":333562139,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzU2MjEzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T15:04:19Z","updated_at":"2017-10-02T15:04:19Z","author_association":"MEMBER","body":"This is a really broad request for a single \"bug\" report. We can't provide any meaningful response here.\r\n\r\nIf you're looking to have a discussion with the developers on this point, please bring it to our mailing list, `user@couchdb.apache.org`.\r\n\r\nNew options available right now include rich querying using full-text search (Lucene query style) via the clouseau/dreyfus addons, and geospatial sesarch via the hastings addon. Lots of people are able to get the rich querying they need from these.\r\n\r\nIf you're specifically asking about Mango, we explain in our documentation:\r\n\r\n>The general API exposes a set of actions that are similar to what MongoDB exposes (although not all of MongoDB's API is supported). These are meant to be loosely and obviously inspired by MongoDB but without too much attention to maintaining the exact behavior.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333562139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333575446","html_url":"https://github.com/apache/couchdb/pull/856#issuecomment-333575446","issue_url":"https://api.github.com/repos/apache/couchdb/issues/856","id":333575446,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzU3NTQ0Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T15:46:18Z","updated_at":"2017-10-02T15:46:18Z","author_association":"MEMBER","body":"from IRC:\r\n\r\n```irc\r\n11:41 <+rnewson> hm, yes, I see your point.\r\n11:41 <+Wohali> if i don't punch a hole through\r\n                couch_httpd_auth:default_authentication_handler, there's no way\r\n                to actually get to chttpd_auth_request\r\n11:41 <+Wohali> and chttpd_auth_request already has the right settings for _up\r\n11:42 <+rnewson> well, that hole won't be sufficient but I understand\r\n11:42 <+rnewson> a request with a cookie would not go through there (etc)\r\n11:43 <+Wohali> yeah\r\n11:43 <+Wohali> but the assumption is this is just for healthcheck services\r\n                that won't supply any creds\r\n11:44 <+rnewson> yes, understood.\r\n11:44 <+rnewson> but require_valid_user=true is defined as requiring\r\n                 authentication for every request (even _session, which is at\r\n                 least as silly as _up)\r\n11:44 <+Wohali> i guess i could add an entirely new {couch_httpd_auth,\r\n                massive_security_hole_authentication_handler}\r\n11:44 <+rnewson> so we'd need another config to punch a hole in that, rather\r\n                 than change what require_valid_user=true means.\r\n11:45 <+rnewson> so long as there's a config setting (default to current\r\n                 behaviour) I'm ok with the proposed change (though not\r\n                 necessarily the impl)\r\n11:45 <+Wohali> ok, will look at later\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333575446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333579565","html_url":"https://github.com/apache/couchdb/issues/858#issuecomment-333579565","issue_url":"https://api.github.com/repos/apache/couchdb/issues/858","id":333579565,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzU3OTU2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T15:59:27Z","updated_at":"2017-10-02T15:59:27Z","author_association":"MEMBER","body":"Original context:\r\n\r\n> I'm still seeing the same problem as described in COUCHDB-2424 with CouchDB 2.0.0 (Ubuntu) but it doesn't appear that I can reopen that issue.\r\n>\r\n> What I'm trying to do trying to get a newly added cluster node to participate in all the databases already created in the cluster so that I can then remove an existing node and replace it with the new one. The workflow I have is:\r\n>\r\n> -    Add the new node to the cluster using the _nodes endpoint. This works.\r\n> -    For each database edit the shard metadata document (e.g. _db/db_name) and add all shards to the new node.\r\n> \r\n> This appears to work for all databases except the system databases. Essentially this means that you can't move the shards for these database off a node in order to retire that node.\r\n> \r\n> An easy way to reproduce the issue is to open http://localhost:5986/_utils/#/database/_dbs/_metadata and then click \"Save Changes\" in Fauxton. The error \"Save failed: Only reserved document ids may start with underscore.\" is displayed. Doing the same process for a user database works fine. Similarly, editing the document via curl also fails with the same error.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333579565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333616984","html_url":"https://github.com/apache/couchdb/issues/859#issuecomment-333616984","issue_url":"https://api.github.com/repos/apache/couchdb/issues/859","id":333616984,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzYxNjk4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T18:08:35Z","updated_at":"2017-10-02T18:08:35Z","author_association":"MEMBER","body":"Please try again with the apache/couchdb:2.1.0 image and see if this helps. The klaemo/couchdb images are deprecated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333616984/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333619692","html_url":"https://github.com/apache/couchdb/issues/859#issuecomment-333619692","issue_url":"https://api.github.com/repos/apache/couchdb/issues/859","id":333619692,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzYxOTY5Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T18:17:24Z","updated_at":"2017-10-02T18:17:24Z","author_association":"MEMBER","body":"Basically all of your errors are timeouts. Your system is overloaded. You can keep bumping up timeouts, but this only sweeps the problem under the rug.\r\n\r\nYou should consider moving to a proper CouchDB 2.x 3-node cluster to start, with a load balancer in front. You may need to experiment to determine the correct `q` value for this database as well. By spreading the load across more nodes you should be able to scale this horizontally. You could consider running the nodes all on the same Docker host, but only you know what load you have and what that machine is capable of handling. For redundancy it would be better to use separate physical hosts, even if those machines are also running Docker containers.\r\n\r\nAnother thing to consider is, if you are using filtered `_changes` feeds (could relate to your `couchjs` os process timeouts), to switch to [Mango-style selectors](http://docs.couchdb.org/en/2.1.0/api/database/changes.html?highlight=selector#selector) which are significantly better performance than JavaScript filters.\r\n\r\nNone of the error messages above suggest you're hitting file handle limits (you'd see `emfile` or `enfile` errors).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333619692/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333671154","html_url":"https://github.com/apache/couchdb/pull/860#issuecomment-333671154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/860","id":333671154,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzY3MTE1NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T21:30:40Z","updated_at":"2017-10-02T21:30:40Z","author_association":"CONTRIBUTOR","body":"Turns out crypto:rand_uniform/2 is also deprecated but docs don't show it. Only shows up during compiling. Will go a different route and do a check if rand module is present to call that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333671154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333672660","html_url":"https://github.com/apache/couchdb/pull/861#issuecomment-333672660","issue_url":"https://api.github.com/repos/apache/couchdb/issues/861","id":333672660,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzY3MjY2MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T21:37:27Z","updated_at":"2017-10-02T21:37:27Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333672660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333688367","html_url":"https://github.com/apache/couchdb/pull/860#issuecomment-333688367","issue_url":"https://api.github.com/repos/apache/couchdb/issues/860","id":333688367,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzY4ODM2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-02T22:55:34Z","updated_at":"2017-10-02T22:55:34Z","author_association":"MEMBER","body":"+1 but I defer to @rnewson who just recently removed `couch_crypto` about the reasonableness of sticking these function in `couch_util`. Probably fine, though.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333688367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333706653","html_url":"https://github.com/apache/couchdb/issues/602#issuecomment-333706653","issue_url":"https://api.github.com/repos/apache/couchdb/issues/602","id":333706653,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzcwNjY1Mw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T00:48:48Z","updated_at":"2017-10-03T00:48:48Z","author_association":"MEMBER","body":"@janl no, that wasn't what I was suggesting; I was only explaining why this sort of thing tends to not crop up in production.\r\n\r\nI'd agree that a user should not voluntarily put a majority of cluster nodes into maintenance, but if that user is unlucky enough to lose 2/3 of a cluster and she still wants predictable responses to view queries then she may well end up in this position.\r\n\r\nI was suggesting setting a flag somewhere in the codepath of `mem3_sync_security` that would allow it to retrieve security objects from nodes in maintenance mode. One (slightly hacky) way to do that would be to set a custom IO priority for the request.\r\n\r\nThis is not without its own issues, though ... in the case I described above where 2/3 of the cluster was destroyed a sync process patched in this way could actually remove the security settings from the remaining healthy nodes, since the shards on the rebuilding nodes would constitute a simple majority of all database shards and \"outvote\" the healthy ones.\r\n\r\nThe proper fix here is to introduce versioning into security objects. I recall some attempts at doing so over the years but also recall those attempts running into unexpectedly gnarly corner cases. @davisp and @chewbranca may remember more.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333706653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333751138","html_url":"https://github.com/apache/couchdb/pull/860#issuecomment-333751138","issue_url":"https://api.github.com/repos/apache/couchdb/issues/860","id":333751138,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzc1MTEzOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T06:24:12Z","updated_at":"2017-10-03T14:11:53Z","author_association":"CONTRIBUTOR","body":"Another update. The previous approach was similar to the couch_crypto, however that didn't work for this case because it turns out `erlang:function_exported/3` will return `false` even if module is there and function is exported but it hasn't been loaded yet. In case of the `rand` module there was nothing loading it, so that check was failing. \r\n\r\nSwitched to explicitly checking versions instead and calling the appropriate module. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333751138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333879634","html_url":"https://github.com/apache/couchdb/pull/860#issuecomment-333879634","issue_url":"https://api.github.com/repos/apache/couchdb/issues/860","id":333879634,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzg3OTYzNA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T15:30:11Z","updated_at":"2017-10-03T15:30:11Z","author_association":"MEMBER","body":"can we detect at build time and use macros instead? faster and safer, we can rely on rebar a bit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333879634/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333951802","html_url":"https://github.com/apache/couchdb/pull/860#issuecomment-333951802","issue_url":"https://api.github.com/repos/apache/couchdb/issues/860","id":333951802,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzk1MTgwMg==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T19:27:48Z","updated_at":"2017-10-03T19:27:48Z","author_association":"CONTRIBUTOR","body":"Presumably this will work correctly for code compiled under e.g. 17.x and run under 18+, but not the other way around?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333951802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333958865","html_url":"https://github.com/apache/couchdb/pull/860#issuecomment-333958865","issue_url":"https://api.github.com/repos/apache/couchdb/issues/860","id":333958865,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzk1ODg2NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T19:54:15Z","updated_at":"2017-10-03T19:54:15Z","author_association":"CONTRIBUTOR","body":"@jaydoane Yeah, compiled under 17.x will work on 18, but not the other way around\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333958865/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333983182","html_url":"https://github.com/apache/couchdb/issues/858#issuecomment-333983182","issue_url":"https://api.github.com/repos/apache/couchdb/issues/858","id":333983182,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMzk4MzE4Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-03T21:24:45Z","updated_at":"2017-10-03T21:24:45Z","author_association":"MEMBER","body":"FYI only workaround I can think of right now for this is that replacing a node should be possible **IF** the new node is named the same as an old node. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/333983182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334223380","html_url":"https://github.com/apache/couchdb/issues/865#issuecomment-334223380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/865","id":334223380,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDIyMzM4MA==","user":{"login":"mkaliyannan","id":8954012,"node_id":"MDQ6VXNlcjg5NTQwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8954012?v=4","gravatar_id":"","url":"https://api.github.com/users/mkaliyannan","html_url":"https://github.com/mkaliyannan","followers_url":"https://api.github.com/users/mkaliyannan/followers","following_url":"https://api.github.com/users/mkaliyannan/following{/other_user}","gists_url":"https://api.github.com/users/mkaliyannan/gists{/gist_id}","starred_url":"https://api.github.com/users/mkaliyannan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkaliyannan/subscriptions","organizations_url":"https://api.github.com/users/mkaliyannan/orgs","repos_url":"https://api.github.com/users/mkaliyannan/repos","events_url":"https://api.github.com/users/mkaliyannan/events{/privacy}","received_events_url":"https://api.github.com/users/mkaliyannan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-04T17:05:27Z","updated_at":"2017-10-04T17:05:27Z","author_association":"NONE","body":"Any suggestions ?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334223380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334244841","html_url":"https://github.com/apache/couchdb/issues/865#issuecomment-334244841","issue_url":"https://api.github.com/repos/apache/couchdb/issues/865","id":334244841,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDI0NDg0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-04T18:18:34Z","updated_at":"2017-10-04T18:18:34Z","author_association":"MEMBER","body":"` \"Accept failed error\",\"{error,emfile}\"]}}`\r\n\r\nThis means that the OS is denying CouchDB the ability to open more files/sockets.\r\n\r\nAdvice to fix is here: http://docs.couchdb.org/en/latest/maintenance/performance.html?highlight=ulimit#maximum-open-file-descriptors-ulimit\r\n\r\nUbuntu 14.04 doesn't use systemd so you'll want to follow the PAM/init script changes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334244841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334251335","html_url":"https://github.com/apache/couchdb/issues/864#issuecomment-334251335","issue_url":"https://api.github.com/repos/apache/couchdb/issues/864","id":334251335,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDI1MTMzNQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-04T18:40:53Z","updated_at":"2017-10-04T18:40:53Z","author_association":"MEMBER","body":"Hi. The component that updates views when databases change is not a part of CouchDB, it's a proprietary component of the Cloudant platform.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334251335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334259242","html_url":"https://github.com/apache/couchdb/issues/865#issuecomment-334259242","issue_url":"https://api.github.com/repos/apache/couchdb/issues/865","id":334259242,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDI1OTI0Mg==","user":{"login":"mkaliyannan","id":8954012,"node_id":"MDQ6VXNlcjg5NTQwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8954012?v=4","gravatar_id":"","url":"https://api.github.com/users/mkaliyannan","html_url":"https://github.com/mkaliyannan","followers_url":"https://api.github.com/users/mkaliyannan/followers","following_url":"https://api.github.com/users/mkaliyannan/following{/other_user}","gists_url":"https://api.github.com/users/mkaliyannan/gists{/gist_id}","starred_url":"https://api.github.com/users/mkaliyannan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mkaliyannan/subscriptions","organizations_url":"https://api.github.com/users/mkaliyannan/orgs","repos_url":"https://api.github.com/users/mkaliyannan/repos","events_url":"https://api.github.com/users/mkaliyannan/events{/privacy}","received_events_url":"https://api.github.com/users/mkaliyannan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-04T19:09:26Z","updated_at":"2017-10-04T19:09:26Z","author_association":"NONE","body":"Thank you so much ! Appriciated. \n\n\nFrom: \"Joan Touzet\" <notifications@github.com> \nTo: \"apache/couchdb\" <couchdb@noreply.github.com> \nCc: \"Mohanasundaram, Kaliyannan\" <mohanasundaram.k@logictech.ca>, \"Author\" <author@noreply.github.com> \nSent: Wednesday, October 4, 2017 12:18:48 PM \nSubject: Re: [apache/couchdb] CouchDB crash (#865) \n\n\n\n\"Accept failed error\",\"{error,emfile}\"]}} \n\nThis means that the OS is denying CouchDB the ability to open more files/sockets. \n\nAdvice to fix is here: [ http://docs.couchdb.org/en/latest/maintenance/performance.html?highlight=ulimit#maximum-open-file-descriptors-ulimit | http://docs.couchdb.org/en/latest/maintenance/performance.html?highlight=ulimit#maximum-open-file-descriptors-ulimit ] \n\nUbuntu 14.04 doesn't use systemd so you'll want to follow the PAM/init script changes. \n\nâ€” \nYou are receiving this because you authored the thread. \nReply to this email directly, [ https://github.com/apache/couchdb/issues/865#issuecomment-334244841 | view it on GitHub ] , or [ https://github.com/notifications/unsubscribe-auth/AIignN2Yc9OP3PDxlUDyVR2inyhyT5MLks5so8wIgaJpZM4Pt71s | mute the thread ] . \n\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334259242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334496606","html_url":"https://github.com/apache/couchdb/pull/756#issuecomment-334496606","issue_url":"https://api.github.com/repos/apache/couchdb/issues/756","id":334496606,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDQ5NjYwNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-05T15:13:36Z","updated_at":"2017-10-05T15:13:36Z","author_association":"MEMBER","body":"@chewbranca  on IRC:\r\n\r\n> [19:36:46]  <chewbranca>\tjan____: Wohali: those couch per user changes I made weren't sufficient to fix the things btw, hopefully that's not getting merged in its current form. It needs to have some type of singleton thing like replication pids, otherwise you'll end up creating the user database N times which will result in conflicts on the dbs db which is no bueno \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334496606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334526790","html_url":"https://github.com/apache/couchdb/pull/863#issuecomment-334526790","issue_url":"https://api.github.com/repos/apache/couchdb/issues/863","id":334526790,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDUyNjc5MA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-05T16:56:23Z","updated_at":"2017-10-06T01:48:23Z","author_association":"CONTRIBUTOR","body":"@willholley : It's worth noting that the behavior is going to be different because of how we perceive $exists \"should\" work. If we indexed everything, and we queried ```{\"foo\": {\"$exists\": false}}```, then we would return  all the documents in the db that did not have \"foo\" as a field in the document. However, if you explicitly indexed \"foo\", then you would get 0 results back because you only indexed the subset of documents that contained \"foo\" as a field. The large (all_docs)superset is not part of the index, and therefore would not be returned. So _all_docs, explicit json index, index everything, and explicit text index would all return different results. \r\n\r\nEdit: looks like you're deferring to _all_docs as a special case for $exists:false here:\r\nhttps://github.com/apache/couchdb/commit/503f3e34afa0a68e91258ca864e70ab18e6584e2\r\n\r\nEdit 2: So after giving it some thought, I think _all_docs and index everything(text) should return the same results. Explicitly defined json indexes and text indexes should return the same thing for a given query. But what's tricky here is that we'll be defaulting to _all_docs with a single $exists: false query which leads to different results for the user even though we're using a different index. Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334526790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334564094","html_url":"https://github.com/apache/couchdb/pull/866#issuecomment-334564094","issue_url":"https://api.github.com/repos/apache/couchdb/issues/866","id":334564094,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDU2NDA5NA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-05T19:13:42Z","updated_at":"2017-10-05T19:14:33Z","author_association":"CONTRIBUTOR","body":"This is a tricky spot. I think the situation where the user would complain about backwards compatibility is as follows:\r\n\r\n1) User had a sort specified on one field ```a```\r\n2) User had an index created for fields : ```[a, b]```\r\n3) User Searched on ```a``` and incorrectly  got back documents which only included docs with both a and b. \r\n4) User gets a list of sorted docs returned, but missing some documents. User doesn't complain because the docs look sorted.\r\n\r\nIn the scenario where we ignore sort order and used _all_docs, I would assume the user would have already complained that their documents are not sorted.\r\n\r\nPerhaps we should improve the error messages returned?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334564094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334601791","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-334601791","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":334601791,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDYwMTc5MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-05T21:49:15Z","updated_at":"2017-10-05T21:49:15Z","author_association":"MEMBER","body":"Seeing this now in multiple production environments. In one case, it is potentially completely freezing a node participating in continuous replication with large attachments. In the other, it's a one-time replication that must be restarted many times before it runs to completion.\r\n\r\nDiscussion on IRC today with @nickva  follows.\r\n\r\n```\r\n17:17 < vatamane> #574 was mostly about how 413 (request too big) are handled\r\n17:17 <+Wohali> right, and in both cases these are large attachments\r\n17:18 < vatamane> do you think they trigger the 413 that is, are they bigger\r\n                  than the maximum size request setting?\r\n17:19 <+Wohali> very likely\r\n17:20 < vatamane> k, yeah this is tricky one\r\n17:20 < vatamane> I was trying to think what the patch would be for ibrowse and\r\n                  got thoroughly confused by its parsing state machine\r\n17:22 < vatamane> mochiweb (the server) might also have to behave nicely to\r\n                  ensure it actually sends out the 413 response before closing\r\n                  the streams\r\n17:23 <+Wohali> hm\r\n17:23 <+Wohali> https://github.com/cmullaparthi/ibrowse/issues/105\r\n17:24 <+Wohali> and of course https://github.com/cmullaparthi/ibrowse/issues/146\r\n17:24 <+Wohali> which might prevent us from moving to 4.3\r\n17:24 <+Wohali> or i guess 4.4 now\r\n17:28 < vatamane> the fix here might also need the setting of erlang's socket\r\n                  options\r\n17:29 < vatamane> namely {exit_on_close, false}\r\n17:30 < vatamane> i meant to say ibrowse lets us set socket options, i remember\r\n                  trying but it wasn't enough\r\n17:32 < vatamane> also i remember testing the server side with this script\r\nhttps://gist.github.com/nickva/84bbe3a51b9ceda8bca8256148be1a18\r\n17:32 < vatamane> it opens a plain socket for upload then even on send failure\r\n                  tries to receive data\r\n17:32 <+Wohali> right so we agree the issue is probably ibrowse?\r\n17:33 < vatamane> 80% or so sure\r\n17:36 <+Wohali> we could run that eunit test in a loop, I mean\r\n17:37 < vatamane> yap could do that\r\n17:37 < vatamane> I was doing it that way\r\n17:37 < vatamane> with debugging and logging enabled\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334601791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334692468","html_url":"https://github.com/apache/couchdb/pull/863#issuecomment-334692468","issue_url":"https://api.github.com/repos/apache/couchdb/issues/863","id":334692468,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDY5MjQ2OA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T08:29:45Z","updated_at":"2017-10-06T08:29:45Z","author_association":"MEMBER","body":"@tonysun83 if a user specifies `{\"$exists\": false}` explicitly, we can never use an index to fulfil that predicate (you're correct that this was addressed in https://github.com/apache/couchdb/commit/503f3e34afa0a68e91258ca864e70ab18e6584e2). Can you provide an example where you think we'll trip up (or ideally, a failing test)?\r\n\r\nAs a general rule, I think we should consider it a bug whenever there is variation in results due to indexes being present, the exception being index-specific operators such as `$text`. The expectation is that a user will start with no indexes (so queries will default to _all_docs) and add indexes when necessary to improve performance or when sorting is required. Adding an index to an existing application should never change the results of queries already being used.\r\n\r\nAnother thing to note, for awareness, is that an explicit [partial index](https://github.com/apache/couchdb/pull/808) could be used to optimise an `{\"$exists\": false}` selector but these require users to opt-in - the query planner will never automatically select them.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334692468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334697125","html_url":"https://github.com/apache/couchdb/pull/866#issuecomment-334697125","issue_url":"https://api.github.com/repos/apache/couchdb/issues/866","id":334697125,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDY5NzEyNQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T08:51:08Z","updated_at":"2017-10-06T08:51:08Z","author_association":"MEMBER","body":"@tonysun83 this PR should improve the error message in the case where a user specifies an index with `use_index` that is no longer deemed valid. We should have a corresponding documentation PR which explains the error messages and how to address them.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334697125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334706004","html_url":"https://github.com/apache/couchdb/pull/866#issuecomment-334706004","issue_url":"https://api.github.com/repos/apache/couchdb/issues/866","id":334706004,"node_id":"MDEyOklzc3VlQ29tbWVudDMzNDcwNjAwNA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-10-06T09:30:12Z","updated_at":"2017-10-06T09:30:12Z","author_association":"MEMBER","body":"@tonysun83 If a `sort` is specified, perhaps it's reasonable to assume that the user expects the field to exist in all documents that are returned. To preserve existing behaviour, we could implicitly add an `{\"$exists\": true}` predicate for each sort field to the selector. \r\n\r\nThis would allow us to safely validate the selector/index combination against `is_usable` whilst preserving existing behaviour as much as possible.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/334706004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]