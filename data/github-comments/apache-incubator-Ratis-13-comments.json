[{"url":"https://api.github.com/repos/apache/ratis/issues/comments/967796081","html_url":"https://github.com/apache/ratis/pull/532#issuecomment-967796081","issue_url":"https://api.github.com/repos/apache/ratis/issues/532","id":967796081,"node_id":"IC_kwDOBMxbGc45r2Vx","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T07:09:47Z","updated_at":"2021-11-13T07:09:47Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks a lot for you contribution.  Could you post a comment on https://issues.apache.org/jira/browse/RATIS-1429 so that we can set you as the assignee of the JIRA?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/967796081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/967911450","html_url":"https://github.com/apache/ratis/pull/532#issuecomment-967911450","issue_url":"https://api.github.com/repos/apache/ratis/issues/532","id":967911450,"node_id":"IC_kwDOBMxbGc45sSga","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-13T09:26:03Z","updated_at":"2021-11-13T09:26:03Z","author_association":"CONTRIBUTOR","body":"@szetszwo I have left a comment, PTAL, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/967911450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/968796154","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-968796154","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":968796154,"node_id":"IC_kwDOBMxbGc45vqf6","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-15T11:13:41Z","updated_at":"2021-11-15T11:13:41Z","author_association":"CONTRIBUTOR","body":"@maobaolong I modified the code according to your suggestion. PTAL, thx!\r\n What do you think about commandName?@szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/968796154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/969624402","html_url":"https://github.com/apache/ratis/pull/536#issuecomment-969624402","issue_url":"https://api.github.com/repos/apache/ratis/issues/536","id":969624402,"node_id":"IC_kwDOBMxbGc45y0tS","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-16T01:33:33Z","updated_at":"2021-11-16T01:33:33Z","author_association":"CONTRIBUTOR","body":"@szetszwo Can you help me review the code, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/969624402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971120091","html_url":"https://github.com/apache/ratis/pull/536#issuecomment-971120091","issue_url":"https://api.github.com/repos/apache/ratis/issues/536","id":971120091,"node_id":"IC_kwDOBMxbGc454h3b","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T02:37:08Z","updated_at":"2021-11-17T02:37:08Z","author_association":"CONTRIBUTOR","body":"@szetszwo I add a transferLeader metric,  PTAL, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971120091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971278267","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971278267","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971278267,"node_id":"IC_kwDOBMxbGc455Ie7","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T07:06:45Z","updated_at":"2021-11-17T07:06:45Z","author_association":"CONTRIBUTOR","body":"@codings-dan , @maobaolong , I think we should combine addPeers and removePeers to a single setConfiguration command so that users can add and remove peers at the same time.  What do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971278267/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971291754","html_url":"https://github.com/apache/ratis/pull/536#issuecomment-971291754","issue_url":"https://api.github.com/repos/apache/ratis/issues/536","id":971291754,"node_id":"IC_kwDOBMxbGc455Lxq","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T07:15:10Z","updated_at":"2021-11-17T07:15:10Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thank you for reviewing the code, I have modified it according to the comment you left, please take a look again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971291754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971494860","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971494860","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971494860,"node_id":"IC_kwDOBMxbGc4559XM","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T11:40:22Z","updated_at":"2021-11-17T11:40:22Z","author_association":"CONTRIBUTOR","body":"@szetszwo You mean that the original cluster members were A, B, and C, but now they become A, B, and D, right?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971494860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971501256","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971501256","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971501256,"node_id":"IC_kwDOBMxbGc455-7I","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T11:46:01Z","updated_at":"2021-11-17T11:46:01Z","author_association":"CONTRIBUTOR","body":"Yes.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971501256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971505374","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971505374","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971505374,"node_id":"IC_kwDOBMxbGc455_7e","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T11:49:43Z","updated_at":"2021-11-17T11:49:43Z","author_association":"CONTRIBUTOR","body":"The command could look like:\r\n```\r\nratis sh setConf -groupid xxx -peers a0,a1,a2 -remove a2 -add a3\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971505374/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971514336","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971514336","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971514336,"node_id":"IC_kwDOBMxbGc456CHg","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T12:02:46Z","updated_at":"2021-11-17T12:02:46Z","author_association":"CONTRIBUTOR","body":"I think this is a good idea, but I tend to modify it to\r\n`ratis sh memberChange -groupid xxx -peers a0,a1,a2 -remove a2 -add a3`\r\nFor setConf is not very use-friendly, what do you think? @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971514336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971645902","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971645902","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971645902,"node_id":"IC_kwDOBMxbGc456iPO","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T14:41:20Z","updated_at":"2021-11-17T14:41:20Z","author_association":"CONTRIBUTOR","body":"How about \"group\"?\r\n```\r\nratis sh group -groupid xxx -peers a0,a1,a2 -remove a2 -add a3\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971645902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971688602","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-971688602","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":971688602,"node_id":"IC_kwDOBMxbGc456sqa","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-17T15:26:18Z","updated_at":"2021-11-17T15:26:18Z","author_association":"CONTRIBUTOR","body":"Ok, I will modify the code according to this comment\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/971688602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/972705868","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-972705868","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":972705868,"node_id":"IC_kwDOBMxbGc45-lBM","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T09:51:31Z","updated_at":"2021-11-18T09:51:31Z","author_association":"CONTRIBUTOR","body":"@szetszwo I modified the code according to your comment. PTAL, thx! And I have tested it locally and there is no problem with the function.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/972705868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/972944864","html_url":"https://github.com/apache/ratis/pull/537#issuecomment-972944864","issue_url":"https://api.github.com/repos/apache/ratis/issues/537","id":972944864,"node_id":"IC_kwDOBMxbGc45_fXg","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T15:00:00Z","updated_at":"2021-11-18T15:00:00Z","author_association":"CONTRIBUTOR","body":"hi @szetszwo  , can you help review this patch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/972944864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973054294","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-973054294","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":973054294,"node_id":"IC_kwDOBMxbGc45_6FW","user":{"login":"maobaolong","id":17329931,"node_id":"MDQ6VXNlcjE3MzI5OTMx","avatar_url":"https://avatars.githubusercontent.com/u/17329931?v=4","gravatar_id":"","url":"https://api.github.com/users/maobaolong","html_url":"https://github.com/maobaolong","followers_url":"https://api.github.com/users/maobaolong/followers","following_url":"https://api.github.com/users/maobaolong/following{/other_user}","gists_url":"https://api.github.com/users/maobaolong/gists{/gist_id}","starred_url":"https://api.github.com/users/maobaolong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maobaolong/subscriptions","organizations_url":"https://api.github.com/users/maobaolong/orgs","repos_url":"https://api.github.com/users/maobaolong/repos","events_url":"https://api.github.com/users/maobaolong/events{/privacy}","received_events_url":"https://api.github.com/users/maobaolong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T16:54:43Z","updated_at":"2021-11-18T16:54:43Z","author_association":"MEMBER","body":"@codings-dan Please address the comments from @szetszwo and update the description of this PR, combine the add and remove into one command sounds a good idea.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973054294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973666078","html_url":"https://github.com/apache/ratis/pull/537#issuecomment-973666078","issue_url":"https://api.github.com/repos/apache/ratis/issues/537","id":973666078,"node_id":"IC_kwDOBMxbGc46CPce","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T02:18:45Z","updated_at":"2021-11-19T02:18:45Z","author_association":"CONTRIBUTOR","body":"@szetszwo Has been modified,  Please Take A Look.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973666078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973686413","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-973686413","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":973686413,"node_id":"IC_kwDOBMxbGc46CUaN","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T03:06:37Z","updated_at":"2021-11-19T03:06:37Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thank you for reviewing the code, I modified it according to the patch you left, PTAL, thx! ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973686413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973691362","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-973691362","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":973691362,"node_id":"IC_kwDOBMxbGc46CVni","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T03:11:27Z","updated_at":"2021-11-19T03:11:27Z","author_association":"CONTRIBUTOR","body":"@codings-dan thanks for updating the change and this pull request.  Could you also update the JIRAs?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973691362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973702457","html_url":"https://github.com/apache/ratis/pull/534#issuecomment-973702457","issue_url":"https://api.github.com/repos/apache/ratis/issues/534","id":973702457,"node_id":"IC_kwDOBMxbGc46CYU5","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T03:37:11Z","updated_at":"2021-11-19T03:37:11Z","author_association":"CONTRIBUTOR","body":"Jira has been updated.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973702457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973802296","html_url":"https://github.com/apache/ratis/pull/535#issuecomment-973802296","issue_url":"https://api.github.com/repos/apache/ratis/issues/535","id":973802296,"node_id":"IC_kwDOBMxbGc46Cws4","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T06:57:34Z","updated_at":"2021-11-19T06:58:13Z","author_association":"CONTRIBUTOR","body":"This work has been completed in #534  , so close.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/973802296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/975039535","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-975039535","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":975039535,"node_id":"IC_kwDOBMxbGc46Hewv","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T03:30:57Z","updated_at":"2021-11-22T03:30:57Z","author_association":"CONTRIBUTOR","body":"@szetszwo My idea is to first complete this pr, add proto and request. Then manually trigger the snapshot on the server side, and finally add a command. Can you help review the code, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/975039535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/976504530","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-976504530","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":976504530,"node_id":"IC_kwDOBMxbGc46NEbS","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T13:06:35Z","updated_at":"2021-11-23T13:06:35Z","author_association":"CONTRIBUTOR","body":"@maobaolong Can you help me review the code, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/976504530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/977563162","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-977563162","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":977563162,"node_id":"IC_kwDOBMxbGc46RG4a","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T06:10:26Z","updated_at":"2021-11-24T06:10:26Z","author_association":"CONTRIBUTOR","body":"How about add a new \"info\" option to the existing group command?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/977563162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/977582321","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-977582321","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":977582321,"node_id":"IC_kwDOBMxbGc46RLjx","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T06:51:18Z","updated_at":"2021-11-24T06:51:18Z","author_association":"CONTRIBUTOR","body":"@szetszwo I think the objects targeted by these two commands are different. The group command operates on peers, and the operation in this pr is groups. I want to add sub option to delete and add groups to specific peers in this command. Therefore, can we consider changing the name of the group command to a name related to Peer. Thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/977582321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/977629725","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-977629725","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":977629725,"node_id":"IC_kwDOBMxbGc46RXId","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T08:10:38Z","updated_at":"2021-11-24T08:10:38Z","author_association":"CONTRIBUTOR","body":"You are right.  The existing GroupCommand should be renamed to PeerCommand.  The new command in this change should be called GroupCommand.  The GroupCommand should correspond to GroupManagementApi.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/977629725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/979708342","html_url":"https://github.com/apache/ratis/pull/541#issuecomment-979708342","issue_url":"https://api.github.com/repos/apache/ratis/issues/541","id":979708342,"node_id":"IC_kwDOBMxbGc46ZSm2","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-26T05:34:59Z","updated_at":"2021-11-26T05:34:59Z","author_association":"CONTRIBUTOR","body":"@szetszwo , can you help review this patch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/979708342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/979709395","html_url":"https://github.com/apache/ratis/pull/541#issuecomment-979709395","issue_url":"https://api.github.com/repos/apache/ratis/issues/541","id":979709395,"node_id":"IC_kwDOBMxbGc46ZS3T","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-26T05:38:37Z","updated_at":"2021-11-29T10:28:29Z","author_association":"CONTRIBUTOR","body":"org.apache.ratis.netty.client.NettyClientStreamRpc#replies\r\n```\r\nprivate final ConcurrentMap<ClientInvocationId, Queue<CompletableFuture<DataStreamReply>>> replies =\r\n      new ConcurrentHashMap<>();\r\n```\r\nWhen all data for a streamID has been sent, is it necessary to clear the queue from the mapï¼Ÿ\r\n@szetszwo \r\n\r\n\r\nI would implement a ExpiringMap. If you don't use it for a long time or Queue.size is 0, I delete it from the Map.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/979709395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/981585015","html_url":"https://github.com/apache/ratis/pull/541#issuecomment-981585015","issue_url":"https://api.github.com/repos/apache/ratis/issues/541","id":981585015,"node_id":"IC_kwDOBMxbGc46gcx3","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T12:21:50Z","updated_at":"2021-11-29T12:21:50Z","author_association":"CONTRIBUTOR","body":"> I would implement a ExpiringMap.\r\n\r\n@guohao-rosicky , that is a good idea.  Let's do this in a separated JIRA.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/981585015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/981613432","html_url":"https://github.com/apache/ratis/pull/542#issuecomment-981613432","issue_url":"https://api.github.com/repos/apache/ratis/issues/542","id":981613432,"node_id":"IC_kwDOBMxbGc46gjt4","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T13:02:46Z","updated_at":"2021-11-29T13:02:46Z","author_association":"CONTRIBUTOR","body":"@szetszwo , can you help review this patch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/981613432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/982461591","html_url":"https://github.com/apache/ratis/pull/543#issuecomment-982461591","issue_url":"https://api.github.com/repos/apache/ratis/issues/543","id":982461591,"node_id":"IC_kwDOBMxbGc46jyyX","user":{"login":"bshashikant","id":31469764,"node_id":"MDQ6VXNlcjMxNDY5NzY0","avatar_url":"https://avatars.githubusercontent.com/u/31469764?v=4","gravatar_id":"","url":"https://api.github.com/users/bshashikant","html_url":"https://github.com/bshashikant","followers_url":"https://api.github.com/users/bshashikant/followers","following_url":"https://api.github.com/users/bshashikant/following{/other_user}","gists_url":"https://api.github.com/users/bshashikant/gists{/gist_id}","starred_url":"https://api.github.com/users/bshashikant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bshashikant/subscriptions","organizations_url":"https://api.github.com/users/bshashikant/orgs","repos_url":"https://api.github.com/users/bshashikant/repos","events_url":"https://api.github.com/users/bshashikant/events{/privacy}","received_events_url":"https://api.github.com/users/bshashikant/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T09:44:55Z","updated_at":"2021-11-30T09:44:55Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the contribution. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/982461591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/982661988","html_url":"https://github.com/apache/ratis/pull/547#issuecomment-982661988","issue_url":"https://api.github.com/repos/apache/ratis/issues/547","id":982661988,"node_id":"IC_kwDOBMxbGc46kjtk","user":{"login":"captainzmc","id":13825159,"node_id":"MDQ6VXNlcjEzODI1MTU5","avatar_url":"https://avatars.githubusercontent.com/u/13825159?v=4","gravatar_id":"","url":"https://api.github.com/users/captainzmc","html_url":"https://github.com/captainzmc","followers_url":"https://api.github.com/users/captainzmc/followers","following_url":"https://api.github.com/users/captainzmc/following{/other_user}","gists_url":"https://api.github.com/users/captainzmc/gists{/gist_id}","starred_url":"https://api.github.com/users/captainzmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captainzmc/subscriptions","organizations_url":"https://api.github.com/users/captainzmc/orgs","repos_url":"https://api.github.com/users/captainzmc/repos","events_url":"https://api.github.com/users/captainzmc/events{/privacy}","received_events_url":"https://api.github.com/users/captainzmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T13:59:36Z","updated_at":"2021-11-30T13:59:36Z","author_association":"MEMBER","body":"This is caused by RATIS-1445.  @szetszwo  Could you help review this?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/982661988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/982990137","html_url":"https://github.com/apache/ratis/pull/545#issuecomment-982990137","issue_url":"https://api.github.com/repos/apache/ratis/issues/545","id":982990137,"node_id":"IC_kwDOBMxbGc46lz05","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T20:23:08Z","updated_at":"2021-11-30T20:23:08Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for updating the patch.  Finally we have a green build.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/982990137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984499768","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-984499768","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":984499768,"node_id":"IC_kwDOBMxbGc46rkY4","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T10:33:19Z","updated_at":"2021-12-02T10:33:19Z","author_association":"CONTRIBUTOR","body":"netty doc: https://netty.io/4.1/api/io/netty/util/AttributeKey.html","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984499768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984511487","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-984511487","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":984511487,"node_id":"IC_kwDOBMxbGc46rnP_","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T10:48:43Z","updated_at":"2021-12-02T10:48:43Z","author_association":"CONTRIBUTOR","body":"@szetszwo , can you help review this patch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984511487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984628620","html_url":"https://github.com/apache/ratis/pull/550#issuecomment-984628620","issue_url":"https://api.github.com/repos/apache/ratis/issues/550","id":984628620,"node_id":"IC_kwDOBMxbGc46sD2M","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T13:29:18Z","updated_at":"2021-12-02T13:29:18Z","author_association":"CONTRIBUTOR","body":"@szetszwo , can you help review this patch?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984628620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984716870","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-984716870","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":984716870,"node_id":"IC_kwDOBMxbGc46sZZG","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T15:10:25Z","updated_at":"2021-12-02T15:10:25Z","author_association":"CONTRIBUTOR","body":"@szetszwo Sorry, due to a lot of things this week, this patch update is late. The code has been updated, I have tested the function, and can be used normally. Can you help review the code, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/984716870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985142294","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985142294","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985142294,"node_id":"IC_kwDOBMxbGc46uBQW","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T01:38:28Z","updated_at":"2021-12-03T01:38:28Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , Could you describe the details of the problem in more details? Did you see any exceptions?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985142294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985167562","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985167562","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985167562,"node_id":"IC_kwDOBMxbGc46uHbK","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T02:40:16Z","updated_at":"2021-12-03T02:40:16Z","author_association":"CONTRIBUTOR","body":"@szetszwo , I didn't find any exceptions, but you can see from netty document can do the same thing with AttributeMap.\r\n```\r\nprivate Final RequestRef RequestRef = new RequestRef();\r\n``` \r\nchanged by another `ChannelPipeline`, the `exceptionCaught` method obtained an incorrect value.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985167562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985168116","html_url":"https://github.com/apache/ratis/pull/550#issuecomment-985168116","issue_url":"https://api.github.com/repos/apache/ratis/issues/550","id":985168116,"node_id":"IC_kwDOBMxbGc46uHj0","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T02:41:56Z","updated_at":"2021-12-03T02:41:56Z","author_association":"CONTRIBUTOR","body":"This problem is similar to ratis-1454","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985168116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985169298","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985169298","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985169298,"node_id":"IC_kwDOBMxbGc46uH2S","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T02:45:32Z","updated_at":"2021-12-03T02:45:32Z","author_association":"CONTRIBUTOR","body":"> ... you can see from netty document  ...\r\n\r\nCould you provide the link to the netty doc?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985169298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985171320","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985171320","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985171320,"node_id":"IC_kwDOBMxbGc46uIV4","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T02:51:15Z","updated_at":"2021-12-03T02:51:15Z","author_association":"CONTRIBUTOR","body":"> > ... you can see from netty document  ...\r\n> \r\n> Could you provide the link to the netty doc?\r\n\r\ndoc: \r\n\r\nhttps://netty.io/4.1/api/io/netty/util/AttributeMap.html\r\n\r\nhttps://netty.io/4.1/api/io/netty/util/AttributeKey.html\r\n\r\nhttps://netty.io/4.1/api/io/netty/channel/ChannelHandlerContext.html#name--\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985171320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985177341","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985177341","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985177341,"node_id":"IC_kwDOBMxbGc46uJz9","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T03:06:37Z","updated_at":"2021-12-03T03:06:37Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , thanks, I read these netty API docs earlier.  Some questions:\r\n- Is there a problem you observed?  If yes, could you show the datails?\r\n- The calls might have shared the same context.  We need to verify it.\r\n- Somehow the attr method ( https://netty.io/4.1/api/io/netty/channel/ChannelHandlerContext.html#attr-io.netty.util.AttributeKey- ) is deprecated.  So, it is not clear what is the correct way to use it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985177341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985196961","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-985196961","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":985196961,"node_id":"IC_kwDOBMxbGc46uOmh","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T04:03:15Z","updated_at":"2021-12-03T04:03:15Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thank you for reviewing the code, I updated the code according to the comment and patch you left, please see if it needs to be updated again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985196961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985203931","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985203931","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985203931,"node_id":"IC_kwDOBMxbGc46uQTb","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T04:21:34Z","updated_at":"2021-12-03T04:26:49Z","author_association":"CONTRIBUTOR","body":"> @guohao-rosicky , thanks, I read these netty API docs earlier. Some questions:\r\n> \r\n> * Is there a problem you observed?  If yes, could you show the datails?\r\n> * The calls might have shared the same context.  We need to verify it.\r\n> * Somehow the attr method ( https://netty.io/4.1/api/io/netty/channel/ChannelHandlerContext.html#attr-io.netty.util.AttributeKey- ) is deprecated.  So, it is not clear what is the correct way to use it.\r\n\r\n@szetszwo\r\n\r\n1. There is a potential problem, but it has not been discovered\r\n2. I used the `ChannelHandlerContext.name()` this is the only name each context, `AttributeKey` is obtained by `name()` and is unique in each context, not overwritten by other handles\r\n3. I use `ctx.channel().attr()` and will not deprecated this method","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985203931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985213693","html_url":"https://github.com/apache/ratis/pull/521#issuecomment-985213693","issue_url":"https://api.github.com/repos/apache/ratis/issues/521","id":985213693,"node_id":"IC_kwDOBMxbGc46uSr9","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T04:47:50Z","updated_at":"2021-12-03T04:47:50Z","author_association":"CONTRIBUTOR","body":"@szetszwo ,  I'm doing some stress test on a three DN Ozone cluster. \r\nOne test case is 2048 concurrent writes.  It finished smoothly with this patch.  \r\nThe second test case is 2048 concurrent writes(whole cluster) + 8192 reads(per DN).  8192 reads succeed with accpetable performance. 2048 writes all failed.  The root cause is still leader step down.  It seems this patch is not enough when cluster has a heavy read&write load.  And extending election timeout from 5s to 10s doesn't have much effect. \r\n\r\nFYI,  following are some LOGs.  I will do further investigation and try to find a better solution.  Welcome any idea or suggestion.\r\n\r\n2021-12-02 13:58:18,914 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->5a4a8be1-c921-4ca7-af7c-62a37a55cab7-GrpcLogAppender: HEARTBEAT appendEntries Timeout, request=AppendEntriesRequest:cid=1182148,entriesCount=0,lastEntry=null\r\n2021-12-02 13:58:18,914 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->efdf0ed2-f836-4f4b-9dc8-981416d8a68d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=872615,entriesCount=1,lastEntry=(t:1, i:139211)\r\n2021-12-02 13:58:18,914 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->5a4a8be1-c921-4ca7-af7c-62a37a55cab7-GrpcLogAppender: HEARTBEAT appendEntries Timeout, request=AppendEntriesRequest:cid=1182149,entriesCount=0,lastEntry=null\r\n2021-12-02 13:58:18,915 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->efdf0ed2-f836-4f4b-9dc8-981416d8a68d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=872617,entriesCount=1,lastEntry=(t:1, i:139212)\r\n2021-12-02 13:58:18,915 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->5a4a8be1-c921-4ca7-af7c-62a37a55cab7-GrpcLogAppender: HEARTBEAT appendEntries Timeout, request=AppendEntriesRequest:cid=1182150,entriesCount=0,lastEntry=null\r\n2021-12-02 13:58:18,915 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->efdf0ed2-f836-4f4b-9dc8-981416d8a68d-GrpcLogAppender:  appendEntries Timeout, request=AppendEntriesRequest:cid=872619,entriesCount=1,lastEntry=(t:1, i:139213)\r\n2021-12-02 13:58:18,915 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->5a4a8be1-c921-4ca7-af7c-62a37a55cab7-GrpcLogAppender: HEARTBEAT appendEntries Timeout, request=AppendEntriesRequest:cid=1182151,entriesCount=0,lastEntry=null\r\n2021-12-02 13:58:18,916 [java.util.concurrent.ThreadPoolExecutor$Worker@43627a29[State = -1, empty queue]] WARN org.apache.ratis.grpc.server.GrpcLogAppender: 98e5b27a-c3e9-4f86-ab85-b2caf84f012b@group-151DB3A92008->5a4a8be1-c921-4ca7-af7c-62a37a55cab7-GrpcLogAppender: HEARTBEAT appendEntries Timeout, request=AppendEntriesRequest:cid=1182152,entriesCount=0,lastEntry=null\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985213693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985252483","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985252483","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985252483,"node_id":"IC_kwDOBMxbGc46ucKD","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T06:31:21Z","updated_at":"2021-12-03T06:31:21Z","author_association":"CONTRIBUTOR","body":"I will test in my test environment for a period of time and then update the test progress","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985252483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985273816","html_url":"https://github.com/apache/ratis/pull/540#issuecomment-985273816","issue_url":"https://api.github.com/repos/apache/ratis/issues/540","id":985273816,"node_id":"IC_kwDOBMxbGc46uhXY","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T07:18:41Z","updated_at":"2021-12-03T07:18:41Z","author_association":"CONTRIBUTOR","body":"I have fixed the typo, PTAL, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985273816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985274189","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985274189","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985274189,"node_id":"IC_kwDOBMxbGc46uhdN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T07:19:25Z","updated_at":"2021-12-03T07:19:25Z","author_association":"CONTRIBUTOR","body":"> There is a potential problem, ...\r\n\r\nThe current code does not seem to have a potential problem since we have assertions in the set(..) and reset(..) methods in RequestRef.\r\n\r\nIf there is no problem observed, let's don't spend our energy to change this.  We have many other works going on.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985274189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985296365","html_url":"https://github.com/apache/ratis/pull/552#issuecomment-985296365","issue_url":"https://api.github.com/repos/apache/ratis/issues/552","id":985296365,"node_id":"IC_kwDOBMxbGc46um3t","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T08:03:35Z","updated_at":"2021-12-03T08:03:35Z","author_association":"CONTRIBUTOR","body":"The test failure seems related.  Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985296365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985299227","html_url":"https://github.com/apache/ratis/pull/521#issuecomment-985299227","issue_url":"https://api.github.com/repos/apache/ratis/issues/521","id":985299227,"node_id":"IC_kwDOBMxbGc46unkb","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T08:08:29Z","updated_at":"2021-12-03T08:08:29Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , thanks a lot for further testing it!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985299227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985330365","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985330365","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985330365,"node_id":"IC_kwDOBMxbGc46uvK9","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T08:58:00Z","updated_at":"2021-12-03T09:00:58Z","author_association":"CONTRIBUTOR","body":"```\r\n      @Override\r\n      public void exceptionCaught(ChannelHandlerContext ctx, Throwable throwable) {\r\n        Optional.ofNullable(requestRef.getAndSetNull())\r\n            .ifPresent(request -> requests.replyDataStreamException(throwable, request, ctx));\r\n      }\r\n```\r\n@szetszwo \r\n`requestRef.getAndSetNull()`Before calling, it is modified by other `ChannelPipeline`, causing an error message to be sent to other clients","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985330365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985355635","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985355635","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985355635,"node_id":"IC_kwDOBMxbGc46u1Vz","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T09:19:56Z","updated_at":"2021-12-03T09:19:56Z","author_association":"CONTRIBUTOR","body":"> ... causing an error message to be sent to other clients\r\n\r\nIt seems not possible since requestRef already has asserted that only one request is process at a time in set/reset methods.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985355635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985359966","html_url":"https://github.com/apache/ratis/pull/552#issuecomment-985359966","issue_url":"https://api.github.com/repos/apache/ratis/issues/552","id":985359966,"node_id":"IC_kwDOBMxbGc46u2Ze","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T09:25:42Z","updated_at":"2021-12-03T09:25:42Z","author_association":"CONTRIBUTOR","body":"Seems to have nothing to do with the submitted code\r\n```\r\nErrors: \r\nError:    TestFileStoreStreamingWithGrpcCluster>FileStoreStreamingBaseTest.testFileStoreStreamMultipleFiles:100->FileStoreStreamingBaseTest.testMultipleFiles:138 Â» TestTimedOut\r\nError:    TestFileStoreStreamingWithGrpcCluster>FileStoreStreamingBaseTest.testFileStoreStreamSingleFile:78->FileStoreStreamingBaseTest.testSingleFile:116 Â» TestTimedOut\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985359966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985370576","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985370576","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985370576,"node_id":"IC_kwDOBMxbGc46u4_Q","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T09:41:01Z","updated_at":"2021-12-03T09:41:01Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nBut won't this variable be modified by other channels before calling exceptionCaught in this ChannelPipeline? Set /reset is only guaranteed to remain unchanged within the channelRead method in this ChannelPipeline.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985370576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985663706","html_url":"https://github.com/apache/ratis/pull/553#issuecomment-985663706","issue_url":"https://api.github.com/repos/apache/ratis/issues/553","id":985663706,"node_id":"IC_kwDOBMxbGc46wAja","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T16:38:24Z","updated_at":"2021-12-03T16:38:24Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and committing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985663706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985778157","html_url":"https://github.com/apache/ratis/pull/507#issuecomment-985778157","issue_url":"https://api.github.com/repos/apache/ratis/issues/507","id":985778157,"node_id":"IC_kwDOBMxbGc46wcft","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-03T19:37:13Z","updated_at":"2021-12-03T19:37:13Z","author_association":"CONTRIBUTOR","body":"Thanks @neuyilan for the fix.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985778157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985982903","html_url":"https://github.com/apache/ratis/pull/552#issuecomment-985982903","issue_url":"https://api.github.com/repos/apache/ratis/issues/552","id":985982903,"node_id":"IC_kwDOBMxbGc46xOe3","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T07:13:51Z","updated_at":"2021-12-04T07:14:15Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , try reverting the change.  These tests will pass immediately.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985982903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985983274","html_url":"https://github.com/apache/ratis/pull/549#issuecomment-985983274","issue_url":"https://api.github.com/repos/apache/ratis/issues/549","id":985983274,"node_id":"IC_kwDOBMxbGc46xOkq","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T07:17:23Z","updated_at":"2021-12-04T07:17:23Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , only set/reset methods can change the ref.  Suppose ref is set to requestA.  Only reset(requestA) can clear it.  There are no ways (even in other methods)  to set it to another request before that.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/985983274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/986008266","html_url":"https://github.com/apache/ratis/pull/555#issuecomment-986008266","issue_url":"https://api.github.com/repos/apache/ratis/issues/555","id":986008266,"node_id":"IC_kwDOBMxbGc46xUrK","user":{"login":"maobaolong","id":17329931,"node_id":"MDQ6VXNlcjE3MzI5OTMx","avatar_url":"https://avatars.githubusercontent.com/u/17329931?v=4","gravatar_id":"","url":"https://api.github.com/users/maobaolong","html_url":"https://github.com/maobaolong","followers_url":"https://api.github.com/users/maobaolong/followers","following_url":"https://api.github.com/users/maobaolong/following{/other_user}","gists_url":"https://api.github.com/users/maobaolong/gists{/gist_id}","starred_url":"https://api.github.com/users/maobaolong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maobaolong/subscriptions","organizations_url":"https://api.github.com/users/maobaolong/orgs","repos_url":"https://api.github.com/users/maobaolong/repos","events_url":"https://api.github.com/users/maobaolong/events{/privacy}","received_events_url":"https://api.github.com/users/maobaolong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T10:53:25Z","updated_at":"2021-12-04T10:53:25Z","author_association":"MEMBER","body":"@szetszwo Thank you.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/986008266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/986030695","html_url":"https://github.com/apache/ratis/pull/554#issuecomment-986030695","issue_url":"https://api.github.com/repos/apache/ratis/issues/554","id":986030695,"node_id":"IC_kwDOBMxbGc46xaJn","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-04T13:53:16Z","updated_at":"2021-12-04T13:53:16Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and committing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/986030695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/987860851","html_url":"https://github.com/apache/ratis/pull/557#issuecomment-987860851","issue_url":"https://api.github.com/repos/apache/ratis/issues/557","id":987860851,"node_id":"IC_kwDOBMxbGc464Y9z","user":{"login":"captainzmc","id":13825159,"node_id":"MDQ6VXNlcjEzODI1MTU5","avatar_url":"https://avatars.githubusercontent.com/u/13825159?v=4","gravatar_id":"","url":"https://api.github.com/users/captainzmc","html_url":"https://github.com/captainzmc","followers_url":"https://api.github.com/users/captainzmc/followers","following_url":"https://api.github.com/users/captainzmc/following{/other_user}","gists_url":"https://api.github.com/users/captainzmc/gists{/gist_id}","starred_url":"https://api.github.com/users/captainzmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captainzmc/subscriptions","organizations_url":"https://api.github.com/users/captainzmc/orgs","repos_url":"https://api.github.com/users/captainzmc/repos","events_url":"https://api.github.com/users/captainzmc/events{/privacy}","received_events_url":"https://api.github.com/users/captainzmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-07T12:01:20Z","updated_at":"2021-12-07T12:01:20Z","author_association":"MEMBER","body":"@szetszwo Could you help review this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/987860851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/988601531","html_url":"https://github.com/apache/ratis/pull/556#issuecomment-988601531","issue_url":"https://api.github.com/repos/apache/ratis/issues/556","id":988601531,"node_id":"IC_kwDOBMxbGc467Ny7","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T08:30:31Z","updated_at":"2021-12-08T08:30:31Z","author_association":"CONTRIBUTOR","body":"@LiuJinghao , there is a (false) findbugs warning RV_NEGATING_RESULT_OF_COMPARETO.  Let's change the code as below to avoid the warning.\r\n\r\n```\r\n//TimeDuration.compareTo\r\n      return Integer.compare(0, that.compareTo(this));\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/988601531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/988649779","html_url":"https://github.com/apache/ratis/pull/556#issuecomment-988649779","issue_url":"https://api.github.com/repos/apache/ratis/issues/556","id":988649779,"node_id":"IC_kwDOBMxbGc467Zkz","user":{"login":"LiuJinghao","id":8622601,"node_id":"MDQ6VXNlcjg2MjI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8622601?v=4","gravatar_id":"","url":"https://api.github.com/users/LiuJinghao","html_url":"https://github.com/LiuJinghao","followers_url":"https://api.github.com/users/LiuJinghao/followers","following_url":"https://api.github.com/users/LiuJinghao/following{/other_user}","gists_url":"https://api.github.com/users/LiuJinghao/gists{/gist_id}","starred_url":"https://api.github.com/users/LiuJinghao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LiuJinghao/subscriptions","organizations_url":"https://api.github.com/users/LiuJinghao/orgs","repos_url":"https://api.github.com/users/LiuJinghao/repos","events_url":"https://api.github.com/users/LiuJinghao/events{/privacy}","received_events_url":"https://api.github.com/users/LiuJinghao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-08T09:38:05Z","updated_at":"2021-12-08T09:38:05Z","author_association":"CONTRIBUTOR","body":"@szetszwo   Iâ€˜ve fixed it and force pushed, please approval the workflow.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/988649779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/989487954","html_url":"https://github.com/apache/ratis/pull/552#issuecomment-989487954","issue_url":"https://api.github.com/repos/apache/ratis/issues/552","id":989487954,"node_id":"IC_kwDOBMxbGc46-mNS","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T03:59:47Z","updated_at":"2021-12-09T03:59:47Z","author_association":"CONTRIBUTOR","body":"I reworked the code to get exceptions without having to wait sync, which was low performance. Added whenComplate method to handle exceptions and send exception messages\r\n\r\n@szetszwo Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/989487954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/989665984","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-989665984","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":989665984,"node_id":"IC_kwDOBMxbGc46_RrA","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T09:26:23Z","updated_at":"2021-12-09T09:26:23Z","author_association":"CONTRIBUTOR","body":"@szetszwo Actually, I am not sure whether we should make a specific check for each getPriority() use. Right now, I just prevent the NPE from the source. Currently, conf.getPeer().getPriority() only exists in leader election and leader state.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/989665984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/989779930","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-989779930","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":989779930,"node_id":"IC_kwDOBMxbGc46_tfa","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-09T11:48:40Z","updated_at":"2021-12-09T11:48:40Z","author_association":"CONTRIBUTOR","body":"> ..., I am not sure whether we should make a specific check for each getPriority() use. \r\n\r\nThat's a good point.  We should check.  I just have walked through the code.  There are two other cases needed to be fixed:\r\n```\r\ndiff --git a/ratis-server/src/main/java/org/apache/ratis/server/impl/LeaderStateImpl.java b/ratis-server/src/main/java/org/apache/ratis/server/impl/LeaderStateImpl.java\r\nindex 03850114..d1413040 100644\r\n--- a/ratis-server/src/main/java/org/apache/ratis/server/impl/LeaderStateImpl.java\r\n+++ b/ratis-server/src/main/java/org/apache/ratis/server/impl/LeaderStateImpl.java\r\n@@ -916,13 +916,13 @@ class LeaderStateImpl implements LeaderState {\r\n \r\n     for (LogAppender logAppender : senders.getSenders()) {\r\n       FollowerInfo followerInfo = logAppender.getFollower();\r\n-      RaftPeerId followerID = followerInfo.getPeer().getId();\r\n-      int followerPriority = conf.getPeer(followerID).getPriority();\r\n-\r\n+      final RaftPeer follower = followerInfo.getPeer();\r\n+      final int followerPriority = follower.getPriority();\r\n       if (followerPriority <= leaderPriority) {\r\n         continue;\r\n       }\r\n \r\n+      final RaftPeerId followerID = follower.getId();\r\n       final TermIndex leaderLastEntry = server.getState().getLastEntry();\r\n       if (leaderLastEntry == null) {\r\n         LOG.info(\"{} send StartLeaderElectionRequest to follower:{} on term:{} because follower's priority:{} \" +\r\ndiff --git a/ratis-server/src/main/java/org/apache/ratis/server/impl/VoteContext.java b/ratis-server/src/main/java/org/apache/ratis/server/impl/VoteContext.java\r\nindex 1ef721aa..fde198fe 100644\r\n--- a/ratis-server/src/main/java/org/apache/ratis/server/impl/VoteContext.java\r\n+++ b/ratis-server/src/main/java/org/apache/ratis/server/impl/VoteContext.java\r\n@@ -144,7 +144,11 @@ class VoteContext {\r\n     }\r\n \r\n     // Check priority\r\n-    final int priority = impl.getRaftConf().getPeer(impl.getId()).getPriority();\r\n+    final RaftPeer peer = conf.getPeer(impl.getId());\r\n+    if (peer == null) {\r\n+      return reject(\"our server \" + impl.getId() + \" is not in the conf\");\r\n+    }\r\n+    final int priority = peer.getPriority();\r\n     if (priority <= candidate.getPriority()) {\r\n       return log(true, \"our priority \" + priority + \" <= candidate's priority \" + candidate.getPriority());\r\n     } else {\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/989779930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990563957","html_url":"https://github.com/apache/ratis/pull/561#issuecomment-990563957","issue_url":"https://api.github.com/repos/apache/ratis/issues/561","id":990563957,"node_id":"IC_kwDOBMxbGc47Cs51","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T02:57:12Z","updated_at":"2021-12-10T02:58:20Z","author_association":"CONTRIBUTOR","body":"With this patch, the leader side heartbeat latency is very close to follower side heartbeat process latency. \r\n\r\nSee the diagrams in JIRA.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990563957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990567103","html_url":"https://github.com/apache/ratis/pull/521#issuecomment-990567103","issue_url":"https://api.github.com/repos/apache/ratis/issues/521","id":990567103,"node_id":"IC_kwDOBMxbGc47Ctq_","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T03:02:24Z","updated_at":"2021-12-10T03:02:24Z","author_association":"CONTRIBUTOR","body":"@szetszwo ,   I submitted a new JIRA RATIS-1465 for this issue.  ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990567103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990660696","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-990660696","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":990660696,"node_id":"IC_kwDOBMxbGc47DEhY","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T06:45:17Z","updated_at":"2021-12-10T06:45:17Z","author_association":"CONTRIBUTOR","body":"> The conf may be changed later on. Therefore, let's don't check it here and check null in LeaderElection.getHigherPriorityPeers(..) as below.\r\n\r\nThe check here in the getHigherPriorityPeers is not enough. The possible case I tested is that bootstrapped follower changes role from follower to candidate and start leader election, as it has an empty conf, it will become leader directly due to ```if (others.isEmpty()) { r = new ResultAndTerm(Result.PASSED, electionTerm);```. Once it becomes another leader, it won't receive any requests from the original leader as the term is increased. Meanwhile, the original leader stuck in sending appendEntries to 'follower'.\r\n\r\nI sightly changed the check place. PTAL\r\n@szetszwo \r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990660696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990683637","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-990683637","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":990683637,"node_id":"IC_kwDOBMxbGc47DKH1","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T07:32:13Z","updated_at":"2021-12-10T07:32:13Z","author_association":"CONTRIBUTOR","body":"@szetszwo hi, I tried to implement takesnapshot on the server side, can you help review the code, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990683637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990707030","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-990707030","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":990707030,"node_id":"IC_kwDOBMxbGc47DP1W","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T07:48:11Z","updated_at":"2021-12-10T07:48:11Z","author_association":"CONTRIBUTOR","body":">...,  as it has an empty conf ...\r\n\r\nThis is an invalid test case since the conf (i.e. the group) is incorrect in the beginning.  We must either set the group correct before startup or use AdminApi.setConfiguration to change the conf after startup.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990707030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990711510","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-990711510","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":990711510,"node_id":"IC_kwDOBMxbGc47DQ7W","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T07:55:57Z","updated_at":"2021-12-10T07:55:57Z","author_association":"CONTRIBUTOR","body":"> > ...,  as it has an empty conf ...\r\n> \r\n> This is an invalid test case since the conf (i.e. the group) is incorrect in the beginning. We must either set the group correct before startup or use AdminApi.setConfiguration to change the conf after startup.\r\n\r\nThe bootstrapped follower could start with empty conf and set conf through leader's appendEntries request or Installsnapshot request. Somehow caused election timeout would let this follower start leader with empty conf.\r\n@szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990711510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990766482","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-990766482","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":990766482,"node_id":"IC_kwDOBMxbGc47DeWS","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T09:20:52Z","updated_at":"2021-12-10T09:21:10Z","author_association":"CONTRIBUTOR","body":"Thanks for all the comments above. I have fixed all. @szetszwo \r\n\r\nWith ```NOT_IN_CONF``` check added in ```submitRequestAndWaitResult```, RaftReconfigurationBaseTest would have some UT failed.  I checked it and found it clashes with PRE_VOTE and thus added the phase check. \r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990766482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990879006","html_url":"https://github.com/apache/ratis/pull/506#issuecomment-990879006","issue_url":"https://api.github.com/repos/apache/ratis/issues/506","id":990879006,"node_id":"IC_kwDOBMxbGc47D50e","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T11:10:44Z","updated_at":"2021-12-10T11:10:44Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo  for the code review. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/990879006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991006870","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-991006870","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":991006870,"node_id":"IC_kwDOBMxbGc47EZCW","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T14:13:04Z","updated_at":"2021-12-10T14:13:04Z","author_association":"CONTRIBUTOR","body":"@Xushaohong , thanks for the update.  \r\n\r\nTestLeaderElectionWithNetty.testTransferLeader failed.  I also can reproduce it locally.  Could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991006870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991059990","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-991059990","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":991059990,"node_id":"IC_kwDOBMxbGc47EmAW","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T15:21:27Z","updated_at":"2021-12-10T15:21:27Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks for the update.  The change is quite big and hard to be reviewed.  Could you create another JIRA for the server only change?  Then, move the server code change to a new pull request.  We should also add new tests (just local call to the server methods).\r\n\r\nThis JIRA and pull request can keep the proto and API changes.  Then, modify the tests to use RPC.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991059990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991089007","html_url":"https://github.com/apache/ratis/pull/561#issuecomment-991089007","issue_url":"https://api.github.com/repos/apache/ratis/issues/561","id":991089007,"node_id":"IC_kwDOBMxbGc47EtFv","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T15:57:48Z","updated_at":"2021-12-10T15:57:48Z","author_association":"CONTRIBUTOR","body":"@ChenSammi , there are quite a few tests failures.  Please take a looks.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991089007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991101596","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-991101596","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":991101596,"node_id":"IC_kwDOBMxbGc47EwKc","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T16:12:41Z","updated_at":"2021-12-10T16:12:41Z","author_association":"CONTRIBUTOR","body":"will do","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/991101596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992030398","html_url":"https://github.com/apache/ratis/pull/562#issuecomment-992030398","issue_url":"https://api.github.com/repos/apache/ratis/issues/562","id":992030398,"node_id":"IC_kwDOBMxbGc47IS6-","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T01:30:26Z","updated_at":"2021-12-13T01:30:26Z","author_association":"CONTRIBUTOR","body":"> Should we also remove the log4j-related info below?\r\n\r\nLet's keep the license in supplemental-models.xml, which includes licenses for transitive dependencies.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992030398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992032068","html_url":"https://github.com/apache/ratis/pull/562#issuecomment-992032068","issue_url":"https://api.github.com/repos/apache/ratis/issues/562","id":992032068,"node_id":"IC_kwDOBMxbGc47ITVE","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T01:34:39Z","updated_at":"2021-12-13T01:34:39Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for reviewing this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992032068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992126693","html_url":"https://github.com/apache/ratis/pull/561#issuecomment-992126693","issue_url":"https://api.github.com/repos/apache/ratis/issues/561","id":992126693,"node_id":"IC_kwDOBMxbGc47Iqbl","user":{"login":"ChenSammi","id":19790142,"node_id":"MDQ6VXNlcjE5NzkwMTQy","avatar_url":"https://avatars.githubusercontent.com/u/19790142?v=4","gravatar_id":"","url":"https://api.github.com/users/ChenSammi","html_url":"https://github.com/ChenSammi","followers_url":"https://api.github.com/users/ChenSammi/followers","following_url":"https://api.github.com/users/ChenSammi/following{/other_user}","gists_url":"https://api.github.com/users/ChenSammi/gists{/gist_id}","starred_url":"https://api.github.com/users/ChenSammi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChenSammi/subscriptions","organizations_url":"https://api.github.com/users/ChenSammi/orgs","repos_url":"https://api.github.com/users/ChenSammi/repos","events_url":"https://api.github.com/users/ChenSammi/events{/privacy}","received_events_url":"https://api.github.com/users/ChenSammi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T05:36:42Z","updated_at":"2021-12-13T05:36:42Z","author_association":"CONTRIBUTOR","body":"> @ChenSammi , there are quite a few tests failures. Please take a looks. Thanks.\r\n\r\nSure, I will take a look at the failed tests.  ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992126693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992163704","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-992163704","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":992163704,"node_id":"IC_kwDOBMxbGc47Izd4","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T06:58:55Z","updated_at":"2021-12-13T06:58:55Z","author_association":"CONTRIBUTOR","body":"> @Xushaohong , thanks for the update.\r\n> \r\n> TestLeaderElectionWithNetty.testTransferLeader failed. I also can reproduce it locally. Could you take a look?\r\n\r\nCurrently, the setConf request would not update the ```FollowerInfo``` in ```LogAppenderBase```, so we have to get the latest followerInfo from conf like the previous version.  I have reverted it back and added an NPE check.\r\n@szetszwo  Could you help confirm it? \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992163704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992169519","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-992169519","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":992169519,"node_id":"IC_kwDOBMxbGc47I04v","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T07:08:56Z","updated_at":"2021-12-13T07:08:56Z","author_association":"CONTRIBUTOR","body":"> With NOT_IN_CONF check added in submitRequestAndWaitResult, RaftReconfigurationBaseTest would have some UT failed. I checked it and found it clashes with PRE_VOTE and thus added the phase check.\r\n\r\nWe should fix the RaftReconfigurationBaseTest but not having the phase check.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/992169519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993230200","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-993230200","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":993230200,"node_id":"IC_kwDOBMxbGc47M314","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T07:19:46Z","updated_at":"2021-12-14T07:19:46Z","author_association":"CONTRIBUTOR","body":"@szetszwo hi, since the implementation code on the server side depends on SnapshotRequest and some proto-related code, can we review and merge the proto-related commit first, and then complete the server-side modification, otherwise there will be many errors","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993230200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993244561","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-993244561","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":993244561,"node_id":"IC_kwDOBMxbGc47M7WR","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T07:43:11Z","updated_at":"2021-12-14T07:43:11Z","author_association":"CONTRIBUTOR","body":"@codings-dan , we may use the GroupManagementRequest as an example for the snapshot request:\r\n- SnapshotRequest should be similar to GroupManagementRequest.\r\n- add a takeSnapshotAsync(..) method in RaftServerProxy for taking a new snapshot; see RaftServerProxy.groupAddAsync(..).\r\n- add new unit tests to call RaftServerProxy.takeSnapshotAsync(..) directly. \r\n\r\nThe items above are the works for server change.\r\n\r\nIn the next JIRA, we will add RaftServerProxy.snapshotManagementAsync(SnapshotRequest) and also SnapshotRequestProto.  Then, we can change the unit tests to call from the client.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993244561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993473838","html_url":"https://github.com/apache/ratis/pull/1#issuecomment-993473838","issue_url":"https://api.github.com/repos/apache/ratis/issues/1","id":993473838,"node_id":"IC_kwDOBMxbGc47NzUu","user":{"login":"LiuJinghao","id":8622601,"node_id":"MDQ6VXNlcjg2MjI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/8622601?v=4","gravatar_id":"","url":"https://api.github.com/users/LiuJinghao","html_url":"https://github.com/LiuJinghao","followers_url":"https://api.github.com/users/LiuJinghao/followers","following_url":"https://api.github.com/users/LiuJinghao/following{/other_user}","gists_url":"https://api.github.com/users/LiuJinghao/gists{/gist_id}","starred_url":"https://api.github.com/users/LiuJinghao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LiuJinghao/subscriptions","organizations_url":"https://api.github.com/users/LiuJinghao/orgs","repos_url":"https://api.github.com/users/LiuJinghao/repos","events_url":"https://api.github.com/users/LiuJinghao/events{/privacy}","received_events_url":"https://api.github.com/users/LiuJinghao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T12:05:31Z","updated_at":"2021-12-14T12:05:31Z","author_association":"CONTRIBUTOR","body":"Actually, using Optional is a good practice.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993473838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993525839","html_url":"https://github.com/apache/ratis/pull/563#issuecomment-993525839","issue_url":"https://api.github.com/repos/apache/ratis/issues/563","id":993525839,"node_id":"IC_kwDOBMxbGc47OABP","user":{"login":"captainzmc","id":13825159,"node_id":"MDQ6VXNlcjEzODI1MTU5","avatar_url":"https://avatars.githubusercontent.com/u/13825159?v=4","gravatar_id":"","url":"https://api.github.com/users/captainzmc","html_url":"https://github.com/captainzmc","followers_url":"https://api.github.com/users/captainzmc/followers","following_url":"https://api.github.com/users/captainzmc/following{/other_user}","gists_url":"https://api.github.com/users/captainzmc/gists{/gist_id}","starred_url":"https://api.github.com/users/captainzmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captainzmc/subscriptions","organizations_url":"https://api.github.com/users/captainzmc/orgs","repos_url":"https://api.github.com/users/captainzmc/repos","events_url":"https://api.github.com/users/captainzmc/events{/privacy}","received_events_url":"https://api.github.com/users/captainzmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T13:12:38Z","updated_at":"2021-12-14T13:12:38Z","author_association":"MEMBER","body":"Thanks @guohao-rosicky for your contribution.\r\n I did encounter the problem of Ozone Streaming client hung in the test. Although we have recently fixed many abnormal unhandled reply issues, but the client hung still will happen in long running test. \r\nThis PR can completely solve this problem.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993525839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993631125","html_url":"https://github.com/apache/ratis/pull/563#issuecomment-993631125","issue_url":"https://api.github.com/repos/apache/ratis/issues/563","id":993631125,"node_id":"IC_kwDOBMxbGc47OZuV","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T15:01:34Z","updated_at":"2021-12-14T15:01:34Z","author_association":"CONTRIBUTOR","body":"@szetszwo Could you help review this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/993631125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994412292","html_url":"https://github.com/apache/ratis/pull/564#issuecomment-994412292","issue_url":"https://api.github.com/repos/apache/ratis/issues/564","id":994412292,"node_id":"IC_kwDOBMxbGc47RYcE","user":{"login":"ferhui","id":2336003,"node_id":"MDQ6VXNlcjIzMzYwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2336003?v=4","gravatar_id":"","url":"https://api.github.com/users/ferhui","html_url":"https://github.com/ferhui","followers_url":"https://api.github.com/users/ferhui/followers","following_url":"https://api.github.com/users/ferhui/following{/other_user}","gists_url":"https://api.github.com/users/ferhui/gists{/gist_id}","starred_url":"https://api.github.com/users/ferhui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferhui/subscriptions","organizations_url":"https://api.github.com/users/ferhui/orgs","repos_url":"https://api.github.com/users/ferhui/repos","events_url":"https://api.github.com/users/ferhui/events{/privacy}","received_events_url":"https://api.github.com/users/ferhui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T07:21:45Z","updated_at":"2021-12-15T07:21:45Z","author_association":"CONTRIBUTOR","body":"@maobaolong @szetszwo Can you please take a look? Thanks","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994412292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994413235","html_url":"https://github.com/apache/ratis/pull/564#issuecomment-994413235","issue_url":"https://api.github.com/repos/apache/ratis/issues/564","id":994413235,"node_id":"IC_kwDOBMxbGc47RYqz","user":{"login":"ferhui","id":2336003,"node_id":"MDQ6VXNlcjIzMzYwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2336003?v=4","gravatar_id":"","url":"https://api.github.com/users/ferhui","html_url":"https://github.com/ferhui","followers_url":"https://api.github.com/users/ferhui/followers","following_url":"https://api.github.com/users/ferhui/following{/other_user}","gists_url":"https://api.github.com/users/ferhui/gists{/gist_id}","starred_url":"https://api.github.com/users/ferhui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferhui/subscriptions","organizations_url":"https://api.github.com/users/ferhui/orgs","repos_url":"https://api.github.com/users/ferhui/repos","events_url":"https://api.github.com/users/ferhui/events{/privacy}","received_events_url":"https://api.github.com/users/ferhui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T07:22:59Z","updated_at":"2021-12-15T07:22:59Z","author_association":"CONTRIBUTOR","body":"Here is the testing result.\r\n```\r\nbin/ratis sh group list -peers 'x01:9872,x02:9872,x03:9872' -peerId 'om1'\r\nThe peerId om1 (server x01:9872) is in 1 groups, and the groupIds is: [group-20E477FC5582]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994413235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994595809","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-994595809","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":994595809,"node_id":"IC_kwDOBMxbGc47SFPh","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T09:54:03Z","updated_at":"2021-12-15T09:54:03Z","author_association":"CONTRIBUTOR","body":"I reviewed the failure UT of testRemovePeers. The fault is due to after removing the peers out of the conf, the division which should quit the raft group will become a candidate and start the election. During the prevote process, originally it will send out the request and then the other peers should send back ```should shutdown```  to turn this server down. But for our case, we just return ```new ResultAndTerm(Result.NOT_IN_CONF)```, and won't go to the SHUTDOWN branch.\r\n@szetszwo Shall we move up the line ```case NOT_IN_CONF:``` above       ``` case SHUTDOWN ``` or still use my original phase check? ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994595809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994651963","html_url":"https://github.com/apache/ratis/pull/564#issuecomment-994651963","issue_url":"https://api.github.com/repos/apache/ratis/issues/564","id":994651963,"node_id":"IC_kwDOBMxbGc47SS87","user":{"login":"ferhui","id":2336003,"node_id":"MDQ6VXNlcjIzMzYwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2336003?v=4","gravatar_id":"","url":"https://api.github.com/users/ferhui","html_url":"https://github.com/ferhui","followers_url":"https://api.github.com/users/ferhui/followers","following_url":"https://api.github.com/users/ferhui/following{/other_user}","gists_url":"https://api.github.com/users/ferhui/gists{/gist_id}","starred_url":"https://api.github.com/users/ferhui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferhui/subscriptions","organizations_url":"https://api.github.com/users/ferhui/orgs","repos_url":"https://api.github.com/users/ferhui/repos","events_url":"https://api.github.com/users/ferhui/events{/privacy}","received_events_url":"https://api.github.com/users/ferhui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T10:35:41Z","updated_at":"2021-12-15T10:35:41Z","author_association":"CONTRIBUTOR","body":"@maobaolong Thanks for review! Updated","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994651963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994683262","html_url":"https://github.com/apache/ratis/pull/565#issuecomment-994683262","issue_url":"https://api.github.com/repos/apache/ratis/issues/565","id":994683262,"node_id":"IC_kwDOBMxbGc47Sal-","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T11:07:22Z","updated_at":"2021-12-15T11:07:22Z","author_association":"CONTRIBUTOR","body":"@ferhui , let's have some discussion before making the change.  Please see comments on the JIRA.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994683262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994685219","html_url":"https://github.com/apache/ratis/pull/560#issuecomment-994685219","issue_url":"https://api.github.com/repos/apache/ratis/issues/560","id":994685219,"node_id":"IC_kwDOBMxbGc47SbEj","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-15T11:09:37Z","updated_at":"2021-12-15T11:09:37Z","author_association":"CONTRIBUTOR","body":"> ... Shall we move up the line case NOT_IN_CONF: above case SHUTDOWN or still use my original phase check?\r\n\r\nThis is a good idea.  Let's shutdown the server when it is not in conf.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/994685219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/995887654","html_url":"https://github.com/apache/ratis/pull/567#issuecomment-995887654","issue_url":"https://api.github.com/repos/apache/ratis/issues/567","id":995887654,"node_id":"IC_kwDOBMxbGc47XAom","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-16T14:49:58Z","updated_at":"2021-12-16T14:49:58Z","author_association":"CONTRIBUTOR","body":"@szetszwo I implemented the code on the server side and wrote a UT, can you help review the code, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/995887654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/996362814","html_url":"https://github.com/apache/ratis/pull/564#issuecomment-996362814","issue_url":"https://api.github.com/repos/apache/ratis/issues/564","id":996362814,"node_id":"IC_kwDOBMxbGc47Y0o-","user":{"login":"ferhui","id":2336003,"node_id":"MDQ6VXNlcjIzMzYwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/2336003?v=4","gravatar_id":"","url":"https://api.github.com/users/ferhui","html_url":"https://github.com/ferhui","followers_url":"https://api.github.com/users/ferhui/followers","following_url":"https://api.github.com/users/ferhui/following{/other_user}","gists_url":"https://api.github.com/users/ferhui/gists{/gist_id}","starred_url":"https://api.github.com/users/ferhui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ferhui/subscriptions","organizations_url":"https://api.github.com/users/ferhui/orgs","repos_url":"https://api.github.com/users/ferhui/repos","events_url":"https://api.github.com/users/ferhui/events{/privacy}","received_events_url":"https://api.github.com/users/ferhui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-17T01:50:43Z","updated_at":"2021-12-17T01:50:43Z","author_association":"CONTRIBUTOR","body":"@szetszwo @maobaolong Thanks for your review!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/996362814/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/997703133","html_url":"https://github.com/apache/ratis/pull/567#issuecomment-997703133","issue_url":"https://api.github.com/repos/apache/ratis/issues/567","id":997703133,"node_id":"IC_kwDOBMxbGc47d73d","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-20T08:28:27Z","updated_at":"2021-12-20T08:28:27Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing the code, I change the code according to the comment you left, PTAL again. In addition, you almost helped refactor the code logic, I benefited a lot, thanks again.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/997703133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/997762296","html_url":"https://github.com/apache/ratis/pull/567#issuecomment-997762296","issue_url":"https://api.github.com/repos/apache/ratis/issues/567","id":997762296,"node_id":"IC_kwDOBMxbGc47eKT4","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-20T09:46:18Z","updated_at":"2021-12-20T09:46:18Z","author_association":"CONTRIBUTOR","body":"The ci test seems to be unstable, and the error report has nothing to do with this code change, PTAL, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/997762296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998401466","html_url":"https://github.com/apache/ratis/pull/567#issuecomment-998401466","issue_url":"https://api.github.com/repos/apache/ratis/issues/567","id":998401466,"node_id":"IC_kwDOBMxbGc47gmW6","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T01:46:25Z","updated_at":"2021-12-21T01:46:59Z","author_association":"CONTRIBUTOR","body":"@szetszwo After this patch merge, should we do this next:\r\n                   1. Add more unit tests\r\n                   2. Add rpc and proto\r\n                   3. Add shell command\r\n                  Is there anything else?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998401466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]