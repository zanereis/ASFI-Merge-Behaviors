[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974212746","html_url":"https://github.com/apache/pinot/pull/7787#issuecomment-974212746","issue_url":"https://api.github.com/repos/apache/pinot/issues/7787","id":974212746,"node_id":"IC_kwDOATCU_c46EU6K","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T16:20:03Z","updated_at":"2021-11-19T16:20:03Z","author_association":"CONTRIBUTOR","body":"closing. this is not a valid working solution","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974212746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974263609","html_url":"https://github.com/apache/pinot/pull/7802#issuecomment-974263609","issue_url":"https://api.github.com/repos/apache/pinot/issues/7802","id":974263609,"node_id":"IC_kwDOATCU_c46EhU5","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T17:25:55Z","updated_at":"2021-11-19T17:36:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7802](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f383401) into [master](https://codecov.io/gh/apache/pinot/commit/ab01ac3b94fc13f404357df4e1ccd9fa6cdcb2d9?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ab01ac3) will **decrease** coverage by `6.51%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head f383401 differs from pull request most recent head 7a3fcf3. Consider uploading reports for the commit 7a3fcf3 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7802/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7802      +/-   ##\n============================================\n- Coverage     71.68%   65.16%   -6.52%     \n- Complexity     4072     4076       +4     \n============================================\n  Files          1578     1533      -45     \n  Lines         80784    78916    -1868     \n  Branches      12001    11799     -202     \n============================================\n- Hits          57906    51429    -6477     \n- Misses        18985    23824    +4839     \n+ Partials       3893     3663     -230     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `68.62% <100.00%> (+<0.01%)` | :arrow_up: |\n| unittests2 | `14.58% <0.00%> (+0.02%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ion/function/DistinctCountAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9EaXN0aW5jdENvdW50QWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `32.00% <100.00%> (+0.60%)` | :arrow_up: |\n| [...n/function/DistinctCountMVAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9EaXN0aW5jdENvdW50TVZBZ2dyZWdhdGlvbkZ1bmN0aW9uLmphdmE=) | `16.54% <100.00%> (ø)` | |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/core/data/manager/realtime/TimerService.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvVGltZXJTZXJ2aWNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...not/common/exception/HttpErrorStatusException.java](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZXhjZXB0aW9uL0h0dHBFcnJvclN0YXR1c0V4Y2VwdGlvbi5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [359 more](https://codecov.io/gh/apache/pinot/pull/7802/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ab01ac3...7a3fcf3](https://codecov.io/gh/apache/pinot/pull/7802?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974263609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974479366","html_url":"https://github.com/apache/pinot/pull/7724#issuecomment-974479366","issue_url":"https://api.github.com/repos/apache/pinot/issues/7724","id":974479366,"node_id":"IC_kwDOATCU_c46FWAG","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T21:18:53Z","updated_at":"2021-11-19T21:18:53Z","author_association":"MEMBER","body":" have we measured the impact of measuring these numbers? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974479366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974493791","html_url":"https://github.com/apache/pinot/pull/7724#issuecomment-974493791","issue_url":"https://api.github.com/repos/apache/pinot/issues/7724","id":974493791,"node_id":"IC_kwDOATCU_c46FZhf","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T21:47:15Z","updated_at":"2021-11-19T21:47:15Z","author_association":"CONTRIBUTOR","body":"@kishoreg \r\n> have we measured the impact of measuring these numbers?\r\n\r\nWe benchmarked, JVM have the stats for each thread, this measuring just retrieve the number from JVM, so the overhead is negligible. \r\n\r\nIn addition, the measuring is disabled by default: \r\n\r\nhttps://github.com/apache/pinot/blob/6611ff82f46ea837e6bd8edefd46ccc16d4e2002/pinot-spi/src/main/java/org/apache/pinot/spi/utils/CommonConstants.java#L404","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974493791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974510937","html_url":"https://github.com/apache/pinot/pull/7797#issuecomment-974510937","issue_url":"https://api.github.com/repos/apache/pinot/issues/7797","id":974510937,"node_id":"IC_kwDOATCU_c46FdtZ","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:20:49Z","updated_at":"2021-11-19T22:24:53Z","author_association":"CONTRIBUTOR","body":"Nice. When we had added support for ZSTD and LZ4 compression types in https://github.com/apache/pinot/issues/6804, our perf testing also had similar results. \r\n\r\nLZ4 gives nearly same (and even better sometimes) the compression ratio compared to SNAPPY and the time to compress is much faster. \r\n\r\nZSTD on the other hand as highest compression ratio (from our tests) but compression/decompression time was higher as well\r\n\r\nHere are the results for reference (I think these were addd to JMH benchmarks as well) https://docs.google.com/document/d/1ie4JmVofk2o6ryCX7T4aD7GsRPKS651mroXhDk41wys/edit","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974510937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974511601","html_url":"https://github.com/apache/pinot/issues/7795#issuecomment-974511601","issue_url":"https://api.github.com/repos/apache/pinot/issues/7795","id":974511601,"node_id":"IC_kwDOATCU_c46Fd3x","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:22:11Z","updated_at":"2021-11-19T22:22:11Z","author_association":"CONTRIBUTOR","body":"+1\r\nLinking related issue - https://github.com/apache/pinot/issues/6804","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974511601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974513082","html_url":"https://github.com/apache/pinot/pull/7724#issuecomment-974513082","issue_url":"https://api.github.com/repos/apache/pinot/issues/7724","id":974513082,"node_id":"IC_kwDOATCU_c46FeO6","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:25:18Z","updated_at":"2021-11-19T22:25:18Z","author_association":"MEMBER","body":"> JVM have the stats for each thread, this measuring just retrieve the number from JVM, so the overhead is negligible.\r\n\r\nThe JVM gets the data from a clock - it delegates to clock_gettime(CLOCK_THREAD_CPUTIME_ID). Whether this call is fast or slow depends on whether the clock CLOCK_THREAD_CPUTIME_ID is in vDSO or not (which prevents a syscall) and this is platform dependent. On some platforms each call can take hundreds of nanoseconds or more, so it’s important to measure this for each deployment environment before enabling thread CPU time.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974513082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974519284","html_url":"https://github.com/apache/pinot/pull/7797#issuecomment-974519284","issue_url":"https://api.github.com/repos/apache/pinot/issues/7797","id":974519284,"node_id":"IC_kwDOATCU_c46Ffv0","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:40:11Z","updated_at":"2021-11-19T22:40:24Z","author_association":"MEMBER","body":"> LZ4 gives nearly same (and even better sometimes) the compression ratio compared to SNAPPY and the time to compress is much faster.\r\n\r\n> ZSTD on the other hand as highest compression ratio (from our tests) but compression/decompression time was higher as well\r\n\r\nThis is consistent with my experience, but it’s worth noting LZ4 has 16 compression levels which trade speed for ratio, and we default to level 1, whereas beyond level 3 a high compression mode is used - if ratio is really important the level could be exposed as a config parameter. But right now the motivation is faster decompression by default, rather than smaller file sizes.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974519284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974528042","html_url":"https://github.com/apache/pinot/pull/7801#issuecomment-974528042","issue_url":"https://api.github.com/repos/apache/pinot/issues/7801","id":974528042,"node_id":"IC_kwDOATCU_c46Fh4q","user":{"login":"mneedham","id":13220,"node_id":"MDQ6VXNlcjEzMjIw","avatar_url":"https://avatars.githubusercontent.com/u/13220?v=4","gravatar_id":"","url":"https://api.github.com/users/mneedham","html_url":"https://github.com/mneedham","followers_url":"https://api.github.com/users/mneedham/followers","following_url":"https://api.github.com/users/mneedham/following{/other_user}","gists_url":"https://api.github.com/users/mneedham/gists{/gist_id}","starred_url":"https://api.github.com/users/mneedham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mneedham/subscriptions","organizations_url":"https://api.github.com/users/mneedham/orgs","repos_url":"https://api.github.com/users/mneedham/repos","events_url":"https://api.github.com/users/mneedham/events{/privacy}","received_events_url":"https://api.github.com/users/mneedham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T23:02:56Z","updated_at":"2021-11-19T23:02:56Z","author_association":"CONTRIBUTOR","body":"Will close this, problem is addressed by https://github.com/apache/pinot/pull/7798","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974528042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974560335","html_url":"https://github.com/apache/pinot/issues/7786#issuecomment-974560335","issue_url":"https://api.github.com/repos/apache/pinot/issues/7786","id":974560335,"node_id":"IC_kwDOATCU_c46FpxP","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T00:47:12Z","updated_at":"2021-11-20T00:47:12Z","author_association":"CONTRIBUTOR","body":"Agree. We should provide a `DATE_TIME` data type which is similar to the `TIMESTAMP` data type but with timezone info embedded, then everything would work seamlessly.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974560335/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974570171","html_url":"https://github.com/apache/pinot/pull/7804#issuecomment-974570171","issue_url":"https://api.github.com/repos/apache/pinot/issues/7804","id":974570171,"node_id":"IC_kwDOATCU_c46FsK7","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T01:37:57Z","updated_at":"2021-12-10T05:47:04Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7804](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (94f6630) into [master](https://codecov.io/gh/apache/pinot/commit/c999a23caae3e3769e1729d56da4c5c0de594b31?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c999a23) will **increase** coverage by `6.27%`.\n> The diff coverage is `100.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7804/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7804      +/-   ##\n============================================\n+ Coverage     65.07%   71.35%   +6.27%     \n- Complexity     4082     4085       +3     \n============================================\n  Files          1538     1583      +45     \n  Lines         79993    81892    +1899     \n  Branches      12035    12244     +209     \n============================================\n+ Hits          52057    58434    +6377     \n+ Misses        24219    19490    -4729     \n- Partials       3717     3968     +251     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.18% <0.00%> (?)` | |\n| integration2 | `27.68% <0.00%> (?)` | |\n| unittests1 | `68.45% <100.00%> (-0.05%)` | :arrow_down: |\n| unittests2 | `14.45% <0.00%> (+0.04%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/pinot/segment/local/utils/SchemaUtils.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9TY2hlbWFVdGlscy5qYXZh) | `97.36% <100.00%> (+0.93%)` | :arrow_up: |\n| [...ache/pinot/spi/data/DateTimeFormatPatternSpec.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EYXRlVGltZUZvcm1hdFBhdHRlcm5TcGVjLmphdmE=) | `72.22% <100.00%> (+3.47%)` | :arrow_up: |\n| [.../org/apache/pinot/spi/data/DateTimeFormatSpec.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EYXRlVGltZUZvcm1hdFNwZWMuamF2YQ==) | `76.81% <100.00%> (ø)` | |\n| [...nt/local/startree/v2/store/StarTreeDataSource.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9zdG9yZS9TdGFyVHJlZURhdGFTb3VyY2UuamF2YQ==) | `40.00% <0.00%> (-13.34%)` | :arrow_down: |\n| [...ot/segment/local/startree/OffHeapStarTreeNode.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS9PZmZIZWFwU3RhclRyZWVOb2RlLmphdmE=) | `72.22% <0.00%> (-5.56%)` | :arrow_down: |\n| [...e/impl/forward/FixedByteMVMutableForwardIndex.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2ZvcndhcmQvRml4ZWRCeXRlTVZNdXRhYmxlRm9yd2FyZEluZGV4LmphdmE=) | `90.90% <0.00%> (-3.04%)` | :arrow_down: |\n| [.../pinot/core/query/scheduler/PriorityScheduler.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvUHJpb3JpdHlTY2hlZHVsZXIuamF2YQ==) | `80.82% <0.00%> (-2.74%)` | :arrow_down: |\n| [...cal/startree/v2/builder/BaseSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL0Jhc2VTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `88.28% <0.00%> (-0.91%)` | :arrow_down: |\n| [...server/starter/helix/HelixInstanceDataManager.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9IZWxpeEluc3RhbmNlRGF0YU1hbmFnZXIuamF2YQ==) | `80.47% <0.00%> (ø)` | |\n| [...t/server/starter/ServerQueriesDisabledTracker.java](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9TZXJ2ZXJRdWVyaWVzRGlzYWJsZWRUcmFja2VyLmphdmE=) | `86.36% <0.00%> (ø)` | |\n| ... and [362 more](https://codecov.io/gh/apache/pinot/pull/7804/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c999a23...94f6630](https://codecov.io/gh/apache/pinot/pull/7804?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974570171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974690551","html_url":"https://github.com/apache/pinot/issues/7806#issuecomment-974690551","issue_url":"https://api.github.com/repos/apache/pinot/issues/7806","id":974690551,"node_id":"IC_kwDOATCU_c46GJj3","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T18:19:19Z","updated_at":"2021-11-20T18:19:19Z","author_association":"CONTRIBUTOR","body":"Hi Ali,\nPlease checkout the Pinot docs at https://docs.pinot.apache.org/basics/data-import/pinot-stream-ingestion.\n\nIf you still have questions, please join the Apache Pinot community slack for faster and morr response.\n\nBest Regards \nMayank\n\n> On Nov 20, 2021, at 1:25 AM, Alireza Moosavi ***@***.***> wrote:\n> \n> ﻿\n> I want to create table based on avro format and I like to konw what should be set for:\n> stream.kafka.decoder.class.name\n> \n> Is there any link for different data stream format?\n> \n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n> Triage notifications on the go with GitHub Mobile for iOS or Android. \n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974690551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974759551","html_url":"https://github.com/apache/pinot/issues/7773#issuecomment-974759551","issue_url":"https://api.github.com/repos/apache/pinot/issues/7773","id":974759551,"node_id":"IC_kwDOATCU_c46GaZ_","user":{"login":"kautshukla","id":10418885,"node_id":"MDQ6VXNlcjEwNDE4ODg1","avatar_url":"https://avatars.githubusercontent.com/u/10418885?v=4","gravatar_id":"","url":"https://api.github.com/users/kautshukla","html_url":"https://github.com/kautshukla","followers_url":"https://api.github.com/users/kautshukla/followers","following_url":"https://api.github.com/users/kautshukla/following{/other_user}","gists_url":"https://api.github.com/users/kautshukla/gists{/gist_id}","starred_url":"https://api.github.com/users/kautshukla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kautshukla/subscriptions","organizations_url":"https://api.github.com/users/kautshukla/orgs","repos_url":"https://api.github.com/users/kautshukla/repos","events_url":"https://api.github.com/users/kautshukla/events{/privacy}","received_events_url":"https://api.github.com/users/kautshukla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T05:41:17Z","updated_at":"2021-11-21T05:41:17Z","author_association":"CONTRIBUTOR","body":"> \r\n@xiangfu0 : Already raised it. \r\n\r\nhttps://github.com/apache/pinot/pull/7774","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974759551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974820933","html_url":"https://github.com/apache/pinot/pull/7364#issuecomment-974820933","issue_url":"https://api.github.com/repos/apache/pinot/issues/7364","id":974820933,"node_id":"IC_kwDOATCU_c46GpZF","user":{"login":"galalen","id":16897043,"node_id":"MDQ6VXNlcjE2ODk3MDQz","avatar_url":"https://avatars.githubusercontent.com/u/16897043?v=4","gravatar_id":"","url":"https://api.github.com/users/galalen","html_url":"https://github.com/galalen","followers_url":"https://api.github.com/users/galalen/followers","following_url":"https://api.github.com/users/galalen/following{/other_user}","gists_url":"https://api.github.com/users/galalen/gists{/gist_id}","starred_url":"https://api.github.com/users/galalen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/galalen/subscriptions","organizations_url":"https://api.github.com/users/galalen/orgs","repos_url":"https://api.github.com/users/galalen/repos","events_url":"https://api.github.com/users/galalen/events{/privacy}","received_events_url":"https://api.github.com/users/galalen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T13:47:28Z","updated_at":"2021-11-21T13:47:28Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang can you check the PR now, I'll be updating tests coverage","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/974820933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975222609","html_url":"https://github.com/apache/pinot/pull/7724#issuecomment-975222609","issue_url":"https://api.github.com/repos/apache/pinot/issues/7724","id":975222609,"node_id":"IC_kwDOATCU_c46ILdR","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T08:02:45Z","updated_at":"2021-11-22T08:02:57Z","author_association":"CONTRIBUTOR","body":"@richardstartin \r\n> On some platforms each call can take hundreds of nanoseconds or more, so it’s important to measure this for each deployment environment before enabling thread CPU time.\r\n\r\nWhat do you suggest? How about let's add a simple benchmark in pinot-perf. And it's user's responsibility to run the benchmark on their platform and decide if enable the thread timer.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975222609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975771256","html_url":"https://github.com/apache/pinot/pull/7808#issuecomment-975771256","issue_url":"https://api.github.com/repos/apache/pinot/issues/7808","id":975771256,"node_id":"IC_kwDOATCU_c46KRZ4","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T17:46:56Z","updated_at":"2021-11-22T17:52:55Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7808](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8b9a3b0) into [master](https://codecov.io/gh/apache/pinot/commit/e44d2e46f2eaba5f75d789d92ce767fbee96feba?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e44d2e4) will **decrease** coverage by `6.50%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7808/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7808      +/-   ##\n============================================\n- Coverage     71.71%   65.21%   -6.51%     \n- Complexity     4079     4086       +7     \n============================================\n  Files          1578     1533      -45     \n  Lines         80784    78902    -1882     \n  Branches      12001    11799     -202     \n============================================\n- Hits          57935    51453    -6482     \n- Misses        18957    23787    +4830     \n+ Partials       3892     3662     -230     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `68.69% <ø> (+0.05%)` | :arrow_up: |\n| unittests2 | `14.57% <ø> (-0.04%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/core/data/manager/realtime/TimerService.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvVGltZXJTZXJ2aWNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...not/common/exception/HttpErrorStatusException.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZXhjZXB0aW9uL0h0dHBFcnJvclN0YXR1c0V4Y2VwdGlvbi5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/startree/plan/StarTreeDocIdSetPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlRG9jSWRTZXRQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ot/common/restlet/resources/TableMetadataInfo.java](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVzdGxldC9yZXNvdXJjZXMvVGFibGVNZXRhZGF0YUluZm8uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [361 more](https://codecov.io/gh/apache/pinot/pull/7808/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e44d2e4...8b9a3b0](https://codecov.io/gh/apache/pinot/pull/7808?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975771256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975795565","html_url":"https://github.com/apache/pinot/issues/7795#issuecomment-975795565","issue_url":"https://api.github.com/repos/apache/pinot/issues/7795","id":975795565,"node_id":"IC_kwDOATCU_c46KXVt","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:17:50Z","updated_at":"2021-11-22T18:17:50Z","author_association":"MEMBER","body":"Done in #7797 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975795565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975796507","html_url":"https://github.com/apache/pinot/issues/7616#issuecomment-975796507","issue_url":"https://api.github.com/repos/apache/pinot/issues/7616","id":975796507,"node_id":"IC_kwDOATCU_c46KXkb","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:19:02Z","updated_at":"2021-11-22T18:19:02Z","author_association":"MEMBER","body":"Implemented in #7661, can be enabled with field level raw index version config.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975796507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975797635","html_url":"https://github.com/apache/pinot/issues/7476#issuecomment-975797635","issue_url":"https://api.github.com/repos/apache/pinot/issues/7476","id":975797635,"node_id":"IC_kwDOATCU_c46KX2D","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:20:19Z","updated_at":"2021-11-22T18:20:19Z","author_association":"MEMBER","body":"@suddendust can you close this if the problem has been solved please?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975797635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975799144","html_url":"https://github.com/apache/pinot/issues/7437#issuecomment-975799144","issue_url":"https://api.github.com/repos/apache/pinot/issues/7437","id":975799144,"node_id":"IC_kwDOATCU_c46KYNo","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:22:06Z","updated_at":"2021-11-22T18:22:06Z","author_association":"MEMBER","body":"Should we make this the default in 0.10.0? We have already had reports that this improves query latency by integer multiples. @mayankshriv @Jackie-Jiang @kishoreg ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975799144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975801459","html_url":"https://github.com/apache/pinot/issues/7805#issuecomment-975801459","issue_url":"https://api.github.com/repos/apache/pinot/issues/7805","id":975801459,"node_id":"IC_kwDOATCU_c46KYxz","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:24:54Z","updated_at":"2021-11-22T18:24:54Z","author_association":"CONTRIBUTOR","body":"@apucher Can you please take a look and see if this is the correct fix?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975801459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975804404","html_url":"https://github.com/apache/pinot/issues/7805#issuecomment-975804404","issue_url":"https://api.github.com/repos/apache/pinot/issues/7805","id":975804404,"node_id":"IC_kwDOATCU_c46KZf0","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:28:30Z","updated_at":"2021-11-22T18:28:30Z","author_association":"CONTRIBUTOR","body":"we'll need this in every single starter. I'll look into it ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975804404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975816265","html_url":"https://github.com/apache/pinot/issues/7805#issuecomment-975816265","issue_url":"https://api.github.com/repos/apache/pinot/issues/7805","id":975816265,"node_id":"IC_kwDOATCU_c46KcZJ","user":{"login":"kautshukla","id":10418885,"node_id":"MDQ6VXNlcjEwNDE4ODg1","avatar_url":"https://avatars.githubusercontent.com/u/10418885?v=4","gravatar_id":"","url":"https://api.github.com/users/kautshukla","html_url":"https://github.com/kautshukla","followers_url":"https://api.github.com/users/kautshukla/followers","following_url":"https://api.github.com/users/kautshukla/following{/other_user}","gists_url":"https://api.github.com/users/kautshukla/gists{/gist_id}","starred_url":"https://api.github.com/users/kautshukla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kautshukla/subscriptions","organizations_url":"https://api.github.com/users/kautshukla/orgs","repos_url":"https://api.github.com/users/kautshukla/repos","events_url":"https://api.github.com/users/kautshukla/events{/privacy}","received_events_url":"https://api.github.com/users/kautshukla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:44:35Z","updated_at":"2021-11-22T18:44:35Z","author_association":"CONTRIBUTOR","body":"@apucher : It just that if auth token is enabled you has to enable security definition on swagger that's in a single place. Because you are expecting headers and resolving through request context but not passing it as didn't added a security context on ControllerAdminApiApplication.java class.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975816265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975822761","html_url":"https://github.com/apache/pinot/issues/7437#issuecomment-975822761","issue_url":"https://api.github.com/repos/apache/pinot/issues/7437","id":975822761,"node_id":"IC_kwDOATCU_c46Kd-p","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:53:58Z","updated_at":"2021-11-22T18:53:58Z","author_association":"CONTRIBUTOR","body":"@richardstartin Yes. I'd suggest making both this and the new raw forward format default in 0.10.0","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975822761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975948919","html_url":"https://github.com/apache/pinot/issues/7811#issuecomment-975948919","issue_url":"https://api.github.com/repos/apache/pinot/issues/7811","id":975948919,"node_id":"IC_kwDOATCU_c46K8x3","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T21:49:18Z","updated_at":"2021-11-22T21:49:18Z","author_association":"CONTRIBUTOR","body":"This issue should be fixed by #7397 under the condition `numUnavailableSegments != 0`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975948919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975952506","html_url":"https://github.com/apache/pinot/pull/7605#issuecomment-975952506","issue_url":"https://api.github.com/repos/apache/pinot/issues/7605","id":975952506,"node_id":"IC_kwDOATCU_c46K9p6","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T21:55:11Z","updated_at":"2021-11-22T21:55:11Z","author_association":"CONTRIBUTOR","body":"> @npawar If a segment is `CONSUMING` or `DONE`, this check is already being performed [here](https://github.com/apache/pinot/blob/1bd899c9ba45676d1ac25979274391431bdf5ce9/pinot-plugins/pinot-minion-tasks/pinot-minion-builtin-tasks/src/main/java/org/apache/pinot/plugin/minion/tasks/realtimetoofflinesegments/RealtimeToOfflineSegmentsTaskGenerator.java#L132), i.e., at the beginning of `RealtimeToOfflineSegment` task generation.\r\n> \r\n> [This check](https://github.com/apache/pinot/blob/1bd899c9ba45676d1ac25979274391431bdf5ce9/pinot-plugins/pinot-minion-tasks/pinot-minion-builtin-tasks/src/main/java/org/apache/pinot/plugin/minion/tasks/realtimetoofflinesegments/RealtimeToOfflineSegmentsTaskGenerator.java#L187) also ensures that a `CONSUMING` segment is not processed in `RealtimeToOfflineSegmentTask`.\r\n> \r\n> This PR only progresses the watermark if no segment is found for those segments marked as `DONE` in our processing window.\r\n> \r\n> The solution you are proposing will not work if the segments in the next window are still in `CONSUMING` state at time of progressing the watermark.\r\n> \r\n> Please let me know your thoughts on all of the above.\r\n\r\nI agree. Your logic seems to work. Please add a test case, I think it will not actually update zk so it may of be working as of yet.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975952506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975981762","html_url":"https://github.com/apache/pinot/issues/7390#issuecomment-975981762","issue_url":"https://api.github.com/repos/apache/pinot/issues/7390","id":975981762,"node_id":"IC_kwDOATCU_c46LEzC","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:43:26Z","updated_at":"2021-11-22T22:43:26Z","author_association":"CONTRIBUTOR","body":"Added #7813. Let's move the discussion there.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975981762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975982242","html_url":"https://github.com/apache/pinot/pull/7744#issuecomment-975982242","issue_url":"https://api.github.com/repos/apache/pinot/issues/7744","id":975982242,"node_id":"IC_kwDOATCU_c46LE6i","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:44:32Z","updated_at":"2021-11-22T22:44:32Z","author_association":"CONTRIBUTOR","body":"#7813 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975982242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975982290","html_url":"https://github.com/apache/pinot/pull/7662#issuecomment-975982290","issue_url":"https://api.github.com/repos/apache/pinot/issues/7662","id":975982290,"node_id":"IC_kwDOATCU_c46LE7S","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:44:38Z","updated_at":"2021-11-22T22:44:38Z","author_association":"CONTRIBUTOR","body":"#7813\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975982290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975982764","html_url":"https://github.com/apache/pinot/pull/7646#issuecomment-975982764","issue_url":"https://api.github.com/repos/apache/pinot/issues/7646","id":975982764,"node_id":"IC_kwDOATCU_c46LFCs","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:45:29Z","updated_at":"2021-11-22T22:45:29Z","author_association":"CONTRIBUTOR","body":"#7813","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975982764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975983873","html_url":"https://github.com/apache/pinot/pull/7651#issuecomment-975983873","issue_url":"https://api.github.com/repos/apache/pinot/issues/7651","id":975983873,"node_id":"IC_kwDOATCU_c46LFUB","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:47:33Z","updated_at":"2021-11-22T22:47:33Z","author_association":"CONTRIBUTOR","body":"#7813 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975983873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975989172","html_url":"https://github.com/apache/pinot/pull/7605#issuecomment-975989172","issue_url":"https://api.github.com/repos/apache/pinot/issues/7605","id":975989172,"node_id":"IC_kwDOATCU_c46LGm0","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:58:50Z","updated_at":"2021-11-22T22:58:50Z","author_association":"CONTRIBUTOR","body":"We should move to the next time bucket when there is no matching segment in the same schedule. Caching the watermark can cause problems when the lead controller changed for a table. Here is another try to fix the problem: #7814 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975989172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975995101","html_url":"https://github.com/apache/pinot/issues/7811#issuecomment-975995101","issue_url":"https://api.github.com/repos/apache/pinot/issues/7811","id":975995101,"node_id":"IC_kwDOATCU_c46LIDd","user":{"login":"bowen-stripe","id":54009860,"node_id":"MDQ6VXNlcjU0MDA5ODYw","avatar_url":"https://avatars.githubusercontent.com/u/54009860?v=4","gravatar_id":"","url":"https://api.github.com/users/bowen-stripe","html_url":"https://github.com/bowen-stripe","followers_url":"https://api.github.com/users/bowen-stripe/followers","following_url":"https://api.github.com/users/bowen-stripe/following{/other_user}","gists_url":"https://api.github.com/users/bowen-stripe/gists{/gist_id}","starred_url":"https://api.github.com/users/bowen-stripe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bowen-stripe/subscriptions","organizations_url":"https://api.github.com/users/bowen-stripe/orgs","repos_url":"https://api.github.com/users/bowen-stripe/repos","events_url":"https://api.github.com/users/bowen-stripe/events{/privacy}","received_events_url":"https://api.github.com/users/bowen-stripe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T23:09:43Z","updated_at":"2021-11-22T23:09:43Z","author_association":"NONE","body":"Ah, that should be sufficient. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/975995101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976003129","html_url":"https://github.com/apache/pinot/issues/7437#issuecomment-976003129","issue_url":"https://api.github.com/repos/apache/pinot/issues/7437","id":976003129,"node_id":"IC_kwDOATCU_c46LKA5","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T23:24:32Z","updated_at":"2021-11-22T23:24:32Z","author_association":"MEMBER","body":"@Jackie-Jiang let’s keep the forward index version separate because it will need a little bit of work to allow the fixed and variable length writer versions to evolve independently, which isn’t a problem when enabling on a column by column basis. I’ll open an issue for that.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976003129/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976006691","html_url":"https://github.com/apache/pinot/pull/7815#issuecomment-976006691","issue_url":"https://api.github.com/repos/apache/pinot/issues/7815","id":976006691,"node_id":"IC_kwDOATCU_c46LK4j","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T23:31:54Z","updated_at":"2021-11-22T23:31:54Z","author_association":"MEMBER","body":"The test failure seems completely unrelated to the change. Could a committer rerun please?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976006691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976049441","html_url":"https://github.com/apache/pinot/issues/6921#issuecomment-976049441","issue_url":"https://api.github.com/repos/apache/pinot/issues/6921","id":976049441,"node_id":"IC_kwDOATCU_c46LVUh","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T00:52:12Z","updated_at":"2021-11-23T00:52:12Z","author_association":"CONTRIBUTOR","body":"Sorry, I somehow missed this discussion thread. \r\n\r\n@kishoreg @mayankshriv @lfeagan - Arrow is a specification rather than implementation (has mulitple programming lang impls).\r\n\r\nMy main intention behind this issue was from database connectivity point of view. So like JDBC, ODBC, this will be another connector to Pinot and the binary protocol will be based on Arrow spec and the transport will be via GRPC. This was not necessarily for server to broker communication but instead client to broker transport where the clients can just get the PinotResultSet as Arrow buffers from the wire into memory without copy / SerDe and continue further processing on Arrow data -- common scenario in Python / Data Science world from what I can see.\r\n\r\nMoving server to broker DataTable format to Arrow spec can also be considered\r\n\r\nPS - this is also not related to underlying disk/memory format being based on Arrow. As you mentioned, our format is already well optimized for the engine.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976049441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976082612","html_url":"https://github.com/apache/pinot/pull/7815#issuecomment-976082612","issue_url":"https://api.github.com/repos/apache/pinot/issues/7815","id":976082612,"node_id":"IC_kwDOATCU_c46Lda0","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T01:11:14Z","updated_at":"2021-11-23T01:11:14Z","author_association":"CONTRIBUTOR","body":"@richardstartin Triggered a rerun, but this might be related to the segment size change for the new index version","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976082612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976097602","html_url":"https://github.com/apache/pinot/pull/7815#issuecomment-976097602","issue_url":"https://api.github.com/repos/apache/pinot/issues/7815","id":976097602,"node_id":"IC_kwDOATCU_c46LhFC","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T01:54:37Z","updated_at":"2021-11-23T11:47:30Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7815](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6b82d30) into [master](https://codecov.io/gh/apache/pinot/commit/b7b82584b3abc3e4bd679058a69604db828a6d25?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b7b8258) will **decrease** coverage by `40.57%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7815/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7815       +/-   ##\n=============================================\n- Coverage     71.66%   31.09%   -40.58%     \n=============================================\n  Files          1578     1570        -8     \n  Lines         80773    80440      -333     \n  Branches      12002    11964       -38     \n=============================================\n- Hits          57888    25014    -32874     \n- Misses        18993    53302    +34309     \n+ Partials       3892     2124     -1768     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.56% <ø> (+0.26%)` | :arrow_up: |\n| integration2 | `27.95% <ø> (+0.05%)` | :arrow_up: |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/pinot/spi/config/table/IndexingConfig.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0luZGV4aW5nQ29uZmlnLmphdmE=) | `0.00% <ø> (-92.21%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/table/FSTType.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0ZTVFR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/config/table/TableType.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1RhYmxlVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/DimensionFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EaW1lbnNpb25GaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/readers/FileFormat.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9yZWFkZXJzL0ZpbGVGb3JtYXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...org/apache/pinot/spi/config/table/QuotaConfig.java](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1F1b3RhQ29uZmlnLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1051 more](https://codecov.io/gh/apache/pinot/pull/7815/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [b7b8258...6b82d30](https://codecov.io/gh/apache/pinot/pull/7815?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976097602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976159080","html_url":"https://github.com/apache/pinot/pull/7780#issuecomment-976159080","issue_url":"https://api.github.com/repos/apache/pinot/issues/7780","id":976159080,"node_id":"IC_kwDOATCU_c46LwFo","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T04:25:44Z","updated_at":"2021-11-23T04:25:44Z","author_association":"CONTRIBUTOR","body":"> Why do we have this config on both controller and server?\r\n> \r\n> Seems the controller one is for allowing split commit from servers. Should we consider removing this controller config? Controller should always allow splitting commit, unless there are some overhead enabling it\r\n> \r\n> @mcvsubbu wdyt?\r\n\r\nThat makes sense. Controller should properly handles calls from split committers as well as non-split committers. It's up to server configuration to enable/disable split commit.\r\nMaybe there's a legacy reason for it. Let's wait for @mcvsubbu to shed light on this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976159080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976393298","html_url":"https://github.com/apache/pinot/pull/7815#issuecomment-976393298","issue_url":"https://api.github.com/repos/apache/pinot/issues/7815","id":976393298,"node_id":"IC_kwDOATCU_c46MpRS","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T10:48:50Z","updated_at":"2021-11-23T10:48:50Z","author_association":"MEMBER","body":"@Jackie-Jiang I see, that's a different error, it didn't get that far before I force pushed the first time.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976393298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976405029","html_url":"https://github.com/apache/pinot/pull/7816#issuecomment-976405029","issue_url":"https://api.github.com/repos/apache/pinot/issues/7816","id":976405029,"node_id":"IC_kwDOATCU_c46MsIl","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T11:03:46Z","updated_at":"2021-11-23T11:03:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7816](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6e20bb4) into [master](https://codecov.io/gh/apache/pinot/commit/b7b82584b3abc3e4bd679058a69604db828a6d25?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (b7b8258) will **decrease** coverage by `7.28%`.\n> The diff coverage is `39.28%`.\n\n> :exclamation: Current head 6e20bb4 differs from pull request most recent head 1139b2e. Consider uploading reports for the commit 1139b2e to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7816/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7816      +/-   ##\n============================================\n- Coverage     71.66%   64.38%   -7.29%     \n+ Complexity     4086     3950     -136     \n============================================\n  Files          1578     1570       -8     \n  Lines         80773    80460     -313     \n  Branches      12002    11967      -35     \n============================================\n- Hits          57888    51805    -6083     \n- Misses        18993    24989    +5996     \n+ Partials       3892     3666     -226     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.44% <39.28%> (+0.15%)` | :arrow_up: |\n| integration2 | `27.91% <32.14%> (+0.01%)` | :arrow_up: |\n| unittests1 | `68.73% <0.00%> (+0.05%)` | :arrow_up: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `22.44% <22.22%> (-18.86%)` | :arrow_down: |\n| [...ava/org/apache/pinot/client/ConnectionFactory.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb25GYWN0b3J5LmphdmE=) | `35.29% <28.57%> (-48.04%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `50.00% <30.76%> (-15.39%)` | :arrow_down: |\n| [...ces/PinotSegmentUploadDownloadRestletResource.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90U2VnbWVudFVwbG9hZERvd25sb2FkUmVzdGxldFJlc291cmNlLmphdmE=) | `53.47% <33.33%> (-6.26%)` | :arrow_down: |\n| [...apache/pinot/common/utils/SimpleHttpErrorInfo.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvU2ltcGxlSHR0cEVycm9ySW5mby5qYXZh) | `60.00% <60.00%> (ø)` | |\n| [...e/pinot/common/utils/FileUploadDownloadClient.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvRmlsZVVwbG9hZERvd25sb2FkQ2xpZW50LmphdmE=) | `62.45% <66.66%> (+0.14%)` | :arrow_up: |\n| [...r/api/resources/WebApplicationExceptionMapper.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1dlYkFwcGxpY2F0aW9uRXhjZXB0aW9uTWFwcGVyLmphdmE=) | `75.00% <100.00%> (-9.62%)` | :arrow_down: |\n| [...pinot/controller/recommender/io/ConfigManager.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9Db25maWdNYW5hZ2VyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...troller/recommender/io/metadata/FieldMetadata.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9pby9tZXRhZGF0YS9GaWVsZE1ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...roller/recommender/rules/impl/BloomFilterRule.java](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL0Jsb29tRmlsdGVyUnVsZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [221 more](https://codecov.io/gh/apache/pinot/pull/7816/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [b7b8258...1139b2e](https://codecov.io/gh/apache/pinot/pull/7816?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976405029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976445015","html_url":"https://github.com/apache/pinot/pull/7819#issuecomment-976445015","issue_url":"https://api.github.com/repos/apache/pinot/issues/7819","id":976445015,"node_id":"IC_kwDOATCU_c46M15X","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T12:01:51Z","updated_at":"2021-11-23T12:50:38Z","author_association":"MEMBER","body":"It turns out there's a bug in the library which prevents this configuration from being respected in all cases, which I have fixed in a [PR to the library](https://github.com/json-path/JsonPath/pull/767). Converting to draft until it's been released.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976445015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976509437","html_url":"https://github.com/apache/pinot/pull/7802#issuecomment-976509437","issue_url":"https://api.github.com/repos/apache/pinot/issues/7802","id":976509437,"node_id":"IC_kwDOATCU_c46NFn9","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T13:10:15Z","updated_at":"2021-11-23T13:10:15Z","author_association":"MEMBER","body":"@Jackie-Jiang it depends. Constructing bitmaps from unordered values is inefficient, and in general there's no point in using  `RoaringBitmapWriter`, so if the dictionary ids have a very large range this won't help much, but if the cardinality is less than the 2^16 this particular configuration will work very well because all the adds will be buffered into a small bitset, regardless of order. It's not clear to me how helpful this will be with unordered data with very high range though.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976509437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976515875","html_url":"https://github.com/apache/pinot/pull/7819#issuecomment-976515875","issue_url":"https://api.github.com/repos/apache/pinot/issues/7819","id":976515875,"node_id":"IC_kwDOATCU_c46NHMj","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T13:14:54Z","updated_at":"2022-02-01T01:26:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7819](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (19d3ea5) into [master](https://codecov.io/gh/apache/pinot/commit/4e595a24267a0521420c5401ca99d892e076a3fe?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4e595a2) will **increase** coverage by `1.38%`.\n> The diff coverage is `79.31%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7819/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7819      +/-   ##\n============================================\n+ Coverage     69.99%   71.38%   +1.38%     \n- Complexity     4303     4307       +4     \n============================================\n  Files          1616     1617       +1     \n  Lines         83752    83830      +78     \n  Branches      12514    12520       +6     \n============================================\n+ Hits          58619    59838    +1219     \n+ Misses        21109    19922    -1187     \n- Partials       4024     4070      +46     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `28.90% <13.79%> (?)` | |\n| integration2 | `27.74% <13.79%> (+0.22%)` | :arrow_up: |\n| unittests1 | `68.00% <79.31%> (+0.05%)` | :arrow_up: |\n| unittests2 | `14.18% <0.00%> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/pinot/common/function/scalar/JsonFunctions.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZnVuY3Rpb24vc2NhbGFyL0pzb25GdW5jdGlvbnMuamF2YQ==) | `85.00% <76.00%> (+4.64%)` | :arrow_up: |\n| [...re/common/evaluators/DefaultJsonPathEvaluator.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZXZhbHVhdG9ycy9EZWZhdWx0SnNvblBhdGhFdmFsdWF0b3IuamF2YQ==) | `30.68% <100.00%> (+4.18%)` | :arrow_up: |\n| [...ntroller/helix/core/minion/CronJobScheduleJob.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9Dcm9uSm9iU2NoZWR1bGVKb2IuamF2YQ==) | `0.00% <0.00%> (-59.10%)` | :arrow_down: |\n| [...org/apache/pinot/core/util/ListenerConfigUtil.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL0xpc3RlbmVyQ29uZmlnVXRpbC5qYXZh) | `77.00% <0.00%> (-8.37%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/env/PinotConfiguration.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZW52L1Bpbm90Q29uZmlndXJhdGlvbi5qYXZh) | `92.85% <0.00%> (-2.27%)` | :arrow_down: |\n| [...elix/core/periodictask/ControllerPeriodicTask.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3BlcmlvZGljdGFzay9Db250cm9sbGVyUGVyaW9kaWNUYXNrLmphdmE=) | `70.90% <0.00%> (-1.82%)` | :arrow_down: |\n| [...main/java/org/apache/pinot/core/util/TlsUtils.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1Rsc1V0aWxzLmphdmE=) | `75.29% <0.00%> (-1.74%)` | :arrow_down: |\n| [...java/org/apache/pinot/spi/stream/StreamConfig.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbUNvbmZpZy5qYXZh) | `90.76% <0.00%> (-1.38%)` | :arrow_down: |\n| [...pache/pinot/spi/stream/StreamConfigProperties.java](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbUNvbmZpZ1Byb3BlcnRpZXMuamF2YQ==) | `100.00% <0.00%> (ø)` | |\n| ... and [115 more](https://codecov.io/gh/apache/pinot/pull/7819/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [4e595a2...19d3ea5](https://codecov.io/gh/apache/pinot/pull/7819?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976515875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976614503","html_url":"https://github.com/apache/pinot/issues/7789#issuecomment-976614503","issue_url":"https://api.github.com/repos/apache/pinot/issues/7789","id":976614503,"node_id":"IC_kwDOATCU_c46NfRn","user":{"login":"mneedham","id":13220,"node_id":"MDQ6VXNlcjEzMjIw","avatar_url":"https://avatars.githubusercontent.com/u/13220?v=4","gravatar_id":"","url":"https://api.github.com/users/mneedham","html_url":"https://github.com/mneedham","followers_url":"https://api.github.com/users/mneedham/followers","following_url":"https://api.github.com/users/mneedham/following{/other_user}","gists_url":"https://api.github.com/users/mneedham/gists{/gist_id}","starred_url":"https://api.github.com/users/mneedham/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mneedham/subscriptions","organizations_url":"https://api.github.com/users/mneedham/orgs","repos_url":"https://api.github.com/users/mneedham/repos","events_url":"https://api.github.com/users/mneedham/events{/privacy}","received_events_url":"https://api.github.com/users/mneedham/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T14:27:18Z","updated_at":"2021-11-23T14:27:18Z","author_association":"CONTRIBUTOR","body":"This is where we've got to so far - https://docs.pinot.apache.org/users/user-guide-query/filtering-with-idset","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/976614503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977027075","html_url":"https://github.com/apache/pinot/issues/5246#issuecomment-977027075","issue_url":"https://api.github.com/repos/apache/pinot/issues/5246","id":977027075,"node_id":"IC_kwDOATCU_c46PEAD","user":{"login":"lfernandez93","id":4583946,"node_id":"MDQ6VXNlcjQ1ODM5NDY=","avatar_url":"https://avatars.githubusercontent.com/u/4583946?v=4","gravatar_id":"","url":"https://api.github.com/users/lfernandez93","html_url":"https://github.com/lfernandez93","followers_url":"https://api.github.com/users/lfernandez93/followers","following_url":"https://api.github.com/users/lfernandez93/following{/other_user}","gists_url":"https://api.github.com/users/lfernandez93/gists{/gist_id}","starred_url":"https://api.github.com/users/lfernandez93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfernandez93/subscriptions","organizations_url":"https://api.github.com/users/lfernandez93/orgs","repos_url":"https://api.github.com/users/lfernandez93/repos","events_url":"https://api.github.com/users/lfernandez93/events{/privacy}","received_events_url":"https://api.github.com/users/lfernandez93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T19:03:55Z","updated_at":"2021-11-23T19:03:55Z","author_association":"CONTRIBUTOR","body":"@kishoreg how do we up vote this issue?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977027075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977068519","html_url":"https://github.com/apache/pinot/pull/7815#issuecomment-977068519","issue_url":"https://api.github.com/repos/apache/pinot/issues/7815","id":977068519,"node_id":"IC_kwDOATCU_c46POHn","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T19:34:36Z","updated_at":"2021-11-23T19:34:36Z","author_association":"CONTRIBUTOR","body":"To confirm, reader should still be able to read existing segments with old version right ? Are we planning to convert existing segments to V3 during segment preprocessor / reload ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977068519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977078950","html_url":"https://github.com/apache/pinot/issues/5246#issuecomment-977078950","issue_url":"https://api.github.com/repos/apache/pinot/issues/5246","id":977078950,"node_id":"IC_kwDOATCU_c46PQqm","user":{"login":"lfernandez93","id":4583946,"node_id":"MDQ6VXNlcjQ1ODM5NDY=","avatar_url":"https://avatars.githubusercontent.com/u/4583946?v=4","gravatar_id":"","url":"https://api.github.com/users/lfernandez93","html_url":"https://github.com/lfernandez93","followers_url":"https://api.github.com/users/lfernandez93/followers","following_url":"https://api.github.com/users/lfernandez93/following{/other_user}","gists_url":"https://api.github.com/users/lfernandez93/gists{/gist_id}","starred_url":"https://api.github.com/users/lfernandez93/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfernandez93/subscriptions","organizations_url":"https://api.github.com/users/lfernandez93/orgs","repos_url":"https://api.github.com/users/lfernandez93/repos","events_url":"https://api.github.com/users/lfernandez93/events{/privacy}","received_events_url":"https://api.github.com/users/lfernandez93/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T19:42:28Z","updated_at":"2021-11-23T19:42:28Z","author_association":"CONTRIBUTOR","body":"+1 is there any update on this?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977078950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977083516","html_url":"https://github.com/apache/pinot/pull/7815#issuecomment-977083516","issue_url":"https://api.github.com/repos/apache/pinot/issues/7815","id":977083516,"node_id":"IC_kwDOATCU_c46PRx8","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T19:45:47Z","updated_at":"2021-11-23T19:46:23Z","author_association":"CONTRIBUTOR","body":"@siddharthteotia Yes, reader can read all different versions, and the reader support is included in `0.9.0` release. Existing segments won't be modified","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977083516/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977187482","html_url":"https://github.com/apache/pinot/issues/7818#issuecomment-977187482","issue_url":"https://api.github.com/repos/apache/pinot/issues/7818","id":977187482,"node_id":"IC_kwDOATCU_c46PrKa","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T21:33:46Z","updated_at":"2021-11-23T21:33:46Z","author_association":"CONTRIBUTOR","body":"Hi @Lvnszn - are you saying that because the \"sku\" field in the incoming JSON record IS NOT in the `custom_props` sub-record, you don't think it should wind up in the row?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977187482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977204199","html_url":"https://github.com/apache/pinot/pull/7817#issuecomment-977204199","issue_url":"https://api.github.com/repos/apache/pinot/issues/7817","id":977204199,"node_id":"IC_kwDOATCU_c46PvPn","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T21:58:30Z","updated_at":"2021-11-24T00:06:20Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7817](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (8a560ea) into [master](https://codecov.io/gh/apache/pinot/commit/767aa8abfb5bf085ba0a7ae5ff4024679f27816e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (767aa8a) will **increase** coverage by `0.00%`.\n> The diff coverage is `87.87%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7817/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@            Coverage Diff            @@\n##             master    #7817   +/-   ##\n=========================================\n  Coverage     71.69%   71.69%           \n- Complexity     4086     4089    +3     \n=========================================\n  Files          1579     1579           \n  Lines         80790    80832   +42     \n  Branches      12003    12010    +7     \n=========================================\n+ Hits          57922    57953   +31     \n- Misses        18981    18989    +8     \n- Partials       3887     3890    +3     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.42% <78.78%> (-0.03%)` | :arrow_down: |\n| integration2 | `27.95% <74.74%> (+0.02%)` | :arrow_up: |\n| unittests1 | `68.68% <ø> (+0.01%)` | :arrow_up: |\n| unittests2 | `14.59% <78.78%> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `92.42% <ø> (+3.03%)` | :arrow_up: |\n| [...oker/routing/segmentpruner/EmptySegmentPruner.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL0VtcHR5U2VnbWVudFBydW5lci5qYXZh) | `100.00% <ø> (ø)` | |\n| [...e/pinot/broker/broker/helix/BaseBrokerStarter.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jhc2VCcm9rZXJTdGFydGVyLmphdmE=) | `75.14% <44.44%> (-1.69%)` | :arrow_down: |\n| [...not/broker/broker/helix/ClusterChangeMediator.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0NsdXN0ZXJDaGFuZ2VNZWRpYXRvci5qYXZh) | `79.78% <66.66%> (+1.76%)` | :arrow_up: |\n| [...rg/apache/pinot/broker/routing/RoutingManager.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9Sb3V0aW5nTWFuYWdlci5qYXZh) | `89.47% <88.23%> (+0.22%)` | :arrow_up: |\n| [...routing/instanceselector/BaseInstanceSelector.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0Jhc2VJbnN0YW5jZVNlbGVjdG9yLmphdmE=) | `100.00% <100.00%> (ø)` | |\n| [.../routing/segmentpruner/PartitionSegmentPruner.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1BhcnRpdGlvblNlZ21lbnRQcnVuZXIuamF2YQ==) | `67.96% <100.00%> (-0.25%)` | :arrow_down: |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `80.87% <100.00%> (-0.08%)` | :arrow_down: |\n| [...outing/segmentselector/OfflineSegmentSelector.java](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50c2VsZWN0b3IvT2ZmbGluZVNlZ21lbnRTZWxlY3Rvci5qYXZh) | `100.00% <100.00%> (ø)` | |\n| ... and [32 more](https://codecov.io/gh/apache/pinot/pull/7817/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [767aa8a...8a560ea](https://codecov.io/gh/apache/pinot/pull/7817?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977204199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977228027","html_url":"https://github.com/apache/pinot/issues/7818#issuecomment-977228027","issue_url":"https://api.github.com/repos/apache/pinot/issues/7818","id":977228027,"node_id":"IC_kwDOATCU_c46P1D7","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T22:26:27Z","updated_at":"2021-11-23T22:26:27Z","author_association":"CONTRIBUTOR","body":"> Hi @Lvnszn - are you saying that because the \"sku\" field in the incoming JSON record IS NOT in the `custom_props` sub-record, you don't think it should wind up in the row?\r\n\r\nyes. the transform function should give \"\" instead of \"1234\"","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977228027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977233280","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-977233280","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":977233280,"node_id":"IC_kwDOATCU_c46P2WA","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T22:33:36Z","updated_at":"2021-11-23T22:33:36Z","author_association":"CONTRIBUTOR","body":"Hi @Jackie-Jiang - yes, re using a metadata push so that the controller doesn't have to download the segment. But I'm curious what the 2 versions of metadata push were. I only know of a full segment push, and a metadata push (at least from how you can configure the job yaml).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977233280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977259274","html_url":"https://github.com/apache/pinot/pull/7820#issuecomment-977259274","issue_url":"https://api.github.com/repos/apache/pinot/issues/7820","id":977259274,"node_id":"IC_kwDOATCU_c46P8sK","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T23:07:47Z","updated_at":"2021-12-06T13:03:06Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7820](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fa0219f) into [master](https://codecov.io/gh/apache/pinot/commit/e572ea02dd942e3eeaad71233b91d8d003f5f2d4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e572ea0) will **decrease** coverage by `1.39%`.\n> The diff coverage is `39.92%`.\n\n> :exclamation: Current head fa0219f differs from pull request most recent head a89359a. Consider uploading reports for the commit a89359a to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7820/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7820      +/-   ##\n============================================\n- Coverage     71.65%   70.26%   -1.40%     \n- Complexity     4080     4084       +4     \n============================================\n  Files          1581     1583       +2     \n  Lines         81350    81849     +499     \n  Branches      12128    12237     +109     \n============================================\n- Hits          58293    57509     -784     \n- Misses        19117    20397    +1280     \n- Partials       3940     3943       +3     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `27.69% <11.32%> (-0.11%)` | :arrow_down: |\n| unittests1 | `68.52% <39.92%> (-0.29%)` | :arrow_down: |\n| unittests2 | `14.44% <0.00%> (-0.08%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...re/common/evaluators/DefaultJsonPathEvaluator.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vZXZhbHVhdG9ycy9EZWZhdWx0SnNvblBhdGhFdmFsdWF0b3IuamF2YQ==) | `31.44% <31.44%> (ø)` | |\n| [...m/function/JsonExtractScalarTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vSnNvbkV4dHJhY3RTY2FsYXJUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `22.49% <35.64%> (-27.04%)` | :arrow_down: |\n| [...a/org/apache/pinot/core/common/DataBlockCache.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vRGF0YUJsb2NrQ2FjaGUuamF2YQ==) | `91.44% <60.00%> (-4.77%)` | :arrow_down: |\n| [...he/pinot/core/operator/blocks/ProjectionBlock.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9ibG9ja3MvUHJvamVjdGlvbkJsb2NrLmphdmE=) | `60.00% <60.00%> (ø)` | |\n| [...ransform/function/IdentifierTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vSWRlbnRpZmllclRyYW5zZm9ybUZ1bmN0aW9uLmphdmE=) | `69.76% <60.00%> (-8.50%)` | :arrow_down: |\n| [...java/org/apache/pinot/core/common/DataFetcher.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vRGF0YUZldGNoZXIuamF2YQ==) | `85.71% <60.97%> (-4.25%)` | :arrow_down: |\n| [...segment/spi/evaluator/json/JsonPathEvaluators.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1zcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3NlZ21lbnQvc3BpL2V2YWx1YXRvci9qc29uL0pzb25QYXRoRXZhbHVhdG9ycy5qYXZh) | `61.11% <61.11%> (ø)` | |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nverttorawindex/ConvertToRawIndexTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...e/pinot/common/minion/MergeRollupTaskMetadata.java](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWluaW9uL01lcmdlUm9sbHVwVGFza01ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-94.74%)` | :arrow_down: |\n| ... and [105 more](https://codecov.io/gh/apache/pinot/pull/7820/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e572ea0...a89359a](https://codecov.io/gh/apache/pinot/pull/7820?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977259274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977264186","html_url":"https://github.com/apache/pinot/pull/7820#issuecomment-977264186","issue_url":"https://api.github.com/repos/apache/pinot/issues/7820","id":977264186,"node_id":"IC_kwDOATCU_c46P946","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T23:12:27Z","updated_at":"2021-11-23T23:12:27Z","author_association":"MEMBER","body":"The try/catches can be removed if https://github.com/json-path/JsonPath/pull/767 is merged and released.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977264186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977282279","html_url":"https://github.com/apache/pinot/issues/7818#issuecomment-977282279","issue_url":"https://api.github.com/repos/apache/pinot/issues/7818","id":977282279,"node_id":"IC_kwDOATCU_c46QCTn","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T23:34:44Z","updated_at":"2021-11-23T23:35:17Z","author_association":"CONTRIBUTOR","body":"Hmm, others should weigh in here, but since the JSON record ALSO contains an `sku` field at the top level, this looks like undefined behavior to me, not a bug.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977282279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977289127","html_url":"https://github.com/apache/pinot/issues/7818#issuecomment-977289127","issue_url":"https://api.github.com/repos/apache/pinot/issues/7818","id":977289127,"node_id":"IC_kwDOATCU_c46QD-n","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-23T23:45:41Z","updated_at":"2021-11-23T23:52:51Z","author_association":"CONTRIBUTOR","body":"I think by default pinot extract all the top level fields from JSON into a PinotRecord for consuming, then evaluate each transform function.\r\nSo filed `sku` is already extracted then the transform function did the job then saw the field `sku` was there already, then skipped set the transformed results.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977289127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977303001","html_url":"https://github.com/apache/pinot/issues/7818#issuecomment-977303001","issue_url":"https://api.github.com/repos/apache/pinot/issues/7818","id":977303001,"node_id":"IC_kwDOATCU_c46QHXZ","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T00:04:52Z","updated_at":"2021-11-24T00:04:52Z","author_association":"CONTRIBUTOR","body":"This is expected behavior. Pinot will skip the transform if the column already exists","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977303001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977308961","html_url":"https://github.com/apache/pinot/pull/7822#issuecomment-977308961","issue_url":"https://api.github.com/repos/apache/pinot/issues/7822","id":977308961,"node_id":"IC_kwDOATCU_c46QI0h","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T00:13:11Z","updated_at":"2021-11-24T01:56:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7822](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1468b7d) into [master](https://codecov.io/gh/apache/pinot/commit/a74d94405987df7772b33de697bdd38dfd28fd4f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a74d944) will **increase** coverage by `0.00%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7822/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@            Coverage Diff            @@\n##             master    #7822   +/-   ##\n=========================================\n  Coverage     71.63%   71.64%           \n- Complexity     4087     4088    +1     \n=========================================\n  Files          1579     1579           \n  Lines         80810    80832   +22     \n  Branches      12006    12010    +4     \n=========================================\n+ Hits          57892    57915   +23     \n- Misses        19020    19026    +6     \n+ Partials       3898     3891    -7     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.38% <ø> (+0.12%)` | :arrow_up: |\n| integration2 | `27.95% <ø> (+0.03%)` | :arrow_up: |\n| unittests1 | `68.67% <ø> (+<0.01%)` | :arrow_up: |\n| unittests2 | `14.58% <ø> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...nction/DistinctCountBitmapAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9EaXN0aW5jdENvdW50Qml0bWFwQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `41.45% <0.00%> (-15.03%)` | :arrow_down: |\n| [...ache/pinot/core/operator/docidsets/OrDocIdSet.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9kb2NpZHNldHMvT3JEb2NJZFNldC5qYXZh) | `86.36% <0.00%> (-13.64%)` | :arrow_down: |\n| [.../predicate/NotEqualsPredicateEvaluatorFactory.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvcHJlZGljYXRlL05vdEVxdWFsc1ByZWRpY2F0ZUV2YWx1YXRvckZhY3RvcnkuamF2YQ==) | `69.33% <0.00%> (-10.67%)` | :arrow_down: |\n| [...inot/core/util/SegmentCompletionProtocolUtils.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1NlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2xVdGlscy5qYXZh) | `57.69% <0.00%> (-7.70%)` | :arrow_down: |\n| [...l/segment/index/readers/OnHeapFloatDictionary.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvT25IZWFwRmxvYXREaWN0aW9uYXJ5LmphdmE=) | `90.00% <0.00%> (-5.00%)` | :arrow_down: |\n| [...gregation/function/StUnionAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9TdFVuaW9uQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `73.52% <0.00%> (-2.95%)` | :arrow_down: |\n| [.../org/apache/pinot/core/startree/StarTreeUtils.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9TdGFyVHJlZVV0aWxzLmphdmE=) | `69.89% <0.00%> (-2.16%)` | :arrow_down: |\n| [...e/pinot/broker/broker/helix/BaseBrokerStarter.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jhc2VCcm9rZXJTdGFydGVyLmphdmE=) | `75.14% <0.00%> (-1.69%)` | :arrow_down: |\n| [...e/pinot/segment/local/io/util/PinotDataBitSet.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL1Bpbm90RGF0YUJpdFNldC5qYXZh) | `95.62% <0.00%> (-1.46%)` | :arrow_down: |\n| [...ion/groupby/AggregationGroupByTrimmingService.java](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9ncm91cGJ5L0FnZ3JlZ2F0aW9uR3JvdXBCeVRyaW1taW5nU2VydmljZS5qYXZh) | `93.47% <0.00%> (-1.45%)` | :arrow_down: |\n| ... and [30 more](https://codecov.io/gh/apache/pinot/pull/7822/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [a74d944...1468b7d](https://codecov.io/gh/apache/pinot/pull/7822?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977308961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977312406","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-977312406","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":977312406,"node_id":"IC_kwDOATCU_c46QJqW","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T00:20:18Z","updated_at":"2021-11-24T00:20:18Z","author_association":"CONTRIBUTOR","body":"Just went over the code, and we are actually using the proper metadata push API (the other way is letting the controller download the segment and extract the metadata). The inefficiency comes from not using the metadata from the local generated segment.\r\nIdeally, we should follow these steps when generating and pushing the segments:\r\n1. Generate the segments from the raw data\r\n2. Cache the segment metadata from the local files\r\n3. Tar the segments and upload to deep store\r\n4. Push segments using the cached metadata","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977312406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977346867","html_url":"https://github.com/apache/pinot/pull/7774#issuecomment-977346867","issue_url":"https://api.github.com/repos/apache/pinot/issues/7774","id":977346867,"node_id":"IC_kwDOATCU_c46QSEz","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T01:05:37Z","updated_at":"2021-11-24T01:06:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7774](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (19aee16) into [master](https://codecov.io/gh/apache/pinot/commit/d1606cd0f3877c1a8ec08255d003ef104a94c500?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d1606cd) will **decrease** coverage by `6.44%`.\n> The diff coverage is `40.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7774/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7774      +/-   ##\n============================================\n- Coverage     71.66%   65.21%   -6.45%     \n- Complexity     4083     4086       +3     \n============================================\n  Files          1578     1534      -44     \n  Lines         80639    78923    -1716     \n  Branches      11986    11800     -186     \n============================================\n- Hits          57790    51471    -6319     \n- Misses        18956    23784    +4828     \n+ Partials       3893     3668     -225     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `68.66% <ø> (+0.01%)` | :arrow_up: |\n| unittests2 | `14.60% <40.00%> (+0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../controller/api/ControllerAdminApiApplication.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvQ29udHJvbGxlckFkbWluQXBpQXBwbGljYXRpb24uamF2YQ==) | `87.93% <40.00%> (-4.53%)` | :arrow_down: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/core/data/manager/realtime/TimerService.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvVGltZXJTZXJ2aWNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...not/common/exception/HttpErrorStatusException.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZXhjZXB0aW9uL0h0dHBFcnJvclN0YXR1c0V4Y2VwdGlvbi5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/startree/plan/StarTreeDocIdSetPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlRG9jSWRTZXRQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [372 more](https://codecov.io/gh/apache/pinot/pull/7774/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [d1606cd...19aee16](https://codecov.io/gh/apache/pinot/pull/7774?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977346867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977499036","html_url":"https://github.com/apache/pinot/pull/7823#issuecomment-977499036","issue_url":"https://api.github.com/repos/apache/pinot/issues/7823","id":977499036,"node_id":"IC_kwDOATCU_c46Q3Oc","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T04:00:28Z","updated_at":"2021-11-24T17:04:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7823](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6ede774) into [master](https://codecov.io/gh/apache/pinot/commit/819cba00a3e24b849bc569c9e9ce113ad5a5704a?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (819cba0) will **decrease** coverage by `1.16%`.\n> The diff coverage is `28.57%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7823/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7823      +/-   ##\n============================================\n- Coverage     71.70%   70.53%   -1.17%     \n- Complexity     4089     4091       +2     \n============================================\n  Files          1579     1579              \n  Lines         80832    80841       +9     \n  Branches      12010    12010              \n============================================\n- Hits          57957    57025     -932     \n- Misses        18978    19933     +955     \n+ Partials       3897     3883      -14     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `27.99% <28.57%> (+0.02%)` | :arrow_up: |\n| unittests1 | `68.73% <0.00%> (+0.04%)` | :arrow_up: |\n| unittests2 | `14.59% <0.00%> (+0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...roker/requesthandler/BaseBrokerRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcmVxdWVzdGhhbmRsZXIvQmFzZUJyb2tlclJlcXVlc3RIYW5kbGVyLmphdmE=) | `70.13% <16.66%> (-1.17%)` | :arrow_down: |\n| [...t/common/response/broker/BrokerResponseNative.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVzcG9uc2UvYnJva2VyL0Jyb2tlclJlc3BvbnNlTmF0aXZlLmphdmE=) | `93.33% <100.00%> (+0.10%)` | :arrow_up: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nverttorawindex/ConvertToRawIndexTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...e/pinot/common/minion/MergeRollupTaskMetadata.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWluaW9uL01lcmdlUm9sbHVwVGFza01ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-94.74%)` | :arrow_down: |\n| [...plugin/segmentuploader/SegmentUploaderDefault.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zZWdtZW50LXVwbG9hZGVyL3Bpbm90LXNlZ21lbnQtdXBsb2FkZXItZGVmYXVsdC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL3NlZ21lbnR1cGxvYWRlci9TZWdtZW50VXBsb2FkZXJEZWZhdWx0LmphdmE=) | `0.00% <0.00%> (-87.10%)` | :arrow_down: |\n| [.../transform/function/MapValueTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vTWFwVmFsdWVUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `0.00% <0.00%> (-85.30%)` | :arrow_down: |\n| [...ot/common/messages/RoutingTableRebuildMessage.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUm91dGluZ1RhYmxlUmVidWlsZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-81.82%)` | :arrow_down: |\n| [...ache/pinot/common/lineage/SegmentLineageUtils.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZVV0aWxzLmphdmE=) | `22.22% <0.00%> (-77.78%)` | :arrow_down: |\n| [...ore/startree/executor/StarTreeGroupByExecutor.java](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9leGVjdXRvci9TdGFyVHJlZUdyb3VwQnlFeGVjdXRvci5qYXZh) | `0.00% <0.00%> (-77.78%)` | :arrow_down: |\n| ... and [99 more](https://codecov.io/gh/apache/pinot/pull/7823/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [819cba0...6ede774](https://codecov.io/gh/apache/pinot/pull/7823?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977499036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977530469","html_url":"https://github.com/apache/pinot/pull/7774#issuecomment-977530469","issue_url":"https://api.github.com/repos/apache/pinot/issues/7774","id":977530469,"node_id":"IC_kwDOATCU_c46Q-5l","user":{"login":"kautshukla","id":10418885,"node_id":"MDQ6VXNlcjEwNDE4ODg1","avatar_url":"https://avatars.githubusercontent.com/u/10418885?v=4","gravatar_id":"","url":"https://api.github.com/users/kautshukla","html_url":"https://github.com/kautshukla","followers_url":"https://api.github.com/users/kautshukla/followers","following_url":"https://api.github.com/users/kautshukla/following{/other_user}","gists_url":"https://api.github.com/users/kautshukla/gists{/gist_id}","starred_url":"https://api.github.com/users/kautshukla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kautshukla/subscriptions","organizations_url":"https://api.github.com/users/kautshukla/orgs","repos_url":"https://api.github.com/users/kautshukla/repos","events_url":"https://api.github.com/users/kautshukla/events{/privacy}","received_events_url":"https://api.github.com/users/kautshukla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T04:48:47Z","updated_at":"2021-11-24T04:48:47Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang : Will be closing and re creating pull request. Mistakenly pushed to down stream.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977530469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977547948","html_url":"https://github.com/apache/pinot/pull/7825#issuecomment-977547948","issue_url":"https://api.github.com/repos/apache/pinot/issues/7825","id":977547948,"node_id":"IC_kwDOATCU_c46RDKs","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T05:33:39Z","updated_at":"2021-11-24T05:55:14Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7825](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e752d07) into [master](https://codecov.io/gh/apache/pinot/commit/a74d94405987df7772b33de697bdd38dfd28fd4f?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a74d944) will **increase** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7825/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7825      +/-   ##\n============================================\n+ Coverage     71.63%   71.67%   +0.03%     \n+ Complexity     4087     4086       -1     \n============================================\n  Files          1579     1579              \n  Lines         80810    80832      +22     \n  Branches      12006    12010       +4     \n============================================\n+ Hits          57892    57936      +44     \n+ Misses        19020    19005      -15     \n+ Partials       3898     3891       -7     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.43% <ø> (+0.18%)` | :arrow_up: |\n| integration2 | `27.93% <ø> (+<0.01%)` | :arrow_up: |\n| unittests1 | `68.66% <ø> (-0.01%)` | :arrow_down: |\n| unittests2 | `14.62% <ø> (+0.02%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...nction/DistinctCountBitmapAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9EaXN0aW5jdENvdW50Qml0bWFwQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `47.66% <0.00%> (-8.81%)` | :arrow_down: |\n| [...l/segment/index/readers/OnHeapFloatDictionary.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvT25IZWFwRmxvYXREaWN0aW9uYXJ5LmphdmE=) | `90.00% <0.00%> (-5.00%)` | :arrow_down: |\n| [...gregation/function/StUnionAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9TdFVuaW9uQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `73.52% <0.00%> (-2.95%)` | :arrow_down: |\n| [...ache/pinot/core/operator/docidsets/OrDocIdSet.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9kb2NpZHNldHMvT3JEb2NJZFNldC5qYXZh) | `97.72% <0.00%> (-2.28%)` | :arrow_down: |\n| [...e/pinot/broker/broker/helix/BaseBrokerStarter.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jhc2VCcm9rZXJTdGFydGVyLmphdmE=) | `75.14% <0.00%> (-1.69%)` | :arrow_down: |\n| [...rg/apache/pinot/broker/routing/RoutingManager.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9Sb3V0aW5nTWFuYWdlci5qYXZh) | `87.71% <0.00%> (-1.53%)` | :arrow_down: |\n| [...lix/core/realtime/PinotRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90UmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `80.82% <0.00%> (-1.04%)` | :arrow_down: |\n| [.../helix/core/realtime/SegmentCompletionManager.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1NlZ21lbnRDb21wbGV0aW9uTWFuYWdlci5qYXZh) | `72.00% <0.00%> (-1.02%)` | :arrow_down: |\n| [...manager/realtime/LLRealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvTExSZWFsdGltZVNlZ21lbnREYXRhTWFuYWdlci5qYXZh) | `71.93% <0.00%> (-0.97%)` | :arrow_down: |\n| [...not/broker/broker/helix/ClusterChangeMediator.java](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0NsdXN0ZXJDaGFuZ2VNZWRpYXRvci5qYXZh) | `77.65% <0.00%> (-0.37%)` | :arrow_down: |\n| ... and [24 more](https://codecov.io/gh/apache/pinot/pull/7825/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [a74d944...e752d07](https://codecov.io/gh/apache/pinot/pull/7825?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977547948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977606846","html_url":"https://github.com/apache/pinot/issues/7818#issuecomment-977606846","issue_url":"https://api.github.com/repos/apache/pinot/issues/7818","id":977606846,"node_id":"IC_kwDOATCU_c46RRi-","user":{"login":"Lvnszn","id":12541438,"node_id":"MDQ6VXNlcjEyNTQxNDM4","avatar_url":"https://avatars.githubusercontent.com/u/12541438?v=4","gravatar_id":"","url":"https://api.github.com/users/Lvnszn","html_url":"https://github.com/Lvnszn","followers_url":"https://api.github.com/users/Lvnszn/followers","following_url":"https://api.github.com/users/Lvnszn/following{/other_user}","gists_url":"https://api.github.com/users/Lvnszn/gists{/gist_id}","starred_url":"https://api.github.com/users/Lvnszn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lvnszn/subscriptions","organizations_url":"https://api.github.com/users/Lvnszn/orgs","repos_url":"https://api.github.com/users/Lvnszn/repos","events_url":"https://api.github.com/users/Lvnszn/events{/privacy}","received_events_url":"https://api.github.com/users/Lvnszn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T07:34:42Z","updated_at":"2021-11-24T07:34:42Z","author_association":"NONE","body":"Thanks for your reply. IMO, the tableConfig is base on schemaConfig, so give me a hint than the rule in tableConfig higher weight than schema. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/977606846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978104919","html_url":"https://github.com/apache/pinot/pull/7826#issuecomment-978104919","issue_url":"https://api.github.com/repos/apache/pinot/issues/7826","id":978104919,"node_id":"IC_kwDOATCU_c46TLJX","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T17:58:13Z","updated_at":"2021-11-24T18:02:44Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7826](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c77175c) into [master](https://codecov.io/gh/apache/pinot/commit/90f58815f145ac982add9be89f6a2ff862739e90?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (90f5881) will **decrease** coverage by `6.47%`.\n> The diff coverage is `81.81%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7826/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7826      +/-   ##\n============================================\n- Coverage     71.66%   65.19%   -6.48%     \n+ Complexity     4089     4086       -3     \n============================================\n  Files          1579     1534      -45     \n  Lines         80832    78969    -1863     \n  Branches      12010    11807     -203     \n============================================\n- Hits          57932    51483    -6449     \n- Misses        19001    23824    +4823     \n+ Partials       3899     3662     -237     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `68.67% <81.81%> (+0.02%)` | :arrow_up: |\n| unittests2 | `14.59% <0.00%> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/pinot/common/function/JsonPathCache.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZnVuY3Rpb24vSnNvblBhdGhDYWNoZS5qYXZh) | `78.57% <77.77%> (-21.43%)` | :arrow_down: |\n| [...form/function/JsonExtractKeyTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vSnNvbkV4dHJhY3RLZXlUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `73.91% <100.00%> (-4.35%)` | :arrow_down: |\n| [...m/function/JsonExtractScalarTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vSnNvbkV4dHJhY3RTY2FsYXJUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `43.80% <100.00%> (-5.72%)` | :arrow_down: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/core/data/manager/realtime/TimerService.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvVGltZXJTZXJ2aWNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [357 more](https://codecov.io/gh/apache/pinot/pull/7826/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [90f5881...c77175c](https://codecov.io/gh/apache/pinot/pull/7826?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978104919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978106616","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978106616","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978106616,"node_id":"IC_kwDOATCU_c46TLj4","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T18:00:39Z","updated_at":"2021-11-24T18:00:39Z","author_association":"CONTRIBUTOR","body":"Hi @Jackie-Jiang - yes, it would be more efficient to save the metadata when doing a generate-and-push job. But for our use case, we run Hadoop map-reduce jobs to build segments (highly parallelized) and save to HDFS, and then separately have Pinot jobs to push the segments. So for that use case, we'd want to still do this optimization. Others on Slack have suggested saving the metadata files to a separate directory during build time, but in my mind that adds both complexity and the potential for data miss-match without much benefit.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978106616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978158427","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-978158427","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":978158427,"node_id":"IC_kwDOATCU_c46TYNb","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T19:22:16Z","updated_at":"2021-11-24T19:22:16Z","author_association":"CONTRIBUTOR","body":"@mbecker I think the scenario you state is closer to issue #6555 and/or issue #7280 but I agree that these are closely related.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978158427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978170836","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978170836","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978170836,"node_id":"IC_kwDOATCU_c46TbPU","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T19:43:11Z","updated_at":"2021-11-24T19:43:11Z","author_association":"CONTRIBUTOR","body":"Make sense.\r\nTo achieve the benefits described above, we need to ensure 2 things:\r\n1. The metadata files should be put in the beginning of the tar ball\r\n2. The `PinotFS.open()` implementation only download block of data instead of the whole file (checked the `S3PinotFS` and seems that is not the case)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978170836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978180856","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978180856","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978180856,"node_id":"IC_kwDOATCU_c46Tdr4","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T20:00:11Z","updated_at":"2021-11-24T20:00:11Z","author_association":"MEMBER","body":"> Others on Slack have suggested saving the metadata files to a separate directory during build time, but in my mind that adds both complexity and the potential for data miss-match without much benefit.\r\n\r\nThe benefit is a guarantee that this works everywhere. Could you elaborate on how the the mismatch scenario arises in concrete terms?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978180856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978182588","html_url":"https://github.com/apache/pinot/pull/7827#issuecomment-978182588","issue_url":"https://api.github.com/repos/apache/pinot/issues/7827","id":978182588,"node_id":"IC_kwDOATCU_c46TeG8","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T20:03:03Z","updated_at":"2021-12-01T00:36:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7827](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a103576) into [master](https://codecov.io/gh/apache/pinot/commit/fc3de4572b55bdab3428644ca0e5a733e7cfe535?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fc3de45) will **decrease** coverage by `50.60%`.\n> The diff coverage is `81.25%`.\n\n> :exclamation: Current head a103576 differs from pull request most recent head 506d136. Consider uploading reports for the commit 506d136 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7827/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7827       +/-   ##\n=============================================\n- Coverage     65.21%   14.60%   -50.61%     \n+ Complexity     4089       80     -4009     \n=============================================\n  Files          1534     1534               \n  Lines         78949    78955        +6     \n  Branches      11814    11814               \n=============================================\n- Hits          51487    11532    -39955     \n- Misses        23782    66573    +42791     \n+ Partials       3680      850     -2830     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests1 | `?` | |\n| unittests2 | `14.60% <81.25%> (-0.04%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...on/tasks/mergerollup/MergeRollupTaskGenerator.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvbWVyZ2Vyb2xsdXAvTWVyZ2VSb2xsdXBUYXNrR2VuZXJhdG9yLmphdmE=) | `75.79% <81.25%> (+0.47%)` | :arrow_up: |\n| [...ain/java/org/apache/pinot/core/data/table/Key.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0tleS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/core/data/table/Record.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL1JlY29yZC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/core/util/GroupByUtils.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL0dyb3VwQnlVdGlscy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/table/FSTType.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0ZTVFR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/utils/StringUtil.java](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvU3RyaW5nVXRpbC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1054 more](https://codecov.io/gh/apache/pinot/pull/7827/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [fc3de45...506d136](https://codecov.io/gh/apache/pinot/pull/7827?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978182588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978344683","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978344683","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978344683,"node_id":"IC_kwDOATCU_c46UFrr","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T22:23:01Z","updated_at":"2021-11-24T22:23:01Z","author_association":"CONTRIBUTOR","body":"Hi @richardstartin - could you explain what you mean by \"this works everywhere\"? That makes me feel like I don't really understand what you're proposing, and/or that you don't understand what I'm proposing. Streaming unpack of files should also \"work everywhere\", and should be highly performant, with minimal code changes.\r\n\r\nAs to the mismatch scenario, I'm assuming the idea is to store segments in directory A, and associated metadata in directory B. If an ops person copies updated segments to an archive dir, and forgets to copy the associated metadata, you would have miss-matched data. My previous experience dealing with Hadoop map files, which had an index and an associated data file, taught me the dangers of having to keep files in sync. But maybe there's a very different approach you're proposing that I'm missing, so some clarification would be great.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978344683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978385352","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978385352","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978385352,"node_id":"IC_kwDOATCU_c46UPnI","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T22:46:05Z","updated_at":"2021-11-24T22:47:34Z","author_association":"MEMBER","body":"> could you explain what you mean by \"this works everywhere\"? That makes me feel like I don't really understand what you're proposing, and/or that you don't understand what I'm proposing. Streaming unpack of files should also \"work everywhere\", and should be highly performant, with minimal code changes.\r\n\r\nI understand what you’re proposing. You want to start downloading the segment and, relying on the metadata being at the start of the segment, essentially abort the download once you have the metadata. The motivation is to save the download time for most of the segment file. Is that correct? \r\n\r\nBy everywhere, I mean for all filesystem implementations and for all segments, no matter how they have been generated or by what process. It is not currently specified where the metadata file is within the segment file, segment files may not have been generated by the code within this repository, and the metadata may not be at the start of the file.\r\n\r\n> As to the mismatch scenario, I'm assuming the idea is to store segments in directory A, and associated metadata in directory B. If an ops person copies updated segments to an archive dir, and forgets to copy the associated metadata, you would have miss-matched data. \r\n\r\nWithout meaning to appear facetious, this sounds a bit like what happens when users occasionally tamper with transaction logs in RDBMS and hope for good outcomes. Shouldn’t the user just not do that?\r\n\r\nRegarding directories, assuming metadata is stored in a separate file from the segment, is there a good reason for it to be in a different directory? WDYT @mcvsubbu? I know you expressed similar concerns to mine on slack.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978385352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978403625","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978403625","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978403625,"node_id":"IC_kwDOATCU_c46UUEp","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T22:57:16Z","updated_at":"2021-11-24T22:57:16Z","author_association":"CONTRIBUTOR","body":"@richardstartin - yes, re aborting the download once the two files of interest (`metadata.properties` and `creation.meta`) have been extracted. This will still work even if these files aren't near the beginning of the file, or before the bigger data files. It will just not be as much of an optimization, but even in the worst case it will be faster than the current code (no creation of temp files on local disk).\r\n\r\nAs to what happens with copying of files - it's not really the same as messing with transaction logs. Ops people (like the team for one of our clients) copy around segment files all the time, as they try out our different optimizations for how data is indexed, or manually roll back after there's an issue with the data being used to build new segments.\r\n\r\nRe where to put the metadata files - If the two metadata files are packaged as as currently expected by the controller, then they'll be `<blah>.tar.gz` files. In that case they really shouldn't be in the same directory as the actual segment tarballs, as segment pushes will try to push everything with that suffix to the controller. If you do a metadata push then it could rely on a naming convention to only process the metadata files.\r\n\r\nYou could leave the files untarred, but now you have a bunch of `<name>-metadata.properties` and `<name>-creation.meta` files littering the segment directory. We have HDFS directories with 1200+ segments, so adding another 2400 of these tiny files doesn't feel clean.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978403625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978440426","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978440426","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978440426,"node_id":"IC_kwDOATCU_c46UdDq","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T23:20:51Z","updated_at":"2021-11-24T23:20:51Z","author_association":"MEMBER","body":"So the analogy with transaction logs was messing with a system’s state without fully understanding the consequences. You do it at your own risk, and file structures shouldn’t be optimised to simplify manual actions.\r\n\r\nI agree that the exact order of the segment file changing doesn’t create a correctness problem, but it does make a very worthwhile optimisation brittle. My concern is that this optimisation is always an optimisation and doesn’t break for silly reasons.\r\n\r\n_Clean_ is a very subjective term. It means different things to different people. Files with different suffixes in the same directory as the segments does not feel _unclean_ to me.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978440426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978462020","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-978462020","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":978462020,"node_id":"IC_kwDOATCU_c46UiVE","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-24T23:34:54Z","updated_at":"2021-11-24T23:34:54Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang - good catch re S3PinotFS buffering the entire file into memory on the `open()` call. I've checked the other FS implementations, and they don't seem to be doing a complete download, but rather are returning a stream to the original source data. I've pinged @KKcorps on Slack to find out the reasoning here, as it seems possible to use the S3Client support for `getObject()` to avoid the download.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978462020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978582467","html_url":"https://github.com/apache/pinot/pull/7828#issuecomment-978582467","issue_url":"https://api.github.com/repos/apache/pinot/issues/7828","id":978582467,"node_id":"IC_kwDOATCU_c46U_vD","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T00:36:58Z","updated_at":"2021-11-25T00:36:58Z","author_association":"MEMBER","body":"Why not use a `Sets.newConcurrentHashSet()` rather than copy on write? That would simplify this a lot.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978582467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978626493","html_url":"https://github.com/apache/pinot/pull/7828#issuecomment-978626493","issue_url":"https://api.github.com/repos/apache/pinot/issues/7828","id":978626493,"node_id":"IC_kwDOATCU_c46VKe9","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T00:47:33Z","updated_at":"2021-11-29T22:55:22Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7828](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0b26ea9) into [master](https://codecov.io/gh/apache/pinot/commit/1e25962ed807ec914e76d7726a321efc956e0352?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1e25962) will **decrease** coverage by `0.02%`.\n> The diff coverage is `84.37%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7828/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7828      +/-   ##\n============================================\n- Coverage     71.67%   71.64%   -0.03%     \n  Complexity     4089     4089              \n============================================\n  Files          1579     1579              \n  Lines         80843    80851       +8     \n  Branches      12010    12017       +7     \n============================================\n- Hits          57944    57929      -15     \n- Misses        18995    19018      +23     \n  Partials       3904     3904              \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.29% <31.25%> (-0.17%)` | :arrow_down: |\n| integration2 | `27.92% <31.25%> (-0.12%)` | :arrow_down: |\n| unittests1 | `68.66% <ø> (+<0.01%)` | :arrow_up: |\n| unittests2 | `14.62% <84.37%> (-0.05%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...oker/routing/segmentpruner/EmptySegmentPruner.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL0VtcHR5U2VnbWVudFBydW5lci5qYXZh) | `91.37% <84.37%> (-8.63%)` | :arrow_down: |\n| [...data/manager/realtime/SegmentCommitterFactory.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvU2VnbWVudENvbW1pdHRlckZhY3RvcnkuamF2YQ==) | `64.70% <0.00%> (-29.42%)` | :arrow_down: |\n| [...er/api/resources/LLCSegmentCompletionHandlers.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL0xMQ1NlZ21lbnRDb21wbGV0aW9uSGFuZGxlcnMuamF2YQ==) | `53.46% <0.00%> (-8.92%)` | :arrow_down: |\n| [...altime/ServerSegmentCompletionProtocolHandler.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VydmVyL3JlYWx0aW1lL1NlcnZlclNlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2xIYW5kbGVyLmphdmE=) | `49.52% <0.00%> (-8.58%)` | :arrow_down: |\n| [...e/data/manager/realtime/SplitSegmentCommitter.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvU3BsaXRTZWdtZW50Q29tbWl0dGVyLmphdmE=) | `53.84% <0.00%> (-7.70%)` | :arrow_down: |\n| [...nction/DistinctCountBitmapAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9EaXN0aW5jdENvdW50Qml0bWFwQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `47.66% <0.00%> (-7.26%)` | :arrow_down: |\n| [.../pinot/core/query/scheduler/PriorityScheduler.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvUHJpb3JpdHlTY2hlZHVsZXIuamF2YQ==) | `80.82% <0.00%> (-2.74%)` | :arrow_down: |\n| [...ot/common/protocols/SegmentCompletionProtocol.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcHJvdG9jb2xzL1NlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2wuamF2YQ==) | `93.80% <0.00%> (-1.91%)` | :arrow_down: |\n| [...r/validation/RealtimeSegmentValidationManager.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci92YWxpZGF0aW9uL1JlYWx0aW1lU2VnbWVudFZhbGlkYXRpb25NYW5hZ2VyLmphdmE=) | `74.28% <0.00%> (-1.43%)` | :arrow_down: |\n| [...a/org/apache/pinot/core/common/DataBlockCache.java](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9jb21tb24vRGF0YUJsb2NrQ2FjaGUuamF2YQ==) | `96.21% <0.00%> (-0.76%)` | :arrow_down: |\n| ... and [21 more](https://codecov.io/gh/apache/pinot/pull/7828/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [1e25962...0b26ea9](https://codecov.io/gh/apache/pinot/pull/7828?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978626493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978691332","html_url":"https://github.com/apache/pinot/pull/7828#issuecomment-978691332","issue_url":"https://api.github.com/repos/apache/pinot/issues/7828","id":978691332,"node_id":"IC_kwDOATCU_c46VaUE","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T01:10:29Z","updated_at":"2021-11-25T01:10:29Z","author_association":"CONTRIBUTOR","body":"@richardstartin I actually considered that, and decided to go with the snapshot approach because we want to optimize the query runtime method as much as possible","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978691332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978891304","html_url":"https://github.com/apache/pinot/pull/7828#issuecomment-978891304","issue_url":"https://api.github.com/repos/apache/pinot/issues/7828","id":978891304,"node_id":"IC_kwDOATCU_c46WLIo","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T07:01:44Z","updated_at":"2021-11-25T16:53:15Z","author_association":"MEMBER","body":">  I actually considered that, and decided to go with the snapshot approach because we want to optimize the query runtime method as much as possible\r\n\r\nI don’t think this is likely to be an optimisation unless the removeAll call is made frequently and the number of empty segments is large.\r\n\r\nI think when an optimisation makes the code much harder to read we need 4 bits of data:\r\n\r\n1. **evidence that there is a problem** - e.g. wall time thresholded tracing events around EmptySegmentPruner.prune, or a sampling profiler reporting lots of samples in this method\r\n2. **evidence that the thing being optimised causes the problem** - assuming we have data that there is a problem, is it the removeAll call (which using a HashSet may optimise relative to a concurrent variant) or the copy on line 151 which is the cause?\r\n3. **evidence the problem is common** - e.g. statistics about number of empty segments from a real cluster, do we have a metric for this?\r\n4. **evidence the optimisation is effective** - for widely observed set sizes, does it actually make a difference to have a HashSet instead of a concurrent HashSet?\r\n\r\nI raise this only because the code is *much* harder to read than if it used a threadsafe Set. If it were as readable I would be inclined to assume that the optimisation is effective.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978891304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978983148","html_url":"https://github.com/apache/pinot/issues/7831#issuecomment-978983148","issue_url":"https://api.github.com/repos/apache/pinot/issues/7831","id":978983148,"node_id":"IC_kwDOATCU_c46Whjs","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T09:03:10Z","updated_at":"2021-11-25T09:03:10Z","author_association":"CONTRIBUTOR","body":"Design document:\r\n\r\nhttps://docs.google.com/document/d/1ZM-2c0jJkbeJ61m8sJF0qj19t5UYLhnTFvIAz-HCJmk/edit?usp=sharing","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/978983148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979041676","html_url":"https://github.com/apache/pinot/pull/7832#issuecomment-979041676","issue_url":"https://api.github.com/repos/apache/pinot/issues/7832","id":979041676,"node_id":"IC_kwDOATCU_c46Wv2M","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T09:50:04Z","updated_at":"2021-11-30T20:59:49Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7832](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (eec4e67) into [master](https://codecov.io/gh/apache/pinot/commit/1e25962ed807ec914e76d7726a321efc956e0352?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1e25962) will **decrease** coverage by `57.08%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7832/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7832       +/-   ##\n=============================================\n- Coverage     71.67%   14.59%   -57.09%     \n+ Complexity     4089       80     -4009     \n=============================================\n  Files          1579     1534       -45     \n  Lines         80843    78949     -1894     \n  Branches      12010    11814      -196     \n=============================================\n- Hits          57944    11520    -46424     \n- Misses        18995    66580    +47585     \n+ Partials       3904      849     -3055     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `14.59% <ø> (-0.08%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ain/java/org/apache/pinot/core/data/table/Key.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0tleS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/core/data/table/Record.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL1JlY29yZC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/core/util/GroupByUtils.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL0dyb3VwQnlVdGlscy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/config/table/FSTType.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL0ZTVFR5cGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/utils/StringUtil.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvU3RyaW5nVXRpbC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/core/data/table/BaseTable.java](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0Jhc2VUYWJsZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1252 more](https://codecov.io/gh/apache/pinot/pull/7832/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [1e25962...eec4e67](https://codecov.io/gh/apache/pinot/pull/7832?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979041676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979136818","html_url":"https://github.com/apache/pinot/pull/7830#issuecomment-979136818","issue_url":"https://api.github.com/repos/apache/pinot/issues/7830","id":979136818,"node_id":"IC_kwDOATCU_c46XHEy","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T11:47:36Z","updated_at":"2021-12-07T08:29:23Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7830](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (763c5c0) into [master](https://codecov.io/gh/apache/pinot/commit/47e49ecd6e11aebe74f8868cdac22051b175d4c5?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (47e49ec) will **decrease** coverage by `33.48%`.\n> The diff coverage is `31.32%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7830/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7830       +/-   ##\n=============================================\n- Coverage     71.63%   38.14%   -33.49%     \n+ Complexity     4088       80     -4008     \n=============================================\n  Files          1580     1587        +7     \n  Lines         81100    82056      +956     \n  Branches      12068    12269      +201     \n=============================================\n- Hits          58093    31302    -26791     \n- Misses        19092    48349    +29257     \n+ Partials       3915     2405     -1510     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.20% <31.32%> (-0.20%)` | :arrow_down: |\n| integration2 | `27.62% <30.56%> (-0.28%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `14.38% <0.37%> (-0.18%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...g/apache/pinot/core/operator/DocIdSetOperator.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9Eb2NJZFNldE9wZXJhdG9yLmphdmE=) | `87.09% <0.00%> (-6.01%)` | :arrow_down: |\n| [...t/core/operator/blocks/CombinedTransformBlock.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9ibG9ja3MvQ29tYmluZWRUcmFuc2Zvcm1CbG9jay5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/core/operator/blocks/DocIdSetBlock.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9ibG9ja3MvRG9jSWRTZXRCbG9jay5qYXZh) | `60.00% <0.00%> (ø)` | |\n| [...che/pinot/core/operator/blocks/TransformBlock.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9ibG9ja3MvVHJhbnNmb3JtQmxvY2suamF2YQ==) | `69.23% <0.00%> (ø)` | |\n| [.../operator/filter/BlockDrivenAndFilterOperator.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvQmxvY2tEcml2ZW5BbmRGaWx0ZXJPcGVyYXRvci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../operator/transform/CombinedTransformOperator.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vQ29tYmluZWRUcmFuc2Zvcm1PcGVyYXRvci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...erator/transform/PassThroughTransformOperator.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vUGFzc1Rocm91Z2hUcmFuc2Zvcm1PcGVyYXRvci5qYXZh) | `70.00% <0.00%> (-17.50%)` | :arrow_down: |\n| [...t/core/plan/AggregationGroupByOrderByPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9wbGFuL0FnZ3JlZ2F0aW9uR3JvdXBCeU9yZGVyQnlQbGFuTm9kZS5qYXZh) | `45.45% <0.00%> (ø)` | |\n| [...aggregation/FilteredClauseAggregationExecutor.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9GaWx0ZXJlZENsYXVzZUFnZ3JlZ2F0aW9uRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...aggregation/function/AggregationFunctionUtils.java](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9BZ2dyZWdhdGlvbkZ1bmN0aW9uVXRpbHMuamF2YQ==) | `70.90% <0.00%> (-16.33%)` | :arrow_down: |\n| ... and [913 more](https://codecov.io/gh/apache/pinot/pull/7830/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [41c98d7...763c5c0](https://codecov.io/gh/apache/pinot/pull/7830?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979136818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979221370","html_url":"https://github.com/apache/pinot/issues/7791#issuecomment-979221370","issue_url":"https://api.github.com/repos/apache/pinot/issues/7791","id":979221370,"node_id":"IC_kwDOATCU_c46Xbt6","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T13:35:50Z","updated_at":"2021-11-25T13:35:50Z","author_association":"MEMBER","body":"For the sake of considering alternatives, if the required metadata could be squeezed into 2KB it could be stored in the file attributes on the segment file. S3 allows [retrieval of all attributes](https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingMetadata.html) without downloading the file via a `HeadObject` request, and HDFS [extended file attributes](https://hadoop.apache.org/docs/stable/hadoop-project-dist/hadoop-hdfs/ExtendedAttributes.html) support a similar lightweight access protocol. Naturally, GCS has the same [concept](https://cloud.google.com/storage/docs/metadata), as does [Azure](https://docs.microsoft.com/en-us/rest/api/storageservices/get-file-metadata). I believe this would address concerns about separation, directory structures, but also provide good guarantees., the only catch is the limit of 2KB for user defined attributes.\r\n\r\nThe metadata written into creation.meta consists of a crc and creation time, metadata.properties is heavier, but it could all be written in to a JSON object which could be compressed, base64 encoded and saved as a single file attribute on the segment file. \r\n\r\nOptimistic `HeadObject`/`getfattr` requests would be made to the filesystem. Support for old segment files without the correct metadata would be provided by falling back to the mechanism proposed here, and eventually metadata would always be retrieved successfully first time by reading file attributes without downloading any segment files.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979221370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979320371","html_url":"https://github.com/apache/pinot/issues/7586#issuecomment-979320371","issue_url":"https://api.github.com/repos/apache/pinot/issues/7586","id":979320371,"node_id":"IC_kwDOATCU_c46Xz4z","user":{"login":"kriti-sc","id":38242933,"node_id":"MDQ6VXNlcjM4MjQyOTMz","avatar_url":"https://avatars.githubusercontent.com/u/38242933?v=4","gravatar_id":"","url":"https://api.github.com/users/kriti-sc","html_url":"https://github.com/kriti-sc","followers_url":"https://api.github.com/users/kriti-sc/followers","following_url":"https://api.github.com/users/kriti-sc/following{/other_user}","gists_url":"https://api.github.com/users/kriti-sc/gists{/gist_id}","starred_url":"https://api.github.com/users/kriti-sc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kriti-sc/subscriptions","organizations_url":"https://api.github.com/users/kriti-sc/orgs","repos_url":"https://api.github.com/users/kriti-sc/repos","events_url":"https://api.github.com/users/kriti-sc/events{/privacy}","received_events_url":"https://api.github.com/users/kriti-sc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T15:53:46Z","updated_at":"2021-11-25T15:53:46Z","author_association":"CONTRIBUTOR","body":"@xiangfu0 Added possible fix. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979320371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979382548","html_url":"https://github.com/apache/pinot/pull/7824#issuecomment-979382548","issue_url":"https://api.github.com/repos/apache/pinot/issues/7824","id":979382548,"node_id":"IC_kwDOATCU_c46YDEU","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T17:43:37Z","updated_at":"2021-11-25T17:43:37Z","author_association":"MEMBER","body":"Could you add a regression test please?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979382548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979479631","html_url":"https://github.com/apache/pinot/pull/7832#issuecomment-979479631","issue_url":"https://api.github.com/repos/apache/pinot/issues/7832","id":979479631,"node_id":"IC_kwDOATCU_c46YaxP","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-25T21:40:17Z","updated_at":"2021-11-25T21:44:23Z","author_association":"CONTRIBUTOR","body":"Thanks for the fast fix for https://github.com/apache/pinot/issues/7829 ! It is verified from my M1 Pro that the quick start can run with http://localhost:9000 showing sample table.\r\n\r\nBelow are the build command, and the command to start\r\n**Build:**\r\n```\r\ngit pull && git checkout arm64-docker-image\r\ncd docker/images/pinot\r\n\r\ndocker build -t pinot:latest --platform linux/arm64 --no-cache --network=host --build-arg PINOT_GIT_URL=https://github.com/apache/pinot.git --build-arg PINOT_BRANCH=master --build-arg JDK_VERSION=11 --build-arg OPENJDK_IMAGE=arm64v8/openjdk -f Dockerfile .\r\n```\r\n\r\n**Start locally** (Because of build, has to use the local image built, named **docker.io/library/pinot:latest** )\r\n```\r\ndocker run \\\r\n    --network=pinot-demo \\\r\n    --name pinot-quickstart \\\r\n    -p 9000:9000 \\\r\n    -d docker.io/library/pinot:latest QuickStart \\\r\n    -type batch\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979479631/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979703727","html_url":"https://github.com/apache/pinot/issues/7476#issuecomment-979703727","issue_url":"https://api.github.com/repos/apache/pinot/issues/7476","id":979703727,"node_id":"IC_kwDOATCU_c46ZRev","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-26T05:19:17Z","updated_at":"2021-11-26T05:19:17Z","author_association":"CONTRIBUTOR","body":"@richardstartin thanks for the fixes and all the quick help :) Closing this issue.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/979703727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981029028","html_url":"https://github.com/apache/pinot/pull/7541#issuecomment-981029028","issue_url":"https://api.github.com/repos/apache/pinot/issues/7541","id":981029028,"node_id":"IC_kwDOATCU_c46eVCk","user":{"login":"ddcprg","id":7541790,"node_id":"MDQ6VXNlcjc1NDE3OTA=","avatar_url":"https://avatars.githubusercontent.com/u/7541790?v=4","gravatar_id":"","url":"https://api.github.com/users/ddcprg","html_url":"https://github.com/ddcprg","followers_url":"https://api.github.com/users/ddcprg/followers","following_url":"https://api.github.com/users/ddcprg/following{/other_user}","gists_url":"https://api.github.com/users/ddcprg/gists{/gist_id}","starred_url":"https://api.github.com/users/ddcprg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddcprg/subscriptions","organizations_url":"https://api.github.com/users/ddcprg/orgs","repos_url":"https://api.github.com/users/ddcprg/repos","events_url":"https://api.github.com/users/ddcprg/events{/privacy}","received_events_url":"https://api.github.com/users/ddcprg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-28T08:44:49Z","updated_at":"2021-11-28T11:49:18Z","author_association":"CONTRIBUTOR","body":"@richardstartin @siddharthteotia is it worth keeping working on this? I'll decline the PR if not, I wouldn't like to keep it open if it's not going to be merged. Otherwise, I'll rebase and wait","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981029028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981950234","html_url":"https://github.com/apache/pinot/issues/7834#issuecomment-981950234","issue_url":"https://api.github.com/repos/apache/pinot/issues/7834","id":981950234,"node_id":"IC_kwDOATCU_c46h18a","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T19:33:37Z","updated_at":"2021-11-29T19:33:37Z","author_association":"CONTRIBUTOR","body":"Thanks for bringing this up!\r\n\r\nJust wanna check the compatibility of using Kafka 2.4 consumer to consume Kafka broker from 2.0+.\r\n\r\nIf things are fine, we can safely just bump up the version number in pom file.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981950234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981952144","html_url":"https://github.com/apache/pinot/issues/7834#issuecomment-981952144","issue_url":"https://api.github.com/repos/apache/pinot/issues/7834","id":981952144,"node_id":"IC_kwDOATCU_c46h2aQ","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T19:36:14Z","updated_at":"2021-11-29T19:36:14Z","author_association":"CONTRIBUTOR","body":"From this wiki: https://cwiki.apache.org/confluence/display/KAFKA/Compatibility+Matrix\r\n\r\nSeems that we can safely upgrade kafka consumer to consume older broker verisons.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981952144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981953079","html_url":"https://github.com/apache/pinot/issues/7834#issuecomment-981953079","issue_url":"https://api.github.com/repos/apache/pinot/issues/7834","id":981953079,"node_id":"IC_kwDOATCU_c46h2o3","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T19:37:33Z","updated_at":"2021-11-29T19:37:33Z","author_association":"CONTRIBUTOR","body":"Do you want to file a PR to test the version upgrade?\r\nhttps://github.com/apache/pinot/blob/master/pinot-plugins/pinot-stream-ingestion/pinot-kafka-2.0/pom.xml","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981953079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981955434","html_url":"https://github.com/apache/pinot/issues/7836#issuecomment-981955434","issue_url":"https://api.github.com/repos/apache/pinot/issues/7836","id":981955434,"node_id":"IC_kwDOATCU_c46h3Nq","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T19:40:52Z","updated_at":"2021-11-29T19:40:52Z","author_association":"MEMBER","body":"I am interested in picking this up in early 2022 cc @mayankshriv @Jackie-Jiang ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981955434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981977108","html_url":"https://github.com/apache/pinot/issues/7831#issuecomment-981977108","issue_url":"https://api.github.com/repos/apache/pinot/issues/7831","id":981977108,"node_id":"IC_kwDOATCU_c46h8gU","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T20:10:06Z","updated_at":"2021-11-29T20:10:06Z","author_association":"CONTRIBUTOR","body":"Thanks @atris for creating this PEP request. The overall design doc looks good to me. +1 on the feature implementation.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/981977108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982064831","html_url":"https://github.com/apache/pinot/pull/7828#issuecomment-982064831","issue_url":"https://api.github.com/repos/apache/pinot/issues/7828","id":982064831,"node_id":"IC_kwDOATCU_c46iR6_","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T22:03:41Z","updated_at":"2021-11-29T22:03:41Z","author_association":"CONTRIBUTOR","body":"@richardstartin I didn't think from the readability perspective. I agree there is no clear evidence on the optimization. Changed it to use the concurrent set.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982064831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982088481","html_url":"https://github.com/apache/pinot/pull/7820#issuecomment-982088481","issue_url":"https://api.github.com/repos/apache/pinot/issues/7820","id":982088481,"node_id":"IC_kwDOATCU_c46iXsh","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T22:40:09Z","updated_at":"2021-11-29T22:40:09Z","author_association":"MEMBER","body":"I like the concept of the pushdown evaluator. Few thoughts/concerns\r\n- Some methods added to projectionBlock seem to be specific to projectionBlock and is deviating from the block concept of chaining any blocks together i.e. the caller of the block does not understand the implementation of the underlying block. We have violated this in few places and we should fix that. It might be a good idea to enhance the Block interface to allow a pushdown evaluator.\r\n- Conceptually, we are moving from a Column to Column + path but modelling the path as an evaluator. But the query layer is deciding the evaluator instead of the storage layer. \r\n- The evaluator seems to be set at the JVM level but in practice, it's possible for each table to have a different evaluator and in fact, it's possible that each segment can have a different evaluator.\r\n\r\nAt a high level, the segment is the smallest unit of query processing in Pinot and most of the things can be decided independently at that scope - segmentDirectory, readers, writers, Blocks, indexes, encoding etc.\r\n\r\nHaving said that, I don't have a very good solution yet but I think we can come up with something after a couple of iterations. One thought is enhancing the concept (String Column) to a Column Object which has  SingleColumn, NestedColumn( column + path) as implementations.\r\n\r\nOverall, I think the Storage (Reader) should decide on the evaluator instead of the query layer. \r\n\r\n \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982088481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982128869","html_url":"https://github.com/apache/pinot/issues/7835#issuecomment-982128869","issue_url":"https://api.github.com/repos/apache/pinot/issues/7835","id":982128869,"node_id":"IC_kwDOATCU_c46ihjl","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T23:30:15Z","updated_at":"2021-11-29T23:30:15Z","author_association":"CONTRIBUTOR","body":"Same as #7691 where we need to access the null vector index within case statement","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982128869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982131963","html_url":"https://github.com/apache/pinot/issues/7691#issuecomment-982131963","issue_url":"https://api.github.com/repos/apache/pinot/issues/7691","id":982131963,"node_id":"IC_kwDOATCU_c46iiT7","user":{"login":"weixiangsun","id":91153405,"node_id":"MDQ6VXNlcjkxMTUzNDA1","avatar_url":"https://avatars.githubusercontent.com/u/91153405?v=4","gravatar_id":"","url":"https://api.github.com/users/weixiangsun","html_url":"https://github.com/weixiangsun","followers_url":"https://api.github.com/users/weixiangsun/followers","following_url":"https://api.github.com/users/weixiangsun/following{/other_user}","gists_url":"https://api.github.com/users/weixiangsun/gists{/gist_id}","starred_url":"https://api.github.com/users/weixiangsun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weixiangsun/subscriptions","organizations_url":"https://api.github.com/users/weixiangsun/orgs","repos_url":"https://api.github.com/users/weixiangsun/repos","events_url":"https://api.github.com/users/weixiangsun/events{/privacy}","received_events_url":"https://api.github.com/users/weixiangsun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T23:36:50Z","updated_at":"2021-11-29T23:36:50Z","author_association":"CONTRIBUTOR","body":"Are we going to run multiple queries corresponding to each condition inside the CaseTransform? @atris ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982131963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982140750","html_url":"https://github.com/apache/pinot/pull/7820#issuecomment-982140750","issue_url":"https://api.github.com/repos/apache/pinot/issues/7820","id":982140750,"node_id":"IC_kwDOATCU_c46ikdO","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-29T23:57:39Z","updated_at":"2021-11-30T00:01:55Z","author_association":"MEMBER","body":"> Conceptually, we are moving from a Column to Column + path but modelling the path as an evaluator. But the query layer is deciding the evaluator instead of the storage layer.\r\n>\r\n> The evaluator seems to be set at the JVM level but in practice, it's possible for each table to have a different evaluator and in fact, it's possible that each segment can have a different evaluator.\r\n\r\nThe query layer does not decide, the query layer just _produces_ the evaluator from the query. It does not know what evaluator implementation it is producing, just whatever has been registered. It just won’t push the evaluator down unless the identifier is a column identifier rather than an expression.\r\n\r\nThe evaluator, having captured information from the query, is pushed down to the storage layer. The storage layer then presents storage layer capabilities (I.e. dictionary + forward index) to the evaluator, which can interrogate and choose what to do with them. \r\n\r\nThink of the evaluator as a _mediator_ between the query and storage layers for which any implementation can be registered via SPI. It encapsulates the logic of the function, and needs to know all relevant storage capabilities present in the deployment. The right evaluator to register for a given Pinot _deployment_ is the one that matches all storage capabilities in the deployment.\r\n\r\nThe evaluator must decide how to evaluate its function based on what storage capabilities it is presented with in evaluateBlock. If evaluateBlock is presented with, say, a BytesDictionary, it must be able handle extracting JSON encoded as bytes from the dictionary and evaluating a JSON path against it, just as it must be able to handle reading JSON from a raw forward index, or from whatever ForwardIndexReader from whatever storage plugin it is presented with. \r\n\r\nTo illustrate the evaluator’s responsibility to understand the storage, the DefaultJsonPathEvaluator in this PR knows how to work with all storage capabilities for storing JSON currently present in Pinot (dictionarised string, bytes, raw string, bytes, JSON type column or not) but adding a storage plugin requires creating a new evaluator  which understands the custom storage but delegates to a default evaluator for everything else, and this evaluator must be registered via the SPI.\r\n\r\nThis has the ergonomic benefit of being able to implement storage plugins which deviate from the ForwardIndexReader interface. Completely new access patterns and the necessary interfaces can be implemented without changing the ForwardIndexReader interface: \r\n1. Implement new ForwardIndexReader with a previously inconceivable API\r\n2. Implement an evaluator which uses the new API for instances of that ForwardIndexReader, otherwise delegate to default implementation \r\n3. Register the evaluator \r\n4. (Optional) later enhance the ForwardIndexReader interface with method supporting a tried and proven access pattern, explain to everybody why it’s a good idea with data to refer to\r\n\r\nThis circumnavigates the need to form design consensus before having a proven storage implementation and should reduce the number of changes to the ForwardIndexReader interface to those which have already been **proven to make sense**, while never touching the query layer once the relevant TransformFunction has been modified to push an evaluator down. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982140750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982141873","html_url":"https://github.com/apache/pinot/pull/7780#issuecomment-982141873","issue_url":"https://api.github.com/repos/apache/pinot/issues/7780","id":982141873,"node_id":"IC_kwDOATCU_c46ikux","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-30T00:00:20Z","updated_at":"2021-11-30T00:00:20Z","author_association":"CONTRIBUTOR","body":"> > Why do we have this config on both controller and server?\r\n> > Seems the controller one is for allowing split commit from servers. Should we consider removing this controller config? Controller should always allow splitting commit, unless there are some overhead enabling it\r\n> > @mcvsubbu wdyt?\r\n> \r\n> That makes sense. Controller should properly handles calls from split committers as well as non-split committers. It's up to server configuration to enable/disable split commit. Maybe there's a legacy reason for it. Let's wait for @mcvsubbu to shed light on this.\r\n\r\nI am not sure why we decided to have config both ways when it started. It may have been due to:\r\n- Upgrade order\r\n- We wanted finer control\r\n- Implementation order (I think we were implementing it in time for Uber to create the split commit handler for deep-store bypass)\r\n- Configuration of the vip address on the controller side. In LinkedIn, we don't use deep store, but the pushes go via the controller. The idea was to use a vip to do the segment push. So, when a realtime segment push comes along, the controller has no context of who is pushing the segment (at the time, we had no ACLs I think). The controller would then store an orphaned file. If the controller is configured to disable split commit, then it can reject the segment.\r\n- Other factors that I don't remember from 4 years ago.\r\n\r\nNow that we move it to be default, let us see if anyone needs to change it back (say, due to vip config). \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/982141873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]