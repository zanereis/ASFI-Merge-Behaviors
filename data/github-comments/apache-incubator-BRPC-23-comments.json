[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508617433","html_url":"https://github.com/apache/brpc/issues/833#issuecomment-508617433","issue_url":"https://api.github.com/repos/apache/brpc/issues/833","id":508617433,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODYxNzQzMw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T03:26:50Z","updated_at":"2019-07-05T03:26:50Z","author_association":"MEMBER","body":"According to C++ standard, inline functions would not be applied by [One Definition Rule](https://en.wikipedia.org/wiki/One_Definition_Rule)\b. The complier is not required to report the error. But In this case, these two functions are exactly same. It's ok to remove one of them.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508617433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508624091","html_url":"https://github.com/apache/brpc/issues/815#issuecomment-508624091","issue_url":"https://api.github.com/repos/apache/brpc/issues/815","id":508624091,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODYyNDA5MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T04:19:07Z","updated_at":"2019-07-05T04:19:07Z","author_association":"CONTRIBUTOR","body":"系统版本是什么？ 看下 #608","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508624091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508626374","html_url":"https://github.com/apache/brpc/issues/834#issuecomment-508626374","issue_url":"https://api.github.com/repos/apache/brpc/issues/834","id":508626374,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODYyNjM3NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T04:35:52Z","updated_at":"2019-07-05T04:35:52Z","author_association":"CONTRIBUTOR","body":"brpc的主要定位是在公司内网中构建各种务，内网环境中tcp已经足够好了。brpc服务一般不会直接对外，而是会经过4层及7层负载均衡(ELB)，在此处做其他协议(quic, kcp etc)的适配更佳。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508626374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508734622","html_url":"https://github.com/apache/brpc/issues/835#issuecomment-508734622","issue_url":"https://api.github.com/repos/apache/brpc/issues/835","id":508734622,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODczNDYyMg==","user":{"login":"hellowalnut","id":46363031,"node_id":"MDQ6VXNlcjQ2MzYzMDMx","avatar_url":"https://avatars.githubusercontent.com/u/46363031?v=4","gravatar_id":"","url":"https://api.github.com/users/hellowalnut","html_url":"https://github.com/hellowalnut","followers_url":"https://api.github.com/users/hellowalnut/followers","following_url":"https://api.github.com/users/hellowalnut/following{/other_user}","gists_url":"https://api.github.com/users/hellowalnut/gists{/gist_id}","starred_url":"https://api.github.com/users/hellowalnut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hellowalnut/subscriptions","organizations_url":"https://api.github.com/users/hellowalnut/orgs","repos_url":"https://api.github.com/users/hellowalnut/repos","events_url":"https://api.github.com/users/hellowalnut/events{/privacy}","received_events_url":"https://api.github.com/users/hellowalnut/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T11:54:34Z","updated_at":"2019-07-05T11:54:34Z","author_association":"NONE","body":"已解决，守护进程fork的问题，#208","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508734622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508889876","html_url":"https://github.com/apache/brpc/issues/4#issuecomment-508889876","issue_url":"https://api.github.com/repos/apache/brpc/issues/4","id":508889876,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODg4OTg3Ng==","user":{"login":"taadis","id":16029681,"node_id":"MDQ6VXNlcjE2MDI5Njgx","avatar_url":"https://avatars.githubusercontent.com/u/16029681?v=4","gravatar_id":"","url":"https://api.github.com/users/taadis","html_url":"https://github.com/taadis","followers_url":"https://api.github.com/users/taadis/followers","following_url":"https://api.github.com/users/taadis/following{/other_user}","gists_url":"https://api.github.com/users/taadis/gists{/gist_id}","starred_url":"https://api.github.com/users/taadis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taadis/subscriptions","organizations_url":"https://api.github.com/users/taadis/orgs","repos_url":"https://api.github.com/users/taadis/repos","events_url":"https://api.github.com/users/taadis/events{/privacy}","received_events_url":"https://api.github.com/users/taadis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-06T02:13:32Z","updated_at":"2019-07-06T02:13:32Z","author_association":"NONE","body":"同问需求 +1","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/508889876/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509064821","html_url":"https://github.com/apache/brpc/issues/827#issuecomment-509064821","issue_url":"https://api.github.com/repos/apache/brpc/issues/827","id":509064821,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTA2NDgyMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T03:20:13Z","updated_at":"2019-07-08T03:20:13Z","author_association":"CONTRIBUTOR","body":"建议跑下cpu profiler或perf，根据量化的热点进行优化","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509064821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509065237","html_url":"https://github.com/apache/brpc/issues/836#issuecomment-509065237","issue_url":"https://api.github.com/repos/apache/brpc/issues/836","id":509065237,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTA2NTIzNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T03:22:51Z","updated_at":"2019-07-08T03:22:51Z","author_association":"CONTRIBUTOR","body":"1. body可以是任意格式（包括二进制），由content-type区分，这是http本身就支持的。比如当content-type是application/proto时，brpc会认为body是pb（的序列化结果）\r\n2. 不直接支持，需要用户自己做","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509065237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509077044","html_url":"https://github.com/apache/brpc/issues/836#issuecomment-509077044","issue_url":"https://api.github.com/repos/apache/brpc/issues/836","id":509077044,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTA3NzA0NA==","user":{"login":"hongbshi","id":42710460,"node_id":"MDQ6VXNlcjQyNzEwNDYw","avatar_url":"https://avatars.githubusercontent.com/u/42710460?v=4","gravatar_id":"","url":"https://api.github.com/users/hongbshi","html_url":"https://github.com/hongbshi","followers_url":"https://api.github.com/users/hongbshi/followers","following_url":"https://api.github.com/users/hongbshi/following{/other_user}","gists_url":"https://api.github.com/users/hongbshi/gists{/gist_id}","starred_url":"https://api.github.com/users/hongbshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hongbshi/subscriptions","organizations_url":"https://api.github.com/users/hongbshi/orgs","repos_url":"https://api.github.com/users/hongbshi/repos","events_url":"https://api.github.com/users/hongbshi/events{/privacy}","received_events_url":"https://api.github.com/users/hongbshi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-08T04:46:15Z","updated_at":"2019-07-08T04:46:15Z","author_association":"NONE","body":"客户端通过http post 访问服务, content-type为urlencode时, brpc框架会如何处理? 如何让brpc框架不进行处理，交由service实现方处理? 非常感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509077044/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":2,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509928799","html_url":"https://github.com/apache/brpc/issues/837#issuecomment-509928799","issue_url":"https://api.github.com/repos/apache/brpc/issues/837","id":509928799,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTkyODc5OQ==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T06:33:35Z","updated_at":"2019-07-10T06:35:33Z","author_association":"CONTRIBUTOR","body":"correlation_id当做sequence number用吧？ 是用来支持single连接吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509928799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509932346","html_url":"https://github.com/apache/brpc/issues/837#issuecomment-509932346","issue_url":"https://api.github.com/repos/apache/brpc/issues/837","id":509932346,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTkzMjM0Ng==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T06:47:25Z","updated_at":"2019-07-10T06:47:25Z","author_association":"CONTRIBUTOR","body":"> 是用来支持single连接吗？\r\n\r\n是的想搞单连接，不过correlation_id是64位的，seq num是32位的，重新生成一个call_id可行不","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509932346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509934412","html_url":"https://github.com/apache/brpc/issues/837#issuecomment-509934412","issue_url":"https://api.github.com/repos/apache/brpc/issues/837","id":509934412,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTkzNDQxMg==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T06:54:51Z","updated_at":"2019-07-10T06:54:51Z","author_association":"CONTRIBUTOR","body":"这个需要你自己记录seq num和correlation_id的映射。可以参考其他协议类似的问题是如何处理的，比如h2。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509934412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509935456","html_url":"https://github.com/apache/brpc/issues/837#issuecomment-509935456","issue_url":"https://api.github.com/repos/apache/brpc/issues/837","id":509935456,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTkzNTQ1Ng==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-10T06:58:44Z","updated_at":"2019-07-10T06:58:44Z","author_association":"CONTRIBUTOR","body":"感谢！我看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/509935456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/510839788","html_url":"https://github.com/apache/brpc/issues/839#issuecomment-510839788","issue_url":"https://api.github.com/repos/apache/brpc/issues/839","id":510839788,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMDgzOTc4OA==","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-12T10:39:12Z","updated_at":"2019-07-12T10:39:12Z","author_association":"NONE","body":"bthread/context.h  中bthread切换问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/510839788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511110023","html_url":"https://github.com/apache/brpc/issues/697#issuecomment-511110023","issue_url":"https://api.github.com/repos/apache/brpc/issues/697","id":511110023,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTExMDAyMw==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T10:10:02Z","updated_at":"2019-07-13T10:10:02Z","author_association":"NONE","body":"> > 已经把bvar的线程移动到main函数之后执行，以保证fork之后才执行bvar线程．\r\n> > 目前进行业务压测，超时问题应该是bthread_worker_usage达到上限导致,跟预期服务承载能力不相符，目前还在排查．\r\n> > ![1755025561](https://user-images.githubusercontent.com/8772285/55847307-5cf25080-5b7b-11e9-8b62-20c5aae2a2d8.jpg)\r\n> > ![376294209](https://user-images.githubusercontent.com/8772285/55847315-61b70480-5b7b-11e9-9f03-238b22bb9d5f.jpg)\r\n> > 但是随着qps继续上涨，服务会直接卡死，访问前端页面(http://_:6104,http://_:6104/vars)也不行，压测全部报超时error\r\n> > Search request Error1: 1008: [E1008]Reached timeout=3500ms @_:6104 Query : 爱情练习题 Search request Error1: 1008: [E1008]Reached timeout=3500ms @_:6104 Query : 爱情两部曲\r\n> > Search request Error1: 1008: [E1008]Reached timeout=3500ms @_:6104 Query : 爱情两好三坏 Search request Error1: 1008: [E1008]Reached timeout=3500ms @_:6104 Query : 爱情领域\r\n> > 且服务cpu占用基本为0,服务不能自己恢复正常,只能重启解决．\r\n> > 但是netstat查看监听端口正常,处于LINSEN状态，并且使用telnet访问此端口也能连接上.\r\n> > 最后发现是服务的线程block住，导致的问题.\r\n> > ![Screenshot from 2019-04-10 14:16:22](https://user-images.githubusercontent.com/8772285/55856000-989d1280-5b9b-11e9-89d2-060053fac326.png)\r\n> > 我的理解是这样子的:由于我的服务还会使用brpc client往下游发送数据，而造成bthread资源不够,所以整体block住,不知道对不对.\r\n> > 请问这种情况如何避免?\r\n> \r\n> 我们目前在用的bvar也遇到了同样的core dump，请问你是如何将bvar线程移到main函数之后的？\r\n\r\n我记得bvar的初始化是放在一个全局变量构造过程中的，只要把这个过程移动到brpc服务启动的时候就行。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511110023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511125867","html_url":"https://github.com/apache/brpc/issues/839#issuecomment-511125867","issue_url":"https://api.github.com/repos/apache/brpc/issues/839","id":511125867,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyNTg2Nw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T14:22:20Z","updated_at":"2019-07-13T14:22:20Z","author_association":"MEMBER","body":"please refer to this issue https://github.com/apache/incubator-brpc/issues/756. The latest code of libcontext has already supported aarch64, you can have a try.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511125867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511126213","html_url":"https://github.com/apache/brpc/issues/833#issuecomment-511126213","issue_url":"https://api.github.com/repos/apache/brpc/issues/833","id":511126213,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTEyNjIxMw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-13T14:27:35Z","updated_at":"2019-07-13T14:27:35Z","author_association":"MEMBER","body":"Fixed in https://github.com/apache/incubator-brpc/pull/841","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511126213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511213424","html_url":"https://github.com/apache/brpc/issues/842#issuecomment-511213424","issue_url":"https://api.github.com/repos/apache/brpc/issues/842","id":511213424,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxMzQyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T15:45:32Z","updated_at":"2019-07-14T15:45:32Z","author_association":"CONTRIBUTOR","body":"有具体的schema么？另外你可以看下cpu profiler中的热点有何区别","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511213424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511214787","html_url":"https://github.com/apache/brpc/issues/838#issuecomment-511214787","issue_url":"https://api.github.com/repos/apache/brpc/issues/838","id":511214787,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTIxNDc4Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-14T16:03:56Z","updated_at":"2019-07-14T16:03:56Z","author_association":"CONTRIBUTOR","body":"没有适配过这个架构，手头也没有相应的机器，你可以帮我们看看相关的编译错误是否很多，以及易于适配，合适的话可以发pr","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511214787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511283140","html_url":"https://github.com/apache/brpc/issues/839#issuecomment-511283140","issue_url":"https://api.github.com/repos/apache/brpc/issues/839","id":511283140,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTI4MzE0MA==","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T06:05:07Z","updated_at":"2019-07-15T06:05:07Z","author_association":"NONE","body":"thanks","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511283140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511317202","html_url":"https://github.com/apache/brpc/issues/838#issuecomment-511317202","issue_url":"https://api.github.com/repos/apache/brpc/issues/838","id":511317202,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTMxNzIwMg==","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T08:36:36Z","updated_at":"2019-07-15T08:36:36Z","author_association":"NONE","body":"在aarch64下编译之后，运行会触发 LOG(FATAL) << \"bthread=\" << g->current_tid() << \" sched_to itself!\";\r\n请问下哪种情况下会有这个情况？\r\nhttps://github.com/apache/incubator-brpc/blob/f43bdcec3a73ecc93859c372f2650334d412f065/src/bthread/task_group.cpp#L566-L630","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511317202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511378736","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511378736","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511378736,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTM3ODczNg==","user":{"login":"kaydxh","id":16474709,"node_id":"MDQ6VXNlcjE2NDc0NzA5","avatar_url":"https://avatars.githubusercontent.com/u/16474709?v=4","gravatar_id":"","url":"https://api.github.com/users/kaydxh","html_url":"https://github.com/kaydxh","followers_url":"https://api.github.com/users/kaydxh/followers","following_url":"https://api.github.com/users/kaydxh/following{/other_user}","gists_url":"https://api.github.com/users/kaydxh/gists{/gist_id}","starred_url":"https://api.github.com/users/kaydxh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaydxh/subscriptions","organizations_url":"https://api.github.com/users/kaydxh/orgs","repos_url":"https://api.github.com/users/kaydxh/repos","events_url":"https://api.github.com/users/kaydxh/events{/privacy}","received_events_url":"https://api.github.com/users/kaydxh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-15T12:18:19Z","updated_at":"2019-07-15T12:18:19Z","author_association":"NONE","body":"server设置了windows大小，好像还是不行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511378736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511630027","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511630027","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511630027,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTYzMDAyNw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T01:36:52Z","updated_at":"2019-07-16T01:37:52Z","author_association":"MEMBER","body":"@kaydxh Client还需要先发一个小的包，比如访问下内置服务/health","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511630027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511651885","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511651885","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511651885,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTY1MTg4NQ==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T03:38:01Z","updated_at":"2019-07-16T03:38:01Z","author_association":"NONE","body":"> @kaydxh Client还需要先发一个小的包，比如访问下内置服务/health\r\n\r\n试了下，先发个小包再发大包，确实没有windows size的问题了。\r\n但是，如果brpc端配置protocol=h2:grpc，connection_type=single，一段时间没有请求->连接断开之后，直接发大包，就又出现windows size的问题了，必须重新再发一个小包。\r\n\r\n可惜server端grpc没有内置的/health服务，小包这个trick还不太好应用。\r\n\r\n总的来说，是一个解决办法，但比较麻烦，不够完美。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511651885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511653453","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511653453","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511653453,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTY1MzQ1Mw==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T03:47:57Z","updated_at":"2019-07-16T03:47:57Z","author_association":"NONE","body":"client h2setting里默认的window_size可以改大吗？\r\n手动把h2_client_stream_window_size、h2_client_connection_window_size两个参数设大也不行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511653453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511662029","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511662029","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511662029,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTY2MjAyOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T04:40:00Z","updated_at":"2019-07-16T04:40:00Z","author_association":"MEMBER","body":"这两个值是可以设置的，确保下server是否收到了，以及正确返回了。然后看一下 ip:port/connections 中client channel的socket页面（有链接可以点），在页面里找到agent_socket_id，然后看一下ip:port/sockets/<agent_socket_id>里的h2 local setting是不是正确","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511662029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511689167","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511689167","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511689167,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTY4OTE2Nw==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T06:49:18Z","updated_at":"2019-07-16T06:49:18Z","author_association":"NONE","body":"\r\n![image](https://user-images.githubusercontent.com/6361566/61271883-5574c000-a7d8-11e9-8ada-d90482181ed6.png)\r\n在进程启动的时候直接通过gflag配置h2_client_connection_window_size=10485760为10M，h2_client_stream_window_size也是10M，但通过页面 ip:port/sockets/<agent_socket_id>里的h2 local setting，仍然是默认值：conn_window_size=1M、stream_window_size=256K。\r\n看来是没有修改成功。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511689167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511712146","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511712146","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511712146,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTcxMjE0Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T08:07:24Z","updated_at":"2019-07-16T08:07:24Z","author_association":"MEMBER","body":"我本地试了下，是可以正确设置的，把你起client程序的命令发一下吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511712146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511731424","html_url":"https://github.com/apache/brpc/issues/843#issuecomment-511731424","issue_url":"https://api.github.com/repos/apache/brpc/issues/843","id":511731424,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTczMTQyNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T09:03:16Z","updated_at":"2019-07-16T09:03:16Z","author_association":"MEMBER","body":"主要用在什么场景？如果上下游都是brpc，可以用https://github.com/apache/incubator-brpc/blob/master/docs/en/streaming_rpc.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511731424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511734834","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511734834","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511734834,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTczNDgzNA==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T09:13:04Z","updated_at":"2019-07-16T09:13:04Z","author_association":"NONE","body":"client端进程启动流程大概是这样的：\r\nbrpc::Server server; server.AddService(xxx); brpc::ServerOptions options; options.h2_settings.stream_window_size=brpc::policy::FLAGS_h2_client_stream_window_size; options.h2_settings.connection_window_size=brpc::policy::FLAGS_h2_client_connection_window_size; (这两个size的赋值是新加的，好像没什么用）server.Start(ip:port, &options);\r\n\r\nclient请求grpc的流程大概是这样的：\r\n分别申请brpc::Controller cntl、Channel对象 channel，brpc::ChannelOptions options; options.protocol=\"h2:grpc\"; options.connection_type=\"single\";channel.Init(grpc_ip:port, &options);然后定义grpc服务proto service对应的xxx_Stub stub(&channel); stub.service_name(&cntl, &req, &rsp, NULL);","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511734834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511738713","html_url":"https://github.com/apache/brpc/issues/843#issuecomment-511738713","issue_url":"https://api.github.com/repos/apache/brpc/issues/843","id":511738713,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTczODcxMw==","user":{"login":"crise1990","id":16801282,"node_id":"MDQ6VXNlcjE2ODAxMjgy","avatar_url":"https://avatars.githubusercontent.com/u/16801282?v=4","gravatar_id":"","url":"https://api.github.com/users/crise1990","html_url":"https://github.com/crise1990","followers_url":"https://api.github.com/users/crise1990/followers","following_url":"https://api.github.com/users/crise1990/following{/other_user}","gists_url":"https://api.github.com/users/crise1990/gists{/gist_id}","starred_url":"https://api.github.com/users/crise1990/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crise1990/subscriptions","organizations_url":"https://api.github.com/users/crise1990/orgs","repos_url":"https://api.github.com/users/crise1990/repos","events_url":"https://api.github.com/users/crise1990/events{/privacy}","received_events_url":"https://api.github.com/users/crise1990/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T09:23:45Z","updated_at":"2019-07-16T09:23:45Z","author_association":"NONE","body":"> 主要用在什么场景？如果上下游都是brpc，可以用https://github.com/apache/incubator-brpc/blob/master/docs/en/streaming_rpc.md\r\n\r\n我们的服务目前基于 brpc（v0.9.5）开发。使用场景为语音识别/合成。\r\n目前服务版本升级，需要同时支持请求/应答双向流。由于要走 NGINX/openresty 反向代理，所以brpc client方式可能不适合。\r\n由于brpc的一些特性十分好用，所以我们想在之前brpc server的基础上进行迭代开发，筛选后可行的方案为HTTP/2（brpc不支持Websocket）。\r\n目前比较符合我们需求的是gRPC streaming RPC（NGINX支持gRPC反向代理）或者HTTP/2 API（考虑过libcurl，但测试发现用libcurl发h2给brpc server会被解析为h1.1）。\r\n关系为：gRPC client->NGINX/openresty->brpc(gRPC) server","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511738713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511739962","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511739962","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511739962,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTczOTk2Mg==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T09:27:17Z","updated_at":"2019-07-16T09:27:17Z","author_association":"NONE","body":"gdb断点看了下，进到H2StreamContext::ConsumeWindowSize这个函数的时候，第一个判断条件就没通过，_remote_window_left已经小于size了。\r\n![image](https://user-images.githubusercontent.com/6361566/61282109-5532ef80-a7ed-11e9-8e3b-b5244afe6f81.png)\r\n实际各个变量的情况如下图：\r\n![image](https://user-images.githubusercontent.com/6361566/61282279-a5aa4d00-a7ed-11e9-8af7-8eb4127d7d0f.png)\r\n与H2StreamContext关联的H2Context对象_conn_ctx的_unack_local_settings里面初始化几个的window_size变量，值都是对的，是我通过h2_client_stream_window_size、h2_client_connection_window_size这两个gflag传进去的值，均>10M。\r\n但是_remote_window_left的值却很小，百K级别，并且在第一次请求的时候，_remote_window_left就这么小了，导致一直报 ”remote_window_left is not enough“的错。\r\n\r\n另外，每次请求虽然失败了，但最后还是触发了H2Context::OnSettings，从grpc server端ParseH2Settings(H2Settings* out, butil::IOBufBytesIterator& it, size_t n)这个函数也执行到了out->stream_window_size = value;这里，value也是M级别的，跟grpc server的配置是吻合的。\r\nconst int64_t window_diff =\r\n        static_cast<int64_t>(_remote_settings.stream_window_size)\r\n        - old_stream_window_size; window_diff的计算结果正常，也成功触发了AddWindowSize，但是下一次请求仍然是”remote_window_left is not enough“\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511739962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511750948","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511750948","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511750948,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTc1MDk0OA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T09:58:49Z","updated_at":"2019-07-16T09:58:49Z","author_association":"MEMBER","body":"FLAGS_h2_client_stream_window_size这个值是代表client的配置，一般是写在起程序的conf里的，不是赋给ServerOptions.h2_settings的，该值是server端的配置。一般用法是这样的，./client --h2_client_stream_window_size=xxx --h2_client_connection_window_size=yyy","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511750948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511752499","html_url":"https://github.com/apache/brpc/issues/840#issuecomment-511752499","issue_url":"https://api.github.com/repos/apache/brpc/issues/840","id":511752499,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTc1MjQ5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T10:03:08Z","updated_at":"2019-07-16T10:03:08Z","author_association":"CONTRIBUTOR","body":"这个位置是在切换bthread过程中，比较特殊，打印日志中又用到bthread的tls，整体行为应该是undefined","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511752499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511769400","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511769400","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511769400,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTc2OTQwMA==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T11:00:18Z","updated_at":"2019-07-16T11:00:18Z","author_association":"NONE","body":"> 值\r\n赋值给ServerOptions.h2_settings是调试的时候加的，因为担心走到箭头这个分支里去了。\r\n确实不需要加这段赋值的，最开始报window-size错的时候，也没加这段。\r\n![image](https://user-images.githubusercontent.com/6361566/61289346-b5309280-a7fb-11e9-9a80-b7fd452da989.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511769400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511770567","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-511770567","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":511770567,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMTc3MDU2Nw==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-16T11:04:12Z","updated_at":"2019-07-16T11:04:12Z","author_association":"NONE","body":"> FLAGS_h2_client_stream_window_size这个值是代表client的配置，一般是写在起程序的conf里的，不是赋给ServerOptions.h2_settings的，该值是server端的配置。一般用法是这样的，./client --h2_client_stream_window_size=xxx --h2_client_connection_window_size=yyy\r\n\r\n进程启动方式应该没问题，其他配置都正常读到的。\r\n我是用配置文件解析gflags，启动命令：./bin -flagfile=flag.conf\r\n代码里\r\nint main(int argc, char* argv[]) {\r\n    // Parse gflags.\r\n    google::ParseCommandLineFlags(&argc, &argv, true);\r\n    brpc::Server server;\r\n   ...\r\n配置文件conf.flag里\r\n--h2_client_connection_window_size=10485760\r\n--h2_client_stream_window_size=10485760","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/511770567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512089737","html_url":"https://github.com/apache/brpc/issues/392#issuecomment-512089737","issue_url":"https://api.github.com/repos/apache/brpc/issues/392","id":512089737,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjA4OTczNw==","user":{"login":"unlimitlearning","id":20830657,"node_id":"MDQ6VXNlcjIwODMwNjU3","avatar_url":"https://avatars.githubusercontent.com/u/20830657?v=4","gravatar_id":"","url":"https://api.github.com/users/unlimitlearning","html_url":"https://github.com/unlimitlearning","followers_url":"https://api.github.com/users/unlimitlearning/followers","following_url":"https://api.github.com/users/unlimitlearning/following{/other_user}","gists_url":"https://api.github.com/users/unlimitlearning/gists{/gist_id}","starred_url":"https://api.github.com/users/unlimitlearning/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unlimitlearning/subscriptions","organizations_url":"https://api.github.com/users/unlimitlearning/orgs","repos_url":"https://api.github.com/users/unlimitlearning/repos","events_url":"https://api.github.com/users/unlimitlearning/events{/privacy}","received_events_url":"https://api.github.com/users/unlimitlearning/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-17T03:42:10Z","updated_at":"2019-07-17T03:42:10Z","author_association":"NONE","body":"我现在也遇到了这个问题，请问楼主找到解决方案了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512089737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512091416","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512091416","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512091416,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjA5MTQxNg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-17T03:52:18Z","updated_at":"2019-07-17T03:52:18Z","author_association":"MEMBER","body":"@kaydxh @supernovaer 关于要先发一个小包来解决setting交换的问题，spec对这个问题有相关说明，当client还未收到server setting时，可以先发数据，如下图\r\n![image](https://user-images.githubusercontent.com/4475779/61345771-fe7af380-a888-11e9-8bc4-7cdd60b072f0.png)\r\n这种情况下，直接跳过流控就好，会在近期修复这个问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512091416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512256824","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512256824","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512256824,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjI1NjgyNA==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-17T13:34:40Z","updated_at":"2019-07-17T13:34:40Z","author_association":"NONE","body":"把H2Settings构造函数connect_window_size的默认值加大，临时解决这个问题了。\r\n期待官方的修复~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512256824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512260187","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512260187","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512260187,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjI2MDE4Nw==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-17T13:43:18Z","updated_at":"2019-07-17T13:43:18Z","author_association":"NONE","body":"之前调试没弄明白的几个问题，现在大概也明白了：\r\n1. h2_client_connection_window_size、h2_client_stream_window_size这俩配置参数，只赋值给了_unack_local_settings，没有影响到remote_settings，所以设这两个gflag参数是没有用的\r\n2. req帧虽然因为windows_size的问题，没有发出去，但是setting帧还是发出去了\r\n3. 虽然setting帧顺利收发了，也解析出了grpc server的设置（已经调大过了），但是因为请求失败，连接断开了，Connection reset by peer；_remote_window_left应该是与socket绑定的，连接断开，下次发请求又建了新的socket，然后又用了H2Settings构造函数的默认size\r\n![image](https://user-images.githubusercontent.com/6361566/61380398-e08aae80-a8db-11e9-89f5-fd58f415a44c.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512260187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512260655","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512260655","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512260655,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjI2MDY1NQ==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-17T13:44:19Z","updated_at":"2019-07-17T13:44:19Z","author_association":"NONE","body":"> 把H2Settings构造函数connect_window_size的默认值加大，临时解决这个问题了。\r\n> 期待官方的修复~\r\n\r\n说错了，是把 stream_window_size的默认值加大","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512260655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512632676","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512632676","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512632676,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjYzMjY3Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T01:51:27Z","updated_at":"2019-07-18T01:51:27Z","author_association":"MEMBER","body":"h2_client_connection_window_size/h2_client_stream_window_size是有用的，这是client的参数，你赋给了serveroptions是没用的，这是让client的配置错误地在server上应用，这是client告诉server，自己这里有多大的windowsize，你需要在client的程序启动时设置","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512632676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512649588","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512649588","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512649588,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY0OTU4OA==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T03:23:12Z","updated_at":"2019-07-18T03:23:12Z","author_association":"NONE","body":"> h2_client_connection_window_size/h2_client_stream_window_size是有用的，这是client的参数，你赋给了serveroptions是没用的，这是让client的配置错误地在server上应用，这是client告诉server，自己这里有多大的windowsize，你需要在client的程序启动时设置\r\n\r\n1. 赋给了serveroptions是没用的，这一点明白了，前面给它赋值是调试的时候胡乱加的，当时没想太明白\r\n2.直接设置这两个参数h2_client_connection_window_size/h2_client_stream_window_size也没有用，已经在client启动的时候设置了\r\n3. 设这两个参数也没用的原因，是因为AppendAndDestroySelf函数sctx->Init(ctx, id);这里，\r\n![image](https://user-images.githubusercontent.com/6361566/61426562-63981d00-a94d-11e9-8991-93dc102a4227.png)\r\n![image](https://user-images.githubusercontent.com/6361566/61426577-67c43a80-a94d-11e9-8a2d-03b4449e03e4.png)\r\nstream_window_size的初始值是写死的，跟上面的两个gflag变量并没有关系\r\n4. 这里是不是可以给H2Settings.stream_window_size新增一个初始值gflag变量？这里其实是server_remote_setting，含义上跟h2_client_xxx_window_size也不太一样","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512649588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512651473","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512651473","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512651473,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY1MTQ3Mw==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T03:34:00Z","updated_at":"2019-07-18T03:34:00Z","author_association":"NONE","body":"修改H2Settings构造函数stream_window_size的初始化值，这是我本地临时的解决方案。\r\n非常期待官方的修复~\r\n是不是可以在建立连接的时候，先发settings帧，获取server端的配置，再发请求？\r\n或者在因为本地判定remote_window_size不够这个原因导致请求失败时，不要关闭socket，（因为其实setting帧已经发出去了，也已经收到server回包成功解析到server配置了），或者把当前socket已成功解析到的remote_settings缓存一下，作为后面新建socket的初始值（而不是用写死或gflag配置的默认值）？这样至少保证下一个请求是正常的。\r\n小小的建议，没有经过成熟的思考","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512651473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512657369","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-512657369","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":512657369,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY1NzM2OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T04:10:39Z","updated_at":"2019-07-18T04:10:39Z","author_association":"MEMBER","body":"> 2\\. 设这两个参数也没用的原因，是因为AppendAndDestroySelf函数sctx->Init(ctx, id);这里，\r\n\r\n在H2Context构造的时候会把默认值用FLAGS_h2_client_stream_window_size以及FLAGS_h2_client_max_frame_size替换，所以还是用的这两个参数\r\n\r\n\r\n\r\n> 是不是可以在建立连接的时候，先发settings帧，获取server端的配置，再发请求？\r\n\r\nsepc说可以先发请求以减少延迟\r\n\r\n\r\n> 或者在因为本地判定remote_window_size不够这个原因导致请求失败时，不要关闭socket，（因为其实setting帧已经发出去了，也已经收到server回包成功解析到server配置了），或者把当前socket已成功解析到的remote_settings缓存一下，作为后面新建socket的初始值（而不是用写死或gflag配置的默认值）？这样至少保证下一个请求是正常的。\r\n\r\n现在当某一个包比server remote window还大时，目前的做法是直接失败了。可以改成先发一个包，等对方的window_update发过来以后，再继续发下一个包，这个目前是个TODO","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512657369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512668391","html_url":"https://github.com/apache/brpc/issues/843#issuecomment-512668391","issue_url":"https://api.github.com/repos/apache/brpc/issues/843","id":512668391,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY2ODM5MQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T05:17:15Z","updated_at":"2019-07-18T05:17:15Z","author_association":"CONTRIBUTOR","body":"nginx 和 upstream server 之间还不支持grpc和h2c协议吧？貌似只在和客户端方向之间的通信上支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512668391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512668777","html_url":"https://github.com/apache/brpc/issues/846#issuecomment-512668777","issue_url":"https://api.github.com/repos/apache/brpc/issues/846","id":512668777,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMjY2ODc3Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-18T05:19:31Z","updated_at":"2019-07-18T05:19:31Z","author_association":"CONTRIBUTOR","body":"可以讲一下应用场景吗？发现指定DC，我们目前用的是consul template + file:// ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/512668777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513055099","html_url":"https://github.com/apache/brpc/issues/848#issuecomment-513055099","issue_url":"https://api.github.com/repos/apache/brpc/issues/848","id":513055099,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzA1NTA5OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T01:35:07Z","updated_at":"2019-07-19T01:35:07Z","author_association":"MEMBER","body":"把服务端口和内置服务的端口分开，详见 https://github.com/apache/incubator-brpc/blob/master/docs/cn/server.md#%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513055099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513055202","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-513055202","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":513055202,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzA1NTIwMg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T01:35:38Z","updated_at":"2019-07-19T01:35:38Z","author_association":"MEMBER","body":"用了最新的 libcontext 么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513055202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513055813","html_url":"https://github.com/apache/brpc/issues/848#issuecomment-513055813","issue_url":"https://api.github.com/repos/apache/brpc/issues/848","id":513055813,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzA1NTgxMw==","user":{"login":"aericpp","id":5396305,"node_id":"MDQ6VXNlcjUzOTYzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/5396305?v=4","gravatar_id":"","url":"https://api.github.com/users/aericpp","html_url":"https://github.com/aericpp","followers_url":"https://api.github.com/users/aericpp/followers","following_url":"https://api.github.com/users/aericpp/following{/other_user}","gists_url":"https://api.github.com/users/aericpp/gists{/gist_id}","starred_url":"https://api.github.com/users/aericpp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aericpp/subscriptions","organizations_url":"https://api.github.com/users/aericpp/orgs","repos_url":"https://api.github.com/users/aericpp/repos","events_url":"https://api.github.com/users/aericpp/events{/privacy}","received_events_url":"https://api.github.com/users/aericpp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T01:38:43Z","updated_at":"2019-07-19T01:38:43Z","author_association":"NONE","body":"> 把服务端口和内置服务的端口分开，详见 https://github.com/apache/incubator-brpc/blob/master/docs/cn/server.md#%E5%AE%89%E5%85%A8%E6%A8%A1%E5%BC%8F\r\n\r\n场景比较特殊，服务本身部署的环境就是不信任的，对127.0.0.1也仍不希望暴露Builtin Service。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513055813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513062351","html_url":"https://github.com/apache/brpc/issues/846#issuecomment-513062351","issue_url":"https://api.github.com/repos/apache/brpc/issues/846","id":513062351,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzA2MjM1MQ==","user":{"login":"tjxduck","id":176129,"node_id":"MDQ6VXNlcjE3NjEyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/176129?v=4","gravatar_id":"","url":"https://api.github.com/users/tjxduck","html_url":"https://github.com/tjxduck","followers_url":"https://api.github.com/users/tjxduck/followers","following_url":"https://api.github.com/users/tjxduck/following{/other_user}","gists_url":"https://api.github.com/users/tjxduck/gists{/gist_id}","starred_url":"https://api.github.com/users/tjxduck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjxduck/subscriptions","organizations_url":"https://api.github.com/users/tjxduck/orgs","repos_url":"https://api.github.com/users/tjxduck/repos","events_url":"https://api.github.com/users/tjxduck/events{/privacy}","received_events_url":"https://api.github.com/users/tjxduck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T02:13:33Z","updated_at":"2019-07-19T02:13:33Z","author_association":"NONE","body":"场景：多机房HA，服务前端proxy进行跨机房访问（例如把写操作都转到作为master的机房）\r\nconsul template 支持dc参数，结合 file:// 确实也是一种方法\r\n但如果能直接在 consul:// 里面支持就更好","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513062351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513069411","html_url":"https://github.com/apache/brpc/issues/848#issuecomment-513069411","issue_url":"https://api.github.com/repos/apache/brpc/issues/848","id":513069411,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzA2OTQxMQ==","user":{"login":"aericpp","id":5396305,"node_id":"MDQ6VXNlcjUzOTYzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/5396305?v=4","gravatar_id":"","url":"https://api.github.com/users/aericpp","html_url":"https://github.com/aericpp","followers_url":"https://api.github.com/users/aericpp/followers","following_url":"https://api.github.com/users/aericpp/following{/other_user}","gists_url":"https://api.github.com/users/aericpp/gists{/gist_id}","starred_url":"https://api.github.com/users/aericpp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aericpp/subscriptions","organizations_url":"https://api.github.com/users/aericpp/orgs","repos_url":"https://api.github.com/users/aericpp/repos","events_url":"https://api.github.com/users/aericpp/events{/privacy}","received_events_url":"https://api.github.com/users/aericpp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T02:48:42Z","updated_at":"2019-07-19T02:48:42Z","author_association":"NONE","body":"已解决\r\nServerOptions.options.has_builtin_services = false","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513069411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513102063","html_url":"https://github.com/apache/brpc/issues/843#issuecomment-513102063","issue_url":"https://api.github.com/repos/apache/brpc/issues/843","id":513102063,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzEwMjA2Mw==","user":{"login":"crise1990","id":16801282,"node_id":"MDQ6VXNlcjE2ODAxMjgy","avatar_url":"https://avatars.githubusercontent.com/u/16801282?v=4","gravatar_id":"","url":"https://api.github.com/users/crise1990","html_url":"https://github.com/crise1990","followers_url":"https://api.github.com/users/crise1990/followers","following_url":"https://api.github.com/users/crise1990/following{/other_user}","gists_url":"https://api.github.com/users/crise1990/gists{/gist_id}","starred_url":"https://api.github.com/users/crise1990/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crise1990/subscriptions","organizations_url":"https://api.github.com/users/crise1990/orgs","repos_url":"https://api.github.com/users/crise1990/repos","events_url":"https://api.github.com/users/crise1990/events{/privacy}","received_events_url":"https://api.github.com/users/crise1990/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T05:59:09Z","updated_at":"2019-07-19T05:59:09Z","author_association":"NONE","body":"> nginx 和 upstream server 之间还不支持grpc和h2c协议吧？貌似只在和客户端方向之间的通信上支持。\r\n\r\n[NGINX 在 1.13.10 及以后的版本中已经包含 grpc 相关功能](http://nginx.org/en/docs/http/ngx_http_grpc_module.html#grpc_pass)\r\n在 NGINX 配置文件 location 中，添加 grpc_pass （例如：grpcs://127.0.0.1:443;）即可实现 gRPC 反向代理的配置。目前我们的服务已经对这个 feature 验证并测试通过。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513102063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513103078","html_url":"https://github.com/apache/brpc/issues/843#issuecomment-513103078","issue_url":"https://api.github.com/repos/apache/brpc/issues/843","id":513103078,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzEwMzA3OA==","user":{"login":"crise1990","id":16801282,"node_id":"MDQ6VXNlcjE2ODAxMjgy","avatar_url":"https://avatars.githubusercontent.com/u/16801282?v=4","gravatar_id":"","url":"https://api.github.com/users/crise1990","html_url":"https://github.com/crise1990","followers_url":"https://api.github.com/users/crise1990/followers","following_url":"https://api.github.com/users/crise1990/following{/other_user}","gists_url":"https://api.github.com/users/crise1990/gists{/gist_id}","starred_url":"https://api.github.com/users/crise1990/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crise1990/subscriptions","organizations_url":"https://api.github.com/users/crise1990/orgs","repos_url":"https://api.github.com/users/crise1990/repos","events_url":"https://api.github.com/users/crise1990/events{/privacy}","received_events_url":"https://api.github.com/users/crise1990/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-19T06:03:58Z","updated_at":"2019-07-19T06:03:58Z","author_association":"NONE","body":"> nginx 和 upstream server 之间还不支持grpc和h2c协议吧？貌似只在和客户端方向之间的通信上支持。\r\n\r\n另外，NGINX 已经在较早的版本中支持 h2c 协议，详细信息可以参考[这里](http://nginx.org/en/docs/http/ngx_http_v2_module.html)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513103078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513629125","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-513629125","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":513629125,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzYyOTEyNQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T03:44:14Z","updated_at":"2019-07-22T03:44:14Z","author_association":"MEMBER","body":"> @kaydxh @supernovaer 关于要先发一个小包来解决setting交换的问题，spec对这个问题有相关说明，当client还未收到server setting时，可以先发数据，如下图\r\n> ![image](https://user-images.githubusercontent.com/4475779/61345771-fe7af380-a888-11e9-8bc4-7cdd60b072f0.png)\r\n> 这种情况下，直接跳过流控就好，会在近期修复这个问题。\r\n\r\nFixed in https://github.com/apache/incubator-brpc/pull/849","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513629125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513670203","html_url":"https://github.com/apache/brpc/issues/846#issuecomment-513670203","issue_url":"https://api.github.com/repos/apache/brpc/issues/846","id":513670203,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzY3MDIwMw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-22T07:14:37Z","updated_at":"2019-07-22T07:14:37Z","author_association":"CONTRIBUTOR","body":"好的，我们后面支持一下。如果较紧急，可以微信联系我：wxid_xxnxwidt7dzq21","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/513670203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514454884","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-514454884","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":514454884,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ1NDg4NA==","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T02:32:41Z","updated_at":"2019-07-24T02:32:41Z","author_association":"NONE","body":"是的\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514454884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514462306","html_url":"https://github.com/apache/brpc/issues/853#issuecomment-514462306","issue_url":"https://api.github.com/repos/apache/brpc/issues/853","id":514462306,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ2MjMwNg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T03:13:36Z","updated_at":"2019-07-24T03:13:36Z","author_association":"MEMBER","body":"Line continuation is possible with \\ after cmake 3.0. However we will fix the issue in cmake 2.x.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514462306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514466754","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-514466754","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":514466754,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ2Njc1NA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T03:39:53Z","updated_at":"2019-07-24T03:42:40Z","author_association":"MEMBER","body":"这个数字代表的是当前事件和上一个事件的时间差，不是说花在“Enter bigo.pb3.rank.RankService.GetRankItems”的时间，而是“接受到数据“到”准备进入具体用户函数“之间的时间。具体看一下https://github.com/apache/incubator-brpc/blob/master/docs/cn/rpcz.md。\r\n\r\n从你贴的图来看，Enter bigo.pb3.rank.RankService.GetRankItems前面的时间可能是ParseFromCompressedData占用比较多，看下req的解析时间是不是合理的。\r\n\r\nLeave bigo.pb3.rank.RankService.GetRankItems时间长说明你的实现函数耗时比较长。\r\n\r\nResponded之前会有压缩和序列化，对于兆级别的数据会达到毫秒级别（Gzip/Zlib)。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514466754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514467512","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-514467512","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":514467512,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ2NzUxMg==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T03:44:45Z","updated_at":"2019-07-24T03:44:45Z","author_association":"NONE","body":"也就是说，Leave bigo.pb3.rank.RankService.GetRankItems主要是GetRankItems这个函数本身的耗时？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514467512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514471008","html_url":"https://github.com/apache/brpc/issues/644#issuecomment-514471008","issue_url":"https://api.github.com/repos/apache/brpc/issues/644","id":514471008,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNDQ3MTAwOA==","user":{"login":"uniqueliulin","id":13608746,"node_id":"MDQ6VXNlcjEzNjA4NzQ2","avatar_url":"https://avatars.githubusercontent.com/u/13608746?v=4","gravatar_id":"","url":"https://api.github.com/users/uniqueliulin","html_url":"https://github.com/uniqueliulin","followers_url":"https://api.github.com/users/uniqueliulin/followers","following_url":"https://api.github.com/users/uniqueliulin/following{/other_user}","gists_url":"https://api.github.com/users/uniqueliulin/gists{/gist_id}","starred_url":"https://api.github.com/users/uniqueliulin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uniqueliulin/subscriptions","organizations_url":"https://api.github.com/users/uniqueliulin/orgs","repos_url":"https://api.github.com/users/uniqueliulin/repos","events_url":"https://api.github.com/users/uniqueliulin/events{/privacy}","received_events_url":"https://api.github.com/users/uniqueliulin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-24T04:05:57Z","updated_at":"2019-07-24T04:05:57Z","author_association":"NONE","body":"这个卡在了futex_wait，出现死锁。futex_wait的返回值不一定是真，需要判断结果再确定“继续阻塞”或放行，rpc中没有做这个判断操作。http://www.man7.org/linux/man-pages/man2/futex.2.html","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/514471008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515013181","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-515013181","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":515013181,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTAxMzE4MQ==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-25T11:50:40Z","updated_at":"2019-07-25T11:50:40Z","author_association":"NONE","body":"request 360多K， response 270多K，感觉不算很大，解析却都需要十几ms，不知道是哪里出问题，用objectpool是不是会好一些\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515013181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515297700","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-515297700","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":515297700,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTI5NzcwMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T03:45:59Z","updated_at":"2019-07-26T03:45:59Z","author_association":"CONTRIBUTOR","body":"看一下cpu热点吧，既然序列化和反序列化占据了显著的时间，应该在profiler中有一定的比例。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515297700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515299259","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-515299259","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":515299259,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTI5OTI1OQ==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T03:55:52Z","updated_at":"2019-07-26T03:55:52Z","author_association":"NONE","body":"热点通过vtune抓了，时间占比26.9%左右 @jamesge @zyearn\r\n\r\n    CPU Time\r\n    1 of 101: 4.1% (0.940s of 23.005s)\r\n\r\n    rerank ! tcmalloc::SLL_Next - [unknown source file]\r\n    rerank ! tcmalloc::SLL_Pop + 0x25 - [unknown source file]\r\n    rerank ! tcmalloc::ThreadCache::FreeList::Pop + 0x48 - [unknown source file]\r\n    rerank ! tcmalloc::ThreadCache::Allocate + 0x88 - [unknown source file]\r\n    rerank ! (anonymous namespace)::do_malloc_small + 0x8c - [unknown source file]\r\n    rerank ! (anonymous namespace)::do_malloc + 0x3b - [unknown source file]\r\n    rerank ! (anonymous namespace)::cpp_alloc + 0x1c - [unknown source file]\r\n    rerank ! tc_new + 0x1c - [unknown source file]\r\n    rerank ! google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>,   std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>,  std::allocator<char>>>::MapAllocator<google::protobuf::Map<std::__cxx11::basic_string<char,     std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>::InnerMap::Node>::allocate + 0x5e - map.h:208\r\n    rerank ! google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>::InnerMap::Alloc<google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>::InnerMap::Node> + 0x4d - map.h:905\r\n    rerank ! google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>::InnerMap::insert + 0xf8 - map.h:569\r\n    rerank ! google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>::InnerMap::operator[] + 0x4e - map.h:598\r\n     rerank ! google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>::operator[] + 0x26 - map.h:1048\r\n    rerank ! google::protobuf::internal::MapEntryImpl<bigo::pb3::recommend::Item_PersonLabelsEntry_DoNotUse, google::protobuf::Message, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, (google::protobuf::internal::WireFormatLite::FieldType)9, (google::protobuf::internal::WireFormatLite::FieldType)9,   (int)0>::Parser<google::protobuf::internal::MapField<bigo::pb3::recommend::Item_PersonLabelsEntry_DoNotUse, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, (google::protobuf::internal::WireFormatLite::FieldType)9, (google::protobuf::internal::WireFormatLite::FieldType)9, (int)0>,   google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>,  std::allocator<char>>>>::MergePartialFromCodedStream + 0x1ee - map_entry_lite.h:358\r\n    rerank ! google::protobuf::internal::WireFormatLite::ReadMessageNoVirtual<google::protobuf::internal::MapEntryImpl<bigo::pb3::recommend::Item_PersonLabelsEntry_DoNotUse, google::protobuf::Message, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, (google::protobuf::internal::WireFormatLite::FieldType)9, (google::protobuf::internal::WireFormatLite::FieldType)9, (int)0>::Parser<google::protobuf::internal::MapField<bigo::pb3::recommend::Item_PersonLabelsEntry_DoNotUse, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, (google::protobuf::internal::WireFormatLite::FieldType)9, (google::protobuf::internal::WireFormatLite::FieldType)9, (int)0>, google::protobuf::Map<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char>>>>> + 0x6e -  wire_format_lite_inl.h:493\r\n    rerank ! bigo::pb3::recommend::Item::MergePartialFromCodedStream + 0x1892 - recommend.pb.cc:2567\r\n    rerank ! google::protobuf::internal::WireFormatLite::ReadMessage + 0x79 - wire_format_lite_inl.h:447\r\n    rerank ! bigo::pb3::rank::RankReq::MergePartialFromCodedStream + 0x36d - rank.pb.cc:594\r\n    rerank ! google::protobuf::MessageLite::ParseFromCodedStream + 0x95 - [unknown source file] \r\n    rerank ! brpc::ParsePbFromZeroCopyStreamInlined + 0xbf - protocol.cpp:207\r\n    rerank ! brpc::ParsePbFromIOBuf + 0x13 - protocol.cpp:218\r\n    rerank ! brpc::ParseFromCompressedData + 0x72 - compress.cpp:82\r\n    rerank ! brpc::policy::ProcessRpcRequest + 0x1082 - baidu_rpc_protocol.cpp:469\r\n    rerank ! brpc::ProcessInputMessage + 0x6 - input_messenger.cpp:133\r\nrerank ! brpc::RunLastMessage::operator() + 0x7 - input_messenger.cpp:139\r\nrerank ! brpc::InputMessenger::OnNewMessages + 0x61c - input_messenger.cpp:214\r\nrerank ! brpc::Socket::ProcessEvent + 0xc - socket.cpp:1070\r\nrerank ! bthread::TaskGroup::task_runner + 0xc8 - task_group.cpp:293\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515299259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515300032","html_url":"https://github.com/apache/brpc/issues/854#issuecomment-515300032","issue_url":"https://api.github.com/repos/apache/brpc/issues/854","id":515300032,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTMwMDAzMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T04:00:51Z","updated_at":"2019-07-26T04:00:51Z","author_association":"CONTRIBUTOR","body":"试下这个 https://github.com/apache/incubator-brpc/blob/fc07b7bf45c4b2aa90ae5c832f3b48a8da124640/src/brpc/server.h#L230","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515300032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515300759","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-515300759","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":515300759,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTMwMDc1OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T04:05:42Z","updated_at":"2019-07-26T04:05:42Z","author_association":"CONTRIBUTOR","body":"有常见的DAG图或是火焰图么？上面的调用栈看不到比例？另外也要排除一下优化相关的选项问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515300759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515317370","html_url":"https://github.com/apache/brpc/issues/856#issuecomment-515317370","issue_url":"https://api.github.com/repos/apache/brpc/issues/856","id":515317370,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTMxNzM3MA==","user":{"login":"zhangwei17","id":2209809,"node_id":"MDQ6VXNlcjIyMDk4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2209809?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangwei17","html_url":"https://github.com/zhangwei17","followers_url":"https://api.github.com/users/zhangwei17/followers","following_url":"https://api.github.com/users/zhangwei17/following{/other_user}","gists_url":"https://api.github.com/users/zhangwei17/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangwei17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangwei17/subscriptions","organizations_url":"https://api.github.com/users/zhangwei17/orgs","repos_url":"https://api.github.com/users/zhangwei17/repos","events_url":"https://api.github.com/users/zhangwei17/events{/privacy}","received_events_url":"https://api.github.com/users/zhangwei17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T05:43:44Z","updated_at":"2019-07-26T05:44:38Z","author_association":"NONE","body":"已定位到原因：\r\n由于server端在处理完请求后，并未返回结果数据（thrift定义的service中带有oneway标签），早早地便调用了done->run()，在client端的brpc框架请求后，对返回结果进行处理的时候，会认为返回的response里有数据，进而在解析的时候出现了异常。修改thrift_protocol.cpp文件中的ReadThriftStruct函数，进行待解析数据长度判定后正常。\r\n```\r\nbool ReadThriftStruct(const butil::IOBuf& body, ThriftMessageBase *raw_msg, int16_t expected_tid)\r\n{\r\n    const size_t body_len = body.size();\r\n    if (body_len <= 0)\r\n    {\r\n        RPC_VLOG << \"no content for thrift parsing\";\r\n        return true;\r\n    }\r\n    ......\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515317370/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515319030","html_url":"https://github.com/apache/brpc/issues/855#issuecomment-515319030","issue_url":"https://api.github.com/repos/apache/brpc/issues/855","id":515319030,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTMxOTAzMA==","user":{"login":"zhangwei17","id":2209809,"node_id":"MDQ6VXNlcjIyMDk4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2209809?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangwei17","html_url":"https://github.com/zhangwei17","followers_url":"https://api.github.com/users/zhangwei17/followers","following_url":"https://api.github.com/users/zhangwei17/following{/other_user}","gists_url":"https://api.github.com/users/zhangwei17/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangwei17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangwei17/subscriptions","organizations_url":"https://api.github.com/users/zhangwei17/orgs","repos_url":"https://api.github.com/users/zhangwei17/repos","events_url":"https://api.github.com/users/zhangwei17/events{/privacy}","received_events_url":"https://api.github.com/users/zhangwei17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T05:52:13Z","updated_at":"2019-07-26T05:52:26Z","author_association":"NONE","body":"结合https://github.com/apache/incubator-brpc/issues/856 里提到的方法，解决出现异常会导致crash的问题后，根据例子中的访问异步服务的代码，已经成功完成oneway服务的访问。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515319030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515428919","html_url":"https://github.com/apache/brpc/issues/857#issuecomment-515428919","issue_url":"https://api.github.com/repos/apache/brpc/issues/857","id":515428919,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTQyODkxOQ==","user":{"login":"kenshinxf","id":7056720,"node_id":"MDQ6VXNlcjcwNTY3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7056720?v=4","gravatar_id":"","url":"https://api.github.com/users/kenshinxf","html_url":"https://github.com/kenshinxf","followers_url":"https://api.github.com/users/kenshinxf/followers","following_url":"https://api.github.com/users/kenshinxf/following{/other_user}","gists_url":"https://api.github.com/users/kenshinxf/gists{/gist_id}","starred_url":"https://api.github.com/users/kenshinxf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kenshinxf/subscriptions","organizations_url":"https://api.github.com/users/kenshinxf/orgs","repos_url":"https://api.github.com/users/kenshinxf/repos","events_url":"https://api.github.com/users/kenshinxf/events{/privacy}","received_events_url":"https://api.github.com/users/kenshinxf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-26T12:19:03Z","updated_at":"2019-07-26T12:19:03Z","author_association":"NONE","body":"oneway当时实现的时候确实没考虑到，实际使用的场景比较少， 这块我最近先看一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515428919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515836565","html_url":"https://github.com/apache/brpc/issues/859#issuecomment-515836565","issue_url":"https://api.github.com/repos/apache/brpc/issues/859","id":515836565,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTgzNjU2NQ==","user":{"login":"niukuo","id":6831097,"node_id":"MDQ6VXNlcjY4MzEwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6831097?v=4","gravatar_id":"","url":"https://api.github.com/users/niukuo","html_url":"https://github.com/niukuo","followers_url":"https://api.github.com/users/niukuo/followers","following_url":"https://api.github.com/users/niukuo/following{/other_user}","gists_url":"https://api.github.com/users/niukuo/gists{/gist_id}","starred_url":"https://api.github.com/users/niukuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niukuo/subscriptions","organizations_url":"https://api.github.com/users/niukuo/orgs","repos_url":"https://api.github.com/users/niukuo/repos","events_url":"https://api.github.com/users/niukuo/events{/privacy}","received_events_url":"https://api.github.com/users/niukuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T04:05:09Z","updated_at":"2019-07-29T04:05:09Z","author_association":"CONTRIBUTOR","body":"是在进程刚启动时发生的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515836565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515947944","html_url":"https://github.com/apache/brpc/issues/860#issuecomment-515947944","issue_url":"https://api.github.com/repos/apache/brpc/issues/860","id":515947944,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTk0Nzk0NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T11:07:18Z","updated_at":"2019-07-29T11:07:18Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-brpc/blob/40b134294ae140ebc429367b21fb994a058527bf/docs/cn/getting_started.md#tcmalloc-17-25","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515947944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515951304","html_url":"https://github.com/apache/brpc/issues/861#issuecomment-515951304","issue_url":"https://api.github.com/repos/apache/brpc/issues/861","id":515951304,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTk1MTMwNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T11:19:31Z","updated_at":"2019-07-29T11:19:31Z","author_association":"CONTRIBUTOR","body":"目前开源的版本在默认编译条件下不会使用read_cpu_frequency。tsc频率要正确读取比较麻烦，dpdk这个版本（也仅针对x86)是否能工作需要在很多不同类型的机器上验证后才行。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515951304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515952980","html_url":"https://github.com/apache/brpc/issues/861#issuecomment-515952980","issue_url":"https://api.github.com/repos/apache/brpc/issues/861","id":515952980,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNTk1Mjk4MA==","user":{"login":"simpx","id":365032,"node_id":"MDQ6VXNlcjM2NTAzMg==","avatar_url":"https://avatars.githubusercontent.com/u/365032?v=4","gravatar_id":"","url":"https://api.github.com/users/simpx","html_url":"https://github.com/simpx","followers_url":"https://api.github.com/users/simpx/followers","following_url":"https://api.github.com/users/simpx/following{/other_user}","gists_url":"https://api.github.com/users/simpx/gists{/gist_id}","starred_url":"https://api.github.com/users/simpx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simpx/subscriptions","organizations_url":"https://api.github.com/users/simpx/orgs","repos_url":"https://api.github.com/users/simpx/repos","events_url":"https://api.github.com/users/simpx/events{/privacy}","received_events_url":"https://api.github.com/users/simpx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-29T11:25:39Z","updated_at":"2019-07-29T11:25:39Z","author_association":"NONE","body":"@jamesge 多谢解答，看起来我们只能先保守用clock，再看dpdk的测试结果了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/515952980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516243061","html_url":"https://github.com/apache/brpc/issues/862#issuecomment-516243061","issue_url":"https://api.github.com/repos/apache/brpc/issues/862","id":516243061,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI0MzA2MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T03:14:17Z","updated_at":"2019-07-30T03:14:17Z","author_association":"CONTRIBUTOR","body":"这里的问题是地址不对（我看端口是对的）还是连不上？连不上一般就是下游挂了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516243061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516248727","html_url":"https://github.com/apache/brpc/issues/862#issuecomment-516248727","issue_url":"https://api.github.com/repos/apache/brpc/issues/862","id":516248727,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjI0ODcyNw==","user":{"login":"zhangwei17","id":2209809,"node_id":"MDQ6VXNlcjIyMDk4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2209809?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangwei17","html_url":"https://github.com/zhangwei17","followers_url":"https://api.github.com/users/zhangwei17/followers","following_url":"https://api.github.com/users/zhangwei17/following{/other_user}","gists_url":"https://api.github.com/users/zhangwei17/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangwei17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangwei17/subscriptions","organizations_url":"https://api.github.com/users/zhangwei17/orgs","repos_url":"https://api.github.com/users/zhangwei17/repos","events_url":"https://api.github.com/users/zhangwei17/events{/privacy}","received_events_url":"https://api.github.com/users/zhangwei17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T03:45:53Z","updated_at":"2019-07-30T03:45:53Z","author_association":"NONE","body":"地址变成了原来的ip:port，端口增加了一个监听的端口。然后无法连上下游。\r\n下游我看了，是正常监听端口并运行的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516248727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516346429","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-516346429","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":516346429,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjM0NjQyOQ==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T09:41:12Z","updated_at":"2019-07-30T11:28:04Z","author_association":"CONTRIBUTOR","body":"@jamesge @wwbmmm @zyearn @gydong \r\n辛苦各位看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516346429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516707216","html_url":"https://github.com/apache/brpc/issues/542#issuecomment-516707216","issue_url":"https://api.github.com/repos/apache/brpc/issues/542","id":516707216,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjcwNzIxNg==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T05:55:36Z","updated_at":"2019-07-31T05:55:36Z","author_association":"CONTRIBUTOR","body":"流量倾斜到一台机器上可能是什么导致的呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516707216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516709976","html_url":"https://github.com/apache/brpc/issues/715#issuecomment-516709976","issue_url":"https://api.github.com/repos/apache/brpc/issues/715","id":516709976,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjcwOTk3Ng==","user":{"login":"supernovaer","id":6361566,"node_id":"MDQ6VXNlcjYzNjE1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/6361566?v=4","gravatar_id":"","url":"https://api.github.com/users/supernovaer","html_url":"https://github.com/supernovaer","followers_url":"https://api.github.com/users/supernovaer/followers","following_url":"https://api.github.com/users/supernovaer/following{/other_user}","gists_url":"https://api.github.com/users/supernovaer/gists{/gist_id}","starred_url":"https://api.github.com/users/supernovaer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/supernovaer/subscriptions","organizations_url":"https://api.github.com/users/supernovaer/orgs","repos_url":"https://api.github.com/users/supernovaer/repos","events_url":"https://api.github.com/users/supernovaer/events{/privacy}","received_events_url":"https://api.github.com/users/supernovaer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T06:06:47Z","updated_at":"2019-07-31T06:06:47Z","author_association":"NONE","body":"> \r\n> Fixed in #849\r\n\r\nGot it！\r\n之前自己简单修了一版，H2Settings构造函数里_remote_settings.stream_window_size的初始值改成可配的，客户端启动的时候配大一点就可以了。\r\n![image](https://user-images.githubusercontent.com/6361566/62187498-2182c880-b39c-11e9-8943-37deeb3b16de.png)\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516709976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516715822","html_url":"https://github.com/apache/brpc/issues/865#issuecomment-516715822","issue_url":"https://api.github.com/repos/apache/brpc/issues/865","id":516715822,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjcxNTgyMg==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T06:28:30Z","updated_at":"2019-07-31T06:28:30Z","author_association":"NONE","body":"@jamesge","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516715822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516716623","html_url":"https://github.com/apache/brpc/issues/865#issuecomment-516716623","issue_url":"https://api.github.com/repos/apache/brpc/issues/865","id":516716623,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjcxNjYyMw==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T06:31:33Z","updated_at":"2019-07-31T06:31:33Z","author_association":"NONE","body":"@zyearn","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516716623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516748905","html_url":"https://github.com/apache/brpc/issues/865#issuecomment-516748905","issue_url":"https://api.github.com/repos/apache/brpc/issues/865","id":516748905,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc0ODkwNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T08:21:19Z","updated_at":"2019-07-31T08:22:43Z","author_association":"CONTRIBUTOR","body":"这用法完全错的。这部分还是不要改了，要提升性能主要是让pb中大量的小字段连续分配，统一释放， 即arena做的事情，这个new本身不是瓶颈。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516748905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516750599","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-516750599","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":516750599,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc1MDU5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T08:26:27Z","updated_at":"2019-07-31T08:26:27Z","author_association":"CONTRIBUTOR","body":"一个小建议：那个count checkbox可以和display type放同一行。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516750599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516762384","html_url":"https://github.com/apache/brpc/issues/865#issuecomment-516762384","issue_url":"https://api.github.com/repos/apache/brpc/issues/865","id":516762384,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjc2MjM4NA==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T09:00:17Z","updated_at":"2019-07-31T09:00:17Z","author_association":"NONE","body":"具体的pb的编码规则有什么可参考的么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516762384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516801045","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-516801045","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":516801045,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjgwMTA0NQ==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T10:57:50Z","updated_at":"2019-07-31T11:49:36Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/8231208/62206731-0a0c0580-b3c5-11e9-9583-8b5de60ad0cf.png)\r\n@jamesge 上面的问题都改了，并且 count 也归位了~\r\nTravis 似乎总是挂在拉 thrift 的包的相关任务上。。。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516801045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516830181","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-516830181","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":516830181,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjgzMDE4MQ==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T12:37:30Z","updated_at":"2019-08-01T02:32:30Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/8231208/62212267-f9fb2280-b3d2-11e9-8581-ce523da35fd3.png)\r\n\r\ntravis 这个问题跟我这边的修改好像没有任何关系？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/516830181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517138870","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-517138870","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":517138870,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzEzODg3MA==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T06:26:59Z","updated_at":"2019-08-01T06:26:59Z","author_association":"CONTRIBUTOR","body":"@jamesge 麻烦有空再看下修改，以及 travis 的问题~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517138870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517139080","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-517139080","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":517139080,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzEzOTA4MA==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T06:27:55Z","updated_at":"2019-08-01T06:27:55Z","author_association":"CONTRIBUTOR","body":"哦，看到有新的 pr 修复问题，travis 后面我再重新触发吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517139080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517334807","html_url":"https://github.com/apache/brpc/issues/870#issuecomment-517334807","issue_url":"https://api.github.com/repos/apache/brpc/issues/870","id":517334807,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzMzNDgwNw==","user":{"login":"BillyJoy","id":5675646,"node_id":"MDQ6VXNlcjU2NzU2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/5675646?v=4","gravatar_id":"","url":"https://api.github.com/users/BillyJoy","html_url":"https://github.com/BillyJoy","followers_url":"https://api.github.com/users/BillyJoy/followers","following_url":"https://api.github.com/users/BillyJoy/following{/other_user}","gists_url":"https://api.github.com/users/BillyJoy/gists{/gist_id}","starred_url":"https://api.github.com/users/BillyJoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BillyJoy/subscriptions","organizations_url":"https://api.github.com/users/BillyJoy/orgs","repos_url":"https://api.github.com/users/BillyJoy/repos","events_url":"https://api.github.com/users/BillyJoy/events{/privacy}","received_events_url":"https://api.github.com/users/BillyJoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T15:23:16Z","updated_at":"2019-08-01T15:23:16Z","author_association":"NONE","body":"tcpdump或者是wireshark抓包看一眼吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517334807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517540824","html_url":"https://github.com/apache/brpc/issues/852#issuecomment-517540824","issue_url":"https://api.github.com/repos/apache/brpc/issues/852","id":517540824,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzU0MDgyNA==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T04:12:21Z","updated_at":"2019-08-02T04:12:41Z","author_association":"NONE","body":"@jamesge \r\n相关的flamegraph如下，ParseFromCompressedData \r\n确实占比较高\r\n[perf-kernel.zip](https://github.com/apache/incubator-brpc/files/3459569/perf-kernel.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517540824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517565824","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-517565824","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":517565824,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzU2NTgyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T06:08:41Z","updated_at":"2019-08-02T06:08:41Z","author_association":"CONTRIBUTOR","body":"@skilxnTL master修复了，你同步下吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517565824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517569020","html_url":"https://github.com/apache/brpc/issues/535#issuecomment-517569020","issue_url":"https://api.github.com/repos/apache/brpc/issues/535","id":517569020,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzU2OTAyMA==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T06:21:08Z","updated_at":"2019-08-02T06:21:08Z","author_association":"NONE","body":"这块目前有什么进展么，自己改的话需要改哪里 @gethinzhang ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/517569020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518007629","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-518007629","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":518007629,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODAwNzYyOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-04T14:21:21Z","updated_at":"2019-08-04T14:21:21Z","author_association":"MEMBER","body":"我本地用pb3.9编了下没有问题。另外，最新master的EspMessage定义在33行，而你的错误日志是在37行，是不是自己改过了增加/删除什么文件了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518007629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518057639","html_url":"https://github.com/apache/brpc/issues/867#issuecomment-518057639","issue_url":"https://api.github.com/repos/apache/brpc/issues/867","id":518057639,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA1NzYzOQ==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T01:48:26Z","updated_at":"2019-08-05T01:48:26Z","author_association":"NONE","body":"解决了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518057639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518084681","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-518084681","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":518084681,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA4NDY4MQ==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T04:50:27Z","updated_at":"2019-08-05T04:50:27Z","author_association":"CONTRIBUTOR","body":"@jamesge done\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518084681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518085217","html_url":"https://github.com/apache/brpc/issues/873#issuecomment-518085217","issue_url":"https://api.github.com/repos/apache/brpc/issues/873","id":518085217,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA4NTIxNw==","user":{"login":"BillyJoy","id":5675646,"node_id":"MDQ6VXNlcjU2NzU2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/5675646?v=4","gravatar_id":"","url":"https://api.github.com/users/BillyJoy","html_url":"https://github.com/BillyJoy","followers_url":"https://api.github.com/users/BillyJoy/followers","following_url":"https://api.github.com/users/BillyJoy/following{/other_user}","gists_url":"https://api.github.com/users/BillyJoy/gists{/gist_id}","starred_url":"https://api.github.com/users/BillyJoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BillyJoy/subscriptions","organizations_url":"https://api.github.com/users/BillyJoy/orgs","repos_url":"https://api.github.com/users/BillyJoy/repos","events_url":"https://api.github.com/users/BillyJoy/events{/privacy}","received_events_url":"https://api.github.com/users/BillyJoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T04:53:38Z","updated_at":"2019-08-05T04:53:38Z","author_association":"NONE","body":"确认下，是否调用太深了，导致栈被覆盖了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518085217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518095907","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-518095907","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":518095907,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA5NTkwNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T05:55:22Z","updated_at":"2019-08-05T05:55:22Z","author_association":"CONTRIBUTOR","body":"我做了[一些修正](https://github.com/apache/incubator-brpc/commit/e779acff9f143738328ec5aa433a40621be39f42)，另外目前flame显示的数字，和耗费的时间或内存量，没有直接对应的关系，需要修正或说明一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518095907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518097572","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-518097572","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":518097572,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODA5NzU3Mg==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T06:02:58Z","updated_at":"2019-08-05T06:02:58Z","author_association":"CONTRIBUTOR","body":"> 我做了[一些修正](https://github.com/apache/incubator-brpc/commit/e779acff9f143738328ec5aa433a40621be39f42)，另外目前flame显示的数字，和耗费的时间或内存量，没有直接对应的关系，需要修正或说明一下。\r\n\r\n是把默认方式修改为 dot 了是吗？\r\n关于说明对应关系的这件事，内部有文档，我这两天抽空port过来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518097572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518142302","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-518142302","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":518142302,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODE0MjMwMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T08:40:37Z","updated_at":"2019-08-05T08:41:54Z","author_association":"CONTRIBUTOR","body":"> 是把默认方式修改为 dot 了是吗？\r\n\r\n以及count点击时页面不会刷新的问题。\r\n\r\n> 关于说明对应关系的这件事，内部有文档，我这两天抽空port过来\r\n\r\n目前flame下只显示sample个数，而不是相应的时间或数量。不仅仅是文档，而是有无更准确的显示方式\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518142302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518145838","html_url":"https://github.com/apache/brpc/pull/864#issuecomment-518145838","issue_url":"https://api.github.com/repos/apache/brpc/issues/864","id":518145838,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODE0NTgzOA==","user":{"login":"Ye-Tian-Zero","id":8231208,"node_id":"MDQ6VXNlcjgyMzEyMDg=","avatar_url":"https://avatars.githubusercontent.com/u/8231208?v=4","gravatar_id":"","url":"https://api.github.com/users/Ye-Tian-Zero","html_url":"https://github.com/Ye-Tian-Zero","followers_url":"https://api.github.com/users/Ye-Tian-Zero/followers","following_url":"https://api.github.com/users/Ye-Tian-Zero/following{/other_user}","gists_url":"https://api.github.com/users/Ye-Tian-Zero/gists{/gist_id}","starred_url":"https://api.github.com/users/Ye-Tian-Zero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ye-Tian-Zero/subscriptions","organizations_url":"https://api.github.com/users/Ye-Tian-Zero/orgs","repos_url":"https://api.github.com/users/Ye-Tian-Zero/repos","events_url":"https://api.github.com/users/Ye-Tian-Zero/events{/privacy}","received_events_url":"https://api.github.com/users/Ye-Tian-Zero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T08:51:10Z","updated_at":"2019-08-05T08:51:10Z","author_association":"CONTRIBUTOR","body":"> > 是把默认方式修改为 dot 了是吗？\r\n> \r\n> 以及count点击时页面不会刷新的问题。\r\n> \r\n> > 关于说明对应关系的这件事，内部有文档，我这两天抽空port过来\r\n> \r\n> 目前flame下只显示sample个数，而不是相应的时间或数量。不仅仅是文档，而是有无更准确的显示方式\r\n\r\nFlame 图本身是反应占比而不是数量，他是没有单位的。但是对于内存 perf 结果来说，samples 就是 bytes。\r\n\r\n但是对于时间来说，他只能提供更加直观的占比信息。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518145838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518166539","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-518166539","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":518166539,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODE2NjUzOQ==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T09:49:53Z","updated_at":"2019-08-05T09:49:53Z","author_association":"NONE","body":"我用的brpc版本是1.6，是不是这个版本对pb的版本有要求\r\nhttps://github.com/bigo-sg/brpc/releases/tag/v1.6","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518166539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518166648","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-518166648","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":518166648,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODE2NjY0OA==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T09:50:11Z","updated_at":"2019-08-05T09:50:11Z","author_association":"NONE","body":"@zyearn","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518166648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]