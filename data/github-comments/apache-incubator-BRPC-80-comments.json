[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2521903769","html_url":"https://github.com/apache/brpc/issues/2834#issuecomment-2521903769","issue_url":"https://api.github.com/repos/apache/brpc/issues/2834","id":2521903769,"node_id":"IC_kwDOBhmkcs6WUTKZ","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-06T01:41:27Z","updated_at":"2024-12-06T01:41:27Z","author_association":"CONTRIBUTOR","body":"不是","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2521903769/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2522061408","html_url":"https://github.com/apache/brpc/issues/1183#issuecomment-2522061408","issue_url":"https://api.github.com/repos/apache/brpc/issues/1183","id":2522061408,"node_id":"IC_kwDOBhmkcs6WU5pg","user":{"login":"zhanghq-1","id":93849859,"node_id":"U_kgDOBZgJAw","avatar_url":"https://avatars.githubusercontent.com/u/93849859?v=4","gravatar_id":"","url":"https://api.github.com/users/zhanghq-1","html_url":"https://github.com/zhanghq-1","followers_url":"https://api.github.com/users/zhanghq-1/followers","following_url":"https://api.github.com/users/zhanghq-1/following{/other_user}","gists_url":"https://api.github.com/users/zhanghq-1/gists{/gist_id}","starred_url":"https://api.github.com/users/zhanghq-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhanghq-1/subscriptions","organizations_url":"https://api.github.com/users/zhanghq-1/orgs","repos_url":"https://api.github.com/users/zhanghq-1/repos","events_url":"https://api.github.com/users/zhanghq-1/events{/privacy}","received_events_url":"https://api.github.com/users/zhanghq-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-06T03:47:27Z","updated_at":"2024-12-06T03:47:27Z","author_association":"NONE","body":"Is there any way to solve this problem? Can I recreate a cm_id of mlx5_3 before createQP?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2522061408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2525048588","html_url":"https://github.com/apache/brpc/pull/2830#issuecomment-2525048588","issue_url":"https://api.github.com/repos/apache/brpc/issues/2830","id":2525048588,"node_id":"IC_kwDOBhmkcs6WgS8M","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-07T09:26:50Z","updated_at":"2024-12-07T09:26:50Z","author_association":"MEMBER","body":"明天我更新下吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2525048588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2525588877","html_url":"https://github.com/apache/brpc/issues/2779#issuecomment-2525588877","issue_url":"https://api.github.com/repos/apache/brpc/issues/2779","id":2525588877,"node_id":"IC_kwDOBhmkcs6WiW2N","user":{"login":"Zizor","id":16065910,"node_id":"MDQ6VXNlcjE2MDY1OTEw","avatar_url":"https://avatars.githubusercontent.com/u/16065910?v=4","gravatar_id":"","url":"https://api.github.com/users/Zizor","html_url":"https://github.com/Zizor","followers_url":"https://api.github.com/users/Zizor/followers","following_url":"https://api.github.com/users/Zizor/following{/other_user}","gists_url":"https://api.github.com/users/Zizor/gists{/gist_id}","starred_url":"https://api.github.com/users/Zizor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zizor/subscriptions","organizations_url":"https://api.github.com/users/Zizor/orgs","repos_url":"https://api.github.com/users/Zizor/repos","events_url":"https://api.github.com/users/Zizor/events{/privacy}","received_events_url":"https://api.github.com/users/Zizor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-08T10:54:54Z","updated_at":"2024-12-08T10:54:54Z","author_association":"NONE","body":"阿里云镜像源,CENTOS8.5.2111,gcc8.5.0,\r\nprotobuf-compiler-3.5.0-13.el8.x86_64\r\nprotobuf-3.5.0-13.el8.x86_64\r\nprotobuf-devel-3.5.0-13.el8.x86_64\r\nprotobuf-c-1.3.0-6.el8.x86_64\r\ngflags-2.1.2-6.el8.x86_64\r\ngflags-devel-2.1.2-6.el8.x86_64\r\n编译stable和release-1.10都可以成功，但是编译release-1.11就报这个错误","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2525588877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2525685791","html_url":"https://github.com/apache/brpc/issues/2779#issuecomment-2525685791","issue_url":"https://api.github.com/repos/apache/brpc/issues/2779","id":2525685791,"node_id":"IC_kwDOBhmkcs6Wiugf","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-08T12:08:37Z","updated_at":"2024-12-08T12:08:37Z","author_association":"MEMBER","body":"没有 centos 8 的环境，试了下 rockylinux 8，gflags 版本一致，不过现象不一样，rockylinux 8 下需要给 gflags 打上这个[补丁](https://github.com/gflags/gflags/commit/408061b46974cc8377a8a794a048ecae359ad887)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2525685791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526622151","html_url":"https://github.com/apache/brpc/pull/2819#issuecomment-2526622151","issue_url":"https://api.github.com/repos/apache/brpc/issues/2819","id":2526622151,"node_id":"IC_kwDOBhmkcs6WmTHH","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T01:56:21Z","updated_at":"2024-12-09T01:56:21Z","author_association":"CONTRIBUTOR","body":"> * epoll 线程和其他 bthread 具有相同优先级，导致 epoll 线程可能被一小段时间在队列中无响应，引起 worker queue 任务数量分布不均匀，多对一的 steal。\r\n> * 网络事件无差别 signal，增加了系统调用。\r\n\r\n能否分别测一下这两个优化各自提升多少性能呢？\r\n我觉得第二个可能更重要一些，而且也更通用，可以把第二个优化单独提一个PR，这样更容易合入","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526622151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526629292","html_url":"https://github.com/apache/brpc/issues/2836#issuecomment-2526629292","issue_url":"https://api.github.com/repos/apache/brpc/issues/2836","id":2526629292,"node_id":"IC_kwDOBhmkcs6WmU2s","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T02:02:35Z","updated_at":"2024-12-09T02:02:35Z","author_association":"CONTRIBUTOR","body":"把connect超时设置小一点就可以了。如果设置connect超时跟rpc超时一样，相当于connect超时是不生效的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526629292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526652385","html_url":"https://github.com/apache/brpc/issues/2833#issuecomment-2526652385","issue_url":"https://api.github.com/repos/apache/brpc/issues/2833","id":2526652385,"node_id":"IC_kwDOBhmkcs6Wmafh","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T02:09:40Z","updated_at":"2024-12-09T02:09:40Z","author_association":"CONTRIBUTOR","body":"这个在百度内部是这样做的：bthread开放一个调度callback接口，用户可以设置一个callback函数，bthread每次切换的时候调用这个callback，用户可以自己在callback里统计cpu消耗，也可以做其它事情。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526652385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526662652","html_url":"https://github.com/apache/brpc/pull/2620#issuecomment-2526662652","issue_url":"https://api.github.com/repos/apache/brpc/issues/2620","id":2526662652,"node_id":"IC_kwDOBhmkcs6Wmc_8","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T02:19:35Z","updated_at":"2024-12-09T02:19:35Z","author_association":"CONTRIBUTOR","body":"@javeme cc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526662652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526668104","html_url":"https://github.com/apache/brpc/issues/2779#issuecomment-2526668104","issue_url":"https://api.github.com/repos/apache/brpc/issues/2779","id":2526668104,"node_id":"IC_kwDOBhmkcs6WmeVI","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T02:25:45Z","updated_at":"2024-12-09T02:25:45Z","author_association":"MEMBER","body":"用 centos 8 复现了，晚点我看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526668104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526709128","html_url":"https://github.com/apache/brpc/pull/2819#issuecomment-2526709128","issue_url":"https://api.github.com/repos/apache/brpc/issues/2819","id":2526709128,"node_id":"IC_kwDOBhmkcs6WmoWI","user":{"login":"zhengJade","id":30115816,"node_id":"MDQ6VXNlcjMwMTE1ODE2","avatar_url":"https://avatars.githubusercontent.com/u/30115816?v=4","gravatar_id":"","url":"https://api.github.com/users/zhengJade","html_url":"https://github.com/zhengJade","followers_url":"https://api.github.com/users/zhengJade/followers","following_url":"https://api.github.com/users/zhengJade/following{/other_user}","gists_url":"https://api.github.com/users/zhengJade/gists{/gist_id}","starred_url":"https://api.github.com/users/zhengJade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhengJade/subscriptions","organizations_url":"https://api.github.com/users/zhengJade/orgs","repos_url":"https://api.github.com/users/zhengJade/repos","events_url":"https://api.github.com/users/zhengJade/events{/privacy}","received_events_url":"https://api.github.com/users/zhengJade/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T03:06:11Z","updated_at":"2024-12-09T03:06:11Z","author_association":"CONTRIBUTOR","body":"> > > 能否在bthread这个层面上，创建协程的时候设置一个属性，使它具有更高的优先级呢？现在这里专门设置了epoll_XXX，感觉有点特化。 另外，总是让epoll的bthread优先调度的话，会不会造成堆积很多任务的情况呢？\r\n> > \r\n> > \r\n> > @yanglimingcn 我觉得可以增加一个属性来表示高优先级，但是要说明一点，就是 epoll 的 任务被 steal 的前提肯定是有 worker 需要 steal from task_control，所以可证明 worker 自己的 queue 应该没有任务，证明他是空闲的，这个时候应该优先让其响应网络事件，这有两个好处\r\n> > \r\n> > 1. 保证网络任务能够及时响应。\r\n> > 2. 可以让所有的 worker 的 run_q 相对均匀，因为 q 中大量任务来源不是 steal，而是 deal event。\r\n> >    另一个问题，就是是否会造成堆积：\r\n> >    如果我们不响应 epoll 就会造成堆积，证明此刻的网络请求数量是大于 brpc 的处理能力的，否则我们不需要通过增加 steal 的次数这种比起 pop queue 更费时间的操作来加快某时刻处理存量 bthread 的能力。这是牺牲了 RT 带来的，感觉不合理。而且 QPS 高时候更容易造成 RT 抖动。\r\n> \r\n> ```\r\n> // Find next task to run, if none, switch to idle thread of the group.\r\n> ```\r\n> \r\n> #ifndef BTHREAD_FAIR_WSQ const bool popped = g->_rq.pop(&next_tid); #else const bool popped = g->_rq.steal(&next_tid); #endif\r\n> \r\n> 我看这块的代码是把任务的调度反转了，能达到先执行epoll的目的？\r\n\r\n这里我应该没修改过吧，我是把 epoll 的 tid 单独提取出来了，优先 steal 这个 tid\r\n\r\n> > > 能否在bthread这个层面上，创建协程的时候设置一个属性，使它具有更高的优先级呢？现在这里专门设置了epoll_XXX，感觉有点特化。 另外，总是让epoll的bthread优先调度的话，会不会造成堆积很多任务的情况呢？\r\n> > \r\n> > \r\n> > @yanglimingcn 我觉得可以增加一个属性来表示高优先级，但是要说明一点，就是 epoll 的 任务被 steal 的前提肯定是有 worker 需要 steal from task_control，所以可证明 worker 自己的 queue 应该没有任务，证明他是空闲的，这个时候应该优先让其响应网络事件，这有两个好处\r\n> > \r\n> > 1. 保证网络任务能够及时响应。\r\n> > 2. 可以让所有的 worker 的 run_q 相对均匀，因为 q 中大量任务来源不是 steal，而是 deal event。\r\n> >    另一个问题，就是是否会造成堆积：\r\n> >    如果我们不响应 epoll 就会造成堆积，证明此刻的网络请求数量是大于 brpc 的处理能力的，否则我们不需要通过增加 steal 的次数这种比起 pop queue 更费时间的操作来加快某时刻处理存量 bthread 的能力。这是牺牲了 RT 带来的，感觉不合理。而且 QPS 高时候更容易造成 RT 抖动。\r\n> \r\n> ```\r\n> // Find next task to run, if none, switch to idle thread of the group.\r\n> ```\r\n> \r\n> #ifndef BTHREAD_FAIR_WSQ const bool popped = g->_rq.pop(&next_tid); #else const bool popped = g->_rq.steal(&next_tid); #endif\r\n> \r\n> 我看这块的代码是把任务的调度反转了，能达到先执行epoll的目的？\r\n\r\n我应该没有修改过这个，我是把 epoll 的 tid 提取出来了，然后优先 steal 这个，来达到优先执行 epoll 的目的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526709128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526733718","html_url":"https://github.com/apache/brpc/pull/2819#issuecomment-2526733718","issue_url":"https://api.github.com/repos/apache/brpc/issues/2819","id":2526733718,"node_id":"IC_kwDOBhmkcs6WmuWW","user":{"login":"zhengJade","id":30115816,"node_id":"MDQ6VXNlcjMwMTE1ODE2","avatar_url":"https://avatars.githubusercontent.com/u/30115816?v=4","gravatar_id":"","url":"https://api.github.com/users/zhengJade","html_url":"https://github.com/zhengJade","followers_url":"https://api.github.com/users/zhengJade/followers","following_url":"https://api.github.com/users/zhengJade/following{/other_user}","gists_url":"https://api.github.com/users/zhengJade/gists{/gist_id}","starred_url":"https://api.github.com/users/zhengJade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhengJade/subscriptions","organizations_url":"https://api.github.com/users/zhengJade/orgs","repos_url":"https://api.github.com/users/zhengJade/repos","events_url":"https://api.github.com/users/zhengJade/events{/privacy}","received_events_url":"https://api.github.com/users/zhengJade/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T03:18:46Z","updated_at":"2024-12-09T03:18:46Z","author_association":"CONTRIBUTOR","body":"> > * epoll 线程和其他 bthread 具有相同优先级，导致 epoll 线程可能被一小段时间在队列中无响应，引起 worker queue 任务数量分布不均匀，多对一的 steal。\r\n> > * 网络事件无差别 signal，增加了系统调用。\r\n> \r\n> 能否分别测一下这两个优化各自提升多少性能呢？ 我觉得第二个可能更重要一些，而且也更通用，可以把第二个优化单独提一个PR，这样更容易合入\r\n\r\n较少 signal 这个我单独优化过，基本没什么提升，然后分析了原因才发现是因为压力大的时候，Q 其实是不平均的，直接的一个原因就是 epoll 的 tid 有时候会很难被 steal 到，这导致所有的 worker 呈现出，要做完当前所有的任务才可以进行 epoll，在某一瞬间导致有些 worker 进入了 wait 状态，然后整体就看起来，worker 没有 wait 状态的时间很少很少，所以就是没啥作用，于是才想着更改 epoll 的优先级","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526733718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526735379","html_url":"https://github.com/apache/brpc/pull/2819#issuecomment-2526735379","issue_url":"https://api.github.com/repos/apache/brpc/issues/2819","id":2526735379,"node_id":"IC_kwDOBhmkcs6WmuwT","user":{"login":"zhengJade","id":30115816,"node_id":"MDQ6VXNlcjMwMTE1ODE2","avatar_url":"https://avatars.githubusercontent.com/u/30115816?v=4","gravatar_id":"","url":"https://api.github.com/users/zhengJade","html_url":"https://github.com/zhengJade","followers_url":"https://api.github.com/users/zhengJade/followers","following_url":"https://api.github.com/users/zhengJade/following{/other_user}","gists_url":"https://api.github.com/users/zhengJade/gists{/gist_id}","starred_url":"https://api.github.com/users/zhengJade/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhengJade/subscriptions","organizations_url":"https://api.github.com/users/zhengJade/orgs","repos_url":"https://api.github.com/users/zhengJade/repos","events_url":"https://api.github.com/users/zhengJade/events{/privacy}","received_events_url":"https://api.github.com/users/zhengJade/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T03:19:59Z","updated_at":"2024-12-09T03:19:59Z","author_association":"CONTRIBUTOR","body":"最近新春，公司太忙了，没时间搞这个 PR  (><)，等我这边喘口气，改成优先队列，然后多客户端再测试一次","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526735379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526803281","html_url":"https://github.com/apache/brpc/pull/2819#issuecomment-2526803281","issue_url":"https://api.github.com/repos/apache/brpc/issues/2819","id":2526803281,"node_id":"IC_kwDOBhmkcs6Wm_VR","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T03:52:13Z","updated_at":"2024-12-09T03:52:13Z","author_association":"CONTRIBUTOR","body":"如果网络事件非常频繁的话，是不是可以直接让epoll thread不切走呢？比如把这里: https://github.com/apache/brpc/blob/master/src/brpc/socket.cpp#L2265\r\n改成bthread_start_background是否也可以提升性能呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526803281/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526974223","html_url":"https://github.com/apache/brpc/issues/2779#issuecomment-2526974223","issue_url":"https://api.github.com/repos/apache/brpc/issues/2779","id":2526974223,"node_id":"IC_kwDOBhmkcs6WnpEP","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-09T05:34:31Z","updated_at":"2024-12-09T05:44:35Z","author_association":"MEMBER","body":"gflags 2.1.2-6 中未包含 uint32 flags 的支持，centos 8 [gflags](https://git.centos.org/rpms/gflags/blob/c8/f/SPECS/gflags.spec)中看未支持，\r\n\r\n<img width=\"723\" alt=\"image\" src=\"https://github.com/user-attachments/assets/8699b5b6-a3f7-48f5-9a47-d25d7358654d\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2526974223/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2530199121","html_url":"https://github.com/apache/brpc/issues/2623#issuecomment-2530199121","issue_url":"https://api.github.com/repos/apache/brpc/issues/2623","id":2530199121,"node_id":"IC_kwDOBhmkcs6Wz8ZR","user":{"login":"muziandmuzi","id":38377819,"node_id":"MDQ6VXNlcjM4Mzc3ODE5","avatar_url":"https://avatars.githubusercontent.com/u/38377819?v=4","gravatar_id":"","url":"https://api.github.com/users/muziandmuzi","html_url":"https://github.com/muziandmuzi","followers_url":"https://api.github.com/users/muziandmuzi/followers","following_url":"https://api.github.com/users/muziandmuzi/following{/other_user}","gists_url":"https://api.github.com/users/muziandmuzi/gists{/gist_id}","starred_url":"https://api.github.com/users/muziandmuzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muziandmuzi/subscriptions","organizations_url":"https://api.github.com/users/muziandmuzi/orgs","repos_url":"https://api.github.com/users/muziandmuzi/repos","events_url":"https://api.github.com/users/muziandmuzi/events{/privacy}","received_events_url":"https://api.github.com/users/muziandmuzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-10T03:48:30Z","updated_at":"2024-12-10T03:48:30Z","author_association":"NONE","body":"这个问题有解决吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2530199121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2530401997","html_url":"https://github.com/apache/brpc/pull/2840#issuecomment-2530401997","issue_url":"https://api.github.com/repos/apache/brpc/issues/2840","id":2530401997,"node_id":"IC_kwDOBhmkcs6W0t7N","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-10T05:02:43Z","updated_at":"2024-12-10T05:02:43Z","author_association":"MEMBER","body":"感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2530401997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2533688885","html_url":"https://github.com/apache/brpc/pull/2842#issuecomment-2533688885","issue_url":"https://api.github.com/repos/apache/brpc/issues/2842","id":2533688885,"node_id":"IC_kwDOBhmkcs6XBQY1","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T05:41:54Z","updated_at":"2024-12-11T05:41:54Z","author_association":"CONTRIBUTOR","body":"赞，文档也更新一下？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2533688885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2533719027","html_url":"https://github.com/apache/brpc/issues/2838#issuecomment-2533719027","issue_url":"https://api.github.com/repos/apache/brpc/issues/2838","id":2533719027,"node_id":"IC_kwDOBhmkcs6XBXvz","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T06:06:52Z","updated_at":"2024-12-11T06:06:52Z","author_association":"CONTRIBUTOR","body":"127.0.0.1/service-name","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2533719027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2533776487","html_url":"https://github.com/apache/brpc/pull/1947#issuecomment-2533776487","issue_url":"https://api.github.com/repos/apache/brpc/issues/1947","id":2533776487,"node_id":"IC_kwDOBhmkcs6XBlxn","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T06:52:09Z","updated_at":"2024-12-11T06:52:09Z","author_association":"CONTRIBUTOR","body":"@Aaaaaaron cc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2533776487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2535153751","html_url":"https://github.com/apache/brpc/issues/2838#issuecomment-2535153751","issue_url":"https://api.github.com/repos/apache/brpc/issues/2838","id":2535153751,"node_id":"IC_kwDOBhmkcs6XG2BX","user":{"login":"clee01","id":34154239,"node_id":"MDQ6VXNlcjM0MTU0MjM5","avatar_url":"https://avatars.githubusercontent.com/u/34154239?v=4","gravatar_id":"","url":"https://api.github.com/users/clee01","html_url":"https://github.com/clee01","followers_url":"https://api.github.com/users/clee01/followers","following_url":"https://api.github.com/users/clee01/following{/other_user}","gists_url":"https://api.github.com/users/clee01/gists{/gist_id}","starred_url":"https://api.github.com/users/clee01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clee01/subscriptions","organizations_url":"https://api.github.com/users/clee01/orgs","repos_url":"https://api.github.com/users/clee01/repos","events_url":"https://api.github.com/users/clee01/events{/privacy}","received_events_url":"https://api.github.com/users/clee01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T08:43:27Z","updated_at":"2024-12-11T08:43:27Z","author_association":"NONE","body":"只是单纯把`zk://` trim掉了嘛?\r\n\r\n考虑一个使用场景，如果给到的是 `zk://127.0.0.1:2181/service-name`，框架能给解析出zk的server为`127.0.0.1:2181` 和 service_name为`/service-name`嘛","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2535153751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2535236330","html_url":"https://github.com/apache/brpc/issues/2838#issuecomment-2535236330","issue_url":"https://api.github.com/repos/apache/brpc/issues/2838","id":2535236330,"node_id":"IC_kwDOBhmkcs6XHKLq","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T09:00:39Z","updated_at":"2024-12-11T09:00:39Z","author_association":"CONTRIBUTOR","body":"这个格式是由zk_naming_service定义的，所以需要由zk_naming_service来解析。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2535236330/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2535359810","html_url":"https://github.com/apache/brpc/issues/2294#issuecomment-2535359810","issue_url":"https://api.github.com/repos/apache/brpc/issues/2294","id":2535359810,"node_id":"IC_kwDOBhmkcs6XHoVC","user":{"login":"muziandmuzi","id":38377819,"node_id":"MDQ6VXNlcjM4Mzc3ODE5","avatar_url":"https://avatars.githubusercontent.com/u/38377819?v=4","gravatar_id":"","url":"https://api.github.com/users/muziandmuzi","html_url":"https://github.com/muziandmuzi","followers_url":"https://api.github.com/users/muziandmuzi/followers","following_url":"https://api.github.com/users/muziandmuzi/following{/other_user}","gists_url":"https://api.github.com/users/muziandmuzi/gists{/gist_id}","starred_url":"https://api.github.com/users/muziandmuzi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/muziandmuzi/subscriptions","organizations_url":"https://api.github.com/users/muziandmuzi/orgs","repos_url":"https://api.github.com/users/muziandmuzi/repos","events_url":"https://api.github.com/users/muziandmuzi/events{/privacy}","received_events_url":"https://api.github.com/users/muziandmuzi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T09:56:21Z","updated_at":"2024-12-11T09:56:21Z","author_association":"NONE","body":"> 建议在客户端和服务端分别抓包看下，看看是客户端、服务端还是网络的问题\r\n\r\n偶现的这种问题，该怎么去找包呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2535359810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2536440690","html_url":"https://github.com/apache/brpc/pull/2842#issuecomment-2536440690","issue_url":"https://api.github.com/repos/apache/brpc/issues/2842","id":2536440690,"node_id":"IC_kwDOBhmkcs6XLwNy","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-11T16:15:11Z","updated_at":"2024-12-11T16:15:11Z","author_association":"CONTRIBUTOR","body":"> 赞，文档也更新一下？\r\n\r\ndone","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2536440690/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2538690683","html_url":"https://github.com/apache/brpc/issues/2845#issuecomment-2538690683","issue_url":"https://api.github.com/repos/apache/brpc/issues/2845","id":2538690683,"node_id":"IC_kwDOBhmkcs6XUVh7","user":{"login":"tongke6","id":124763920,"node_id":"U_kgDOB2-_EA","avatar_url":"https://avatars.githubusercontent.com/u/124763920?v=4","gravatar_id":"","url":"https://api.github.com/users/tongke6","html_url":"https://github.com/tongke6","followers_url":"https://api.github.com/users/tongke6/followers","following_url":"https://api.github.com/users/tongke6/following{/other_user}","gists_url":"https://api.github.com/users/tongke6/gists{/gist_id}","starred_url":"https://api.github.com/users/tongke6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tongke6/subscriptions","organizations_url":"https://api.github.com/users/tongke6/orgs","repos_url":"https://api.github.com/users/tongke6/repos","events_url":"https://api.github.com/users/tongke6/events{/privacy}","received_events_url":"https://api.github.com/users/tongke6/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-12T11:52:26Z","updated_at":"2024-12-12T11:52:26Z","author_association":"CONTRIBUTOR","body":"Hello @chenBright, I will submit a PR to fix this issue, could you help me review the code?\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2538690683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2540415676","html_url":"https://github.com/apache/brpc/pull/2846#issuecomment-2540415676","issue_url":"https://api.github.com/repos/apache/brpc/issues/2846","id":2540415676,"node_id":"IC_kwDOBhmkcs6Xa6q8","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T02:46:09Z","updated_at":"2024-12-13T02:46:09Z","author_association":"CONTRIBUTOR","body":"@oathdruid cc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2540415676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2540416287","html_url":"https://github.com/apache/brpc/issues/2845#issuecomment-2540416287","issue_url":"https://api.github.com/repos/apache/brpc/issues/2845","id":2540416287,"node_id":"IC_kwDOBhmkcs6Xa60f","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T02:46:42Z","updated_at":"2024-12-13T02:46:42Z","author_association":"CONTRIBUTOR","body":"> Hello @chenBright, I will submit a PR to fix this issue, could you help me review the code?\r\n\r\nok","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2540416287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2541258353","html_url":"https://github.com/apache/brpc/issues/2849#issuecomment-2541258353","issue_url":"https://api.github.com/repos/apache/brpc/issues/2849","id":2541258353,"node_id":"IC_kwDOBhmkcs6XeIZx","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-13T11:39:43Z","updated_at":"2024-12-13T11:39:43Z","author_association":"CONTRIBUTOR","body":"Related issues: #2817\r\nRelated PR: #2819 #2398","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2541258353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2542939777","html_url":"https://github.com/apache/brpc/issues/2847#issuecomment-2542939777","issue_url":"https://api.github.com/repos/apache/brpc/issues/2847","id":2542939777,"node_id":"IC_kwDOBhmkcs6Xki6B","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-14T07:32:41Z","updated_at":"2024-12-14T07:32:41Z","author_association":"CONTRIBUTOR","body":"连接断开后，client会close stream的。on_closed执行了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2542939777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2542943770","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2542943770","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2542943770,"node_id":"IC_kwDOBhmkcs6Xkj4a","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-14T07:34:18Z","updated_at":"2024-12-14T07:34:18Z","author_association":"CONTRIBUTOR","body":"试试[持续下载](https://github.com/apache/brpc/blob/master/docs/cn/http_client.md#%E6%8C%81%E7%BB%AD%E4%B8%8B%E8%BD%BD)看有没有改善？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2542943770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2543053231","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2543053231","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2543053231,"node_id":"IC_kwDOBhmkcs6Xk-mv","user":{"login":"mizuse-emiya","id":44341056,"node_id":"MDQ6VXNlcjQ0MzQxMDU2","avatar_url":"https://avatars.githubusercontent.com/u/44341056?v=4","gravatar_id":"","url":"https://api.github.com/users/mizuse-emiya","html_url":"https://github.com/mizuse-emiya","followers_url":"https://api.github.com/users/mizuse-emiya/followers","following_url":"https://api.github.com/users/mizuse-emiya/following{/other_user}","gists_url":"https://api.github.com/users/mizuse-emiya/gists{/gist_id}","starred_url":"https://api.github.com/users/mizuse-emiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mizuse-emiya/subscriptions","organizations_url":"https://api.github.com/users/mizuse-emiya/orgs","repos_url":"https://api.github.com/users/mizuse-emiya/repos","events_url":"https://api.github.com/users/mizuse-emiya/events{/privacy}","received_events_url":"https://api.github.com/users/mizuse-emiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-14T10:51:37Z","updated_at":"2024-12-14T10:51:37Z","author_association":"NONE","body":"> 试试[持续下载](https://github.com/apache/brpc/blob/master/docs/cn/http_client.md#%E6%8C%81%E7%BB%AD%E4%B8%8B%E8%BD%BD)看有没有改善？\r\n\r\n抱歉，我们使用的是http直接请求，没有用brpc的client，然后主要问题在于返回1g的数据花了10多秒，根据日志显示应该是请求3秒内rpc方法已经处理完了，也就是返回数据写入socket到返回花了10秒时间，这和我们的网卡带宽和brpc的性能测试貌似不太对得上","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2543053231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2543481152","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2543481152","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2543481152,"node_id":"IC_kwDOBhmkcs6XmnFA","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-15T06:38:30Z","updated_at":"2024-12-15T06:38:30Z","author_association":"CONTRIBUTOR","body":"可以抓包看看server发包情况吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2543481152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544435898","html_url":"https://github.com/apache/brpc/issues/2222#issuecomment-2544435898","issue_url":"https://api.github.com/repos/apache/brpc/issues/2222","id":2544435898,"node_id":"IC_kwDOBhmkcs6XqQK6","user":{"login":"qingwen220","id":4844445,"node_id":"MDQ6VXNlcjQ4NDQ0NDU=","avatar_url":"https://avatars.githubusercontent.com/u/4844445?v=4","gravatar_id":"","url":"https://api.github.com/users/qingwen220","html_url":"https://github.com/qingwen220","followers_url":"https://api.github.com/users/qingwen220/followers","following_url":"https://api.github.com/users/qingwen220/following{/other_user}","gists_url":"https://api.github.com/users/qingwen220/gists{/gist_id}","starred_url":"https://api.github.com/users/qingwen220/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qingwen220/subscriptions","organizations_url":"https://api.github.com/users/qingwen220/orgs","repos_url":"https://api.github.com/users/qingwen220/repos","events_url":"https://api.github.com/users/qingwen220/events{/privacy}","received_events_url":"https://api.github.com/users/qingwen220/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T02:56:13Z","updated_at":"2024-12-16T02:56:13Z","author_association":"NONE","body":"> 服务端也是通过controller获取 // Set/get timeout in milliseconds for the RPC call. Use // ChannelOptions.timeout_ms on unset. void set_timeout_ms(int64_t timeout_ms); int64_t timeout_ms() const { return _timeout_ms; } 需要设置上FLAGS_baidu_std_protocol_deliver_timeout_ms这个flag 这是一个超时时间，是相对时间，比如500ms等。\r\n\r\n@yanglimingcn  这个是那个版本开始支持的呢，我这边本地用的版本告知 timeout_ms() 是 client-side. methods，服务端使用行为是未定义的。我测试验证确实server端也拿不到 client 端设置的 timeout.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544435898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544445439","html_url":"https://github.com/apache/brpc/issues/2222#issuecomment-2544445439","issue_url":"https://api.github.com/repos/apache/brpc/issues/2222","id":2544445439,"node_id":"IC_kwDOBhmkcs6XqSf_","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T03:05:30Z","updated_at":"2024-12-16T03:05:30Z","author_association":"CONTRIBUTOR","body":"> > 服务端也是通过controller获取 // Set/get timeout in milliseconds for the RPC call. Use // ChannelOptions.timeout_ms on unset. void set_timeout_ms(int64_t timeout_ms); int64_t timeout_ms() const { return _timeout_ms; } 需要设置上FLAGS_baidu_std_protocol_deliver_timeout_ms这个flag 这是一个超时时间，是相对时间，比如500ms等。\r\n> \r\n> @yanglimingcn 这个是那个版本开始支持的呢，我这边本地用的版本告知 timeout_ms() 是 client-side. methods，服务端使用行为是未定义的。我测试验证确实server端也拿不到 client 端设置的 timeout.\r\n\r\nFLAGS_baidu_std_protocol_deliver_timeout_ms看一下这个选项，得打开它。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544445439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544706857","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2544706857","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2544706857,"node_id":"IC_kwDOBhmkcs6XrSUp","user":{"login":"mizuse-emiya","id":44341056,"node_id":"MDQ6VXNlcjQ0MzQxMDU2","avatar_url":"https://avatars.githubusercontent.com/u/44341056?v=4","gravatar_id":"","url":"https://api.github.com/users/mizuse-emiya","html_url":"https://github.com/mizuse-emiya","followers_url":"https://api.github.com/users/mizuse-emiya/followers","following_url":"https://api.github.com/users/mizuse-emiya/following{/other_user}","gists_url":"https://api.github.com/users/mizuse-emiya/gists{/gist_id}","starred_url":"https://api.github.com/users/mizuse-emiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mizuse-emiya/subscriptions","organizations_url":"https://api.github.com/users/mizuse-emiya/orgs","repos_url":"https://api.github.com/users/mizuse-emiya/repos","events_url":"https://api.github.com/users/mizuse-emiya/events{/privacy}","received_events_url":"https://api.github.com/users/mizuse-emiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T06:24:02Z","updated_at":"2024-12-16T06:24:02Z","author_association":"NONE","body":"<img width=\"3000\" alt=\"WeChat89a4cccce6c9d8d873ee62a0aea8d8dc\" src=\"https://github.com/user-attachments/assets/f57c3971-9fb7-49d8-9a48-c92ec6b4355f\" />\r\n<img width=\"500\" alt=\"WeChat1ff1e82dbc521b7a5a12176e0b0d2982\" src=\"https://github.com/user-attachments/assets/8fa7a18b-ba99-4b9a-8676-3012144b8b98\" />\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544706857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544707761","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2544707761","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2544707761,"node_id":"IC_kwDOBhmkcs6XrSix","user":{"login":"mizuse-emiya","id":44341056,"node_id":"MDQ6VXNlcjQ0MzQxMDU2","avatar_url":"https://avatars.githubusercontent.com/u/44341056?v=4","gravatar_id":"","url":"https://api.github.com/users/mizuse-emiya","html_url":"https://github.com/mizuse-emiya","followers_url":"https://api.github.com/users/mizuse-emiya/followers","following_url":"https://api.github.com/users/mizuse-emiya/following{/other_user}","gists_url":"https://api.github.com/users/mizuse-emiya/gists{/gist_id}","starred_url":"https://api.github.com/users/mizuse-emiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mizuse-emiya/subscriptions","organizations_url":"https://api.github.com/users/mizuse-emiya/orgs","repos_url":"https://api.github.com/users/mizuse-emiya/repos","events_url":"https://api.github.com/users/mizuse-emiya/events{/privacy}","received_events_url":"https://api.github.com/users/mizuse-emiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T06:24:46Z","updated_at":"2024-12-16T06:24:46Z","author_association":"NONE","body":"> 你好，已经抓包分析，测试是返回一次http请求返回1GB数据， 看起来server在接受请求后0.7秒开始发包返回数据\r\n> 1GB均匀得发送了10s才将数据发送完毕，这和我们网卡的吞吐有点对不上，测试服务器上当时没有其他大量数据往返的网络请求。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544707761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544740762","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2544740762","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2544740762,"node_id":"IC_kwDOBhmkcs6Xrama","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T06:49:45Z","updated_at":"2024-12-16T06:51:00Z","author_association":"CONTRIBUTOR","body":"会不会是网络问题或者client收数据慢了呢？\r\n\r\n1. 有没有发生丢包、重传、拥塞控制？\r\n2. 分析一下抓包数据，client的接受窗口有没有变化？\r\n3. 看一下bvar内置服务rpc_keepwrite_second、rpc_waitepollout_count、rpc_waitepollout_second这三个指标。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544740762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544877581","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2544877581","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2544877581,"node_id":"IC_kwDOBhmkcs6Xr8AN","user":{"login":"mizuse-emiya","id":44341056,"node_id":"MDQ6VXNlcjQ0MzQxMDU2","avatar_url":"https://avatars.githubusercontent.com/u/44341056?v=4","gravatar_id":"","url":"https://api.github.com/users/mizuse-emiya","html_url":"https://github.com/mizuse-emiya","followers_url":"https://api.github.com/users/mizuse-emiya/followers","following_url":"https://api.github.com/users/mizuse-emiya/following{/other_user}","gists_url":"https://api.github.com/users/mizuse-emiya/gists{/gist_id}","starred_url":"https://api.github.com/users/mizuse-emiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mizuse-emiya/subscriptions","organizations_url":"https://api.github.com/users/mizuse-emiya/orgs","repos_url":"https://api.github.com/users/mizuse-emiya/repos","events_url":"https://api.github.com/users/mizuse-emiya/events{/privacy}","received_events_url":"https://api.github.com/users/mizuse-emiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T08:13:20Z","updated_at":"2024-12-16T08:16:56Z","author_association":"NONE","body":"> 会不会是网络问题或者client收数据慢了呢？\r\n> \r\n> 1. 有没有发生丢包、重传、拥塞控制？\r\n> 2. 分析一下抓包数据，client的接受窗口有没有变化？\r\n> 3. 看一下bvar内置服务rpc_keepwrite_second、rpc_waitepollout_count、rpc_waitepollout_second这三个指标。\r\n\r\n1.丢包和重传发生次数较少，但触发了过拥塞控制，接受窗口有变化，如图\r\n<img width=\"1237\" alt=\"WeChat30d6745caebff36ca14fdcfaa9be6bfc\" src=\"https://github.com/user-attachments/assets/27e18b9b-752e-4a83-aad6-54b5b97f47cb\" />\r\n但是平时的发送速率依然不高，貌似不是bottleneck\r\n2.请求时rpc_keepwrite_second只在瞬时超过4s，另两个指标如图，但是不太理解什么意思\r\n<img width=\"848\" alt=\"WeChat0bd40dccb9dcfd8d5c9a06206d322b0f\" src=\"https://github.com/user-attachments/assets/5d0f1d69-d18a-4818-8359-f2ceeef679fa\" />\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544877581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544907612","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2544907612","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2544907612,"node_id":"IC_kwDOBhmkcs6XsDVc","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T08:28:50Z","updated_at":"2024-12-16T08:28:50Z","author_association":"CONTRIBUTOR","body":"rpc_waitepollout_count表示server写socket写到EAGAIN的次数，看起来server不是瓶颈。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544907612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544925572","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2544925572","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2544925572,"node_id":"IC_kwDOBhmkcs6XsHuE","user":{"login":"mizuse-emiya","id":44341056,"node_id":"MDQ6VXNlcjQ0MzQxMDU2","avatar_url":"https://avatars.githubusercontent.com/u/44341056?v=4","gravatar_id":"","url":"https://api.github.com/users/mizuse-emiya","html_url":"https://github.com/mizuse-emiya","followers_url":"https://api.github.com/users/mizuse-emiya/followers","following_url":"https://api.github.com/users/mizuse-emiya/following{/other_user}","gists_url":"https://api.github.com/users/mizuse-emiya/gists{/gist_id}","starred_url":"https://api.github.com/users/mizuse-emiya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mizuse-emiya/subscriptions","organizations_url":"https://api.github.com/users/mizuse-emiya/orgs","repos_url":"https://api.github.com/users/mizuse-emiya/repos","events_url":"https://api.github.com/users/mizuse-emiya/events{/privacy}","received_events_url":"https://api.github.com/users/mizuse-emiya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T08:36:33Z","updated_at":"2024-12-16T08:36:33Z","author_association":"NONE","body":"> rpc_waitepollout_count表示server写socket写到EAGAIN的次数，看起来server不是瓶颈。\r\n\r\nclient的窗口看着还好没有真正限制到发包过，网卡本身发包慢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544925572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544983171","html_url":"https://github.com/apache/brpc/issues/2843#issuecomment-2544983171","issue_url":"https://api.github.com/repos/apache/brpc/issues/2843","id":2544983171,"node_id":"IC_kwDOBhmkcs6XsVyD","user":{"login":"clee01","id":34154239,"node_id":"MDQ6VXNlcjM0MTU0MjM5","avatar_url":"https://avatars.githubusercontent.com/u/34154239?v=4","gravatar_id":"","url":"https://api.github.com/users/clee01","html_url":"https://github.com/clee01","followers_url":"https://api.github.com/users/clee01/followers","following_url":"https://api.github.com/users/clee01/following{/other_user}","gists_url":"https://api.github.com/users/clee01/gists{/gist_id}","starred_url":"https://api.github.com/users/clee01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clee01/subscriptions","organizations_url":"https://api.github.com/users/clee01/orgs","repos_url":"https://api.github.com/users/clee01/repos","events_url":"https://api.github.com/users/clee01/events{/privacy}","received_events_url":"https://api.github.com/users/clee01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T08:59:23Z","updated_at":"2024-12-16T08:59:23Z","author_association":"NONE","body":"any heros?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2544983171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2545004276","html_url":"https://github.com/apache/brpc/issues/2843#issuecomment-2545004276","issue_url":"https://api.github.com/repos/apache/brpc/issues/2843","id":2545004276,"node_id":"IC_kwDOBhmkcs6Xsa70","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T09:08:36Z","updated_at":"2024-12-16T09:08:36Z","author_association":"CONTRIBUTOR","body":"应该是没需求吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2545004276/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2545431522","html_url":"https://github.com/apache/brpc/issues/2848#issuecomment-2545431522","issue_url":"https://api.github.com/repos/apache/brpc/issues/2848","id":2545431522,"node_id":"IC_kwDOBhmkcs6XuDPi","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T11:57:53Z","updated_at":"2024-12-16T11:57:53Z","author_association":"CONTRIBUTOR","body":"有可能\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2545431522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2546141325","html_url":"https://github.com/apache/brpc/issues/2833#issuecomment-2546141325","issue_url":"https://api.github.com/repos/apache/brpc/issues/2833","id":2546141325,"node_id":"IC_kwDOBhmkcs6XwwiN","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-16T16:51:15Z","updated_at":"2024-12-17T02:43:40Z","author_association":"CONTRIBUTOR","body":"之前在#1822 讨论过这个需求，看起来自定义callback不太满足这个需求：\r\n1. 用户能知道第一次调度，但是不知道最后一次调度。\r\n2. 用户需要熟悉bthread内部调度原理才能用好callback。\r\n\r\n自定义callback结合#2851 中的bthread状态，应该会好用些。\r\n\r\nhttps://github.com/apache/brpc/issues/1822#issuecomment-1202082072\r\n> 考虑扩展一下bthread::TaskStatistics，加个cpu消耗的统计项，并且在bthread切换时更新该值。\r\n\r\n我认为这个方案更合适。clock_gettime是系统调用，会影响bthread调度性能，所以在此方案的基础上补充两点：\r\n1. 在bthread_attrflags_t加个开关，默认不统计纯cpu消耗。用户有需要可以通过bthread_attrflags_t启用该功能。\r\n2. server bthread是由框架创建的，用户没法干预。通过ServerOptions/gflag来启用该功能。\r\n\r\n@wwbmmm 有什么建议吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2546141325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547426710","html_url":"https://github.com/apache/brpc/issues/2847#issuecomment-2547426710","issue_url":"https://api.github.com/repos/apache/brpc/issues/2847","id":2547426710,"node_id":"IC_kwDOBhmkcs6X1qWW","user":{"login":"pavel2003","id":7892679,"node_id":"MDQ6VXNlcjc4OTI2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/7892679?v=4","gravatar_id":"","url":"https://api.github.com/users/pavel2003","html_url":"https://github.com/pavel2003","followers_url":"https://api.github.com/users/pavel2003/followers","following_url":"https://api.github.com/users/pavel2003/following{/other_user}","gists_url":"https://api.github.com/users/pavel2003/gists{/gist_id}","starred_url":"https://api.github.com/users/pavel2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavel2003/subscriptions","organizations_url":"https://api.github.com/users/pavel2003/orgs","repos_url":"https://api.github.com/users/pavel2003/repos","events_url":"https://api.github.com/users/pavel2003/events{/privacy}","received_events_url":"https://api.github.com/users/pavel2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T03:25:00Z","updated_at":"2024-12-17T03:30:59Z","author_association":"NONE","body":"分析了流程，应该是我们使用的有点问题\r\n\r\n为了流控，我们在stream的on_recevie函数中做了事件等待，由于故意手动的sleep导致on_recevie的队列满了后，会等待着\r\n\r\n此时重启server后，client端会收到socket断链的时间，reset所有stream\r\n\r\n但是reset stream是通过调用Stream::BeforeRecycle  ---> execution_queue_stop\r\n\r\n由于Stream::Consume需要被调用才能处理stop事件，清理底层的socket，由于之前的Consume还阻塞在流控对应的事件中，而对应的事件由于故意的sleep导致无法触发，就陷入死锁了\r\n\r\n这种有没有好的办法呢？\r\n1）需要做流控\r\n2）一个stream的处理逻辑中可能会卡死（处理时间非常长的情况）\r\n3）此时重启机器\r\n\r\n清理socket操作是不是不要依赖Stream::Consume的调用？  这个会调用用户自己设置的on_recevie函数，一旦卡住，就影响了整个底层的清理功能了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547426710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547639275","html_url":"https://github.com/apache/brpc/pull/2851#issuecomment-2547639275","issue_url":"https://api.github.com/repos/apache/brpc/issues/2851","id":2547639275,"node_id":"IC_kwDOBhmkcs6X2ePr","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T06:53:23Z","updated_at":"2024-12-17T06:53:23Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547639275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547677640","html_url":"https://github.com/apache/brpc/issues/2833#issuecomment-2547677640","issue_url":"https://api.github.com/repos/apache/brpc/issues/2833","id":2547677640,"node_id":"IC_kwDOBhmkcs6X2nnI","user":{"login":"icexin","id":2713364,"node_id":"MDQ6VXNlcjI3MTMzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2713364?v=4","gravatar_id":"","url":"https://api.github.com/users/icexin","html_url":"https://github.com/icexin","followers_url":"https://api.github.com/users/icexin/followers","following_url":"https://api.github.com/users/icexin/following{/other_user}","gists_url":"https://api.github.com/users/icexin/gists{/gist_id}","starred_url":"https://api.github.com/users/icexin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icexin/subscriptions","organizations_url":"https://api.github.com/users/icexin/orgs","repos_url":"https://api.github.com/users/icexin/repos","events_url":"https://api.github.com/users/icexin/events{/privacy}","received_events_url":"https://api.github.com/users/icexin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T07:20:54Z","updated_at":"2024-12-17T07:20:54Z","author_association":"CONTRIBUTOR","body":"我在内部分支写了一个版本，是通过动态flag控制的。主要是考虑到clock_gettime在获取thread cpu time的开销大概是200ns，常态开启会有一些影响，使用上可以接受类似pprof的开启一段时间，拿到数据后就不需要开启了。\r\n\r\n具体实现是在调度器里面切换bthread的时候进行累加","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547677640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547695006","html_url":"https://github.com/apache/brpc/issues/2833#issuecomment-2547695006","issue_url":"https://api.github.com/repos/apache/brpc/issues/2833","id":2547695006,"node_id":"IC_kwDOBhmkcs6X2r2e","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T07:32:51Z","updated_at":"2024-12-17T07:32:51Z","author_association":"CONTRIBUTOR","body":"> 之前在#1822 讨论过这个需求，看起来自定义callback不太满足这个需求：\r\n> \r\n> 1. 用户能知道第一次调度，但是不知道最后一次调度。\r\n> 2. 用户需要熟悉bthread内部调度原理才能用好callback。\r\n> \r\n> 自定义callback结合#2851 中的bthread状态，应该会好用些。\r\n> \r\n> [#1822 (comment)](https://github.com/apache/brpc/issues/1822#issuecomment-1202082072)\r\n> \r\n> > 考虑扩展一下bthread::TaskStatistics，加个cpu消耗的统计项，并且在bthread切换时更新该值。\r\n> \r\n> 我认为这个方案更合适。clock_gettime是系统调用，会影响bthread调度性能，所以在此方案的基础上补充两点：\r\n> \r\n> 1. 在bthread_attrflags_t加个开关，默认不统计纯cpu消耗。用户有需要可以通过bthread_attrflags_t启用该功能。\r\n> 2. server bthread是由框架创建的，用户没法干预。通过ServerOptions/gflag来启用该功能。\r\n> \r\n> @wwbmmm 有什么建议吗？\r\n\r\n用户可能是想针对每一个请求获取具体的cpu时间，那么得给用户提供一个获取的接口，用户在执行完Server callback的最后调用这个接口，这个时候bthread实际上还没有结束。\r\n\r\n不过，通过这种方式来统计请求消耗的cpu并不准确，因为请求相关的cpu计算并不仅仅发生在请求所在的那个bthread，还可能出现在其它后台线程、epoll线程、异步callback线程之中，这个取决于具体的业务逻辑。统计bthread的cpu时间只能提供一个参考。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547695006/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547721422","html_url":"https://github.com/apache/brpc/issues/2847#issuecomment-2547721422","issue_url":"https://api.github.com/repos/apache/brpc/issues/2847","id":2547721422,"node_id":"IC_kwDOBhmkcs6X2yTO","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T07:50:06Z","updated_at":"2024-12-17T07:50:06Z","author_association":"CONTRIBUTOR","body":"没办法，实现上必须保证Stream析构了才能对Socket进行健康检查或者回收。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2547721422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548104873","html_url":"https://github.com/apache/brpc/issues/2849#issuecomment-2548104873","issue_url":"https://api.github.com/repos/apache/brpc/issues/2849","id":2548104873,"node_id":"IC_kwDOBhmkcs6X4P6p","user":{"login":"icexin","id":2713364,"node_id":"MDQ6VXNlcjI3MTMzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2713364?v=4","gravatar_id":"","url":"https://api.github.com/users/icexin","html_url":"https://github.com/icexin","followers_url":"https://api.github.com/users/icexin/followers","following_url":"https://api.github.com/users/icexin/following{/other_user}","gists_url":"https://api.github.com/users/icexin/gists{/gist_id}","starred_url":"https://api.github.com/users/icexin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icexin/subscriptions","organizations_url":"https://api.github.com/users/icexin/orgs","repos_url":"https://api.github.com/users/icexin/repos","events_url":"https://api.github.com/users/icexin/events{/privacy}","received_events_url":"https://api.github.com/users/icexin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T10:38:24Z","updated_at":"2024-12-17T10:38:24Z","author_association":"CONTRIBUTOR","body":"这个是一个普遍问题，我们线上也遇到了。有状态服务一般会独占机器，现在机器普遍核数都比较多，基本都100+核数了。目前看到brpc在bthread worker比较多的时候调度开销比较大，希望社区能尽快解决一下哈~ ❤️","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548104873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548150734","html_url":"https://github.com/apache/brpc/issues/2849#issuecomment-2548150734","issue_url":"https://api.github.com/repos/apache/brpc/issues/2849","id":2548150734,"node_id":"IC_kwDOBhmkcs6X4bHO","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T11:00:27Z","updated_at":"2024-12-17T11:00:27Z","author_association":"CONTRIBUTOR","body":"可以试试分组 https://github.com/apache/brpc/blob/master/docs/cn/bthread_tagged_task_group.md ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548150734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548188610","html_url":"https://github.com/apache/brpc/issues/2849#issuecomment-2548188610","issue_url":"https://api.github.com/repos/apache/brpc/issues/2849","id":2548188610,"node_id":"IC_kwDOBhmkcs6X4kXC","user":{"login":"MJY-HUST","id":52315061,"node_id":"MDQ6VXNlcjUyMzE1MDYx","avatar_url":"https://avatars.githubusercontent.com/u/52315061?v=4","gravatar_id":"","url":"https://api.github.com/users/MJY-HUST","html_url":"https://github.com/MJY-HUST","followers_url":"https://api.github.com/users/MJY-HUST/followers","following_url":"https://api.github.com/users/MJY-HUST/following{/other_user}","gists_url":"https://api.github.com/users/MJY-HUST/gists{/gist_id}","starred_url":"https://api.github.com/users/MJY-HUST/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MJY-HUST/subscriptions","organizations_url":"https://api.github.com/users/MJY-HUST/orgs","repos_url":"https://api.github.com/users/MJY-HUST/repos","events_url":"https://api.github.com/users/MJY-HUST/events{/privacy}","received_events_url":"https://api.github.com/users/MJY-HUST/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T11:18:27Z","updated_at":"2024-12-17T11:18:27Z","author_association":"CONTRIBUTOR","body":"我看现在parking_lot的数量是写死的，一个tag内只有四个；一旦worker数量多了，futex中锁的竞争就上来了，想问一下这个值改成一个可配的参数或者根据tag所属的worker总数来动态调大会有什么负面影响吗？（比如parking_lot的数量 = bthread_concurrency_by_tag / 4 or 8）。\r\n我自己做了一些测试，除了上述的做法之外，减少无效的signal和在wait前先steal一次也能解决一部分问题。\r\n相同的负载:\r\n启动四个rpc_press\r\n./rpc_press -proto=echo_c++/echo.proto -method=example.EchoService.Echo -input='{\"message\":\"hello\"}' -qps=100000 -server=0.0.0.0:8000 -timeout_ms=-1 \r\n服务端使用example/echo_c++中的，server，worker线程数量为64个，但是在服务内增加了使用bthread_start_background创建两个bthread来模拟触发signal的行为，优化前后：\r\n 前：\r\n![image](https://github.com/user-attachments/assets/d6b30d8d-fb2b-4165-b9f6-6ee04015c1d5)\r\n![image](https://github.com/user-attachments/assets/239860bc-3b97-466c-90b2-f9294200772f)\r\n![image](https://github.com/user-attachments/assets/9e852c19-79d0-48b9-bfe3-80600c4689bf)\r\n\r\n\r\n后：parking_lot改为16个\r\n![image](https://github.com/user-attachments/assets/93f071dc-a196-4d46-9b2c-39f78fb64819)\r\n![image](https://github.com/user-attachments/assets/d3aa30d0-8c6f-412a-9bc9-393304be0bbd)\r\n![image](https://github.com/user-attachments/assets/25d0e6b0-1941-4004-a6ed-0344b1b904ee)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548188610/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548260250","html_url":"https://github.com/apache/brpc/issues/2849#issuecomment-2548260250","issue_url":"https://api.github.com/repos/apache/brpc/issues/2849","id":2548260250,"node_id":"IC_kwDOBhmkcs6X412a","user":{"login":"GreateCode","id":9795716,"node_id":"MDQ6VXNlcjk3OTU3MTY=","avatar_url":"https://avatars.githubusercontent.com/u/9795716?v=4","gravatar_id":"","url":"https://api.github.com/users/GreateCode","html_url":"https://github.com/GreateCode","followers_url":"https://api.github.com/users/GreateCode/followers","following_url":"https://api.github.com/users/GreateCode/following{/other_user}","gists_url":"https://api.github.com/users/GreateCode/gists{/gist_id}","starred_url":"https://api.github.com/users/GreateCode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GreateCode/subscriptions","organizations_url":"https://api.github.com/users/GreateCode/orgs","repos_url":"https://api.github.com/users/GreateCode/repos","events_url":"https://api.github.com/users/GreateCode/events{/privacy}","received_events_url":"https://api.github.com/users/GreateCode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-17T11:55:23Z","updated_at":"2024-12-17T11:55:23Z","author_association":"CONTRIBUTOR","body":"> 可以试试分组 https://github.com/apache/brpc/blob/master/docs/cn/bthread_tagged_task_group.md\r\n\r\n分tag得把N个tag（brpc::Server）绑到N个port吧，不太优雅","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2548260250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2550591634","html_url":"https://github.com/apache/brpc/issues/2845#issuecomment-2550591634","issue_url":"https://api.github.com/repos/apache/brpc/issues/2845","id":2550591634,"node_id":"IC_kwDOBhmkcs6YBvCS","user":{"login":"tongke6","id":124763920,"node_id":"U_kgDOB2-_EA","avatar_url":"https://avatars.githubusercontent.com/u/124763920?v=4","gravatar_id":"","url":"https://api.github.com/users/tongke6","html_url":"https://github.com/tongke6","followers_url":"https://api.github.com/users/tongke6/followers","following_url":"https://api.github.com/users/tongke6/following{/other_user}","gists_url":"https://api.github.com/users/tongke6/gists{/gist_id}","starred_url":"https://api.github.com/users/tongke6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tongke6/subscriptions","organizations_url":"https://api.github.com/users/tongke6/orgs","repos_url":"https://api.github.com/users/tongke6/repos","events_url":"https://api.github.com/users/tongke6/events{/privacy}","received_events_url":"https://api.github.com/users/tongke6/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T07:49:16Z","updated_at":"2024-12-18T07:49:16Z","author_association":"CONTRIBUTOR","body":"The dependency Thrift for BRPC also fails to build on the macOS platform: https://github.com/baidu/babylon/issues/78","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2550591634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2550617183","html_url":"https://github.com/apache/brpc/issues/2849#issuecomment-2550617183","issue_url":"https://api.github.com/repos/apache/brpc/issues/2849","id":2550617183,"node_id":"IC_kwDOBhmkcs6YB1Rf","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T08:04:45Z","updated_at":"2024-12-18T08:04:45Z","author_association":"CONTRIBUTOR","body":"> > 可以试试分组 https://github.com/apache/brpc/blob/master/docs/cn/bthread_tagged_task_group.md\r\n> \r\n> 分tag得把N个tag（brpc::Server）绑到N个port吧，不太优雅\r\n\r\n是的，需要这么做，如果各个Server之间没有要求很强的隔离性，那确实也不用这么做。本质上是得优化协程调度。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2550617183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2550930090","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2550930090","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2550930090,"node_id":"IC_kwDOBhmkcs6YDBqq","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T10:18:26Z","updated_at":"2024-12-18T10:18:34Z","author_association":"CONTRIBUTOR","body":"试一下Controller::ignore_eovercrowded()","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2550930090/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2551209822","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2551209822","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2551209822,"node_id":"IC_kwDOBhmkcs6YEF9e","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T12:34:18Z","updated_at":"2024-12-18T12:36:20Z","author_association":"CONTRIBUTOR","body":"> 试一下Controller::ignore_eovercrowded()\r\n\r\n大佬，这个方法相当于不检测拥塞，尽最大努力发送吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2551209822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2551234065","html_url":"https://github.com/apache/brpc/pull/2852#issuecomment-2551234065","issue_url":"https://api.github.com/repos/apache/brpc/issues/2852","id":2551234065,"node_id":"IC_kwDOBhmkcs6YEL4R","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T12:45:20Z","updated_at":"2024-12-18T12:45:20Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2551234065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2551237480","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2551237480","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2551237480,"node_id":"IC_kwDOBhmkcs6YEMto","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-18T12:47:06Z","updated_at":"2024-12-18T12:47:06Z","author_association":"CONTRIBUTOR","body":"忽略拥塞，将数据加入发送队列。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2551237480/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2553016315","html_url":"https://github.com/apache/brpc/issues/2854#issuecomment-2553016315","issue_url":"https://api.github.com/repos/apache/brpc/issues/2854","id":2553016315,"node_id":"IC_kwDOBhmkcs6YK-_7","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-19T08:03:39Z","updated_at":"2024-12-19T08:03:39Z","author_association":"CONTRIBUTOR","body":"Is the bRPC version too old?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2553016315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2556135133","html_url":"https://github.com/apache/brpc/pull/2851#issuecomment-2556135133","issue_url":"https://api.github.com/repos/apache/brpc/issues/2851","id":2556135133,"node_id":"IC_kwDOBhmkcs6YW4bd","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-20T02:24:51Z","updated_at":"2024-12-20T02:24:51Z","author_association":"CONTRIBUTOR","body":"改动了以下几点：\r\n1. 优化信号追踪模式，使用信号量和self-pipe代理while + sleep，延时减少50%以上。\r\n2. 信号追踪模式的同步变量由原来的成员变量改成每次追踪分配一个，避免没有及时执行的信号处理函数影响后续的信号追踪。\r\n3. 移除信号追踪期间的bvar使用，因为初次使用bvar时会访问内存，可能会导致死锁。\r\n4. 一个还没分配栈的bthread在旧bthread结束时被调度，会复用旧bthread栈，并直接执行，不需要jump_stack。所以，bthread状态直接从TASK_STATUS_FIRST_READY变成TASK_STATUS_RUNNING，这样才能追踪该bthread。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2556135133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2556204620","html_url":"https://github.com/apache/brpc/issues/2294#issuecomment-2556204620","issue_url":"https://api.github.com/repos/apache/brpc/issues/2294","id":2556204620,"node_id":"IC_kwDOBhmkcs6YXJZM","user":{"login":"huhuhuyang","id":170014061,"node_id":"U_kgDOCiI1bQ","avatar_url":"https://avatars.githubusercontent.com/u/170014061?v=4","gravatar_id":"","url":"https://api.github.com/users/huhuhuyang","html_url":"https://github.com/huhuhuyang","followers_url":"https://api.github.com/users/huhuhuyang/followers","following_url":"https://api.github.com/users/huhuhuyang/following{/other_user}","gists_url":"https://api.github.com/users/huhuhuyang/gists{/gist_id}","starred_url":"https://api.github.com/users/huhuhuyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huhuhuyang/subscriptions","organizations_url":"https://api.github.com/users/huhuhuyang/orgs","repos_url":"https://api.github.com/users/huhuhuyang/repos","events_url":"https://api.github.com/users/huhuhuyang/events{/privacy}","received_events_url":"https://api.github.com/users/huhuhuyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-20T03:16:07Z","updated_at":"2024-12-20T03:16:07Z","author_association":"NONE","body":"大佬，这个问题怎么解决的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2556204620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2556228941","html_url":"https://github.com/apache/brpc/pull/2852#issuecomment-2556228941","issue_url":"https://api.github.com/repos/apache/brpc/issues/2852","id":2556228941,"node_id":"IC_kwDOBhmkcs6YXPVN","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-20T03:46:31Z","updated_at":"2024-12-20T03:46:31Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2556228941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2557963210","html_url":"https://github.com/apache/brpc/pull/2851#issuecomment-2557963210","issue_url":"https://api.github.com/repos/apache/brpc/issues/2851","id":2557963210,"node_id":"IC_kwDOBhmkcs6Yd2vK","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-21T02:38:39Z","updated_at":"2024-12-21T02:38:39Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2557963210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561055248","html_url":"https://github.com/apache/brpc/issues/1822#issuecomment-2561055248","issue_url":"https://api.github.com/repos/apache/brpc/issues/1822","id":2561055248,"node_id":"IC_kwDOBhmkcs6YppoQ","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-24T12:10:12Z","updated_at":"2024-12-24T12:10:12Z","author_association":"CONTRIBUTOR","body":" Closed this as completed in #2852 .","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561055248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561644983","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561644983","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561644983,"node_id":"IC_kwDOBhmkcs6Yr5m3","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T06:12:15Z","updated_at":"2024-12-25T06:12:15Z","author_association":"CONTRIBUTOR","body":"ignore后依旧有这个问题，相比之前缓解了一些🥲","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561644983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561659335","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561659335","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561659335,"node_id":"IC_kwDOBhmkcs6Yr9HH","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T06:45:11Z","updated_at":"2024-12-25T06:45:11Z","author_association":"CONTRIBUTOR","body":"每次rpc都有调Controller::ignore_eovercrowded()吗？调Controller::ignore_eovercrowded()的rpc才会忽略，其他没调的还是会overcrowded rpc失败。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561659335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561661649","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561661649","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561661649,"node_id":"IC_kwDOBhmkcs6Yr9rR","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T06:50:18Z","updated_at":"2024-12-25T06:50:18Z","author_association":"CONTRIBUTOR","body":"> 每次rpc都有调Controller::ignore_eovercrowded()吗？调Controller::ignore_eovercrowded()的rpc才会忽略，其他没调的还是会overcrowded rpc失败。\r\n\r\n每次都有调用，cntl.ignore_eovercrowded();","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561661649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561673023","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561673023","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561673023,"node_id":"IC_kwDOBhmkcs6YsAc_","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T07:12:55Z","updated_at":"2024-12-25T07:12:55Z","author_association":"CONTRIBUTOR","body":"作为server还是client报错的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561673023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561673327","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561673327","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561673327,"node_id":"IC_kwDOBhmkcs6YsAhv","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T07:13:30Z","updated_at":"2024-12-25T07:13:30Z","author_association":"CONTRIBUTOR","body":"> 作为server还是client报错的？\r\n\r\nclient","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561673327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561680239","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561680239","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561680239,"node_id":"IC_kwDOBhmkcs6YsCNv","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T07:27:11Z","updated_at":"2024-12-25T07:27:11Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/brpc/blob/103da1d5b9d8dc4a509a3b79ba872c4c01aa5a75/src/brpc/socket.cpp#L1634-L1636\r\n\r\nhttps://github.com/apache/brpc/blob/103da1d5b9d8dc4a509a3b79ba872c4c01aa5a75/src/brpc/socket.cpp#L1672-L1674\r\n\r\nclient只有这两个位置会返回失败，理论上调了Controller::ignore_eovercrowded()应该就不会失败了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561680239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561687798","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561687798","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561687798,"node_id":"IC_kwDOBhmkcs6YsED2","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T07:41:28Z","updated_at":"2024-12-25T07:41:28Z","author_association":"CONTRIBUTOR","body":"从现象上看，加上ignore后对比没加的，在指定时间范围内overcrowded的日志减少了一半，看起来有缓解，但没根治","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561687798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561691077","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561691077","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561691077,"node_id":"IC_kwDOBhmkcs6YsE3F","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T07:47:31Z","updated_at":"2024-12-25T07:47:31Z","author_association":"CONTRIBUTOR","body":"这个错误会不会是server回的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561691077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561713559","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561713559","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561713559,"node_id":"IC_kwDOBhmkcs6YsKWX","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T08:26:48Z","updated_at":"2024-12-25T08:30:18Z","author_association":"CONTRIBUTOR","body":"> 这个错误会不会是server回的？\r\n\r\n哦大佬，我刚才理解错意思了，是server回的，拿echo_c++举个例子\r\n```C++\r\ncntl.ignore_eovercrowded();\r\nstub.Echo(&cntl, &request, &response, brpc::DoNothing());\r\nbrpc::Join(cntl.call_id());\r\nif (!cntl.Failed()) {\r\n    LOG(INFO) << \"Received response from \" << cntl.remote_side()\r\n        << \" to \" << cntl.local_side()\r\n        << \": \" << response.message() << \" (attached=\"\r\n        << cntl.response_attachment() << \")\"\r\n        << \" latency=\" << cntl.latency_us() << \"us\";\r\n} else {\r\n    LOG(WARNING) << cntl.ErrorText();\r\n}\r\n```\r\n错误在cntl.ErrorText();打印出来的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561713559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561728854","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561728854","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561728854,"node_id":"IC_kwDOBhmkcs6YsOFW","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T08:52:09Z","updated_at":"2024-12-25T08:52:09Z","author_association":"CONTRIBUTOR","body":"server也忽略一下就好了\r\nhttps://github.com/apache/brpc/blob/master/docs/cn/server.md#server%E7%AB%AF%E5%BF%BD%E7%95%A5eovercrowded","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561728854/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561736082","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2561736082","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2561736082,"node_id":"IC_kwDOBhmkcs6YsP2S","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T09:04:02Z","updated_at":"2024-12-25T09:04:02Z","author_association":"CONTRIBUTOR","body":"> server也忽略一下就好了 https://github.com/apache/brpc/blob/master/docs/cn/server.md#server%E7%AB%AF%E5%BF%BD%E7%95%A5eovercrowded\r\n\r\n感谢大佬，今天抽空测试一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561736082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561927236","html_url":"https://github.com/apache/brpc/issues/1251#issuecomment-2561927236","issue_url":"https://api.github.com/repos/apache/brpc/issues/1251","id":2561927236,"node_id":"IC_kwDOBhmkcs6Ys-hE","user":{"login":"snehavats1404","id":173487014,"node_id":"U_kgDOClczpg","avatar_url":"https://avatars.githubusercontent.com/u/173487014?v=4","gravatar_id":"","url":"https://api.github.com/users/snehavats1404","html_url":"https://github.com/snehavats1404","followers_url":"https://api.github.com/users/snehavats1404/followers","following_url":"https://api.github.com/users/snehavats1404/following{/other_user}","gists_url":"https://api.github.com/users/snehavats1404/gists{/gist_id}","starred_url":"https://api.github.com/users/snehavats1404/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snehavats1404/subscriptions","organizations_url":"https://api.github.com/users/snehavats1404/orgs","repos_url":"https://api.github.com/users/snehavats1404/repos","events_url":"https://api.github.com/users/snehavats1404/events{/privacy}","received_events_url":"https://api.github.com/users/snehavats1404/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-25T15:20:55Z","updated_at":"2024-12-25T15:20:55Z","author_association":"NONE","body":"May I work on this issue? @chenBright @serverglen ?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2561927236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2562115599","html_url":"https://github.com/apache/brpc/issues/1251#issuecomment-2562115599","issue_url":"https://api.github.com/repos/apache/brpc/issues/1251","id":2562115599,"node_id":"IC_kwDOBhmkcs6YtsgP","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-26T03:28:00Z","updated_at":"2024-12-26T03:28:00Z","author_association":"CONTRIBUTOR","body":"@snehavats1404 welcome!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2562115599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2563276062","html_url":"https://github.com/apache/brpc/issues/670#issuecomment-2563276062","issue_url":"https://api.github.com/repos/apache/brpc/issues/670","id":2563276062,"node_id":"IC_kwDOBhmkcs6YyH0e","user":{"login":"cfycyf","id":13246476,"node_id":"MDQ6VXNlcjEzMjQ2NDc2","avatar_url":"https://avatars.githubusercontent.com/u/13246476?v=4","gravatar_id":"","url":"https://api.github.com/users/cfycyf","html_url":"https://github.com/cfycyf","followers_url":"https://api.github.com/users/cfycyf/followers","following_url":"https://api.github.com/users/cfycyf/following{/other_user}","gists_url":"https://api.github.com/users/cfycyf/gists{/gist_id}","starred_url":"https://api.github.com/users/cfycyf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfycyf/subscriptions","organizations_url":"https://api.github.com/users/cfycyf/orgs","repos_url":"https://api.github.com/users/cfycyf/repos","events_url":"https://api.github.com/users/cfycyf/events{/privacy}","received_events_url":"https://api.github.com/users/cfycyf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-27T03:29:01Z","updated_at":"2024-12-27T03:29:01Z","author_association":"NONE","body":"> 也是阻塞在 futex_wait_private 里，有什么简单可以绕过的方法吗？\r\n\r\n这个问题有解决吗？我最近也遇到了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2563276062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2563283163","html_url":"https://github.com/apache/brpc/issues/670#issuecomment-2563283163","issue_url":"https://api.github.com/repos/apache/brpc/issues/670","id":2563283163,"node_id":"IC_kwDOBhmkcs6YyJjb","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-27T03:45:40Z","updated_at":"2024-12-27T03:45:40Z","author_association":"CONTRIBUTOR","body":"> > 也是阻塞在 futex_wait_private 里，有什么简单可以绕过的方法吗？\r\n> \r\n> 这个问题有解决吗？我最近也遇到了\r\n\r\n你们有bthread锁和pthread锁混用的场景吗？线程数是多少呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2563283163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2566151138","html_url":"https://github.com/apache/brpc/pull/2855#issuecomment-2566151138","issue_url":"https://api.github.com/repos/apache/brpc/issues/2855","id":2566151138,"node_id":"IC_kwDOBhmkcs6Y9Fvi","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-31T05:43:02Z","updated_at":"2024-12-31T05:43:02Z","author_association":"CONTRIBUTOR","body":"LGTM\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2566151138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2566170282","html_url":"https://github.com/apache/brpc/issues/2172#issuecomment-2566170282","issue_url":"https://api.github.com/repos/apache/brpc/issues/2172","id":2566170282,"node_id":"IC_kwDOBhmkcs6Y9Kaq","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-31T06:26:56Z","updated_at":"2025-02-09T14:32:10Z","author_association":"CONTRIBUTOR","body":"经验证，设置`fast_unwind_on_malloc=0`就可以回溯到完整的调用栈了。需要注意的是`fast_unwind_on_malloc=0`很耗性能。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2566170282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2566399809","html_url":"https://github.com/apache/brpc/pull/2857#issuecomment-2566399809","issue_url":"https://api.github.com/repos/apache/brpc/issues/2857","id":2566399809,"node_id":"IC_kwDOBhmkcs6Y-CdB","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-31T12:15:15Z","updated_at":"2024-12-31T12:15:15Z","author_association":"CONTRIBUTOR","body":"It seems that you have used some tool for automatically formatting the code, which has generated a large number of irrelevant diffs. Could you only submit the necessary code modifications? \r\n\r\nIn addition, the cmake builds have failed.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2566399809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567405659","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2567405659","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2567405659,"node_id":"IC_kwDOBhmkcs6ZB4Bb","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T08:10:24Z","updated_at":"2025-01-02T08:10:24Z","author_association":"CONTRIBUTOR","body":"佬，打patch测试了一下，目前还没出现overcrowded，看代码注释说对heavy-load的rpc不应该启用，如果我们场景的rpc是heavy-load的，启用这个选项有什么影响吗https://github.com/apache/brpc/blob/5c0341410c1ea77210337df7c42bb99fe0ce3fe5/src/brpc/server.h#L290-#L293","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567405659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567431180","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2567431180","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2567431180,"node_id":"IC_kwDOBhmkcs6ZB-QM","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T08:39:30Z","updated_at":"2025-01-02T08:39:30Z","author_association":"CONTRIBUTOR","body":"消费速度一直小于生产速度的话，内存会一直涨。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567431180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567480347","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2567480347","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2567480347,"node_id":"IC_kwDOBhmkcs6ZCKQb","user":{"login":"imdouyu","id":59607623,"node_id":"MDQ6VXNlcjU5NjA3NjIz","avatar_url":"https://avatars.githubusercontent.com/u/59607623?v=4","gravatar_id":"","url":"https://api.github.com/users/imdouyu","html_url":"https://github.com/imdouyu","followers_url":"https://api.github.com/users/imdouyu/followers","following_url":"https://api.github.com/users/imdouyu/following{/other_user}","gists_url":"https://api.github.com/users/imdouyu/gists{/gist_id}","starred_url":"https://api.github.com/users/imdouyu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imdouyu/subscriptions","organizations_url":"https://api.github.com/users/imdouyu/orgs","repos_url":"https://api.github.com/users/imdouyu/repos","events_url":"https://api.github.com/users/imdouyu/events{/privacy}","received_events_url":"https://api.github.com/users/imdouyu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T09:25:09Z","updated_at":"2025-01-02T09:25:09Z","author_association":"CONTRIBUTOR","body":"> 消费速度一直小于生产速度的话，内存会一直涨。\r\n\r\n离线服务每天发送的数据有一个高低峰期，如果说在高峰期启用这个选项后的内存在接受范围内，其实启用这个选项是安全的，可以这么理解吗？主要担心会不会带来其他影响","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567480347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567522908","html_url":"https://github.com/apache/brpc/issues/2853#issuecomment-2567522908","issue_url":"https://api.github.com/repos/apache/brpc/issues/2853","id":2567522908,"node_id":"IC_kwDOBhmkcs6ZCUpc","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T10:00:32Z","updated_at":"2025-01-02T10:00:32Z","author_association":"CONTRIBUTOR","body":"主要是内存的问题了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567522908/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567838589","html_url":"https://github.com/apache/brpc/pull/2858#issuecomment-2567838589","issue_url":"https://api.github.com/repos/apache/brpc/issues/2858","id":2567838589,"node_id":"IC_kwDOBhmkcs6ZDht9","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T14:14:13Z","updated_at":"2025-01-02T14:14:13Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2567838589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2568598893","html_url":"https://github.com/apache/brpc/pull/2851#issuecomment-2568598893","issue_url":"https://api.github.com/repos/apache/brpc/issues/2851","id":2568598893,"node_id":"IC_kwDOBhmkcs6ZGbVt","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T01:50:14Z","updated_at":"2025-01-03T01:50:14Z","author_association":"CONTRIBUTOR","body":"rebase解决冲突","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2568598893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2568778015","html_url":"https://github.com/apache/brpc/issues/2860#issuecomment-2568778015","issue_url":"https://api.github.com/repos/apache/brpc/issues/2860","id":2568778015,"node_id":"IC_kwDOBhmkcs6ZHHEf","user":{"login":"joke-lee","id":20007497,"node_id":"MDQ6VXNlcjIwMDA3NDk3","avatar_url":"https://avatars.githubusercontent.com/u/20007497?v=4","gravatar_id":"","url":"https://api.github.com/users/joke-lee","html_url":"https://github.com/joke-lee","followers_url":"https://api.github.com/users/joke-lee/followers","following_url":"https://api.github.com/users/joke-lee/following{/other_user}","gists_url":"https://api.github.com/users/joke-lee/gists{/gist_id}","starred_url":"https://api.github.com/users/joke-lee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joke-lee/subscriptions","organizations_url":"https://api.github.com/users/joke-lee/orgs","repos_url":"https://api.github.com/users/joke-lee/repos","events_url":"https://api.github.com/users/joke-lee/events{/privacy}","received_events_url":"https://api.github.com/users/joke-lee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T07:09:05Z","updated_at":"2025-01-03T07:09:05Z","author_association":"NONE","body":"@chenBright  用的是 apache-brpc-1.8.0-src ，能帮忙看看么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2568778015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2569448728","html_url":"https://github.com/apache/brpc/issues/2860#issuecomment-2569448728","issue_url":"https://api.github.com/repos/apache/brpc/issues/2860","id":2569448728,"node_id":"IC_kwDOBhmkcs6ZJq0Y","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T15:50:51Z","updated_at":"2025-01-03T15:50:51Z","author_association":"CONTRIBUTOR","body":"#2295 不可达不重试。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2569448728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2571503154","html_url":"https://github.com/apache/brpc/pull/2857#issuecomment-2571503154","issue_url":"https://api.github.com/repos/apache/brpc/issues/2857","id":2571503154,"node_id":"IC_kwDOBhmkcs6ZRgYy","user":{"login":"snehavats1404","id":173487014,"node_id":"U_kgDOClczpg","avatar_url":"https://avatars.githubusercontent.com/u/173487014?v=4","gravatar_id":"","url":"https://api.github.com/users/snehavats1404","html_url":"https://github.com/snehavats1404","followers_url":"https://api.github.com/users/snehavats1404/followers","following_url":"https://api.github.com/users/snehavats1404/following{/other_user}","gists_url":"https://api.github.com/users/snehavats1404/gists{/gist_id}","starred_url":"https://api.github.com/users/snehavats1404/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snehavats1404/subscriptions","organizations_url":"https://api.github.com/users/snehavats1404/orgs","repos_url":"https://api.github.com/users/snehavats1404/repos","events_url":"https://api.github.com/users/snehavats1404/events{/privacy}","received_events_url":"https://api.github.com/users/snehavats1404/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-05T05:04:45Z","updated_at":"2025-01-05T05:04:45Z","author_association":"NONE","body":"I am a first time contributor and I suppose I need to learn how to do the CMake thing, If you can help please let me know.\r\n ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2571503154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572171483","html_url":"https://github.com/apache/brpc/pull/2857#issuecomment-2572171483","issue_url":"https://api.github.com/repos/apache/brpc/issues/2857","id":2572171483,"node_id":"IC_kwDOBhmkcs6ZUDjb","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T02:55:02Z","updated_at":"2025-01-06T02:55:02Z","author_association":"CONTRIBUTOR","body":"> I am a first time contributor and I suppose I need to learn how to do the CMake thing, If you can help please let me know.\r\n\r\nYou don't need to change the CMakeLists.txt file, just modify the cpp file which contains `read_command_name`.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572171483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572274884","html_url":"https://github.com/apache/brpc/pull/2857#issuecomment-2572274884","issue_url":"https://api.github.com/repos/apache/brpc/issues/2857","id":2572274884,"node_id":"IC_kwDOBhmkcs6ZUczE","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T04:55:30Z","updated_at":"2025-01-06T04:55:30Z","author_association":"MEMBER","body":"you can alao read some documents on how to use git.\r\n\r\nhttps://www.worldhello.net/2015/12/23/taste-of-a-programmer.html","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572274884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572425729","html_url":"https://github.com/apache/brpc/issues/2797#issuecomment-2572425729","issue_url":"https://api.github.com/repos/apache/brpc/issues/2797","id":2572425729,"node_id":"IC_kwDOBhmkcs6ZVBoB","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T07:00:45Z","updated_at":"2025-01-06T07:00:45Z","author_association":"CONTRIBUTOR","body":"Closed this as completed in #2851 .","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572425729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572426540","html_url":"https://github.com/apache/brpc/issues/2389#issuecomment-2572426540","issue_url":"https://api.github.com/repos/apache/brpc/issues/2389","id":2572426540,"node_id":"IC_kwDOBhmkcs6ZVB0s","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T07:01:25Z","updated_at":"2025-01-06T07:01:57Z","author_association":"CONTRIBUTOR","body":"> @vinllen 可以看看#2797\r\n\r\nCC @vinllen ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572426540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572495898","html_url":"https://github.com/apache/brpc/issues/1390#issuecomment-2572495898","issue_url":"https://api.github.com/repos/apache/brpc/issues/1390","id":2572495898,"node_id":"IC_kwDOBhmkcs6ZVSwa","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T07:52:57Z","updated_at":"2025-01-06T07:52:57Z","author_association":"CONTRIBUTOR","body":"With #2858 , there are two ways to ignore designated memory leaks of Server：\r\n1. Build bRPC with ASan or LSan，this memory leak will be automatically ignored.\r\n2. Use annotation(`ANNOTATE_SCOPED_MEMORY_LEAK`) to instruct LSan to ignore this memory leaks, like\r\n```c++\r\nbrpc::Server server;\r\n{\r\n    ANNOTATE_SCOPED_MEMORY_LEAK;\r\n    server.Start(...);\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572495898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572497502","html_url":"https://github.com/apache/brpc/issues/2164#issuecomment-2572497502","issue_url":"https://api.github.com/repos/apache/brpc/issues/2164","id":2572497502,"node_id":"IC_kwDOBhmkcs6ZVTJe","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T07:54:12Z","updated_at":"2025-01-06T07:56:23Z","author_association":"CONTRIBUTOR","body":"1. 如果编译bRPC库的时候开了ASan，#2858 会自动忽略这些内存泄漏。\r\n2. 如果没开，代码里使用LSan注解也可以忽略：\r\n```c++\r\nbrpc::Server server;\r\n{\r\n    ANNOTATE_SCOPED_MEMORY_LEAK;\r\n    server.Start(...);\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572497502/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572500799","html_url":"https://github.com/apache/brpc/issues/2470#issuecomment-2572500799","issue_url":"https://api.github.com/repos/apache/brpc/issues/2470","id":2572500799,"node_id":"IC_kwDOBhmkcs6ZVT8_","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T07:56:33Z","updated_at":"2025-01-06T07:56:33Z","author_association":"CONTRIBUTOR","body":"1. 如果编译bRPC库的时候开了ASan，#2858 会自动忽略这些内存泄漏。\r\n2. 如果没开，代码里使用LSan注解也可以忽略：\r\n```c++\r\nbrpc::Server server;\r\n{\r\n    ANNOTATE_SCOPED_MEMORY_LEAK;\r\n    server.Start(...);\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2572500799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2573207942","html_url":"https://github.com/apache/brpc/issues/1390#issuecomment-2573207942","issue_url":"https://api.github.com/repos/apache/brpc/issues/1390","id":2573207942,"node_id":"IC_kwDOBhmkcs6ZYAmG","user":{"login":"zouyonghao","id":7647081,"node_id":"MDQ6VXNlcjc2NDcwODE=","avatar_url":"https://avatars.githubusercontent.com/u/7647081?v=4","gravatar_id":"","url":"https://api.github.com/users/zouyonghao","html_url":"https://github.com/zouyonghao","followers_url":"https://api.github.com/users/zouyonghao/followers","following_url":"https://api.github.com/users/zouyonghao/following{/other_user}","gists_url":"https://api.github.com/users/zouyonghao/gists{/gist_id}","starred_url":"https://api.github.com/users/zouyonghao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zouyonghao/subscriptions","organizations_url":"https://api.github.com/users/zouyonghao/orgs","repos_url":"https://api.github.com/users/zouyonghao/repos","events_url":"https://api.github.com/users/zouyonghao/events{/privacy}","received_events_url":"https://api.github.com/users/zouyonghao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-06T14:18:57Z","updated_at":"2025-01-06T14:18:57Z","author_association":"NONE","body":"Thank you! @chenBright ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2573207942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]