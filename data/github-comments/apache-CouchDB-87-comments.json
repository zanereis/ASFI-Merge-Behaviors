[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603749208","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-603749208","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":603749208,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzc0OTIwOA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T09:58:49Z","updated_at":"2020-03-25T09:58:49Z","author_association":"MEMBER","body":"Heya @palash25 howâ€™s it going, anything we can help with? :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603749208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603752368","html_url":"https://github.com/apache/couchdb/pull/2452#issuecomment-603752368","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2452","id":603752368,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzc1MjM2OA==","user":{"login":"YetAnotherEye","id":17247790,"node_id":"MDQ6VXNlcjE3MjQ3Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/17247790?v=4","gravatar_id":"","url":"https://api.github.com/users/YetAnotherEye","html_url":"https://github.com/YetAnotherEye","followers_url":"https://api.github.com/users/YetAnotherEye/followers","following_url":"https://api.github.com/users/YetAnotherEye/following{/other_user}","gists_url":"https://api.github.com/users/YetAnotherEye/gists{/gist_id}","starred_url":"https://api.github.com/users/YetAnotherEye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YetAnotherEye/subscriptions","organizations_url":"https://api.github.com/users/YetAnotherEye/orgs","repos_url":"https://api.github.com/users/YetAnotherEye/repos","events_url":"https://api.github.com/users/YetAnotherEye/events{/privacy}","received_events_url":"https://api.github.com/users/YetAnotherEye/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T10:05:40Z","updated_at":"2020-03-25T10:05:40Z","author_association":"NONE","body":"@willholley Ok, i see it. So I assume that we have to do the internal communication between Apache and Couch via HTTPS. I'll check that out.\r\nThank you so far ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603752368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603755479","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-603755479","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":603755479,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzc1NTQ3OQ==","user":{"login":"palash25","id":21367710,"node_id":"MDQ6VXNlcjIxMzY3NzEw","avatar_url":"https://avatars.githubusercontent.com/u/21367710?v=4","gravatar_id":"","url":"https://api.github.com/users/palash25","html_url":"https://github.com/palash25","followers_url":"https://api.github.com/users/palash25/followers","following_url":"https://api.github.com/users/palash25/following{/other_user}","gists_url":"https://api.github.com/users/palash25/gists{/gist_id}","starred_url":"https://api.github.com/users/palash25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/palash25/subscriptions","organizations_url":"https://api.github.com/users/palash25/orgs","repos_url":"https://api.github.com/users/palash25/repos","events_url":"https://api.github.com/users/palash25/events{/privacy}","received_events_url":"https://api.github.com/users/palash25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T10:12:25Z","updated_at":"2020-03-25T10:12:25Z","author_association":"NONE","body":"Hi @janl haven't had the time to take a crack at this the past week, give me till the end of this week if it isn't urgent.\r\n\r\nI was also having some problem with the dev setup so need to fix that first.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603755479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603797721","html_url":"https://github.com/apache/couchdb/pull/2452#issuecomment-603797721","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2452","id":603797721,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzc5NzcyMQ==","user":{"login":"YetAnotherEye","id":17247790,"node_id":"MDQ6VXNlcjE3MjQ3Nzkw","avatar_url":"https://avatars.githubusercontent.com/u/17247790?v=4","gravatar_id":"","url":"https://api.github.com/users/YetAnotherEye","html_url":"https://github.com/YetAnotherEye","followers_url":"https://api.github.com/users/YetAnotherEye/followers","following_url":"https://api.github.com/users/YetAnotherEye/following{/other_user}","gists_url":"https://api.github.com/users/YetAnotherEye/gists{/gist_id}","starred_url":"https://api.github.com/users/YetAnotherEye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YetAnotherEye/subscriptions","organizations_url":"https://api.github.com/users/YetAnotherEye/orgs","repos_url":"https://api.github.com/users/YetAnotherEye/repos","events_url":"https://api.github.com/users/YetAnotherEye/events{/privacy}","received_events_url":"https://api.github.com/users/YetAnotherEye/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T11:52:42Z","updated_at":"2020-03-25T11:52:42Z","author_association":"NONE","body":"Small update:\r\nSetting ProxyPass and ProxyPassReverse to `https://localhost:6984` didn't work. Maybe because we don't have a certificate in the docker? Not my main area of competence ;)\r\n\r\nI talked to our admin, who said, that we use \r\n`RequestHeader           set \"X-Forwarded-Proto\" expr=%{REQUEST_SCHEME}`\r\nin our location config, and that this should tell the Couch-Container that the request was done via Https. \r\n\r\nTo add the secure flag I now, according to\r\nhttps://stackoverflow.com/questions/24129201/add-secure-and-httponly-flags-to-every-set-cookie-response-in-apache-httpd\r\nused `Header edit Set-Cookie ^(.*)$ $1;HttpOnly;Secure` in Apache's location config.\r\n\r\nI know, that's a security issue nonetheless the cookie with SameSite=none and Secure=true comes from CouchDB or the ReverseProxy, but for now we have a solution for our usecase.\r\n\r\nThanks for the hints and respect for the really good job you all are doing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603797721/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603909503","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-603909503","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":603909503,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzkwOTUwMw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T15:33:53Z","updated_at":"2020-03-25T15:33:53Z","author_association":"MEMBER","body":"Also for the `POST /_deleted_dbs/_undelete` I'll also note that we do have a set of system database names that start with an underscore (`_dbs/_nodes/_users`). Obviously we don't have an `_undelete` database but it is technically mixing that API endpoint into the valid range of database names.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603909503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603989865","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-603989865","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":603989865,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMzk4OTg2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T17:51:40Z","updated_at":"2020-03-25T17:51:40Z","author_association":"MEMBER","body":"Hey @palash25 , if you have access to Docker, here's a development environment for you:\r\n\r\n```\r\ndocker pull couchdbdev/debian-buster-erlang-20.3.8.25-1:latest\r\ndocker run -it couchdbdev/debian-buster-erlang-20.3.8.25-1:latest /bin/bash\r\n```\r\n\r\nOnce inside the container:\r\n\r\n```\r\ncd\r\n```\r\n\r\nwill get you to the jenkins user home directory. You can now checkout CouchDB and develop from there.\r\n\r\nHope this helps!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/603989865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604031788","html_url":"https://github.com/apache/couchdb/pull/2722#issuecomment-604031788","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2722","id":604031788,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDAzMTc4OA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T19:10:49Z","updated_at":"2020-03-25T19:10:49Z","author_association":"MEMBER","body":"One another thing, can we merge it not into `master`, but in `prototype/fdb-layer` first? This'll allow to use it for encryption work without waiting for `prototype/fdb-layer` to be promoted to `master`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604031788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604103013","html_url":"https://github.com/apache/couchdb/pull/2722#issuecomment-604103013","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2722","id":604103013,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDEwMzAxMw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-25T21:41:55Z","updated_at":"2020-03-25T21:41:55Z","author_association":"MEMBER","body":"I've switched base to the prototype/fdb-layer branch.\r\n\r\nI agree on the naming ugliness but have no better ideas. the algorithm is called 'key wrap' (well, \"KW\"), and the function reflects that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604103013/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604192825","html_url":"https://github.com/apache/couchdb/issues/1562#issuecomment-604192825","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1562","id":604192825,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDE5MjgyNQ==","user":{"login":"thebigh2014","id":8633708,"node_id":"MDQ6VXNlcjg2MzM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/8633708?v=4","gravatar_id":"","url":"https://api.github.com/users/thebigh2014","html_url":"https://github.com/thebigh2014","followers_url":"https://api.github.com/users/thebigh2014/followers","following_url":"https://api.github.com/users/thebigh2014/following{/other_user}","gists_url":"https://api.github.com/users/thebigh2014/gists{/gist_id}","starred_url":"https://api.github.com/users/thebigh2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebigh2014/subscriptions","organizations_url":"https://api.github.com/users/thebigh2014/orgs","repos_url":"https://api.github.com/users/thebigh2014/repos","events_url":"https://api.github.com/users/thebigh2014/events{/privacy}","received_events_url":"https://api.github.com/users/thebigh2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T02:31:03Z","updated_at":"2020-03-26T02:35:42Z","author_association":"NONE","body":"The project I'm working on is being affected by the enforcement of SameSite=none and Secure being needed for _session cookies.  While Couchdb 3 (which we will be trying out soon) does add the SameSite attribute, the Secure attribute is still missing since we are using a reverse proxy to securely access our databases (as direct SSL is unreliable).  Could this please be addressed as it would be difficult to reliably intercept responses on our proxy and alter the cookie header manually.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604192825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604245136","html_url":"https://github.com/apache/couchdb/issues/1008#issuecomment-604245136","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1008","id":604245136,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDI0NTEzNg==","user":{"login":"sklassen","id":6997477,"node_id":"MDQ6VXNlcjY5OTc0Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/6997477?v=4","gravatar_id":"","url":"https://api.github.com/users/sklassen","html_url":"https://github.com/sklassen","followers_url":"https://api.github.com/users/sklassen/followers","following_url":"https://api.github.com/users/sklassen/following{/other_user}","gists_url":"https://api.github.com/users/sklassen/gists{/gist_id}","starred_url":"https://api.github.com/users/sklassen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sklassen/subscriptions","organizations_url":"https://api.github.com/users/sklassen/orgs","repos_url":"https://api.github.com/users/sklassen/repos","events_url":"https://api.github.com/users/sklassen/events{/privacy}","received_events_url":"https://api.github.com/users/sklassen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T05:57:03Z","updated_at":"2020-03-26T05:57:03Z","author_association":"CONTRIBUTOR","body":"Hi @janl , @wohali , @davisp\r\n\r\nThis problem disappeared after I rebuilt couchdb using jiffy 1.04 (see https://github.com/davisp/jiffy/commit/0ba322e42171bb48ffdd0c053cef28a42eb35fc9). Thanks @davisp for the fix. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604245136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604306728","html_url":"https://github.com/apache/couchdb/issues/1562#issuecomment-604306728","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1562","id":604306728,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDMwNjcyOA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T08:53:52Z","updated_at":"2020-03-26T08:53:52Z","author_association":"MEMBER","body":"@thebigh2014 adding a `Secure` attribute is a pretty standard thing in most reverse proxies. What proxy are you using?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604306728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604325420","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-604325420","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":604325420,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDMyNTQyMA==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T09:35:56Z","updated_at":"2020-03-26T09:35:56Z","author_association":"NONE","body":"> Obviously we don't have an `_undelete` database but it is technically mixing that API endpoint into the valid range of database names.\r\n\r\nAgree that is probably better avoided.\r\n\r\nI was thinking that maybe we could keep the functionality in the `_deleted_dbs` namespace by `POST /_deleted_dbs` with something like this:\r\n```json\r\n{\r\n  \"undelete\": {\r\n    \"source\": \"source_database_name\",\r\n    \"source_timestamp\": \"2020-03-24T12:00:00\",\r\n    \"target\": \"target_database_name\"\r\n  }\r\n}\r\n```\r\nbut ultimately I think that probably ends up more opaque than just using differently named endpoint  `POST /_undelete_db` so I'm OK with `_undelete_db`.\r\n\r\n@mikerhodes as the initial proposer of the `_deleted_dbs/_restore` pattern are you OK with `POST /_undelete_db`?\r\n\r\nUnrelated to the endpoint name the example shows no TZ data in the ISO-8601 timestamp, is that an accurate representation of the output/input we're expecting?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604325420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604340091","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-604340091","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":604340091,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDM0MDA5MQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T10:07:50Z","updated_at":"2020-03-26T10:07:50Z","author_association":"CONTRIBUTOR","body":"> Unrelated to the endpoint name the example shows no TZ data in the ISO-8601 timestamp, is that an accurate representation of the output/input we're expecting?\r\n\r\nThere are 2 different formats for ISO-8601 timestamp, `1994-11-05T08:15:30-05:00` and `1994-11-05T13:15:30Z`. They all correspond to November 5, 1994, 8:15:30 am, US Eastern Standard Time. The detail can be found at https://www.w3.org/TR/NOTE-datetime. We are using `1994-11-05T13:15:30Z` where TZ information exists as well. \r\n\r\nWe can add more description in document to state the format we used here. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604340091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604431455","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-604431455","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":604431455,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDQzMTQ1NQ==","user":{"login":"mikerhodes","id":453210,"node_id":"MDQ6VXNlcjQ1MzIxMA==","avatar_url":"https://avatars.githubusercontent.com/u/453210?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerhodes","html_url":"https://github.com/mikerhodes","followers_url":"https://api.github.com/users/mikerhodes/followers","following_url":"https://api.github.com/users/mikerhodes/following{/other_user}","gists_url":"https://api.github.com/users/mikerhodes/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerhodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerhodes/subscriptions","organizations_url":"https://api.github.com/users/mikerhodes/orgs","repos_url":"https://api.github.com/users/mikerhodes/repos","events_url":"https://api.github.com/users/mikerhodes/events{/privacy}","received_events_url":"https://api.github.com/users/mikerhodes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T13:29:23Z","updated_at":"2020-03-26T13:29:23Z","author_association":"CONTRIBUTOR","body":"> Also for the `POST /_deleted_dbs/_undelete` I'll also note that we do have a set of system database names that start with an underscore (`_dbs/_nodes/_users`). Obviously we don't have an `_undelete` database but it is technically mixing that API endpoint into the valid range of database names.\r\n\r\nIsn't this the same for adding a `/_undelete_db` into the `/` namespace? In both cases you're basically creating a new reserved name in the list of databases, although there is certainly a lot of prior art for this in `/` so it wouldn't be as surprising and likely to be forgotten later.\r\n\r\nWhile I prefer keeping new `_` endpoints in `/` to a minimum, I can live with having a few new endpoints in the `/` namespace. Before we make the final call, one additional option which keeps things contained to a single new entry in `/` while removing the dbname vs. action ambiguity @davisp mentioned, and keeping things somewhat RESTful, would be to extract the `dbs` bit into a further sub-namespace:\r\n\r\n1.    `GET   /_deleted_dbs/dbs`\r\n1.    `GET   /_deleted_dbs/dbs/DbName`\r\n1.    `POST /_deleted_dbs/undelete`\r\n\r\nAlternatively you could have `/_deleted/dbs` (etc.) if you wanted to avoid the `dbs` repetition, though I feel that `_deleted` is a bit generic for my tastes.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604431455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604451352","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-604451352","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":604451352,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDQ1MTM1Mg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T14:07:58Z","updated_at":"2020-03-26T14:07:58Z","author_association":"CONTRIBUTOR","body":"Thanks for more comments. \r\n\r\nIt looks to me that `_deleted_dbs` is more clear than `_deleted`.  So the current design becomes\r\n\r\n```\r\n    GET /_deleted_dbs/dbs\r\n    GET /_deleted_dbs/dbs/DbName\r\n    POST /_deleted_dbs/undelete\r\n```\r\nAny more comments? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604451352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604493273","html_url":"https://github.com/apache/couchdb/issues/1562#issuecomment-604493273","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1562","id":604493273,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDQ5MzI3Mw==","user":{"login":"thebigh2014","id":8633708,"node_id":"MDQ6VXNlcjg2MzM3MDg=","avatar_url":"https://avatars.githubusercontent.com/u/8633708?v=4","gravatar_id":"","url":"https://api.github.com/users/thebigh2014","html_url":"https://github.com/thebigh2014","followers_url":"https://api.github.com/users/thebigh2014/followers","following_url":"https://api.github.com/users/thebigh2014/following{/other_user}","gists_url":"https://api.github.com/users/thebigh2014/gists{/gist_id}","starred_url":"https://api.github.com/users/thebigh2014/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thebigh2014/subscriptions","organizations_url":"https://api.github.com/users/thebigh2014/orgs","repos_url":"https://api.github.com/users/thebigh2014/repos","events_url":"https://api.github.com/users/thebigh2014/events{/privacy}","received_events_url":"https://api.github.com/users/thebigh2014/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T15:23:53Z","updated_at":"2020-03-26T15:24:19Z","author_association":"NONE","body":"@willholley We've been using [Redbird](https://github.com/OptimalBits/redbird/) but since it doesn't provide built-in support for modifying response headers, I'm going to be trying Apache reverse proxy (since Apache is already running for other things on our server).  Thanks for your reply.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604493273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604561687","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-604561687","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":604561687,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDU2MTY4Nw==","user":{"login":"palash25","id":21367710,"node_id":"MDQ6VXNlcjIxMzY3NzEw","avatar_url":"https://avatars.githubusercontent.com/u/21367710?v=4","gravatar_id":"","url":"https://api.github.com/users/palash25","html_url":"https://github.com/palash25","followers_url":"https://api.github.com/users/palash25/followers","following_url":"https://api.github.com/users/palash25/following{/other_user}","gists_url":"https://api.github.com/users/palash25/gists{/gist_id}","starred_url":"https://api.github.com/users/palash25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/palash25/subscriptions","organizations_url":"https://api.github.com/users/palash25/orgs","repos_url":"https://api.github.com/users/palash25/repos","events_url":"https://api.github.com/users/palash25/events{/privacy}","received_events_url":"https://api.github.com/users/palash25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T17:22:13Z","updated_at":"2020-03-26T17:22:13Z","author_association":"NONE","body":"Hi @wohali thanks for this also I actually found this issue thread yesterday which describes the exact problem I am facing with the build now. https://github.com/apache/couchdb/issues/455\r\n\r\nI don't prefer to develop using docker, I tried the steps you listed in that issue but wasn't able to build couchdb from source still got the same jsapi.h error. Should I move the conversation to #445 ?\r\n\r\nI would only like to develop using docker as a last resort.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604561687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604586120","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-604586120","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":604586120,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDU4NjEyMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T18:01:54Z","updated_at":"2020-03-26T18:01:54Z","author_association":"MEMBER","body":"@palash25 No, #445 is closed. Do not reopen that.\r\n\r\nWhich operating system are you using? If Linux, which distribution? If it's one of the following:\r\n* Debian stretch/buster\r\n* Ubuntu 16/18\r\n* RedHat 6/7/8\r\n* CentOS 6/7/8\r\n* macOS\r\n* FreeBSD\r\n\r\nyou can use the script here to install all the dependencies you need in your base operating system:\r\n\r\nhttps://github.com/apache/couchdb-ci/blob/master/bin/install-dependencies.sh\r\n\r\nYou'll need to clone the entire repository, then run that script. That should get you running.\r\n\r\nIf it's not one of those, you may be forced to compile SpiderMonkey from scratch, which is *not* fun.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604586120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604586837","html_url":"https://github.com/apache/couchdb/pull/2690#issuecomment-604586837","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2690","id":604586837,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDU4NjgzNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T18:03:20Z","updated_at":"2020-03-26T18:03:20Z","author_association":"MEMBER","body":"Shouldn't this and https://github.com/apache/couchdb/pull/2672 target the `3.x` branch, from which our next release will be cut?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604586837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604586959","html_url":"https://github.com/apache/couchdb/pull/2672#issuecomment-604586959","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2672","id":604586959,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDU4Njk1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T18:03:34Z","updated_at":"2020-03-26T18:03:34Z","author_association":"MEMBER","body":"Shouldn't this and #2690 target the `3.x` branch, from which our next release will be cut?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604586959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604607287","html_url":"https://github.com/apache/couchdb/pull/2690#issuecomment-604607287","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2690","id":604607287,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDYwNzI4Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T18:38:45Z","updated_at":"2020-03-26T18:38:45Z","author_association":"MEMBER","body":"yes. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604607287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604808305","html_url":"https://github.com/apache/couchdb/issues/2634#issuecomment-604808305","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2634","id":604808305,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDgwODMwNQ==","user":{"login":"palash25","id":21367710,"node_id":"MDQ6VXNlcjIxMzY3NzEw","avatar_url":"https://avatars.githubusercontent.com/u/21367710?v=4","gravatar_id":"","url":"https://api.github.com/users/palash25","html_url":"https://github.com/palash25","followers_url":"https://api.github.com/users/palash25/followers","following_url":"https://api.github.com/users/palash25/following{/other_user}","gists_url":"https://api.github.com/users/palash25/gists{/gist_id}","starred_url":"https://api.github.com/users/palash25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/palash25/subscriptions","organizations_url":"https://api.github.com/users/palash25/orgs","repos_url":"https://api.github.com/users/palash25/repos","events_url":"https://api.github.com/users/palash25/events{/privacy}","received_events_url":"https://api.github.com/users/palash25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-27T04:27:06Z","updated_at":"2020-03-27T04:27:06Z","author_association":"NONE","body":"I am on Ubuntu18.04 @wohali , I ran that script but I still keep getting the jsapi.h error, nevermind I will go with the docker setup","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/604808305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605109017","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-605109017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":605109017,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTEwOTAxNw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-27T16:55:50Z","updated_at":"2020-03-27T16:55:50Z","author_association":"MEMBER","body":"So, I apparently somehow managed to write an entire comment yesterday and then not post it (or I posted it to a random unrelated ticket that I can't find...)\r\n\r\nI really don't like the `_deleted_dbs/dbs` approach. I'd vote for:\r\n\r\n* `GET /_deleted_dbs`\r\n* `GET /_deleted_dbs/DbName`\r\n* `POST /_deleted_dbs` with payload:\r\n\r\n```json\r\n{\r\n  \"undelete\": {\r\n    \"source\": \"source_database_name\",\r\n    \"source_timestamp\": \"2020-03-24T12:00:00\",\r\n    \"target\": \"target_database_name\"\r\n  }\r\n}\r\n```\r\n\r\nAnd then I also realized that we really need a \"actually delete the deleted thing\" API so one or both of:\r\n\r\n* `DELETE /_deleted_dbs/DbName?timestamp=2020-03-24T12:00:00`\r\n* `POST /_deleted_dbs` with payload:\r\n\r\n```json\r\n{\r\n  \"delete\": {\r\n    \"source\": \"source_database_name\",\r\n    \"source_timestamp\": \"2020-03-24T12:00:00\"\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605109017/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605170005","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-605170005","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":605170005,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTE3MDAwNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-27T18:01:33Z","updated_at":"2020-03-27T18:01:33Z","author_association":"MEMBER","body":"@eiri I would love to see this in CouchDB 3.1, before we completely retire the storage backend. Do you have time to finish up this PR?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605170005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605506570","html_url":"https://github.com/apache/couchdb/pull/2729#issuecomment-605506570","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2729","id":605506570,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTUwNjU3MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-28T19:18:25Z","updated_at":"2020-03-28T19:18:25Z","author_association":"CONTRIBUTOR","body":"Also perhaps instead of commenting those out we just remove the feature set lines. Except for scheduler since we intend to bring it back.\r\n\r\nAnother crazy idea is to not start couch_server at all. I am guessing this will breaking a whole bunch of things that try to open system databases and such but if you're curious and want to see what happens that will auto-magically disable all these features. If that works we would want to move access-ready to another place then. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605506570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605528437","html_url":"https://github.com/apache/couchdb/pull/2729#issuecomment-605528437","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2729","id":605528437,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTUyODQzNw==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-28T22:33:14Z","updated_at":"2020-03-28T22:33:14Z","author_association":"CONTRIBUTOR","body":"> Also perhaps instead of commenting those out we just remove the feature set lines. Except for scheduler since we intend to bring it back.\r\n> \r\n> Another crazy idea is to not start couch_server at all. I am guessing this will breaking a whole bunch of things that try to open system databases and such but if you're curious and want to see what happens that will auto-magically disable all these features. If that works we would want to move access-ready to another place then.\r\n\r\nI commented out the couch_server child spec in couch_primary_sup.erl, but couch layer failed to start:\r\n\r\n```erlang\r\n{\"init terminating in do_boot\",{{error,{{shutdown,{failed_to_start_child,mem3_nodes,{badarg,[{ets,lookup,[couch_dbs_locks,<<\"_nodes\">>],[]},{couch_server,validate_open_or_create,2,[{file,\"src/couch_server.erl\"},{line,711}]},{couch_server,open,2,[{file,\"src/couch_server.erl\"},{line,83}]},{couch_db,open,2,[{file,\"src/couch_db.erl\"},{line,160}]},{mem3_util,ensure_exists,1,[{file,\"src/mem3_util.erl\"},{line,270}]},{mem3_nodes,initialize_nodelist,0,[{file,\"src/mem3_nodes.erl\"},{line,94}]},{mem3_nodes,init,1,[{file,\"src/mem3_nodes.erl\"},{line,45}]},{gen_server,init_it,2,[{file,\"gen_server.erl\"},{line,374}]}]}}},{mem3_app,start,[normal,[]]}}},[{boot_node,start_app,3,[{file,\"dev/boot_node.erl\"},{line,146}]},{lists,foldl,3,[{file,\"lists.erl\"},{line,1263}]},{boot_node,start_app,3,[{file,\"dev/boot_node.erl\"},{line,136}]},{lists,foldl,3,[{file,\"lists.erl\"},{line,1263}]},{boot_node,start_app,3,[{file,\"dev/boot_node.erl\"},{line,136}]},{lists,foldl,3,[{file,\"lists.erl\"},{line,1263}]},{boot_node,start_app,3,[{file,\"dev/boot_node.erl\"},{line,136}]},{lists,foldl,3,[{file,\"lists.erl\"},{line,1263}]}]}}\r\n```\r\n\r\nI think it's going to probably require a bit more work to turn it off, which I presume is out of scope for this commit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605528437/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605659716","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-605659716","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":605659716,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTY1OTcxNg==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-29T16:07:56Z","updated_at":"2020-03-29T16:07:56Z","author_association":"NONE","body":"You can't get the user if you re not logged in...otherwise anyone could get your users!\r\n\r\nTry this:  curl -X GET http://admin:password@192.168.1.25:5984/_users/org.couchdb.user:sally.user\r\n\r\n(if I m not mistaken, you can also use the username and password of the requested user)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605659716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605742396","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-605742396","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":605742396,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTc0MjM5Ng==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T01:57:55Z","updated_at":"2020-03-30T01:57:55Z","author_association":"CONTRIBUTOR","body":"thanks again @davisp for your suggestion. It totally makes sense with\r\n\r\n```\r\n\r\n    GET /_deleted_dbs\r\n    GET /_deleted_dbs/DbName\r\n    POST /_deleted_dbs with payload:\r\n\r\n{\r\n  \"undelete\": {\r\n    \"source\": \"source_database_name\",\r\n    \"source_timestamp\": \"2020-03-24T12:00:00\",\r\n    \"target\": \"target_database_name\"\r\n  }\r\n}\r\n```\r\nI will wait until today to see whether there is more comment from @mikerhodes and @ricellis. Otherwise, I will change with above naming convention. \r\n\r\nAlso, it is nice to have concept of `\"actually delete the deleted thing\"`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605742396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605808638","html_url":"https://github.com/apache/couchdb/issues/2728#issuecomment-605808638","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2728","id":605808638,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTgwODYzOA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T06:30:25Z","updated_at":"2020-03-30T06:30:25Z","author_association":"CONTRIBUTOR","body":"Be warned there might be dragons. We are not only using an API of the HTTPotion but override some of the callbacks provided by it (see [here](https://github.com/apache/couchdb/blob/master/test/elixir/lib/couch.ex#L55:L177)).  Things we do:\r\n\r\n- prefix the url with the value of `EX_COUCH_URL` environment variable\r\n- inject authentication cookie into headers\r\n- automatically encode/decode JSON\r\n\r\nIn addition to that the `prototype/fdb-layer` branch also allows [passing `base_url` in options](https://github.com/apache/couchdb/blob/prototype/fdb-layer/test/elixir/lib/couch.ex#L171:L174).   \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605808638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605836366","html_url":"https://github.com/apache/couchdb/issues/2728#issuecomment-605836366","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2728","id":605836366,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTgzNjM2Ng==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T07:42:18Z","updated_at":"2020-03-30T07:42:18Z","author_association":"MEMBER","body":"Thanks for the response @iilyak, yeah we do a couple of things ðŸ™‚ but those aren't a problem as this kind of things is fairly common when it comes to these libs. I'm concerned more about `changes_async_test.exs` where we heavily use HTTPotion advanced features and I don't know how to replace functions like `spawn_worker_process`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605836366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605845068","html_url":"https://github.com/apache/couchdb/issues/2728#issuecomment-605845068","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2728","id":605845068,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTg0NTA2OA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T08:01:56Z","updated_at":"2020-03-30T08:01:56Z","author_association":"CONTRIBUTOR","body":"> I'm concerned more about changes_async_test.exs where we heavily use HTTPotion advanced features and I don't know how to replace functions like spawn_worker_process\r\n\r\nI think tesla is better option because it supports multiple backends. \r\n\r\n1. We could eliminate `Rawresp` if we would pass additional option to control whether we should try to do JSON decode or not.\r\n2. The `spawn_worker_process` can be taken from https://github.com/myfreeweb/httpotion/blob/master/lib/httpotion.ex#L17:L25\r\n```\r\n      @doc \"Starts a worker process for use with the `direct` option.\"\r\n      def spawn_worker_process(url, options \\\\ []) do\r\n        GenServer.start(:ibrowse_http_client, url |> process_url(options) |> String.to_charlist, options)\r\n      end\r\n\r\n      @doc \"Starts a linked worker process for use with the `direct` option.\"\r\n      def spawn_link_worker_process(url, options \\\\ []) do\r\n        GenServer.start_link(:ibrowse_http_client, url |> process_url(options) |> String.to_charlist, options)\r\n      end\r\n```\r\n3. We need some support for `direct` option. We could do that if we would implement custom ibrowse backend. The current ibrowse backend is around 50 lines https://github.com/teamon/tesla/blob/9ea2e9e663b6ec3ca1acad7178a863b76da0cab9/lib/tesla/adapter/ibrowse.ex.\r\nWe would add `direct` option in opts and implement a dispatch similar to one in HTTPotion (https://github.com/myfreeweb/httpotion/blob/master/lib/httpotion.ex#L242:L246):\r\n```\r\n        response = if conn_pid = Keyword.get(options, :direct) do\r\n          :ibrowse.send_req_direct(conn_pid, args[:url], args[:headers], args[:method], args[:body], args[:ib_options], args[:timeout])\r\n        else\r\n          :ibrowse.send_req(args[:url], args[:headers], args[:method], args[:body], args[:ib_options], args[:timeout])\r\n        end\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605845068/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605893618","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-605893618","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":605893618,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTg5MzYxOA==","user":{"login":"mikerhodes","id":453210,"node_id":"MDQ6VXNlcjQ1MzIxMA==","avatar_url":"https://avatars.githubusercontent.com/u/453210?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerhodes","html_url":"https://github.com/mikerhodes","followers_url":"https://api.github.com/users/mikerhodes/followers","following_url":"https://api.github.com/users/mikerhodes/following{/other_user}","gists_url":"https://api.github.com/users/mikerhodes/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerhodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerhodes/subscriptions","organizations_url":"https://api.github.com/users/mikerhodes/orgs","repos_url":"https://api.github.com/users/mikerhodes/repos","events_url":"https://api.github.com/users/mikerhodes/events{/privacy}","received_events_url":"https://api.github.com/users/mikerhodes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T09:39:06Z","updated_at":"2020-03-30T09:39:27Z","author_association":"CONTRIBUTOR","body":"I agree with @davisp's suggestion in https://github.com/apache/couchdb/pull/2666#issuecomment-605109017. I've also thumbs-up'd it to doubly make the point ðŸ˜„ ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605893618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605922803","html_url":"https://github.com/apache/couchdb/pull/2662#issuecomment-605922803","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2662","id":605922803,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTkyMjgwMw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T10:38:42Z","updated_at":"2020-03-30T10:38:42Z","author_association":"CONTRIBUTOR","body":"@garrensmith I added one more commit since you last review. This https://github.com/apache/couchdb/pull/2662/commits/7fac8d1a8e2874c1f89da3f8c4ec2cc79bc4ecb1 fixes the case when budget is 0.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605922803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605967011","html_url":"https://github.com/apache/couchdb/pull/2208#issuecomment-605967011","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2208","id":605967011,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTk2NzAxMQ==","user":{"login":"PiotrKozimor","id":37144818,"node_id":"MDQ6VXNlcjM3MTQ0ODE4","avatar_url":"https://avatars.githubusercontent.com/u/37144818?v=4","gravatar_id":"","url":"https://api.github.com/users/PiotrKozimor","html_url":"https://github.com/PiotrKozimor","followers_url":"https://api.github.com/users/PiotrKozimor/followers","following_url":"https://api.github.com/users/PiotrKozimor/following{/other_user}","gists_url":"https://api.github.com/users/PiotrKozimor/gists{/gist_id}","starred_url":"https://api.github.com/users/PiotrKozimor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PiotrKozimor/subscriptions","organizations_url":"https://api.github.com/users/PiotrKozimor/orgs","repos_url":"https://api.github.com/users/PiotrKozimor/repos","events_url":"https://api.github.com/users/PiotrKozimor/events{/privacy}","received_events_url":"https://api.github.com/users/PiotrKozimor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T12:22:40Z","updated_at":"2020-03-30T12:22:40Z","author_association":"NONE","body":"I currently evaluate CouchDB for use with RPi CM3+ and the bigest issue is eMMC memory bandwidth that couchDB is generating because of fsync calls. @davisp can I somehow recover `delayed_commits`  feature? What is the core issue with `fsync_options`?\r\n\r\n> On that last bit. delayed_commits would never lead to a corrupted database as you'd only be missing the last second or less of writes. But if people start looking for non delayed_writes settings and find the fsync_options then we're in Corruption Land. And nobody likes Corruption Land. Its the worst of the worst theme parks.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605967011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605975760","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-605975760","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":605975760,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTk3NTc2MA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T12:42:33Z","updated_at":"2020-03-30T12:42:33Z","author_association":"CONTRIBUTOR","body":"thanks @mikerhodes \r\nhey Paul @davisp, based on new API design, I changed codes with \r\n65a88d0 . Could you please review again?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/605975760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606107854","html_url":"https://github.com/apache/couchdb/issues/2733#issuecomment-606107854","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2733","id":606107854,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjEwNzg1NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T16:36:19Z","updated_at":"2020-03-30T16:36:19Z","author_association":"MEMBER","body":"Hi @dianabarsan , thanks for this.\r\n\r\nI'm afraid to say that given you tested this all the way back to 1.7, this is probably a documentation error.\r\n\r\n[The code](https://github.com/apache/couchdb/blob/87edbaecd2cdb7f9266364e5fec65e31fe1fc251/src/couch/src/couch_changes.erl#L71-L78) is pretty clear that the since token is ignored when descending (`rev`) is specified. I don't know if enhancing CouchDB to support this is possible, but I'll let others respond.\r\n\r\nFor now I'm changing this to an enhancement request. Once we've determined if this is possible or not, we can then decide if this goes forward in development, or instead turns into a \"fix the docs\" ticket instead.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606107854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606163963","html_url":"https://github.com/apache/couchdb/pull/2208#issuecomment-606163963","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2208","id":606163963,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjE2Mzk2Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T18:24:58Z","updated_at":"2020-03-30T18:24:58Z","author_association":"MEMBER","body":"@PiotrKozimor The only way to recover the `delayed_commits` option would be to run an older 2.x release. As to `fsync_options` leaving that would have allowed users to disable fsyncs in an unsafe manner that would lead to corruption of a database (whereas `delayed_commits` might lose the last second of data, removing fsyncs can actually result in a database that is unreadable by CouchDB).\r\n\r\nAnother thing to keep in mind is that the next version of CouchDB will be based on FoundationDB which will change a lot of this considerably as the storage implementation will be different. There's interest in implementing the ability for CouchDB to run against a storage engine that would theoretically work much better on embedded devices, although this is not currently a promised feature. If you're interested in that work and/or contributing to that you should sign up for the dev@couchdb.apache.org mailing list.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606163963/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606238793","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606238793","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606238793,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjIzODc5Mw==","user":{"login":"dholth","id":208018,"node_id":"MDQ6VXNlcjIwODAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/208018?v=4","gravatar_id":"","url":"https://api.github.com/users/dholth","html_url":"https://github.com/dholth","followers_url":"https://api.github.com/users/dholth/followers","following_url":"https://api.github.com/users/dholth/following{/other_user}","gists_url":"https://api.github.com/users/dholth/gists{/gist_id}","starred_url":"https://api.github.com/users/dholth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dholth/subscriptions","organizations_url":"https://api.github.com/users/dholth/orgs","repos_url":"https://api.github.com/users/dholth/repos","events_url":"https://api.github.com/users/dholth/events{/privacy}","received_events_url":"https://api.github.com/users/dholth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T20:42:53Z","updated_at":"2020-03-30T20:43:11Z","author_association":"NONE","body":"I am having the same problem in CouchDB 3 but it works in CouchDB 2, but I am setting the username using proxy authentication.  #2734","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606238793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606291265","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606291265","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606291265,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjI5MTI2NQ==","user":{"login":"hawkrdg","id":1943589,"node_id":"MDQ6VXNlcjE5NDM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1943589?v=4","gravatar_id":"","url":"https://api.github.com/users/hawkrdg","html_url":"https://github.com/hawkrdg","followers_url":"https://api.github.com/users/hawkrdg/followers","following_url":"https://api.github.com/users/hawkrdg/following{/other_user}","gists_url":"https://api.github.com/users/hawkrdg/gists{/gist_id}","starred_url":"https://api.github.com/users/hawkrdg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hawkrdg/subscriptions","organizations_url":"https://api.github.com/users/hawkrdg/orgs","repos_url":"https://api.github.com/users/hawkrdg/repos","events_url":"https://api.github.com/users/hawkrdg/events{/privacy}","received_events_url":"https://api.github.com/users/hawkrdg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T22:46:44Z","updated_at":"2020-03-30T22:46:44Z","author_association":"NONE","body":"I should note that I am running https on the server but this should not matter one way or the other.\r\n\r\nthe simplest test - fauxton - login as server admin, open a new browser tab and try https://couchurl:6984/_users/org.couchdb.user:someusername - this works 200 in devtools\r\nlogout of fauxton and log back in as someusername, go back to the other tab and refresh\r\nhttp://couchurl:6984/_users/org.couchdb.user:someusername - this doesn't work - 403 in devtools\r\nlogout of fauxton and log back in as a server admin, go back to the other tab and refresh\r\nhttp://couchurl:6984/_users/org.couchdb.user:someusername - this works 200 in devtools\r\n\r\nI can't resolve this and don't understand closing it. I am SUPPOSED to be able to get my own user record, just like in v2.x where it worked just fine. I have tested this using curl and using my angular http couch wrapper. Still fails and the new docs don't cover this. Is this a design change that only server admins can access any part of _users - sure makes it hard for a user to change their password.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606291265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606293262","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606293262","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606293262,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjI5MzI2Mg==","user":{"login":"dholth","id":208018,"node_id":"MDQ6VXNlcjIwODAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/208018?v=4","gravatar_id":"","url":"https://api.github.com/users/dholth","html_url":"https://github.com/dholth","followers_url":"https://api.github.com/users/dholth/followers","following_url":"https://api.github.com/users/dholth/following{/other_user}","gists_url":"https://api.github.com/users/dholth/gists{/gist_id}","starred_url":"https://api.github.com/users/dholth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dholth/subscriptions","organizations_url":"https://api.github.com/users/dholth/orgs","repos_url":"https://api.github.com/users/dholth/repos","events_url":"https://api.github.com/users/dholth/events{/privacy}","received_events_url":"https://api.github.com/users/dholth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T22:52:46Z","updated_at":"2020-03-30T22:52:46Z","author_association":"NONE","body":"Pretty clear that it's a bug IMO\n\nOn Mon, Mar 30, 2020, at 6:46 PM, cliff wrote:\n> \n\n> I should note that I am running https on the server but this should not matter one way or the other.\n\n\n> the simplest test - fauxton - login as server admin, open a new browser tab and try https://couchurl:6984/_users/org.couchdb.user:someusername - this works 200 in devtools\n>  logout of fauxton and log back in as someusername, go back to the other tab and refresh\n> http://couchurl:6984/_users/org.couchdb.user:someusername - this doesn't work - 403 in devtools\n>  logout of fauxton and log back in as a server admin, go back to the other tab and refresh\n> http://couchurl:6984/_users/org.couchdb.user:someusername - this works 200 in devtools\n\n> I can't resolve this and don't understand closing it. I am SUPPOSED to be able to get my own user record, just like in v2.x where it worked just fine. I have tested this using curl and using my angular http couch wrapper. Still fails and the new docs don't cover this. Is this a design change that only server admins can access any part of _users - sure makes it hard for a user to change their password.\n\n\n> â€”\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub <https://github.com/apache/couchdb/issues/2730#issuecomment-606291265>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/AABSZEURKBCJAAVHUMSGB5DRKEOODANCNFSM4LV3MZUA>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606293262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606298081","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606298081","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606298081,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjI5ODA4MQ==","user":{"login":"hawkrdg","id":1943589,"node_id":"MDQ6VXNlcjE5NDM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1943589?v=4","gravatar_id":"","url":"https://api.github.com/users/hawkrdg","html_url":"https://github.com/hawkrdg","followers_url":"https://api.github.com/users/hawkrdg/followers","following_url":"https://api.github.com/users/hawkrdg/following{/other_user}","gists_url":"https://api.github.com/users/hawkrdg/gists{/gist_id}","starred_url":"https://api.github.com/users/hawkrdg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hawkrdg/subscriptions","organizations_url":"https://api.github.com/users/hawkrdg/orgs","repos_url":"https://api.github.com/users/hawkrdg/repos","events_url":"https://api.github.com/users/hawkrdg/events{/privacy}","received_events_url":"https://api.github.com/users/hawkrdg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T23:07:35Z","updated_at":"2020-03-30T23:07:35Z","author_association":"NONE","body":"I agree with dholth - I just finished up a nice angular login drop-in component that works with material theming. I have commented out the 'change password' part and guess that's where it will stay until this is fixed. Natcohen's comment is not where I would go: posting to _session logs you in and you stay logged in until you either timeout or send a delete to _session.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606298081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606311489","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606311489","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606311489,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjMxMTQ4OQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T23:49:37Z","updated_at":"2020-03-30T23:49:37Z","author_association":"MEMBER","body":"will check this over in the morning","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606311489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606312449","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606312449","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606312449,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjMxMjQ0OQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T23:53:07Z","updated_at":"2020-03-30T23:53:07Z","author_association":"MEMBER","body":"noting that the original comment is mistaken. the first POST has no bearing on the subsequent GET unless you omitted the curl params to save and load cookies (`-c` and `-b`). more in the am.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606312449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606475471","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606475471","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606475471,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjQ3NTQ3MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T08:22:43Z","updated_at":"2020-03-31T08:22:43Z","author_association":"MEMBER","body":"Hi,\r\n\r\nAfter double checking the release notes, this is a deliberate change.\r\n\r\nAll databases are now set to admin-only by default as part of https://github.com/apache/couchdb/pull/2339.\r\n\r\nYou can change this back on a per database basis if you wish.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606475471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606475580","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606475580","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606475580,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjQ3NTU4MA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T08:22:58Z","updated_at":"2020-03-31T08:22:58Z","author_association":"MEMBER","body":"(release notes here: https://docs.couchdb.org/en/stable/whatsnew/3.0.html)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606475580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606496445","html_url":"https://github.com/apache/couchdb/issues/2734#issuecomment-606496445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2734","id":606496445,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjQ5NjQ0NQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T09:05:50Z","updated_at":"2020-03-31T09:05:50Z","author_association":"MEMBER","body":"Same reason as https://github.com/apache/couchdb/issues/2730, the default _security setting changed in 3.0 to a more secure setting (admin only). You can relax this yourself by modifying the _security object of the _users database. \r\n\r\nMentioned in the upgrade notes for the 3.0 major release here: https://docs.couchdb.org/en/stable/whatsnew/3.0.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606496445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606497843","html_url":"https://github.com/apache/couchdb/issues/2635#issuecomment-606497843","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2635","id":606497843,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjQ5Nzg0Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T09:08:42Z","updated_at":"2020-03-31T09:08:42Z","author_association":"MEMBER","body":"hi @natcohen sorry for silence.\r\n\r\nAppreciate the desire to help but things move forward in this project when folks contribute. It's useful to highlight a desire for this feature, though. If someone works on it to a reviewable standard, I'm sure someone will have time to help it the last few steps.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606497843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606616966","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606616966","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606616966,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjYxNjk2Ng==","user":{"login":"hawkrdg","id":1943589,"node_id":"MDQ6VXNlcjE5NDM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1943589?v=4","gravatar_id":"","url":"https://api.github.com/users/hawkrdg","html_url":"https://github.com/hawkrdg","followers_url":"https://api.github.com/users/hawkrdg/followers","following_url":"https://api.github.com/users/hawkrdg/following{/other_user}","gists_url":"https://api.github.com/users/hawkrdg/gists{/gist_id}","starred_url":"https://api.github.com/users/hawkrdg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hawkrdg/subscriptions","organizations_url":"https://api.github.com/users/hawkrdg/orgs","repos_url":"https://api.github.com/users/hawkrdg/repos","events_url":"https://api.github.com/users/hawkrdg/events{/privacy}","received_events_url":"https://api.github.com/users/hawkrdg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T13:10:56Z","updated_at":"2020-03-31T13:10:56Z","author_association":"NONE","body":"Yeah, I get the change for other DB's, no problem - we just edit security and add some roles BUT we aren't allowed to edit security on _users and opening it up would be a bad idea.\r\nSO how is a user supposed to change their own password...? \r\nIMO this is a lame change and will certainly break any existing app that allows a user to change their own password. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606616966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606622103","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606622103","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606622103,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjYyMjEwMw==","user":{"login":"hawkrdg","id":1943589,"node_id":"MDQ6VXNlcjE5NDM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1943589?v=4","gravatar_id":"","url":"https://api.github.com/users/hawkrdg","html_url":"https://github.com/hawkrdg","followers_url":"https://api.github.com/users/hawkrdg/followers","following_url":"https://api.github.com/users/hawkrdg/following{/other_user}","gists_url":"https://api.github.com/users/hawkrdg/gists{/gist_id}","starred_url":"https://api.github.com/users/hawkrdg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hawkrdg/subscriptions","organizations_url":"https://api.github.com/users/hawkrdg/orgs","repos_url":"https://api.github.com/users/hawkrdg/repos","events_url":"https://api.github.com/users/hawkrdg/events{/privacy}","received_events_url":"https://api.github.com/users/hawkrdg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T13:19:43Z","updated_at":"2020-03-31T13:19:43Z","author_association":"NONE","body":"Adding to this: \r\n\r\n_users had always been a rather special DB. Letting users have access to only their own record allowed app designers to keep extra info there like a profile which could be mined for say marketing or company policy.\r\n\r\n I would hope that the couch designers will reconsider what IMO is a draconian change to behavior we have been using for years","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606622103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606667027","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606667027","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606667027,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjY2NzAyNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T14:35:31Z","updated_at":"2020-03-31T14:35:31Z","author_association":"MEMBER","body":"You say you want the 2.0 behaviour in the same comment as saying \"opening it up would be a bad idea\". We agree, that's why the default in 3.0 is secure (admin only).\r\n\r\nThis decision was taken consciously by the CouchDB project, you are invited to post your thoughts to the couchdb user or dev mailing list to reach the full team about this.\r\n\r\nAnd a reminder to stay polite, we don't need pejoratives like \"lame\" and \"draconian\", especially when we're only discussing a new default for something you, as a couchdb administrator, are in full control of and can return to the 2.0 setting in a single request.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606667027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606667667","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606667667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606667667,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjY2NzY2Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T14:36:36Z","updated_at":"2020-03-31T14:36:36Z","author_association":"MEMBER","body":"https://github.com/apache/couchdb/blob/master/rel/overlay/etc/default.ini#L76-L77","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606667667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606686952","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606686952","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606686952,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjY4Njk1Mg==","user":{"login":"dholth","id":208018,"node_id":"MDQ6VXNlcjIwODAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/208018?v=4","gravatar_id":"","url":"https://api.github.com/users/dholth","html_url":"https://github.com/dholth","followers_url":"https://api.github.com/users/dholth/followers","following_url":"https://api.github.com/users/dholth/following{/other_user}","gists_url":"https://api.github.com/users/dholth/gists{/gist_id}","starred_url":"https://api.github.com/users/dholth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dholth/subscriptions","organizations_url":"https://api.github.com/users/dholth/orgs","repos_url":"https://api.github.com/users/dholth/repos","events_url":"https://api.github.com/users/dholth/events{/privacy}","received_events_url":"https://api.github.com/users/dholth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T15:08:44Z","updated_at":"2020-03-31T15:09:58Z","author_association":"NONE","body":"@rnewson in that case the question is what is the correct _security object for the _users database to get the 2.0 behavior, since it also has \"special\" users-can-read-their-own-documents-only permissions? The documentation, still assuming the 2.0 _security, should be updated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606686952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606707392","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606707392","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606707392,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjcwNzM5Mg==","user":{"login":"dholth","id":208018,"node_id":"MDQ6VXNlcjIwODAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/208018?v=4","gravatar_id":"","url":"https://api.github.com/users/dholth","html_url":"https://github.com/dholth","followers_url":"https://api.github.com/users/dholth/followers","following_url":"https://api.github.com/users/dholth/following{/other_user}","gists_url":"https://api.github.com/users/dholth/gists{/gist_id}","starred_url":"https://api.github.com/users/dholth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dholth/subscriptions","organizations_url":"https://api.github.com/users/dholth/orgs","repos_url":"https://api.github.com/users/dholth/repos","events_url":"https://api.github.com/users/dholth/events{/privacy}","received_events_url":"https://api.github.com/users/dholth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T15:43:35Z","updated_at":"2020-03-31T15:43:44Z","author_association":"NONE","body":"Documentation for the 2.0 behavior. Technically not wrong given the totality of the docs, although it should be updated to say \"by default _security means users may not access documents they own\"\r\n\r\nhttps://docs.couchdb.org/en/stable/intro/security.html?highlight=org%20couchdb%20users#authentication-database\r\n\r\n-     Only administrators may browse list of all documents (GET /_users/_all_docs)\r\n-     Only administrators may listen to changes feed (GET /_users/_changes)\r\n-     Only administrators may execute design functions like views.\r\n-     There is a special design document _auth that cannot be modified\r\n-     Every document except the design documents represent registered CouchDB users and belong to them\r\n-     Users may only access (GET /_users/org.couchdb.user:Jan) or modify (PUT /_users/org.couchdb.user:Jan) documents that they own\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606707392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606720618","html_url":"https://github.com/apache/couchdb/issues/2441#issuecomment-606720618","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2441","id":606720618,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjcyMDYxOA==","user":{"login":"sklassen","id":6997477,"node_id":"MDQ6VXNlcjY5OTc0Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/6997477?v=4","gravatar_id":"","url":"https://api.github.com/users/sklassen","html_url":"https://github.com/sklassen","followers_url":"https://api.github.com/users/sklassen/followers","following_url":"https://api.github.com/users/sklassen/following{/other_user}","gists_url":"https://api.github.com/users/sklassen/gists{/gist_id}","starred_url":"https://api.github.com/users/sklassen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sklassen/subscriptions","organizations_url":"https://api.github.com/users/sklassen/orgs","repos_url":"https://api.github.com/users/sklassen/repos","events_url":"https://api.github.com/users/sklassen/events{/privacy}","received_events_url":"https://api.github.com/users/sklassen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T16:02:12Z","updated_at":"2020-03-31T16:02:12Z","author_association":"CONTRIBUTOR","body":"I had recurring memory problems that I fixed by upgrading the version of jiffy (see https://github.com/davisp/jiffy/commit/0ba322e42171bb48ffdd0c053cef28a42eb35fc9)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606720618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606741710","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606741710","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606741710,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjc0MTcxMA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T16:41:32Z","updated_at":"2020-03-31T16:42:06Z","author_association":"MEMBER","body":"1. set `[couchdb] users_db_security_editable = true` in local.ini\r\n2. change security object of _users db to an empty object (the 2.0 default)\r\n\r\n```\r\ncurl foo:bar@localhost:15984/_users/_security -XPUT -d '{}'\r\n```\r\n\r\nto restore the default behaviour;\r\n\r\n```\r\nâžœ  ~curl localhost:15984/_users/org.couchdb.user:rnewson -XPUT -d '{\"type\":\"user\",\"name\":\"rnewson\", \"password\":\"wibble\", \"roles\":[]}'\r\n{\"ok\":true,\"id\":\"org.couchdb.user:rnewson\",\"rev\":\"1-be4d8b78890e9a4dc7fdb6daf712ea67\"}\r\n\r\nâžœ  ~ curl localhost:15984/_users/org.couchdb.user:rnewson\r\n{\"error\":\"not_found\",\"reason\":\"missing\"}\r\n\r\nâžœ  ~ curl localhost:15984/_users/org.couchdb.user:rnewson -u rnewson:wibble\r\n{\"_id\":\"org.couchdb.user:rnewson\",\"_rev\":\"1-be4d8b78890e9a4dc7fdb6daf712ea67\",\"type\":\"user\",\"name\":\"rnewson\",\"roles\":[],\"password_scheme\":\"pbkdf2\",\"iterations\":10,\"derived_key\":\"e654649d2d3aa9b0dea54d89a942a42c2f7ccb37\",\"salt\":\"53a8ad5802e6c1d0a59090b6d52d7aa1\"}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606741710/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606828007","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-606828007","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":606828007,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjgyODAwNw==","user":{"login":"hawkrdg","id":1943589,"node_id":"MDQ6VXNlcjE5NDM1ODk=","avatar_url":"https://avatars.githubusercontent.com/u/1943589?v=4","gravatar_id":"","url":"https://api.github.com/users/hawkrdg","html_url":"https://github.com/hawkrdg","followers_url":"https://api.github.com/users/hawkrdg/followers","following_url":"https://api.github.com/users/hawkrdg/following{/other_user}","gists_url":"https://api.github.com/users/hawkrdg/gists{/gist_id}","starred_url":"https://api.github.com/users/hawkrdg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hawkrdg/subscriptions","organizations_url":"https://api.github.com/users/hawkrdg/orgs","repos_url":"https://api.github.com/users/hawkrdg/repos","events_url":"https://api.github.com/users/hawkrdg/events{/privacy}","received_events_url":"https://api.github.com/users/hawkrdg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T19:30:19Z","updated_at":"2020-03-31T19:30:19Z","author_association":"NONE","body":"I mean no offense to any on this thread. The manual (1.5.2. Authentication Database) says a user should be able to retrieve their own record - doesn't happen out of the box. Having the correct info in the manual would have saved me and others hours as well as a bunch of open issues. It isn't simple as the default install will not let an admin modify _users security. I had to dig through default.ini to fine the correct setting.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606828007/reactions","total_count":12,"+1":12,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606992832","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-606992832","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":606992832,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjk5MjgzMg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T02:37:32Z","updated_at":"2020-04-01T03:14:18Z","author_association":"NONE","body":"This solved the issue for me:\r\n\r\nStart by adding the CouchDB GPG key to your system using the following command:\r\n\r\ncurl -L https://couchdb.apache.org/repo/bintray-pubkey.asc | sudo apt-key add -\r\n\r\nOnce the key is imported, add the CouchDB repository with:\r\n\r\necho \"deb https://apache.bintray.com/couchdb-deb bionic main\" | sudo tee -a /etc/apt/sources.list\r\n\r\nsudo apt update\r\nsudo apt install couchdb\r\n\r\nCredits to: https://linuxize.com/post/how-to-install-couchdb-on-ubuntu-18-04/\r\n\r\nHope it helps!\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/606992832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607002635","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-607002635","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":607002635,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzAwMjYzNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T03:14:01Z","updated_at":"2020-04-01T03:14:01Z","author_association":"MEMBER","body":"@sergiosanchezstb Thanks for your comment, but this is 100% in our installation documentation:\r\n\r\nhttp://docs.couchdb.org/en/stable/install/unix.html#installation-using-the-apache-couchdb-convenience-binary-packages .\r\n\r\nLocking this to \"me-too\" responses.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607002635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607218925","html_url":"https://github.com/apache/couchdb/pull/2662#issuecomment-607218925","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2662","id":607218925,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzIxODkyNQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T12:26:23Z","updated_at":"2020-04-01T12:26:23Z","author_association":"CONTRIBUTOR","body":"@garrensmith updated","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607218925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607314120","html_url":"https://github.com/apache/couchdb/pull/2742#issuecomment-607314120","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2742","id":607314120,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzMxNDEyMA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T15:21:57Z","updated_at":"2020-04-01T15:21:57Z","author_association":"MEMBER","body":"This got messy, 8 commits to land the feature. :D","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607314120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607339883","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-607339883","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":607339883,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzMzOTg4Mw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T16:04:47Z","updated_at":"2020-04-01T16:04:47Z","author_association":"CONTRIBUTOR","body":"@davisp and @nickva could you please check whether there are other comments left?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607339883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607473067","html_url":"https://github.com/apache/couchdb/pull/2684#issuecomment-607473067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2684","id":607473067,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzQ3MzA2Nw==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T20:27:54Z","updated_at":"2020-04-01T20:27:54Z","author_association":"CONTRIBUTOR","body":"Hi @wohali, now elixir and javascript can be chained. It is ok for you?\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607473067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607476733","html_url":"https://github.com/apache/couchdb/pull/2684#issuecomment-607476733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2684","id":607476733,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzQ3NjczMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T20:35:57Z","updated_at":"2020-04-01T20:35:57Z","author_association":"MEMBER","body":"Weird, I still don't understand why having to subshell to Make works. This needs further study.\r\n\r\nGo ahead and merge, I'll open a new ticket.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607476733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607832934","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-607832934","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":607832934,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzgzMjkzNA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T13:03:07Z","updated_at":"2020-04-02T13:03:07Z","author_association":"MEMBER","body":"I'm digging this up again. Could we look at adding this into the CI flow without adding support for windows? Its going to be hard to do that. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607832934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607841279","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-607841279","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":607841279,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzg0MTI3OQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T13:17:56Z","updated_at":"2020-04-02T13:17:56Z","author_association":"CONTRIBUTOR","body":"Just for simplification,  the _deleted_dbs wasn't returning DbInfo blobs directly in the past. In order to get DbInfo blobs, need to call `GET _deleted_dbs/{db}/`. But with new commit 031cb85, DbInfo Blobs is added as well for `GET _deleted_dbs`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607841279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607908514","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-607908514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":607908514,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzkwODUxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T15:15:46Z","updated_at":"2020-04-02T15:15:46Z","author_association":"MEMBER","body":"@garrensmith If you or @iilyak can freshen this PR to not have a conflict on `Makefile`, I'll have a look at `configure.ps1`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607908514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607950128","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-607950128","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":607950128,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzk1MDEyOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T16:25:34Z","updated_at":"2020-04-02T16:25:34Z","author_association":"MEMBER","body":"Also, if you can move the source branch into the `apache/couchdb` repo, I can PR against it with the Windows changes. Otherwise, I'll just post a diff here that you can apply yourself.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607950128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607954397","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-607954397","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":607954397,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzk1NDM5Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T16:33:12Z","updated_at":"2020-04-02T16:33:12Z","author_association":"MEMBER","body":"Also, a couple quick thoughts on the HTTP API. Looking at it a bit harder I realized that we've basically duplicated some functionality because these two requests should be functionally equivalent:\r\n\r\n```\r\nGET /_deleted_dbs/DbName`\r\nGET /_deleted_dbs?key=DbName`\r\n```\r\n\r\nAnd I could see a convincing argument that the second form would be more \"natural\" within the existing APIs for views and so on.\r\n\r\nI've also heard some concerns that having the `undelete` vs `delete` semantics of our `POST /_deleted_dbs` setup makes auditing traffic hard/impossible without introspecting the request body which seems like a legitimate critique. How about if we tweaked things to be like such:\r\n\r\n* `GET /_deleted_dbs` - List deleted dbs infos as currently.\r\n* `POST /_deleted_dbs` - Only accepts the `undelete` JSON body\r\n* `DELETE /_deleted_dbs/DbName?timestamp=2020-01-01T00:00:00` - Remove deleted db\r\n\r\n/cc @mikerhodes @ricellis @nickva","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607954397/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607957206","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-607957206","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":607957206,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzk1NzIwNg==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T16:38:10Z","updated_at":"2020-04-02T16:38:10Z","author_association":"MEMBER","body":"Awesome thanks that will be great\n\n________________________________\nFrom: Joan Touzet <notifications@github.com>\nSent: Thursday, April 2, 2020 6:25:51 PM\nTo: apache/couchdb <couchdb@noreply.github.com>\nCc: garren smith <garren.smith@gmail.com>; Mention <mention@noreply.github.com>\nSubject: Re: [apache/couchdb] Integrate emilio (#1944)\n\n\nAlso, if you can move the source branch into the apache/couchdb repo, I can PR against it with the Windows changes. Otherwise, I'll just post a diff here that you can apply yourself.\n\nâ€”\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/pull/1944#issuecomment-607950128>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AABL2AWI62VREKF2UT6BBPLRKS4A7ANCNFSM4G2LMMSA>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607957206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607972201","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-607972201","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":607972201,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzk3MjIwMQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T17:04:52Z","updated_at":"2020-04-02T17:04:52Z","author_association":"MEMBER","body":"I wasn't super fond of the chttpd tests for deleted dbs but not in a way specific enough to review very well. So I just took a quick pass through reformatting/styling etc on what looks better to me. Feel free to completely ignore this though as its purely style related. But in case you're interested, this is how I'd change things so that there's a lot less noise in that test module:\r\n\r\nhttps://gist.github.com/davisp/257ea1631d443031f5c3995b70093bbe","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607972201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607973871","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-607973871","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":607973871,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzk3Mzg3MQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T17:07:47Z","updated_at":"2020-04-02T17:07:47Z","author_association":"MEMBER","body":"Also, something I noticed while playing with the tests is that the `GET /_deleted_dbs/DbName` is not very ergonomic. Due to how things are implemented, if we don't have any deleted snapshots we still return a `200` response with an empty array `[]` as the body. I would have expected a `404` in that situation given that the `DbName` is part of the URL. I realize that's purely due to how things are implemented, but it suggests to me that the `GET /_deleted_dbs?key=DbName` approach is better since we'd be more likely to understand that a `200` and empty array returned is expected since its more like a view query where results might or might not exist.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607973871/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607980168","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-607980168","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":607980168,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzk4MDE2OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T17:19:23Z","updated_at":"2020-04-02T17:19:23Z","author_association":"MEMBER","body":"@wohali cloudant-labs/emilio#3 is merged.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/607980168/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608281551","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608281551","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608281551,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODI4MTU1MQ==","user":{"login":"mikerhodes","id":453210,"node_id":"MDQ6VXNlcjQ1MzIxMA==","avatar_url":"https://avatars.githubusercontent.com/u/453210?v=4","gravatar_id":"","url":"https://api.github.com/users/mikerhodes","html_url":"https://github.com/mikerhodes","followers_url":"https://api.github.com/users/mikerhodes/followers","following_url":"https://api.github.com/users/mikerhodes/following{/other_user}","gists_url":"https://api.github.com/users/mikerhodes/gists{/gist_id}","starred_url":"https://api.github.com/users/mikerhodes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikerhodes/subscriptions","organizations_url":"https://api.github.com/users/mikerhodes/orgs","repos_url":"https://api.github.com/users/mikerhodes/repos","events_url":"https://api.github.com/users/mikerhodes/events{/privacy}","received_events_url":"https://api.github.com/users/mikerhodes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T07:41:05Z","updated_at":"2020-04-03T07:42:16Z","author_association":"CONTRIBUTOR","body":"- The main problem I can see for `GET /_deleted_dbs?key=DbName` is that we lose the mirror with including the database name like we have for `DELETE /_deleted_dbs/DbName?timestamp=2020-01-01T00:00:00`.\r\n- I also wondered whether the `timestamp` is required for the `DELETE`? If so, passing it as part of the path would be more natural (which I'm aware was one of the original suggestions I wasn't so keen on :grin:). \r\n- If we look to `_all_dbs` as a model (I pondered this as we're looking at databases and the API is much simpler to copy), it isn't correct that these are equivalent perhaps:\r\n\r\n     ```\r\n     GET /_deleted_dbs/DbName\r\n     GET /_deleted_dbs?key=DbName\r\n     ```\r\n\r\n    Because these return different values in the existing API:\r\n\r\n     ```\r\n     GET /DbName\r\n     GET /_all_dbs?key=DbName\r\n     ```\r\n\r\n     So there's a question here as to whether `/_deleted_dbs` is more like a `_all_dbs` or `_all_docs`? Are we talking databases or some other type of entity, that `/_deleted_dbs` is more like talking about a set of metadata about deleted databases rather than teh databases themselves.\r\n\r\n\r\nA quick proposal with responses based on `_all_dbs` that is as REST as I could make it, with all the lessons from the discussion above tried to be taken onboard:\r\n\r\nhttps://gist.github.com/mikerhodes/39c66576eee468a5aeaa23c5715aec9a\r\n\r\nI think this could be trivially adapted to make the responses more `_all_docs`/view like if we wanted using the same paths.\r\n\r\nI guess we have `_dbs_info` as a guide too, though that doesn't tell us what `/_deleted_dbs/DbName` should be...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608281551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608382248","html_url":"https://github.com/apache/couchdb/issues/2755#issuecomment-608382248","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2755","id":608382248,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODM4MjI0OA==","user":{"login":"vectorselector","id":4980940,"node_id":"MDQ6VXNlcjQ5ODA5NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4980940?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorselector","html_url":"https://github.com/vectorselector","followers_url":"https://api.github.com/users/vectorselector/followers","following_url":"https://api.github.com/users/vectorselector/following{/other_user}","gists_url":"https://api.github.com/users/vectorselector/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorselector/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorselector/subscriptions","organizations_url":"https://api.github.com/users/vectorselector/orgs","repos_url":"https://api.github.com/users/vectorselector/repos","events_url":"https://api.github.com/users/vectorselector/events{/privacy}","received_events_url":"https://api.github.com/users/vectorselector/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T11:28:15Z","updated_at":"2020-04-03T11:28:15Z","author_association":"NONE","body":"very sorry for the strong language. i have literally suffered a lot, however, and this must be recorded for posterity, either as a testament to my stupidity, or the difficulty I outlined above.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608382248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608388186","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-608388186","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":608388186,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODM4ODE4Ng==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T11:43:54Z","updated_at":"2020-04-03T11:43:54Z","author_association":"CONTRIBUTOR","body":"CI is failing with unrelated issue ðŸ˜¢ \r\n```\r\n[2020-04-03T11:40:38.315Z] ==> couch_replicator (compile)\r\n\r\n[2020-04-03T11:40:38.662Z] /home/****/workspace/****-cm1_PullRequests_PR-1944/src/couch_replicator/src/couch_replicator_httpc.erl:16: can't find include lib \"ibrowse/include/ibrowse.hrl\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608388186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608405619","html_url":"https://github.com/apache/couchdb/issues/2755#issuecomment-608405619","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2755","id":608405619,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQwNTYxOQ==","user":{"login":"vectorselector","id":4980940,"node_id":"MDQ6VXNlcjQ5ODA5NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4980940?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorselector","html_url":"https://github.com/vectorselector","followers_url":"https://api.github.com/users/vectorselector/followers","following_url":"https://api.github.com/users/vectorselector/following{/other_user}","gists_url":"https://api.github.com/users/vectorselector/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorselector/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorselector/subscriptions","organizations_url":"https://api.github.com/users/vectorselector/orgs","repos_url":"https://api.github.com/users/vectorselector/repos","events_url":"https://api.github.com/users/vectorselector/events{/privacy}","received_events_url":"https://api.github.com/users/vectorselector/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T12:27:33Z","updated_at":"2020-04-03T12:27:33Z","author_association":"NONE","body":"vm.args file\r\n```\r\n-name couchdb@1.2.3.4\r\n\r\n-setcookie mycookie\r\n\r\n# Tell kernel and SASL not to log anything\r\n-kernel error_logger silent\r\n-sasl sasl_error_logger false\r\n\r\n# Use kernel poll functionality if supported by emulator\r\n+K true\r\n\r\n# Start a pool of asynchronous IO threads\r\n+A 16\r\n\r\n# Comment this line out to enable the interactive Erlang shell on startup\r\n+Bd -noinput\r\n\r\n# Force use of the smp scheduler, fixes #1296\r\n-smp enable\r\n\r\n# Set maximum SSL session lifetime to reap terminated replication readers\r\n-ssl session_lifetime 300\r\n\r\n-kernel inet_dist_listen_min 9100\r\n-kernel inet_dist_listen_max 9100\r\n```\r\n\r\nlocal.ini\r\n```\r\n\r\n; CouchDB Configuration Settings\r\n\r\n; Custom settings should be made in this file. They will override settings\r\n; in default.ini, but unlike changes made to default.ini, this file won't be\r\n; overwritten on server upgrade.\r\n\r\n[couchdb]\r\n;max_document_size = 4294967296 ; bytes\r\n;os_process_timeout = 5000\r\nuuid = sameuuidonallnodesetc\r\n\r\n[couch_peruser]\r\n; If enabled, couch_peruser ensures that a private per-user database\r\n; exists for each document in _users. These databases are writable only\r\n; by the corresponding user. Databases are in the following form:\r\n; userdb-{hex encoded username}\r\n;enable = true\r\n; If set to true and a user is deleted, the respective database gets\r\n; deleted as well.\r\n;delete_dbs = true\r\n; Set a default q value for peruser-created databases that is different from\r\n; cluster / q\r\n;q = 1\r\n\r\n[chttpd]\r\n;port = 5984\r\n;bind_address = 127.0.0.1\r\n; Options for the MochiWeb HTTP server.\r\n;server_options = [{backlog, 128}, {acceptor_pool_size, 16}]\r\n; For more socket options, consult Erlang's module 'inet' man page.\r\n;socket_options = [{sndbuf, 262144}, {nodelay, true}]\r\nbind_address = 0.0.0.0\r\n\r\n[httpd]\r\n; NOTE that this only configures the \"backend\" node-local port, not the\r\n; \"frontend\" clustered port. You probably don't want to change anything in\r\n; this section.\r\n; Uncomment next line to trigger basic-auth popup on unauthorized requests.\r\n;WWW-Authenticate = Basic realm=\"administrator\"\r\n\r\n; Uncomment next line to set the configuration modification whitelist. Only\r\n; whitelisted values may be changed via the /_config URLs. To allow the admin\r\n; to change this value over HTTP, remember to include {httpd,config_whitelist}\r\n; itself. Excluding it from the list would require editing this file to update\r\n; the whitelist.\r\n;config_whitelist = [{httpd,config_whitelist}, {log,level}, {etc,etc}]\r\n\r\n[query_servers]\r\n;nodejs = /usr/local/bin/couchjs-node /path/to/couchdb/share/server/main.js\r\n\r\n[couch_httpd_auth]\r\n; If you set this to true, you should also uncomment the WWW-Authenticate line\r\n; above. If you don't configure a WWW-Authenticate header, CouchDB will send\r\n; Basic realm=\"server\" in order to prevent you getting logged out.\r\n; require_valid_user = false\r\nsecret = 123456etc\r\n\r\n[ssl]\r\n;enable = true\r\n;cert_file = /full/path/to/server_cert.pem\r\n;key_file = /full/path/to/server_key.pem\r\n;password = somepassword\r\n; set to true to validate peer certificates\r\n;verify_ssl_certificates = false\r\n; Set to true to fail if the client does not send a certificate. Only used if verify_ssl_certificates is true.\r\n;fail_if_no_peer_cert = false\r\n; Path to file containing PEM encoded CA certificates (trusted\r\n; certificates used for verifying a peer certificate). May be omitted if\r\n; you do not want to verify the peer.\r\n;cacert_file = /full/path/to/cacertf\r\n; The verification fun (optional) if not specified, the default\r\n; verification fun will be used.\r\n;verify_fun = {Module, VerifyFun}\r\n; maximum peer certificate depth\r\n;ssl_certificate_max_depth = 1\r\n;\r\n; Reject renegotiations that do not live up to RFC 5746.\r\n;secure_renegotiate = true\r\n; The cipher suites that should be supported.\r\n; Can be specified in erlang format \"{ecdhe_ecdsa,aes_128_cbc,sha256}\"\r\n; or in OpenSSL format \"ECDHE-ECDSA-AES128-SHA256\".\r\n;ciphers = [\"ECDHE-ECDSA-AES128-SHA256\", \"ECDHE-ECDSA-AES128-SHA\"]\r\n; The SSL/TLS versions to support\r\n;tls_versions = [tlsv1, 'tlsv1.1', 'tlsv1.2']\r\n\r\n; To enable Virtual Hosts in CouchDB, add a vhost = path directive. All requests to\r\n; the Virual Host will be redirected to the path. In the example below all requests\r\n; to http://example.com/ are redirected to /database.\r\n; If you run CouchDB on a specific port, include the port number in the vhost:\r\n; example.com:5984 = /database\r\n[vhosts]\r\n;example.com = /database/\r\n\r\n; To create an admin account uncomment the '[admins]' section below and add a\r\n; line in the format 'username = password'. When you next start CouchDB, it\r\n; will change the password to a hash (so that your passwords don't linger\r\n; around in plain-text files). You can add more admin accounts with more\r\n; 'username = password' lines. Don't forget to restart CouchDB after\r\n; changing this.\r\n[admins]\r\nmyuser = -pbkdf2-encodedpasswordfromrunningcouchdbalready\r\n\r\n[cluster]\r\nn = 3\r\n\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608405619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608406376","html_url":"https://github.com/apache/couchdb/issues/2755#issuecomment-608406376","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2755","id":608406376,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQwNjM3Ng==","user":{"login":"vectorselector","id":4980940,"node_id":"MDQ6VXNlcjQ5ODA5NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4980940?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorselector","html_url":"https://github.com/vectorselector","followers_url":"https://api.github.com/users/vectorselector/followers","following_url":"https://api.github.com/users/vectorselector/following{/other_user}","gists_url":"https://api.github.com/users/vectorselector/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorselector/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorselector/subscriptions","organizations_url":"https://api.github.com/users/vectorselector/orgs","repos_url":"https://api.github.com/users/vectorselector/repos","events_url":"https://api.github.com/users/vectorselector/events{/privacy}","received_events_url":"https://api.github.com/users/vectorselector/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T12:29:21Z","updated_at":"2020-04-03T12:29:38Z","author_association":"NONE","body":"firewall is ufw, each host allows from each other host on private ip for ports 5984, 4369, 9100\r\nnetcat to each from each works until trying to cluster, after which 5984 refuses, but port is open and works before cluster attempts","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608406376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608409139","html_url":"https://github.com/apache/couchdb/issues/2755#issuecomment-608409139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2755","id":608409139,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQwOTEzOQ==","user":{"login":"vectorselector","id":4980940,"node_id":"MDQ6VXNlcjQ5ODA5NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4980940?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorselector","html_url":"https://github.com/vectorselector","followers_url":"https://api.github.com/users/vectorselector/followers","following_url":"https://api.github.com/users/vectorselector/following{/other_user}","gists_url":"https://api.github.com/users/vectorselector/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorselector/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorselector/subscriptions","organizations_url":"https://api.github.com/users/vectorselector/orgs","repos_url":"https://api.github.com/users/vectorselector/repos","events_url":"https://api.github.com/users/vectorselector/events{/privacy}","received_events_url":"https://api.github.com/users/vectorselector/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T12:35:58Z","updated_at":"2020-04-03T12:35:58Z","author_association":"NONE","body":"ok, it just worked suddenly, first pass adding nodes gave document-update-conflict, finished single-node cluster, then enabled other nodes all over again, worked, then added other nodes again, then finish cluster again, then it worked. suddenly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608409139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608410160","html_url":"https://github.com/apache/couchdb/issues/2755#issuecomment-608410160","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2755","id":608410160,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQxMDE2MA==","user":{"login":"vectorselector","id":4980940,"node_id":"MDQ6VXNlcjQ5ODA5NDA=","avatar_url":"https://avatars.githubusercontent.com/u/4980940?v=4","gravatar_id":"","url":"https://api.github.com/users/vectorselector","html_url":"https://github.com/vectorselector","followers_url":"https://api.github.com/users/vectorselector/followers","following_url":"https://api.github.com/users/vectorselector/following{/other_user}","gists_url":"https://api.github.com/users/vectorselector/gists{/gist_id}","starred_url":"https://api.github.com/users/vectorselector/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vectorselector/subscriptions","organizations_url":"https://api.github.com/users/vectorselector/orgs","repos_url":"https://api.github.com/users/vectorselector/repos","events_url":"https://api.github.com/users/vectorselector/events{/privacy}","received_events_url":"https://api.github.com/users/vectorselector/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T12:38:22Z","updated_at":"2020-04-03T12:38:22Z","author_association":"NONE","body":"but no joke, i still have no idea how it works, can't repeat it in ansible, can only suggest \"jiggling the handle randomly\" over and over again, then complaining like I did, at which point the contrarian tricky monster decides to work suddenly. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608410160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608411228","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608411228","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608411228,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQxMTIyOA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T12:40:57Z","updated_at":"2020-04-05T06:14:46Z","author_association":"CONTRIBUTOR","body":"Thanks @davisp and @mikerhodes for your comments. Today I have one commit 1f439c4 which essentially implemented below API spec.\r\n\r\n```\r\nGET /_deleted_dbs - List deleted dbs infos\r\nGET /_deleted_dbs?key=dbName - List specified deleted db infos\r\nPOST /_deleted_dbs - Only accepts the undelete JSON body to *restore* the deleted db\r\nDELETE /_deleted_dbs/DbName?timestamp=2020-01-01T00:00:00 - Remove deleted db\r\n```\r\nFrom the functional set exposed to users, I think that it is similar to what @mikerhodes drafted in [1]. The difference is the API spec. \r\n\r\nFrom user case and implementation's point of view, there are several points I want to mention.\r\n1. GET /_deleted_dbs - List deleted dbs infos\r\nWe directly return dbs info instead of the deleted dbname here. The same case is for `GET /_deleted_dbs?key=dbName`. This is mainly following the approach in `_dbs_info`. I think that most likely user is not only interested in dbname, but also in some detailed information about deleted database. \r\n```\r\n  {\r\n    \"key\": \"db01\",\r\n    \"timestamp\": \"2020-04-03T12:09:15Z\",\r\n    \"value\": {\r\n      \"update_seq\": \"000000000000000000000000\",\r\n      \"doc_del_count\": 0,\r\n      \"doc_count\": 0,\r\n      \"sizes\": {\r\n        \"external\": 2,\r\n        \"views\": 0\r\n      }\r\n    }\r\n```\r\nUser can gradually use the progressive approach like mentioned in [1] to get the detailed information of the deleted db.\r\n```\r\nGET /_deleted_dbs\r\nGET /_deleted_dbs/DbName\r\nGET /_deleted_dbs/DbName/2020-01-01T00:00:00\r\n```\r\nHowever, looks that user most like should review information of the deletion time, doc number, disk size to decide to restore it or permanently delete it.\r\n\r\n2. with regard to \r\n```\r\nGET /_deleted_dbs/DbName\r\nGET /_deleted_dbs?key=DbName\r\n```\r\nIn theory, we can implement both of them to get information of deleted db. @davisp also found one situation where we have to return 200 and [] if the specified db is not in deleted_db list when selecting `GET /_deleted_dbs/DbName`. This is not expected error code. So we switch to `GET /_deleted_dbs?key=DbName`.\r\n\r\nHope this can give some explanation how we are getting to the current status of API spec.  \r\n\r\n[1] https://gist.github.com/mikerhodes/39c66576eee468a5aeaa23c5715aec9a\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608411228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608502908","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608502908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608502908,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODUwMjkwOA==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T15:22:02Z","updated_at":"2020-04-03T15:22:02Z","author_association":"NONE","body":"> `POST /_deleted_dbs` - Only accepts the undelete JSON body to *restore* the deleted db\r\n\r\nCan I see an example of the expected body now? If `undelete` is the only \"action\" for `POST` is there any reason to call it out separately?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608502908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608511710","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608511710","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608511710,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODUxMTcxMA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T15:38:48Z","updated_at":"2020-04-03T15:39:17Z","author_association":"CONTRIBUTOR","body":"> POST /_deleted_dbs - Only accepts the undelete JSON body to restore the deleted db\r\n\r\n> Can I see an example of the expected body now? If undelete is the only \"action\" for POST is there any reason to call it out separately?\r\n\r\nYes, below is one example.\r\n```\r\n{\r\n        \"undelete\": {\r\n                \"source_timestamp\": \"2020-04-01T07:13:42Z\",\r\n                \"source\": \"db01\"\r\n        }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608511710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608527563","html_url":"https://github.com/apache/couchdb/issues/2755#issuecomment-608527563","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2755","id":608527563,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODUyNzU2Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T16:08:58Z","updated_at":"2020-04-03T16:08:58Z","author_association":"MEMBER","body":"@vectorselector As you realised yourself, language like this is **not** welcome here and explicitly against our Code of Conduct.\r\n\r\nIf you are looking for general support with using CouchDB, and want a faster response, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)\r\n\r\nNext time try asking for help _before_ you get frustrated ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608527563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608532116","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608532116","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608532116,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODUzMjExNg==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T16:17:54Z","updated_at":"2020-04-03T16:17:54Z","author_association":"NONE","body":"OK, so now the `POST` can only do an undelete couldn't the body just be:\r\n```\r\n{\r\n\"source_timestamp\": \"2020-04-01T07:13:42Z\",\r\n\"source\": \"db01\",\r\n}\r\n```\r\nThat also removes the awkward naming around `undelete` that I know was bothering some people.\r\n\r\nAlso given\r\n`DELETE /_deleted_dbs/{dbName}`\r\nshouldn't we also\r\n`POST /_deleted_dbs/{dbName}`\r\nsince they are operating on the same resource?\r\n\r\nThen the body would be just (or also with an optional `target`):\r\n```\r\n{\r\n\"source_timestamp\": \"2020-04-01T07:13:42Z\"\r\n}\r\n```\r\n\r\nAlthough I think the parameter name in the body should match that used on the `DELETE` request as well; either both `timestamp` or both `source_timestamp`.\r\n\r\nIt seems like it would be nice to use paths consistently throughout as [@mikerhodes proposed](https://gist.github.com/mikerhodes/39c66576eee468a5aeaa23c5715aec9a), but I can see the rationale for preferring to use `key=dbname` to be consistent with the view-like APIs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608532116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608544648","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608544648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608544648,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU0NDY0OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T16:44:27Z","updated_at":"2020-04-03T16:44:27Z","author_association":"MEMBER","body":"So, apparently I'm the only one that's been assuming that this is a mirror of the `GET _dbs_info` API end point and working from that perspective.\r\n\r\n@mikerhodes I don't think the `_all_dbs` approach is very useful. When would you ever want just a list of database names that have soft deletions or just a list of timestamps? Its RESTy in all the bad ways that lead us to adding another API endpoint that dumps all of that information in a single response like we already had to do for `GET|POST /_dbs_info`.\r\n\r\n@ricellis If we stay with the `POST _deleted_dbs` then I don't think its a good idea to remove the `\"undelete\"` key as the API loses its self-documentation aspect. Plus we'd be hamstrung adding other operations in the future (not that I can think of any). If we want to revert to `POST _undelete` then I'd be fine dropping the JSON key.\r\n\r\nConsistency in the `\"timestamp\"` key is a good idea. I'd vote for `\"timestamp\"` since there's no target timestamp to disambiguate and `DELETE /_deleted_dbs/DbName?source_timestamp=foo` reads awkwardly.\r\n\r\n@jiangphcn I'm can't decide whether you're suggesting we support the `GET /_deleted_dbs/DbName/Timestamp` API or not. I don't think we should add alternative APIs for things that can be accomplished with a single view based API so I would vote against adding them. But you might also saying we don't need them, in which case we're in agreement and you can ignore me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608544648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608548929","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608548929","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608548929,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU0ODkyOQ==","user":{"login":"florianb","id":983507,"node_id":"MDQ6VXNlcjk4MzUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/983507?v=4","gravatar_id":"","url":"https://api.github.com/users/florianb","html_url":"https://github.com/florianb","followers_url":"https://api.github.com/users/florianb/followers","following_url":"https://api.github.com/users/florianb/following{/other_user}","gists_url":"https://api.github.com/users/florianb/gists{/gist_id}","starred_url":"https://api.github.com/users/florianb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florianb/subscriptions","organizations_url":"https://api.github.com/users/florianb/orgs","repos_url":"https://api.github.com/users/florianb/repos","events_url":"https://api.github.com/users/florianb/events{/privacy}","received_events_url":"https://api.github.com/users/florianb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T16:53:09Z","updated_at":"2020-04-03T16:53:09Z","author_association":"NONE","body":"Trying to test the example leads to the following error on my instance:\r\n\r\n```\r\ncouchdb_1  | [info] 2020-04-03T16:48:09.950145Z nonode@nohost <0.5379.0> -------- Starting index update for db: shards/80000000-ffffffff/test.1585932129 idx: _design/test\r\ncouchdb_1  | [error] 2020-04-03T16:48:09.954051Z nonode@nohost emulator -------- Error in process <0.5387.0> with exit value:\r\ncouchdb_1  | {{nocatch,{invalid_json,{5,invalid_string}}},[{couch_util,json_decode,1,[{file,\"src/couch_util.erl\"},{line,505}]},{couch_mrview_updater,merge_results,3,[{file,\"src/couch_mrview_updater.erl\"},{line,245}]},{lists,foldl,3,[{file,\"lists.erl\"},{line,1263}]},{couch_mrview_updater,merge_results,4,[{file,\"src/couch_mrview_updater.erl\"},{line,238}]},{couch_mrview_updater,accumulate_writes,3,[{file,\"src/couch_mrview_updater.erl\"},{line,215}]},{couch_mrview_updater,write_results,2,[{file,\"src/couch_mrview_updater.erl\"},{line,179}]}]}\r\n```\r\n\r\nThis applies to an used Umlaut in **any** string-literal in the view. I am short on time, couldn't test it with different Unicode-Characters or functions.\r\nI use Fauxton to update the view.\r\n\r\n---\r\nTested on hub.docker.com provided `couchdb:latest` 3.0.0.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608548929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608550426","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-608550426","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":608550426,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU1MDQyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T16:56:19Z","updated_at":"2020-04-03T16:56:19Z","author_association":"MEMBER","body":"@iilyak \r\n\r\nI also can't build your branch, either in the CI environment or locally. Here's what I'm doing:\r\n\r\n```\r\nrm -rf couchdb\r\ngit clone https://github.com/cloudant/couchdb\r\ncd couchdb\r\ngit checkout integrate-emilio\r\n./configure --with-curl\r\nmake dist\r\n```\r\n\r\nThis fails in the same way as Jenkins is failing.\r\n\r\nI don't get the same failure from `apache/couchdb:master`.\r\n\r\nAlso you still need to apply the diff I provided in comment.\r\n\r\nPerhaps close this PR and reopen it by doing the branch off of `apache/couchdb` instead of `cloudant/couchdb`? Maybe it's because `cloudant/couchdb:master` is ~1400 commits behind, I don't know. @rnewson might have a better idea.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608550426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608573068","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608573068","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608573068,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU3MzA2OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T17:43:43Z","updated_at":"2020-04-03T17:43:43Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nUnfortunately, this is a known problem with CouchDB + JavaScript + string mutation going way back. We need to document this better.\r\n\r\nInside of CouchDB, we only support 100% valid UTF-8 encoding. JavaScript, in this case, is producing an invalid UTF-8 encoding. You can see this here:\r\n\r\nhttps://gist.github.com/davisp/78035ad6d3be799cbe8bd397e0d0be1f\r\n\r\nIt's unfortunate that JavaScript here is producing invalid UTF-8, but CouchDB is doing the \"right thing\" by rejecting it.\r\n\r\nComment from @davisp :\r\n\r\n> AFAIK JavaScript is hoplessly broken with respect to Unicode because of how it defines strings as 16bit integers and doesn't care about multi-byte representations. This is JavaScript allowing string mutations that produce invalid UTF-8 when encoded as JSON. This has happened before with e.g. string reversal.\r\n\r\nThat JavaScript will happily produce invalid JSON/UTF-8 binaries is sadness, but there's not a lot we can do about this here.\r\n\r\nSo for now, I'm going to leave this open, but tag it as a `wontfix`. I realize this isn't the best approach, and I'm not happy about the result either.\r\n\r\nIf someone with knowledge of the code can suggest a fix or workaround, please feel free to comment. Dogpiling on this issue to complain won't help anyone (and will probably actively discourage anyone from trying to resolve it.)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608573068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608574117","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608574117","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608574117,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU3NDExNw==","user":{"login":"florianb","id":983507,"node_id":"MDQ6VXNlcjk4MzUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/983507?v=4","gravatar_id":"","url":"https://api.github.com/users/florianb","html_url":"https://github.com/florianb","followers_url":"https://api.github.com/users/florianb/followers","following_url":"https://api.github.com/users/florianb/following{/other_user}","gists_url":"https://api.github.com/users/florianb/gists{/gist_id}","starred_url":"https://api.github.com/users/florianb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florianb/subscriptions","organizations_url":"https://api.github.com/users/florianb/orgs","repos_url":"https://api.github.com/users/florianb/repos","events_url":"https://api.github.com/users/florianb/events{/privacy}","received_events_url":"https://api.github.com/users/florianb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T17:46:04Z","updated_at":"2020-04-03T17:46:04Z","author_association":"NONE","body":"@wohali - that's interesting, the same worked with the docker repo of 2.3.1.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608574117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608574861","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608574861","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608574861,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU3NDg2MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T17:47:33Z","updated_at":"2020-04-03T17:47:33Z","author_association":"MEMBER","body":"@florianb I'm largely relaying here what @davisp said in developer chat, so I can't really comment further.\r\n\r\nGoing to remove the tag for now and put this back to `needs-triage`.\r\n\r\n@jiangphcn are you able to investigate at all?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608574861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608579686","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608579686","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608579686,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU3OTY4Ng==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T17:57:20Z","updated_at":"2020-04-03T17:57:20Z","author_association":"MEMBER","body":"I'm working off my 1.8.5 JS shell which is what we would have used for 2.3.1 so I'm not sure how it would have worked if we're thinking the newer SM was an issue.\r\n\r\nDo you have something handy that you can do a quick `JSON.stringify(\"Ã„\".toLowerCase())` where it used to work so we can see if something is changing the behavior (i.e., maybe a locale setting or something)?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608579686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608594814","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608594814","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608594814,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODU5NDgxNA==","user":{"login":"florianb","id":983507,"node_id":"MDQ6VXNlcjk4MzUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/983507?v=4","gravatar_id":"","url":"https://api.github.com/users/florianb","html_url":"https://github.com/florianb","followers_url":"https://api.github.com/users/florianb/followers","following_url":"https://api.github.com/users/florianb/following{/other_user}","gists_url":"https://api.github.com/users/florianb/gists{/gist_id}","starred_url":"https://api.github.com/users/florianb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florianb/subscriptions","organizations_url":"https://api.github.com/users/florianb/orgs","repos_url":"https://api.github.com/users/florianb/repos","events_url":"https://api.github.com/users/florianb/events{/privacy}","received_events_url":"https://api.github.com/users/florianb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T18:31:32Z","updated_at":"2020-04-03T18:36:20Z","author_association":"NONE","body":"I will try to dig deeper - since my error (`invalid_json`/`invalid_string`) is already appearing when adding any string with an Umlaut to the view's source, i could imagine the error happens before the code is parsed by SM.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608594814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608646035","html_url":"https://github.com/apache/couchdb/pull/2666#issuecomment-608646035","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2666","id":608646035,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODY0NjAzNQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T20:35:19Z","updated_at":"2020-04-03T20:35:49Z","author_association":"CONTRIBUTOR","body":"hey @davisp \r\n\r\nI think that you are **not** the only one that's been assuming that this is a mirror of the GET _dbs_info API end point and working from that perspective.  From https://github.com/apache/couchdb/pull/2666/#issuecomment-608411228, you can see that I am for that and implemented with this approach.\r\n\r\nIn addition, I don't support the suggestion about `the GET /_deleted_dbs/DbName/Timestamp API`. As i mentioned before, it looks that user most likely should review information of the deletion time, doc number, disk size to decide to restore it or permanently delete it. It is convenient to return DbInfo one time instead of using the progressive approach like mentioned in [1] to get the detailed information of the deleted db.\r\n```\r\nGET /_deleted_dbs\r\nGET /_deleted_dbs/DbName\r\nGET /_deleted_dbs/DbName/2020-01-01T00:00:00\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608646035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608854287","html_url":"https://github.com/apache/couchdb/issues/2176#issuecomment-608854287","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2176","id":608854287,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODg1NDI4Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T23:57:29Z","updated_at":"2020-04-03T23:57:29Z","author_association":"MEMBER","body":"@abyss143 Any open issue is available for someone to work on. Feel free to submit a PR!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608854287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608997091","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608997091","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608997091,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODk5NzA5MQ==","user":{"login":"Swaser","id":5602969,"node_id":"MDQ6VXNlcjU2MDI5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/5602969?v=4","gravatar_id":"","url":"https://api.github.com/users/Swaser","html_url":"https://github.com/Swaser","followers_url":"https://api.github.com/users/Swaser/followers","following_url":"https://api.github.com/users/Swaser/following{/other_user}","gists_url":"https://api.github.com/users/Swaser/gists{/gist_id}","starred_url":"https://api.github.com/users/Swaser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Swaser/subscriptions","organizations_url":"https://api.github.com/users/Swaser/orgs","repos_url":"https://api.github.com/users/Swaser/repos","events_url":"https://api.github.com/users/Swaser/events{/privacy}","received_events_url":"https://api.github.com/users/Swaser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-04T08:45:14Z","updated_at":"2020-04-04T08:45:14Z","author_association":"NONE","body":"I don't know exactly what you mean by saying there's an error by adding any string with an Umlaut, but this code here works:\r\n```\r\nfunction (doc) {\r\n  emit('Ã„',1);\r\n}\r\n```\r\nso it is really the Javascript function toLowerCase() that produces the invalid string.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608997091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608997719","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608997719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608997719,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODk5NzcxOQ==","user":{"login":"florianb","id":983507,"node_id":"MDQ6VXNlcjk4MzUwNw==","avatar_url":"https://avatars.githubusercontent.com/u/983507?v=4","gravatar_id":"","url":"https://api.github.com/users/florianb","html_url":"https://github.com/florianb","followers_url":"https://api.github.com/users/florianb/followers","following_url":"https://api.github.com/users/florianb/following{/other_user}","gists_url":"https://api.github.com/users/florianb/gists{/gist_id}","starred_url":"https://api.github.com/users/florianb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/florianb/subscriptions","organizations_url":"https://api.github.com/users/florianb/orgs","repos_url":"https://api.github.com/users/florianb/repos","events_url":"https://api.github.com/users/florianb/events{/privacy}","received_events_url":"https://api.github.com/users/florianb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-04T08:50:10Z","updated_at":"2020-04-04T08:50:10Z","author_association":"NONE","body":"That's right - it crashes when adding `.toLowerCase()` - i am still trying to collect more information.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608997719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608997889","html_url":"https://github.com/apache/couchdb/issues/2756#issuecomment-608997889","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2756","id":608997889,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODk5Nzg4OQ==","user":{"login":"Swaser","id":5602969,"node_id":"MDQ6VXNlcjU2MDI5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/5602969?v=4","gravatar_id":"","url":"https://api.github.com/users/Swaser","html_url":"https://github.com/Swaser","followers_url":"https://api.github.com/users/Swaser/followers","following_url":"https://api.github.com/users/Swaser/following{/other_user}","gists_url":"https://api.github.com/users/Swaser/gists{/gist_id}","starred_url":"https://api.github.com/users/Swaser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Swaser/subscriptions","organizations_url":"https://api.github.com/users/Swaser/orgs","repos_url":"https://api.github.com/users/Swaser/repos","events_url":"https://api.github.com/users/Swaser/events{/privacy}","received_events_url":"https://api.github.com/users/Swaser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-04T08:51:38Z","updated_at":"2020-04-04T08:51:38Z","author_association":"NONE","body":"Tell me, if I can help.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/608997889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/609001405","html_url":"https://github.com/apache/couchdb/pull/2759#issuecomment-609001405","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2759","id":609001405,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTAwMTQwNQ==","user":{"login":"iblislin","id":761623,"node_id":"MDQ6VXNlcjc2MTYyMw==","avatar_url":"https://avatars.githubusercontent.com/u/761623?v=4","gravatar_id":"","url":"https://api.github.com/users/iblislin","html_url":"https://github.com/iblislin","followers_url":"https://api.github.com/users/iblislin/followers","following_url":"https://api.github.com/users/iblislin/following{/other_user}","gists_url":"https://api.github.com/users/iblislin/gists{/gist_id}","starred_url":"https://api.github.com/users/iblislin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iblislin/subscriptions","organizations_url":"https://api.github.com/users/iblislin/orgs","repos_url":"https://api.github.com/users/iblislin/repos","events_url":"https://api.github.com/users/iblislin/events{/privacy}","received_events_url":"https://api.github.com/users/iblislin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-04T09:21:42Z","updated_at":"2020-04-04T09:21:42Z","author_association":"MEMBER","body":"The log is here\r\n```\r\n[error] 2020-04-04T08:58:10.500532Z node1@127.0.0.1 <0.698.0> a72702703a req_err(4053083524) timeout : The request could not be\r\n processed in a reasonable amount of time.                                                                                     \r\n    [<<\"gen_server:call/2 L215\">>,<<\"couch_query_servers:proc_prompt/2 L520\">>,<<\"couch_mrview_show:send_list_row/2 L279\">>,<<\"\r\nfabric_view:maybe_send_row/1 L132\">>,<<\"rexi_utils:process_mailbox/6 L55\">>,<<\"fabric_view_map:go/6 L81\">>,<<\"fabric_view_map:g\r\no/8 L44\">>,<<\"couch_query_servers:with_ddoc_proc/2 L514\">>]                                                                    \r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/609001405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/609076183","html_url":"https://github.com/apache/couchdb/issues/1545#issuecomment-609076183","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1545","id":609076183,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTA3NjE4Mw==","user":{"login":"andreheringer","id":23155300,"node_id":"MDQ6VXNlcjIzMTU1MzAw","avatar_url":"https://avatars.githubusercontent.com/u/23155300?v=4","gravatar_id":"","url":"https://api.github.com/users/andreheringer","html_url":"https://github.com/andreheringer","followers_url":"https://api.github.com/users/andreheringer/followers","following_url":"https://api.github.com/users/andreheringer/following{/other_user}","gists_url":"https://api.github.com/users/andreheringer/gists{/gist_id}","starred_url":"https://api.github.com/users/andreheringer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreheringer/subscriptions","organizations_url":"https://api.github.com/users/andreheringer/orgs","repos_url":"https://api.github.com/users/andreheringer/repos","events_url":"https://api.github.com/users/andreheringer/events{/privacy}","received_events_url":"https://api.github.com/users/andreheringer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-04T19:15:44Z","updated_at":"2020-04-04T19:15:44Z","author_association":"NONE","body":"Hi, I'm experiencing the same behaviour described above, but on Fedora 31. Runnig the command `sudo adduser --system --home /usr/local/var/lib/couchdb --no-create-home --shell /bin/bash --group --gecos \"CouchDB Administrator\" couchdb`\r\n\r\nReturns \"group --gecos does not exists\"\r\n\r\nAny ideias? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/609076183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/609102878","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-609102878","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":609102878,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTEwMjg3OA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-04T23:18:11Z","updated_at":"2020-04-04T23:18:11Z","author_association":"CONTRIBUTOR","body":"Possibly of interest: https://medium.com/@elbrujohalcon/are-formatters-better-than-linters-cbab91189be3","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/609102878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]