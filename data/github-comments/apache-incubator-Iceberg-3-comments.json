[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461123298","html_url":"https://github.com/apache/iceberg/pull/87#issuecomment-461123298","issue_url":"https://api.github.com/repos/apache/iceberg/issues/87","id":461123298,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTEyMzI5OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T18:00:56Z","updated_at":"2019-02-06T18:00:56Z","author_association":"CONTRIBUTOR","body":"I still need a committer +1 on this since the community prefers review-then-commit. I'll ping some people to get reviews. Thanks for bumping this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461123298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461210314","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-461210314","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":461210314,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTIxMDMxNA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T22:17:53Z","updated_at":"2019-02-06T22:17:53Z","author_association":"CONTRIBUTOR","body":"@rdblue, I spent some time today looking into it. I have a few questions\r\n-  Is this feature only meant for Avro datasets/files?\r\n-  Why do we need to store a table level mapping when the table's [Iceberg] schema may already have field ids mapped to names?\r\n \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461210314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461211206","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-461211206","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":461211206,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTIxMTIwNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T22:21:01Z","updated_at":"2019-02-06T22:21:01Z","author_association":"CONTRIBUTOR","body":"This is for mapping external schemas into Iceberg. Basically adding Iceberg's IDs during conversion. This could be done for any format. There's code for \"fallback\" in Parquet that does this using the column ordinal, which is how we read old Parquet data.\r\n\r\nThis particular issue is to add a mapping for Avro, which uses names to resolve columns. This is useful for data coming from an external writer that can write Avro schemas, but doesn't have an Iceberg schema.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461211206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461238694","html_url":"https://github.com/apache/iceberg/pull/87#issuecomment-461238694","issue_url":"https://api.github.com/repos/apache/iceberg/issues/87","id":461238694,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTIzODY5NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T00:05:53Z","updated_at":"2019-02-07T00:05:53Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing this, everyone!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461238694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461240336","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-461240336","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":461240336,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTI0MDMzNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T00:12:59Z","updated_at":"2019-02-07T00:12:59Z","author_association":"CONTRIBUTOR","body":"> Why do we need to store a table level mapping when the table's [Iceberg] schema may already have field ids mapped to names?\r\n\r\nIceberg names are not necessarily the names used by the writer. Avro coming from Kafka, for example, allows renaming a column. You can still read older data because Avro contains an Alias for it. If we only used Iceberg's current name for a column, a change like this would cause Iceberg to start ignoring records.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461240336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461827459","html_url":"https://github.com/apache/iceberg/pull/85#issuecomment-461827459","issue_url":"https://api.github.com/repos/apache/iceberg/issues/85","id":461827459,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTgyNzQ1OQ==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-08T14:52:05Z","updated_at":"2019-02-08T14:52:05Z","author_association":"CONTRIBUTOR","body":"Addressed CR comments so far.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461827459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461926150","html_url":"https://github.com/apache/iceberg/pull/85#issuecomment-461926150","issue_url":"https://api.github.com/repos/apache/iceberg/issues/85","id":461926150,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTkyNjE1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-08T19:53:11Z","updated_at":"2019-02-08T19:53:11Z","author_association":"CONTRIBUTOR","body":"Looks good. I caught just one thing that I missed last time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461926150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461936572","html_url":"https://github.com/apache/iceberg/pull/89#issuecomment-461936572","issue_url":"https://api.github.com/repos/apache/iceberg/issues/89","id":461936572,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTkzNjU3Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-08T20:29:06Z","updated_at":"2019-02-08T20:29:06Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @xabriel! I haven't replied yet because I'm trying to debate between approaches to this problem.\r\n\r\nThere are two ways to go:\r\n1. Add a case sensitivity flag to all the cases that end up using a binder, like this PR.\r\n2. Requires that predicates passed to these evaluators are already bound.\r\n\r\nI'm not sure which is the right way to go. There are quiet a few paths changed by this, and most of them are duplicating work that could be done before passing an expression in. Passing a bound expression would be safe because the bound expression visitor [throws an exception](https://github.com/apache/incubator-iceberg/blob/master/api/src/main/java/com/netflix/iceberg/expressions/ExpressionVisitors.java#L126) when it hits an unbound predicate. Passing in a bound predicate means we don't need to pass options for expression binding in so many places.\r\n\r\nThe drawback is that these classes are less friendly to callers. Instead of preparing predicates as needed, they would throw runtime exceptions when the predicates don't meet some expectation. I think tests would cover all the cases, but it would be more difficult for people to work with.\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/461936572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462033240","html_url":"https://github.com/apache/iceberg/pull/63#issuecomment-462033240","issue_url":"https://api.github.com/repos/apache/iceberg/issues/63","id":462033240,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjAzMzI0MA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-09T10:39:58Z","updated_at":"2019-02-09T10:39:58Z","author_association":"CONTRIBUTOR","body":"We tested this change locally and did not notice any issues so far. It would be nice to see this merged once @mccheah's comments are addressed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462033240/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462033821","html_url":"https://github.com/apache/iceberg/pull/74#issuecomment-462033821","issue_url":"https://api.github.com/repos/apache/iceberg/issues/74","id":462033821,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjAzMzgyMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-09T10:50:07Z","updated_at":"2019-02-09T10:50:07Z","author_association":"CONTRIBUTOR","body":"This change LGTM. The logic doesn't seem to be computationally expensive even though we might need to iterate through all added/removed files. So, I do not think it will significantly impact the write performance but will definitely give benefits later on.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462033821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462154541","html_url":"https://github.com/apache/iceberg/pull/75#issuecomment-462154541","issue_url":"https://api.github.com/repos/apache/iceberg/issues/75","id":462154541,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjE1NDU0MQ==","user":{"login":"renato2099","id":1325916,"node_id":"MDQ6VXNlcjEzMjU5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1325916?v=4","gravatar_id":"","url":"https://api.github.com/users/renato2099","html_url":"https://github.com/renato2099","followers_url":"https://api.github.com/users/renato2099/followers","following_url":"https://api.github.com/users/renato2099/following{/other_user}","gists_url":"https://api.github.com/users/renato2099/gists{/gist_id}","starred_url":"https://api.github.com/users/renato2099/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renato2099/subscriptions","organizations_url":"https://api.github.com/users/renato2099/orgs","repos_url":"https://api.github.com/users/renato2099/repos","events_url":"https://api.github.com/users/renato2099/events{/privacy}","received_events_url":"https://api.github.com/users/renato2099/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-10T17:39:56Z","updated_at":"2019-02-10T17:39:56Z","author_association":"CONTRIBUTOR","body":"Hey @rdblue,\r\n\r\nSorry for creating something else I didn't need to, well at least now I know how to do transformations :)\r\n So I updated one transformation, namely the Bucket, but I don't know how this would be done for others like Dates for example. I think that for the `Identity transform` there is no need to update it as it will just apply the predicate anyway. Thanks a lot for the pointers and help @rdblue !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462154541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462429555","html_url":"https://github.com/apache/iceberg/pull/90#issuecomment-462429555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/90","id":462429555,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjQyOTU1NQ==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-11T18:01:22Z","updated_at":"2019-02-11T18:01:22Z","author_association":"CONTRIBUTOR","body":"+1 LGTM","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462429555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462504839","html_url":"https://github.com/apache/iceberg/pull/89#issuecomment-462504839","issue_url":"https://api.github.com/repos/apache/iceberg/issues/89","id":462504839,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MjUwNDgzOQ==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-11T21:38:24Z","updated_at":"2019-02-11T21:38:24Z","author_association":"CONTRIBUTOR","body":"> There are quiet a few paths changed by this, and most of them are duplicating work that could be done before passing an expression in.\r\n\r\nAgreed.\r\n\r\n> Passing in a bound predicate means we don't need to pass options for expression binding in so many places.\r\n\r\nAgreed as well.\r\n\r\nStill, I tend to side with the approach of this PR. Here is my rationale:\r\n\r\n**What refactoring would yield more cohesion and less coupling?**\r\n\r\nIn this PR's approach, the caller only needs to know how to pass thru a variable, to be used as the callee sees fit. In the alternate, the caller now is in the business of binding, even though it is just passing thru the `Expression` object.\r\n\r\nI also think that, in future, there may be other parameters that we will want to pass down to enhance `Evaluator`s. At that moment, we could upgrade `caseSensitive` flag to be an object, say: `EvaluatorParams`, that would contain `caseSensitive`, and whatever else we find we need. In that case, should the caller be in the business of knowing how to apply each and every `EvaluatorParam` just to maintain the interface intact, or should the caller just pass it thru as another variable?\r\n\r\nSo, to me, with approach on this PR, even though verbose, we have less coupling by just passing thru the one flag, and more cohesion later on when, inevitably, we find other contextual flags we will need to pass down.\r\n\r\n( On a side note, whether we go with approach in this PR or alternate, we would still need to pass `caseSensitive` to the other classes: `TableScan`, `FilteredManifest`, and the Spark `Reader`. Not in this PR, but I presume we'd need it in the Presto Reader as well. )\r\n\r\n\r\nLet me know if this rationale makes sense @rdblue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462504839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462750751","html_url":"https://github.com/apache/iceberg/pull/91#issuecomment-462750751","issue_url":"https://api.github.com/repos/apache/iceberg/issues/91","id":462750751,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Mjc1MDc1MQ==","user":{"login":"fbocse","id":559272,"node_id":"MDQ6VXNlcjU1OTI3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/559272?v=4","gravatar_id":"","url":"https://api.github.com/users/fbocse","html_url":"https://github.com/fbocse","followers_url":"https://api.github.com/users/fbocse/followers","following_url":"https://api.github.com/users/fbocse/following{/other_user}","gists_url":"https://api.github.com/users/fbocse/gists{/gist_id}","starred_url":"https://api.github.com/users/fbocse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbocse/subscriptions","organizations_url":"https://api.github.com/users/fbocse/orgs","repos_url":"https://api.github.com/users/fbocse/repos","events_url":"https://api.github.com/users/fbocse/events{/privacy}","received_events_url":"https://api.github.com/users/fbocse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-12T13:03:05Z","updated_at":"2019-02-12T13:03:34Z","author_association":"CONTRIBUTOR","body":"@rdblue I'm following up on your initial review and basically dropping the original change proposal, that was a bit naive. Since I believe that initially I've greatly underestimated the task at hand I wanted to ask whether you consider the current state of the PR as worth following up on (headed to a viable solution)? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/462750751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/463456241","html_url":"https://github.com/apache/iceberg/pull/73#issuecomment-463456241","issue_url":"https://api.github.com/repos/apache/iceberg/issues/73","id":463456241,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzQ1NjI0MQ==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-14T02:07:19Z","updated_at":"2019-02-14T02:07:19Z","author_association":"CONTRIBUTOR","body":"Superceded by https://github.com/apache/incubator-iceberg/pull/87","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/463456241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/463722362","html_url":"https://github.com/apache/iceberg/pull/85#issuecomment-463722362","issue_url":"https://api.github.com/repos/apache/iceberg/issues/85","id":463722362,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MzcyMjM2Mg==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-14T17:46:16Z","updated_at":"2019-02-14T17:46:16Z","author_association":"CONTRIBUTOR","body":"Whoops I missed a few CRs, will address","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/463722362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464033182","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-464033182","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":464033182,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDAzMzE4Mg==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-15T12:32:47Z","updated_at":"2019-02-15T12:32:47Z","author_association":"CONTRIBUTOR","body":"I'm still trying to find root cause but at the outset this behavior seems incorrect. Will loop back with more findings.  Iceberg should at least let client handle the filtering (and not fail) or better still push down the predicate. \r\n\r\nIf folks feel this is indeed a valid issue, will work on a proposal to fix this. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464033182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464180009","html_url":"https://github.com/apache/iceberg/pull/85#issuecomment-464180009","issue_url":"https://api.github.com/repos/apache/iceberg/issues/85","id":464180009,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDE4MDAwOQ==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-15T19:58:58Z","updated_at":"2019-02-15T19:58:58Z","author_association":"CONTRIBUTOR","body":"Ok the last comments have been addressed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464180009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464302986","html_url":"https://github.com/apache/iceberg/issues/92#issuecomment-464302986","issue_url":"https://api.github.com/repos/apache/iceberg/issues/92","id":464302986,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDMwMjk4Ng==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-16T07:12:28Z","updated_at":"2019-02-16T08:36:41Z","author_association":"CONTRIBUTOR","body":"@fbocse I just attempted to reproduce this issue on my macbook with no success. I have never experienced this issue, but I've also never hived much outside of a real hadoop cluster.\r\n\r\nTLDR: You might have already tried this, but have you tried `./gradlew clean`? \r\n\r\nI had hive 2.x installed locally, but HIVE_HOME was not set. I ran `./gradlew test` and everything succeeded. I then `brew upgrade hive` to ensure I was on the same version as you and then set HIVE_HOME to attempt to replicate this.\r\n```\r\n> brew upgrade hive\r\n.... get coffee\r\n> hive --version\r\n\r\n# Manually setting it as homebrew install didn't set it for me.\r\n> HIVE_HOME=/usr/local/bin/hive\r\n> echo $HIVE_HOME\r\n/usr/local/bin/hive\r\n> ls -las $HIVE_HOME\r\n.... /usr/local/bin/hive -> ../Cellar/hive/3.1.1/bin/hive\r\n\r\n# Verified we're on the same version\r\n> hive --version\r\nSLF4J: Typical classpath shenanigans.\r\n....\r\nHive 3.1.1\r\nGit git://daijymacpro-2.local/Users/daijy/commit/hive -r f4e0529634b6231a0072295da48af466cf2f10b7\r\nCompiled by daijy on Tue Oct 23 17:19:24 PDT 2018\r\nFrom source with checksum 6deca5a8401bbb6c6b49898be6fcb80e\r\n\r\n# Check that all of my previous tests passed\r\n> ./gradlew test\r\n33 actionable tasks: 33 up-to-date\r\n\r\n# Clean and retest everything, \r\n> echo $HIVE_HOME && ./gradlew clean test\r\n/usr/local/bin/hive\r\n\r\n# Some gradle output, which included 4/4 passing tests from :iceberg-hive\r\n> Configure project : ...\r\n... pet the dog ....\r\nBUILD SUCCESSFUL in 3m 32s\r\n33 actionable tasks: 33 executed\r\n```\r\n\r\nThis might be due to differences in our environments, such as in how our hive installations were performed etc. But a good old `./gradlew clean` might help out if you haven't tried it. I'm not super familiar with gradle myself (mostly I've used pants or bazel), so ignore this advice if it was painfully obvious already :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464302986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464315562","html_url":"https://github.com/apache/iceberg/issues/92#issuecomment-464315562","issue_url":"https://api.github.com/repos/apache/iceberg/issues/92","id":464315562,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDMxNTU2Mg==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-16T08:35:54Z","updated_at":"2019-02-16T08:38:41Z","author_association":"CONTRIBUTOR","body":"Is it possible that you've edited your hive-site.xml? I know that there are some datanucleus configurations in hive-site.xml.\r\n\r\nFor completeness sake, I've verified also that my local hive installation is working. I'm using a local mysql as my metastore backend (as configured in hadoop's hive-site.xml)\r\n\r\n```bash\r\n> hive -e \"create table test_table(c1 string);\"\r\n....\r\nOK\r\nTime taken: 1.526 seconds\r\n\r\n> hive -e \"show tables;\"\r\n...\r\nOK\r\ntest_table\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464315562/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464699643","html_url":"https://github.com/apache/iceberg/issues/77#issuecomment-464699643","issue_url":"https://api.github.com/repos/apache/iceberg/issues/77","id":464699643,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDY5OTY0Mw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T11:39:03Z","updated_at":"2019-02-18T11:39:03Z","author_association":"CONTRIBUTOR","body":"Once I implemented this locally, I started to wonder if we should add the opening cost to every file.\r\n\r\nFor example, we might have two Parquet files 62MB each. Rigth now, Iceberg will pack them into one bin, which is the right thing to do. If we simply add 4MB to the weight of each file, those files will be placed into separate bins. I am not sure it is a big deal, but I think having one bin is better in this case.\r\n\r\nAs our main goal is to avoid straggler tasks, we can add the cost of opening to files that are smaller than a configurable threshold. Let's say 10 MB.\r\n\r\nAlso, Spark only adds the cost of opening when a file is already assigned to a partition. For example, if we have a bin with one 62 MB file, we will still place the second file into the same bin as 62 + 4 + 62 = 128.\r\n\r\n@rdblue @mccheah what do you think?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464699643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464754309","html_url":"https://github.com/apache/iceberg/pull/90#issuecomment-464754309","issue_url":"https://api.github.com/repos/apache/iceberg/issues/90","id":464754309,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDc1NDMwOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T14:38:42Z","updated_at":"2019-02-18T14:38:42Z","author_association":"CONTRIBUTOR","body":"Has anybody experienced the exception below? One way to reproduce this is to run `TestParquetWrite`.\r\n\r\n```\r\n[Finalizer] WARN com.netflix.iceberg.hadoop.HadoopStreams - Unclosed input stream created by:\r\n\tcom.netflix.iceberg.hadoop.HadoopStreams$HadoopSeekableInputStream.<init>(HadoopStreams.java:78)\r\n\tcom.netflix.iceberg.hadoop.HadoopStreams.wrap(HadoopStreams.java:53)\r\n\tcom.netflix.iceberg.hadoop.HadoopInputFile.newStream(HadoopInputFile.java:125)\r\n\tcom.netflix.iceberg.avro.AvroIterable.newFileReader(AvroIterable.java:95)\r\n\tcom.netflix.iceberg.avro.AvroIterable.iterator(AvroIterable.java:77)\r\n\tcom.google.common.collect.Iterables$6.iterator(Iterables.java:585)\r\n\tcom.google.common.collect.Iterables$8.iterator(Iterables.java:709)\r\n\tcom.netflix.iceberg.ManifestReader.iterator(ManifestReader.java:225)\r\n\tcom.netflix.iceberg.FilteredManifest.iterator(FilteredManifest.java:124)\r\n\tcom.google.common.collect.Iterables$8.iterator(Iterables.java:709)\r\n\tcom.google.common.collect.Iterables$3.transform(Iterables.java:508)\r\n\tcom.google.common.collect.Iterables$3.transform(Iterables.java:505)\r\n\tcom.google.common.collect.TransformedIterator.next(TransformedIterator.java:48)\r\n\tcom.google.common.collect.Iterators$5.hasNext(Iterators.java:543)\r\n\tcom.netflix.iceberg.util.BinPacking$PackingIterator.hasNext(BinPacking.java:91)\r\n\tcom.netflix.iceberg.io.CloseableIterable$4$1.hasNext(CloseableIterable.java:92)\r\n\tcom.google.common.collect.Iterators.addAll(Iterators.java:356)\r\n\tcom.google.common.collect.Lists.newArrayList(Lists.java:147)\r\n\tcom.google.common.collect.Lists.newArrayList(Lists.java:129)\r\n\tcom.netflix.iceberg.spark.source.Reader.tasks(Reader.java:209)\r\n\tcom.netflix.iceberg.spark.source.Reader.planInputPartitions(Reader.java:135)\r\n\torg.apache.spark.sql.execution.datasources.v2.DataSourceV2ScanExec.partitions$lzycompute(DataSourceV2ScanExec.scala:76)\r\n...\r\n```\r\n\r\nIt seems `ManifestReader` is not closed properly in some cases. `ManifestReader` is `CloseableGroup` and we add `AvroIterable` to the list of closeables. However, `ManifestReader$close` is not called.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464754309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464769205","html_url":"https://github.com/apache/iceberg/pull/90#issuecomment-464769205","issue_url":"https://api.github.com/repos/apache/iceberg/issues/90","id":464769205,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDc2OTIwNQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T15:14:33Z","updated_at":"2019-02-18T15:14:33Z","author_association":"CONTRIBUTOR","body":"My suspicion is that we have a problem in `BaseTableScan$planFiles`. Specifically, this piece:\r\n\r\n```\r\n      ConcurrentLinkedQueue<Closeable> toClose = new ConcurrentLinkedQueue<>();\r\n      Iterable<Iterable<FileScanTask>> readers = Iterables.transform(\r\n          matchingManifests,\r\n          manifest -> {\r\n            ManifestReader reader = ManifestReader.read(ops.io().newInputFile(manifest.path()));\r\n            toClose.add(reader);\r\n            String schemaString = SchemaParser.toJson(reader.spec().schema());\r\n            String specString = PartitionSpecParser.toJson(reader.spec());\r\n            ResidualEvaluator residuals = new ResidualEvaluator(reader.spec(), rowFilter);\r\n            return Iterables.transform(\r\n                reader.filterRows(rowFilter).select(SNAPSHOT_COLUMNS),\r\n                file -> new BaseFileScanTask(file, schemaString, specString, residuals)\r\n            );\r\n          });\r\n\r\n      if (PLAN_SCANS_WITH_WORKER_POOL && snapshot.manifests().size() > 1) {\r\n        return CloseableIterable.combine(\r\n            new ParallelIterable<>(readers, getWorkerPool()),\r\n            toClose);\r\n      } else {\r\n        return CloseableIterable.combine(Iterables.concat(readers), toClose);\r\n      }\r\n```\r\n\r\nThe closure that adds `ManifestReader reader` to `toClose` is lazy. Hence, `toClose` is empty when we return `CloseableIterable.combine(Iterables.concat(readers), toClose)`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464769205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464802436","html_url":"https://github.com/apache/iceberg/pull/90#issuecomment-464802436","issue_url":"https://api.github.com/repos/apache/iceberg/issues/90","id":464802436,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDgwMjQzNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T16:36:14Z","updated_at":"2019-02-18T16:36:14Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, those code paths are what this is intended to catch. Could you open an issue or PR for this one?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464802436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464807195","html_url":"https://github.com/apache/iceberg/issues/77#issuecomment-464807195","issue_url":"https://api.github.com/repos/apache/iceberg/issues/77","id":464807195,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDgwNzE5NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T16:50:05Z","updated_at":"2019-02-18T16:50:05Z","author_association":"CONTRIBUTOR","body":"I'm okay with either option. I think it is hard to know which one is going to be better, so I would opt for a simple solution.\r\n\r\nI think a simple one is much like the threshold you proposed. Could we implement a minimum weight for a file? That would be easy.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464807195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464830101","html_url":"https://github.com/apache/iceberg/pull/90#issuecomment-464830101","issue_url":"https://api.github.com/repos/apache/iceberg/issues/90","id":464830101,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDgzMDEwMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T18:03:24Z","updated_at":"2019-02-18T18:03:24Z","author_association":"CONTRIBUTOR","body":"Let's tack it in https://github.com/apache/incubator-iceberg/issues/104. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464830101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464859230","html_url":"https://github.com/apache/iceberg/issues/56#issuecomment-464859230","issue_url":"https://api.github.com/repos/apache/iceberg/issues/56","id":464859230,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDg1OTIzMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T20:01:27Z","updated_at":"2019-02-18T20:01:27Z","author_association":"CONTRIBUTOR","body":"Name was approved.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464859230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464885490","html_url":"https://github.com/apache/iceberg/pull/105#issuecomment-464885490","issue_url":"https://api.github.com/repos/apache/iceberg/issues/105","id":464885490,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDg4NTQ5MA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T21:27:01Z","updated_at":"2019-02-18T21:27:01Z","author_association":"CONTRIBUTOR","body":"@rdblue @mccheah @danielcweeks Initially, I created these benchmarks to answer a few questions I had. Let's see if they make sense upstream. I found them quite useful.\r\n\r\nThis implementation is just one potential way of doing this. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464885490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464903726","html_url":"https://github.com/apache/iceberg/pull/75#issuecomment-464903726","issue_url":"https://api.github.com/repos/apache/iceberg/issues/75","id":464903726,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDkwMzcyNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T22:23:52Z","updated_at":"2019-02-18T22:23:52Z","author_association":"CONTRIBUTOR","body":"@renato2099, have another look at your bucket projection. It isn't correct. There is no relationship between hash values of two strings and whether the strings have the same prefix.\r\n\r\nI agree with your logic about the identity transform. The date and timestamp transforms can't be applied to a string column, so no need to update those. The only remaining transform is truncate, which needs to be handled.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464903726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464904672","html_url":"https://github.com/apache/iceberg/issues/104#issuecomment-464904672","issue_url":"https://api.github.com/repos/apache/iceberg/issues/104","id":464904672,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NDkwNDY3Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-18T22:26:55Z","updated_at":"2019-02-18T22:26:55Z","author_association":"CONTRIBUTOR","body":"The tasks and the closeable iterable should maintain a reference to that queue, so I don't think that is the problem. Any open file should go into that queue and get cleaned up when close is eventually called because close happens later, although this isn't guaranteed because they are called in separate threads so there is a race condition.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/464904672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465026220","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-465026220","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":465026220,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTAyNjIyMA==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-19T08:00:41Z","updated_at":"2019-02-20T06:38:15Z","author_association":"CONTRIBUTOR","body":"# Vanilla Spark Parquet reader plan\r\n```\r\n== Physical Plan ==\r\n*(1) Project [age#428, name#429, friends#430, location#431]\r\n+- *(1) Filter (isnotnull(friends#430) && (friends#430[Josh] = 10))\r\n   +- *(1) FileScan parquet [age#428,name#429,friends#430,location#431] Batched: false, Format: Parquet, Location: InMemoryFileIndex[file:/usr/local/spark/test/parquet-people-complex], PartitionFilters: [], PushedFilters: [IsNotNull(friends)], ReadSchema: struct<age:int,name:string,friends:map<string,int>,location:struct<lat:int,lon:int>>\r\n```\r\n\r\n#  Iceberg Plan\r\n```\r\n== Physical Plan ==\r\n*(1) Project [age#33, name#34, friends#35]\r\n+- *(1) Filter ((friends#35[Josh] = 10) && isnotnull(friends#35))\r\n   +- *(1) ScanV2 iceberg[age#33, name#34, friends#35] (Filters: [isnotnull(friends#35)], Options: [path=iceberg-people-complex2,paths=[]])\r\n```\r\n\r\n# Couple of points :\r\n1)  Complex predicate is not passed down to the Scan level in both plans. The complex predicate is termed \"non-translateable\" by DataSourceStrategy.translateFilter()  [1] when trying to convert Catalyst expression to data source filter. Ryan & Xabriel had a discussion earlier on this list about Spark not passing expressions to data source (in certain cases). This might be related to that. Maybe a path forward is to fix that translation in Spark so that Iceberg Filter conversion has a chance to handle complex type. Currently Iceberg Reader code is unaware of that filter.\r\n\r\n2) Although both vanilla Spark and Iceberg handle complex type predicates post scan, this regression is caused by post scan filtering not returning results in the Iceberg case. I think post scan filtering is unable to handle Iceberg format. So if 1) is not the way forward then the alternative way is to fix this in the post scan filtering.\r\n\r\n\r\n[1] - https://github.com/apache/spark/blob/master/sql/core/src/main/scala/org/apache/spark/sql/execution/datasources/DataSourceStrategy.scala#L450","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465026220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465262194","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-465262194","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":465262194,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTI2MjE5NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-19T18:51:32Z","updated_at":"2019-02-19T18:51:32Z","author_association":"CONTRIBUTOR","body":"@prodeezy, can you wrap the fixed-width sections with 3 back-ticks so they display properly? It's hard to read this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465262194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465345346","html_url":"https://github.com/apache/iceberg/pull/107#issuecomment-465345346","issue_url":"https://api.github.com/repos/apache/iceberg/issues/107","id":465345346,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTM0NTM0Ng==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-19T22:55:37Z","updated_at":"2019-02-19T22:55:37Z","author_association":"CONTRIBUTOR","body":"@rdblue this follows up https://github.com/apache/incubator-iceberg/pull/85","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465345346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465445382","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-465445382","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":465445382,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTQ0NTM4Mg==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-20T06:38:31Z","updated_at":"2019-02-20T06:38:31Z","author_association":"CONTRIBUTOR","body":"@rdblue Sorry bout that. Done. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465445382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465452378","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-465452378","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":465452378,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTQ1MjM3OA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-20T07:07:09Z","updated_at":"2019-02-25T06:39:12Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue  for that information. Here's a rough spec of what we can do :-\r\n1. Update `Avro.ReadBuilder` to take in a `Map` of field names to fields ids which is passed on to `ProjectionDatumReader`.\r\n1. In `ProjectionDatumReader` if the passed in `fileSchema` does not have any field ids, we use a modified `SchemaToType` class to assign ids to fields with the help of the mapping.\r\n1. We'll need to update `SchemaToType` to take in a function which can either allocate increasing ids (current default behavior) or assign ids using the map.\r\n1. Reconvert the returned iceberg schema (`SchemaToType` returns `Type`) to Avro using AvroSchemaUtil, which can then be passed to `AvroSchemaUtil#buildAvroProjection`.\r\n\r\n**Updating `SchemaToType`**\r\nIn order to write a default mapping function to emulate current behavior in SchemaToType. I need to clear up some doubts around how are we currently allocating ids.\r\n\r\nIn `SchemaToType`, when called with table schema or record - their top level fields are assigned ids starting from 0, when called with other type -- map, list etc, ids are assigned starting from 1. We can possibly write in a function to emulate the current behavior, or do u see scope here to simplify and only assign ever increasing ids, without caring about whether the top level fields of a schema get ids starting from 0.\r\n\r\nFor the new function which uses a map to assign ids to fields, I presume for other types - map, list etc we can use non conflicting increasing ids to assign to each field in these container types, as they will not be specified in our mapping.\r\n\r\n**Possible Alternative**\r\nAnother possible alternative here could be that we don't modify `SchemaToType` , but use it nonetheless to generate an Iceberg schema.  We define a new method - `assignIds`, under `TypeUtil` similar to `TypeUtil#assignFreshIds(Schema, TypeUtil.NextID)` which can take that [Iceberg] schema and a function [similar to `NextID`] which can assign ids using the mapping. We can then reconvert the returned iceberg schema to Avro using AvroSchemaUtil, just as in the first approach.\r\n\r\nWe will basically be overriding all the ids which `SchemaToType` would have allocated. I think there's scope of reusing `com.netflix.iceberg.types.AssignFreshIds` and making it more generic to serve two usecases - assigning fresh ids and assigning ids from a map.  [For non record container types we'd still have to use non conflicting ids to assign to their fields].  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465452378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465453183","html_url":"https://github.com/apache/iceberg/pull/106#issuecomment-465453183","issue_url":"https://api.github.com/repos/apache/iceberg/issues/106","id":465453183,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTQ1MzE4Mw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-20T07:10:38Z","updated_at":"2019-02-20T07:10:38Z","author_association":"CONTRIBUTOR","body":"Just for my understanding, are the fields like `columnSizes` etc being modified after/during copying? It seems that these fields could be effectively immutable. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465453183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465769700","html_url":"https://github.com/apache/iceberg/pull/106#issuecomment-465769700","issue_url":"https://api.github.com/repos/apache/iceberg/issues/106","id":465769700,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTc2OTcwMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-20T21:53:06Z","updated_at":"2019-02-20T21:53:06Z","author_association":"CONTRIBUTOR","body":"@rdsr, the data files themselves are not modified, although you could build a process that gathers these stats from a file and replaces the old DataFile with a new one with the data.\r\n\r\nThe case that this is addressing is reuse of container objects while scanning manifest files. To avoid object creation, Iceberg will reuse Record, Map, and List objects and fill them with new data. That cuts down on object churn when most records are discarded because a file was deleted or doesn't match a filter. When a file is selected for a scan in `planFiles`, the DataFile that is returned is a copy because the next record read from the manifest will refill the reused record with new data.\r\n\r\nUnfortunately, that copy wasn't deep copying these maps, so the wrong data was returned.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465769700/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465792663","html_url":"https://github.com/apache/iceberg/pull/106#issuecomment-465792663","issue_url":"https://api.github.com/repos/apache/iceberg/issues/106","id":465792663,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTc5MjY2Mw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-20T23:09:05Z","updated_at":"2019-02-20T23:38:00Z","author_association":"CONTRIBUTOR","body":"Thankyou for taking the time to explain this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465792663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465927160","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-465927160","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":465927160,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NTkyNzE2MA==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-21T09:30:38Z","updated_at":"2019-02-21T09:30:58Z","author_association":"CONTRIBUTOR","body":"Gist with the example : https://gist.github.com/prodeezy/072dfbc69774652640e36b9ad5f17c68\r\n\r\nContains the data i used to recreate the issue. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/465927160/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466181296","html_url":"https://github.com/apache/iceberg/pull/75#issuecomment-466181296","issue_url":"https://api.github.com/repos/apache/iceberg/issues/75","id":466181296,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjE4MTI5Ng==","user":{"login":"renato2099","id":1325916,"node_id":"MDQ6VXNlcjEzMjU5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1325916?v=4","gravatar_id":"","url":"https://api.github.com/users/renato2099","html_url":"https://github.com/renato2099","followers_url":"https://api.github.com/users/renato2099/followers","following_url":"https://api.github.com/users/renato2099/following{/other_user}","gists_url":"https://api.github.com/users/renato2099/gists{/gist_id}","starred_url":"https://api.github.com/users/renato2099/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renato2099/subscriptions","organizations_url":"https://api.github.com/users/renato2099/orgs","repos_url":"https://api.github.com/users/renato2099/repos","events_url":"https://api.github.com/users/renato2099/events{/privacy}","received_events_url":"https://api.github.com/users/renato2099/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-21T21:51:07Z","updated_at":"2019-02-21T21:51:07Z","author_association":"CONTRIBUTOR","body":"hey @rdblue \r\nThanks a lot for your help! I have updated the PR, please let me know if I am still missing something else.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466181296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466341221","html_url":"https://github.com/apache/iceberg/issues/77#issuecomment-466341221","issue_url":"https://api.github.com/repos/apache/iceberg/issues/77","id":466341221,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjM0MTIyMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-22T09:56:26Z","updated_at":"2019-02-22T09:56:26Z","author_association":"CONTRIBUTOR","body":"Exactly, it is hard to estimate what would perform better as it would highly depend on a particular use case. Let's go for the min file weight. It is simple, it will prevent Iceberg from putting a huge number of files into one bin and the bin size will be closer to the target size in case of average files.\r\n\r\nLet me submit a PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466341221/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466420646","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-466420646","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":466420646,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjQyMDY0Ng==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-22T14:45:50Z","updated_at":"2019-02-22T14:45:50Z","author_association":"CONTRIBUTOR","body":"Put up a PR and tested that it fixes the issue : https://github.com/apache/incubator-iceberg/pull/110","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466420646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466478350","html_url":"https://github.com/apache/iceberg/pull/110#issuecomment-466478350","issue_url":"https://api.github.com/repos/apache/iceberg/issues/110","id":466478350,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjQ3ODM1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-22T17:29:58Z","updated_at":"2019-02-22T17:29:58Z","author_association":"CONTRIBUTOR","body":"@prodeezy, thank you for finding this problem and fixing it! Nice work.\r\n\r\nI think this needs to update the other expression cases as well to handle the case where expressions are bound to structs. This will also need to update the unit test for this filter evaluator.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466478350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466805908","html_url":"https://github.com/apache/iceberg/pull/110#issuecomment-466805908","issue_url":"https://api.github.com/repos/apache/iceberg/issues/110","id":466805908,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NjgwNTkwOA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-24T19:04:02Z","updated_at":"2019-02-24T19:04:02Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @prodeezy! And thank you for the quick turn-around on adding test cases.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466805908/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466884734","html_url":"https://github.com/apache/iceberg/issues/104#issuecomment-466884734","issue_url":"https://api.github.com/repos/apache/iceberg/issues/104","id":466884734,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Njg4NDczNA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T06:12:41Z","updated_at":"2019-02-25T06:12:41Z","author_association":"CONTRIBUTOR","body":"I also see this warning logged countless times in `com.netflix.iceberg.spark.source.TestFilteredScan`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466884734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466890995","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-466890995","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":466890995,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Njg5MDk5NQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T06:45:11Z","updated_at":"2019-02-25T06:45:11Z","author_association":"CONTRIBUTOR","body":"Hey @rdblue, do you have any feedback regarding either of the above approaches?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/466890995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467158559","html_url":"https://github.com/apache/iceberg/pull/111#issuecomment-467158559","issue_url":"https://api.github.com/repos/apache/iceberg/issues/111","id":467158559,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzE1ODU1OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T19:54:16Z","updated_at":"2019-02-25T20:02:33Z","author_association":"CONTRIBUTOR","body":"@rdsr @rdblue out of curiosity, how [adding row group or stripe offsets to manifests](https://github.com/apache/incubator-iceberg/issues/37) will affect this? Will we try to align the splits?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467158559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467232457","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-467232457","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":467232457,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzIzMjQ1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T23:51:19Z","updated_at":"2019-02-25T23:51:19Z","author_association":"CONTRIBUTOR","body":"@rdsr, sorry for the delay.\r\n\r\nI was thinking about a solution more like the alternative you proposed, but I was thinking that this would work using just Avro schemas, so no need to convert from Iceberg to Avro.\r\n\r\nIceberg already has field IDs, the question is how to match those up with the Avro schema in a data file. We also don't want to change the schema from the file too much because it is required to correctly read the data. So converting to Iceberg, then back to Avro is much more risky than transforming Avro to Avro+ids.\r\n\r\nI like your idea to have a some mapping callback, similar to `NextID` but that can be implemented by something that contains the mapping. Hopefully, that API could be used for Avro and Parquet ID mapping since we'd like to be able to do the same for parquet-avro files, eventually.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467232457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467246490","html_url":"https://github.com/apache/iceberg/pull/89#issuecomment-467246490","issue_url":"https://api.github.com/repos/apache/iceberg/issues/89","id":467246490,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzI0NjQ5MA==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T00:51:33Z","updated_at":"2019-02-26T00:51:33Z","author_association":"CONTRIBUTOR","body":"Quick ping here @rdblue.\r\n\r\nPlease let me know if you agree with discussion above, or if we should look into your proposed alternative?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467246490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467247673","html_url":"https://github.com/apache/iceberg/pull/89#issuecomment-467247673","issue_url":"https://api.github.com/repos/apache/iceberg/issues/89","id":467247673,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzI0NzY3Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T00:56:26Z","updated_at":"2019-02-26T00:56:26Z","author_association":"CONTRIBUTOR","body":"Hey, sorry. I do agree. I just need to find some time to review this. Thanks for your patience!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467247673/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467450491","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-467450491","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":467450491,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzQ1MDQ5MQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T14:05:29Z","updated_at":"2019-02-26T14:05:29Z","author_association":"CONTRIBUTOR","body":"@rdblue I see a comment in `ParquetMetrics$fromMetadata`, which says `TODO: allow struct nesting, but not maps or arrays`.\r\n\r\nCould you describe why we need to exclude maps and arrays? We have proper statistics for keys/values in maps as well as for elements in lists, don't we? For example, we might support predicates on elements of lists at some point.\r\n\r\nI am asking because the simplest option to enable statistics for nested structs is by replacing `fileSchema.asStruct().field(fieldId)` with `fileSchema.findField(fieldId)` in `ParquetMetrics$fromMetadata`. If we want to collect statistics only for nested structs, the logic will be more complicated.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467450491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467519854","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-467519854","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":467519854,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzUxOTg1NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T16:54:09Z","updated_at":"2019-03-05T18:39:52Z","author_association":"CONTRIBUTOR","body":"The reason for now is that this is how the stats and dictionary filters work. If a column has stats, then it is assumed to be at the top level. Structs are logical groupings and don't affect the meaning of a filter, so they are okay.\r\n\r\nIf we want to collect stats from maps and lists, then we need to have a plan for how to use them. That means implementing more filters like `contains`, `containsKey`, or `containsValue`. Since we don't have those yet, we don't need to store the data for them.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467519854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467521231","html_url":"https://github.com/apache/iceberg/issues/113#issuecomment-467521231","issue_url":"https://api.github.com/repos/apache/iceberg/issues/113","id":467521231,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzUyMTIzMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T16:57:36Z","updated_at":"2019-02-26T16:57:36Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, #78 reminded me about this item as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467521231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467529567","html_url":"https://github.com/apache/iceberg/pull/111#issuecomment-467529567","issue_url":"https://api.github.com/repos/apache/iceberg/issues/111","id":467529567,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzUyOTU2Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T17:18:08Z","updated_at":"2019-02-26T17:18:08Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, yes. We would keep the row group (stripe) offsets in metadata and split at those points in the file. For the purposes of this PR, I think we should just make a comment on #37 to remind ourselves to update this split logic.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467529567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467533169","html_url":"https://github.com/apache/iceberg/pull/111#issuecomment-467533169","issue_url":"https://api.github.com/repos/apache/iceberg/issues/111","id":467533169,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzUzMzE2OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T17:27:18Z","updated_at":"2019-02-26T17:27:18Z","author_association":"CONTRIBUTOR","body":"@rdsr, what do you think about possibly moving the split logic into `FileScanTask`? Seems like it fits a little better there since the task has all of the split locations from the `DataFile`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467533169/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467590322","html_url":"https://github.com/apache/iceberg/issues/55#issuecomment-467590322","issue_url":"https://api.github.com/repos/apache/iceberg/issues/55","id":467590322,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzU5MDMyMg==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T19:59:50Z","updated_at":"2019-02-26T19:59:50Z","author_association":"CONTRIBUTOR","body":"Looks like this is done! I'll close it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467590322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467610510","html_url":"https://github.com/apache/iceberg/issues/55#issuecomment-467610510","issue_url":"https://api.github.com/repos/apache/iceberg/issues/55","id":467610510,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzYxMDUxMA==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T20:57:41Z","updated_at":"2019-02-26T20:57:41Z","author_association":"CONTRIBUTOR","body":"(For completeness, linking this issue to PR that made it to master: https://github.com/apache/incubator-iceberg/pull/87)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467610510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467770031","html_url":"https://github.com/apache/iceberg/pull/63#issuecomment-467770031","issue_url":"https://api.github.com/repos/apache/iceberg/issues/63","id":467770031,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc3MDAzMQ==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T08:29:44Z","updated_at":"2019-02-27T08:30:20Z","author_association":"CONTRIBUTOR","body":"@rdblue Thanks for this PR.  I applied this to latest and ran my functional tests. Works great! confirmed that top level stats are kept in Manifests now and filters can prune files :-)  File pruning on predicates is a critical feature for us. Looking forward to seeing this merged. \r\n\r\nP.S. master branch has diverged slightly so the PR patch didn't apply cleanly. Some slight changes were needed. No biggie but wanted to let you know. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/467770031/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468494265","html_url":"https://github.com/apache/iceberg/pull/115#issuecomment-468494265","issue_url":"https://api.github.com/repos/apache/iceberg/issues/115","id":468494265,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQ5NDI2NQ==","user":{"login":"rominparekh","id":3831468,"node_id":"MDQ6VXNlcjM4MzE0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/3831468?v=4","gravatar_id":"","url":"https://api.github.com/users/rominparekh","html_url":"https://github.com/rominparekh","followers_url":"https://api.github.com/users/rominparekh/followers","following_url":"https://api.github.com/users/rominparekh/following{/other_user}","gists_url":"https://api.github.com/users/rominparekh/gists{/gist_id}","starred_url":"https://api.github.com/users/rominparekh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rominparekh/subscriptions","organizations_url":"https://api.github.com/users/rominparekh/orgs","repos_url":"https://api.github.com/users/rominparekh/repos","events_url":"https://api.github.com/users/rominparekh/events{/privacy}","received_events_url":"https://api.github.com/users/rominparekh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T00:27:36Z","updated_at":"2019-03-01T00:27:36Z","author_association":"CONTRIBUTOR","body":"Thanks for feedback @xabriel! \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468494265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468742029","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-468742029","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":468742029,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODc0MjAyOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T17:21:21Z","updated_at":"2019-03-01T17:21:21Z","author_association":"CONTRIBUTOR","body":"Can we close this issue as the PR was merged?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468742029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468745213","html_url":"https://github.com/apache/iceberg/issues/99#issuecomment-468745213","issue_url":"https://api.github.com/repos/apache/iceberg/issues/99","id":468745213,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODc0NTIxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T17:30:56Z","updated_at":"2019-03-01T17:30:56Z","author_association":"CONTRIBUTOR","body":"Yes, this was fixed by #110. Thank you @prodeezy!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468745213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468852282","html_url":"https://github.com/apache/iceberg/issues/20#issuecomment-468852282","issue_url":"https://api.github.com/repos/apache/iceberg/issues/20","id":468852282,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODg1MjI4Mg==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T23:51:20Z","updated_at":"2019-03-01T23:51:20Z","author_association":"CONTRIBUTOR","body":"This is done. Thanks everyone!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468852282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468856024","html_url":"https://github.com/apache/iceberg/pull/107#issuecomment-468856024","issue_url":"https://api.github.com/repos/apache/iceberg/issues/107","id":468856024,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODg1NjAyNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T00:10:47Z","updated_at":"2019-03-02T00:10:47Z","author_association":"CONTRIBUTOR","body":"@yifeih, thanks for all the work on this one. It looks close to me. Most of my comments were minor.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468856024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468856357","html_url":"https://github.com/apache/iceberg/pull/115#issuecomment-468856357","issue_url":"https://api.github.com/repos/apache/iceberg/issues/115","id":468856357,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODg1NjM1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T00:12:18Z","updated_at":"2019-03-02T00:12:18Z","author_association":"CONTRIBUTOR","body":"@rominparekh, adding test cases is awesome!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468856357/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468857145","html_url":"https://github.com/apache/iceberg/issues/114#issuecomment-468857145","issue_url":"https://api.github.com/repos/apache/iceberg/issues/114","id":468857145,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODg1NzE0NQ==","user":{"login":"rominparekh","id":3831468,"node_id":"MDQ6VXNlcjM4MzE0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/3831468?v=4","gravatar_id":"","url":"https://api.github.com/users/rominparekh","html_url":"https://github.com/rominparekh","followers_url":"https://api.github.com/users/rominparekh/followers","following_url":"https://api.github.com/users/rominparekh/following{/other_user}","gists_url":"https://api.github.com/users/rominparekh/gists{/gist_id}","starred_url":"https://api.github.com/users/rominparekh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rominparekh/subscriptions","organizations_url":"https://api.github.com/users/rominparekh/orgs","repos_url":"https://api.github.com/users/rominparekh/repos","events_url":"https://api.github.com/users/rominparekh/events{/privacy}","received_events_url":"https://api.github.com/users/rominparekh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T00:16:49Z","updated_at":"2019-03-02T00:16:49Z","author_association":"CONTRIBUTOR","body":"I'll attempt a crack at this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468857145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468968278","html_url":"https://github.com/apache/iceberg/pull/117#issuecomment-468968278","issue_url":"https://api.github.com/repos/apache/iceberg/issues/117","id":468968278,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODk2ODI3OA==","user":{"login":"rominparekh","id":3831468,"node_id":"MDQ6VXNlcjM4MzE0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/3831468?v=4","gravatar_id":"","url":"https://api.github.com/users/rominparekh","html_url":"https://github.com/rominparekh","followers_url":"https://api.github.com/users/rominparekh/followers","following_url":"https://api.github.com/users/rominparekh/following{/other_user}","gists_url":"https://api.github.com/users/rominparekh/gists{/gist_id}","starred_url":"https://api.github.com/users/rominparekh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rominparekh/subscriptions","organizations_url":"https://api.github.com/users/rominparekh/orgs","repos_url":"https://api.github.com/users/rominparekh/repos","events_url":"https://api.github.com/users/rominparekh/events{/privacy}","received_events_url":"https://api.github.com/users/rominparekh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T22:53:29Z","updated_at":"2019-03-02T22:53:40Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi , @rdblue : Please let me know if I'm missing anything or this PR is not addressing issue #114 . Thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/468968278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469077462","html_url":"https://github.com/apache/iceberg/issues/53#issuecomment-469077462","issue_url":"https://api.github.com/repos/apache/iceberg/issues/53","id":469077462,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTA3NzQ2Mg==","user":{"login":"rominparekh","id":3831468,"node_id":"MDQ6VXNlcjM4MzE0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/3831468?v=4","gravatar_id":"","url":"https://api.github.com/users/rominparekh","html_url":"https://github.com/rominparekh","followers_url":"https://api.github.com/users/rominparekh/followers","following_url":"https://api.github.com/users/rominparekh/following{/other_user}","gists_url":"https://api.github.com/users/rominparekh/gists{/gist_id}","starred_url":"https://api.github.com/users/rominparekh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rominparekh/subscriptions","organizations_url":"https://api.github.com/users/rominparekh/orgs","repos_url":"https://api.github.com/users/rominparekh/repos","events_url":"https://api.github.com/users/rominparekh/events{/privacy}","received_events_url":"https://api.github.com/users/rominparekh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-03T23:37:00Z","updated_at":"2019-03-03T23:37:00Z","author_association":"CONTRIBUTOR","body":"I'll attempt a crack at this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469077462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469086377","html_url":"https://github.com/apache/iceberg/issues/113#issuecomment-469086377","issue_url":"https://api.github.com/repos/apache/iceberg/issues/113","id":469086377,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTA4NjM3Nw==","user":{"login":"feng-tao","id":3223098,"node_id":"MDQ6VXNlcjMyMjMwOTg=","avatar_url":"https://avatars.githubusercontent.com/u/3223098?v=4","gravatar_id":"","url":"https://api.github.com/users/feng-tao","html_url":"https://github.com/feng-tao","followers_url":"https://api.github.com/users/feng-tao/followers","following_url":"https://api.github.com/users/feng-tao/following{/other_user}","gists_url":"https://api.github.com/users/feng-tao/gists{/gist_id}","starred_url":"https://api.github.com/users/feng-tao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng-tao/subscriptions","organizations_url":"https://api.github.com/users/feng-tao/orgs","repos_url":"https://api.github.com/users/feng-tao/repos","events_url":"https://api.github.com/users/feng-tao/events{/privacy}","received_events_url":"https://api.github.com/users/feng-tao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T01:07:28Z","updated_at":"2019-03-04T01:07:28Z","author_association":"MEMBER","body":"@rdblue is it an issue good for n00b? if yes, I am interested to take this one :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469086377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469104480","html_url":"https://github.com/apache/iceberg/pull/111#issuecomment-469104480","issue_url":"https://api.github.com/repos/apache/iceberg/issues/111","id":469104480,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTEwNDQ4MA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T03:17:35Z","updated_at":"2019-03-04T03:17:35Z","author_association":"CONTRIBUTOR","body":"I think I accidentally deleted this branch. \r\nI'll send out a new pull request will adds unit test cases ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469104480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469120572","html_url":"https://github.com/apache/iceberg/issues/40#issuecomment-469120572","issue_url":"https://api.github.com/repos/apache/iceberg/issues/40","id":469120572,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTEyMDU3Mg==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T05:09:24Z","updated_at":"2019-03-04T05:09:24Z","author_association":"CONTRIBUTOR","body":"@rdblue . Thanks for the input. I see your point. Converting from Avro to Iceberg and then to Avro again may end up possibly losing some information.  In that case, I think we cannot even use `SchemaToType` as described in the first approach.\r\n\r\nI'll see if I can use my second approach but only using Avro to Avro transformations.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469120572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469438013","html_url":"https://github.com/apache/iceberg/issues/118#issuecomment-469438013","issue_url":"https://api.github.com/repos/apache/iceberg/issues/118","id":469438013,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQzODAxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T21:57:39Z","updated_at":"2019-03-04T21:57:39Z","author_association":"CONTRIBUTOR","body":"Some of the guarantees made by Iceberg can't be satisfied by plain-text formats like CSV and JSON. The intent was for Iceberg tables to work the same way no matter what format is used to store the data. Here are a few problems:\r\n\r\n* These formats can't support the required schema evolution rules. Delimited formats (CSV, etc.) have no schema, so column resolution must be done by position, which breaks when columns are deleted from the middle of a schema. Similarly, JSON column resolution must be done by name, which breaks when a column is deleted and a new one is added with the same name.\r\n* Delimited formats also lack framing and use delimiters to handle nesting. This strategy breaks after a few levels of nesting so it isn't possible to use them for any schema.\r\n* Both CSV and JSON are not splittable formats, without extra rules or escaping. Even when using those hacks to make them splittable, they aren't compressible and splittable at the same time.\r\n\r\nBasically, these formats aren't suitable for tables that make guarantees about schema evolution or have features like splittability.\r\n\r\nWe could add a different mode to support some of these, but I don't see enough value in it. I think the right path is to use a Spark or Hive table for CSV data and load it into an Iceberg table for long-term storage to get reliability and performance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469438013/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469601004","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-469601004","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":469601004,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTYwMTAwNA==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T09:12:41Z","updated_at":"2019-03-05T09:13:06Z","author_association":"CONTRIBUTOR","body":"Based on the discussion above we could add support for struct metrics and struct-based filtering. Filtering on structs would be a good incremental feature to add for complex schemas where often logical grouping can really help. Especially since there is a [PR available](https://github.com/apache/spark/pull/22573) in Spark now that one can cherry pick to push down struct-based filters. If we agree then I can work on this (unless @aokolnychyi  has one on the way already). ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469601004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469640025","html_url":"https://github.com/apache/iceberg/pull/105#issuecomment-469640025","issue_url":"https://api.github.com/repos/apache/iceberg/issues/105","id":469640025,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTY0MDAyNQ==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T11:08:39Z","updated_at":"2019-03-05T11:11:35Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi  these are great and the code is useful for others to use and extend. \r\n\r\nCan you add a manual entry for how you built and ran these benchmarks (What cmd line statements were used ) ? Can add them to the spark/README.md. Maybe also instructions on how one can extend this. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469640025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469767619","html_url":"https://github.com/apache/iceberg/pull/105#issuecomment-469767619","issue_url":"https://api.github.com/repos/apache/iceberg/issues/105","id":469767619,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc2NzYxOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T17:12:08Z","updated_at":"2019-03-05T17:12:08Z","author_association":"CONTRIBUTOR","body":"@prodeezy yeah, I also agree that it will be useful to describe how to run and extend if we decide to have these benchmarks upstream. For now, it is just in the Java doc per each benchmark.\r\n\r\nLater, it would be also important to check that the results are reliable and consistent across different machines.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469767619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469779958","html_url":"https://github.com/apache/iceberg/pull/105#issuecomment-469779958","issue_url":"https://api.github.com/repos/apache/iceberg/issues/105","id":469779958,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc3OTk1OA==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T17:43:44Z","updated_at":"2019-03-05T17:43:44Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi Thanks for doing this, I think there are some really good insights and questions that come out of this.  I would characterize some as the following (ordered by least controversial from my perspective):\r\n\r\n- Write path is effectively the same in performance (within error)\r\n\r\n- For the file skipping tests, I'm concerned that the difference in number of files processed per task obviates any conclusions we can reasonably draw from the results.   With task combining being different, the largest factor may be the work done in the task.  The flat data test demonstrates that as you point out, and the nested data test could be skewing the other direction because all files are processed in one task.\r\n \r\n- For the materialized scans, I feel we would get more accurate results by better isolating the read path (i.e. use the read path directly as opposed to running though a job).  There are quite a number of variables above the materialization that could impact the performance especially with such small datasets that I don’t have a lot of confidence in the order of magnitude of the comparative difference and how that would scale with different datasets.\r\n\r\nAlso, I would prefer that we don’t actually commit the results of the benchmarks as there are just too many variables to have a canonical version.  For example, the underlying filesystem (e.g. HDFS, S3) would likely impact the performance in different areas (and scale different across number of partitions/files/etc.).  Hardware and local customizations can also have a pronounced impact.\r\n\r\nBenchmarks are notoriously controversial, so allowing them to be run and interpreted in the environment they will be used is often the most relevant way to deal with all of these variables. \r\n\r\nI would be in favor of adding this (minus the results) along with more instruction and guidance of how to use/configure for no other reason than to have a good starting point for adding other benchmarks and iterating on improving the accuracy.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469779958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469781509","html_url":"https://github.com/apache/iceberg/pull/107#issuecomment-469781509","issue_url":"https://api.github.com/repos/apache/iceberg/issues/107","id":469781509,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc4MTUwOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T17:47:48Z","updated_at":"2019-03-05T17:47:48Z","author_association":"CONTRIBUTOR","body":"Thanks for contributing this, @yifeih! Looks great.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469781509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469782506","html_url":"https://github.com/apache/iceberg/issues/113#issuecomment-469782506","issue_url":"https://api.github.com/repos/apache/iceberg/issues/113","id":469782506,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc4MjUwNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T17:50:35Z","updated_at":"2019-03-05T17:50:35Z","author_association":"CONTRIBUTOR","body":"@feng-tao, I think this could be a good first issue. Let us know if you need any help or context.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469782506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469788405","html_url":"https://github.com/apache/iceberg/issues/113#issuecomment-469788405","issue_url":"https://api.github.com/repos/apache/iceberg/issues/113","id":469788405,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc4ODQwNQ==","user":{"login":"feng-tao","id":3223098,"node_id":"MDQ6VXNlcjMyMjMwOTg=","avatar_url":"https://avatars.githubusercontent.com/u/3223098?v=4","gravatar_id":"","url":"https://api.github.com/users/feng-tao","html_url":"https://github.com/feng-tao","followers_url":"https://api.github.com/users/feng-tao/followers","following_url":"https://api.github.com/users/feng-tao/following{/other_user}","gists_url":"https://api.github.com/users/feng-tao/gists{/gist_id}","starred_url":"https://api.github.com/users/feng-tao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng-tao/subscriptions","organizations_url":"https://api.github.com/users/feng-tao/orgs","repos_url":"https://api.github.com/users/feng-tao/repos","events_url":"https://api.github.com/users/feng-tao/events{/privacy}","received_events_url":"https://api.github.com/users/feng-tao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T18:05:57Z","updated_at":"2019-03-05T18:05:57Z","author_association":"MEMBER","body":"@rdblue ,  I am still reading the code base. It would be great if you could guide me a little bit on the context or the related code path. Thanks a lot :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469788405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469790026","html_url":"https://github.com/apache/iceberg/issues/121#issuecomment-469790026","issue_url":"https://api.github.com/repos/apache/iceberg/issues/121","id":469790026,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc5MDAyNg==","user":{"login":"eskrm","id":6371196,"node_id":"MDQ6VXNlcjYzNzExOTY=","avatar_url":"https://avatars.githubusercontent.com/u/6371196?v=4","gravatar_id":"","url":"https://api.github.com/users/eskrm","html_url":"https://github.com/eskrm","followers_url":"https://api.github.com/users/eskrm/followers","following_url":"https://api.github.com/users/eskrm/following{/other_user}","gists_url":"https://api.github.com/users/eskrm/gists{/gist_id}","starred_url":"https://api.github.com/users/eskrm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskrm/subscriptions","organizations_url":"https://api.github.com/users/eskrm/orgs","repos_url":"https://api.github.com/users/eskrm/repos","events_url":"https://api.github.com/users/eskrm/events{/privacy}","received_events_url":"https://api.github.com/users/eskrm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T18:10:23Z","updated_at":"2019-03-05T18:10:23Z","author_association":"NONE","body":"Hi @manishmalhotrawork,\r\n\r\nYou're not missing anything. This is tracked by https://github.com/apache/incubator-iceberg/issues/8.\r\n\r\n@rdblue How should different table implementations be supported by the Spark module? I'd like to contribute a DynamoDB-based implementation, if it's wanted, and be able to switch to that implementation in the Iceberg data source. Since the module only depends on the Tables interface can we have an option to specify the Tables FQCN or something to that effect?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469790026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469800844","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-469800844","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":469800844,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgwMDg0NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T18:40:28Z","updated_at":"2019-03-05T18:40:28Z","author_association":"CONTRIBUTOR","body":"@prodeezy, sounds good to me! I'll review the PRs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469800844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469812148","html_url":"https://github.com/apache/iceberg/issues/121#issuecomment-469812148","issue_url":"https://api.github.com/repos/apache/iceberg/issues/121","id":469812148,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgxMjE0OA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T18:52:06Z","updated_at":"2019-03-05T18:52:06Z","author_association":"CONTRIBUTOR","body":"I will leave the actual answer to @rdblue. I believe I had a similar question as @eskrm.\r\n\r\nFor now, one can extend `IcebergSource` and override `findTable` to use `HiveTables`. However, there might be version conflicts as `iceberg-hive` uses Hive 3.1.0 and it includes Hadoop 3.1.0 as its dependency. Spark 2.4 still relies on Hadoop 2.x.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469812148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469824435","html_url":"https://github.com/apache/iceberg/issues/113#issuecomment-469824435","issue_url":"https://api.github.com/repos/apache/iceberg/issues/113","id":469824435,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgyNDQzNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T19:26:47Z","updated_at":"2019-03-05T19:26:47Z","author_association":"CONTRIBUTOR","body":"`DataFile` and `Metrics` are the classes that contain metrics and are good candidates for where truncation could happen. I think we would want truncation to be configurable using settings in `TableProperties`. Metrics are scraped from Parquet metadata in `ParquetMetrics`, which is called by `ParquetWriter`.\r\n\r\nYou might want to explore passing a truncate length option to `ParquetWriter`. The writer would pass it to `ParquetMetrics` to truncate values right away. The setting would come from the table when creating a writer. For that, I think you'd update the write builder in `Parquet`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469824435/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469825945","html_url":"https://github.com/apache/iceberg/issues/121#issuecomment-469825945","issue_url":"https://api.github.com/repos/apache/iceberg/issues/121","id":469825945,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgyNTk0NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T19:31:11Z","updated_at":"2019-03-05T19:31:11Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi is right. The version conflict is something we need to take care of as part of #8. The right way to plug in your own metastore implementation for Spark is to extend `IcebergSource` and override `findTable`.\r\n\r\nNo need to do this for Hive tables, since we want to add support for using the Hive metastore as the default for named tables in `IcebergSource` (path-based tables would continue to use `HadoopTables`).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469825945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469826961","html_url":"https://github.com/apache/iceberg/pull/120#issuecomment-469826961","issue_url":"https://api.github.com/repos/apache/iceberg/issues/120","id":469826961,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgyNjk2MQ==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T19:34:02Z","updated_at":"2019-03-05T19:34:02Z","author_association":"CONTRIBUTOR","body":"@rominparekh #69 and #28 are open, and have similar goal: to rename Iceberg to apache packages, and to fix/start enforcing a coding standard.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469826961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469829428","html_url":"https://github.com/apache/iceberg/issues/121#issuecomment-469829428","issue_url":"https://api.github.com/repos/apache/iceberg/issues/121","id":469829428,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgyOTQyOA==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T19:40:53Z","updated_at":"2019-03-05T19:40:53Z","author_association":"CONTRIBUTOR","body":"thanks @eskrm @aokolnychyi @rdblue \r\nyes, I extended `IcebergSource` to test it.\r\n\r\n@rdblue so for HiveTables we should not extend, \r\nIf Im not missing, then `HiveTables`, `HiveTableOperations` depends on the the ThriftClient of HiveMetastore, so internally its using Metastore.\r\nSo, we still changes to use the metastore in `IcebergDatasource`.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469829428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469853567","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-469853567","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":469853567,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTg1MzU2Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T20:55:42Z","updated_at":"2019-03-05T20:55:42Z","author_association":"CONTRIBUTOR","body":"Also, I'm updating the summary of this issue to lower/upper bounds instead of min/max. The spec makes no guarantee that these are min/max values so that variable-length types can truncate and save space.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469853567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469912185","html_url":"https://github.com/apache/iceberg/pull/102#issuecomment-469912185","issue_url":"https://api.github.com/repos/apache/iceberg/issues/102","id":469912185,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkxMjE4NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T00:13:22Z","updated_at":"2019-03-06T00:13:22Z","author_association":"CONTRIBUTOR","body":"I'm merging this. We've been running it in production for a while and it appears to work fine. Thanks for reviewing, @fbocse!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469912185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469913829","html_url":"https://github.com/apache/iceberg/pull/106#issuecomment-469913829","issue_url":"https://api.github.com/repos/apache/iceberg/issues/106","id":469913829,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkxMzgyOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T00:21:06Z","updated_at":"2019-03-06T00:21:06Z","author_association":"CONTRIBUTOR","body":"I'm committing this fix. Thanks for reviewing, @fbocse and @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469913829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469914387","html_url":"https://github.com/apache/iceberg/pull/100#issuecomment-469914387","issue_url":"https://api.github.com/repos/apache/iceberg/issues/100","id":469914387,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkxNDM4Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T00:23:41Z","updated_at":"2019-03-06T00:23:41Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @fbocse!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469914387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469918889","html_url":"https://github.com/apache/iceberg/pull/74#issuecomment-469918889","issue_url":"https://api.github.com/repos/apache/iceberg/issues/74","id":469918889,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkxODg4OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T00:44:06Z","updated_at":"2019-03-06T00:44:06Z","author_association":"CONTRIBUTOR","body":"Merged. Thanks for the reviews, @fbocse, @aokolnychyi, and @Parth-Brahmbhatt!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469918889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469921177","html_url":"https://github.com/apache/iceberg/pull/117#issuecomment-469921177","issue_url":"https://api.github.com/repos/apache/iceberg/issues/117","id":469921177,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkyMTE3Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T00:54:23Z","updated_at":"2019-03-06T00:54:23Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @rominparekh!\r\n\r\nIn addition to the comments I made, I think that releasing the largest bin first should be an option passed when creating the iterator, not a hard-coded assumption. That is how the look-back and target size parameters work and I think it would be better to keep this utility general.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469921177/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469924447","html_url":"https://github.com/apache/iceberg/issues/113#issuecomment-469924447","issue_url":"https://api.github.com/repos/apache/iceberg/issues/113","id":469924447,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkyNDQ0Nw==","user":{"login":"feng-tao","id":3223098,"node_id":"MDQ6VXNlcjMyMjMwOTg=","avatar_url":"https://avatars.githubusercontent.com/u/3223098?v=4","gravatar_id":"","url":"https://api.github.com/users/feng-tao","html_url":"https://github.com/feng-tao","followers_url":"https://api.github.com/users/feng-tao/followers","following_url":"https://api.github.com/users/feng-tao/following{/other_user}","gists_url":"https://api.github.com/users/feng-tao/gists{/gist_id}","starred_url":"https://api.github.com/users/feng-tao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng-tao/subscriptions","organizations_url":"https://api.github.com/users/feng-tao/orgs","repos_url":"https://api.github.com/users/feng-tao/repos","events_url":"https://api.github.com/users/feng-tao/events{/privacy}","received_events_url":"https://api.github.com/users/feng-tao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T01:09:24Z","updated_at":"2019-03-06T01:09:24Z","author_association":"MEMBER","body":"thanks @rdblue , will take a look","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/469924447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470012140","html_url":"https://github.com/apache/iceberg/pull/120#issuecomment-470012140","issue_url":"https://api.github.com/repos/apache/iceberg/issues/120","id":470012140,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDAxMjE0MA==","user":{"login":"rominparekh","id":3831468,"node_id":"MDQ6VXNlcjM4MzE0Njg=","avatar_url":"https://avatars.githubusercontent.com/u/3831468?v=4","gravatar_id":"","url":"https://api.github.com/users/rominparekh","html_url":"https://github.com/rominparekh","followers_url":"https://api.github.com/users/rominparekh/followers","following_url":"https://api.github.com/users/rominparekh/following{/other_user}","gists_url":"https://api.github.com/users/rominparekh/gists{/gist_id}","starred_url":"https://api.github.com/users/rominparekh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rominparekh/subscriptions","organizations_url":"https://api.github.com/users/rominparekh/orgs","repos_url":"https://api.github.com/users/rominparekh/repos","events_url":"https://api.github.com/users/rominparekh/events{/privacy}","received_events_url":"https://api.github.com/users/rominparekh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T08:19:08Z","updated_at":"2019-03-06T08:19:08Z","author_association":"CONTRIBUTOR","body":"@xabriel  thank you for sharing those PRs. I was not aware it was already covered. Closing this .","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470012140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470345014","html_url":"https://github.com/apache/iceberg/issues/121#issuecomment-470345014","issue_url":"https://api.github.com/repos/apache/iceberg/issues/121","id":470345014,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDM0NTAxNA==","user":{"login":"eskrm","id":6371196,"node_id":"MDQ6VXNlcjYzNzExOTY=","avatar_url":"https://avatars.githubusercontent.com/u/6371196?v=4","gravatar_id":"","url":"https://api.github.com/users/eskrm","html_url":"https://github.com/eskrm","followers_url":"https://api.github.com/users/eskrm/followers","following_url":"https://api.github.com/users/eskrm/following{/other_user}","gists_url":"https://api.github.com/users/eskrm/gists{/gist_id}","starred_url":"https://api.github.com/users/eskrm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eskrm/subscriptions","organizations_url":"https://api.github.com/users/eskrm/orgs","repos_url":"https://api.github.com/users/eskrm/repos","events_url":"https://api.github.com/users/eskrm/events{/privacy}","received_events_url":"https://api.github.com/users/eskrm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-07T01:24:57Z","updated_at":"2019-03-07T01:25:21Z","author_association":"NONE","body":"@manishmalhotrawork I believe @rdblue simply meant that once https://github.com/apache/incubator-iceberg/issues/8 is closed you will no longer have to extend `IcebergSource` to get it working with `HiveTables`. For now you do.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470345014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470582765","html_url":"https://github.com/apache/iceberg/pull/119#issuecomment-470582765","issue_url":"https://api.github.com/repos/apache/iceberg/issues/119","id":470582765,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDU4Mjc2NQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-07T15:57:47Z","updated_at":"2019-03-07T15:57:47Z","author_association":"CONTRIBUTOR","body":"cc: @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470582765/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470739052","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-470739052","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":470739052,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDczOTA1Mg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-07T23:12:18Z","updated_at":"2019-03-07T23:12:18Z","author_association":"CONTRIBUTOR","body":"@rdblue am I right that `valueCounts` and `nullValueCounts`, which are persisted for keys/values in maps as well as for elements in lists, are not used later on? Shall we keep storing them?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470739052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470753424","html_url":"https://github.com/apache/iceberg/issues/78#issuecomment-470753424","issue_url":"https://api.github.com/repos/apache/iceberg/issues/78","id":470753424,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDc1MzQyNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-08T00:14:43Z","updated_at":"2019-03-08T00:14:43Z","author_association":"CONTRIBUTOR","body":"You're right that they aren't used right now. But let's keep them because we will probably want to add more predicates.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470753424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470863106","html_url":"https://github.com/apache/iceberg/pull/123#issuecomment-470863106","issue_url":"https://api.github.com/repos/apache/iceberg/issues/123","id":470863106,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDg2MzEwNg==","user":{"login":"fbocse","id":559272,"node_id":"MDQ6VXNlcjU1OTI3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/559272?v=4","gravatar_id":"","url":"https://api.github.com/users/fbocse","html_url":"https://github.com/fbocse","followers_url":"https://api.github.com/users/fbocse/followers","following_url":"https://api.github.com/users/fbocse/following{/other_user}","gists_url":"https://api.github.com/users/fbocse/gists{/gist_id}","starred_url":"https://api.github.com/users/fbocse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbocse/subscriptions","organizations_url":"https://api.github.com/users/fbocse/orgs","repos_url":"https://api.github.com/users/fbocse/repos","events_url":"https://api.github.com/users/fbocse/events{/privacy}","received_events_url":"https://api.github.com/users/fbocse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-08T09:27:35Z","updated_at":"2019-03-08T09:27:35Z","author_association":"CONTRIBUTOR","body":"Thank you @prodeezy for contributing this, it looks really helpful!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470863106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470867114","html_url":"https://github.com/apache/iceberg/pull/123#issuecomment-470867114","issue_url":"https://api.github.com/repos/apache/iceberg/issues/123","id":470867114,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDg2NzExNA==","user":{"login":"fbocse","id":559272,"node_id":"MDQ6VXNlcjU1OTI3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/559272?v=4","gravatar_id":"","url":"https://api.github.com/users/fbocse","html_url":"https://github.com/fbocse","followers_url":"https://api.github.com/users/fbocse/followers","following_url":"https://api.github.com/users/fbocse/following{/other_user}","gists_url":"https://api.github.com/users/fbocse/gists{/gist_id}","starred_url":"https://api.github.com/users/fbocse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbocse/subscriptions","organizations_url":"https://api.github.com/users/fbocse/orgs","repos_url":"https://api.github.com/users/fbocse/repos","events_url":"https://api.github.com/users/fbocse/events{/privacy}","received_events_url":"https://api.github.com/users/fbocse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-08T09:40:50Z","updated_at":"2019-03-08T09:40:50Z","author_association":"CONTRIBUTOR","body":"General API design related question - how do we bubble up in the API layer the fact that we are supporting the struct field based filtering but not other nested field types filtering? I am not referring  to the implementation details of exposing this in the API, I am just curious what a client's expectations should be that the API exposes this new capacity in a coherent manner.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470867114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470913484","html_url":"https://github.com/apache/iceberg/issues/125#issuecomment-470913484","issue_url":"https://api.github.com/repos/apache/iceberg/issues/125","id":470913484,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDkxMzQ4NA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-08T12:34:19Z","updated_at":"2019-03-08T12:37:58Z","author_association":"CONTRIBUTOR","body":"@rdblue while testing a fix for #78, I saw that lower/upper bounds are not computed correctly for small decimals. Did I miss smth in my analysis above?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/470913484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]