[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349190186","html_url":"https://github.com/apache/brpc/issues/141#issuecomment-349190186","issue_url":"https://api.github.com/repos/apache/brpc/issues/141","id":349190186,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTE5MDE4Ng==","user":{"login":"dhx1989","id":7059003,"node_id":"MDQ6VXNlcjcwNTkwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/7059003?v=4","gravatar_id":"","url":"https://api.github.com/users/dhx1989","html_url":"https://github.com/dhx1989","followers_url":"https://api.github.com/users/dhx1989/followers","following_url":"https://api.github.com/users/dhx1989/following{/other_user}","gists_url":"https://api.github.com/users/dhx1989/gists{/gist_id}","starred_url":"https://api.github.com/users/dhx1989/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhx1989/subscriptions","organizations_url":"https://api.github.com/users/dhx1989/orgs","repos_url":"https://api.github.com/users/dhx1989/repos","events_url":"https://api.github.com/users/dhx1989/events{/privacy}","received_events_url":"https://api.github.com/users/dhx1989/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T04:14:18Z","updated_at":"2017-12-05T04:14:18Z","author_association":"NONE","body":"直接通过CXXFLAGS -Dxxx 会有什么问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349190186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349201728","html_url":"https://github.com/apache/brpc/issues/144#issuecomment-349201728","issue_url":"https://api.github.com/repos/apache/brpc/issues/144","id":349201728,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTIwMTcyOA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T05:41:37Z","updated_at":"2017-12-05T05:41:37Z","author_association":"CONTRIBUTOR","body":"@cool-colo 请教一下，设置为500的时候还出现这个现象，其直接原因可以理解为流量不均衡造成的吗？即流量在某个时间点把连接池撑大（没有大到500），随后的一段时间内，流量一直处于低水位。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349201728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349206852","html_url":"https://github.com/apache/brpc/issues/144#issuecomment-349206852","issue_url":"https://api.github.com/repos/apache/brpc/issues/144","id":349206852,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTIwNjg1Mg==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T06:15:38Z","updated_at":"2017-12-05T06:15:38Z","author_association":"NONE","body":"@gydong 应该是流量不均造成的。  服务器端为HAProxy, connection idle timeout为1秒， 如果流量波动周期为2秒的话，估计就会引发反复创建和关闭连接。\r\n@jamesge 谢谢回复， 我让服务器端发idle timeout 延长一点试试看， 目前有0.5%流量因为connection timeout(E110)损失了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349206852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349236332","html_url":"https://github.com/apache/brpc/issues/144#issuecomment-349236332","issue_url":"https://api.github.com/repos/apache/brpc/issues/144","id":349236332,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTIzNjMzMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T08:49:22Z","updated_at":"2017-12-05T08:49:22Z","author_association":"CONTRIBUTOR","body":"1秒有点太短了，如果对idle的理解是一致的，我觉得至少10秒以上。这应该是个不太触发的机制，否则server端会有大量TIME_WAIT端口。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349236332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349245299","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-349245299","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":349245299,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI0NTI5OQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T09:25:10Z","updated_at":"2017-12-05T09:25:10Z","author_association":"MEMBER","body":"你这个问题应该是发送端进程提前退出导致的, 不然收到的是Got EOF, 而不是Connection reset. 可以试下StreamClose之后再sleep一会， 应该也是类似的效果. ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349245299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349245614","html_url":"https://github.com/apache/brpc/issues/141#issuecomment-349245614","issue_url":"https://api.github.com/repos/apache/brpc/issues/141","id":349245614,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI0NTYxNA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T09:26:18Z","updated_at":"2017-12-05T09:26:18Z","author_association":"MEMBER","body":"定义CXXFLAGS只当前project有效，对logging.h会同样被外部用户引用， 要保证所有地方看到的行为都是一致的， 只能把宏放在头文件中.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349245614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349255180","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-349255180","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":349255180,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI1NTE4MA==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T10:01:53Z","updated_at":"2017-12-05T10:01:53Z","author_association":"CONTRIBUTOR","body":"发送端进程没有提前退出，发送端是一个serve\r\n调用StreamClose之后sleep正常了。但是试了下把发送逻辑放到一个大括号作用域里，在作用域外面sleep，问题依旧存在。怀疑是Channel,Controller或者是stub等对象析构之后就有问题了\r\n@chenzhangyi ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349255180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349266173","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-349266173","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":349266173,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI2NjE3Mw==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T10:43:55Z","updated_at":"2017-12-05T10:44:58Z","author_association":"CONTRIBUTOR","body":"排查了下是由Channel析构导致的，除了sleep有其他的解决方案吗\r\n@chenzhangyi @jamesge","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349266173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349281218","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-349281218","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":349281218,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTI4MTIxOA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-05T11:48:15Z","updated_at":"2017-12-05T11:48:15Z","author_association":"CONTRIBUTOR","body":"可以设置一个gflag来work around，好像叫-defer_close_second。不过我也不理解为什么析构立即引起close，应该等pending事件处理完才close吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349281218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349515908","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-349515908","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":349515908,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTUxNTkwOA==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T02:57:43Z","updated_at":"2017-12-06T02:57:43Z","author_association":"CONTRIBUTOR","body":"@gydong 简单看了下defer_close_second的实现原理是延时释放，和sleep差不多，如果设置了这个gflag所有的connection都得延时释放\r\n应该是等接收方消费掉所有数据才close，或者close掉不影响接收方消费数据","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349515908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349532785","html_url":"https://github.com/apache/brpc/issues/141#issuecomment-349532785","issue_url":"https://api.github.com/repos/apache/brpc/issues/141","id":349532785,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTUzMjc4NQ==","user":{"login":"dhx1989","id":7059003,"node_id":"MDQ6VXNlcjcwNTkwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/7059003?v=4","gravatar_id":"","url":"https://api.github.com/users/dhx1989","html_url":"https://github.com/dhx1989","followers_url":"https://api.github.com/users/dhx1989/followers","following_url":"https://api.github.com/users/dhx1989/following{/other_user}","gists_url":"https://api.github.com/users/dhx1989/gists{/gist_id}","starred_url":"https://api.github.com/users/dhx1989/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhx1989/subscriptions","organizations_url":"https://api.github.com/users/dhx1989/orgs","repos_url":"https://api.github.com/users/dhx1989/repos","events_url":"https://api.github.com/users/dhx1989/events{/privacy}","received_events_url":"https://api.github.com/users/dhx1989/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T04:50:48Z","updated_at":"2017-12-06T04:50:48Z","author_association":"NONE","body":"明白，谢谢啦！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349532785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349537794","html_url":"https://github.com/apache/brpc/issues/148#issuecomment-349537794","issue_url":"https://api.github.com/repos/apache/brpc/issues/148","id":349537794,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTUzNzc5NA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T05:24:17Z","updated_at":"2017-12-06T05:24:17Z","author_association":"CONTRIBUTOR","body":"@chenzhangyi  @jamesge 求解惑。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349537794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349544100","html_url":"https://github.com/apache/brpc/pull/145#issuecomment-349544100","issue_url":"https://api.github.com/repos/apache/brpc/issues/145","id":349544100,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU0NDEwMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T06:02:40Z","updated_at":"2017-12-06T06:02:40Z","author_association":"CONTRIBUTOR","body":"bazel一定要求自己下载和编译依赖么？这样libbrpc.a和其他使用本地安装依赖的库链接时，可能会有重复定义的冲突。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349544100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349549299","html_url":"https://github.com/apache/brpc/issues/136#issuecomment-349549299","issue_url":"https://api.github.com/repos/apache/brpc/issues/136","id":349549299,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU0OTI5OQ==","user":{"login":"seiyap70","id":7539640,"node_id":"MDQ6VXNlcjc1Mzk2NDA=","avatar_url":"https://avatars.githubusercontent.com/u/7539640?v=4","gravatar_id":"","url":"https://api.github.com/users/seiyap70","html_url":"https://github.com/seiyap70","followers_url":"https://api.github.com/users/seiyap70/followers","following_url":"https://api.github.com/users/seiyap70/following{/other_user}","gists_url":"https://api.github.com/users/seiyap70/gists{/gist_id}","starred_url":"https://api.github.com/users/seiyap70/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seiyap70/subscriptions","organizations_url":"https://api.github.com/users/seiyap70/orgs","repos_url":"https://api.github.com/users/seiyap70/repos","events_url":"https://api.github.com/users/seiyap70/events{/privacy}","received_events_url":"https://api.github.com/users/seiyap70/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T06:36:53Z","updated_at":"2017-12-06T06:36:53Z","author_association":"NONE","body":"支持客户端的https吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349549299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349562312","html_url":"https://github.com/apache/brpc/issues/151#issuecomment-349562312","issue_url":"https://api.github.com/repos/apache/brpc/issues/151","id":349562312,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU2MjMxMg==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T07:53:11Z","updated_at":"2017-12-06T07:53:11Z","author_association":"NONE","body":"E1206 14:08:22.367358 111054 input_messenger.cpp:87] Fail to parse response from 106.75.106.117:10080 by http (client's protocol)\r\nF1206 14:08:22.370126 111047 socket.cpp:2279] Check failed: (*pooled_socket)->parsing_context() == NULL context=0x7fd50004f9d0 is not NULL when socket={fd=3489 SocketId=38543036515485@106.75.106.117:10080@35292} is got from SocketPool, the protocol implementation is buggy\r\n*** Check failure stack trace: ***\r\n    @          0x112988a  google::LogMessage::Fail()\r\n    @          0x112b647  google::LogMessage::SendToLog()\r\n    @          0x11294a7  google::LogMessage::Flush()\r\n    @          0x112bfc9  google::LogMessageFatal::~LogMessageFatal()\r\n    @           0xf3129f  brpc::Socket::GetPooledSocket()\r\n    @           0xf049e6  brpc::Controller::IssueRPC()\r\n    @           0xefd7cd  brpc::Channel::CallMethod()\r\n    @           0xba0125  _ZZN11HttpHandler7PrepareERN8parallel4cpp216ComboHttpRequestEENKUlvE_clEv\r\n    @           0xba06fc  _ZNSt17_Function_handlerIFN8parallel4cpp212HttpResponseEvESt12_Bind_resultIS2_FZN11HttpHandler7PrepareERNS1_16ComboHttpRequestEEUlvE_vEEE9_M_invokeERKSt9_Any_data\r\n    @           0xb93164  _ZN5folly11makeTryWithIZZN3poi16ParallelExecutorIN8parallel4cpp212HttpResponseEE12AsyncExecuteEOSt8functionIFS5_vEEENKUlvE_clEvEUlvE_EENSt9enable_ifIXntsrSt7is_sameINSt9result_ofIFT_vEE4typeEvE5valueENS_3TryISJ_EEE4typeEOSG_\r\n    @           0xb983a4  _ZNSt17_Function_handlerIFvvESt12_Bind_resultIvFZN3poi16ParallelExecutorIN8parallel4cpp212HttpResponseEE12AsyncExecuteEOSt8functionIFS6_vEEEUlvE_vEEE9_M_invokeERKSt9_Any_data\r\n    @           0xb9105c  poi::FunctionWrapper::ThreadFunc()\r\n    @           0xef237d  bthread::TaskGroup::task_runner()\r\n    @          0x1015bf1  bthread_make_fcontext\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349562312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349569499","html_url":"https://github.com/apache/brpc/issues/150#issuecomment-349569499","issue_url":"https://api.github.com/repos/apache/brpc/issues/150","id":349569499,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU2OTQ5OQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T08:29:27Z","updated_at":"2017-12-06T08:29:27Z","author_association":"CONTRIBUTOR","body":"看看你用的操作系中，是否有类似于这个内核参数（net.ipv4.ip_local_port_range）可以配置，以帮助解决问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349569499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349574170","html_url":"https://github.com/apache/brpc/issues/151#issuecomment-349574170","issue_url":"https://api.github.com/repos/apache/brpc/issues/151","id":349574170,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU3NDE3MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T08:51:39Z","updated_at":"2017-12-06T08:51:39Z","author_association":"CONTRIBUTOR","body":"1.日志往前翻，看有没有\"context=... is not released when socket=... is returned to SocketPool\"这么句日志。\r\n2.建议跑下gcc或clang中的asan。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349574170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349583758","html_url":"https://github.com/apache/brpc/issues/151#issuecomment-349583758","issue_url":"https://api.github.com/repos/apache/brpc/issues/151","id":349583758,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU4Mzc1OA==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T09:31:06Z","updated_at":"2017-12-06T09:31:06Z","author_association":"NONE","body":"1. 没有这样的日志\r\n2. 我试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349583758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349584469","html_url":"https://github.com/apache/brpc/pull/145#issuecomment-349584469","issue_url":"https://api.github.com/repos/apache/brpc/issues/145","id":349584469,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU4NDQ2OQ==","user":{"login":"dhx1989","id":7059003,"node_id":"MDQ6VXNlcjcwNTkwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/7059003?v=4","gravatar_id":"","url":"https://api.github.com/users/dhx1989","html_url":"https://github.com/dhx1989","followers_url":"https://api.github.com/users/dhx1989/followers","following_url":"https://api.github.com/users/dhx1989/following{/other_user}","gists_url":"https://api.github.com/users/dhx1989/gists{/gist_id}","starred_url":"https://api.github.com/users/dhx1989/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhx1989/subscriptions","organizations_url":"https://api.github.com/users/dhx1989/orgs","repos_url":"https://api.github.com/users/dhx1989/repos","events_url":"https://api.github.com/users/dhx1989/events{/privacy}","received_events_url":"https://api.github.com/users/dhx1989/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T09:34:00Z","updated_at":"2017-12-06T09:34:00Z","author_association":"NONE","body":"bazel自定义下载编译依赖可以省去对本地系统安装的依赖，如果需要使用本地库时可以修改编译deps和linkopts来实现。不过如果使用bazel，最好所有模块都使用bazel来编译，这样可以一键编译，不需要再去安装依赖库等。另外如果确定支持bazel编译，最好也改一下include和import规则，bazel对google style的include方式支持更好（从根路径开始include）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349584469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349586582","html_url":"https://github.com/apache/brpc/issues/151#issuecomment-349586582","issue_url":"https://api.github.com/repos/apache/brpc/issues/151","id":349586582,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU4NjU4Mg==","user":{"login":"cool-colo","id":20718701,"node_id":"MDQ6VXNlcjIwNzE4NzAx","avatar_url":"https://avatars.githubusercontent.com/u/20718701?v=4","gravatar_id":"","url":"https://api.github.com/users/cool-colo","html_url":"https://github.com/cool-colo","followers_url":"https://api.github.com/users/cool-colo/followers","following_url":"https://api.github.com/users/cool-colo/following{/other_user}","gists_url":"https://api.github.com/users/cool-colo/gists{/gist_id}","starred_url":"https://api.github.com/users/cool-colo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cool-colo/subscriptions","organizations_url":"https://api.github.com/users/cool-colo/orgs","repos_url":"https://api.github.com/users/cool-colo/repos","events_url":"https://api.github.com/users/cool-colo/events{/privacy}","received_events_url":"https://api.github.com/users/cool-colo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T09:42:18Z","updated_at":"2017-12-06T09:42:18Z","author_association":"NONE","body":"Fail to parse response from 106.75.106.117:100880 by http (client's protocol)\r\n这条错误日志以前没见过，和这个core可能有关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349586582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349590824","html_url":"https://github.com/apache/brpc/issues/150#issuecomment-349590824","issue_url":"https://api.github.com/repos/apache/brpc/issues/150","id":349590824,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTU5MDgyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T09:58:26Z","updated_at":"2017-12-06T09:58:26Z","author_association":"CONTRIBUTOR","body":"pull最新的，允许dummy_port为0 (内核会自动选一个端口）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349590824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349646807","html_url":"https://github.com/apache/brpc/issues/148#issuecomment-349646807","issue_url":"https://api.github.com/repos/apache/brpc/issues/148","id":349646807,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY0NjgwNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T13:56:27Z","updated_at":"2017-12-06T13:56:27Z","author_association":"CONTRIBUTOR","body":"这里的主要作用是让那个被建立的线程尽快运行，而不用等待被调度。cache locality算是加分项，但不是最重要的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349646807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349647416","html_url":"https://github.com/apache/brpc/issues/146#issuecomment-349647416","issue_url":"https://api.github.com/repos/apache/brpc/issues/146","id":349647416,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY0NzQxNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T13:58:50Z","updated_at":"2017-12-06T13:58:50Z","author_association":"CONTRIBUTOR","body":"看下 #97","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349647416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349650085","html_url":"https://github.com/apache/brpc/pull/145#issuecomment-349650085","issue_url":"https://api.github.com/repos/apache/brpc/issues/145","id":349650085,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY1MDA4NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T14:09:19Z","updated_at":"2017-12-06T14:09:19Z","author_association":"CONTRIBUTOR","body":"编译方式不是互斥的，brpc中应该会有多种编译方式共存。作为一个选项，bazel自己编一套目前可以接受，不过当它和其他方式产生的库连编时，链接问题肯定是客观存在的。之后如果有较为简洁的方法，最好让第三方依赖变得可选。\r\n另外bazel的编译方式需要在travis-ci中验证，[.travis.yml](https://github.com/brpc/brpc/blob/master/.travis.yml)中可加入PURPOSE=compile-with-bazel, 并在[build_in_travis_ci.sh](https://github.com/brpc/brpc/blob/master/build_in_travis_ci.sh)中添加对应的分支确认brpc可以全部编译通过。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349650085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349657738","html_url":"https://github.com/apache/brpc/issues/148#issuecomment-349657738","issue_url":"https://api.github.com/repos/apache/brpc/issues/148","id":349657738,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTY1NzczOA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-06T14:36:31Z","updated_at":"2017-12-07T01:18:18Z","author_association":"CONTRIBUTOR","body":"@jamesge 嗯，但是没理解这里的cache locality是怎么获得到的。具体地讲，没理解什么数据已经在cache中可用了？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349657738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349868916","html_url":"https://github.com/apache/brpc/issues/153#issuecomment-349868916","issue_url":"https://api.github.com/repos/apache/brpc/issues/153","id":349868916,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTg2ODkxNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-07T05:41:42Z","updated_at":"2017-12-07T05:41:42Z","author_association":"CONTRIBUTOR","body":"1. 因为浏览器和大部分http client只支持gzip。snappy不是http的压缩标准\r\n2. -http_body_compress_threshold可以设置为0.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349868916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349868963","html_url":"https://github.com/apache/brpc/issues/152#issuecomment-349868963","issue_url":"https://api.github.com/repos/apache/brpc/issues/152","id":349868963,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTg2ODk2Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-07T05:42:12Z","updated_at":"2017-12-07T05:42:12Z","author_association":"CONTRIBUTOR","body":"检查下protobuf相关的库是不是安装正确。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349868963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349869113","html_url":"https://github.com/apache/brpc/issues/136#issuecomment-349869113","issue_url":"https://api.github.com/repos/apache/brpc/issues/136","id":349869113,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTg2OTExMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-07T05:43:30Z","updated_at":"2017-12-07T05:44:54Z","author_association":"CONTRIBUTOR","body":"client端的https年底前不出意外会加上。#37 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349869113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349964280","html_url":"https://github.com/apache/brpc/issues/153#issuecomment-349964280","issue_url":"https://api.github.com/repos/apache/brpc/issues/153","id":349964280,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTk2NDI4MA==","user":{"login":"machunleilei","id":5152460,"node_id":"MDQ6VXNlcjUxNTI0NjA=","avatar_url":"https://avatars.githubusercontent.com/u/5152460?v=4","gravatar_id":"","url":"https://api.github.com/users/machunleilei","html_url":"https://github.com/machunleilei","followers_url":"https://api.github.com/users/machunleilei/followers","following_url":"https://api.github.com/users/machunleilei/following{/other_user}","gists_url":"https://api.github.com/users/machunleilei/gists{/gist_id}","starred_url":"https://api.github.com/users/machunleilei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machunleilei/subscriptions","organizations_url":"https://api.github.com/users/machunleilei/orgs","repos_url":"https://api.github.com/users/machunleilei/repos","events_url":"https://api.github.com/users/machunleilei/events{/privacy}","received_events_url":"https://api.github.com/users/machunleilei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-07T13:18:27Z","updated_at":"2017-12-07T13:18:27Z","author_association":"NONE","body":"@jamesge \r\n1. 我感觉对于第一种其实可以完全给用户使用，如果用户自己配置了，说明是有这种需求的\r\n2. http_body_compress_threshold这个虽然可以设置，但是设置为0，说明所有的数据都会采用gzip压缩，这满足不了不需要压缩的用户需求，如果设置过大，多大是合适的，这个不太好评估。\r\n以上只是我自己的看法，当然可能并不一定是正确的，我先fork一个，把这个限制去掉，满足我这边的需求吧\r\n非常感谢回复\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349964280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349965300","html_url":"https://github.com/apache/brpc/issues/37#issuecomment-349965300","issue_url":"https://api.github.com/repos/apache/brpc/issues/37","id":349965300,"node_id":"MDEyOklzc3VlQ29tbWVudDM0OTk2NTMwMA==","user":{"login":"machunleilei","id":5152460,"node_id":"MDQ6VXNlcjUxNTI0NjA=","avatar_url":"https://avatars.githubusercontent.com/u/5152460?v=4","gravatar_id":"","url":"https://api.github.com/users/machunleilei","html_url":"https://github.com/machunleilei","followers_url":"https://api.github.com/users/machunleilei/followers","following_url":"https://api.github.com/users/machunleilei/following{/other_user}","gists_url":"https://api.github.com/users/machunleilei/gists{/gist_id}","starred_url":"https://api.github.com/users/machunleilei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machunleilei/subscriptions","organizations_url":"https://api.github.com/users/machunleilei/orgs","repos_url":"https://api.github.com/users/machunleilei/repos","events_url":"https://api.github.com/users/machunleilei/events{/privacy}","received_events_url":"https://api.github.com/users/machunleilei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-07T13:22:51Z","updated_at":"2017-12-15T15:26:20Z","author_association":"NONE","body":"@jamesge  目前client支持https定了上的日期了吗？期待好久了。谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/349965300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350003470","html_url":"https://github.com/apache/brpc/pull/145#issuecomment-350003470","issue_url":"https://api.github.com/repos/apache/brpc/issues/145","id":350003470,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDAwMzQ3MA==","user":{"login":"dhx1989","id":7059003,"node_id":"MDQ6VXNlcjcwNTkwMDM=","avatar_url":"https://avatars.githubusercontent.com/u/7059003?v=4","gravatar_id":"","url":"https://api.github.com/users/dhx1989","html_url":"https://github.com/dhx1989","followers_url":"https://api.github.com/users/dhx1989/followers","following_url":"https://api.github.com/users/dhx1989/following{/other_user}","gists_url":"https://api.github.com/users/dhx1989/gists{/gist_id}","starred_url":"https://api.github.com/users/dhx1989/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhx1989/subscriptions","organizations_url":"https://api.github.com/users/dhx1989/orgs","repos_url":"https://api.github.com/users/dhx1989/repos","events_url":"https://api.github.com/users/dhx1989/events{/privacy}","received_events_url":"https://api.github.com/users/dhx1989/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-07T15:36:23Z","updated_at":"2017-12-07T15:36:23Z","author_association":"NONE","body":"好的，travis-ci我加一下，我再添加下example 和 unittest bazel编译，完成后一起合并","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350003470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350218871","html_url":"https://github.com/apache/brpc/issues/155#issuecomment-350218871","issue_url":"https://api.github.com/repos/apache/brpc/issues/155","id":350218871,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDIxODg3MQ==","user":{"login":"zheng39562","id":10336983,"node_id":"MDQ6VXNlcjEwMzM2OTgz","avatar_url":"https://avatars.githubusercontent.com/u/10336983?v=4","gravatar_id":"","url":"https://api.github.com/users/zheng39562","html_url":"https://github.com/zheng39562","followers_url":"https://api.github.com/users/zheng39562/followers","following_url":"https://api.github.com/users/zheng39562/following{/other_user}","gists_url":"https://api.github.com/users/zheng39562/gists{/gist_id}","starred_url":"https://api.github.com/users/zheng39562/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheng39562/subscriptions","organizations_url":"https://api.github.com/users/zheng39562/orgs","repos_url":"https://api.github.com/users/zheng39562/repos","events_url":"https://api.github.com/users/zheng39562/events{/privacy}","received_events_url":"https://api.github.com/users/zheng39562/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-08T09:39:57Z","updated_at":"2017-12-08T09:39:57Z","author_association":"NONE","body":"理论上，使用request就可以获取到数据。但在使用上，会多出很多没有意义的注册请求。游戏中小包非常多，如果一秒10个包，也就是每个client就都需要10个req。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350218871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350245609","html_url":"https://github.com/apache/brpc/issues/155#issuecomment-350245609","issue_url":"https://api.github.com/repos/apache/brpc/issues/155","id":350245609,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDI0NTYwOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-08T11:51:41Z","updated_at":"2017-12-08T11:51:41Z","author_association":"CONTRIBUTOR","body":"那篇文章讲的场景偏向通知，一般来说通知的频率不会特别高。如果是server要频繁地想client发数据，那就不算通知，而是streaming了。如果client也是brpc，可以用[streaming rpc](https://github.com/brpc/brpc/blob/master/docs/cn/streaming_rpc.md)；如果client不是brpc，或者想用http，可以用[持续发送](https://github.com/brpc/brpc/blob/master/docs/cn/http_service.md#持续发送)和[持续下载](https://github.com/brpc/brpc/blob/master/docs/cn/http_client.md#持续下载)。还有一种方法是用websocket，扩展不困难，不过brpc目前并未支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350245609/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350423884","html_url":"https://github.com/apache/brpc/issues/155#issuecomment-350423884","issue_url":"https://api.github.com/repos/apache/brpc/issues/155","id":350423884,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDQyMzg4NA==","user":{"login":"zheng39562","id":10336983,"node_id":"MDQ6VXNlcjEwMzM2OTgz","avatar_url":"https://avatars.githubusercontent.com/u/10336983?v=4","gravatar_id":"","url":"https://api.github.com/users/zheng39562","html_url":"https://github.com/zheng39562","followers_url":"https://api.github.com/users/zheng39562/followers","following_url":"https://api.github.com/users/zheng39562/following{/other_user}","gists_url":"https://api.github.com/users/zheng39562/gists{/gist_id}","starred_url":"https://api.github.com/users/zheng39562/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zheng39562/subscriptions","organizations_url":"https://api.github.com/users/zheng39562/orgs","repos_url":"https://api.github.com/users/zheng39562/repos","events_url":"https://api.github.com/users/zheng39562/events{/privacy}","received_events_url":"https://api.github.com/users/zheng39562/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-09T04:49:55Z","updated_at":"2017-12-09T04:49:55Z","author_association":"NONE","body":"非常感谢。当时看streaming rpc的example时，以为是单向的，没反应过来是双工的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350423884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350554961","html_url":"https://github.com/apache/brpc/issues/156#issuecomment-350554961","issue_url":"https://api.github.com/repos/apache/brpc/issues/156","id":350554961,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDU1NDk2MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-10T15:11:55Z","updated_at":"2017-12-15T04:49:51Z","author_association":"CONTRIBUTOR","body":"The path to search protobuf can be specified actually, it's not restricted to the system one.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350554961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350625615","html_url":"https://github.com/apache/brpc/issues/148#issuecomment-350625615","issue_url":"https://api.github.com/repos/apache/brpc/issues/148","id":350625615,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDYyNTYxNQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T05:25:05Z","updated_at":"2017-12-11T05:25:05Z","author_association":"CONTRIBUTOR","body":"@jamesge ping","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350625615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350633199","html_url":"https://github.com/apache/brpc/issues/148#issuecomment-350633199","issue_url":"https://api.github.com/repos/apache/brpc/issues/148","id":350633199,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDYzMzE5OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T06:25:30Z","updated_at":"2017-12-11T06:25:30Z","author_association":"CONTRIBUTOR","body":"线程跳转越少，locality就会更好，就是这个正向关系。也未必是内核中的数据，框架本身探测事件和读取事件，也有重叠的内存区域。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350633199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350683790","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-350683790","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":350683790,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDY4Mzc5MA==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T10:28:48Z","updated_at":"2017-12-11T10:28:48Z","author_association":"CONTRIBUTOR","body":"@jamesge 求指导","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/350683790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351358098","html_url":"https://github.com/apache/brpc/issues/41#issuecomment-351358098","issue_url":"https://api.github.com/repos/apache/brpc/issues/41","id":351358098,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTM1ODA5OA==","user":{"login":"longXboy","id":11748646,"node_id":"MDQ6VXNlcjExNzQ4NjQ2","avatar_url":"https://avatars.githubusercontent.com/u/11748646?v=4","gravatar_id":"","url":"https://api.github.com/users/longXboy","html_url":"https://github.com/longXboy","followers_url":"https://api.github.com/users/longXboy/followers","following_url":"https://api.github.com/users/longXboy/following{/other_user}","gists_url":"https://api.github.com/users/longXboy/gists{/gist_id}","starred_url":"https://api.github.com/users/longXboy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/longXboy/subscriptions","organizations_url":"https://api.github.com/users/longXboy/orgs","repos_url":"https://api.github.com/users/longXboy/repos","events_url":"https://api.github.com/users/longXboy/events{/privacy}","received_events_url":"https://api.github.com/users/longXboy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-13T11:01:49Z","updated_at":"2017-12-13T11:01:49Z","author_association":"NONE","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351358098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351620530","html_url":"https://github.com/apache/brpc/issues/124#issuecomment-351620530","issue_url":"https://api.github.com/repos/apache/brpc/issues/124","id":351620530,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTYyMDUzMA==","user":{"login":"qiuxiafei","id":261796,"node_id":"MDQ6VXNlcjI2MTc5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/261796?v=4","gravatar_id":"","url":"https://api.github.com/users/qiuxiafei","html_url":"https://github.com/qiuxiafei","followers_url":"https://api.github.com/users/qiuxiafei/followers","following_url":"https://api.github.com/users/qiuxiafei/following{/other_user}","gists_url":"https://api.github.com/users/qiuxiafei/gists{/gist_id}","starred_url":"https://api.github.com/users/qiuxiafei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qiuxiafei/subscriptions","organizations_url":"https://api.github.com/users/qiuxiafei/orgs","repos_url":"https://api.github.com/users/qiuxiafei/repos","events_url":"https://api.github.com/users/qiuxiafei/events{/privacy}","received_events_url":"https://api.github.com/users/qiuxiafei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T06:26:11Z","updated_at":"2017-12-14T06:26:11Z","author_association":"NONE","body":"Any plan on mac ?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351620530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351912475","html_url":"https://github.com/apache/brpc/issues/159#issuecomment-351912475","issue_url":"https://api.github.com/repos/apache/brpc/issues/159","id":351912475,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTkxMjQ3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-15T04:46:09Z","updated_at":"2017-12-15T04:46:09Z","author_association":"CONTRIBUTOR","body":"可以试下[la](https://github.com/brpc/brpc/blob/master/docs/cn/lalb.md)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351912475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351912852","html_url":"https://github.com/apache/brpc/issues/158#issuecomment-351912852","issue_url":"https://api.github.com/repos/apache/brpc/issues/158","id":351912852,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTkxMjg1Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-15T04:49:04Z","updated_at":"2017-12-15T04:49:25Z","author_association":"CONTRIBUTOR","body":"调用[InitLogging](https://github.com/brpc/brpc/blob/master/src/butil/logging.h#L259)或者使用glog","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351912852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351913125","html_url":"https://github.com/apache/brpc/issues/153#issuecomment-351913125","issue_url":"https://api.github.com/repos/apache/brpc/issues/153","id":351913125,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTkxMzEyNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-15T04:51:36Z","updated_at":"2017-12-15T04:51:36Z","author_association":"CONTRIBUTOR","body":"\"设置为0，说明所有的数据都会采用gzip压缩\", 并不是这样，设置了request/response_compress_type才会压缩。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/351913125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352425945","html_url":"https://github.com/apache/brpc/issues/158#issuecomment-352425945","issue_url":"https://api.github.com/repos/apache/brpc/issues/158","id":352425945,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjQyNTk0NQ==","user":{"login":"luxu02","id":18062323,"node_id":"MDQ6VXNlcjE4MDYyMzIz","avatar_url":"https://avatars.githubusercontent.com/u/18062323?v=4","gravatar_id":"","url":"https://api.github.com/users/luxu02","html_url":"https://github.com/luxu02","followers_url":"https://api.github.com/users/luxu02/followers","following_url":"https://api.github.com/users/luxu02/following{/other_user}","gists_url":"https://api.github.com/users/luxu02/gists{/gist_id}","starred_url":"https://api.github.com/users/luxu02/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luxu02/subscriptions","organizations_url":"https://api.github.com/users/luxu02/orgs","repos_url":"https://api.github.com/users/luxu02/repos","events_url":"https://api.github.com/users/luxu02/events{/privacy}","received_events_url":"https://api.github.com/users/luxu02/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-18T13:31:36Z","updated_at":"2017-12-18T13:31:36Z","author_association":"NONE","body":"请问是在哪里调用呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352425945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628410","html_url":"https://github.com/apache/brpc/issues/161#issuecomment-352628410","issue_url":"https://api.github.com/repos/apache/brpc/issues/161","id":352628410,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYyODQxMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T03:20:42Z","updated_at":"2017-12-19T03:20:42Z","author_association":"CONTRIBUTOR","body":"1. 访问redis集群一般用一致性哈希，其哈希函数可定制（但必须改在brpc里），具体见[consistent_hashing_load_balancer.h](https://github.com/brpc/brpc/blob/master/src/brpc/policy/consistent_hashing_load_balancer.h#L33)和[global.cpp](https://github.com/brpc/brpc/blob/master/src/brpc/global.cpp#L95)\r\n2. [这里](https://github.com/brpc/brpc/blob/master/docs/cn/consistent_hashing.md#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F)有解释","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628498","html_url":"https://github.com/apache/brpc/issues/160#issuecomment-352628498","issue_url":"https://api.github.com/repos/apache/brpc/issues/160","id":352628498,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYyODQ5OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T03:21:24Z","updated_at":"2017-12-19T03:21:24Z","author_association":"CONTRIBUTOR","body":"看下https://github.com/brpc/brpc/blob/master/docs/cn/combo_channel.md","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628605","html_url":"https://github.com/apache/brpc/issues/158#issuecomment-352628605","issue_url":"https://api.github.com/repos/apache/brpc/issues/158","id":352628605,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYyODYwNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T03:22:06Z","updated_at":"2017-12-19T03:22:06Z","author_association":"CONTRIBUTOR","body":"一般在main函数入口的地方","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628768","html_url":"https://github.com/apache/brpc/issues/149#issuecomment-352628768","issue_url":"https://api.github.com/repos/apache/brpc/issues/149","id":352628768,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYyODc2OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T03:23:13Z","updated_at":"2017-12-19T03:23:13Z","author_association":"CONTRIBUTOR","body":"主页有个ppt","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352628768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352632906","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-352632906","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":352632906,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjYzMjkwNg==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T03:56:16Z","updated_at":"2017-12-19T03:56:16Z","author_association":"MEMBER","body":"本地尝试了发完立即close stream并且析构channel， 并没有复现这个场景。如果方便的还麻烦贴上你的测试代码， 并且说明下测试环境(物理机/虚拟机, server/client延迟)之类的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352632906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352668316","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-352668316","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":352668316,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjY2ODMxNg==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T08:03:57Z","updated_at":"2017-12-19T09:07:18Z","author_association":"CONTRIBUTOR","body":"基于example/streaming_echo_c++的例子改了下\r\n测试环境为两台物理机之间传输，文件大小500M左右\r\ncpu Intel(R) Xeon(R) CPU E5-2630 v4 @ 2.20GHz\r\n两台物理机之间ping延时为2-3ms\r\n\r\n[server.txt](https://github.com/brpc/brpc/files/1570815/server.txt)\r\n[client.txt](https://github.com/brpc/brpc/files/1570816/client.txt)\r\n@chenzhangyi ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352668316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352678863","html_url":"https://github.com/apache/brpc/issues/160#issuecomment-352678863","issue_url":"https://api.github.com/repos/apache/brpc/issues/160","id":352678863,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjY3ODg2Mw==","user":{"login":"machaelliu","id":8088007,"node_id":"MDQ6VXNlcjgwODgwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8088007?v=4","gravatar_id":"","url":"https://api.github.com/users/machaelliu","html_url":"https://github.com/machaelliu","followers_url":"https://api.github.com/users/machaelliu/followers","following_url":"https://api.github.com/users/machaelliu/following{/other_user}","gists_url":"https://api.github.com/users/machaelliu/gists{/gist_id}","starred_url":"https://api.github.com/users/machaelliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machaelliu/subscriptions","organizations_url":"https://api.github.com/users/machaelliu/orgs","repos_url":"https://api.github.com/users/machaelliu/repos","events_url":"https://api.github.com/users/machaelliu/events{/privacy}","received_events_url":"https://api.github.com/users/machaelliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T08:53:10Z","updated_at":"2017-12-19T08:54:56Z","author_association":"NONE","body":"上面的代码就是从您给出的页面中截取出来的，整个页面中只出现了一次 sub_method， 是从哪里取到的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352678863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352738761","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-352738761","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":352738761,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MjczODc2MQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T12:43:45Z","updated_at":"2017-12-19T12:43:45Z","author_association":"MEMBER","body":"你这个不是关闭channel了，而是进程退出. 进程退出的时候还在用户buffer中的数据会丢失.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352738761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352760093","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-352760093","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":352760093,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2MDA5Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T14:00:11Z","updated_at":"2017-12-19T14:00:11Z","author_association":"CONTRIBUTOR","body":"@dl239 你上面不是说“发送端是一个server”么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352760093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352761481","html_url":"https://github.com/apache/brpc/issues/163#issuecomment-352761481","issue_url":"https://api.github.com/repos/apache/brpc/issues/163","id":352761481,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2MTQ4MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T14:05:25Z","updated_at":"2017-12-19T14:05:25Z","author_association":"CONTRIBUTOR","body":"框架不会打这种日志，需要可以自己打，下游ip的[获取方式](https://github.com/brpc/brpc/blob/master/docs/cn/client.md#%E8%8E%B7%E5%8F%96server%E7%9A%84%E5%9C%B0%E5%9D%80%E5%92%8C%E7%AB%AF%E5%8F%A3)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352761481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352764313","html_url":"https://github.com/apache/brpc/issues/160#issuecomment-352764313","issue_url":"https://api.github.com/repos/apache/brpc/issues/160","id":352764313,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2NDMxMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T14:12:59Z","updated_at":"2017-12-19T14:12:59Z","author_association":"CONTRIBUTOR","body":"那个sub_method就是代表可能和method不同，但一般是相同的，因为大部分情况用这个是为了”parallel地“访问同一种method。如果不同的话，一般是访问google::protobuf::ServiceDescriptor::method(int index)获得对应的method，例子可以看下[这个单测](https://github.com/brpc/brpc/blob/ef4eddde8b861780ab3ccc3abda3e806e0ea3f09/test/brpc_channel_unittest.cpp#L455)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352764313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352767149","html_url":"https://github.com/apache/brpc/issues/124#issuecomment-352767149","issue_url":"https://api.github.com/repos/apache/brpc/issues/124","id":352767149,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjc2NzE0OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-19T14:20:22Z","updated_at":"2017-12-19T14:20:22Z","author_association":"CONTRIBUTOR","body":"Will support Mac gradually","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352767149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352946098","html_url":"https://github.com/apache/brpc/issues/147#issuecomment-352946098","issue_url":"https://api.github.com/repos/apache/brpc/issues/147","id":352946098,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mjk0NjA5OA==","user":{"login":"dl239","id":6183996,"node_id":"MDQ6VXNlcjYxODM5OTY=","avatar_url":"https://avatars.githubusercontent.com/u/6183996?v=4","gravatar_id":"","url":"https://api.github.com/users/dl239","html_url":"https://github.com/dl239","followers_url":"https://api.github.com/users/dl239/followers","following_url":"https://api.github.com/users/dl239/following{/other_user}","gists_url":"https://api.github.com/users/dl239/gists{/gist_id}","starred_url":"https://api.github.com/users/dl239/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dl239/subscriptions","organizations_url":"https://api.github.com/users/dl239/orgs","repos_url":"https://api.github.com/users/dl239/repos","events_url":"https://api.github.com/users/dl239/events{/privacy}","received_events_url":"https://api.github.com/users/dl239/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-20T02:23:17Z","updated_at":"2017-12-20T02:27:13Z","author_association":"CONTRIBUTOR","body":"我这边实际环境中发送端和接收端都是一个server，不会退出进程，昨天那个例子是为了方便在example下改的，忽略了client进程退出这一点，抱歉。我又改了下，和上面的client有两点不同\r\n1、client发送完之后一直sleep，保证进程不会退出\r\n2、将发送逻辑用大括号包起来，再现channel析构的场景\r\n@chenzhangyi @jamesge \r\n[client.txt](https://github.com/brpc/brpc/files/1573963/client.txt)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/352946098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353279502","html_url":"https://github.com/apache/brpc/issues/149#issuecomment-353279502","issue_url":"https://api.github.com/repos/apache/brpc/issues/149","id":353279502,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzI3OTUwMg==","user":{"login":"youngkan","id":12276868,"node_id":"MDQ6VXNlcjEyMjc2ODY4","avatar_url":"https://avatars.githubusercontent.com/u/12276868?v=4","gravatar_id":"","url":"https://api.github.com/users/youngkan","html_url":"https://github.com/youngkan","followers_url":"https://api.github.com/users/youngkan/followers","following_url":"https://api.github.com/users/youngkan/following{/other_user}","gists_url":"https://api.github.com/users/youngkan/gists{/gist_id}","starred_url":"https://api.github.com/users/youngkan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/youngkan/subscriptions","organizations_url":"https://api.github.com/users/youngkan/orgs","repos_url":"https://api.github.com/users/youngkan/repos","events_url":"https://api.github.com/users/youngkan/events{/privacy}","received_events_url":"https://api.github.com/users/youngkan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-21T07:35:42Z","updated_at":"2017-12-21T07:35:42Z","author_association":"NONE","body":"具体在哪，能把链接发下么？多谢了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353279502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353294500","html_url":"https://github.com/apache/brpc/issues/149#issuecomment-353294500","issue_url":"https://api.github.com/repos/apache/brpc/issues/149","id":353294500,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzI5NDUwMA==","user":{"login":"icylord","id":1522760,"node_id":"MDQ6VXNlcjE1MjI3NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1522760?v=4","gravatar_id":"","url":"https://api.github.com/users/icylord","html_url":"https://github.com/icylord","followers_url":"https://api.github.com/users/icylord/followers","following_url":"https://api.github.com/users/icylord/following{/other_user}","gists_url":"https://api.github.com/users/icylord/gists{/gist_id}","starred_url":"https://api.github.com/users/icylord/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icylord/subscriptions","organizations_url":"https://api.github.com/users/icylord/orgs","repos_url":"https://api.github.com/users/icylord/repos","events_url":"https://api.github.com/users/icylord/events{/privacy}","received_events_url":"https://api.github.com/users/icylord/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-21T08:54:45Z","updated_at":"2017-12-21T08:54:45Z","author_association":"NONE","body":"https://github.com/brpc/brpc/blob/master/docs/cn/brpc_intro.pptx @youngkan ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353294500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353393982","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353393982","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353393982,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzM5Mzk4Mg==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-21T16:25:28Z","updated_at":"2017-12-21T16:25:28Z","author_association":"NONE","body":"我用下面会引起core的代码试验了下：\r\n\r\n```\r\n+char *str;\r\n+str = \"GfG\";\r\n+*(str+1) = 'n';\r\n```\r\n\r\n会给出业务代码的位置。像stof这种throw std::invalid_argument异常的情况我在非brpc环境下也试验了一下。是可以正常提示具体core位置的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353393982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353511436","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353511436","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353511436,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzUxMTQzNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T03:05:51Z","updated_at":"2017-12-22T03:05:51Z","author_association":"CONTRIBUTOR","body":"你可以跑下asan","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353511436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353517490","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353517490","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353517490,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzUxNzQ5MA==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T04:06:33Z","updated_at":"2017-12-22T04:16:47Z","author_association":"NONE","body":"asan是内存监测工具，您的意思是stof这种，因为传入字符串导致的core，能监测出来？\r\n\r\n我先用下试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353517490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353521051","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353521051","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353521051,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzUyMTA1MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T04:46:10Z","updated_at":"2017-12-22T04:46:10Z","author_association":"CONTRIBUTOR","body":"如果你不知道为什么core，asan是帮助找出可能有内存问题的地方。如果你知道那句话铁定crash，但coredump显示位置不准，一般是开了优化的关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353521051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353522039","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353522039","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353522039,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzUyMjAzOQ==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T04:57:36Z","updated_at":"2017-12-22T05:21:02Z","author_association":"NONE","body":"我在下面的函数中，在`CallMethod`之前直接`std::stof(\"a\")`，core文件中提示的位置和最上面代码段中的一致。\r\n\r\n```\r\n#11 brpc::policy::ProcessRpcRequest (msg_base=<optimized out>) at src/brpc/policy/baidu_rpc_protocol.cpp:508\r\n```\r\n\r\n所以，可能是编译brpc的时候，增加了优化项？\r\n\r\n```\r\nCXXFLAGS=$(CPPFLAGS) -O2 -g -rdynamic -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -std=c++0x\r\n```\r\n\r\n我尝试将 -O2 去掉，重新编译实验下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353522039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353541336","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353541336","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353541336,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU0MTMzNg==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T07:41:47Z","updated_at":"2017-12-22T07:41:47Z","author_association":"NONE","body":"不是O2的问题，增加-g，brpc内部函数调用的堆栈信息已经打印出来，可以调试。\r\n\r\n不过brpc接口内部的业务代码 throw exception，导致服务core掉，这个core文件，bt后丢掉了业务代码的堆栈。这个问题是什么原因那？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353541336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353546916","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353546916","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353546916,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU0NjkxNg==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T08:18:53Z","updated_at":"2017-12-22T08:18:53Z","author_association":"MEMBER","body":"这个取决于你的thread_local实现，你可以在你的环境里面跑下bvar的ut, 里面含有benchmark.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353546916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353551672","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353551672","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353551672,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU1MTY3Mg==","user":{"login":"demiaowu","id":7204759,"node_id":"MDQ6VXNlcjcyMDQ3NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7204759?v=4","gravatar_id":"","url":"https://api.github.com/users/demiaowu","html_url":"https://github.com/demiaowu","followers_url":"https://api.github.com/users/demiaowu/followers","following_url":"https://api.github.com/users/demiaowu/following{/other_user}","gists_url":"https://api.github.com/users/demiaowu/gists{/gist_id}","starred_url":"https://api.github.com/users/demiaowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/demiaowu/subscriptions","organizations_url":"https://api.github.com/users/demiaowu/orgs","repos_url":"https://api.github.com/users/demiaowu/repos","events_url":"https://api.github.com/users/demiaowu/events{/privacy}","received_events_url":"https://api.github.com/users/demiaowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T08:48:12Z","updated_at":"2017-12-22T08:48:12Z","author_association":"NONE","body":"我测试和小demo的实现都是使用的就是C++11的thread_local","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353551672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353560528","html_url":"https://github.com/apache/brpc/issues/167#issuecomment-353560528","issue_url":"https://api.github.com/repos/apache/brpc/issues/167","id":353560528,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2MDUyOA==","user":{"login":"liaosimin","id":9331678,"node_id":"MDQ6VXNlcjkzMzE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/9331678?v=4","gravatar_id":"","url":"https://api.github.com/users/liaosimin","html_url":"https://github.com/liaosimin","followers_url":"https://api.github.com/users/liaosimin/followers","following_url":"https://api.github.com/users/liaosimin/following{/other_user}","gists_url":"https://api.github.com/users/liaosimin/gists{/gist_id}","starred_url":"https://api.github.com/users/liaosimin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liaosimin/subscriptions","organizations_url":"https://api.github.com/users/liaosimin/orgs","repos_url":"https://api.github.com/users/liaosimin/repos","events_url":"https://api.github.com/users/liaosimin/events{/privacy}","received_events_url":"https://api.github.com/users/liaosimin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T09:37:58Z","updated_at":"2017-12-22T09:37:58Z","author_association":"NONE","body":"sudo apt-get install google-perftools libgoogle-perftools-dev","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353560528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353563667","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353563667","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353563667,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2MzY2Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T09:54:50Z","updated_at":"2017-12-22T09:54:50Z","author_association":"CONTRIBUTOR","body":"bvar C++版中的reducer和recorder等变量是每个线程累加到自己的TLS中去，局部数据过大或读取时会合并。java版是累加到绑定的bucket中去（可能有冲突）。概念上是简单的。性能实现的话就不太好说了。另外这种代码对优化是敏感的，确认你的测试代码开了O2。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353563667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353563868","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353563868","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353563868,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2Mzg2OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T09:55:53Z","updated_at":"2017-12-22T09:55:53Z","author_association":"CONTRIBUTOR","body":"O2会影响bt的准确度","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353563868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353564081","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353564081","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353564081,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2NDA4MQ==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T09:57:00Z","updated_at":"2017-12-22T09:57:00Z","author_association":"NONE","body":"我去掉了O2，但是rpc接口内部的函数调用栈确实是没有体现在core文件当中。这个事是为啥呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353564081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353564384","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353564384","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353564384,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2NDM4NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T09:58:28Z","updated_at":"2017-12-22T09:58:28Z","author_association":"CONTRIBUTOR","body":"这是不可能的，说明没有去全。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353564384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353564388","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353564388","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353564388,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2NDM4OA==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T09:58:30Z","updated_at":"2017-12-22T09:58:30Z","author_association":"NONE","body":"只有下面的堆栈信息：\r\n\r\n```\r\n(gdb) bt\r\n#0  0x00007fc23f2261f7 in raise () from /lib64/libc.so.6\r\n#1  0x00007fc23f2278e8 in abort () from /lib64/libc.so.6\r\n#2  0x00000000010e0235 in __gnu_cxx::__verbose_terminate_handler() ()\r\n#3  0x0000000001089e56 in __cxxabiv1::__terminate(void (*)()) ()\r\n#4  0x00000000010dfcd9 in __cxa_call_terminate ()\r\n#5  0x0000000001089d44 in __gxx_personality_v0 ()\r\n#6  0x00000000010e58e3 in _Unwind_RaiseException_Phase2 ()\r\n#7  0x00000000010e60d7 in _Unwind_Resume ()\r\n#8  0x0000000000da5d75 in brpc::policy::ProcessRpcRequest (msg_base=0x7fc208022700) at src/brpc/policy/baidu_rpc_protocol.cpp:508\r\n```\r\n\r\n如果是我自己非rpc服务，throw exception导致的core，core文件会明确指出哪里出问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353564388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353565145","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353565145","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353565145,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2NTE0NQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T10:02:29Z","updated_at":"2017-12-22T10:02:29Z","author_association":"MEMBER","body":"@demiaowu 建议贴一下你的测试代码，环境(OS和机器配置), 以及最后的数据\r\n单纯从这个issue中很难获取任何有用的信息.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353565145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353565251","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353565251","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353565251,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2NTI1MQ==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T10:03:06Z","updated_at":"2017-12-22T10:03:06Z","author_association":"NONE","body":"brpc怎么修改Makefile，才能保证业务内部堆栈的输出呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353565251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353566359","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-353566359","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":353566359,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU2NjM1OQ==","user":{"login":"adanteng","id":5207720,"node_id":"MDQ6VXNlcjUyMDc3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5207720?v=4","gravatar_id":"","url":"https://api.github.com/users/adanteng","html_url":"https://github.com/adanteng","followers_url":"https://api.github.com/users/adanteng/followers","following_url":"https://api.github.com/users/adanteng/following{/other_user}","gists_url":"https://api.github.com/users/adanteng/gists{/gist_id}","starred_url":"https://api.github.com/users/adanteng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adanteng/subscriptions","organizations_url":"https://api.github.com/users/adanteng/orgs","repos_url":"https://api.github.com/users/adanteng/repos","events_url":"https://api.github.com/users/adanteng/events{/privacy}","received_events_url":"https://api.github.com/users/adanteng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T10:08:49Z","updated_at":"2017-12-22T10:09:07Z","author_association":"NONE","body":"我也构造了segmentfault类型的错误在rpc的接口中，类似我之前说的：\r\n\r\n```\r\n+char *str;\r\n+str = \"GfG\";\r\n+*(str+1) = 'n';\r\n```\r\n\r\n这种报错，在core文件中，是有明确体现的，能直接定位问题的位置","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353566359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353585444","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353585444","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353585444,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzU4NTQ0NA==","user":{"login":"demiaowu","id":7204759,"node_id":"MDQ6VXNlcjcyMDQ3NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7204759?v=4","gravatar_id":"","url":"https://api.github.com/users/demiaowu","html_url":"https://github.com/demiaowu","followers_url":"https://api.github.com/users/demiaowu/followers","following_url":"https://api.github.com/users/demiaowu/following{/other_user}","gists_url":"https://api.github.com/users/demiaowu/gists{/gist_id}","starred_url":"https://api.github.com/users/demiaowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/demiaowu/subscriptions","organizations_url":"https://api.github.com/users/demiaowu/orgs","repos_url":"https://api.github.com/users/demiaowu/repos","events_url":"https://api.github.com/users/demiaowu/events{/privacy}","received_events_url":"https://api.github.com/users/demiaowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T12:04:46Z","updated_at":"2017-12-22T12:05:58Z","author_association":"NONE","body":"@jamesge @chenzhangyi  就是日常用的笔记本，i7-7代，标准电压版。现在的主要疑问还是，单单测试cpp11的thread_local，在单线程的情况下性能较atomic相差较多，随着线程数增加，thread_local的性能比atomic慢慢好一些（因为在多线程情况下atomic存在竞争和CPU cache失效），**但是在https://github.com/brpc/brpc/blob/master/docs/cn/bvar.md 图中显示，bvar性能总是优于atomic**（这是我比较疑惑的地方）。而bvar是基于thread local实现的，那么理论上在线程数据较少（我这边机器测试显示1~2个线程）的时候，bvar的性能应该比atomic差才对。比如下面代码给出单个线程thread_local测试和atomic的比较，thread local比atomic性能差，当然随着线程数增加，thread local性能开始比atomic好了。\r\n```\r\n    uint64_t kMaxLoop = 1000000000UL;\r\n\r\n    thread_local int64_t count1 = 0;\r\n    TestTimer t1;\r\n    for (uint64_t i=0; i<kMaxLoop; ++i)\r\n    {\r\n        ++ count1;\r\n    }\r\n\r\n    double time1 = t1.elapsed_micro();\r\n    std::cout << \"thread local: \" << time1 /1000/1000<< std::endl;\r\n\r\n\r\n    std::atomic<int64_t> atomic1(0);\r\n    TestTimer t2;\r\n    for (uint64_t i=0; i<kMaxLoop; ++i)\r\n    {\r\n        ++ atomic1;\r\n    }\r\n\r\n    double time2 = t2.elapsed_micro();\r\n    std::cout << \"atomic: \" << time2 / 1000 / 1000 << std::endl;\r\n```\r\n\r\n不知道您那边具体TLS使用的是？（其中TestTimer是一个获取时间的间隔的工具类）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353585444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353610604","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353610604","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353610604,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzYxMDYwNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-22T14:40:40Z","updated_at":"2017-12-22T14:40:40Z","author_association":"CONTRIBUTOR","body":"可以试下__thread，看看有什么变化，并且一定要加上-O2. atomic那个作为对比应该这么调用atomic1.fetch_add(1, std::memory_order_relaxed)，默认的fence是memory_order_seq_cst，有所不同。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353610604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353698420","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353698420","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353698420,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzY5ODQyMA==","user":{"login":"demiaowu","id":7204759,"node_id":"MDQ6VXNlcjcyMDQ3NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7204759?v=4","gravatar_id":"","url":"https://api.github.com/users/demiaowu","html_url":"https://github.com/demiaowu","followers_url":"https://api.github.com/users/demiaowu/followers","following_url":"https://api.github.com/users/demiaowu/following{/other_user}","gists_url":"https://api.github.com/users/demiaowu/gists{/gist_id}","starred_url":"https://api.github.com/users/demiaowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/demiaowu/subscriptions","organizations_url":"https://api.github.com/users/demiaowu/orgs","repos_url":"https://api.github.com/users/demiaowu/repos","events_url":"https://api.github.com/users/demiaowu/events{/privacy}","received_events_url":"https://api.github.com/users/demiaowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T01:20:39Z","updated_at":"2017-12-23T01:20:39Z","author_association":"NONE","body":"有对比__thread和cpp11 thread_local，性能相差无几，有加O2选项。atomic确实用的默认最严格内存序，改成atomic1.fetch_add(1, std::memory_order_relaxed)，估计atomic性能会更好。手边暂时没机器，明天再测测~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353698420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353699609","html_url":"https://github.com/apache/brpc/issues/169#issuecomment-353699609","issue_url":"https://api.github.com/repos/apache/brpc/issues/169","id":353699609,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzY5OTYwOQ==","user":{"login":"demiaowu","id":7204759,"node_id":"MDQ6VXNlcjcyMDQ3NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7204759?v=4","gravatar_id":"","url":"https://api.github.com/users/demiaowu","html_url":"https://github.com/demiaowu","followers_url":"https://api.github.com/users/demiaowu/followers","following_url":"https://api.github.com/users/demiaowu/following{/other_user}","gists_url":"https://api.github.com/users/demiaowu/gists{/gist_id}","starred_url":"https://api.github.com/users/demiaowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/demiaowu/subscriptions","organizations_url":"https://api.github.com/users/demiaowu/orgs","repos_url":"https://api.github.com/users/demiaowu/repos","events_url":"https://api.github.com/users/demiaowu/events{/privacy}","received_events_url":"https://api.github.com/users/demiaowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T01:42:08Z","updated_at":"2017-12-23T01:54:06Z","author_association":"NONE","body":"一个线程一个Event loop，event loop上面的任务并不都能work stealing，因为很多任务都是关注某一个fd，而这个fd polling在这个Event loop上，这是一种强相关，并不能简单的转到其他的event loop来实现work stealing。\r\n\r\n“回调里打日志慢一些，访问redis卡顿，计算重一点，等待中的其他请求就会大量超时”——这是长尾，遵循排队论的原则，1,2,3,4,5,6,7,8个请求，先进先出，1如果延迟100ms，那么2,3,4,5,6,7,8的延迟都将增加100ms，长尾处理不好会对服务质量产生较大的影响。\r\n\r\n所以简单的mutil event loop可能只试用于一些简单，延迟分布统一的服务端（有长尾的服务端并不合适），类似Web服务器，以Nginx为例，就是多个进程，多个event loop，一个event loop服务listen和链接分发。因为web服务场景是一个长尾较少的服务端场景（实际上现在nginx除了event loop外也已经引入了线程池）。\r\n\r\n“ 这个任务队列应该是每个线程一个自己的队列， 否则共用一个队列， 则天生就是work strealing 的”——这样虽然work stealing了，但是多个线程竞争同一个队列，这种竞争开销不容忽视，而且很多时候是致命的。\r\n\r\n自己所理解的可能得，多线程（一个线程一个event loop）+ 线程池，长尾请求从event loop丢给线程池处理，线程池实现work stealing。\r\n\r\n自己从自己所了解的点来讨论这个问题，更多关于bthread是如何处理长尾，如何work stealing来充分利用多核心，避免长尾影响的？期待 @jamesge 解疑\r\n\r\n  \r\n    ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353699609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353702879","html_url":"https://github.com/apache/brpc/issues/166#issuecomment-353702879","issue_url":"https://api.github.com/repos/apache/brpc/issues/166","id":353702879,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwMjg3OQ==","user":{"login":"demiaowu","id":7204759,"node_id":"MDQ6VXNlcjcyMDQ3NTk=","avatar_url":"https://avatars.githubusercontent.com/u/7204759?v=4","gravatar_id":"","url":"https://api.github.com/users/demiaowu","html_url":"https://github.com/demiaowu","followers_url":"https://api.github.com/users/demiaowu/followers","following_url":"https://api.github.com/users/demiaowu/following{/other_user}","gists_url":"https://api.github.com/users/demiaowu/gists{/gist_id}","starred_url":"https://api.github.com/users/demiaowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/demiaowu/subscriptions","organizations_url":"https://api.github.com/users/demiaowu/orgs","repos_url":"https://api.github.com/users/demiaowu/repos","events_url":"https://api.github.com/users/demiaowu/events{/privacy}","received_events_url":"https://api.github.com/users/demiaowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T02:54:56Z","updated_at":"2017-12-23T02:54:56Z","author_association":"NONE","body":"@jamesge @chenzhangyi  找到原因了，原来是自己在camke中加-O2加错了，大写的尴尬~自己的写的类似bvar的小demo，单线程my: 10ns，atomic: 5.7ns，两个线程就开始翻身了：my: 还是10ns左右，atomic到40+ns。复合预期。\r\n\r\n看您的bvar在单线程的情况下都比atomic好，厉害。感觉自己从 “bvar“ 到thread_local的映射查找还需要优化，现在只是简单的用unordered_map来实现的，感觉查找消耗比较大","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353702879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353703620","html_url":"https://github.com/apache/brpc/issues/169#issuecomment-353703620","issue_url":"https://api.github.com/repos/apache/brpc/issues/169","id":353703620,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwMzYyMA==","user":{"login":"zylthinking","id":1066931,"node_id":"MDQ6VXNlcjEwNjY5MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1066931?v=4","gravatar_id":"","url":"https://api.github.com/users/zylthinking","html_url":"https://github.com/zylthinking","followers_url":"https://api.github.com/users/zylthinking/followers","following_url":"https://api.github.com/users/zylthinking/following{/other_user}","gists_url":"https://api.github.com/users/zylthinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zylthinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zylthinking/subscriptions","organizations_url":"https://api.github.com/users/zylthinking/orgs","repos_url":"https://api.github.com/users/zylthinking/repos","events_url":"https://api.github.com/users/zylthinking/events{/privacy}","received_events_url":"https://api.github.com/users/zylthinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T03:11:17Z","updated_at":"2017-12-23T03:11:17Z","author_association":"NONE","body":"因为很多任务都是关注某一个fd，而这个fd polling在这个Event loop上，这是一种强相关，并不能简单的转到其他的event loop来实现work stealing。\r\n\r\n如果这是理由 很显然bthread  也做不到stealing  这和线程模型完全没关系","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353703620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353704374","html_url":"https://github.com/apache/brpc/issues/169#issuecomment-353704374","issue_url":"https://api.github.com/repos/apache/brpc/issues/169","id":353704374,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwNDM3NA==","user":{"login":"zylthinking","id":1066931,"node_id":"MDQ6VXNlcjEwNjY5MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1066931?v=4","gravatar_id":"","url":"https://api.github.com/users/zylthinking","html_url":"https://github.com/zylthinking","followers_url":"https://api.github.com/users/zylthinking/followers","following_url":"https://api.github.com/users/zylthinking/following{/other_user}","gists_url":"https://api.github.com/users/zylthinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zylthinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zylthinking/subscriptions","organizations_url":"https://api.github.com/users/zylthinking/orgs","repos_url":"https://api.github.com/users/zylthinking/repos","events_url":"https://api.github.com/users/zylthinking/events{/privacy}","received_events_url":"https://api.github.com/users/zylthinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T03:28:29Z","updated_at":"2017-12-23T03:28:29Z","author_association":"NONE","body":"我大概明白所谓eventloop 不好是什么意思了 感情是没有任务队列这个概念 所有请求在socket缓冲区排队的意思啊","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353704374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353705175","html_url":"https://github.com/apache/brpc/issues/169#issuecomment-353705175","issue_url":"https://api.github.com/repos/apache/brpc/issues/169","id":353705175,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwNTE3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T03:53:16Z","updated_at":"2017-12-23T03:53:16Z","author_association":"CONTRIBUTOR","body":"eventloop, work stealing都只是线程调度的一部分，这里该看的是要解决的问题或想达成的目标：只要工作线程还有空闲，请求就应该被及时地被处理，而不是等在某个队列里。多个平行运行的eventloop是做不到这点的，而共享一个队列性能又差。怎么让所有cpu尽量并行，同时又让请求被及时处理，还要考虑系统调用的开销、cpu coherence的制约等主要因素，到目前为止仍然是困难的。这里的问题早不是可行与否，而是能做到多好。要理解具体的困难，可能得看的深入一点才能明白，恐怕不是我几句话就能概括好的。举个例子，目前CPU正在从SMP逐渐转移至NUMA架构，CPU数目（不是核心数）越来越多，这个架构要尽量避免访问其他CPU上的内存，否则性能就差的非常多（20%以上），怎么调度目前仍然非常困难的。这和调模型是类似的，有很多idea，然后要一个个试，最后找到平衡了功能和简洁的方案。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353705175/reactions","total_count":19,"+1":17,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353705346","html_url":"https://github.com/apache/brpc/issues/168#issuecomment-353705346","issue_url":"https://api.github.com/repos/apache/brpc/issues/168","id":353705346,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwNTM0Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T03:57:51Z","updated_at":"2017-12-23T03:57:51Z","author_association":"CONTRIBUTOR","body":"65行的consume是和78行的release配对的，你想象一个线程在正好在78行要store完时，另一个线程在65行调用了load，这时需要那对fence来确保TaskControl::init中的对TaskControl的修改对第二个线程可见。consume的意思是只关注指针指向的区域。如果init中还修改了TaskControl意外的东西，我也要确保可见的话，就要用acquire。这套机制在singleton模式中很常见，但在刚接触memory fence时是有点难理解的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353705346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353705550","html_url":"https://github.com/apache/brpc/issues/168#issuecomment-353705550","issue_url":"https://api.github.com/repos/apache/brpc/issues/168","id":353705550,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwNTU1MA==","user":{"login":"zylthinking","id":1066931,"node_id":"MDQ6VXNlcjEwNjY5MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1066931?v=4","gravatar_id":"","url":"https://api.github.com/users/zylthinking","html_url":"https://github.com/zylthinking","followers_url":"https://api.github.com/users/zylthinking/followers","following_url":"https://api.github.com/users/zylthinking/following{/other_user}","gists_url":"https://api.github.com/users/zylthinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zylthinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zylthinking/subscriptions","organizations_url":"https://api.github.com/users/zylthinking/orgs","repos_url":"https://api.github.com/users/zylthinking/repos","events_url":"https://api.github.com/users/zylthinking/events{/privacy}","received_events_url":"https://api.github.com/users/zylthinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T04:04:49Z","updated_at":"2017-12-23T04:04:49Z","author_association":"NONE","body":"我知道你们想干什么， 但你仔细想想， 是不是 所有 memory_order_release， memory_order_consume 都能用 memory_order_relax 替换？ 甚至在 x86, x64 上， 干脆可以直接将 atomic 省略掉","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353705550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353706194","html_url":"https://github.com/apache/brpc/issues/168#issuecomment-353706194","issue_url":"https://api.github.com/repos/apache/brpc/issues/168","id":353706194,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwNjE5NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T04:25:28Z","updated_at":"2017-12-23T04:26:24Z","author_association":"CONTRIBUTOR","body":"需要可见的不是\"g_task_control\"这个指针，而是它指向内存中的各种字段。后续对Taskcontrol的函数调用操作的内存并不是那个指针本身（的字面值），而是指向的各种字段。你只盯着那个指针的可见性，就忘记它并不是真正被需要的东西了。x86上不用fence也能工作是因为x86的load/save自带acquire和release。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353706194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353706667","html_url":"https://github.com/apache/brpc/issues/168#issuecomment-353706667","issue_url":"https://api.github.com/repos/apache/brpc/issues/168","id":353706667,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzcwNjY2Nw==","user":{"login":"zylthinking","id":1066931,"node_id":"MDQ6VXNlcjEwNjY5MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1066931?v=4","gravatar_id":"","url":"https://api.github.com/users/zylthinking","html_url":"https://github.com/zylthinking","followers_url":"https://api.github.com/users/zylthinking/followers","following_url":"https://api.github.com/users/zylthinking/following{/other_user}","gists_url":"https://api.github.com/users/zylthinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zylthinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zylthinking/subscriptions","organizations_url":"https://api.github.com/users/zylthinking/orgs","repos_url":"https://api.github.com/users/zylthinking/repos","events_url":"https://api.github.com/users/zylthinking/events{/privacy}","received_events_url":"https://api.github.com/users/zylthinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-23T04:39:25Z","updated_at":"2017-12-23T04:39:25Z","author_association":"NONE","body":"貌似你是对的 我没仔细想","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353706667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353841768","html_url":"https://github.com/apache/brpc/pull/98#issuecomment-353841768","issue_url":"https://api.github.com/repos/apache/brpc/issues/98","id":353841768,"node_id":"MDEyOklzc3VlQ29tbWVudDM1Mzg0MTc2OA==","user":{"login":"beenchaos","id":2330478,"node_id":"MDQ6VXNlcjIzMzA0Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2330478?v=4","gravatar_id":"","url":"https://api.github.com/users/beenchaos","html_url":"https://github.com/beenchaos","followers_url":"https://api.github.com/users/beenchaos/followers","following_url":"https://api.github.com/users/beenchaos/following{/other_user}","gists_url":"https://api.github.com/users/beenchaos/gists{/gist_id}","starred_url":"https://api.github.com/users/beenchaos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beenchaos/subscriptions","organizations_url":"https://api.github.com/users/beenchaos/orgs","repos_url":"https://api.github.com/users/beenchaos/repos","events_url":"https://api.github.com/users/beenchaos/events{/privacy}","received_events_url":"https://api.github.com/users/beenchaos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-25T07:28:23Z","updated_at":"2017-12-25T07:28:23Z","author_association":"NONE","body":"Cool job, when the pull request will be merged into master? @kenshinxf.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353841768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353902277","html_url":"https://github.com/apache/brpc/issues/116#issuecomment-353902277","issue_url":"https://api.github.com/repos/apache/brpc/issues/116","id":353902277,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzkwMjI3Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T01:42:09Z","updated_at":"2017-12-26T01:42:09Z","author_association":"CONTRIBUTOR","body":"@jamesge \r\n1. 现在rdma 的进度如何，是否有望在最近merge到master分支？\r\n2. 如果不能merge的话，能先扫盲一下，rdma 的具体features吗？以及未来它的一些典型使用场景。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353902277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353908427","html_url":"https://github.com/apache/brpc/issues/116#issuecomment-353908427","issue_url":"https://api.github.com/repos/apache/brpc/issues/116","id":353908427,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzkwODQyNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T02:53:38Z","updated_at":"2017-12-26T02:53:38Z","author_association":"CONTRIBUTOR","body":"1. 还在内部使用和改进中\r\n2. 会merge。rdma主要用在高性能存储和计算的场景，对吞吐和延时的要求比较高","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353908427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353909519","html_url":"https://github.com/apache/brpc/issues/171#issuecomment-353909519","issue_url":"https://api.github.com/repos/apache/brpc/issues/171","id":353909519,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzkwOTUxOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T03:04:44Z","updated_at":"2017-12-26T03:04:44Z","author_association":"CONTRIBUTOR","body":"某个工作线程被唤醒之后要看到signal之前的内存修改（一般是相应的job），如果没有这个fence，被唤醒的线程可能会看到还在init过程中的job。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353909519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353909702","html_url":"https://github.com/apache/brpc/issues/170#issuecomment-353909702","issue_url":"https://api.github.com/repos/apache/brpc/issues/170","id":353909702,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzkwOTcwMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T03:06:55Z","updated_at":"2017-12-26T03:06:55Z","author_association":"CONTRIBUTOR","body":"choose_one_group的fence是不严谨的，应该用acquire，可能是直接从上下文直接拷贝过来没有改。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353909702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353909971","html_url":"https://github.com/apache/brpc/issues/172#issuecomment-353909971","issue_url":"https://api.github.com/repos/apache/brpc/issues/172","id":353909971,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzkwOTk3MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T03:10:27Z","updated_at":"2017-12-26T03:10:27Z","author_association":"CONTRIBUTOR","body":"“在内存耗尽的情况下“ 这种情况已经不太正常了。内存耗尽的前提下，按我的经验绝大部分C++程序都不能正常运行，总会有什么地方忘记判断malloc/new的返回值或是没有捕捉异常。所以这种情况下尽力即可，对用户保持一定的透明，也方便未来调整。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353909971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353914422","html_url":"https://github.com/apache/brpc/issues/172#issuecomment-353914422","issue_url":"https://api.github.com/repos/apache/brpc/issues/172","id":353914422,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MzkxNDQyMg==","user":{"login":"zylthinking","id":1066931,"node_id":"MDQ6VXNlcjEwNjY5MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1066931?v=4","gravatar_id":"","url":"https://api.github.com/users/zylthinking","html_url":"https://github.com/zylthinking","followers_url":"https://api.github.com/users/zylthinking/followers","following_url":"https://api.github.com/users/zylthinking/following{/other_user}","gists_url":"https://api.github.com/users/zylthinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zylthinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zylthinking/subscriptions","organizations_url":"https://api.github.com/users/zylthinking/orgs","repos_url":"https://api.github.com/users/zylthinking/repos","events_url":"https://api.github.com/users/zylthinking/events{/privacy}","received_events_url":"https://api.github.com/users/zylthinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-26T04:07:09Z","updated_at":"2017-12-26T04:07:09Z","author_association":"NONE","body":"也就是说我的理解是没问题的是吗, 我其实是想确认这个","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/353914422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354394012","html_url":"https://github.com/apache/brpc/issues/174#issuecomment-354394012","issue_url":"https://api.github.com/repos/apache/brpc/issues/174","id":354394012,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NDAxMg==","user":{"login":"Kontinuation","id":5501374,"node_id":"MDQ6VXNlcjU1MDEzNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5501374?v=4","gravatar_id":"","url":"https://api.github.com/users/Kontinuation","html_url":"https://github.com/Kontinuation","followers_url":"https://api.github.com/users/Kontinuation/followers","following_url":"https://api.github.com/users/Kontinuation/following{/other_user}","gists_url":"https://api.github.com/users/Kontinuation/gists{/gist_id}","starred_url":"https://api.github.com/users/Kontinuation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kontinuation/subscriptions","organizations_url":"https://api.github.com/users/Kontinuation/orgs","repos_url":"https://api.github.com/users/Kontinuation/repos","events_url":"https://api.github.com/users/Kontinuation/events{/privacy}","received_events_url":"https://api.github.com/users/Kontinuation/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T03:46:28Z","updated_at":"2017-12-29T03:46:28Z","author_association":"MEMBER","body":"除了bthread之外，bvar中也有许多leaky thread，这导致无法在需要能安全地unload的动态库中使用brpc channel。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354394012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354394032","html_url":"https://github.com/apache/brpc/issues/174#issuecomment-354394032","issue_url":"https://api.github.com/repos/apache/brpc/issues/174","id":354394032,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NDAzMg==","user":{"login":"zylthinking","id":1066931,"node_id":"MDQ6VXNlcjEwNjY5MzE=","avatar_url":"https://avatars.githubusercontent.com/u/1066931?v=4","gravatar_id":"","url":"https://api.github.com/users/zylthinking","html_url":"https://github.com/zylthinking","followers_url":"https://api.github.com/users/zylthinking/followers","following_url":"https://api.github.com/users/zylthinking/following{/other_user}","gists_url":"https://api.github.com/users/zylthinking/gists{/gist_id}","starred_url":"https://api.github.com/users/zylthinking/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zylthinking/subscriptions","organizations_url":"https://api.github.com/users/zylthinking/orgs","repos_url":"https://api.github.com/users/zylthinking/repos","events_url":"https://api.github.com/users/zylthinking/events{/privacy}","received_events_url":"https://api.github.com/users/zylthinking/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T03:46:43Z","updated_at":"2017-12-29T03:46:43Z","author_association":"NONE","body":"在一个 bthread 中调用 bthread_stop_world 将会自己死锁","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354394032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354395320","html_url":"https://github.com/apache/brpc/issues/173#issuecomment-354395320","issue_url":"https://api.github.com/repos/apache/brpc/issues/173","id":354395320,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NTMyMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T04:08:40Z","updated_at":"2017-12-29T04:08:40Z","author_association":"CONTRIBUTOR","body":"都可以","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354395320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354395418","html_url":"https://github.com/apache/brpc/issues/174#issuecomment-354395418","issue_url":"https://api.github.com/repos/apache/brpc/issues/174","id":354395418,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NTQxOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T04:10:27Z","updated_at":"2017-12-29T04:11:40Z","author_association":"CONTRIBUTOR","body":"* 线程退出必然能构造死锁，所以线程都不用退，pthread也是这样。\r\n* 线程退出与否和能不能用动态库关系不大。\r\n* bthread_stop_world这个接口是没有用的，只是历史原因予以保留。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354395418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354396071","html_url":"https://github.com/apache/brpc/issues/174#issuecomment-354396071","issue_url":"https://api.github.com/repos/apache/brpc/issues/174","id":354396071,"node_id":"MDEyOklzc3VlQ29tbWVudDM1NDM5NjA3MQ==","user":{"login":"Kontinuation","id":5501374,"node_id":"MDQ6VXNlcjU1MDEzNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5501374?v=4","gravatar_id":"","url":"https://api.github.com/users/Kontinuation","html_url":"https://github.com/Kontinuation","followers_url":"https://api.github.com/users/Kontinuation/followers","following_url":"https://api.github.com/users/Kontinuation/following{/other_user}","gists_url":"https://api.github.com/users/Kontinuation/gists{/gist_id}","starred_url":"https://api.github.com/users/Kontinuation/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kontinuation/subscriptions","organizations_url":"https://api.github.com/users/Kontinuation/orgs","repos_url":"https://api.github.com/users/Kontinuation/repos","events_url":"https://api.github.com/users/Kontinuation/events{/privacy}","received_events_url":"https://api.github.com/users/Kontinuation/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-29T04:23:05Z","updated_at":"2017-12-29T04:23:05Z","author_association":"MEMBER","body":"这边有遇到过手动dlclose了使用了brpc channel的动态库之后，动态库中创建的bthread timer线程被调度到导致段错误的情况。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/354396071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]