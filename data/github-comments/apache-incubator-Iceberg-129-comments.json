[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972582947","html_url":"https://github.com/apache/iceberg/issues/3541#issuecomment-972582947","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3541","id":972582947,"node_id":"IC_kwDOCW7NX845-HAj","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T06:43:33Z","updated_at":"2021-11-18T06:44:58Z","author_association":"CONTRIBUTOR","body":"Ok, actually I spoke too soon.\r\n\r\nI've gotten at least one test to work now (the session catalog).\r\n\r\nIt might not be possible for us to get the other catalogs to work, we'll see as some of the behavior does rely on `SessionCatalog`.\r\n\r\nI will follow up with some kind of draft PR in the next few days.\r\n\r\nThanks for your patience and report @pan3793!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972582947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972608175","html_url":"https://github.com/apache/iceberg/issues/3541#issuecomment-972608175","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3541","id":972608175,"node_id":"IC_kwDOCW7NX845-NKv","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T07:33:39Z","updated_at":"2021-11-18T07:33:39Z","author_association":"CONTRIBUTOR","body":"Appears we might have things working after all, for all catalogs!\r\n\r\nThanks for your continued patience.\r\n\r\nI'll push a PR shortly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972608175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972627253","html_url":"https://github.com/apache/iceberg/issues/3541#issuecomment-972627253","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3541","id":972627253,"node_id":"IC_kwDOCW7NX845-R01","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T08:06:45Z","updated_at":"2021-11-18T08:06:45Z","author_association":"CONTRIBUTOR","body":"> I encounter this issue when change the TPCDS test suite from Delta table format to Iceberg. The drop database cascade sql works with delta but failed in iceberg.\r\n> \r\n> https://github.com/apache/incubator-kyuubi/blob/2baabf46cacf745e5ceaf78192f9f2359dc9e477/kyuubi-server/src/test/scala/org/apache/kyuubi/operation/tpcds/OutputSchemaTPCDSSuite.scala#L70\r\n\r\n@pan3793 - Please let me know when you have a completed version of the TPC-DS suite in Kyuubi that works with Iceberg.\r\n\r\nI'd love to be able to possibly run that sometimes. I have a version that I can run myself, but it's not very well developed. Your delta one looks decent, so I'd love to see it as an Iceberg implementation if that's what you're working on!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972627253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972635866","html_url":"https://github.com/apache/iceberg/issues/3541#issuecomment-972635866","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3541","id":972635866,"node_id":"IC_kwDOCW7NX845-T7a","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T08:19:55Z","updated_at":"2021-11-18T08:21:00Z","author_association":"MEMBER","body":"> So the contract says that things should CASCADE by default. Which is why it's not exposed to Iceberg or other connectors.\r\n\r\nYea, that's my point.\r\n\r\n> Appears we might have things working after all, for all catalogs!\r\n\r\nI realized it when I looked through the codebase. \r\n\r\n> Please let me know when you have a completed version of the TPC-DS suite in Kyuubi that works with Iceberg.\r\n\r\nThe suite I show you only do a verification of TPC-DS query result schema. \r\n\r\nThe most important role of Kyuubi is a gateway of Spark SQL, just like Spark Thrift Server, exposing Spark SQL as a HiveServer2 compatible service. \r\n\r\nBasically, the suite creates all empty tables, then run all TPCDS queries on the empty tables and verify the output schemas match the golden file, this process works well with iceberg. The error only occurs in the last step, clean up tables, when I switch the table format from delta to iceberg.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972635866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972672239","html_url":"https://github.com/apache/iceberg/pull/3375#issuecomment-972672239","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3375","id":972672239,"node_id":"IC_kwDOCW7NX845-czv","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T09:10:59Z","updated_at":"2021-11-18T12:09:32Z","author_association":"MEMBER","body":"@RussellSpitzer : \r\n\r\nRegarding the last problem remaining; About not using the custom parser for sort-order parsing, \r\nthe `RewriteDataFilesProcedure` is in `iceberg-spark-3.2` module. So, I cannot refer or cast to `IcebergSparkSqlExtensionsParser` there as it will add a circular dependency[1] on `iceberg-spark-3.2-extensions` module.\r\n\r\nSo, I have to use only the default spark parser functionality. Cannot use new functionalities of Iceberg parser.\r\n\r\n**So, do we have a solution for this? If not, can we go with the current code as of now? Other than this change, everything else is addressed.** \r\n\r\n\r\n[1] To avoid above mentioned circular dependency, I just thought of moving `RewriteDataFilesProcedure` to spark-extensions. But `ProcedureBuilder` in spark-3.2 again has to depend on spark-3.2-extensions which leads to circular dependency. So, I tried moving whole `Procedure`  package to spark-3.2-extensions. But then `BaseCatalog` in spark-3.2 again has to depend on spark-3.2-extensions which leads to circular dependency. As we can't move everything to spark-extensions I stopped there.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972672239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972695633","html_url":"https://github.com/apache/iceberg/issues/3575#issuecomment-972695633","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3575","id":972695633,"node_id":"IC_kwDOCW7NX845-ihR","user":{"login":"wulei0302","id":52473940,"node_id":"MDQ6VXNlcjUyNDczOTQw","avatar_url":"https://avatars.githubusercontent.com/u/52473940?v=4","gravatar_id":"","url":"https://api.github.com/users/wulei0302","html_url":"https://github.com/wulei0302","followers_url":"https://api.github.com/users/wulei0302/followers","following_url":"https://api.github.com/users/wulei0302/following{/other_user}","gists_url":"https://api.github.com/users/wulei0302/gists{/gist_id}","starred_url":"https://api.github.com/users/wulei0302/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wulei0302/subscriptions","organizations_url":"https://api.github.com/users/wulei0302/orgs","repos_url":"https://api.github.com/users/wulei0302/repos","events_url":"https://api.github.com/users/wulei0302/events{/privacy}","received_events_url":"https://api.github.com/users/wulei0302/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T09:39:02Z","updated_at":"2021-11-18T09:39:16Z","author_association":"CONTRIBUTOR","body":"Of course I can solve the problem without setting **reuseContainers** ~~","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972695633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972801775","html_url":"https://github.com/apache/iceberg/pull/3459#issuecomment-972801775","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3459","id":972801775,"node_id":"IC_kwDOCW7NX845-8bv","user":{"login":"KnightChess","id":20125927,"node_id":"MDQ6VXNlcjIwMTI1OTI3","avatar_url":"https://avatars.githubusercontent.com/u/20125927?v=4","gravatar_id":"","url":"https://api.github.com/users/KnightChess","html_url":"https://github.com/KnightChess","followers_url":"https://api.github.com/users/KnightChess/followers","following_url":"https://api.github.com/users/KnightChess/following{/other_user}","gists_url":"https://api.github.com/users/KnightChess/gists{/gist_id}","starred_url":"https://api.github.com/users/KnightChess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KnightChess/subscriptions","organizations_url":"https://api.github.com/users/KnightChess/orgs","repos_url":"https://api.github.com/users/KnightChess/repos","events_url":"https://api.github.com/users/KnightChess/events{/privacy}","received_events_url":"https://api.github.com/users/KnightChess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T12:01:39Z","updated_at":"2021-11-18T12:01:39Z","author_association":"CONTRIBUTOR","body":"> Since you are using\r\n> \r\n> Right now for determining the partition spec I believe you are already using the maximal spec.\r\n\r\nYes, I am using the maximal spec now. And a table is unpartitioned but has history partitions will also return partition result. This may mislead user: a unpartitioned table can show partitons.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/972801775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973031945","html_url":"https://github.com/apache/iceberg/pull/3549#issuecomment-973031945","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3549","id":973031945,"node_id":"IC_kwDOCW7NX845_0oJ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T16:30:21Z","updated_at":"2021-11-18T16:30:21Z","author_association":"CONTRIBUTOR","body":"Thanks, @hililiwei! This should really help us reduce test runtime in CI.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973031945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973033293","html_url":"https://github.com/apache/iceberg/issues/3483#issuecomment-973033293","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3483","id":973033293,"node_id":"IC_kwDOCW7NX845_09N","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T16:31:34Z","updated_at":"2021-11-18T16:31:34Z","author_association":"CONTRIBUTOR","body":"Thanks for volunteering, @singhpk234!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973033293/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973035248","html_url":"https://github.com/apache/iceberg/issues/3483#issuecomment-973035248","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3483","id":973035248,"node_id":"IC_kwDOCW7NX845_1bw","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T16:33:22Z","updated_at":"2021-11-18T16:33:22Z","author_association":"CONTRIBUTOR","body":"Quick reminder: if you want to close a linked issue, you use `Closes #3483` in the description. Github isn't very flexible even if it is clear for readers.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973035248/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973056728","html_url":"https://github.com/apache/iceberg/pull/3553#issuecomment-973056728","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3553","id":973056728,"node_id":"IC_kwDOCW7NX845_6rY","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T16:57:31Z","updated_at":"2021-11-18T16:57:31Z","author_association":"CONTRIBUTOR","body":"Looks good to me. Since I don't see an approval from @openinx, I'll wait and let him merge this when he is ready.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973056728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973113245","html_url":"https://github.com/apache/iceberg/pull/3572#issuecomment-973113245","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3572","id":973113245,"node_id":"IC_kwDOCW7NX846AIed","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T17:50:49Z","updated_at":"2021-11-18T17:50:49Z","author_association":"CONTRIBUTOR","body":"@flyrain, I think `close` in `VectorizedArrowReader` should be used to release any file-related resources instead of the memory. For example, when reuse is disabled, we should be able to close vectors but not the readers.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973113245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973118840","html_url":"https://github.com/apache/iceberg/pull/3572#issuecomment-973118840","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3572","id":973118840,"node_id":"IC_kwDOCW7NX846AJ14","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T17:58:14Z","updated_at":"2021-11-18T17:58:14Z","author_association":"CONTRIBUTOR","body":"> @flyrain, I think `close` in `VectorizedArrowReader` should be used to release any file-related resources instead of the memory. For example, when reuse is disabled, we should be able to close vectors but not the readers.\r\n\r\nIn that sense, I'd recommend to have another method(e.g. `closeVectors`)to close all vec inside the VectorizedArrowReader other than `VectorizedArrowReader::close`, which is supposed to close the reader itself.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973118840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973121284","html_url":"https://github.com/apache/iceberg/pull/3572#issuecomment-973121284","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3572","id":973121284,"node_id":"IC_kwDOCW7NX846AKcE","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T18:01:22Z","updated_at":"2021-11-18T18:01:22Z","author_association":"CONTRIBUTOR","body":"> @flyrain, I think `close` in `VectorizedArrowReader` should be used to release any file-related resources instead of the memory. For example, when reuse is disabled, we should be able to close vectors but not the readers.\r\n\r\nI was just about to say, when `reuse` is disabled, it does look like the vector is owned by the class.\r\n\r\nhttps://github.com/apache/iceberg/blob/ab1c011cb26f49278b745694ba66cdf3ea348061/arrow/src/main/java/org/apache/iceberg/arrow/vectorized/VectorizedArrowReader.java#L424-L431","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973121284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973131518","html_url":"https://github.com/apache/iceberg/pull/3548#issuecomment-973131518","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3548","id":973131518,"node_id":"IC_kwDOCW7NX846AM7-","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T18:14:31Z","updated_at":"2021-11-18T18:14:31Z","author_association":"CONTRIBUTOR","body":"@rdblue @RussellSpitzer , I've fixed the checkstyle error and change to `new SparkTable(table, true)`. After some thoughts, I changed it to `refreshEagerly=true` to align with the overall direction. PTAL.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973131518/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973214656","html_url":"https://github.com/apache/iceberg/pull/3572#issuecomment-973214656","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3572","id":973214656,"node_id":"IC_kwDOCW7NX846AhPA","user":{"login":"samarthjain","id":1642180,"node_id":"MDQ6VXNlcjE2NDIxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1642180?v=4","gravatar_id":"","url":"https://api.github.com/users/samarthjain","html_url":"https://github.com/samarthjain","followers_url":"https://api.github.com/users/samarthjain/followers","following_url":"https://api.github.com/users/samarthjain/following{/other_user}","gists_url":"https://api.github.com/users/samarthjain/gists{/gist_id}","starred_url":"https://api.github.com/users/samarthjain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samarthjain/subscriptions","organizations_url":"https://api.github.com/users/samarthjain/orgs","repos_url":"https://api.github.com/users/samarthjain/repos","events_url":"https://api.github.com/users/samarthjain/events{/privacy}","received_events_url":"https://api.github.com/users/samarthjain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T20:02:07Z","updated_at":"2021-11-18T20:02:07Z","author_association":"COLLABORATOR","body":"Closing of vectors is important because it otherwise results in memory leaks. The memory leak is more apparent when `reuse` is disabled as every new batch read allocates a new vector for the batch. \r\n\r\nAs for the original design -  A vector is tied to a batch of records. When reuse is enabled, we try and reuse the same vector (except in certain special [cases](https://github.com/apache/iceberg/blob/master/arrow/src/main/java/org/apache/iceberg/arrow/vectorized/VectorizedArrowReader.java#L127)). Effectively, what this does is we keep using the same vector till the `FileIterator` is [exhausted](https://github.com/apache/iceberg/blob/master/parquet/src/main/java/org/apache/iceberg/parquet/VectorizedParquetReader.java#L163). A call to `model.close()` calls `ColumnarBatchReader.close()` which in turn ends up calling `close()` on all the `VectorizedArrowReader`. If we don't close the vector here, it will cause a memory leak. \r\n\r\nWhen reuse is disabled, we allocate a new vector for every batch. Before allocating a new vector though, it is important to close out the previous vector. This is what [this](https://github.com/apache/iceberg/blob/master/spark/v2.4/spark/src/main/java/org/apache/iceberg/spark/data/vectorized/ColumnarBatchReader.java#L47) code is doing.\r\n\r\nIt is also important to note that we create a `ColumnarBatchReader` and the associated `VectorizedArrowReader` only once for a file. The lifecycle of the above two readers is tied to the `FileIterator`. See the init section [here](https://github.com/apache/iceberg/blob/master/parquet/src/main/java/org/apache/iceberg/parquet/VectorizedParquetReader.java#L74). When a ReadConf is constructed, we set the `VectorizedModel` [here](https://github.com/apache/iceberg/blob/523a31bd4db5d457b8eebc37be630aaec018fce2/parquet/src/main/java/org/apache/iceberg/parquet/ReadConf.java#L123). This `vectorizedModel` is a `ColumnarBatchReader`. \r\n\r\nI hope this helps. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973214656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973224336","html_url":"https://github.com/apache/iceberg/pull/3276#issuecomment-973224336","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3276","id":973224336,"node_id":"IC_kwDOCW7NX846AjmQ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T20:12:48Z","updated_at":"2021-11-18T20:12:48Z","author_association":"CONTRIBUTOR","body":"Thanks for the logs! It's always helpful to have the full picture.\r\n\r\nI think what's happening is that Trino is extracting the underlying `FsDataInputStream` and using it directly. The fix should be for whatever in Trino is doing that to keep a reference to the `HadoopSeekableInputStream` that Iceberg creates. I wasn't expecting to see `io.trino.plugin` in the stack trace. That tells me that Trino is injecting something that is non-Iceberg. Since Iceberg only accesses the `FsDataInputStream` from the objects that reference it, that's why I thought it wasn't possible for this to be the Iceberg finalizer. But if something gets the underlying stream and discards the Iceberg wrapper, that could cause this problem.\r\n\r\n@electrum, can you help us take a look at this problem? Looks like something is getting the underlying stream from Iceberg and keeping a reference past when the reference to the Iceberg stream is garbage collected.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973224336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973360229","html_url":"https://github.com/apache/iceberg/pull/3276#issuecomment-973360229","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3276","id":973360229,"node_id":"IC_kwDOCW7NX846BExl","user":{"login":"electrum","id":9230,"node_id":"MDQ6VXNlcjkyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/9230?v=4","gravatar_id":"","url":"https://api.github.com/users/electrum","html_url":"https://github.com/electrum","followers_url":"https://api.github.com/users/electrum/followers","following_url":"https://api.github.com/users/electrum/following{/other_user}","gists_url":"https://api.github.com/users/electrum/gists{/gist_id}","starred_url":"https://api.github.com/users/electrum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrum/subscriptions","organizations_url":"https://api.github.com/users/electrum/orgs","repos_url":"https://api.github.com/users/electrum/repos","events_url":"https://api.github.com/users/electrum/events{/privacy}","received_events_url":"https://api.github.com/users/electrum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T22:52:32Z","updated_at":"2021-11-18T22:52:32Z","author_association":"CONTRIBUTOR","body":"We had this problem in Trino previously that @phd3 fixed in https://github.com/trinodb/trino/pull/8504\r\n\r\n@velctor It looks like you are using a patched version of the Trino Iceberg connector. Can you share the patch? I don't believe we see this issue today with the current version, so this might be related to the patch. Are you using a version of https://github.com/trinodb/trino/pull/8534 from @jackye1995?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973360229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973361654","html_url":"https://github.com/apache/iceberg/pull/3276#issuecomment-973361654","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3276","id":973361654,"node_id":"IC_kwDOCW7NX846BFH2","user":{"login":"electrum","id":9230,"node_id":"MDQ6VXNlcjkyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/9230?v=4","gravatar_id":"","url":"https://api.github.com/users/electrum","html_url":"https://github.com/electrum","followers_url":"https://api.github.com/users/electrum/followers","following_url":"https://api.github.com/users/electrum/following{/other_user}","gists_url":"https://api.github.com/users/electrum/gists{/gist_id}","starred_url":"https://api.github.com/users/electrum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrum/subscriptions","organizations_url":"https://api.github.com/users/electrum/orgs","repos_url":"https://api.github.com/users/electrum/repos","events_url":"https://api.github.com/users/electrum/events{/privacy}","received_events_url":"https://api.github.com/users/electrum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T22:53:18Z","updated_at":"2021-11-18T22:53:18Z","author_association":"CONTRIBUTOR","body":"Longer explanation of the problem: https://github.com/trinodb/trino/issues/5201#issuecomment-876089214","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973361654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973368275","html_url":"https://github.com/apache/iceberg/pull/3276#issuecomment-973368275","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3276","id":973368275,"node_id":"IC_kwDOCW7NX846BGvT","user":{"login":"electrum","id":9230,"node_id":"MDQ6VXNlcjkyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/9230?v=4","gravatar_id":"","url":"https://api.github.com/users/electrum","html_url":"https://github.com/electrum","followers_url":"https://api.github.com/users/electrum/followers","following_url":"https://api.github.com/users/electrum/following{/other_user}","gists_url":"https://api.github.com/users/electrum/gists{/gist_id}","starred_url":"https://api.github.com/users/electrum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/electrum/subscriptions","organizations_url":"https://api.github.com/users/electrum/orgs","repos_url":"https://api.github.com/users/electrum/repos","events_url":"https://api.github.com/users/electrum/events{/privacy}","received_events_url":"https://api.github.com/users/electrum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T22:57:05Z","updated_at":"2021-11-18T22:57:05Z","author_association":"CONTRIBUTOR","body":"Looking at this again with fresh eyes, the actual problem is that Trino's `HdfsInputFile` delegates to Iceberg's `HadoopInputFile`, which adds the wrapping. We should either subclass it and override the offending method, or simply re-implement the code rather than delegating (since it's fairly trivial).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973368275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973457483","html_url":"https://github.com/apache/iceberg/pull/3276#issuecomment-973457483","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3276","id":973457483,"node_id":"IC_kwDOCW7NX846BchL","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T23:40:48Z","updated_at":"2021-11-18T23:40:48Z","author_association":"CONTRIBUTOR","body":"Thanks, @electrum!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973457483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973482723","html_url":"https://github.com/apache/iceberg/pull/3568#issuecomment-973482723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3568","id":973482723,"node_id":"IC_kwDOCW7NX846Birj","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-18T23:56:47Z","updated_at":"2021-11-18T23:56:47Z","author_association":"CONTRIBUTOR","body":"Thanks, @wypoon!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973482723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973582634","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-973582634","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":973582634,"node_id":"IC_kwDOCW7NX846B7Eq","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T00:37:36Z","updated_at":"2021-11-19T00:37:36Z","author_association":"CONTRIBUTOR","body":"Can we remove the deprecated code yet? I think it was deprecated before 0.12.0. If we've replaced the actions then let's get rid of the old!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973582634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973617348","html_url":"https://github.com/apache/iceberg/issues/3499#issuecomment-973617348","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3499","id":973617348,"node_id":"IC_kwDOCW7NX846CDjE","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T00:57:02Z","updated_at":"2021-11-19T00:57:02Z","author_association":"CONTRIBUTOR","body":"master:419684a9f089cd14628d573399f18af44a1098d5","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973617348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973641235","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-973641235","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":973641235,"node_id":"IC_kwDOCW7NX846CJYT","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T01:20:22Z","updated_at":"2021-11-19T01:20:22Z","author_association":"MEMBER","body":"That would be an acceptable solution for me :)\n\nOn Thu, Nov 18, 2021 at 6:37 PM Ryan Blue ***@***.***> wrote:\n\n> Can we remove the deprecated code yet? I think it was deprecated before\n> 0.12.0. If we've replaced the actions then let's get rid of the old!\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/pull/3469#issuecomment-973582634>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AADE2YKTOARFLPROHWSRRFTUMWL5VANCNFSM5HLTUI7Q>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973641235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973646438","html_url":"https://github.com/apache/iceberg/pull/3578#issuecomment-973646438","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3578","id":973646438,"node_id":"IC_kwDOCW7NX846CKpm","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T01:32:46Z","updated_at":"2021-11-19T01:33:04Z","author_association":"CONTRIBUTOR","body":"cc @yyanyy @jackye1995 @rdblue @RussellSpitzer @jun-he @flyrain @karuppayya @szehon-ho @pvary @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973646438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973663999","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-973663999","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":973663999,"node_id":"IC_kwDOCW7NX846CO7_","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T02:14:08Z","updated_at":"2021-11-19T02:14:08Z","author_association":"MEMBER","body":"> Can we remove the deprecated code yet? I think it was deprecated before 0.12.0. If we've replaced the actions then let's get rid of the old!\r\n\r\nSure. I will remove the deprecated classes and update the document also with the new classes. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973663999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973665059","html_url":"https://github.com/apache/iceberg/issues/2435#issuecomment-973665059","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2435","id":973665059,"node_id":"IC_kwDOCW7NX846CPMj","user":{"login":"KarlManong","id":2627662,"node_id":"MDQ6VXNlcjI2Mjc2NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2627662?v=4","gravatar_id":"","url":"https://api.github.com/users/KarlManong","html_url":"https://github.com/KarlManong","followers_url":"https://api.github.com/users/KarlManong/followers","following_url":"https://api.github.com/users/KarlManong/following{/other_user}","gists_url":"https://api.github.com/users/KarlManong/gists{/gist_id}","starred_url":"https://api.github.com/users/KarlManong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarlManong/subscriptions","organizations_url":"https://api.github.com/users/KarlManong/orgs","repos_url":"https://api.github.com/users/KarlManong/repos","events_url":"https://api.github.com/users/KarlManong/events{/privacy}","received_events_url":"https://api.github.com/users/KarlManong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T02:16:31Z","updated_at":"2021-11-19T02:16:31Z","author_association":"CONTRIBUTOR","body":"Can this action fix the problem which accidental deleted partition data files？","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973665059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973766762","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-973766762","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":973766762,"node_id":"IC_kwDOCW7NX846CoBq","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T05:29:08Z","updated_at":"2021-11-19T05:29:08Z","author_association":"MEMBER","body":"@RussellSpitzer , @rdblue : I have finished the changes. Please have a look","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973766762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973789528","html_url":"https://github.com/apache/iceberg/pull/3571#issuecomment-973789528","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3571","id":973789528,"node_id":"IC_kwDOCW7NX846CtlY","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T06:26:32Z","updated_at":"2021-11-19T06:26:32Z","author_association":"CONTRIBUTOR","body":"I got CASCADE to work. So closed in favor of https://github.com/apache/iceberg/pull/3573","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973789528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973797484","html_url":"https://github.com/apache/iceberg/pull/3563#issuecomment-973797484","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3563","id":973797484,"node_id":"IC_kwDOCW7NX846Cvhs","user":{"login":"xloya","id":26177232,"node_id":"MDQ6VXNlcjI2MTc3MjMy","avatar_url":"https://avatars.githubusercontent.com/u/26177232?v=4","gravatar_id":"","url":"https://api.github.com/users/xloya","html_url":"https://github.com/xloya","followers_url":"https://api.github.com/users/xloya/followers","following_url":"https://api.github.com/users/xloya/following{/other_user}","gists_url":"https://api.github.com/users/xloya/gists{/gist_id}","starred_url":"https://api.github.com/users/xloya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xloya/subscriptions","organizations_url":"https://api.github.com/users/xloya/orgs","repos_url":"https://api.github.com/users/xloya/repos","events_url":"https://api.github.com/users/xloya/events{/privacy}","received_events_url":"https://api.github.com/users/xloya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T06:46:28Z","updated_at":"2021-11-19T06:46:28Z","author_association":"CONTRIBUTOR","body":"Now supports rewriting whether ignore the no-commit-succeed situation when the partial commit is true, which is ignored by default. If it is not ignored, a NoCommitSuccessfulException will be thrown to interrupt the rewrite process.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973797484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973799530","html_url":"https://github.com/apache/iceberg/pull/3573#issuecomment-973799530","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3573","id":973799530,"node_id":"IC_kwDOCW7NX846CwBq","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T06:51:22Z","updated_at":"2021-11-19T06:51:22Z","author_association":"CONTRIBUTOR","body":"cc @pan3793 who reported this issue, if you wouldn’t mind taking a look.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973799530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973841607","html_url":"https://github.com/apache/iceberg/pull/3573#issuecomment-973841607","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3573","id":973841607,"node_id":"IC_kwDOCW7NX846C6TH","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T07:56:57Z","updated_at":"2021-11-19T07:56:57Z","author_association":"MEMBER","body":"Thanks @kbendick for quick fix, the change LGTM, and I think Iceberg should implement it in more efficient way eventually, just as the spark PR said, for performance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973841607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973902325","html_url":"https://github.com/apache/iceberg/pull/3553#issuecomment-973902325","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3553","id":973902325,"node_id":"IC_kwDOCW7NX846DJH1","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T09:28:23Z","updated_at":"2021-11-19T09:28:23Z","author_association":"MEMBER","body":"```\r\n> Task :iceberg-arrow:compileScala NO-SOURCE\r\n> Task :iceberg-arrow:classes\r\n> Task :iceberg-arrow:jar\r\n> Task :iceberg-arrow:sourceJar\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/aliyun/src/test/java/org/apache/iceberg/aliyun/TestAliyunClientFactories.java:24:1: Extra separation in import group before 'java.util.HashMap' [ImportOrder]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/aliyun/src/test/java/org/apache/iceberg/aliyun/TestAliyunClientFactories.java:24:8: Unused import - java.util.HashMap. [UnusedImports]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/aliyun/src/test/java/org/apache/iceberg/aliyun/TestAliyunClientFactories.java:52:5: 'CTOR_DEF' should be separated from previous line. [EmptyLineSeparator]\r\n\r\n> Task :iceberg-aliyun:checkstyleTest\r\n\r\n> Task :iceberg-aliyun:checkstyleTest FAILED\r\nNote: Some input files use or override a deprecated API.\r\n\r\nNote: Recompile with -Xlint:deprecation for details.\r\n> Task :iceberg-core:compileTestJava\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n\r\n131 actionable tasks: 131 executed\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task ':iceberg-aliyun:checkstyleTest'.\r\n> Checkstyle rule violations were found. See the report at: file:///home/runner/work/iceberg/iceberg/aliyun/build/reports/checkstyle/test.html\r\n  Checkstyle files with violations: 1\r\n  Checkstyle violations by severity: [error:3]\r\n```\r\n\r\n@xingbowu , Could you help to fix the checkstyles ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/973902325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974041417","html_url":"https://github.com/apache/iceberg/issues/2435#issuecomment-974041417","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2435","id":974041417,"node_id":"IC_kwDOCW7NX846DrFJ","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T12:45:21Z","updated_at":"2021-11-19T12:45:21Z","author_association":"COLLABORATOR","body":"Can you elaborate a bit?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974041417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974092038","html_url":"https://github.com/apache/iceberg/pull/3581#issuecomment-974092038","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3581","id":974092038,"node_id":"IC_kwDOCW7NX846D3cG","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T13:54:00Z","updated_at":"2021-11-19T13:54:00Z","author_association":"CONTRIBUTOR","body":"cc @jackye1995 @rdblue @RussellSpitzer @flyrain @karuppayya @szehon-ho","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974092038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974113711","html_url":"https://github.com/apache/iceberg/pull/3579#issuecomment-974113711","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3579","id":974113711,"node_id":"IC_kwDOCW7NX846D8uv","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T14:21:22Z","updated_at":"2021-11-19T14:21:22Z","author_association":"MEMBER","body":"@rymurr : This looks like a right direction to me. But I have some doubts.\r\na) How user can register their procedures without extending base catalog ? Now looks like still we need to extend catalog to gain access to these methods.\r\n\r\nb) And regarding disable of existing procedures, we have not removed look up `SparkProcedures.newBuilder(name)` in the PR, so I would assume we need to disable by adding dummy procedure for them. Is my assumption is correct ? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974113711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974123831","html_url":"https://github.com/apache/iceberg/issues/3582#issuecomment-974123831","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3582","id":974123831,"node_id":"IC_kwDOCW7NX846D_M3","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T14:34:06Z","updated_at":"2021-11-19T14:34:14Z","author_association":"COLLABORATOR","body":"@rdblue @RussellSpitzer @aokolnychyi @jackye1995 \r\n\r\nWould either or both of these ideas will be good contributions, or any other ideas?  Appreciate any thoughts","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974123831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974160913","html_url":"https://github.com/apache/iceberg/pull/3583#issuecomment-974160913","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3583","id":974160913,"node_id":"IC_kwDOCW7NX846EIQR","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T15:18:59Z","updated_at":"2021-11-19T15:18:59Z","author_association":"CONTRIBUTOR","body":"Thanks @marton-bod for the fix!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974160913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974163688","html_url":"https://github.com/apache/iceberg/pull/3579#issuecomment-974163688","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3579","id":974163688,"node_id":"IC_kwDOCW7NX846EI7o","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T15:22:14Z","updated_at":"2021-11-19T15:22:14Z","author_association":"CONTRIBUTOR","body":"> @rymurr : This looks like a right direction to me. But I have some doubts. a) How user can register their procedures without extending base catalog ? Now looks like still we need to extend catalog to gain access to these methods.\r\n\r\nthats correct. This isn't a great approach at the moment. We could make the method I added `static` or take one of the approaches I outlined above. Definitely interested in where other people think it could go.\r\n> \r\n> b) And regarding disable of existing procedures, we have not removed look up `SparkProcedures.newBuilder(name)` in the PR, so I would assume we need to disable by adding dummy procedure for them. Is my assumption is correct ?\r\n\r\nyes by adding a `null` to the new map we could 'override' an existing procedure. Again, not the cleanest thing int he world but it requires access to the immutable static map if we want to remove a procedure properly.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974163688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974191227","html_url":"https://github.com/apache/iceberg/issues/3582#issuecomment-974191227","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3582","id":974191227,"node_id":"IC_kwDOCW7NX846EPp7","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T15:54:24Z","updated_at":"2021-11-19T15:54:24Z","author_association":"MEMBER","body":"There is a parameter for doing concurrent deletes from the driver, I was working with someone who had this issue and by increasing parallelism they resolved it. RemoveOrphanFiles is missing the parallelism parameter but I believe I made a ticket for it and it is being worked on. I think we should test this out to see if it’s sufficient before distributed deletes since it’s would be much easier to tune.\n\nSent from my iPhone\n\n> On Nov 19, 2021, at 8:34 AM, Szehon Ho ***@***.***> wrote:\n> \n> ﻿\n> @rdblue @RussellSpitzer @aokolnychyi @jackye1995\n> \n> Would either or both of these ideas will be good contributions, or any other ideas? Appreciate any thoughts\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974191227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974204718","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-974204718","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":974204718,"node_id":"IC_kwDOCW7NX846ES8u","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T16:10:24Z","updated_at":"2021-11-19T16:10:24Z","author_association":"CONTRIBUTOR","body":"Looks good to me. Thanks, @ajantha-bhat!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974204718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974234671","html_url":"https://github.com/apache/iceberg/issues/3582#issuecomment-974234671","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3582","id":974234671,"node_id":"IC_kwDOCW7NX846EaQv","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T16:48:06Z","updated_at":"2021-11-19T16:48:06Z","author_association":"CONTRIBUTOR","body":"Deleting from Spark executors is usually not a good idea because it is easy to hit S3 too hard and get throttled. Concurrent deletes on the driver makes a lot more sense to me. We'd just need to expose a way to pass a pool for deleting objects.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974234671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974241707","html_url":"https://github.com/apache/iceberg/pull/3579#issuecomment-974241707","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3579","id":974241707,"node_id":"IC_kwDOCW7NX846Eb-r","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T16:57:13Z","updated_at":"2021-11-19T16:57:13Z","author_association":"CONTRIBUTOR","body":"What about getting these procedures from the Iceberg catalog? Are they always specific to Spark?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974241707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974243535","html_url":"https://github.com/apache/iceberg/pull/3580#issuecomment-974243535","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3580","id":974243535,"node_id":"IC_kwDOCW7NX846EcbP","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T16:59:40Z","updated_at":"2021-11-19T16:59:40Z","author_association":"CONTRIBUTOR","body":"I don't think that this is a good alternative to the other builder. The things we want to fix with the other builder are to make the builder smarter. It doesn't really help just to have a builder, we want to put more logic in there.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974243535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974250575","html_url":"https://github.com/apache/iceberg/issues/3582#issuecomment-974250575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3582","id":974250575,"node_id":"IC_kwDOCW7NX846EeJP","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T17:08:25Z","updated_at":"2021-11-19T17:08:25Z","author_association":"COLLABORATOR","body":"Yea makes sense, thanks guys for the reply.  Look forward to having the driver parallelism in RemoveOrphans, let me know if you have the pr / issue.\r\n\r\nIt may still make sense to introduce a batch mode (the second point) to take advantage of storage-system bulk deletes?    HadoopFileSystem seems like it does not have it, but S3 does: (https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteObjects.html), can save 1000 HTTP calls.  I can take a look to see if it's not too ugly to add.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974250575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974255464","html_url":"https://github.com/apache/iceberg/pull/3584#issuecomment-974255464","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3584","id":974255464,"node_id":"IC_kwDOCW7NX846EfVo","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T17:14:52Z","updated_at":"2021-11-19T17:14:52Z","author_association":"CONTRIBUTOR","body":"cc @jackye1995 @rdblue @RussellSpitzer @flyrain @karuppayya @szehon-ho","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974255464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974262224","html_url":"https://github.com/apache/iceberg/pull/3479#issuecomment-974262224","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3479","id":974262224,"node_id":"IC_kwDOCW7NX846Eg_Q","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T17:24:01Z","updated_at":"2021-11-19T17:24:01Z","author_association":"CONTRIBUTOR","body":"Updated with additional comments. Thank you!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974262224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974263313","html_url":"https://github.com/apache/iceberg/issues/3585#issuecomment-974263313","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3585","id":974263313,"node_id":"IC_kwDOCW7NX846EhQR","user":{"login":"cccs-br","id":56260250,"node_id":"MDQ6VXNlcjU2MjYwMjUw","avatar_url":"https://avatars.githubusercontent.com/u/56260250?v=4","gravatar_id":"","url":"https://api.github.com/users/cccs-br","html_url":"https://github.com/cccs-br","followers_url":"https://api.github.com/users/cccs-br/followers","following_url":"https://api.github.com/users/cccs-br/following{/other_user}","gists_url":"https://api.github.com/users/cccs-br/gists{/gist_id}","starred_url":"https://api.github.com/users/cccs-br/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cccs-br/subscriptions","organizations_url":"https://api.github.com/users/cccs-br/orgs","repos_url":"https://api.github.com/users/cccs-br/repos","events_url":"https://api.github.com/users/cccs-br/events{/privacy}","received_events_url":"https://api.github.com/users/cccs-br/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T17:25:28Z","updated_at":"2021-11-19T17:25:28Z","author_association":"NONE","body":"If a fix for this is already on the roadmap, can you let us know which version of iceberg will address this?\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974263313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974302085","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-974302085","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":974302085,"node_id":"IC_kwDOCW7NX846EquF","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T18:20:13Z","updated_at":"2021-11-19T18:20:13Z","author_association":"MEMBER","body":"Thanks @ajantha-bhat ! Great to get rid of deprecated code :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974302085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974316978","html_url":"https://github.com/apache/iceberg/pull/3578#issuecomment-974316978","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3578","id":974316978,"node_id":"IC_kwDOCW7NX846EuWy","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T18:42:58Z","updated_at":"2021-11-19T18:42:58Z","author_association":"CONTRIBUTOR","body":"I don't think that this change is correct because Iceberg expressions do not implement SQL 3-value boolean logic. Iceberg expressions avoid SQL logic because it is really confusing and hard to maintain correctly. The API is also not only used in SQL and we need to have reasonable behavior for all callers. SQL systems should handle null semantics when converting to Iceberg expressions -- that's why we don't allow null literals. (One thing that we've discussed in the past is adding special SQL factory methods that help with this, which may be a good idea.)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974316978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974498636","html_url":"https://github.com/apache/iceberg/pull/3557#issuecomment-974498636","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3557","id":974498636,"node_id":"IC_kwDOCW7NX846FatM","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T21:56:17Z","updated_at":"2021-11-19T21:56:17Z","author_association":"CONTRIBUTOR","body":"Resolved the comments and added the benchmark. Here is the benchmark result for 10M rows with different percentage of equality deleted rows. About 40% percent perf gain on average. Less eq delete rows, larger perf gain.\r\n```\r\nBenchmark                                                    (percentDeleteRow)  Mode  Cnt   Score   Error  Units\r\nIcebergSourceParquetEqDeleteBenchmark.readIceberg                             0    ss    5   3.261 ± 0.210   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIceberg                      0.000001    ss    5   3.940 ± 0.253   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIceberg                          0.05    ss    5   4.888 ± 0.540   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIceberg                          0.25    ss    5   7.369 ± 3.521   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIceberg                           0.5    ss    5   9.433 ± 6.369   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIceberg                             1    ss    5  20.206 ± 4.298   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIcebergVectorized                   0    ss    5   1.721 ± 0.120   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIcebergVectorized            0.000001    ss    5   2.172 ± 0.112   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIcebergVectorized                0.05    ss    5   3.305 ± 0.301   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIcebergVectorized                0.25    ss    5   5.201 ± 3.418   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIcebergVectorized                 0.5    ss    5   8.869 ± 6.236   s/op\r\nIcebergSourceParquetEqDeleteBenchmark.readIcebergVectorized                   1    ss    5  15.589 ± 7.211   s/op\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974498636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974508372","html_url":"https://github.com/apache/iceberg/pull/3259#issuecomment-974508372","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3259","id":974508372,"node_id":"IC_kwDOCW7NX846FdFU","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:15:41Z","updated_at":"2021-11-19T22:16:13Z","author_association":"CONTRIBUTOR","body":"Since these aren't in API and are for internal use, I don't think that we need to deprecate. I probably wouldn't add it to release notes, either. But if you think that we should then it is probably better to deprecate. I'll merge this to unblock work elsewhere and open a PR with deprecations.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974508372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974509947","html_url":"https://github.com/apache/iceberg/pull/3581#issuecomment-974509947","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3581","id":974509947,"node_id":"IC_kwDOCW7NX846Fdd7","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:18:48Z","updated_at":"2021-11-19T22:18:48Z","author_association":"CONTRIBUTOR","body":"Good find!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974509947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974512451","html_url":"https://github.com/apache/iceberg/pull/3584#issuecomment-974512451","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3584","id":974512451,"node_id":"IC_kwDOCW7NX846FeFD","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T22:23:57Z","updated_at":"2021-11-19T22:26:25Z","author_association":"CONTRIBUTOR","body":"The test failure is strange:\r\n\r\n```\r\norg.apache.iceberg.TestRowDelta > testOverwriteWithDeleteFile FAILED\r\n    org.apache.iceberg.exceptions.ValidationException: Visitor org.apache.iceberg.expressions.InclusiveMetricsEvaluator$MetricsEvalVisitor@540cbff4 does not support expression: bucket[16](ref(id=2, accessor-type=string))\r\n        at org.apache.iceberg.exceptions.ValidationException.check(ValidationException.java:46)\r\n        at org.apache.iceberg.expressions.ExpressionVisitors$BoundExpressionVisitor.predicate(ExpressionVisitors.java:124)\r\n        at org.apache.iceberg.expressions.ExpressionVisitors.visitEvaluator(ExpressionVisitors.java:346)\r\n        at org.apache.iceberg.expressions.InclusiveMetricsEvaluator$MetricsEvalVisitor.eval(InclusiveMetricsEvaluator.java:107)\r\n        at org.apache.iceberg.expressions.InclusiveMetricsEvaluator$MetricsEvalVisitor.access$100(InclusiveMetricsEvaluator.java:82)\r\n        at org.apache.iceberg.expressions.InclusiveMetricsEvaluator.eval(InclusiveMetricsEvaluator.java:76)\r\n        at org.apache.iceberg.ManifestFilterManager$MetricsEvaluator.rowsMightMatch(ManifestFilterManager.java:452)\r\n        at org.apache.iceberg.ManifestFilterManager.manifestHasDeletedFiles(ManifestFilterManager.java:353)\r\n        at org.apache.iceberg.ManifestFilterManager.filterManifest(ManifestFilterManager.java:296)\r\n        at org.apache.iceberg.ManifestFilterManager.lambda$filterManifests$0(ManifestFilterManager.java:183)\r\n        at org.apache.iceberg.util.Tasks$Builder.runTaskWithRetry(Tasks.java:405)\r\n        at org.apache.iceberg.util.Tasks$Builder.access$300(Tasks.java:71)\r\n        at org.apache.iceberg.util.Tasks$Builder$1.run(Tasks.java:311)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nLooks like the visitor is operating on a bound expression, but the term is unbound somehow.\r\n\r\n**Update:** After looking more closely at the actual error message, the term is bound. The problem is that it is a `BoundTransform` rather than `BoundReference`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974512451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974539601","html_url":"https://github.com/apache/iceberg/issues/3586#issuecomment-974539601","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3586","id":974539601,"node_id":"IC_kwDOCW7NX846FktR","user":{"login":"dubeme","id":1667350,"node_id":"MDQ6VXNlcjE2NjczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1667350?v=4","gravatar_id":"","url":"https://api.github.com/users/dubeme","html_url":"https://github.com/dubeme","followers_url":"https://api.github.com/users/dubeme/followers","following_url":"https://api.github.com/users/dubeme/following{/other_user}","gists_url":"https://api.github.com/users/dubeme/gists{/gist_id}","starred_url":"https://api.github.com/users/dubeme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubeme/subscriptions","organizations_url":"https://api.github.com/users/dubeme/orgs","repos_url":"https://api.github.com/users/dubeme/repos","events_url":"https://api.github.com/users/dubeme/events{/privacy}","received_events_url":"https://api.github.com/users/dubeme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-19T23:32:48Z","updated_at":"2021-11-19T23:32:48Z","author_association":"CONTRIBUTOR","body":"cc: @RussellSpitzer ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974539601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974551146","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-974551146","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":974551146,"node_id":"IC_kwDOCW7NX846Fnhq","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T00:09:45Z","updated_at":"2021-11-20T00:09:45Z","author_association":"MEMBER","body":"Thanks for merging this @RussellSpitzer.\r\n\r\nSo, what about synching this change to other versions of spark?\r\nI have to raise another single PR to back sync to all remaining 3 spark versions ? \r\n ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974551146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974560790","html_url":"https://github.com/apache/iceberg/pull/3469#issuecomment-974560790","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3469","id":974560790,"node_id":"IC_kwDOCW7NX846Fp4W","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T00:49:23Z","updated_at":"2021-11-20T00:49:23Z","author_association":"MEMBER","body":"Yes that is our current procedure for spark updates \n\nSent from my iPhone\n\n> On Nov 19, 2021, at 6:09 PM, Ajantha Bhat ***@***.***> wrote:\n> \n> ﻿\n> Thanks for merging this @RussellSpitzer.\n> \n> So, what about synching this change to other versions of spark?\n> I have to raise another single PR to back sync to all remaining 3 spark versions ?\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974560790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974578983","html_url":"https://github.com/apache/iceberg/pull/3578#issuecomment-974578983","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3578","id":974578983,"node_id":"IC_kwDOCW7NX846FuUn","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T02:33:59Z","updated_at":"2021-11-20T02:33:59Z","author_association":"CONTRIBUTOR","body":"@rdblue, okay, I missed that we don't follow the SQL semantics in Iceberg expressions. It was slightly surprising since we are offering SQL tables but I definitely agree the null handling in SQL is confusing. I'll try to wrap my head around this.\r\n\r\nTo give more context, I started looking into this as the following metadata DELETE gave a wrong result.\r\n\r\nSuppose we have a single file with 2 records.\r\n\r\n```\r\nid\r\n--\r\n2\r\nnull\r\n```\r\n\r\nAnd someone issues a DELETE command.\r\n\r\n```\r\nDELETE FROM t WHERE id NOT IN (1, 10)\r\n```\r\n\r\nThe expected outcome in SQL is to remove `id = 2` and keep the record with `null`. That's why it cannot be a metadata delete in Iceberg and we have to rewrite the file. However, that's not what happens now. We currently think that all records in the file match the condition and delete the entire file, meaning that we delete records we were not supposed to delete.\r\n\r\nIf Iceberg expressions handle nulls differently by design, then we have to fix `SparkFilters`. Do I understand correctly that a filter from Spark like `col NOT IN (1, 2)` has to be translated into `notNull(col) && notIn(col, 1, 2)` in Iceberg?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974578983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974579550","html_url":"https://github.com/apache/iceberg/pull/3578#issuecomment-974579550","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3578","id":974579550,"node_id":"IC_kwDOCW7NX846Fude","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T02:38:36Z","updated_at":"2021-11-20T02:38:36Z","author_association":"CONTRIBUTOR","body":"I think the current translation logic works because Spark infers `not_null` for predicates like equality. However, this does not happen for `IN` and `NOT IN`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974579550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974580456","html_url":"https://github.com/apache/iceberg/pull/3578#issuecomment-974580456","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3578","id":974580456,"node_id":"IC_kwDOCW7NX846Furo","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T02:45:52Z","updated_at":"2021-11-20T02:45:52Z","author_association":"CONTRIBUTOR","body":"Thanks for the context. I think we need to update how we translate Spark's filters and add the `isNull` or `nonNull` appropriately.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974580456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974583421","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-974583421","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":974583421,"node_id":"IC_kwDOCW7NX846FvZ9","user":{"login":"dubeme","id":1667350,"node_id":"MDQ6VXNlcjE2NjczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1667350?v=4","gravatar_id":"","url":"https://api.github.com/users/dubeme","html_url":"https://github.com/dubeme","followers_url":"https://api.github.com/users/dubeme/followers","following_url":"https://api.github.com/users/dubeme/following{/other_user}","gists_url":"https://api.github.com/users/dubeme/gists{/gist_id}","starred_url":"https://api.github.com/users/dubeme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubeme/subscriptions","organizations_url":"https://api.github.com/users/dubeme/orgs","repos_url":"https://api.github.com/users/dubeme/repos","events_url":"https://api.github.com/users/dubeme/events{/privacy}","received_events_url":"https://api.github.com/users/dubeme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T03:10:57Z","updated_at":"2021-11-20T03:16:28Z","author_association":"CONTRIBUTOR","body":"It seems this serialization bug persists when calling `add_files`... I created this issue showcasing my scenario #3586","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974583421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974607000","html_url":"https://github.com/apache/iceberg/issues/3169#issuecomment-974607000","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3169","id":974607000,"node_id":"IC_kwDOCW7NX846F1KY","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T07:05:53Z","updated_at":"2021-11-20T07:05:53Z","author_association":"CONTRIBUTOR","body":"Is there anyone doing this? If not, I'd like to try it, can i?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974607000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974610548","html_url":"https://github.com/apache/iceberg/issues/3585#issuecomment-974610548","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3585","id":974610548,"node_id":"IC_kwDOCW7NX846F2B0","user":{"login":"KnightChess","id":20125927,"node_id":"MDQ6VXNlcjIwMTI1OTI3","avatar_url":"https://avatars.githubusercontent.com/u/20125927?v=4","gravatar_id":"","url":"https://api.github.com/users/KnightChess","html_url":"https://github.com/KnightChess","followers_url":"https://api.github.com/users/KnightChess/followers","following_url":"https://api.github.com/users/KnightChess/following{/other_user}","gists_url":"https://api.github.com/users/KnightChess/gists{/gist_id}","starred_url":"https://api.github.com/users/KnightChess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KnightChess/subscriptions","organizations_url":"https://api.github.com/users/KnightChess/orgs","repos_url":"https://api.github.com/users/KnightChess/repos","events_url":"https://api.github.com/users/KnightChess/events{/privacy}","received_events_url":"https://api.github.com/users/KnightChess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T07:39:50Z","updated_at":"2021-11-20T07:44:14Z","author_association":"CONTRIBUTOR","body":"There is no version support now, but had supported in master branch\r\n#3335 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974610548/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974624600","html_url":"https://github.com/apache/iceberg/pull/3545#issuecomment-974624600","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3545","id":974624600,"node_id":"IC_kwDOCW7NX846F5dY","user":{"login":"xiaotianzhang01","id":17720945,"node_id":"MDQ6VXNlcjE3NzIwOTQ1","avatar_url":"https://avatars.githubusercontent.com/u/17720945?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaotianzhang01","html_url":"https://github.com/xiaotianzhang01","followers_url":"https://api.github.com/users/xiaotianzhang01/followers","following_url":"https://api.github.com/users/xiaotianzhang01/following{/other_user}","gists_url":"https://api.github.com/users/xiaotianzhang01/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaotianzhang01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaotianzhang01/subscriptions","organizations_url":"https://api.github.com/users/xiaotianzhang01/orgs","repos_url":"https://api.github.com/users/xiaotianzhang01/repos","events_url":"https://api.github.com/users/xiaotianzhang01/events{/privacy}","received_events_url":"https://api.github.com/users/xiaotianzhang01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T09:50:17Z","updated_at":"2021-11-20T09:50:17Z","author_association":"CONTRIBUTOR","body":"@kbendick Thank you for your review and i have updated it.  I don't know much about `CachingCatalog` but i added some test cases for this. Are there any cases for other?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974624600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974624720","html_url":"https://github.com/apache/iceberg/pull/3587#issuecomment-974624720","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3587","id":974624720,"node_id":"IC_kwDOCW7NX846F5fQ","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T09:51:16Z","updated_at":"2021-11-20T09:51:16Z","author_association":"MEMBER","body":"@RussellSpitzer , @rdblue :\r\nThis is just a back synch of changes from PR #3469 to spark3.1, 3.0, spark2.4.\r\n\r\nThis PR has 3 commits for easy review and comparison. Spark-3.1,3.0 changes are identical to 3.2.\r\nSpark-2.4 doesn't have call procedure and Spark3 actions. So, handled all the applicable changes.\r\n\r\nPlease have a look.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974624720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974726059","html_url":"https://github.com/apache/iceberg/pull/3530#issuecomment-974726059","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3530","id":974726059,"node_id":"IC_kwDOCW7NX846GSOr","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-20T23:26:56Z","updated_at":"2021-11-20T23:26:56Z","author_association":"CONTRIBUTOR","body":"On Tue, Nov 16, 2021 at 12:01 PM Ryan Blue ***@***.***> wrote:\n\n> Thanks for making this better, @flyrain <https://github.com/flyrain>!\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/pull/3530#issuecomment-970632899>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAKC256PYV5P7E72QNYF2A3UMK2CRANCNFSM5HYUMGVA>\n> .\n>\n-- \nBest,\n\nYufei\n\n`This is not a contribution`\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974726059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974747373","html_url":"https://github.com/apache/iceberg/issues/2435#issuecomment-974747373","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2435","id":974747373,"node_id":"IC_kwDOCW7NX846GXbt","user":{"login":"KarlManong","id":2627662,"node_id":"MDQ6VXNlcjI2Mjc2NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2627662?v=4","gravatar_id":"","url":"https://api.github.com/users/KarlManong","html_url":"https://github.com/KarlManong","followers_url":"https://api.github.com/users/KarlManong/followers","following_url":"https://api.github.com/users/KarlManong/following{/other_user}","gists_url":"https://api.github.com/users/KarlManong/gists{/gist_id}","starred_url":"https://api.github.com/users/KarlManong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarlManong/subscriptions","organizations_url":"https://api.github.com/users/KarlManong/orgs","repos_url":"https://api.github.com/users/KarlManong/repos","events_url":"https://api.github.com/users/KarlManong/events{/privacy}","received_events_url":"https://api.github.com/users/KarlManong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T03:06:02Z","updated_at":"2021-11-21T03:06:56Z","author_association":"CONTRIBUTOR","body":"> Can this action fix the problem which accidental deleted partition data files？\r\n\r\n我们有一张分区表，存放在hdfs上，里面有一个分区的数据被hdfs client删除了。这个表只要访问了关联到错误分区的数据就直接抛出FileNotFoundException，而且还不能通过delete from table where partition = error_part的方式删除。目前只能通过手工修正meta的方式修复。\r\n\r\n------\r\n\r\nWe have a partition table, which is stored on hdfs, and the data of a partition is deleted by hdfs client. As long as this table accesses the data associated with the error partition, `FileNotFoundException` will be thrown directly, and it cannot be deleted by sql `deleting from table where partition = error_part`. Currently, it can only be repaired by manually correcting the meta.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974747373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974761448","html_url":"https://github.com/apache/iceberg/pull/3580#issuecomment-974761448","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3580","id":974761448,"node_id":"IC_kwDOCW7NX846Ga3o","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T06:07:02Z","updated_at":"2021-11-21T06:29:58Z","author_association":"CONTRIBUTOR","body":"Looking at the docs, it looks like we can write resolvers for classes to control how things are read via derived attribute, which is like a one time setter method (for having logic to compute a field).  There seems to be a lot of things a builder would need.  Using a library like this would be nice. But would this solve the overriding concerns over there?\r\n\r\nIf we used it, I'd maybe prefer to see it start being used in newer places or with less critical things. Again, in Scala case classes and then associated objects with apply and unapply methods are more my background.\r\n\r\nTableMetadata is a really core part of the API and it has a builder. Though I wold love to use a library like this. It would save a lot of time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974761448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974854929","html_url":"https://github.com/apache/iceberg/pull/3479#issuecomment-974854929","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3479","id":974854929,"node_id":"IC_kwDOCW7NX846GxsR","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T16:59:48Z","updated_at":"2021-11-21T16:59:48Z","author_association":"CONTRIBUTOR","body":"Merged and deployed. Thanks, @samredai!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974854929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974861510","html_url":"https://github.com/apache/iceberg/pull/3584#issuecomment-974861510","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3584","id":974861510,"node_id":"IC_kwDOCW7NX846GzTG","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T17:37:31Z","updated_at":"2021-11-21T17:37:31Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, I opened https://github.com/aokolnychyi/incubator-iceberg/pull/4 to fix this.\r\n\r\nThe problem is that the metrics eval visitors don't handle non-reference terms (i.e. transforms) in expressions. The fix was to allow them to return a default decision, like `ROWS_MIGHT_MATCH` when they encounter a non-reference term.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974861510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974874372","html_url":"https://github.com/apache/iceberg/pull/3587#issuecomment-974874372","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3587","id":974874372,"node_id":"IC_kwDOCW7NX846G2cE","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T19:02:30Z","updated_at":"2021-11-21T19:02:30Z","author_association":"CONTRIBUTOR","body":"@ajantha-bhat could you separate this into a PR per Spark version? We try to keep PRs separate so that we can revert or pick them individually.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974874372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974887047","html_url":"https://github.com/apache/iceberg/issues/3117#issuecomment-974887047","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3117","id":974887047,"node_id":"IC_kwDOCW7NX846G5iH","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T20:09:25Z","updated_at":"2021-11-21T20:09:25Z","author_association":"CONTRIBUTOR","body":"@openinx, @xinbinhuang, there's no need to assign issues to specific people. Assigning issues almost always prevents work from getting done instead of deconflicting. It is far more likely that someone has an issue assigned and then doesn't have time to work on it, compared to having two people work on an issue at the same time. If you want to work on something, just mention that you plan to do it or link to a PR, rather than waiting to be assigned.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974887047/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974887965","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-974887965","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":974887965,"node_id":"IC_kwDOCW7NX846G5wd","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T20:14:15Z","updated_at":"2021-11-21T20:14:15Z","author_association":"CONTRIBUTOR","body":"I opened #3590 to partially address this. That removes the dependency on Hadoop `Configuration` and `Configurable` from `CatalogUtil`. I think it will also require a similar change to `FlinkCatalogFactory` because that class can't be loaded without `Configuration` or Flink's `HadoopUtils`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974887965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974893575","html_url":"https://github.com/apache/iceberg/pull/3567#issuecomment-974893575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3567","id":974893575,"node_id":"IC_kwDOCW7NX846G7IH","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T20:50:21Z","updated_at":"2021-11-21T20:50:21Z","author_association":"CONTRIBUTOR","body":"I have some minor style comments on the tests, but overall this looks good to me. Thanks @jackye1995!\r\n\r\n+1 after rebase and passing tests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974893575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974903880","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-974903880","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":974903880,"node_id":"IC_kwDOCW7NX846G9pI","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T22:00:46Z","updated_at":"2021-11-21T22:00:46Z","author_association":"CONTRIBUTOR","body":"@dubeme, that isn't the same problem. That issue is happening when you serialize `SparkPartition`, not a data file.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974903880/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974904250","html_url":"https://github.com/apache/iceberg/issues/3586#issuecomment-974904250","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3586","id":974904250,"node_id":"IC_kwDOCW7NX846G9u6","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-21T22:03:13Z","updated_at":"2021-11-21T22:03:13Z","author_association":"CONTRIBUTOR","body":"Looks like we just need to stop using an `ImmutableMap` in `SparkPartition`: https://github.com/apache/iceberg/blob/master/spark/v3.2/spark/src/main/java/org/apache/iceberg/spark/SparkTableUtil.java#L650\r\n\r\n@dubeme would you like to open a PR with the fix and a test that serializes `SparkPartition` using Kryo?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974904250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974937165","html_url":"https://github.com/apache/iceberg/issues/3227#issuecomment-974937165","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3227","id":974937165,"node_id":"IC_kwDOCW7NX846HFxN","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T00:31:52Z","updated_at":"2021-11-22T00:31:52Z","author_association":"CONTRIBUTOR","body":"> SG, thanks for the help. BTW, table depends on the partition spec and schema, which are ongoing work.\r\n\r\nUnderstood, I'm keeping an eye on those","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/974937165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975007349","html_url":"https://github.com/apache/iceberg/pull/3477#issuecomment-975007349","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3477","id":975007349,"node_id":"IC_kwDOCW7NX846HW51","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T02:10:51Z","updated_at":"2021-11-22T02:10:51Z","author_association":"MEMBER","body":"@rdblue ,  Is there any chance to take a look at this PR ? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975007349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975019324","html_url":"https://github.com/apache/iceberg/pull/3587#issuecomment-975019324","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3587","id":975019324,"node_id":"IC_kwDOCW7NX846HZ08","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T02:40:30Z","updated_at":"2021-11-22T02:40:30Z","author_association":"MEMBER","body":"> @ajantha-bhat could you separate this into a PR per Spark version? We try to keep PRs separate so that we can revert or pick them individually.\r\n\r\nok. sure. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975019324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975100407","html_url":"https://github.com/apache/iceberg/issues/3532#issuecomment-975100407","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3532","id":975100407,"node_id":"IC_kwDOCW7NX846Htn3","user":{"login":"huaxingao","id":13592258,"node_id":"MDQ6VXNlcjEzNTkyMjU4","avatar_url":"https://avatars.githubusercontent.com/u/13592258?v=4","gravatar_id":"","url":"https://api.github.com/users/huaxingao","html_url":"https://github.com/huaxingao","followers_url":"https://api.github.com/users/huaxingao/followers","following_url":"https://api.github.com/users/huaxingao/following{/other_user}","gists_url":"https://api.github.com/users/huaxingao/gists{/gist_id}","starred_url":"https://api.github.com/users/huaxingao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huaxingao/subscriptions","organizations_url":"https://api.github.com/users/huaxingao/orgs","repos_url":"https://api.github.com/users/huaxingao/repos","events_url":"https://api.github.com/users/huaxingao/events{/privacy}","received_events_url":"https://api.github.com/users/huaxingao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T04:36:38Z","updated_at":"2021-11-22T04:36:38Z","author_association":"CONTRIBUTOR","body":"I will give this a try.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975100407/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975152923","html_url":"https://github.com/apache/iceberg/issues/3117#issuecomment-975152923","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3117","id":975152923,"node_id":"IC_kwDOCW7NX846H6cb","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T05:56:48Z","updated_at":"2021-11-22T05:56:48Z","author_association":"CONTRIBUTOR","body":"Makes sense! thanks for the info!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975152923/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975196454","html_url":"https://github.com/apache/iceberg/issues/3586#issuecomment-975196454","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3586","id":975196454,"node_id":"IC_kwDOCW7NX846IFEm","user":{"login":"dubeme","id":1667350,"node_id":"MDQ6VXNlcjE2NjczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1667350?v=4","gravatar_id":"","url":"https://api.github.com/users/dubeme","html_url":"https://github.com/dubeme","followers_url":"https://api.github.com/users/dubeme/followers","following_url":"https://api.github.com/users/dubeme/following{/other_user}","gists_url":"https://api.github.com/users/dubeme/gists{/gist_id}","starred_url":"https://api.github.com/users/dubeme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubeme/subscriptions","organizations_url":"https://api.github.com/users/dubeme/orgs","repos_url":"https://api.github.com/users/dubeme/repos","events_url":"https://api.github.com/users/dubeme/events{/privacy}","received_events_url":"https://api.github.com/users/dubeme/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T07:18:00Z","updated_at":"2021-11-22T07:18:00Z","author_association":"CONTRIBUTOR","body":"@rdblue , I'll give it a go. I'm not familiar with gradle (_more of a maven person_), but I can try working through it. \r\n\r\nqq: You point to the Spark 3.2 source, I assume such fix will also apply to the 3.0, 3.1 files?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975196454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975206805","html_url":"https://github.com/apache/iceberg/pull/3539#issuecomment-975206805","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3539","id":975206805,"node_id":"IC_kwDOCW7NX846IHmV","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T07:37:08Z","updated_at":"2021-11-22T07:37:08Z","author_association":"MEMBER","body":"> What is the problem with changing the serde and format properties? \r\n\r\nI used the following command to alter the serde and format properties for a non hive native iceberg table created by spark/flink engines without `engine.hive.enabled=true`, finally the hive engine can  indeed query the original iceberg tables now. \r\n\r\n```\r\nALTER TABLE flink_local_nohive SET SERDEPROPERTIES (\r\n    'storage_handler' = 'org.apache.iceberg.mr.hive.HiveIcebergStorageHandler',\r\n);\r\nALTER TABLE flink_local_nohive SET FILEFORMAT\r\n    INPUTFORMAT 'org.apache.iceberg.mr.hive.HiveIcebergInputFormat'\r\n    OUTPUTFORMAT 'org.apache.iceberg.mr.hive.HiveIcebergOutputFormat'\r\n    SERDE 'org.apache.iceberg.mr.hive.HiveIcebergSerDe';\r\n```\r\n\r\nBut I don't quite recommend to use this approach because it's too internal detailed for the users. People need to figure which input/output format classes that iceberg is using and which storage handler class is using, also need to align the iceberg properties that we set into the hive tables.  For example,  people need to figure out what's the specific value that set for the `external.table.purge` ( In this case, it's an external table so we don't have to set).\r\n\r\nIn short, the reason why I don't recommend it is because I am worried that the user has changed or omitted some attributes defined by iceberg, which may cause the hive table to be inaccessible by other computing engines. Therefore, I instead recommend that the user create another external table to refer to the previous table, at least the user does not need to change the iceberg table in the original pipeline.\r\n\r\n> what exactly is this PR doing? Is it creating a second table and that's the source of the already exists error?\r\n\r\nYes,  we are implementing to create a second table to refer to the original iceberg tables without enabling `engine.hive.enabled` switch. \r\n\r\nThis is because some users have accumulated a large amount of data in the iceberg table, but they found that this table cannot be accessed by the hive engine. At this time, he faces two choices, one is to modify the original table to the hive table, and the other is to use other tables to reference the original table. In view of the discussion of the first question, I recommend the second method.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975206805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975207381","html_url":"https://github.com/apache/iceberg/pull/3580#issuecomment-975207381","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3580","id":975207381,"node_id":"IC_kwDOCW7NX846IHvV","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T07:38:12Z","updated_at":"2021-11-22T07:44:43Z","author_association":"CONTRIBUTOR","body":"> Question for my own understanding around `Immutables` and your experience with them:\r\n> \r\n> Are there any commonly followed practices for checking in (or not checking in) generated code? Is that something people usually vendor or not in your experience?\r\n\r\nThe generated code is not checked in. All you have is your class definition that have the Immutables-specific annotations.\r\n\r\n> \r\n> And what about for things that get stored long term for state? If the object definition changes, will the immutable library give us the ability to support / migrate definitions when users read things that might have been built from earlier versions of the objects? Have you experienced this to be an issue in practice?\r\n\r\nThis isn't usually a big concern. When something like this evolves, one can switch from the generated JSON serializers to custom serializers and mark fields as optional in order to have greater flexibility in what & how things are being serialized/deserialized. [This](https://github.com/projectnessie/nessie/blob/2b6b2c368c19e280d57b118bdbb1e5b4c41a3991/model/src/main/java/org/projectnessie/model/IcebergTable.java#L53-L54) for example uses auto-generated JSON serdes, but you always have the option to provide your own serializer and handle object evolution there. [Here](https://github.com/projectnessie/nessie/blob/05d1b7552be943189d16ee479b6cfb88e8621083/model/src/main/java/org/projectnessie/model/CommitMeta.java#L128-L164) and [here](https://github.com/projectnessie/nessie/blob/05d1b7552be943189d16ee479b6cfb88e8621083/model/src/main/java/org/projectnessie/model/CommitMeta.java#L93-L101) is an example for using a custom serializer with Immutables.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975207381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975209792","html_url":"https://github.com/apache/iceberg/pull/3539#issuecomment-975209792","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3539","id":975209792,"node_id":"IC_kwDOCW7NX846IIVA","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T07:42:44Z","updated_at":"2021-11-22T07:42:44Z","author_association":"MEMBER","body":"> I'm wondering about any security concerns with these alias tables\r\n\r\nGood point !  I think I need sometime to verify this. Will update the issue. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975209792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975212444","html_url":"https://github.com/apache/iceberg/pull/3580#issuecomment-975212444","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3580","id":975212444,"node_id":"IC_kwDOCW7NX846II-c","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T07:47:33Z","updated_at":"2021-11-22T07:47:33Z","author_association":"CONTRIBUTOR","body":"> Looking at the docs, it looks like we can write resolvers for classes to control how things are read via derived attribute, which is like a one time setter method (for having logic to compute a field). There seems to be a lot of things a builder would need. Using a library like this would be nice. But would this solve the overriding concerns over there?\r\n> \r\n\r\nI'm not exactly sure I understand what you mean by writing resolvers. Are you referring to https://immutables.github.io/immutable.html#derived-attributes?\r\n\r\n\r\n> If we used it, I'd maybe prefer to see it start being used in newer places or with less critical things. Again, in Scala case classes and then associated objects with apply and unapply methods are more my background.\r\n\r\nI'm perfectly fine with using Immutables at a less critical place. I rather wanted to show an alternative approach that doesn't require manually writing Builders.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975212444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975217120","html_url":"https://github.com/apache/iceberg/pull/3580#issuecomment-975217120","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3580","id":975217120,"node_id":"IC_kwDOCW7NX846IKHg","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T07:55:57Z","updated_at":"2021-11-22T10:41:50Z","author_association":"CONTRIBUTOR","body":"> I don't think that this is a good alternative to the other builder. The things we want to fix with the other builder are to make the builder smarter. It doesn't really help just to have a builder, we want to put more logic in there.\r\n\r\n@rdblue could you be more specific in what you'd like to see in such a Builder? Then we could check and see whether Immutable builders would support that. The Immutables lib provides more than just generated builders, but if the generated builders don't do what we want them to do, then there are also alternative ways of dealing with this (constructing objects via constructors and not builders, ...).\r\n\r\nLooking at https://github.com/apache/iceberg/pull/2957/files#diff-c55bb00afe1e6529dc13f2421f18bbb557de1a8111573400d4d3d22df573a9b9R28 I see a straight-forward builder implementation that just sets things. The downside I see with this approach is that you also have to write tests for that builder, since you'd like to make sure that all your fields are properly set and such. I've seen examples in the past where hand-made Builders didn't have unit tests and had bugs in them, so to me it seems it's better to have builders be generated.\r\n\r\n\r\nI also understand that changing something like `TableMetadata` to using Immutables is kind of a critical place with a certain level of uncertainty. I'm perfectly fine with starting at other places in the code if you think the Immutables lib is something that's useful.\r\nMy personal opinion on using Immutables is that it forces you to adhere to good coding practices, since you're working with Immutable data structures, which brings its own (positive) implications. Additionally, it saves you from writing manual and repetitive code (builders, serializers/deserializers, ...).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975217120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975352083","html_url":"https://github.com/apache/iceberg/pull/2210#issuecomment-975352083","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2210","id":975352083,"node_id":"IC_kwDOCW7NX846IrET","user":{"login":"talgos1","id":54764035,"node_id":"MDQ6VXNlcjU0NzY0MDM1","avatar_url":"https://avatars.githubusercontent.com/u/54764035?v=4","gravatar_id":"","url":"https://api.github.com/users/talgos1","html_url":"https://github.com/talgos1","followers_url":"https://api.github.com/users/talgos1/followers","following_url":"https://api.github.com/users/talgos1/following{/other_user}","gists_url":"https://api.github.com/users/talgos1/gists{/gist_id}","starred_url":"https://api.github.com/users/talgos1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/talgos1/subscriptions","organizations_url":"https://api.github.com/users/talgos1/orgs","repos_url":"https://api.github.com/users/talgos1/repos","events_url":"https://api.github.com/users/talgos1/events{/privacy}","received_events_url":"https://api.github.com/users/talgos1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T10:01:35Z","updated_at":"2021-11-22T10:02:24Z","author_association":"NONE","body":"Hi, I'm wondering if it's possible to add a specific file (or even an unpartitioned parquet/orc table) to a partitioned iceberg table (specific partition)?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975352083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975467940","html_url":"https://github.com/apache/iceberg/pull/3375#issuecomment-975467940","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3375","id":975467940,"node_id":"IC_kwDOCW7NX846JHWk","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T12:22:32Z","updated_at":"2021-11-22T12:22:32Z","author_association":"MEMBER","body":"ping..\r\n@RussellSpitzer , @aokolnychyi , @rdblue :  I wish to get these changes merged for 0.13.0 Iceberg release. Please have look if possible. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975467940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975539916","html_url":"https://github.com/apache/iceberg/pull/3561#issuecomment-975539916","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3561","id":975539916,"node_id":"IC_kwDOCW7NX846JY7M","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T13:45:58Z","updated_at":"2021-11-22T13:49:11Z","author_association":"CONTRIBUTOR","body":"Have you thought about/considered something like https://github.com/eclipse/microprofile-open-api (just an example, but there are other libs available as well), which allows you to add OpenAPI annotations directly to your Java code, so that the OpenAPI spec+docs and the code are all at one place? \r\nIn combination with JAX-RS annotations, everything that defines a REST endpoint would be combined at a single place and can be easier consumed/reasoned about by developers, rather than having the Swagger definitions and the endpoint implementations across multiple files.\r\nThe `swagger.json|yaml` is then generated from the annotations, which we could then serve by a separate REST endpoint (it would basically show what you see when you upload the `swagger.yaml` to editor.swagger.io).\r\n\r\nBelow is a quick & short example that shows how this would look like in code:\r\n\r\n\r\n```\r\n@Path(\"config\")\r\npublic interface ConfigurationApi {\r\n\r\n  @GET\r\n  @Produces(MediaType.APPLICATION_JSON)\r\n  @Operation(summary = \"List all catalog configuration settings\")\r\n  @APIResponses({\r\n    @APIResponse(\r\n        responseCode = \"200\",\r\n        description =\r\n            \"All REST catalogs will be initialized by calling this route. This route\\n\"\r\n                + \"will return at least the minimum necessary metadata to initialize the\\n\"\r\n                + \"catalog. Optionally, it can also include server-side specific overrides.\\n\"\r\n                + \"For example, it might also include information used to initialize this catalog\\n\"\r\n                + \"such as the details of the Http connection pooling, etc. This route might\\n\"\r\n                + \"also advertise information about operations that are not implemented\\n\"\r\n                + \"so that the catalog can eagerly throw or go about another way of performing\\n\"\r\n                + \"the desired action.\",\r\n        content =\r\n            @Content(\r\n                mediaType = MediaType.APPLICATION_JSON,\r\n                schema = @Schema(implementation = IcebergConfiguration.class))),\r\n    @APIResponse(responseCode = \"400\", description = \"Unknown Error\"),\r\n    @APIResponse(responseCode = \"401\", description = \"Invalid credentials provided\"),\r\n  })\r\n  IcebergConfiguration getConfig();\r\n}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975539916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975722838","html_url":"https://github.com/apache/iceberg/pull/2210#issuecomment-975722838","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2210","id":975722838,"node_id":"IC_kwDOCW7NX846KFlW","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T16:50:33Z","updated_at":"2021-11-22T16:50:33Z","author_association":"CONTRIBUTOR","body":"@talgos1, have you tried using a full file path as the source table?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975722838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975818969","html_url":"https://github.com/apache/iceberg/pull/3595#issuecomment-975818969","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3595","id":975818969,"node_id":"IC_kwDOCW7NX846KdDZ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T18:48:42Z","updated_at":"2021-11-22T18:48:42Z","author_association":"CONTRIBUTOR","body":"Thanks, @ajantha-bhat!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975818969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975828617","html_url":"https://github.com/apache/iceberg/pull/3477#issuecomment-975828617","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3477","id":975828617,"node_id":"IC_kwDOCW7NX846KfaJ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T19:01:54Z","updated_at":"2021-11-22T19:01:54Z","author_association":"CONTRIBUTOR","body":"Sure, I'll take a look. Can you give me more background on meta-columns and when they are excluded?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975828617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975833631","html_url":"https://github.com/apache/iceberg/pull/3561#issuecomment-975833631","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3561","id":975833631,"node_id":"IC_kwDOCW7NX846Kgof","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T19:07:40Z","updated_at":"2021-11-22T19:07:40Z","author_association":"CONTRIBUTOR","body":"> Have you thought about/considered something like https://github.com/eclipse/microprofile-open-api (just an example, but there are other libs available as well), which allows you to add OpenAPI annotations directly to your Java code, so that the OpenAPI spec+docs and the code are all at one place?\r\n\r\nRight now, the main thing is to have something to discuss, and being able to paste this file into the swagger UI makes it really easy to discuss the API.\r\n\r\nLonger term, I'm not sure what the best path will be to maintain the API definition, but I'm really reluctant to publish whatever happens to be in the Java implementation through annotations. While that's an easy way to keep the code and the definition in sync, it is probably not a great way to manage a specification that is portable. It's too easy to refactor Java and make unintended changes to the OpenAPI spec, right? Maybe I'm wrong here, but it seems easy to mess up the API that way.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975833631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975837265","html_url":"https://github.com/apache/iceberg/issues/3586#issuecomment-975837265","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3586","id":975837265,"node_id":"IC_kwDOCW7NX846KhhR","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T19:11:46Z","updated_at":"2021-11-22T19:11:46Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this! For now, you should update 3.2 and we can port the fix to the other Spark versions after it's in.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975837265/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975911260","html_url":"https://github.com/apache/iceberg/pull/3561#issuecomment-975911260","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3561","id":975911260,"node_id":"IC_kwDOCW7NX846Kzlc","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T20:56:57Z","updated_at":"2021-11-22T21:00:22Z","author_association":"CONTRIBUTOR","body":"> Have you thought about/considered something like https://github.com/eclipse/microprofile-open-api (just an example, but there are other libs available as well), which allows you to add OpenAPI annotations directly to your Java code, so that the OpenAPI spec+docs and the code are all at one place? In combination with JAX-RS annotations, everything that defines a REST endpoint would be combined at a single place and can be easier consumed/reasoned about by developers, rather than having the Swagger definitions and the endpoint implementations across multiple files. The `swagger.json|yaml` is then generated from the annotations, which we could then serve by a separate REST endpoint (it would basically show what you see when you upload the `swagger.yaml` to editor.swagger.io).\r\n> \r\n> Below is a quick & short example that shows how this would look like in code:\r\n> \r\n> ```\r\n> @Path(\"config\")\r\n> public interface ConfigurationApi {\r\n> \r\n>   @GET\r\n>   @Produces(MediaType.APPLICATION_JSON)\r\n>   @Operation(summary = \"List all catalog configuration settings\")\r\n>   @APIResponses({\r\n>     @APIResponse(\r\n>         responseCode = \"200\",\r\n>         description =\r\n>             \"All REST catalogs will be initialized by calling this route. This route\\n\"\r\n>                 + \"will return at least the minimum necessary metadata to initialize the\\n\"\r\n>                 + \"catalog. Optionally, it can also include server-side specific overrides.\\n\"\r\n>                 + \"For example, it might also include information used to initialize this catalog\\n\"\r\n>                 + \"such as the details of the Http connection pooling, etc. This route might\\n\"\r\n>                 + \"also advertise information about operations that are not implemented\\n\"\r\n>                 + \"so that the catalog can eagerly throw or go about another way of performing\\n\"\r\n>                 + \"the desired action.\",\r\n>         content =\r\n>             @Content(\r\n>                 mediaType = MediaType.APPLICATION_JSON,\r\n>                 schema = @Schema(implementation = IcebergConfiguration.class))),\r\n>     @APIResponse(responseCode = \"400\", description = \"Unknown Error\"),\r\n>     @APIResponse(responseCode = \"401\", description = \"Invalid credentials provided\"),\r\n>   })\r\n>   IcebergConfiguration getConfig();\r\n> }\r\n> ```\r\n\r\nI looked into something like this. For the moment, I chose to go without it given that I wanted to get this presentable and wasn't exactly sure how to format existing things in this way. Also, I believe we have slightly different libraries already available for it, though I think those are coming form other modules.\r\n\r\nThis week is a holiday in the US (Thanksgiving) and I'm going to ry to play around with this annotation styled AP to see if I can generate the docs in this way, though I'm not sure if we'd want to keep the annotations in the Java code or not.\r\n\r\nThanks as always for the pointer though @nastra. Your example will help as typically I've seen this used with annotations that are more specific to Spring or some particular framework. Even for just generating the initial document, this will be helpful.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975911260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975982448","html_url":"https://github.com/apache/iceberg/pull/3567#issuecomment-975982448","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3567","id":975982448,"node_id":"IC_kwDOCW7NX846LE9w","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T22:44:55Z","updated_at":"2021-11-22T22:44:55Z","author_association":"CONTRIBUTOR","body":"Thanks, @jackye1995!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975982448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975995326","html_url":"https://github.com/apache/iceberg/pull/3593#issuecomment-975995326","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3593","id":975995326,"node_id":"IC_kwDOCW7NX846LIG-","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T23:10:08Z","updated_at":"2021-11-22T23:10:08Z","author_association":"CONTRIBUTOR","body":"@jackye1995, what do you think about having a static list for now and adding dynamic configuration later if/when we need it?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/975995326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/976008041","html_url":"https://github.com/apache/iceberg/pull/3548#issuecomment-976008041","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3548","id":976008041,"node_id":"IC_kwDOCW7NX846LLNp","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-22T23:35:09Z","updated_at":"2021-11-22T23:35:09Z","author_association":"CONTRIBUTOR","body":"@kbendick Thanks for reviewing and the useful feedback! I've updated the PR with your suggestion. PTAL.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/976008041/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]