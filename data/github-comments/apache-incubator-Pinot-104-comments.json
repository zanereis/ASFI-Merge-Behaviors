[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915411000","html_url":"https://github.com/apache/pinot/pull/7384#issuecomment-915411000","issue_url":"https://api.github.com/repos/apache/pinot/issues/7384","id":915411000,"node_id":"IC_kwDOATCU_c42kBA4","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T17:01:40Z","updated_at":"2021-09-08T17:01:40Z","author_association":"CONTRIBUTOR","body":"k. but then why there are other changes than the pom changes?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915411000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915414963","html_url":"https://github.com/apache/pinot/pull/7384#issuecomment-915414963","issue_url":"https://api.github.com/repos/apache/pinot/issues/7384","id":915414963,"node_id":"IC_kwDOATCU_c42kB-z","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T17:07:21Z","updated_at":"2021-09-08T17:08:10Z","author_association":"CONTRIBUTOR","body":"> k. but then why there are other changes than the pom changes?\r\n\r\nAfter chatted with Prestodb community, I think it's better to move presto-pinot-driver (https://github.com/prestodb/presto-pinot-driver) module in pinot codebase, then refer to this module in presto plugin directly.\r\n\r\nPresto side has extra configs for grpc client and we expose the scatter-gather client.\r\nOther changes are due to some presto side integrations/checks.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915414963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915421214","html_url":"https://github.com/apache/pinot/issues/7378#issuecomment-915421214","issue_url":"https://api.github.com/repos/apache/pinot/issues/7378","id":915421214,"node_id":"IC_kwDOATCU_c42kDge","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T17:14:43Z","updated_at":"2021-09-08T17:14:43Z","author_association":"CONTRIBUTOR","body":"So, what you really need is not just multiple directory support, but (also)  support for some policy using which some directory may be chosen to keep segments in the server. Perhaps you are also looking for automated move of segments from \"hot\" to \"warm\" and then back to \"hot\" storage and also some policies there as well (you don't want to be moving segments back and forth all the time, since you also need cpu to serve queries).\r\n\r\nPerhaps Issue #7229  helps here? There is already a design doc in progress.\r\n\r\nFurther, it may be better to support tiered storage, as per [this](https://docs.google.com/document/d/1Z4FLg3ezHpqvc6zhy0jR6Wi2OL8wLO_lRC6aLkskFgs/edit#heading=h.sbtdm9byxqnc) design, so that you can have \"hot\" and \"warm servers that are appropriately priced. It will reduce the complicated code patterns introduced within the server by supporting multiple directories for local storage.\r\n\r\nOverall, -1 for this feature.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915421214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915422279","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-915422279","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":915422279,"node_id":"IC_kwDOATCU_c42kDxH","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T17:16:14Z","updated_at":"2021-09-08T17:16:14Z","author_association":"CONTRIBUTOR","body":"Please also add a link o https://docs.google.com/document/d/1Z4FLg3ezHpqvc6zhy0jR6Wi2OL8wLO_lRC6aLkskFgs/edit#heading=h.sbtdm9byxqnc in the design document, and comment on how your solution may work with or complement tiered storage, if we build that. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915422279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915476383","html_url":"https://github.com/apache/pinot/pull/7407#issuecomment-915476383","issue_url":"https://api.github.com/repos/apache/pinot/issues/7407","id":915476383,"node_id":"IC_kwDOATCU_c42kQ-f","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:36:05Z","updated_at":"2021-09-08T18:37:24Z","author_association":"CONTRIBUTOR","body":"The obfuscator is fully configurable. If patterns need to be added or tweaked this can be done at any time\r\n\r\nEDIT: to clarify - the patterns match on key name, not the values themselves","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915476383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915485767","html_url":"https://github.com/apache/pinot/pull/7407#issuecomment-915485767","issue_url":"https://api.github.com/repos/apache/pinot/issues/7407","id":915485767,"node_id":"IC_kwDOATCU_c42kTRH","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:50:39Z","updated_at":"2021-09-08T23:40:23Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7407](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (416e49c) into [master](https://codecov.io/gh/apache/pinot/commit/fe14d60a5fd3405cc695f9a3a9d1df73a0dbbea3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fe14d60) will **decrease** coverage by `34.44%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 416e49c differs from pull request most recent head cfb41e9. Consider uploading reports for the commit cfb41e9 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7407/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7407       +/-   ##\n=============================================\n- Coverage     71.91%   37.46%   -34.45%     \n+ Complexity     3348       92     -3256     \n=============================================\n  Files          1517     1518        +1     \n  Lines         75039    75069       +30     \n  Branches      10921    10924        +3     \n=============================================\n- Hits          53961    28128    -25833     \n- Misses        17451    44713    +27262     \n+ Partials       3627     2228     -1399     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `29.01% <0.00%> (-0.10%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `14.52% <0.00%> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/pinot/spi/env/PinotConfiguration.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZW52L1Bpbm90Q29uZmlndXJhdGlvbi5qYXZh) | `0.00% <0.00%> (-97.44%)` | :arrow_down: |\n| [...in/java/org/apache/pinot/spi/utils/Obfuscator.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvT2JmdXNjYXRvci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/config/table/TableType.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1RhYmxlVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/DimensionFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EaW1lbnNpb25GaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/readers/FileFormat.java](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9yZWFkZXJzL0ZpbGVGb3JtYXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [881 more](https://codecov.io/gh/apache/pinot/pull/7407/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [fe14d60...cfb41e9](https://codecov.io/gh/apache/pinot/pull/7407?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915485767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915493156","html_url":"https://github.com/apache/pinot/pull/7407#issuecomment-915493156","issue_url":"https://api.github.com/repos/apache/pinot/issues/7407","id":915493156,"node_id":"IC_kwDOATCU_c42kVEk","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T19:02:21Z","updated_at":"2021-09-08T19:02:21Z","author_association":"CONTRIBUTOR","body":"> The obfuscator is fully configurable. If patterns need to be added or tweaked this can be done at any time\r\n> \r\n> EDIT: to clarify - the patterns match on key name, not the values themselves\r\n\r\nMaybe I am missing something. How is the regex configurable? Controller config? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915493156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915499072","html_url":"https://github.com/apache/pinot/pull/7407#issuecomment-915499072","issue_url":"https://api.github.com/repos/apache/pinot/issues/7407","id":915499072,"node_id":"IC_kwDOATCU_c42kWhA","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T19:10:45Z","updated_at":"2021-09-08T19:10:45Z","author_association":"CONTRIBUTOR","body":"> > The obfuscator is fully configurable. If patterns need to be added or tweaked this can be done at any time\r\n> > EDIT: to clarify - the patterns match on key name, not the values themselves\r\n> \r\n> Maybe I am missing something. How is the regex configurable? Controller config?\r\n\r\nThe obfuscator constructor allows injection of regexes and masking values.\r\n\r\nThis PR provides a tool - the ultimate integration will still be owned by the maintainers of the various components. Hopefully, this will get the stalled obfuscation efforts, like #7081 moving again.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915499072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915535374","html_url":"https://github.com/apache/pinot/pull/7402#issuecomment-915535374","issue_url":"https://api.github.com/repos/apache/pinot/issues/7402","id":915535374,"node_id":"IC_kwDOATCU_c42kfYO","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T20:09:40Z","updated_at":"2021-09-08T20:09:40Z","author_association":"MEMBER","body":"@Jackie-Jiang do you have any concerns regarding what's above? This is much faster than the `HashMap` in the worst case as well as the best case. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915535374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915576580","html_url":"https://github.com/apache/pinot/pull/7402#issuecomment-915576580","issue_url":"https://api.github.com/repos/apache/pinot/issues/7402","id":915576580,"node_id":"IC_kwDOATCU_c42kpcE","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T21:14:33Z","updated_at":"2021-09-08T21:14:33Z","author_association":"MEMBER","body":"OK I reordered them.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915576580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915649144","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-915649144","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":915649144,"node_id":"IC_kwDOATCU_c42k7J4","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T23:53:35Z","updated_at":"2021-09-08T23:53:35Z","author_association":"CONTRIBUTOR","body":"Does it make sense to have some sort of segment level locks so that the same set of segments are not picked up by multiple tasks? If we can come up with a lock-free algorithms on this, that will be even better.\r\n\r\nAlternatively, some config value of not doing merge/rollup if the retention is just N hours/days away (if this is the only race condition).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915649144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915660204","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-915660204","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":915660204,"node_id":"IC_kwDOATCU_c42k92s","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T00:19:41Z","updated_at":"2021-09-09T00:19:41Z","author_association":"CONTRIBUTOR","body":"@elonazoulay & @xiangfu0 - hoping one of you can take a look, thanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915660204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915664185","html_url":"https://github.com/apache/pinot/issues/7404#issuecomment-915664185","issue_url":"https://api.github.com/repos/apache/pinot/issues/7404","id":915664185,"node_id":"IC_kwDOATCU_c42k-05","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T00:29:54Z","updated_at":"2021-09-09T00:29:54Z","author_association":"CONTRIBUTOR","body":"Actually the instanceId is returned after it is started (`StartServiceManagerCommand.startServiceManager()`), and it is logged in `StartServiceManagerCommand.startPinotService()`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915664185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915763649","html_url":"https://github.com/apache/pinot/issues/7404#issuecomment-915763649","issue_url":"https://api.github.com/repos/apache/pinot/issues/7404","id":915763649,"node_id":"IC_kwDOATCU_c42lXHB","user":{"login":"ckharide","id":9858267,"node_id":"MDQ6VXNlcjk4NTgyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/9858267?v=4","gravatar_id":"","url":"https://api.github.com/users/ckharide","html_url":"https://github.com/ckharide","followers_url":"https://api.github.com/users/ckharide/followers","following_url":"https://api.github.com/users/ckharide/following{/other_user}","gists_url":"https://api.github.com/users/ckharide/gists{/gist_id}","starred_url":"https://api.github.com/users/ckharide/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ckharide/subscriptions","organizations_url":"https://api.github.com/users/ckharide/orgs","repos_url":"https://api.github.com/users/ckharide/repos","events_url":"https://api.github.com/users/ckharide/events{/privacy}","received_events_url":"https://api.github.com/users/ckharide/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T05:00:34Z","updated_at":"2021-09-09T05:00:34Z","author_association":"NONE","body":"Ok may be am missing something here - in PinotServiceManager constructor _instanceId is already there. \r\n_instanceId = String.format(\"ServiceManager_%s_%d\", hostname, port);\r\n\r\nDoes it get mutated after the StartServiceManagerCommand.startServiceManager()","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915763649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915778295","html_url":"https://github.com/apache/pinot/issues/7388#issuecomment-915778295","issue_url":"https://api.github.com/repos/apache/pinot/issues/7388","id":915778295,"node_id":"IC_kwDOATCU_c42lar3","user":{"login":"elonazoulay","id":1587350,"node_id":"MDQ6VXNlcjE1ODczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1587350?v=4","gravatar_id":"","url":"https://api.github.com/users/elonazoulay","html_url":"https://github.com/elonazoulay","followers_url":"https://api.github.com/users/elonazoulay/followers","following_url":"https://api.github.com/users/elonazoulay/following{/other_user}","gists_url":"https://api.github.com/users/elonazoulay/gists{/gist_id}","starred_url":"https://api.github.com/users/elonazoulay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elonazoulay/subscriptions","organizations_url":"https://api.github.com/users/elonazoulay/orgs","repos_url":"https://api.github.com/users/elonazoulay/repos","events_url":"https://api.github.com/users/elonazoulay/events{/privacy}","received_events_url":"https://api.github.com/users/elonazoulay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T05:37:04Z","updated_at":"2021-09-09T05:40:53Z","author_association":"CONTRIBUTOR","body":"Yes, some example functions:\r\n* locf: last observation carried forward\r\n* gapfill: similar to the `seq` sql function, fill in a gap with specified granularity\r\n* linear interpolation: interpolate between 2 values, interpolate aggregates, ex. interpolate(avg(<col1))","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915778295/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915962900","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-915962900","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":915962900,"node_id":"IC_kwDOATCU_c42mHwU","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T10:27:46Z","updated_at":"2021-09-09T10:27:46Z","author_association":"MEMBER","body":"Rather than add another illegal reflective access to the codebase, can we take a step back? Why do we need to add the URL to `PluginClassLoader`'s `ClassLoader`? Presumably to create a delegation relationship between them, so what prevents a parent-child relationship here? I do appreciate this is addressing a regression, so there will be some desire for a \"quick fix\" but this needs to be balanced against making it harder for pinot to run on recent JDKs.\r\n\r\nRegardless of my future-proofing concerns, there should be a regression test which would have caught the regression in the first place, since it will cause cause some inconvenience if it regresses again.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/915962900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916216423","html_url":"https://github.com/apache/pinot/issues/7414#issuecomment-916216423","issue_url":"https://api.github.com/repos/apache/pinot/issues/7414","id":916216423,"node_id":"IC_kwDOATCU_c42nFpn","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T15:42:48Z","updated_at":"2021-09-09T15:42:48Z","author_association":"MEMBER","body":"Good point. We have this in many places.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916216423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916248377","html_url":"https://github.com/apache/pinot/issues/7414#issuecomment-916248377","issue_url":"https://api.github.com/repos/apache/pinot/issues/7414","id":916248377,"node_id":"IC_kwDOATCU_c42nNc5","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:21:26Z","updated_at":"2021-09-09T16:21:26Z","author_association":"CONTRIBUTOR","body":"I had the same thought as well, way early on in Pinot development.  However, when Adwait (a former pinot team member) and I researched a bit, we came across some articles that effectively said `System.currentTimeMillis()` was more efficient than nanos. I remember I was surprised because I thought getting nanos would be far cheaper, usually a relative clock that does not reach across cpus.  Perhaps the performance penalty is platform dependent, I am not sure.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916248377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916270036","html_url":"https://github.com/apache/pinot/issues/7414#issuecomment-916270036","issue_url":"https://api.github.com/repos/apache/pinot/issues/7414","id":916270036,"node_id":"IC_kwDOATCU_c42nSvU","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:52:36Z","updated_at":"2021-09-09T16:52:36Z","author_association":"MEMBER","body":"> `System.currentTimeMillis()` was more efficient than nanos\r\n\r\nThis is the first time I have heard that and I must admit I am very skeptical about those articles' claims. On linux, `System.currentTimeMillis` delegates to `CLOCK_REALTIME` (see [here](https://github.com/openjdk/jdk/blob/20a373a0d00b72f0c6dceb19efca3b7cc34335e5/src/hotspot/os/posix/os_posix.cpp#L1387)) whereas `System.nanoTime()` delegates to `CLOCK_MONOTONIC` ([here](https://github.com/openjdk/jdk/blob/20a373a0d00b72f0c6dceb19efca3b7cc34335e5/src/hotspot/os/posix/os_posix.cpp#L1409)). There are [faster clocks](https://people.cs.rutgers.edu/~pxk/416/notes/c-tutorials/gettime.html) than `CLOCK_MONOTONIC` but Java users don't have access to them. Performance wise, the dominating factor in time measurement tends to be whether the `clock_gettime ` syscall is mapped into userspace by vDSO or not, and e.g. Xen doesn't do that, which can confound measurement.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916270036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916273412","html_url":"https://github.com/apache/pinot/issues/7414#issuecomment-916273412","issue_url":"https://api.github.com/repos/apache/pinot/issues/7414","id":916273412,"node_id":"IC_kwDOATCU_c42nTkE","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:57:27Z","updated_at":"2021-09-09T16:57:27Z","author_association":"MEMBER","body":"I just recalled that [JFR uses RDTSC](https://github.com/openjdk/jdk/blob/739769c8fc4b496f08a92225a12d07414537b6c0/src/hotspot/share/jfr/utilities/jfrTime.cpp#L58) so can measure time more efficiently, so replacing manual tracing with JFR events might be a good idea if performance is a concern.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916273412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916318966","html_url":"https://github.com/apache/pinot/issues/7418#issuecomment-916318966","issue_url":"https://api.github.com/repos/apache/pinot/issues/7418","id":916318966,"node_id":"IC_kwDOATCU_c42ner2","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T18:02:10Z","updated_at":"2021-09-09T18:02:10Z","author_association":"CONTRIBUTOR","body":"In general, keeping a lower number of configurations keeps a product easier to use and document. Along these lines, I think a config variable like this does not add much value to pinot.\r\n\r\nMy vote is a -1\r\n\r\nI am happy to hear thoughts from others though.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916318966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916364705","html_url":"https://github.com/apache/pinot/issues/7395#issuecomment-916364705","issue_url":"https://api.github.com/repos/apache/pinot/issues/7395","id":916364705,"node_id":"IC_kwDOATCU_c42np2h","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:10:33Z","updated_at":"2021-09-09T19:10:33Z","author_association":"CONTRIBUTOR","body":"High level question\r\n\r\nAfter we added lucene based text index, there was FST text index added which uses Lucene FST libraries for purely regex searches as the former one took more storage if the user only wanted regex searches and not term, phrase etc. \r\n\r\nFor the current proposal of native text indexes, are we planning to re-implement all of Lucene libraries for search within Pinot ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916364705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916370107","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-916370107","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":916370107,"node_id":"IC_kwDOATCU_c42nrK7","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:18:43Z","updated_at":"2021-09-09T19:18:43Z","author_association":"CONTRIBUTOR","body":"Please give some time for design doc review. I had commented on the issue a couple of days ago to request time for review. Not sure if this has already been reviewed and approved\r\n\r\nI would encourage to follow these guidelines since these were recently discussed and approved by PMC - https://docs.pinot.apache.org/developers/developers-and-contributors/contribution-guidelines#pinot-enhancement-proposal-workflow ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916370107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916373241","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-916373241","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":916373241,"node_id":"IC_kwDOATCU_c42nr75","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:23:53Z","updated_at":"2021-09-09T19:23:53Z","author_association":"CONTRIBUTOR","body":"I think the key to solve this problem is to keep the lineage entry longer and only remove it when the segment is already removed in the previous round of cleanup. Combine this with segment existence check should be good enough to solve this race condition","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916373241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916383166","html_url":"https://github.com/apache/pinot/issues/7395#issuecomment-916383166","issue_url":"https://api.github.com/repos/apache/pinot/issues/7395","id":916383166,"node_id":"IC_kwDOATCU_c42nuW-","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:40:23Z","updated_at":"2021-09-09T19:40:23Z","author_association":"MEMBER","body":"Looking at the doc and PR, it looks like only the FST is being implemented. Pinot already has the posting list and the ability to evaluate boolean expressions over posting lists. Is there anything else?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916383166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916384652","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-916384652","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":916384652,"node_id":"IC_kwDOATCU_c42nuuM","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:42:45Z","updated_at":"2021-09-09T19:42:45Z","author_association":"MEMBER","body":"I think he published the PR to help with the review of the design doc. As long as the PR does not get merged without the approval of the design, it should be ok. \r\n\r\n@atris can you please update the PR description to indicate the same.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916384652/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916388421","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-916388421","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":916388421,"node_id":"IC_kwDOATCU_c42nvpF","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:48:57Z","updated_at":"2021-09-09T19:48:57Z","author_association":"CONTRIBUTOR","body":"Done, thanks ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916388421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916394186","html_url":"https://github.com/apache/pinot/issues/7395#issuecomment-916394186","issue_url":"https://api.github.com/repos/apache/pinot/issues/7395","id":916394186,"node_id":"IC_kwDOATCU_c42nxDK","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T19:58:42Z","updated_at":"2021-09-09T19:58:42Z","author_association":"CONTRIBUTOR","body":"No, FST and regexp automaton are the only two things - - rest of the\noperations will be performed by Pinot indices\n\nOn Fri, 10 Sep 2021, 01:10 Kishore Gopalakrishna, ***@***.***>\nwrote:\n\n> Looking at the doc and PR, it looks like only the FST is being\n> implemented. Pinot already has the posting list and the ability to evaluate\n> boolean expressions over posting lists. Is there anything else?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/pinot/issues/7395#issuecomment-916383166>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AANE5Y42X34HBC3VHHKYSCLUBEETDANCNFSM5DMMPHBQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916394186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916424091","html_url":"https://github.com/apache/pinot/pull/7399#issuecomment-916424091","issue_url":"https://api.github.com/repos/apache/pinot/issues/7399","id":916424091,"node_id":"IC_kwDOATCU_c42n4Wb","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T20:46:01Z","updated_at":"2021-09-09T20:46:01Z","author_association":"MEMBER","body":"@kkrugler was looking for something like this. Let's document how one can use this to test pinot.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916424091/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916426906","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-916426906","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":916426906,"node_id":"IC_kwDOATCU_c42n5Ca","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T20:51:00Z","updated_at":"2021-09-09T20:51:00Z","author_association":"CONTRIBUTOR","body":"Hi @richardstartin - yes, it's a quick fix to a regression, so I'd like to get this in for the next release. It basically restores behavior on pre-Java 9 JREs to how it was previously.\r\n\r\nAnd I agree that it should be solvable in a more future-proof way. But note that the call to `_addUrlMethod.setAccessible(true)` should only happen when running with pre-Java 9 JREs.\r\n\r\nSeparately the main issue with an appropriate regression test is that this problem only shows up when running with Hadoop and Spark. Tests for those absolutely should be added, but it's non-trivial to spin up a distributed Hadoop environment for these tests (needed to test proper class loading in the context of the map test). ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916426906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916442920","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-916442920","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":916442920,"node_id":"IC_kwDOATCU_c42n88o","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:16:54Z","updated_at":"2021-09-09T21:16:54Z","author_association":"MEMBER","body":"Regression testing this doesn't require running Hadoop: add a classfile with a class `com.Foo` in it to a location on disk, add the URL with `PluginClassloader.addURL` and then call `PluginClassloader.loadClass(\"com.Foo\")` with the name of the test class.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916442920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916452102","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-916452102","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":916452102,"node_id":"IC_kwDOATCU_c42n_MG","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:32:16Z","updated_at":"2021-09-09T21:32:16Z","author_association":"CONTRIBUTOR","body":"@richardstartin - the \"new\" version of PluginClassLoader seems to work just fine when Pinot is running as a regular Java process. When we're loading plugins (via Hadoop's distributed cache) for a map task, it doesn't work. This might be due to Hadoop's classloader, which does try to do some isolation for user classes vs. Hadoop classes. It definitely warrants a deeper dive, no argument there. But after 15 years of dealing with classloader issues with Hadoop and other distributed systems, I'm just not fired up...","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916452102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916454905","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-916454905","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":916454905,"node_id":"IC_kwDOATCU_c42n_35","user":{"login":"amrishlal","id":4550395,"node_id":"MDQ6VXNlcjQ1NTAzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4550395?v=4","gravatar_id":"","url":"https://api.github.com/users/amrishlal","html_url":"https://github.com/amrishlal","followers_url":"https://api.github.com/users/amrishlal/followers","following_url":"https://api.github.com/users/amrishlal/following{/other_user}","gists_url":"https://api.github.com/users/amrishlal/gists{/gist_id}","starred_url":"https://api.github.com/users/amrishlal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrishlal/subscriptions","organizations_url":"https://api.github.com/users/amrishlal/orgs","repos_url":"https://api.github.com/users/amrishlal/repos","events_url":"https://api.github.com/users/amrishlal/events{/privacy}","received_events_url":"https://api.github.com/users/amrishlal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:36:50Z","updated_at":"2021-09-09T21:36:50Z","author_association":"CONTRIBUTOR","body":"I would suggest creating a new pinot-fst module for the new FST implementation.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916454905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916458250","html_url":"https://github.com/apache/pinot/pull/7384#issuecomment-916458250","issue_url":"https://api.github.com/repos/apache/pinot/issues/7384","id":916458250,"node_id":"IC_kwDOATCU_c42oAsK","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:42:53Z","updated_at":"2021-09-09T21:42:53Z","author_association":"CONTRIBUTOR","body":"> This will change our release pipeline steps when building an Apache release. It would be great if you can also update the documentation at https://cwiki.apache.org/confluence/display/PINOT/Creating+an+Apache+Release\r\n\r\nwill do","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916458250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916460498","html_url":"https://github.com/apache/pinot/pull/7419#issuecomment-916460498","issue_url":"https://api.github.com/repos/apache/pinot/issues/7419","id":916460498,"node_id":"IC_kwDOATCU_c42oBPS","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:47:26Z","updated_at":"2021-09-09T21:47:26Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7419](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e63b529) into [master](https://codecov.io/gh/apache/pinot/commit/cf68e22cd153d9f4d82db960cb89d73e18df1a8c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cf68e22) will **decrease** coverage by `1.72%`.\n> The diff coverage is `45.75%`.\n\n> :exclamation: Current head e63b529 differs from pull request most recent head d64464f. Consider uploading reports for the commit d64464f to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7419/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7419      +/-   ##\n============================================\n- Coverage     71.40%   69.67%   -1.73%     \n+ Complexity     3370     3251     -119     \n============================================\n  Files          1503     1123     -380     \n  Lines         73870    52961   -20909     \n  Branches      10698     7985    -2713     \n============================================\n- Hits          52750    36903   -15847     \n+ Misses        17527    13438    -4089     \n+ Partials       3593     2620     -973     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `69.67% <45.75%> (+0.58%)` | :arrow_up: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...mmon/assignment/InstanceAssignmentConfigUtils.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vYXNzaWdubWVudC9JbnN0YW5jZUFzc2lnbm1lbnRDb25maWdVdGlscy5qYXZh) | `0.00% <0.00%> (-11.77%)` | :arrow_down: |\n| [...he/pinot/common/assignment/InstancePartitions.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vYXNzaWdubWVudC9JbnN0YW5jZVBhcnRpdGlvbnMuamF2YQ==) | `0.00% <0.00%> (-39.40%)` | :arrow_down: |\n| [...not/common/assignment/InstancePartitionsUtils.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vYXNzaWdubWVudC9JbnN0YW5jZVBhcnRpdGlvbnNVdGlscy5qYXZh) | `0.00% <0.00%> (-67.57%)` | :arrow_down: |\n| [...common/exception/SchemaAlreadyExistsException.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZXhjZXB0aW9uL1NjaGVtYUFscmVhZHlFeGlzdHNFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [.../org/apache/pinot/common/lineage/LineageEntry.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9MaW5lYWdlRW50cnkuamF2YQ==) | `61.11% <0.00%> (-3.60%)` | :arrow_down: |\n| [...not/common/lineage/SegmentLineageAccessHelper.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZUFjY2Vzc0hlbHBlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../pinot/common/messages/RunPeriodicTaskMessage.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUnVuUGVyaW9kaWNUYXNrTWVzc2FnZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...org/apache/pinot/common/metrics/BrokerMetrics.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJNZXRyaWNzLmphdmE=) | `0.00% <ø> (-44.45%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...apache/pinot/common/metrics/ControllerMetrics.java](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0cmljcy5qYXZh) | `0.00% <ø> (-57.15%)` | :arrow_down: |\n| ... and [760 more](https://codecov.io/gh/apache/pinot/pull/7419/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [cf68e22...d64464f](https://codecov.io/gh/apache/pinot/pull/7419?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916460498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916466802","html_url":"https://github.com/apache/pinot/pull/7384#issuecomment-916466802","issue_url":"https://api.github.com/repos/apache/pinot/issues/7384","id":916466802,"node_id":"IC_kwDOATCU_c42oCxy","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:56:53Z","updated_at":"2021-09-09T21:56:53Z","author_association":"CONTRIBUTOR","body":"fyi: @highker ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916466802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916483054","html_url":"https://github.com/apache/pinot/pull/6778#issuecomment-916483054","issue_url":"https://api.github.com/repos/apache/pinot/issues/6778","id":916483054,"node_id":"IC_kwDOATCU_c42oGvu","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T22:26:11Z","updated_at":"2021-09-09T22:26:11Z","author_association":"CONTRIBUTOR","body":"Please follow through promptly with the TODO and the race condition fix.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916483054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916492966","html_url":"https://github.com/apache/pinot/issues/7404#issuecomment-916492966","issue_url":"https://api.github.com/repos/apache/pinot/issues/7404","id":916492966,"node_id":"IC_kwDOATCU_c42oJKm","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T22:50:51Z","updated_at":"2021-09-09T22:50:51Z","author_association":"CONTRIBUTOR","body":"No it is not mutated, but fixed within the constructor (the port is already picked within the constructor). Alternatively we can also pick the port within the `start()` and fix the instanceId there, but in most cases the constructor and `start()` are invoked together so no big difference there.\r\nAdding @xiangfu0 to this thread","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916492966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916508520","html_url":"https://github.com/apache/pinot/pull/7420#issuecomment-916508520","issue_url":"https://api.github.com/repos/apache/pinot/issues/7420","id":916508520,"node_id":"IC_kwDOATCU_c42oM9o","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T23:28:10Z","updated_at":"2021-09-10T00:34:12Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7420](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ced0dad) into [master](https://codecov.io/gh/apache/pinot/commit/5976922d85ad0de6080b1dd63289b2a70756fa22?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (5976922) will **decrease** coverage by `1.26%`.\n> The diff coverage is `85.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7420/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7420      +/-   ##\n============================================\n- Coverage     71.87%   70.61%   -1.27%     \n  Complexity     3347     3347              \n============================================\n  Files          1517     1517              \n  Lines         75039    75040       +1     \n  Branches      10921    10930       +9     \n============================================\n- Hits          53932    52987     -945     \n- Misses        17482    18430     +948     \n+ Partials       3625     3623       -2     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `29.09% <76.66%> (+<0.01%)` | :arrow_up: |\n| unittests1 | `69.69% <85.00%> (-0.02%)` | :arrow_down: |\n| unittests2 | `14.53% <0.00%> (+<0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../java/org/apache/pinot/core/util/GroupByUtils.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL0dyb3VwQnlVdGlscy5qYXZh) | `100.00% <ø> (ø)` | |\n| [.../pinot/core/data/table/ConcurrentIndexedTable.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0NvbmN1cnJlbnRJbmRleGVkVGFibGUuamF2YQ==) | `78.26% <73.68%> (-3.56%)` | :arrow_down: |\n| [...not/core/query/reduce/GroupByDataTableReducer.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9yZWR1Y2UvR3JvdXBCeURhdGFUYWJsZVJlZHVjZXIuamF2YQ==) | `89.36% <83.33%> (+0.07%)` | :arrow_up: |\n| [...ache/pinot/core/data/table/SimpleIndexedTable.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL1NpbXBsZUluZGV4ZWRUYWJsZS5qYXZh) | `80.00% <85.71%> (-12.31%)` | :arrow_down: |\n| [...org/apache/pinot/core/data/table/IndexedTable.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0luZGV4ZWRUYWJsZS5qYXZh) | `84.74% <91.66%> (+5.25%)` | :arrow_up: |\n| [...re/data/table/UnboundedConcurrentIndexedTable.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL1VuYm91bmRlZENvbmN1cnJlbnRJbmRleGVkVGFibGUuamF2YQ==) | `100.00% <100.00%> (+73.91%)` | :arrow_up: |\n| [...perator/combine/GroupByOrderByCombineOperator.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9jb21iaW5lL0dyb3VwQnlPcmRlckJ5Q29tYmluZU9wZXJhdG9yLmphdmE=) | `82.71% <100.00%> (ø)` | |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nverttorawindex/ConvertToRawIndexTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ore/startree/executor/StarTreeGroupByExecutor.java](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9leGVjdXRvci9TdGFyVHJlZUdyb3VwQnlFeGVjdXRvci5qYXZh) | `0.00% <0.00%> (-86.67%)` | :arrow_down: |\n| ... and [101 more](https://codecov.io/gh/apache/pinot/pull/7420/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [5976922...ced0dad](https://codecov.io/gh/apache/pinot/pull/7420?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916508520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916651307","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-916651307","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":916651307,"node_id":"IC_kwDOATCU_c42ov0r","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T05:57:27Z","updated_at":"2021-09-10T05:57:27Z","author_association":"MEMBER","body":"> I would suggest creating a new pinot-fst module for the new FST implementation.\n\nNot sure about this.. we don't create modules at root level for other indexing. Need to think carefully before creating modules at the root.. at some point, ideally, we should create plugin mechanisms for indexes and then create a module for each index.. we are not there yet","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916651307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916701211","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-916701211","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":916701211,"node_id":"IC_kwDOATCU_c42o8Ab","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T07:42:23Z","updated_at":"2021-09-10T07:42:23Z","author_association":"CONTRIBUTOR","body":"> > I would suggest creating a new pinot-fst module for the new FST implementation.\r\n> \r\n> Not sure about this.. we don't create modules at root level for other indexing. Need to think carefully before creating modules at the root.. at some point, ideally, we should create plugin mechanisms for indexes and then create a module for each index.. we are not there yet\r\n\r\nAgreed. To add to Kishore's point, introducing new modules at root level increases the scope of jar conflicts. For e.g., in this PR, ImmutableFST uses the off heap bytes store in pinot-segment-local, thus creating a cyclic dependency. Until we do not have the plugin model, I would prefer this model.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916701211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916744919","html_url":"https://github.com/apache/pinot/pull/7420#issuecomment-916744919","issue_url":"https://api.github.com/repos/apache/pinot/issues/7420","id":916744919,"node_id":"IC_kwDOATCU_c42pGrX","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T08:54:36Z","updated_at":"2021-09-10T08:54:36Z","author_association":"MEMBER","body":"> This can significantly reduce the cost of final record sorting.\r\n\r\nHow is this evaluated? Is it repeatable?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/916744919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917013678","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-917013678","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":917013678,"node_id":"IC_kwDOATCU_c42qISu","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T15:53:59Z","updated_at":"2021-09-10T15:53:59Z","author_association":"MEMBER","body":"@kkrugler I've done this sort of thing before for bytecode instrumentation so I will try to produce a regression test without Hadoop in the picture. Probably early next week.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917013678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917054690","html_url":"https://github.com/apache/pinot/pull/7400#issuecomment-917054690","issue_url":"https://api.github.com/repos/apache/pinot/issues/7400","id":917054690,"node_id":"IC_kwDOATCU_c42qSTi","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T16:53:35Z","updated_at":"2021-09-10T16:55:07Z","author_association":"CONTRIBUTOR","body":"@richardstartin a regression test that fails with the current code would be awesome, thanks!\r\n\r\nOne additional note - I haven't tried the current code (without my mods) on Hadoop and Java 9+, so I don't know if it always fails when running in a Hadoop context, or only for Java 8 (which is what we're using).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917054690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917075229","html_url":"https://github.com/apache/pinot/issues/7395#issuecomment-917075229","issue_url":"https://api.github.com/repos/apache/pinot/issues/7395","id":917075229,"node_id":"IC_kwDOATCU_c42qXUd","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T17:20:22Z","updated_at":"2021-09-10T17:20:22Z","author_association":"CONTRIBUTOR","body":"Wanted to understand a few things better. \r\n\r\nIIUC, this is our current state\r\n\r\n- Lucene text index - wrapper over Lucene to get phrase, term, regex etc search query functionality\r\n- Lucene FST index - this was added later (by Confluera I guess) to use FST libraries of Lucene to purely get regex search functionality from Lucene.\r\n\r\nIn both the above cases, we get FST and regexp automaton as part of using Lucene. We also advise users to not use Lucene text index if they want to do exact matches since Pinot's native inverted index is way faster for exact matches. When we say we are implementing native FST index, what exact functionality are we adding and/or improving ? This is not clear in the design doc. The doc talks about control/flexibility and potential future improvements but they are a bit vague IMHO and few more details can be added in those sections.\r\n\r\nMy guess is that this is about improving phrase, regex and fuzzy search by building a native FST index which can work on top of existing Pinot's native structures -- inverted index and dictionary. So it seems like a bridge is missing between Pinot's native inv index and dictionary structure and Lucene FST. Is this correct ? If so, can this not be achieved by continuing to use Lucene FST library as opposed to putting it into Pinot. Something we already do as part of Lucene FST index. \r\n\r\nAlso, how will this new work be different from what is currently offered by Lucene FST index in terms of functionality and performance. There are some performance charts but if I am reading them right, the improvement seems marginal. \r\n\r\nAlso, thanks for clarifying in the doc that this work won't regress the TEXT_MATCH functionality (query syntax etc) and performance. In case, we go ahead with this new work, I think from the end state, we should not have the mandatory step of removing current Lucene text index and TEXT_MATCH. If someone wants to migrate, there should be a migration path. Rest of the users can continue to use what we have today ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917075229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917092565","html_url":"https://github.com/apache/pinot/pull/7420#issuecomment-917092565","issue_url":"https://api.github.com/repos/apache/pinot/issues/7420","id":917092565,"node_id":"IC_kwDOATCU_c42qbjV","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T17:45:57Z","updated_at":"2021-09-10T17:45:57Z","author_association":"CONTRIBUTOR","body":"@richardstartin This is repeatable for all group-by order-by queries without having clause (having clause has other issues, and I just put a TODO and keep the current behavior). For example, currently when we do `SELECT ... GROUP BY ... ORDER BY ... LIMIT 10`, on the broker side we will get and sort the top 5000 (trim size) records using heap sort. With the change, we only sort on the top 10 records with the same algorithm, and smaller heap is guaranteed to give better performance. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917092565/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917104588","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-917104588","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":917104588,"node_id":"IC_kwDOATCU_c42qefM","user":{"login":"amrishlal","id":4550395,"node_id":"MDQ6VXNlcjQ1NTAzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4550395?v=4","gravatar_id":"","url":"https://api.github.com/users/amrishlal","html_url":"https://github.com/amrishlal","followers_url":"https://api.github.com/users/amrishlal/followers","following_url":"https://api.github.com/users/amrishlal/following{/other_user}","gists_url":"https://api.github.com/users/amrishlal/gists{/gist_id}","starred_url":"https://api.github.com/users/amrishlal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrishlal/subscriptions","organizations_url":"https://api.github.com/users/amrishlal/orgs","repos_url":"https://api.github.com/users/amrishlal/repos","events_url":"https://api.github.com/users/amrishlal/events{/privacy}","received_events_url":"https://api.github.com/users/amrishlal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T18:04:50Z","updated_at":"2021-09-10T18:05:23Z","author_association":"CONTRIBUTOR","body":"> > I would suggest creating a new pinot-fst module for the new FST implementation.\r\n> \r\n> Not sure about this.. we don't create modules at root level for other indexing. Need to think carefully before creating modules at the root.. at some point, ideally, we should create plugin mechanisms for indexes and then create a module for each index.. we are not there yet\r\n\r\nIt doesn't have to be a top-level module, but basically, I was looking for some way to sufficiently encapsulate this FST implementation using interfaces (in a separate jar if possible) and then use it within Pinot (?).\r\n\r\n> For e.g., in this PR, ImmutableFST uses the off heap bytes store in pinot-segment-local, thus creating a cyclic dependency.\r\n \r\nSounds like we need interfaces?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917104588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917113062","html_url":"https://github.com/apache/pinot/issues/7421#issuecomment-917113062","issue_url":"https://api.github.com/repos/apache/pinot/issues/7421","id":917113062,"node_id":"IC_kwDOATCU_c42qgjm","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T18:17:56Z","updated_at":"2021-09-10T18:17:56Z","author_association":"CONTRIBUTOR","body":"Pinot is horizontally scalable, and the way to solve this seems to be to increase the number of severs. Yes, retry may help in the short run, but you will need to re-scale soon I think. \r\n\r\nDid we add live rebalance for upsert tables?  If so, maybe that can migrate in zero downtime ? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917113062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917119089","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-917119089","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":917119089,"node_id":"IC_kwDOATCU_c42qiBx","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T18:27:16Z","updated_at":"2021-09-10T18:27:16Z","author_association":"CONTRIBUTOR","body":"It is already encapsulated within a package in Pinot-segment and has\ninterfaces for interaction at each layer - please refer to the code\n\nOn Fri, 10 Sep 2021, 23:35 Amrish Lal, ***@***.***> wrote:\n\n> I would suggest creating a new pinot-fst module for the new FST\n> implementation.\n>\n> Not sure about this.. we don't create modules at root level for other\n> indexing. Need to think carefully before creating modules at the root.. at\n> some point, ideally, we should create plugin mechanisms for indexes and\n> then create a module for each index.. we are not there yet\n>\n> It doesn't have to be a top-level module, but basically, I was looking for\n> some way to sufficiently encapsulate this FST implementation using\n> interfaces (in a separate jar if possible) and then use it within Pinot (?).\n>\n> For e.g., in this PR, ImmutableFST uses the off heap bytes store in\n> pinot-segment-local, thus creating a cyclic dependency.\n> Sounds like we need interfaces?\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/pinot/pull/7405#issuecomment-917104588>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AANE5Y2H7WNUCTP3VX5OJIDUBJCE3ANCNFSM5DTCLYZQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917119089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917129393","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-917129393","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":917129393,"node_id":"IC_kwDOATCU_c42qkix","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T18:43:49Z","updated_at":"2021-09-10T18:43:49Z","author_association":"CONTRIBUTOR","body":"> > I would suggest creating a new pinot-fst module for the new FST implementation.\r\n> \r\n> Not sure about this.. we don't create modules at root level for other indexing. Need to think carefully before creating modules at the root.. at some point, ideally, we should create plugin mechanisms for indexes and then create a module for each index.. we are not there yet\r\n\r\n+1 to Kishore, we don't have (or create) new modules at root level for other indexing either.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917129393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917132482","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-917132482","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":917132482,"node_id":"IC_kwDOATCU_c42qlTC","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T18:48:53Z","updated_at":"2021-09-10T18:48:53Z","author_association":"CONTRIBUTOR","body":"> I think he published the PR to help with the review of the design doc. As long as the PR does not get merged without the approval of the design, it should be ok.\r\n> \r\n> @atris can you please update the PR description to indicate the same.\r\n\r\nYes, I believe, the intention of the PR was primarily to help with design doc review. Because some aspects do require review beyond what a design doc is good at capturing. Let's get consensus on the design doc, followed by PR review.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917132482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917256835","html_url":"https://github.com/apache/pinot/pull/6778#issuecomment-917256835","issue_url":"https://api.github.com/repos/apache/pinot/issues/6778","id":917256835,"node_id":"IC_kwDOATCU_c42rDqD","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T22:49:29Z","updated_at":"2021-09-10T22:49:29Z","author_association":"CONTRIBUTOR","body":"I am not sure how it is adding a lot of memory overhead to cache segments that are NOT in deep store. It should be the rare case, so in the most common case the memory overhead is zero. If deepstore is unavailable for (say) 12 hours, then only the names of segments completed within that window will be stored, so again it is a very small overhead.\r\n\r\nAs for retrieving all zk metadata all the time, it depends on the installation. If there are multiple realtime-only tables, with segments for several days, it could start to become a problem. One of the bottlenecks we have identified in our cluster is large pull of data from zookeeper.\r\n\r\nI am fine with a first implementation of pulling all metadata from zk and then fixing it later as needed, but please pull the metadata only under the config variable. On the other hand, the code is already done, so maybe it is best to leave it there.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917256835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917290051","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-917290051","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":917290051,"node_id":"IC_kwDOATCU_c42rLxD","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T23:37:06Z","updated_at":"2021-09-10T23:37:06Z","author_association":"CONTRIBUTOR","body":"> Does it make sense to have some sort of segment level locks so that the same set of segments are not picked up by multiple tasks? If we can come up with a lock-free algorithms on this, that will be even better.\r\n> \r\n> Alternatively, some config value of not doing merge/rollup if the retention is just N hours/days away (if this is the only race condition).\r\n\r\nThe segment zk metadata version will achieve the segment level lock? If we always check the version when replacing/deleting the segments, only one task will succeed. The other replacing/deleting request can retry later.\r\n\r\nI think scheduling part will not cause any issue, but the clean up part of merge/roll-up does. By adding merge/roll-up task, the retention manager now need to clean up merged segment to free the disk space. Say we merge A and B to C. After merging is done, the retention manager will remove A and B (even if they didn't pass the retention threshold, they should be removed since they are not serving queries anymore). If A and B are scheduled with purge task, the race condition can happen.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917290051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917293890","html_url":"https://github.com/apache/pinot/pull/6778#issuecomment-917293890","issue_url":"https://api.github.com/repos/apache/pinot/issues/6778","id":917293890,"node_id":"IC_kwDOATCU_c42rMtC","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T23:51:17Z","updated_at":"2021-09-10T23:51:17Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu The problem here is that there is already a known race condition needs to be fixed, and a lot of extra logic and extra config in order to avoid this zk metadata read. There are also bugs within the extra logic (e.g. uploaded segment whose name does not follow the LLC segment name format is not properly handled). IMO the extra effort of configuring the cluster and maintaining the code is not worth the gain.\r\nI would suggest just using the zk metadata and keeping the logic simple for the first version. We can consider reducing the frequency of the check if it becomes a bottleneck (e.g. follows the RealtimeSegmentValidationManager._segmentLevelValidationIntervalInSeconds).\r\n\r\nThe periodic tasks that read all segment zk metadata:\r\n- RetentionManager (6 hours interval by default): both offline and realtime tables\r\n- RealtimeSegmentValidationManager (segment level validation has 24 hours interval by default): realtime tables\r\n- OfflineSegmentIntervalChecker (24 hours interval by default): offline tables","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917293890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917294437","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-917294437","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":917294437,"node_id":"IC_kwDOATCU_c42rM1l","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T23:53:21Z","updated_at":"2021-09-10T23:53:21Z","author_association":"CONTRIBUTOR","body":"I think we do check the CRC when purge task pushes the segment. If that is not the case, we should add existence and CRC check","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917294437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917294620","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-917294620","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":917294620,"node_id":"IC_kwDOATCU_c42rM4c","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T23:54:07Z","updated_at":"2021-09-10T23:54:07Z","author_association":"CONTRIBUTOR","body":"> I think the key to solve this problem is to keep the lineage entry longer and only remove it when the segment is already removed in the previous round of cleanup. Combine this with segment existence check should be good enough to solve this race condition\r\n\r\nIn extreme case:\r\n1. Segment A is picked for merge/roll-up\r\n2. Before the merge/roll-up task is done, A is picked for purging\r\n3. merge task is finished\r\n4. retention manager removed segment A\r\n5. after 6 hours, retention manager removed the lineage\r\n6. Purge task is done, the purged segment is uploaded and we have duplicate data\r\n\r\nSo if the purge task run longer than 6 hour, we still have the issue?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917294620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917298474","html_url":"https://github.com/apache/pinot/pull/6778#issuecomment-917298474","issue_url":"https://api.github.com/repos/apache/pinot/issues/6778","id":917298474,"node_id":"IC_kwDOATCU_c42rN0q","user":{"login":"chenboat","id":2549137,"node_id":"MDQ6VXNlcjI1NDkxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2549137?v=4","gravatar_id":"","url":"https://api.github.com/users/chenboat","html_url":"https://github.com/chenboat","followers_url":"https://api.github.com/users/chenboat/followers","following_url":"https://api.github.com/users/chenboat/following{/other_user}","gists_url":"https://api.github.com/users/chenboat/gists{/gist_id}","starred_url":"https://api.github.com/users/chenboat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenboat/subscriptions","organizations_url":"https://api.github.com/users/chenboat/orgs","repos_url":"https://api.github.com/users/chenboat/repos","events_url":"https://api.github.com/users/chenboat/events{/privacy}","received_events_url":"https://api.github.com/users/chenboat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-11T00:08:24Z","updated_at":"2021-09-11T00:09:00Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang The segment zk metadata read method has this comment before it saying the op is very expensive. Either it is outdated or we should be careful about reading a lot of segment's zk metadata all together. Our prod cluster has million of segments and thus is pretty big. I understand today's code already performs the read  of all segments. We want extra protection and ramp up and down mechanism. The number of look back days is such a knob we can turn. \r\n\r\nbtw, I also noticed some of our large cluster's retention job failed -- we need to check zk access is the root cause.\r\n  \r\nhttps://github.com/apache/pinot/blob/7e9ca6a5a4afe0d4e283ac1307c45430e474cbf2/pinot-common/src/main/java/org/apache/pinot/common/metadata/ZKMetadataProvider.java#L271-L275\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917298474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917298621","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-917298621","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":917298621,"node_id":"IC_kwDOATCU_c42rN29","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-11T00:08:58Z","updated_at":"2021-09-11T00:08:58Z","author_association":"CONTRIBUTOR","body":"> I think we do check the CRC when purge task pushes the segment. If that is not the case, we should add existence and CRC check\r\n\r\nWe do check the crc. But the version check is still needed since in extreme cases the segment can be deleted after we check crc since the check&update is not atomic?\r\nI think we can have some sort of flag to indicate the upload request is replacement only (for purge and convertToRawIndex), if there's no existing segment or the segment got deleted before the request complete (zk version mismatch), we just abort the request. @Jackie-Jiang What do you think?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917298621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917336455","html_url":"https://github.com/apache/pinot/pull/7114#issuecomment-917336455","issue_url":"https://api.github.com/repos/apache/pinot/issues/7114","id":917336455,"node_id":"IC_kwDOATCU_c42rXGH","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-11T04:18:25Z","updated_at":"2021-09-11T04:18:25Z","author_association":"CONTRIBUTOR","body":"> Let's also add the scalar function version of it which can be used during data ingestion\r\n\r\ncould you share how the scalarFunction wrapper could be tested in ingestion?\r\n\r\nAlso I dont know if this is a good idea on a second thought:\r\nin the regex spect, regex pattern actually only accepts string literal (it doesn't support column), so it would be super inefficient to do a per-row pattern compilation.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917336455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917372847","html_url":"https://github.com/apache/pinot/pull/7405#issuecomment-917372847","issue_url":"https://api.github.com/repos/apache/pinot/issues/7405","id":917372847,"node_id":"IC_kwDOATCU_c42rf-v","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-11T09:10:50Z","updated_at":"2021-10-15T06:55:49Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7405](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (beb817e) into [master](https://codecov.io/gh/apache/pinot/commit/ac499780933c83f8b2f497d029e0e7a2f64c4c28?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ac49978) will **decrease** coverage by `44.70%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head beb817e differs from pull request most recent head 0a2ba3f. Consider uploading reports for the commit 0a2ba3f to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7405/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7405       +/-   ##\n=============================================\n- Coverage     72.56%   27.86%   -44.71%     \n=============================================\n  Files          1523     1543       +20     \n  Lines         75973    78625     +2652     \n  Branches      11101    11671      +570     \n=============================================\n- Hits          55132    21911    -33221     \n- Misses        17155    54738    +37583     \n+ Partials       3686     1976     -1710     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `27.86% <0.00%> (-1.05%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...nt/local/utils/nativefst/ByteSequenceIterator.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvQnl0ZVNlcXVlbmNlSXRlcmF0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...ment/local/utils/nativefst/ConstantArcSizeFST.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvQ29uc3RhbnRBcmNTaXplRlNULmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...pache/pinot/segment/local/utils/nativefst/FST.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvRlNULmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../pinot/segment/local/utils/nativefst/FSTFlags.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvRlNURmxhZ3MuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...pinot/segment/local/utils/nativefst/FSTHeader.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvRlNUSGVhZGVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ot/segment/local/utils/nativefst/FSTTraversal.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvRlNUVHJhdmVyc2FsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ot/segment/local/utils/nativefst/ImmutableFST.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvSW1tdXRhYmxlRlNULmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...not/segment/local/utils/nativefst/MatchResult.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvTWF0Y2hSZXN1bHQuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...t/local/utils/nativefst/NativeFSTIndexCreator.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvTmF0aXZlRlNUSW5kZXhDcmVhdG9yLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...nt/local/utils/nativefst/NativeFSTIndexReader.java](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9uYXRpdmVmc3QvTmF0aXZlRlNUSW5kZXhSZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| ... and [1103 more](https://codecov.io/gh/apache/pinot/pull/7405/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ac49978...0a2ba3f](https://codecov.io/gh/apache/pinot/pull/7405?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917372847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917389091","html_url":"https://github.com/apache/pinot/pull/7423#issuecomment-917389091","issue_url":"https://api.github.com/repos/apache/pinot/issues/7423","id":917389091,"node_id":"IC_kwDOATCU_c42rj8j","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-11T11:16:11Z","updated_at":"2021-09-11T11:46:40Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7423](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6de467e) into [master](https://codecov.io/gh/apache/pinot/commit/514f4693d2c739f41ef6917fc30a232e8f070950?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (514f469) will **decrease** coverage by `39.64%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 6de467e differs from pull request most recent head 862e8d9. Consider uploading reports for the commit 862e8d9 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7423/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7423       +/-   ##\n=============================================\n- Coverage     71.86%   32.22%   -39.65%     \n+ Complexity     3347       93     -3254     \n=============================================\n  Files          1518     1509        -9     \n  Lines         75097    74749      -348     \n  Branches      10940    10902       -38     \n=============================================\n- Hits          53971    24085    -29886     \n- Misses        17493    48602    +31109     \n+ Partials       3633     2062     -1571     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.38% <ø> (+<0.01%)` | :arrow_up: |\n| integration2 | `29.11% <ø> (+0.03%)` | :arrow_up: |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/config/table/TableType.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1RhYmxlVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/DimensionFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EaW1lbnNpb25GaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/readers/FileFormat.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9yZWFkZXJzL0ZpbGVGb3JtYXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...org/apache/pinot/spi/config/table/QuotaConfig.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1F1b3RhQ29uZmlnLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...org/apache/pinot/spi/config/tenant/TenantRole.java](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RlbmFudC9UZW5hbnRSb2xlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [985 more](https://codecov.io/gh/apache/pinot/pull/7423/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [514f469...862e8d9](https://codecov.io/gh/apache/pinot/pull/7423?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917389091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917560458","html_url":"https://github.com/apache/pinot/pull/6778#issuecomment-917560458","issue_url":"https://api.github.com/repos/apache/pinot/issues/6778","id":917560458,"node_id":"IC_kwDOATCU_c42sNyK","user":{"login":"liuchang0520","id":33030174,"node_id":"MDQ6VXNlcjMzMDMwMTc0","avatar_url":"https://avatars.githubusercontent.com/u/33030174?v=4","gravatar_id":"","url":"https://api.github.com/users/liuchang0520","html_url":"https://github.com/liuchang0520","followers_url":"https://api.github.com/users/liuchang0520/followers","following_url":"https://api.github.com/users/liuchang0520/following{/other_user}","gists_url":"https://api.github.com/users/liuchang0520/gists{/gist_id}","starred_url":"https://api.github.com/users/liuchang0520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuchang0520/subscriptions","organizations_url":"https://api.github.com/users/liuchang0520/orgs","repos_url":"https://api.github.com/users/liuchang0520/repos","events_url":"https://api.github.com/users/liuchang0520/events{/privacy}","received_events_url":"https://api.github.com/users/liuchang0520/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-12T05:30:51Z","updated_at":"2021-09-12T05:30:51Z","author_association":"CONTRIBUTOR","body":"@chenboat @Jackie-Jiang @mcvsubbu \r\nI removed the in-memory cache targeted for alleviate ZK access.\r\nMeanwhile I still keep the two controller configs:\r\n1. `controller.realtime.segment.deepStoreUploadRetryEnabled`: The flag to indicate enabled / disabled.\r\n2. `controller.realtime.segment.deepStoreUploadRetryRangeInDays`: Keep this flag for incremental rollout out. (e.g. First test the ZK load with 3 days. Move to longer range if ZK load is OK).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917560458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917671353","html_url":"https://github.com/apache/pinot/pull/7423#issuecomment-917671353","issue_url":"https://api.github.com/repos/apache/pinot/issues/7423","id":917671353,"node_id":"IC_kwDOATCU_c42so25","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-12T16:53:18Z","updated_at":"2021-09-12T16:53:18Z","author_association":"CONTRIBUTOR","body":"thanks @xiangfu0 for working on this over the weekend.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/917671353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918270810","html_url":"https://github.com/apache/pinot/pull/7114#issuecomment-918270810","issue_url":"https://api.github.com/repos/apache/pinot/issues/7114","id":918270810,"node_id":"IC_kwDOATCU_c42u7Na","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T14:48:53Z","updated_at":"2021-09-13T14:48:53Z","author_association":"CONTRIBUTOR","body":"> > Let's also add the scalar function version of it which can be used during data ingestion\r\n> \r\n> could you share how the scalarFunction wrapper could be tested in ingestion?\r\n> \r\n> Also I dont know if this is a good idea on a second thought:\r\n> in the regex spect, regex pattern actually only accepts string literal (it doesn't support column), so it would be super inefficient to do a per-row pattern compilation.\r\n\r\nI added the ScalarFunctionWrapper support in ba1262e. Please kindly take a look. \r\n\r\nActually I think there might be some optimization we can do when LITERAL is passed in by making the FunctionInfo a bit stateful. but that's for a different optimization PR. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918270810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918362180","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-918362180","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":918362180,"node_id":"IC_kwDOATCU_c42vRhE","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T16:25:33Z","updated_at":"2021-09-13T16:25:48Z","author_association":"CONTRIBUTOR","body":"Thanks @mcvsubbu, have updated the [proposal](https://docs.google.com/document/d/1txrsoI4WPRMPWuAvE-BHlHP5WIpbjrp0g7znkZD71Fk/edit). I have a question though that I couldn't figure out a solution to. When servers download/evict segments, what would be the best way to update the segment idealstate? Similarly for rebalancing from broker for even distribution of frozen segments. Certainly servers shouldn't be doing this and the controller can't get to know about them.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918362180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918378413","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-918378413","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":918378413,"node_id":"IC_kwDOATCU_c42vVet","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T16:46:05Z","updated_at":"2021-09-13T16:46:05Z","author_association":"CONTRIBUTOR","body":"@suddendust our current design is to NOT change idealstate. Please conform that this is indeed the case. This is so precisely for the reasons you mention.\r\n\r\nOne way to let the controller know is via some API, but we will need to manage multiple replicas doing this same thing, etc. We can get to this later. Let us do one version in which the idealstate is not touched.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918378413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918455195","html_url":"https://github.com/apache/pinot/pull/7399#issuecomment-918455195","issue_url":"https://api.github.com/repos/apache/pinot/issues/7399","id":918455195,"node_id":"IC_kwDOATCU_c42voOb","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T18:18:08Z","updated_at":"2021-09-13T20:47:18Z","author_association":"CONTRIBUTOR","body":"hmm couldn't reproduce this issue locally by running the compatibility check script in .github folder. any thoughts: @mcvsubbu ?\r\nI was wondering if we can provide downloading of the artifact of the working directory so that we can debug easier. it should be pretty easy to add. -- trying in #7425","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918455195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918456106","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-918456106","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":918456106,"node_id":"IC_kwDOATCU_c42vocq","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T18:19:08Z","updated_at":"2021-09-13T18:21:22Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu not adding any new state here. But as segments are downloaded, they'll need to be moved back to ONLINE right before we can serve queries off them.\r\n\r\nEdit: The design is essentially moving segments to OFFLINE when they are frozen and to ONLINE when they are thawed.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918456106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918460158","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-918460158","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":918460158,"node_id":"IC_kwDOATCU_c42vpb-","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T18:23:49Z","updated_at":"2021-09-13T18:24:30Z","author_association":"CONTRIBUTOR","body":"The segments should be in ONLINE state in idealstate.  A server may find it not in local store, and download it before serving the query. If you move a segment to be OFFLINE, the broker will not route queries to that segment","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918460158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918481054","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-918481054","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":918481054,"node_id":"IC_kwDOATCU_c42vuie","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T18:52:40Z","updated_at":"2021-09-13T18:54:51Z","author_association":"CONTRIBUTOR","body":"This makes the design quite simpler as I don't have to deal with the vagaries of state transitions. I'll update the doc with this (my thought process was that an unmapped segment should be moved to OFFLINE as an invariant. I was doing this solely to adhere to this).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918481054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918490551","html_url":"https://github.com/apache/pinot/pull/7425#issuecomment-918490551","issue_url":"https://api.github.com/repos/apache/pinot/issues/7425","id":918490551,"node_id":"IC_kwDOATCU_c42vw23","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T19:05:03Z","updated_at":"2021-09-15T18:32:32Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7425](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ff7c846) into [master](https://codecov.io/gh/apache/pinot/commit/ad2e0632fa8d8ab84316d25ce2cd4c91c18b11bf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ad2e063) will **decrease** coverage by `39.67%`.\n> The diff coverage is `66.44%`.\n\n> :exclamation: Current head ff7c846 differs from pull request most recent head 405cdcb. Consider uploading reports for the commit 405cdcb to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7425/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7425       +/-   ##\n=============================================\n- Coverage     71.90%   32.22%   -39.68%     \n+ Complexity     3429       93     -3336     \n=============================================\n  Files          1517     1507       -10     \n  Lines         75118    74761      -357     \n  Branches      10950    10907       -43     \n=============================================\n- Hits          54013    24095    -29918     \n- Misses        17470    48592    +31122     \n+ Partials       3635     2074     -1561     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.56% <66.44%> (+0.17%)` | :arrow_up: |\n| integration2 | `29.16% <63.08%> (-0.01%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...va/org/apache/pinot/spi/utils/CommonConstants.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQ29tbW9uQ29uc3RhbnRzLmphdmE=) | `0.00% <0.00%> (-26.32%)` | :arrow_down: |\n| [...ata/manager/realtime/RealtimeTableDataManager.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVUYWJsZURhdGFNYW5hZ2VyLmphdmE=) | `67.07% <33.33%> (-0.42%)` | :arrow_down: |\n| [.../pinot/core/data/manager/BaseTableDataManager.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvQmFzZVRhYmxlRGF0YU1hbmFnZXIuamF2YQ==) | `69.10% <55.76%> (-18.25%)` | :arrow_down: |\n| [.../pinot/server/starter/helix/BaseServerStarter.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9CYXNlU2VydmVyU3RhcnRlci5qYXZh) | `55.81% <100.00%> (+1.05%)` | :arrow_up: |\n| [...server/starter/helix/HelixInstanceDataManager.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9IZWxpeEluc3RhbmNlRGF0YU1hbmFnZXIuamF2YQ==) | `85.16% <100.00%> (+5.16%)` | :arrow_up: |\n| [...er/starter/helix/SegmentMessageHandlerFactory.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9TZWdtZW50TWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `72.60% <100.00%> (+0.80%)` | :arrow_up: |\n| [...r/helix/SegmentOnlineOfflineStateModelFactory.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9TZWdtZW50T25saW5lT2ZmbGluZVN0YXRlTW9kZWxGYWN0b3J5LmphdmE=) | `58.49% <100.00%> (-0.39%)` | :arrow_down: |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [999 more](https://codecov.io/gh/apache/pinot/pull/7425/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ad2e063...405cdcb](https://codecov.io/gh/apache/pinot/pull/7425?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918490551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918501443","html_url":"https://github.com/apache/pinot/pull/6778#issuecomment-918501443","issue_url":"https://api.github.com/repos/apache/pinot/issues/6778","id":918501443,"node_id":"IC_kwDOATCU_c42vzhD","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T19:18:32Z","updated_at":"2021-09-13T19:18:32Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu @chenboat @liuchang0520\r\nActually we can totally eliminate the extra ZK metadata read by reading the segments ZK metadata first, and then use them to `updateRealtimeDocumentCount()` then `uploadMissingSegments()`. Both of them should be part of the segment-level validation.\r\nWith this, there is no extra ZK metadata read, and we can remove `controller.realtime.segment.deepStoreUploadRetryRangeInDays` config.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918501443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918507946","html_url":"https://github.com/apache/pinot/pull/7424#issuecomment-918507946","issue_url":"https://api.github.com/repos/apache/pinot/issues/7424","id":918507946,"node_id":"IC_kwDOATCU_c42v1Gq","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T19:27:58Z","updated_at":"2021-09-13T19:27:58Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918507946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918512486","html_url":"https://github.com/apache/pinot/issues/7413#issuecomment-918512486","issue_url":"https://api.github.com/repos/apache/pinot/issues/7413","id":918512486,"node_id":"IC_kwDOATCU_c42v2Nm","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T19:34:23Z","updated_at":"2021-09-13T19:34:44Z","author_association":"CONTRIBUTOR","body":"@jtao15 One way to ensure atomicity is to follow the following steps when replacing the segment:\r\n1. Read the existing segment ZK metadata\r\n2. If not exist, abort\r\n3. If exist, check CRC\r\n4. If not match, abort\r\n5. If match, update segment ZK metadata with ZNode version check","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918512486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918565412","html_url":"https://github.com/apache/pinot/pull/7114#issuecomment-918565412","issue_url":"https://api.github.com/repos/apache/pinot/issues/7114","id":918565412,"node_id":"IC_kwDOATCU_c42wDIk","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T20:50:40Z","updated_at":"2021-09-13T20:50:40Z","author_association":"CONTRIBUTOR","body":"> Should we consider following the presto semantic of regexp_extract: https://prestodb.io/docs/current/functions/regexp.html\r\n> Seems databricks is also using this semantic: https://docs.databricks.com/sql/language-manual/functions/regexp_extract.html\r\n\r\nif i understand correctly this only means removing support for position right? (e.g. move occurrence to 3rd argument)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918565412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918581754","html_url":"https://github.com/apache/pinot/pull/7424#issuecomment-918581754","issue_url":"https://api.github.com/repos/apache/pinot/issues/7424","id":918581754,"node_id":"IC_kwDOATCU_c42wHH6","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T21:13:24Z","updated_at":"2021-09-13T21:25:39Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7424](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1a76467) into [master](https://codecov.io/gh/apache/pinot/commit/ffcf9b991431067c834bd4fb56fd7641c7fec172?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ffcf9b9) will **decrease** coverage by `1.37%`.\n> The diff coverage is `75.00%`.\n\n> :exclamation: Current head 1a76467 differs from pull request most recent head fe68931. Consider uploading reports for the commit fe68931 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7424/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7424      +/-   ##\n============================================\n- Coverage     71.90%   70.52%   -1.38%     \n+ Complexity     3433     3431       -2     \n============================================\n  Files          1518     1518              \n  Lines         75097    75102       +5     \n  Branches      10940    10940              \n============================================\n- Hits          53999    52968    -1031     \n- Misses        17469    18511    +1042     \n+ Partials       3629     3623       -6     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `29.00% <25.00%> (-0.09%)` | :arrow_down: |\n| unittests1 | `69.68% <ø> (-0.07%)` | :arrow_down: |\n| unittests2 | `14.53% <75.00%> (+<0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...troller/helix/core/retention/RetentionManager.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JldGVudGlvbi9SZXRlbnRpb25NYW5hZ2VyLmphdmE=) | `82.45% <75.00%> (+0.80%)` | :arrow_up: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nverttorawindex/ConvertToRawIndexTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ore/startree/executor/StarTreeGroupByExecutor.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9leGVjdXRvci9TdGFyVHJlZUdyb3VwQnlFeGVjdXRvci5qYXZh) | `0.00% <0.00%> (-86.67%)` | :arrow_down: |\n| [.../transform/function/MapValueTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vTWFwVmFsdWVUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `0.00% <0.00%> (-85.30%)` | :arrow_down: |\n| [...plugin/segmentuploader/SegmentUploaderDefault.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zZWdtZW50LXVwbG9hZGVyL3Bpbm90LXNlZ21lbnQtdXBsb2FkZXItZGVmYXVsdC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL3NlZ21lbnR1cGxvYWRlci9TZWdtZW50VXBsb2FkZXJEZWZhdWx0LmphdmE=) | `0.00% <0.00%> (-85.19%)` | :arrow_down: |\n| [...ot/common/messages/RoutingTableRebuildMessage.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUm91dGluZ1RhYmxlUmVidWlsZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-81.82%)` | :arrow_down: |\n| [...e/pinot/common/minion/MergeRollupTaskMetadata.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWluaW9uL01lcmdlUm9sbHVwVGFza01ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-78.27%)` | :arrow_down: |\n| [...ache/pinot/common/lineage/SegmentLineageUtils.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZVV0aWxzLmphdmE=) | `22.22% <0.00%> (-77.78%)` | :arrow_down: |\n| [...verttorawindex/ConvertToRawIndexTaskGenerator.java](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrR2VuZXJhdG9yLmphdmE=) | `10.41% <0.00%> (-77.09%)` | :arrow_down: |\n| ... and [102 more](https://codecov.io/gh/apache/pinot/pull/7424/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ffcf9b9...fe68931](https://codecov.io/gh/apache/pinot/pull/7424?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918581754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918617372","html_url":"https://github.com/apache/pinot/pull/7114#issuecomment-918617372","issue_url":"https://api.github.com/repos/apache/pinot/issues/7114","id":918617372,"node_id":"IC_kwDOATCU_c42wP0c","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T22:11:25Z","updated_at":"2021-09-13T22:11:25Z","author_association":"CONTRIBUTOR","body":"> > Should we consider following the presto semantic of regexp_extract: https://prestodb.io/docs/current/functions/regexp.html\r\n> > Seems databricks is also using this semantic: https://docs.databricks.com/sql/language-manual/functions/regexp_extract.html\r\n> \r\n> if i understand correctly this only means removing support for position right? (e.g. move occurrence to 3rd argument)\r\n\r\nYes, seems like it","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918617372/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918723716","html_url":"https://github.com/apache/pinot/pull/7427#issuecomment-918723716","issue_url":"https://api.github.com/repos/apache/pinot/issues/7427","id":918723716,"node_id":"IC_kwDOATCU_c42wpyE","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T01:43:08Z","updated_at":"2021-09-23T23:35:02Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7427](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6964fbc) into [master](https://codecov.io/gh/apache/pinot/commit/043c658e23282699ed95dd864cf87ff3d4cfd0f0?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (043c658) will **decrease** coverage by `32.42%`.\n> The diff coverage is `75.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7427/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7427       +/-   ##\n=============================================\n- Coverage     71.97%   39.55%   -32.43%     \n+ Complexity     3365       80     -3285     \n=============================================\n  Files          1519     1519               \n  Lines         75341    75361       +20     \n  Branches      10985    10988        +3     \n=============================================\n- Hits          54230    29807    -24423     \n- Misses        17463    43289    +25826     \n+ Partials       3648     2265     -1383     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.66% <75.00%> (+0.09%)` | :arrow_up: |\n| integration2 | `29.18% <25.00%> (-0.08%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `14.52% <28.57%> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ache/pinot/common/lineage/SegmentLineageUtils.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZVV0aWxzLmphdmE=) | `100.00% <ø> (ø)` | |\n| [...e/pinot/common/utils/FileUploadDownloadClient.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvRmlsZVVwbG9hZERvd25sb2FkQ2xpZW50LmphdmE=) | `59.30% <ø> (-0.44%)` | :arrow_down: |\n| [...ces/PinotSegmentUploadDownloadRestletResource.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90U2VnbWVudFVwbG9hZERvd25sb2FkUmVzdGxldFJlc291cmNlLmphdmE=) | `63.46% <ø> (+1.92%)` | :arrow_up: |\n| [...ntroller/helix/core/PinotHelixResourceManager.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90SGVsaXhSZXNvdXJjZU1hbmFnZXIuamF2YQ==) | `64.91% <50.00%> (+0.10%)` | :arrow_up: |\n| [...apache/pinot/controller/api/upload/ZKOperator.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvdXBsb2FkL1pLT3BlcmF0b3IuamF2YQ==) | `76.14% <66.66%> (+0.89%)` | :arrow_up: |\n| [...verttorawindex/ConvertToRawIndexTaskGenerator.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrR2VuZXJhdG9yLmphdmE=) | `85.96% <80.00%> (-1.54%)` | :arrow_down: |\n| [...elector/SegmentLineageBasedSegmentPreSelector.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJlc2VsZWN0b3IvU2VnbWVudExpbmVhZ2VCYXNlZFNlZ21lbnRQcmVTZWxlY3Rvci5qYXZh) | `100.00% <100.00%> (ø)` | |\n| [...ion/tasks/BaseSingleSegmentConversionExecutor.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvQmFzZVNpbmdsZVNlZ21lbnRDb252ZXJzaW9uRXhlY3V0b3IuamF2YQ==) | `74.60% <100.00%> (+0.83%)` | :arrow_up: |\n| [...on/tasks/mergerollup/MergeRollupTaskGenerator.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvbWVyZ2Vyb2xsdXAvTWVyZ2VSb2xsdXBUYXNrR2VuZXJhdG9yLmphdmE=) | `94.33% <100.00%> (ø)` | |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [824 more](https://codecov.io/gh/apache/pinot/pull/7427/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [043c658...6964fbc](https://codecov.io/gh/apache/pinot/pull/7427?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918723716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918736953","html_url":"https://github.com/apache/pinot/pull/7428#issuecomment-918736953","issue_url":"https://api.github.com/repos/apache/pinot/issues/7428","id":918736953,"node_id":"IC_kwDOATCU_c42wtA5","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T02:14:48Z","updated_at":"2021-09-16T22:34:26Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7428](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3467be4) into [master](https://codecov.io/gh/apache/pinot/commit/0ee33e8756e45d191617660939f9af67c33bfef1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0ee33e8) will **decrease** coverage by `0.06%`.\n> The diff coverage is `0.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7428/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7428      +/-   ##\n============================================\n- Coverage     69.83%   69.76%   -0.07%     \n+ Complexity     3258     3251       -7     \n============================================\n  Files          1123     1123              \n  Lines         53133    53133              \n  Branches       8008     8008              \n============================================\n- Hits          37106    37069      -37     \n- Misses        13397    13433      +36     \n- Partials       2630     2631       +1     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests1 | `69.76% <0.00%> (-0.07%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/common/utils/FileUploadDownloadClient.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvRmlsZVVwbG9hZERvd25sb2FkQ2xpZW50LmphdmE=) | `19.81% <0.00%> (ø)` | |\n| [...core/startree/operator/StarTreeFilterOperator.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9vcGVyYXRvci9TdGFyVHJlZUZpbHRlck9wZXJhdG9yLmphdmE=) | `68.08% <0.00%> (-15.61%)` | :arrow_down: |\n| [...nt/local/startree/v2/store/StarTreeDataSource.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9zdG9yZS9TdGFyVHJlZURhdGFTb3VyY2UuamF2YQ==) | `40.00% <0.00%> (-13.34%)` | :arrow_down: |\n| [...ore/query/scheduler/resources/ResourceManager.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvcmVzb3VyY2VzL1Jlc291cmNlTWFuYWdlci5qYXZh) | `85.71% <0.00%> (-10.72%)` | :arrow_down: |\n| [...ot/segment/local/startree/OffHeapStarTreeNode.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS9PZmZIZWFwU3RhclRyZWVOb2RlLmphdmE=) | `72.22% <0.00%> (-5.56%)` | :arrow_down: |\n| [.../startree/v2/builder/OffHeapSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL09mZkhlYXBTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `87.42% <0.00%> (-4.20%)` | :arrow_down: |\n| [...e/pinot/core/transport/InstanceRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS90cmFuc3BvcnQvSW5zdGFuY2VSZXF1ZXN0SGFuZGxlci5qYXZh) | `56.94% <0.00%> (-4.17%)` | :arrow_down: |\n| [.../pinot/core/query/scheduler/PriorityScheduler.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9zY2hlZHVsZXIvUHJpb3JpdHlTY2hlZHVsZXIuamF2YQ==) | `78.08% <0.00%> (-2.74%)` | :arrow_down: |\n| [.../core/operator/combine/GroupByCombineOperator.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9jb21iaW5lL0dyb3VwQnlDb21iaW5lT3BlcmF0b3IuamF2YQ==) | `75.40% <0.00%> (-1.64%)` | :arrow_down: |\n| [...cal/startree/v2/builder/BaseSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL0Jhc2VTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `88.28% <0.00%> (-0.91%)` | :arrow_down: |\n| ... and [2 more](https://codecov.io/gh/apache/pinot/pull/7428/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [0ee33e8...3467be4](https://codecov.io/gh/apache/pinot/pull/7428?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918736953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918821754","html_url":"https://github.com/apache/pinot/pull/7429#issuecomment-918821754","issue_url":"https://api.github.com/repos/apache/pinot/issues/7429","id":918821754,"node_id":"IC_kwDOATCU_c42xBt6","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T05:40:09Z","updated_at":"2021-09-14T05:40:09Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7429](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (74573a3) into [master](https://codecov.io/gh/apache/pinot/commit/f3068bc93165e359cc3d846c40f62312ecc98af3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (f3068bc) will **decrease** coverage by `2.13%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head 74573a3 differs from pull request most recent head 5a74927. Consider uploading reports for the commit 5a74927 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7429/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7429      +/-   ##\n============================================\n- Coverage     71.86%   69.72%   -2.14%     \n+ Complexity     3346     3254      -92     \n============================================\n  Files          1519     1123     -396     \n  Lines         75115    53013   -22102     \n  Branches      10941     7989    -2952     \n============================================\n- Hits          53981    36965   -17016     \n+ Misses        17504    13424    -4080     \n+ Partials       3630     2624    -1006     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `69.72% <0.00%> (+<0.01%)` | :arrow_up: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ata/manager/realtime/RealtimeTableDataManager.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVUYWJsZURhdGFNYW5hZ2VyLmphdmE=) | `10.69% <0.00%> (-56.24%)` | :arrow_down: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/core/data/manager/realtime/TimerService.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvVGltZXJTZXJ2aWNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/startree/plan/StarTreeDocIdSetPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlRG9jSWRTZXRQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ot/common/restlet/resources/TableMetadataInfo.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVzdGxldC9yZXNvdXJjZXMvVGFibGVNZXRhZGF0YUluZm8uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../core/startree/plan/StarTreeTransformPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlVHJhbnNmb3JtUGxhbk5vZGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [589 more](https://codecov.io/gh/apache/pinot/pull/7429/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [f3068bc...5a74927](https://codecov.io/gh/apache/pinot/pull/7429?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918821754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918968144","html_url":"https://github.com/apache/pinot/issues/7395#issuecomment-918968144","issue_url":"https://api.github.com/repos/apache/pinot/issues/7395","id":918968144,"node_id":"IC_kwDOATCU_c42xldQ","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T09:14:59Z","updated_at":"2021-09-14T09:14:59Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing the document, @siddharthteotia !\r\n\r\nHere are my thoughts:\r\n\r\nCurrent text search infrastructure: Status quo, we simply build side car Lucene indices and expose a UDF which allows users to specify Lucene queries. IMO, this is a component that should ideally be outside of Pinot since it has no correlation with Pinot itself.\r\n\r\nSo, an eventual goal is to move text search to native Pinot indices and dictionary, and follow the SQL Standard (LIKE operator) syntax as much as possible.\r\n\r\nNow, coming to the FST itself. There are three reasons as to why a native FST makes sense:\r\n\r\n1. Flexibility and Control -- Lucene is a full fledged search library. It is built for generic text search use cases and consists of capabilities which allow ranked retrieval, norm storage and impact filtering,  to name a few capabilities. None of these are of relevance to us since we do not perform ranking. As I mentioned before, if we are building our text search capabilities on top of Pinot data structures, then pulling in Lucene just for the FST is an overkill, and also stops us from any potential changes that we may wish to do. Lucene's FST is a generic engine, not optimized for our use cases (only dictionary IDs as output symbols, primary query load being prefix and suffix matches from LIKE operator). Other improvements may or may not come in later, but if we do not move to our native implementation, we remove the possibility of any such improvements.\r\n\r\n2. Ability to perform Pinot specific optimizations -- As stated in the above point, it is not possible for us to do specific changes/enhancements. For e.g., it should be possible to short circuit the evaluation of regular expressions ending with match-all and having a short prefix before the same, thus accelerating a common use case of LIKE operator.\r\n\r\n3. Realtime Capabilities -- Lucene builds FST during segment flush, thus forcing us to flush frequently. Also, this inhibits us from doing real time text search, which is a limitation. With a native FST implementation,  we should be able to explore this path.\r\n\r\nRegarding TEXT_MATCH, while it is my dearest wish to deprecate the module, I understand that some users may wish to use it. As highlighted, both indices can co exist, with no mandate to migrate to one over the other.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/918968144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919314056","html_url":"https://github.com/apache/pinot/pull/7017#issuecomment-919314056","issue_url":"https://api.github.com/repos/apache/pinot/issues/7017","id":919314056,"node_id":"IC_kwDOATCU_c42y56I","user":{"login":"abhijeetkushe","id":2093096,"node_id":"MDQ6VXNlcjIwOTMwOTY=","avatar_url":"https://avatars.githubusercontent.com/u/2093096?v=4","gravatar_id":"","url":"https://api.github.com/users/abhijeetkushe","html_url":"https://github.com/abhijeetkushe","followers_url":"https://api.github.com/users/abhijeetkushe/followers","following_url":"https://api.github.com/users/abhijeetkushe/following{/other_user}","gists_url":"https://api.github.com/users/abhijeetkushe/gists{/gist_id}","starred_url":"https://api.github.com/users/abhijeetkushe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhijeetkushe/subscriptions","organizations_url":"https://api.github.com/users/abhijeetkushe/orgs","repos_url":"https://api.github.com/users/abhijeetkushe/repos","events_url":"https://api.github.com/users/abhijeetkushe/events{/privacy}","received_events_url":"https://api.github.com/users/abhijeetkushe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T16:28:49Z","updated_at":"2021-09-14T16:28:49Z","author_association":"CONTRIBUTOR","body":"Can this be approved ? We also had to patch the docker image to fix this.Would love to see this in 0.9 release","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919314056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919350749","html_url":"https://github.com/apache/pinot/pull/7431#issuecomment-919350749","issue_url":"https://api.github.com/repos/apache/pinot/issues/7431","id":919350749,"node_id":"IC_kwDOATCU_c42zC3d","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T17:13:09Z","updated_at":"2021-09-14T17:13:09Z","author_association":"CONTRIBUTOR","body":"So this would target Java 11 for compilation, yes? Is this a hard break with Java 8 compatibility?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919350749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919354177","html_url":"https://github.com/apache/pinot/pull/7431#issuecomment-919354177","issue_url":"https://api.github.com/repos/apache/pinot/issues/7431","id":919354177,"node_id":"IC_kwDOATCU_c42zDtB","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T17:17:16Z","updated_at":"2021-09-14T17:17:16Z","author_association":"CONTRIBUTOR","body":"> So this would target Java 11 for compilation, yes? Is this a hard break with Java 8 compatibility?\r\n\r\nnope. there's a specific profile that enables jdk8 support","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919354177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919362129","html_url":"https://github.com/apache/pinot/pull/7431#issuecomment-919362129","issue_url":"https://api.github.com/repos/apache/pinot/issues/7431","id":919362129,"node_id":"IC_kwDOATCU_c42zFpR","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T17:27:18Z","updated_at":"2021-09-14T17:27:18Z","author_association":"MEMBER","body":"Note that Java 8 compatibility does not require building with JDK8, it requires producing classfiles with version 52.0 linked against the JDK8 bootclasspath, so that the classes can be loaded on JDK8. This can be done with later versions of javac by setting the `release` flag. The advantage of using later versions of javac is that you can compile code to be packaged in Multi-Release jars, so you could, say, use foreign memory access on JDK17 but use `sun.misc.Unsafe` on JDK8. The requirement to _build with JDK8_ precludes this, or at the very least makes it much harder than it needs to be. I will create an issue to track this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919362129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919463326","html_url":"https://github.com/apache/pinot/pull/7425#issuecomment-919463326","issue_url":"https://api.github.com/repos/apache/pinot/issues/7425","id":919463326,"node_id":"IC_kwDOATCU_c42zeWe","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T19:48:11Z","updated_at":"2021-09-14T19:48:11Z","author_association":"CONTRIBUTOR","body":"this one should be ready for review. super helpful when debugging issues in #7399. any concerns for the retention period of 3 days? \r\n\r\nBased on a quick look at [the doc](https://docs.github.com/en/actions/reference/usage-limits-billing-and-administration#artifact-and-log-retention-policy) - it doesn't seem we have limitation on the size but only retention period","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919463326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919512299","html_url":"https://github.com/apache/pinot/pull/7432#issuecomment-919512299","issue_url":"https://api.github.com/repos/apache/pinot/issues/7432","id":919512299,"node_id":"IC_kwDOATCU_c42zqTr","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T21:05:35Z","updated_at":"2021-09-14T21:05:50Z","author_association":"CONTRIBUTOR","body":"To add more context, we start to perform segment lineage-based cleanup even for tables with no time column (e.g. REFRESH) after the fix from https://github.com/apache/pinot/pull/7424. Due to this, the integration test becomes flaky if the retention manager kicks in in the middle.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919512299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919520508","html_url":"https://github.com/apache/pinot/pull/7432#issuecomment-919520508","issue_url":"https://api.github.com/repos/apache/pinot/issues/7432","id":919520508,"node_id":"IC_kwDOATCU_c42zsT8","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T21:18:38Z","updated_at":"2021-09-14T22:44:04Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7432](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (2bb7948) into [master](https://codecov.io/gh/apache/pinot/commit/0ce25462a3959e5ea0e268ee00573fb81e8f1aff?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (0ce2546) will **decrease** coverage by `33.13%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head 2bb7948 differs from pull request most recent head 9248710. Consider uploading reports for the commit 9248710 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7432/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7432       +/-   ##\n=============================================\n- Coverage     70.70%   37.57%   -33.14%     \n+ Complexity     3344       92     -3252     \n=============================================\n  Files          1517     1517               \n  Lines         75118    75118               \n  Branches      10950    10950               \n=============================================\n- Hits          53112    28224    -24888     \n- Misses        18368    44671    +26303     \n+ Partials       3638     2223     -1415     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration2 | `29.14% <ø> (-0.06%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `14.52% <ø> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/config/table/TableType.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1RhYmxlVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/DimensionFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EaW1lbnNpb25GaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/readers/FileFormat.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9yZWFkZXJzL0ZpbGVGb3JtYXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...org/apache/pinot/spi/config/table/QuotaConfig.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1F1b3RhQ29uZmlnLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...org/apache/pinot/spi/config/tenant/TenantRole.java](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RlbmFudC9UZW5hbnRSb2xlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [821 more](https://codecov.io/gh/apache/pinot/pull/7432/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [0ce2546...9248710](https://codecov.io/gh/apache/pinot/pull/7432?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919520508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919522563","html_url":"https://github.com/apache/pinot/pull/7431#issuecomment-919522563","issue_url":"https://api.github.com/repos/apache/pinot/issues/7431","id":919522563,"node_id":"IC_kwDOATCU_c42zs0D","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T21:21:52Z","updated_at":"2021-09-14T21:21:52Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7431](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bb31f95) into [master](https://codecov.io/gh/apache/pinot/commit/514f4693d2c739f41ef6917fc30a232e8f070950?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (514f469) will **decrease** coverage by `1.26%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7431/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7431      +/-   ##\n============================================\n- Coverage     71.86%   70.60%   -1.27%     \n+ Complexity     3347     3346       -1     \n============================================\n  Files          1518     1519       +1     \n  Lines         75097    75115      +18     \n  Branches      10940    10941       +1     \n============================================\n- Hits          53971    53034     -937     \n- Misses        17493    18465     +972     \n+ Partials       3633     3616      -17     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `29.03% <ø> (-0.05%)` | :arrow_down: |\n| unittests1 | `69.72% <ø> (+0.01%)` | :arrow_up: |\n| unittests2 | `14.52% <ø> (+<0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...nverttorawindex/ConvertToRawIndexTaskExecutor.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrRXhlY3V0b3IuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ore/startree/executor/StarTreeGroupByExecutor.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9leGVjdXRvci9TdGFyVHJlZUdyb3VwQnlFeGVjdXRvci5qYXZh) | `0.00% <0.00%> (-86.67%)` | :arrow_down: |\n| [.../transform/function/MapValueTransformFunction.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci90cmFuc2Zvcm0vZnVuY3Rpb24vTWFwVmFsdWVUcmFuc2Zvcm1GdW5jdGlvbi5qYXZh) | `0.00% <0.00%> (-85.30%)` | :arrow_down: |\n| [...plugin/segmentuploader/SegmentUploaderDefault.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zZWdtZW50LXVwbG9hZGVyL3Bpbm90LXNlZ21lbnQtdXBsb2FkZXItZGVmYXVsdC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL3NlZ21lbnR1cGxvYWRlci9TZWdtZW50VXBsb2FkZXJEZWZhdWx0LmphdmE=) | `0.00% <0.00%> (-85.19%)` | :arrow_down: |\n| [...ot/common/messages/RoutingTableRebuildMessage.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvUm91dGluZ1RhYmxlUmVidWlsZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-81.82%)` | :arrow_down: |\n| [...e/pinot/common/minion/MergeRollupTaskMetadata.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWluaW9uL01lcmdlUm9sbHVwVGFza01ldGFkYXRhLmphdmE=) | `0.00% <0.00%> (-78.27%)` | :arrow_down: |\n| [...ache/pinot/common/lineage/SegmentLineageUtils.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbGluZWFnZS9TZWdtZW50TGluZWFnZVV0aWxzLmphdmE=) | `22.22% <0.00%> (-77.78%)` | :arrow_down: |\n| [...verttorawindex/ConvertToRawIndexTaskGenerator.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvY29udmVydHRvcmF3aW5kZXgvQ29udmVydFRvUmF3SW5kZXhUYXNrR2VuZXJhdG9yLmphdmE=) | `10.41% <0.00%> (-77.09%)` | :arrow_down: |\n| [...che/pinot/core/util/SegmentProcessorAvroUtils.java](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1NlZ21lbnRQcm9jZXNzb3JBdnJvVXRpbHMuamF2YQ==) | `0.00% <0.00%> (-74.42%)` | :arrow_down: |\n| ... and [101 more](https://codecov.io/gh/apache/pinot/pull/7431/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [514f469...bb31f95](https://codecov.io/gh/apache/pinot/pull/7431?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919522563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919569202","html_url":"https://github.com/apache/pinot/pull/7431#issuecomment-919569202","issue_url":"https://api.github.com/repos/apache/pinot/issues/7431","id":919569202,"node_id":"IC_kwDOATCU_c42z4My","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T22:59:15Z","updated_at":"2021-09-14T22:59:15Z","author_association":"CONTRIBUTOR","body":"> Note that Java 8 compatibility does not require building with JDK8, it requires producing classfiles with version 52.0 linked against the JDK8 bootclasspath, so that the classes can be loaded on JDK8. This can be done with later versions of javac by setting the `release` flag. The advantage of using later versions of javac is that you can compile code to be packaged in Multi-Release jars, so you could, say, use foreign memory access on JDK17 but use `sun.misc.Unsafe` on JDK8. The requirement to _build with JDK8_ precludes this, or at the very least makes it much harder than it needs to be. I will create an issue to track this.\r\n\r\ntotally agree. should we just do `<release>8</release>` on higher jdk versions? ( i felt like we should, since currently we only test them in CI).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919569202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919619955","html_url":"https://github.com/apache/pinot/issues/7422#issuecomment-919619955","issue_url":"https://api.github.com/repos/apache/pinot/issues/7422","id":919619955,"node_id":"IC_kwDOATCU_c420Elz","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T01:10:33Z","updated_at":"2021-09-15T01:10:33Z","author_association":"CONTRIBUTOR","body":"Great feature to add. It should be doable with both value and time column passed to the aggregation function.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919619955/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919621734","html_url":"https://github.com/apache/pinot/pull/7425#issuecomment-919621734","issue_url":"https://api.github.com/repos/apache/pinot/issues/7425","id":919621734,"node_id":"IC_kwDOATCU_c420FBm","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T01:15:09Z","updated_at":"2021-09-15T01:15:09Z","author_association":"CONTRIBUTOR","body":"It is adding 10-20 minutes overhead zipping and uploading the file (> 5G compressed) for each compatibility test. I'd suggest modeling it into the `pinot_compatibility_tests` suite as an option, and user can trigger it on demand. Running it for every PR seems too much overhead to me.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919621734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919947162","html_url":"https://github.com/apache/pinot/pull/7435#issuecomment-919947162","issue_url":"https://api.github.com/repos/apache/pinot/issues/7435","id":919947162,"node_id":"IC_kwDOATCU_c421Uea","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T11:46:53Z","updated_at":"2021-09-16T23:49:25Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7435](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c8d861a) into [master](https://codecov.io/gh/apache/pinot/commit/ad2e0632fa8d8ab84316d25ce2cd4c91c18b11bf?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ad2e063) will **decrease** coverage by `34.08%`.\n> The diff coverage is `51.37%`.\n\n> :exclamation: Current head c8d861a differs from pull request most recent head 770267c. Consider uploading reports for the commit 770267c to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7435/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7435       +/-   ##\n=============================================\n- Coverage     71.90%   37.82%   -34.09%     \n+ Complexity     3429       92     -3337     \n=============================================\n  Files          1517     1516        -1     \n  Lines         75118    75119        +1     \n  Branches      10950    10949        -1     \n=============================================\n- Hits          54013    28413    -25600     \n- Misses        17470    44503    +27033     \n+ Partials       3635     2203     -1432     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.40% <51.37%> (+0.01%)` | :arrow_up: |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `14.49% <0.00%> (-0.04%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...local/indexsegment/mutable/MutableSegmentImpl.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pbmRleHNlZ21lbnQvbXV0YWJsZS9NdXRhYmxlU2VnbWVudEltcGwuamF2YQ==) | `0.00% <ø> (-58.27%)` | :arrow_down: |\n| [...al/segment/creator/impl/inv/RangeIndexCreator.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2NyZWF0b3IvaW1wbC9pbnYvUmFuZ2VJbmRleENyZWF0b3IuamF2YQ==) | `0.00% <0.00%> (-80.55%)` | :arrow_down: |\n| [...ent/index/column/PhysicalColumnIndexContainer.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2NvbHVtbi9QaHlzaWNhbENvbHVtbkluZGV4Q29udGFpbmVyLmphdmE=) | `0.00% <0.00%> (-88.89%)` | :arrow_down: |\n| [...local/segment/index/datasource/BaseDataSource.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2RhdGFzb3VyY2UvQmFzZURhdGFTb3VyY2UuamF2YQ==) | `0.00% <ø> (-95.84%)` | :arrow_down: |\n| [...al/segment/index/datasource/MutableDataSource.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2RhdGFzb3VyY2UvTXV0YWJsZURhdGFTb3VyY2UuamF2YQ==) | `0.00% <ø> (-69.24%)` | :arrow_down: |\n| [...al/segment/index/readers/RangeIndexReaderImpl.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvUmFuZ2VJbmRleFJlYWRlckltcGwuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...ent/virtualcolumn/VirtualColumnIndexContainer.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L3ZpcnR1YWxjb2x1bW4vVmlydHVhbENvbHVtbkluZGV4Q29udGFpbmVyLmphdmE=) | `0.00% <ø> (-90.48%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/CommonConstants.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQ29tbW9uQ29uc3RhbnRzLmphdmE=) | `0.00% <0.00%> (-26.32%)` | :arrow_down: |\n| [...ata/manager/realtime/RealtimeTableDataManager.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVUYWJsZURhdGFNYW5hZ2VyLmphdmE=) | `42.68% <33.33%> (-24.81%)` | :arrow_down: |\n| [...operator/filter/RangeIndexBasedFilterOperator.java](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9maWx0ZXIvUmFuZ2VJbmRleEJhc2VkRmlsdGVyT3BlcmF0b3IuamF2YQ==) | `40.42% <41.93%> (-4.26%)` | :arrow_down: |\n| ... and [882 more](https://codecov.io/gh/apache/pinot/pull/7435/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [ad2e063...770267c](https://codecov.io/gh/apache/pinot/pull/7435?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/919947162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920119827","html_url":"https://github.com/apache/pinot/pull/7114#issuecomment-920119827","issue_url":"https://api.github.com/repos/apache/pinot/issues/7114","id":920119827,"node_id":"IC_kwDOATCU_c421-oT","user":{"login":"richardstartin","id":16439049,"node_id":"MDQ6VXNlcjE2NDM5MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/16439049?v=4","gravatar_id":"","url":"https://api.github.com/users/richardstartin","html_url":"https://github.com/richardstartin","followers_url":"https://api.github.com/users/richardstartin/followers","following_url":"https://api.github.com/users/richardstartin/following{/other_user}","gists_url":"https://api.github.com/users/richardstartin/gists{/gist_id}","starred_url":"https://api.github.com/users/richardstartin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richardstartin/subscriptions","organizations_url":"https://api.github.com/users/richardstartin/orgs","repos_url":"https://api.github.com/users/richardstartin/repos","events_url":"https://api.github.com/users/richardstartin/events{/privacy}","received_events_url":"https://api.github.com/users/richardstartin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T15:23:37Z","updated_at":"2021-09-15T15:23:37Z","author_association":"MEMBER","body":"> Actually I think there might be some optimization we can do when LITERAL is passed in by making the FunctionInfo a bit stateful. but that's for a different optimization PR.\r\n\r\nAre you thinking about precompiling the pattern? I was thinking the same regarding the JsonPath functions where precompilation would improve performance, I also think it would better to be able to e.g. validate and clean inputs once. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920119827/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920161362","html_url":"https://github.com/apache/pinot/issues/7437#issuecomment-920161362","issue_url":"https://api.github.com/repos/apache/pinot/issues/7437","id":920161362,"node_id":"IC_kwDOATCU_c422IxS","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T16:14:00Z","updated_at":"2021-09-15T16:14:15Z","author_association":"MEMBER","body":"This is an amazing doc. We should probably add this doc as example in our contribution guidelines","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920161362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920169890","html_url":"https://github.com/apache/pinot/pull/7114#issuecomment-920169890","issue_url":"https://api.github.com/repos/apache/pinot/issues/7114","id":920169890,"node_id":"IC_kwDOATCU_c422K2i","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T16:24:30Z","updated_at":"2021-09-15T16:24:56Z","author_association":"CONTRIBUTOR","body":"> > Actually I think there might be some optimization we can do when LITERAL is passed in by making the FunctionInfo a bit stateful. but that's for a different optimization PR.\r\n> \r\n> Are you thinking about precompiling the pattern? I was thinking the same regarding the JsonPath functions where precompilation would improve performance, I also think it would better to be able to e.g. validate and clean inputs once.\r\n\r\ncorrect. it's already so in the TransformFuntion, but i dont know if this is possible via ScalarTransformFunctionWrapper. AFAIK the underlying function is stateless.\r\n\r\nMy thinking is that we need to \r\n- somehow alter the ScalarTransformFunctionWrapper to provide stateful storage for the underlying stateless function;\r\n- initialize the wrapper transform function state during expression parsing phase\r\n- somehow hook the function initialization logic when expression parsing out a Literal and its position\r\n- somehow allow the underlying function to access the wrapper storage\r\n\r\nI would be completely wrong here as I dont have a deep enough understanding on what the wrapper were original designed for. any feedback/suggestions are highly appreciated ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920169890/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920217153","html_url":"https://github.com/apache/pinot/pull/7425#issuecomment-920217153","issue_url":"https://api.github.com/repos/apache/pinot/issues/7425","id":920217153,"node_id":"IC_kwDOATCU_c422WZB","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T17:22:14Z","updated_at":"2021-09-16T21:30:57Z","author_association":"CONTRIBUTOR","body":"> It is adding 10-20 minutes overhead zipping and uploading the file (> 5G compressed) for each compatibility test. I'd suggest modeling it into the `pinot_compatibility_tests` suite as an option, and user can trigger it on demand. Running it for every PR seems too much overhead to me.\r\n\r\nagree. \r\n\r\nactually I can also make it run only when failure occurs, what do you think?\r\n\r\n[Edit] made it available in the optional triggered workflow instead","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920217153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920277422","html_url":"https://github.com/apache/pinot/pull/7399#issuecomment-920277422","issue_url":"https://api.github.com/repos/apache/pinot/issues/7399","id":920277422,"node_id":"IC_kwDOATCU_c422lGu","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T18:35:45Z","updated_at":"2021-09-15T18:35:45Z","author_association":"CONTRIBUTOR","body":"This PR should be good for review. took me a while to fix the compatibility verifier. \r\nAny thoughts on the structure of the test-jar? @kkrugler @xiangfu0 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920277422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920305649","html_url":"https://github.com/apache/pinot/pull/7397#issuecomment-920305649","issue_url":"https://api.github.com/repos/apache/pinot/issues/7397","id":920305649,"node_id":"IC_kwDOATCU_c422r_x","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T19:12:37Z","updated_at":"2021-09-15T19:13:54Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang I need some help with setting up mocks for writing UTs for these changes on the broker. I went through the code and I see there are no tests for non-literal queries on the broker (where the broker actually does a scatter-gather to/from the servers). Is there a reference where the downstream servers are mocked? That'd of great help. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920305649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920311624","html_url":"https://github.com/apache/pinot/issues/7369#issuecomment-920311624","issue_url":"https://api.github.com/repos/apache/pinot/issues/7369","id":920311624,"node_id":"IC_kwDOATCU_c422tdI","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-15T19:21:46Z","updated_at":"2021-09-15T19:21:46Z","author_association":"CONTRIBUTOR","body":"I can pick this up. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/920311624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]