[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138094832","html_url":"https://github.com/apache/accumulo/pull/1770#issuecomment-1138094832","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1770","id":1138094832,"node_id":"IC_kwDOACaFSM5D1fLw","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T02:58:12Z","updated_at":"2022-05-26T02:58:12Z","author_association":"MEMBER","body":"Superseded by #2732 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138094832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138536523","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1138536523","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1138536523,"node_id":"IC_kwDOACaFSM5D3LBL","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T12:42:36Z","updated_at":"2022-05-26T12:42:36Z","author_association":"CONTRIBUTOR","body":"> It's weird to ask for eventual consistency. Nobody wants eventual consistency. Eventual consistency is always tolerated, never desired.\r\n\r\nEventual consistency for reads is desired in this case, but perhaps it isn't the best name. The user is willing to sacrifice the liveness of reads for increased availability of the tservers. We could call it Strong Eventual Consistency, but I think that is used mostly for writes https://en.wikipedia.org/wiki/Eventual_consistency#Strong_eventual_consistency. Maybe we could call the traditional scans \"Live Scans\", like we do with Live Ingest. And then calling the new scans \"Cached Scans\" or something.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138536523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138619325","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1138619325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1138619325,"node_id":"IC_kwDOACaFSM5D3fO9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T14:09:46Z","updated_at":"2022-05-26T14:09:46Z","author_association":"MEMBER","body":"> > It's weird to ask for eventual consistency. Nobody wants eventual consistency. Eventual consistency is always tolerated, never desired.\r\n> \r\n> Eventual consistency for reads is desired in this case\r\n\r\nNo, I don't think so. Like you said yourself, what the user desires is increased availability. Eventual consistency is the trade-off they tolerate to get increased availability. The only scenarios where I can imagine an actual *preference* for the possibility of stale data are nefarious ones where someone is trying to exploit or deceive on the basis of old information.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138619325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138630511","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1138630511","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1138630511,"node_id":"IC_kwDOACaFSM5D3h9v","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T14:20:04Z","updated_at":"2022-05-26T14:20:04Z","author_association":"CONTRIBUTOR","body":"Using `set/getConsistencyLevel` on ScannerBase allows us to change the implementation without changing the API. Using a name tied to the implementation will cause API churn if the implementation changes. I'm not tied to `set/getConsistencyLevel`.\r\n\r\nI'm waiting for some consensus before change the API method names.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138630511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138641601","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1138641601","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1138641601,"node_id":"IC_kwDOACaFSM5D3krB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T14:30:28Z","updated_at":"2022-05-26T14:30:28Z","author_association":"MEMBER","body":"> Using `set/getConsistencyLevel` on ScannerBase allows us to change the implementation without changing the API. Using a name tied to the implementation will cause API churn if the implementation changes. I'm not tied to `set/getConsistencyLevel`.\r\n\r\nYes, but it would allow us to change implementation of that specific characteristic... but that's not the essential characteristic here.\r\n\r\n> I'm waiting for some consensus before change the API method names.\r\n\r\nThat's reasonable. Thus far, I haven't really been thinking alternative names. I've only been trying to make the case that consistency level isn't the right way of exposing the feature to users. To think of new names, I think it would be good to think about what the essential characteristics are for scan servers:\r\n\r\n* higher availability?\r\n* dynamically scalable hosting?\r\n* read-only service?\r\n* some other sufficient description?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138641601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138658455","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1138658455","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1138658455,"node_id":"IC_kwDOACaFSM5D3oyX","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T14:47:44Z","updated_at":"2022-05-26T14:47:44Z","author_association":"CONTRIBUTOR","body":"This may not be related to #2707 after all, it may be related to the ZooKeeper property changes. The test sets some arbitrary table properties then confirms that the counts match. The test does not fail all the time. The stack trace is:\r\n\r\n```\r\norg.opentest4j.AssertionFailedError: expected: <0> but was: <1>\r\n\tat org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:55)\r\n\tat org.junit.jupiter.api.AssertionUtils.failNotEqual(AssertionUtils.java:62)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:166)\r\n\tat org.junit.jupiter.api.AssertEquals.assertEquals(AssertEquals.java:161)\r\n\tat org.junit.jupiter.api.Assertions.assertEquals(Assertions.java:628)\r\n\tat org.apache.accumulo.test.functional.PermissionsIT.testArbitraryProperty(PermissionsIT.java:877)\r\n\tat org.apache.accumulo.test.functional.PermissionsIT.testGrantedTablePermission(PermissionsIT.java:804)\r\n\tat org.apache.accumulo.test.functional.PermissionsIT.tablePermissionTest(PermissionsIT.java:641)\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138658455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138771710","html_url":"https://github.com/apache/accumulo/issues/2281#issuecomment-1138771710","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2281","id":1138771710,"node_id":"IC_kwDOACaFSM5D4Eb-","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T16:45:25Z","updated_at":"2022-05-26T16:45:25Z","author_association":"CONTRIBUTOR","body":"Addressed with PR #2737","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138771710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138785060","html_url":"https://github.com/apache/accumulo/pull/2738#issuecomment-1138785060","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2738","id":1138785060,"node_id":"IC_kwDOACaFSM5D4Hsk","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T16:53:32Z","updated_at":"2022-05-26T16:53:32Z","author_association":"CONTRIBUTOR","body":"I am going to add a test to make sure we don't keep breaking the FateCommand but feel free to merge this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138785060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138911335","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1138911335","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1138911335,"node_id":"IC_kwDOACaFSM5D4mhn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T19:00:41Z","updated_at":"2022-05-26T19:00:41Z","author_association":"MEMBER","body":"I looked at several recently flaky tests... and they all seem to be the same type: do something that changes a property in ZK, then check that it was set to verify. I think what's happening is that the new prop store cache lookup is much faster now than with ZooCache previously, which looked up one property at a time. Because the cache lookup is faster, it's likely much faster than the watcher that triggers an update to the cache, and we're more likely to see stale values.\r\n\r\nThese tests could be improved by looping, waiting for the expected change (relying on timing out to fail the test if the asserted condition never happens, rather than an assert statement), or we can do something to force a sync on the server side request handling when users have a client request to view properties, so the client sees recent edits. I'd probably prefer the latter, so that way it improves the user experience, and we don't have to chase these tests one by one.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138911335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138930239","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1138930239","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1138930239,"node_id":"IC_kwDOACaFSM5D4rI_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T19:23:51Z","updated_at":"2022-05-26T19:23:51Z","author_association":"CONTRIBUTOR","body":"> what the user desires is increased availability\r\n\r\nI think that depends on who the \"user\" is. If we are talking about an app developer, the person writing the code that uses the Scanner, then I'm not sure that they will give any thought to system or data availability. If the user is a system administrator, then they will deploy ScanServers for system and data availability.\r\n\r\nLooking at [PACELC](http://www.cs.umd.edu/~abadi/papers/abadi-pacelc.pdf), Accumulo prioritizes Consistency when operating normally (PC/EC). Using ScanServers enables the system administrator and app developer to use Accumulo in a PC/EL manner.\r\n\r\nSince this is an API for app developers, do we talk about this in terms of latency? `prioritizeLatency()` ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1138930239/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139034972","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1139034972","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1139034972,"node_id":"IC_kwDOACaFSM5D5Etc","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T20:52:58Z","updated_at":"2022-05-26T20:52:58Z","author_association":"CONTRIBUTOR","body":"> These tests could be improved by looping, waiting for the expected change (relying on timing out to fail the test if the asserted condition never happens, rather than an assert statement)\r\n\r\nThis could be made easier if we put the version number into the configuration. Then, the client could loop until a version of the properties come back with a version number greater than it had when it changed the configuration. For example:\r\n\r\n```\r\nlong version = client.tableOperations().getProperties(tableName).get(Property.CONFIGURATION_VERSION.getKey());\r\n// set iterator on table\r\nwhile (client.tableOperations().getProperties(tableName).get(Property.CONFIGURATION_VERSION.getKey() <= version) {\r\n  Thread.sleep(250);\r\n}\r\n// move on\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139034972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139144138","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1139144138","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1139144138,"node_id":"IC_kwDOACaFSM5D5fXK","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-26T23:34:24Z","updated_at":"2022-05-26T23:34:24Z","author_association":"MEMBER","body":"That's one way to do it, without any architecture changes. However, it really only helps for tests, and we'd have to modify each test to do this. There could still be a problem with collisions with this solution, and there are also still situations where you see that it is updated on the one server you asked... but then you perform an operation (like a scan), and the tserver doing that operation still sees the old version.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139144138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139176446","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1139176446","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1139176446,"node_id":"IC_kwDOACaFSM5D5nP-","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T00:42:05Z","updated_at":"2022-05-27T00:42:05Z","author_association":"CONTRIBUTOR","body":"If the tests are setting multiple properties, it would help if the were bundled into an atomic set - that reduces the number of watch notifications that potentially need to be handled.\r\n\r\nWith the way ZooKeeper events are propagated clients receive notifications asynchronously - they will eventuality be consistent (baring additional changes) \r\n\r\nPossible architectural changes for mitigation:\r\n  - send the properties with the scan request.\r\n  - send a version id of the properties to use (this might require keeping multiple, tagged versions so that a specified version is always available)\r\n  - send a timestamp that requests the properties have the same (or newer) timestamp. You could still end up with conflicts, but they would be more explicitly bound.\r\n  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139176446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139202825","html_url":"https://github.com/apache/accumulo/pull/2718#issuecomment-1139202825","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2718","id":1139202825,"node_id":"IC_kwDOACaFSM5D5tsJ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T01:47:27Z","updated_at":"2022-05-27T01:48:04Z","author_association":"MEMBER","body":"@keith-turner wrote:\r\n> > Allowed dropping of gson dependency from server.base\r\n> \r\n> @milleruntime I didn't see a pom change related to this comment in the description\r\n\r\nI spoke with @milleruntime in person (well, virtually) while working through my code review, and part of my feedback was that the class shouldn't be relocated to a different jar (which was the reason the pom changed). I put it back in a subsequent commit that I appended to the PR, after discussing it with him.\r\n\r\nWhen this is squash-merged, I can clean up the log message for the commit. If not me, whoever merges it should clean up the commit message.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139202825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139247549","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1139247549","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1139247549,"node_id":"IC_kwDOACaFSM5D54m9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T03:37:12Z","updated_at":"2022-05-27T03:37:12Z","author_association":"MEMBER","body":"> If the tests are setting multiple properties, it would help if the were bundled into an atomic set - that reduces the number of watch notifications that potentially need to be handled.\r\n\r\nThat will be easier after #2717 is done\r\n\r\n> \r\n> With the way ZooKeeper events are propagated clients receive notifications asynchronously - they will eventuality be consistent (baring additional changes)\r\n> \r\n> Possible architectural changes for mitigation:\r\n> \r\n> * send the properties with the scan request.\r\n> * send a version id of the properties to use (this might require keeping multiple, tagged versions so that a specified version is always available)\r\n\r\nIt might be nice to pass a generic metadata structure over every RPC call, so we can pass arbitrary state information to servers. We currently only send trace information that way, but we could expand that to include information about the caller's view of the configuration(s). The server could check to make sure that it is always at least as new as that version, and expire any cached items that are older, before proceeding. I wouldn't want to keep multiple versions, though. It should be fine as long as the server's view is at least as up-to-date as the client's. We don't need full isolated configuration... we just need to order client requests that use properties after processing any previous client requests to update properties.\r\n\r\nWe would also need to have the property setter RPC methods return a version once they are set, so the client knows what version they just set.\r\n\r\n> * send a timestamp that requests the properties have the same (or newer) timestamp. You could still end up with conflicts, but they would be more explicitly bound.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139247549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139585195","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1139585195","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1139585195,"node_id":"IC_kwDOACaFSM5D7LCr","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T12:45:15Z","updated_at":"2022-05-27T12:45:15Z","author_association":"CONTRIBUTOR","body":"I think the design of this change is great so far but it is a major new feature, with a drastic increase in complexity, touching  major parts of Accumulo (scans, API, metadata, configuration, scripts, and introduces another new server). I don't think this should get merged into 2.1. The complexity of this change on top of all the changes already in 2.1 will only further delay the release of 2.1. Main already has many major new features (ZK Prop Store, Overhaul of Compactions code, External Compactions, AMPLE, Master Rename, New Tracing, New Metrics, New SPI, Root Table change) not to mention the 1,130+ tickets marked done for 2.1.\r\n\r\nHere is a timeline of the past 4 years:\r\n- 2.0.0-alpha-1 was released 14 Oct 2018 and then 2.0.0-alpha-2 was released 31 Jan 2019\r\n- Non-LTM 2.0.0 was released 02 Aug 2019\r\n- LTM 1.10 was released 03 Sep 2020.\r\n- Bug fix release 1.10.1 was 22 Dec 2020\r\n- Bug fix 2.0.1 was released 24 Dec 2020\r\n- Sadly the first time ever, Accumulo did not have a release in 2021 :frowning_face: \r\n- Bug fix for 1.10.2 was 13 Feb 2022\r\n\r\nI think 2.1.0 needs to be released ASAP so it can be tagged as an LTM. Users who are not on 1.10, should upgrade to 1.10.3. Users who upgraded to 2.0 at the time of release have been waiting 3 years (users who snagged the alpha will be 4 years) for the next LTM release. I think it would be a disservice to not have an LTM release this year. Our original plan was to Periodically release a new LTM approximately every 2 years.\r\n\r\nThat being said Main may already be a major release and need to be called 3.0 so if that is the case, merge away!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139585195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139668035","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1139668035","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1139668035,"node_id":"IC_kwDOACaFSM5D7fRD","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T14:23:03Z","updated_at":"2022-05-27T14:23:03Z","author_association":"CONTRIBUTOR","body":"I have no issues with the changes - but I created https://github.com/apache/accumulo/pull/2741 as an alternate so the casting to ZooPropStore is unnecessary","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139668035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139674103","html_url":"https://github.com/apache/accumulo/pull/2742#issuecomment-1139674103","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2742","id":1139674103,"node_id":"IC_kwDOACaFSM5D7gv3","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T14:29:37Z","updated_at":"2022-05-27T14:29:37Z","author_association":"CONTRIBUTOR","body":"@dlmarion I added this test as a follow up to #2738 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139674103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139751368","html_url":"https://github.com/apache/accumulo/issues/2509#issuecomment-1139751368","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2509","id":1139751368,"node_id":"IC_kwDOACaFSM5D7znI","user":{"login":"foster33","id":84727868,"node_id":"MDQ6VXNlcjg0NzI3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/84727868?v=4","gravatar_id":"","url":"https://api.github.com/users/foster33","html_url":"https://github.com/foster33","followers_url":"https://api.github.com/users/foster33/followers","following_url":"https://api.github.com/users/foster33/following{/other_user}","gists_url":"https://api.github.com/users/foster33/gists{/gist_id}","starred_url":"https://api.github.com/users/foster33/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foster33/subscriptions","organizations_url":"https://api.github.com/users/foster33/orgs","repos_url":"https://api.github.com/users/foster33/repos","events_url":"https://api.github.com/users/foster33/events{/privacy}","received_events_url":"https://api.github.com/users/foster33/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T16:02:16Z","updated_at":"2022-05-27T16:02:16Z","author_association":"CONTRIBUTOR","body":"Is this issue still relevant? I think this was already addressed in #2531. That PR seems to remove and replace the brittle `.orElse(-1)` lines in the consistency checks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139751368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139794277","html_url":"https://github.com/apache/accumulo/pull/2732#issuecomment-1139794277","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2732","id":1139794277,"node_id":"IC_kwDOACaFSM5D7-Fl","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T16:51:29Z","updated_at":"2022-05-27T16:51:29Z","author_association":"CONTRIBUTOR","body":"With an ERROR being thrown instead of logged, it looks like the FATE Tx will actually fail:\r\n<pre>\r\n2022-05-27T12:43:33,843 [fate.Fate] WARN : Failed to execute Repo, FATE[61940a2dc650bf6c]\r\njava.lang.IllegalStateException: Only 1 tserver running and it contains the Root table. Not shutting down localhost:9997[100019a892c0005]\r\n        at org.apache.accumulo.manager.tserverOps.ShutdownTServer.isReady(ShutdownTServer.java:62) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.manager.tserverOps.ShutdownTServer.isReady(ShutdownTServer.java:38) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.manager.tableOps.TraceRepo.isReady(TraceRepo.java:47) ~[accumulo-manager-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.fate.Fate$TransactionRunner.run(Fate.java:89) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139794277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139827878","html_url":"https://github.com/apache/accumulo/pull/2732#issuecomment-1139827878","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2732","id":1139827878,"node_id":"IC_kwDOACaFSM5D8GSm","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T17:21:00Z","updated_at":"2022-05-27T17:21:00Z","author_association":"CONTRIBUTOR","body":"I don't think this is the right place to do this. I think it would be better to just check in `Admin` before executing the operation. Closing this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139827878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139908107","html_url":"https://github.com/apache/accumulo/pull/2732#issuecomment-1139908107","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2732","id":1139908107,"node_id":"IC_kwDOACaFSM5D8Z4L","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-27T18:12:08Z","updated_at":"2022-05-27T18:12:08Z","author_association":"CONTRIBUTOR","body":"I closed this PR in favor of a more subtle approach in https://github.com/apache/accumulo/pull/2743","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1139908107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140170819","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1140170819","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1140170819,"node_id":"IC_kwDOACaFSM5D9aBD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-28T04:37:44Z","updated_at":"2022-05-28T04:37:44Z","author_association":"MEMBER","body":"I've made the changes here that I described in my https://github.com/apache/accumulo/pull/2741#pullrequestreview-988328307","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140170819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140181288","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1140181288","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1140181288,"node_id":"IC_kwDOACaFSM5D9cko","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-28T05:56:38Z","updated_at":"2022-05-28T06:11:13Z","author_association":"CONTRIBUTOR","body":"> I think the design of this change is great so far but it is a major new feature, with a drastic increase in complexity, touching major parts of Accumulo (scans, API, metadata, configuration, scripts, and introduces another new server). I don't think this should get merged into 2.1. The complexity of this change on top of all the changes already in 2.1 will only further delay the release of 2.1. Main already has many major new features (ZK Prop Store, Overhaul of Compactions code, External Compactions, AMPLE, Master Rename, New Tracing, New Metrics, New SPI, Root Table change) not to mention the 1,130+ tickets marked done for 2.1.\r\n\r\nI have been working really hard on testing this new feature over the past few weeks.  Tonight I finally got to a point where I was seeing scan servers work really well on a small cluster (12 scan servers, 3 tablets servers, 3 datanodes) for the first time.  I was running 200 ish  random concurrent greps over random large ranges in a single tablet that scanned lots of data and returned little data.   To get to that point #2700, #2744, and #2745 needed to be debugged and fixed.  Each of these took a lot of time to find and fix. The interesting thing is that these problems were not all specific to scan servers, they were a result of all of the complex changes you mentioned and just happened to be found during intense scan server testing.   I think with or without scan servers that 2.1 need s a lot of testing to shake out more latent problems.  I think it would be nice to stop adding new features and release a 2.1.0-beta-1 and use it to do that testing and refining.  If we did that I would like to see scan servers in 2.1.0 as the last big feature.   The feature has gotten a good bit of review.  While working on this @dlmarion  and I reviewed each others work as we went in addition to this review.  If anyone is interested, @dlmarion  and I could give a talk about the concepts on slack sometime in order to help guide anyone reviewing.\r\n\r\nIn addition to reviews, the feature does need more testing.   Next week I hope to scale up the scan server testing to larger clusters now that I am getting small cluster to work well.  If anyone wants to help I would be happy to show you how to run scan server and some new test in kubernetes.  The source code for the testing I have been doing is [here](https://github.com/keith-turner/accumulo-testing/tree/scan-server-testing/sstest), its not documented but I would be happy to offer guidance on how to run it (need Kubernetes+Accumulo+Zookeper+DFS).  It supports multiple different test scenarios and I am running through those. \r\n\r\nAfter that, for 2.1.0 in general I would like to set up a test scenario w/ continuous bulk import+external compactions+scan servers+heavy query load and compare that to continuous  bulk import+tservers only+heavy query load.  This testing could be done w/ a 2.1.0-beta-1 release possibly.  If anyone is interested in collaborating on that let me know, could definitely use help.\r\n\r\nI do agree that this new feature could break existing functionality unrelated to scan servers.  I am optimistic that we can mitigate this with good testing though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140181288/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140277703","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1140277703","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1140277703,"node_id":"IC_kwDOACaFSM5D90HH","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-28T14:48:46Z","updated_at":"2022-05-28T14:48:46Z","author_association":"CONTRIBUTOR","body":"I'm not sure that PropStoreKey provides any benefit  over PropCacheKey - I bounced around different variations, but maybe something that indicated that they are used for configurations (group of properties) - so something like ConfigKey or ConfigStoreKey,...\r\n\r\nCan the renaming be done outside of any other changes?  The renaming is easy to check, and I think the other changes are being hidden by the rename changes.\r\n\r\nI lean towards providing methods to perform cache operations rather than returning the cache. If the cache is exposed, then it is much harder to reason what things are occurring through the prop store and what may be just manipulating  the cache directly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140277703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140325801","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1140325801","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1140325801,"node_id":"IC_kwDOACaFSM5D9_2p","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-28T20:32:18Z","updated_at":"2022-05-28T20:32:18Z","author_association":"MEMBER","body":"> I'm not sure that PropStoreKey provides any benefit over PropCacheKey - I bounced around different variations, but maybe something that indicated that they are used for configurations (group of properties) - so something like ConfigKey or ConfigStoreKey,...\r\n\r\nTo me, Prop and Config are basically synonymous in this context... both shorthand for \"Configuration Properties\". So, \"ConfigKey\" or \"ConfigStoreKey\" are basically the same in my head as \"PropStoreKey\", and \"PropStoreKey\" is consistent with the name of the \"PropStore\" (rather than \"ConfigStore\").\r\n\r\n> \r\n> Can the renaming be done outside of any other changes? The renaming is easy to check, and I think the other changes are being hidden by the rename changes.\r\n\r\nI suppose, but I'm probably not going to update this PR to do so until at least Tuesday.\r\n\r\n> \r\n> I lean towards providing methods to perform cache operations rather than returning the cache. If the cache is exposed, then it is much harder to reason what things are occurring through the prop store and what may be just manipulating the cache directly.\r\n\r\nThe prop store already has to be written with no knowledge of what's going on inside the cache, since the cache itself can remove local copies at will. So, having something else have the ability to remove items from the cache is not a big deal. If you want to put cache-manipulation APIs on the propstore itself, then we probably don't need two interfaces and can merge PropStore and PropCache into a single CachingPropertyStore.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1140325801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1141979759","html_url":"https://github.com/apache/accumulo/pull/2743#issuecomment-1141979759","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2743","id":1141979759,"node_id":"IC_kwDOACaFSM5EETpv","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T10:54:33Z","updated_at":"2022-05-31T10:54:33Z","author_association":"CONTRIBUTOR","body":"> Changes look fine. Don't have the chance to thoroughly test. If the user 'forces' the shutdown, does it still hang while trying to shut down, or does it fully shut down now? Are there any ramifications to shutting down the last server that should be detailed before a user attempts to do it?\r\n\r\nIt doesn't hang, when you shut down all servers, it will just not shut down the last server. I tested with the `force` option but it doesn't work. I think there is a bug in the Admin Utility. I am going to merge this and then do a follow up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1141979759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142041321","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142041321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142041321,"node_id":"IC_kwDOACaFSM5EEirp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T12:00:33Z","updated_at":"2022-05-31T12:00:33Z","author_association":"CONTRIBUTOR","body":"If I'm remembering the problem correctly from last week, the client modifies some properties and the server watcher has not fired before the client fetches the property to verify that it's been set. Have we considered having `ZooPropStore.get(PropCacheKey)` call `ZooPropStore.readPropsFromZK(PropCacheKey)` to confirm that the cached version matches the version in ZK?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142041321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142043333","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1142043333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1142043333,"node_id":"IC_kwDOACaFSM5EEjLF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T12:02:30Z","updated_at":"2022-05-31T12:02:30Z","author_association":"CONTRIBUTOR","body":"See https://github.com/apache/accumulo/issues/2739#issuecomment-1142041321","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142043333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142099689","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142099689","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142099689,"node_id":"IC_kwDOACaFSM5EEw7p","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T12:55:05Z","updated_at":"2022-05-31T12:55:05Z","author_association":"MEMBER","body":"> If I'm remembering the problem correctly from last week, the client modifies some properties and the server watcher has not fired before the client fetches the property to verify that it's been set. Have we considered having `ZooPropStore.get(PropCacheKey)` call `ZooPropStore.readPropsFromZK(PropCacheKey)` to confirm that the cached version matches the version in ZK?\r\n\r\nThat's basically equivalent to expiring the cache, which forces it to reload from ZK, which is what PR #2740 (and #2741) do.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142099689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142109382","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142109382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142109382,"node_id":"IC_kwDOACaFSM5EEzTG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T13:03:52Z","updated_at":"2022-05-31T13:03:52Z","author_association":"CONTRIBUTOR","body":"> That's basically equivalent to expiring the cache, which forces it to reload from ZK, which is what PR https://github.com/apache/accumulo/pull/2740 (and https://github.com/apache/accumulo/pull/2741) do.\r\n\r\nI was just wondering if we should attempt to make the ZK clients (Accumulo server processes) more consistent. I know there is a cost to it, but if the server processes were more consistent then we would not need to invalidate the cache on a client call. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142109382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142136810","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1142136810","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1142136810,"node_id":"IC_kwDOACaFSM5EE5_q","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T13:27:54Z","updated_at":"2022-05-31T13:27:54Z","author_association":"CONTRIBUTOR","body":"My issue is that if you return the cache, then callers can call any method - if a clear method is provided at the store level, then that bounds what the caller can do and would simplify changes at the cache layer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142136810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142158068","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142158068","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142158068,"node_id":"IC_kwDOACaFSM5EE_L0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T13:46:17Z","updated_at":"2022-05-31T13:46:17Z","author_association":"CONTRIBUTOR","body":"I went back and re-read the ZooKeeper [Consistency Guarantees](https://zookeeper.apache.org/doc/r3.8.0/zookeeperProgrammers.html#ch_zkGuarantees). I think the note at the end means that my suggestion wont work. I think it also means that #2740 and #2741 wont work either in the case where there is more than one ZK node. #2740 and #2741 may make the tests work, but it will be because of a side-effect of the number of ZK servers that MAC starts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142158068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142202800","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142202800","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142202800,"node_id":"IC_kwDOACaFSM5EFKGw","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T14:21:48Z","updated_at":"2022-05-31T14:21:48Z","author_association":"CONTRIBUTOR","body":"Does it have an impact that configuration / properties are relatively stable?   Once set, they generally do not change often. The tests are rather synthetic that they set and then immediately expect to see the changes.  In a system, those changes are going to to take time to propagate and the design should recognize that ambiguity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142202800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142221882","html_url":"https://github.com/apache/accumulo/issues/2745#issuecomment-1142221882","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2745","id":1142221882,"node_id":"IC_kwDOACaFSM5EFOw6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T14:37:02Z","updated_at":"2022-05-31T14:37:02Z","author_association":"CONTRIBUTOR","body":"The properties for managing thread timeout have different default values. SSERV_MINTHREADS_TIMEOUT defaults to 10s, but TSERV_MINTHREADS_TIMEOUT defaults to 0s. Maybe we make the default value that same, or increase the default for SSERV_MINTHREADS_TIMEOUT dramatically (like 5m).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142221882/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142230246","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142230246","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142230246,"node_id":"IC_kwDOACaFSM5EFQzm","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T14:43:38Z","updated_at":"2022-05-31T14:43:38Z","author_association":"CONTRIBUTOR","body":"I agree, I think this is an issue that likely only affects the tests. Can we specify a different ZooPropStore for MAC? Maybe a subclass of ZooPropStore that removes the cached value and reloads it as part of the get() call?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142230246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142309419","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142309419","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142309419,"node_id":"IC_kwDOACaFSM5EFkIr","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T15:48:45Z","updated_at":"2022-05-31T15:48:45Z","author_association":"MEMBER","body":"> I agree, I think this is an issue that likely only affects the tests. Can we specify a different ZooPropStore for MAC? Maybe a subclass of ZooPropStore that removes the cached value and reloads it as part of the get() call?\r\n\r\nI don't think it's a good idea to run tests with a different prop store. That will cause us to lose testing coverage for the code that users will use.\r\n\r\n> I went back and re-read the ZooKeeper [Consistency Guarantees](https://zookeeper.apache.org/doc/r3.8.0/zookeeperProgrammers.html#ch_zkGuarantees). I think the note at the end means that my suggestion wont work. I think it also means that #2740 and #2741 wont work either in the case where there is more than one ZK node. #2740 and #2741 may make the tests work, but it will be because of a side-effect of the number of ZK servers that MAC starts.\r\n\r\nThose aren't just for fixing tests... they are any time the user asks our API for the configuration. This applies to tests, but users can do this also. #2740 isn't trying to solve any kind of global consistency across clients. It's a much more modest solution: just do a better job of returning something at least as recent as any previous setProperty() operations that client might have issued. If we wanted an extra guarantee, we'd also zk.sync before re-reading, but clearing the cache to force it to read from ZK is much more stable than what's happening now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142309419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142323081","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1142323081","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1142323081,"node_id":"IC_kwDOACaFSM5EFneJ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T16:01:28Z","updated_at":"2022-05-31T16:01:28Z","author_association":"MEMBER","body":"> My issue is that if you return the cache, then callers can call any method - if a clear method is provided at the store level, then that bounds what the caller can do and would simplify changes at the cache layer.\r\n\r\nJust to be clear, we're talking about PropCache's API, not the internal Caffeine Cache object. So, we're already bounding the caller to what PropCache supports.\r\n\r\nI don't think it makes sense to turn PropStore API into a proxy for PropCache, with a subset of its APIs. Separation of responsibilities: the PropCache API is responsible for providing cache operations, the PropStore API is responsible for providing store operations. Neither are public API. There is no risk of exposing things to end users, because none of that matters here. It's just a question of how we're organizing internal code. I don't think it simplifies things to put cache operations on the PropStore API, rather than call them from the PropCache API. If we do that, there's no point in having separate interfaces to separate the responsibilities. I think doing that adds extra layers one has to trace code through when debugging internals, and makes things far more complex. If the operation is already available on PropCache, just make the PropCache visible. It can't get more simpler than that.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142323081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142326277","html_url":"https://github.com/apache/accumulo/pull/2741#issuecomment-1142326277","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2741","id":1142326277,"node_id":"IC_kwDOACaFSM5EFoQF","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T16:04:03Z","updated_at":"2022-05-31T16:04:03Z","author_association":"MEMBER","body":"This PR is basically a duplicate of what I was doing with #2740. Can we close this and collaborate / come to consensus there instead of having two open PRs trying to do the same basic thing?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142326277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142331641","html_url":"https://github.com/apache/accumulo/pull/2748#issuecomment-1142331641","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2748","id":1142331641,"node_id":"IC_kwDOACaFSM5EFpj5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T16:08:58Z","updated_at":"2022-05-31T16:08:58Z","author_association":"MEMBER","body":"@milleruntime Missed it by mere seconds! :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142331641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142348674","html_url":"https://github.com/apache/accumulo/pull/2741#issuecomment-1142348674","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2741","id":1142348674,"node_id":"IC_kwDOACaFSM5EFtuC","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T16:24:35Z","updated_at":"2022-05-31T16:24:35Z","author_association":"CONTRIBUTOR","body":"closing in favor of #2740","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142348674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142382048","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1142382048","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1142382048,"node_id":"IC_kwDOACaFSM5EF13g","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T16:52:11Z","updated_at":"2022-05-31T16:52:11Z","author_association":"CONTRIBUTOR","body":"> https://github.com/apache/accumulo/pull/2740 isn't trying to solve any kind of global consistency across clients.\r\n\r\nUnderstood.\r\n\r\n> It's a much more modest solution: just do a better job of returning something at least as recent as any previous setProperty() operations that client might have issued.\r\n\r\nI think that will only happen if:\r\n    * The client communicates with the same Accumulo server, or\r\n    * The Accumulo server(s) are communicating with the same ZK server, or\r\n    * All of the ZK servers have a consistent view of the information.\r\n\r\n> If we wanted an extra guarantee, we'd also zk.sync before re-reading, but clearing the cache to force it to read from ZK is much more stable than what's happening now.\r\n\r\nI agree. It should definitely help for the tests and should help in production as config changes are likely rare occurrences. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142382048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142667416","html_url":"https://github.com/apache/accumulo/issues/2700#issuecomment-1142667416","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2700","id":1142667416,"node_id":"IC_kwDOACaFSM5EG7iY","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T21:44:18Z","updated_at":"2022-05-31T21:44:18Z","author_association":"CONTRIBUTOR","body":"#2707 resolves this problem","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142667416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142724112","html_url":"https://github.com/apache/accumulo/issues/2745#issuecomment-1142724112","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2745","id":1142724112,"node_id":"IC_kwDOACaFSM5EHJYQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-05-31T23:14:46Z","updated_at":"2022-05-31T23:14:46Z","author_association":"CONTRIBUTOR","body":"> The properties for managing thread timeout have different default values. SSERV_MINTHREADS_TIMEOUT defaults to 10s, but TSERV_MINTHREADS_TIMEOUT defaults to 0s. Maybe we make the default value that same, or increase the default for SSERV_MINTHREADS_TIMEOUT dramatically (like 5m).\r\n\r\n@dlmarion  I changed the default to 0s for the sserver to make in consistent w/ the tserver in your sserver branch. I think we can close this for now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1142724112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1143981169","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1143981169","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1143981169,"node_id":"IC_kwDOACaFSM5EL8Rx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-01T18:17:29Z","updated_at":"2022-06-01T18:17:53Z","author_association":"MEMBER","body":"If we want this to resolve issues with more than one ZK server, then we could also add a ZK sync, but I think I'd prefer the PropStore itself do that when it refreshes in the background.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1143981169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144016906","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1144016906","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1144016906,"node_id":"IC_kwDOACaFSM5EMFAK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-01T18:55:47Z","updated_at":"2022-06-01T18:55:47Z","author_association":"CONTRIBUTOR","body":"I think this change will fix the tests, but come with a cost of refreshing the configuration information every time. I'm not sure what that actual cost is in terms of time on a larger cluster, but it fixes the test. I'm not suggesting that we add a ZK sync, my prior comments were a failed attempt at providing better consistency and a re-education on ZK's consistency guarantees.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144016906/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144037202","html_url":"https://github.com/apache/accumulo/pull/2740#issuecomment-1144037202","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2740","id":1144037202,"node_id":"IC_kwDOACaFSM5EMJ9S","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-01T19:16:04Z","updated_at":"2022-06-01T19:16:04Z","author_association":"MEMBER","body":"> I'm not sure what that actual cost is in terms of time on a larger cluster, but it fixes the test.\r\n\r\nMy goal here was to fix it for users as well as for tests. The performance impact of these changes should be minimal... because it only adds the cache expiration when a user explicitly calls public API to retrieve configuration. That's not how serves normally retrieve configuration... they do it directly through ZooKeeper. So, it should only affect specific use cases. However, depending on where we put a sync, that could have an impact on performance. If we put it in the prop cache loader, for example, it would sync even from normal cache expirations, and not user triggered ones. Putting a sync on these user-called methods wouldn't be too bad, though, I think.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144037202/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144175536","html_url":"https://github.com/apache/accumulo/issues/2739#issuecomment-1144175536","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2739","id":1144175536,"node_id":"IC_kwDOACaFSM5EMruw","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-01T21:50:52Z","updated_at":"2022-06-01T21:50:52Z","author_association":"MEMBER","body":"While not a 100% fix for the underlying issue, #2740 should fix the test instabilities we've seen.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144175536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144930209","html_url":"https://github.com/apache/accumulo/issues/2696#issuecomment-1144930209","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2696","id":1144930209,"node_id":"IC_kwDOACaFSM5EPj-h","user":{"login":"nosewings","id":24929858,"node_id":"MDQ6VXNlcjI0OTI5ODU4","avatar_url":"https://avatars.githubusercontent.com/u/24929858?v=4","gravatar_id":"","url":"https://api.github.com/users/nosewings","html_url":"https://github.com/nosewings","followers_url":"https://api.github.com/users/nosewings/followers","following_url":"https://api.github.com/users/nosewings/following{/other_user}","gists_url":"https://api.github.com/users/nosewings/gists{/gist_id}","starred_url":"https://api.github.com/users/nosewings/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nosewings/subscriptions","organizations_url":"https://api.github.com/users/nosewings/orgs","repos_url":"https://api.github.com/users/nosewings/repos","events_url":"https://api.github.com/users/nosewings/events{/privacy}","received_events_url":"https://api.github.com/users/nosewings/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T14:26:21Z","updated_at":"2022-06-02T14:26:21Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I believe I have an alternative solution. Is there anything I can do to test it (other than running `mvn test`)?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1144930209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145013445","html_url":"https://github.com/apache/accumulo/issues/2696#issuecomment-1145013445","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2696","id":1145013445,"node_id":"IC_kwDOACaFSM5EP4TF","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T15:43:33Z","updated_at":"2022-06-02T15:43:33Z","author_association":"CONTRIBUTOR","body":"You can use maven to specify specific unit and IT tests.  For example to run just the RFileClientTest\r\n\r\n```\r\nmvn verify -Dspotbugs.skip -Dit.test=skip_its -Dtest=RFileClientTest -Dspotbugs.skip -Drat.skip -Dformatter.skip -Dcheckstyle.skip -Dmodernizer.skip -Dimpsort.skip -Dsortpom.skip -DfailIfNoTests=false\r\n```\r\n\r\nYou can look for tests that exercise the Gather / Summaries.  To run specific ITs, replace skip_its in the above command with individual IT tests that you want to run.  I'm not sure what tests best exercise the Gatherer functionality to recommend a more specific set of tests that would be best to run.\r\n\r\nSimilarly you can run just the QA checks that are automatically run on PR  submission with:\r\n\r\n```\r\nmvn --color=always clean verify package javadoc:jar -Psec-bugs -Perrorprone -DskipITs=true -DskipTests=true \r\n```\r\n\r\nRunning a version of this before submitting a PR reduces common formatting and other errors that will cause the build to fail.\r\n\r\nTo run a full set of tests and ITs:\r\n\r\n```\r\nmvn --color=always clean verify -Psunny \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145013445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145066605","html_url":"https://github.com/apache/accumulo/pull/2751#issuecomment-1145066605","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2751","id":1145066605,"node_id":"IC_kwDOACaFSM5EQFRt","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T16:28:18Z","updated_at":"2022-06-02T16:28:18Z","author_association":"CONTRIBUTOR","body":"I think commit 1279ff4b6d addresses all comments - except the use of log statements ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145066605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145100136","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1145100136","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1145100136,"node_id":"IC_kwDOACaFSM5EQNdo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T17:06:16Z","updated_at":"2022-06-02T17:06:16Z","author_association":"CONTRIBUTOR","body":"These changes are a continuation of refactoring changes that I started in #1471, with the creation of `TabletFile` and then in #2688. BLUF: use stronger typed objects instead of Strings. We have lots of places where we use Java `String` for `Path` objects and/or specialization code in the GC, Metadata, Manager, etc.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145100136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145148956","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1145148956","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1145148956,"node_id":"IC_kwDOACaFSM5EQZYc","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T17:53:24Z","updated_at":"2022-06-02T17:53:24Z","author_association":"CONTRIBUTOR","body":"Currently seeing a failure in ShellServerIT:\r\n<pre>\r\n[INFO] Running org.apache.accumulo.test.shell.ShellServerIT\r\n[ERROR] Tests run: 58, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 205.532 s <<< FAILURE! - in org.apache.accumulo.test.shell.ShellServerIT\r\n[ERROR] org.apache.accumulo.test.shell.ShellServerIT.deleterows  Time elapsed: 60.249 s  <<< FAILURE!\r\norg.opentest4j.AssertionFailedError: execution timed out after 60000 ms\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145148956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145277496","html_url":"https://github.com/apache/accumulo/pull/2717#issuecomment-1145277496","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2717","id":1145277496,"node_id":"IC_kwDOACaFSM5EQ4w4","user":{"login":"tchaie","id":71804562,"node_id":"MDQ6VXNlcjcxODA0NTYy","avatar_url":"https://avatars.githubusercontent.com/u/71804562?v=4","gravatar_id":"","url":"https://api.github.com/users/tchaie","html_url":"https://github.com/tchaie","followers_url":"https://api.github.com/users/tchaie/followers","following_url":"https://api.github.com/users/tchaie/following{/other_user}","gists_url":"https://api.github.com/users/tchaie/gists{/gist_id}","starred_url":"https://api.github.com/users/tchaie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tchaie/subscriptions","organizations_url":"https://api.github.com/users/tchaie/orgs","repos_url":"https://api.github.com/users/tchaie/repos","events_url":"https://api.github.com/users/tchaie/events{/privacy}","received_events_url":"https://api.github.com/users/tchaie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T19:47:39Z","updated_at":"2022-06-02T19:48:50Z","author_association":"CONTRIBUTOR","body":"Will work on integrating the properties version as a parameter in modifyProperties. (This is why the `Pair` code is currently commented out in `InstanceOperationsImpl`)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145277496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145329896","html_url":"https://github.com/apache/accumulo/pull/2725#issuecomment-1145329896","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2725","id":1145329896,"node_id":"IC_kwDOACaFSM5ERFjo","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-02T20:51:42Z","updated_at":"2022-06-02T20:51:42Z","author_association":"MEMBER","body":"This PR is now ready for review. Everything seems to be working as expected.\r\n\r\nHere is a screenshot before these changes:\r\n![beforeDatatables](https://user-images.githubusercontent.com/47725857/171735479-b7416f36-495f-45ff-8db8-118e73f8e3c1.png)\r\n\r\nAnd here is a screenshot after these changes:\r\n![afterDataTables](https://user-images.githubusercontent.com/47725857/171735526-6568d4fc-174e-4a9d-8491-834702cd5625.png)\r\n\r\n*Note: The empty cells are expected. There is not always data available for every cell.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145329896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145903247","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1145903247","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1145903247,"node_id":"IC_kwDOACaFSM5ETRiP","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T12:16:18Z","updated_at":"2022-06-03T12:16:18Z","author_association":"CONTRIBUTOR","body":"Is this reproduced with the changes in PR #2215? That also refactors how\nthe Fate command works and may or may not have this same issue. When I was\noriginally testing, I found that timing was important for the fate -list\ncommand. I usually added a timer during table creation in order to see a\nfate transaction taking place. Otherwise, the transaction finished before I\ncould print/ do other fate commands to it.\n\nOn Fri, Jun 3, 2022 at 8:03 AM Mike Miller ***@***.***> wrote:\n\n> *Describe the bug*\n> Many changes have been made to the fate shell command and now it doesn't\n> work properly.\n>\n> *Versions (OS, Maven, Java, and others, as appropriate):*\n>\n>    - Affected version(s) of this project: 2.1\n>    - OS: Ubuntu 18\n>    - Others: Hadoop 3.2.2 & apache-zookeeper-3.6.3\n>\n> *To Reproduce*\n> Steps to reproduce the behavior (or a link to an example repository that\n> reproduces the problem):\n>\n>    1. Run CI from accumulo-testing for 10 minutes: ./bin/cingest\n>    createtable and then ./bin/cingest ingest\n>    2. Run the Shell cmd: compact -t ci\n>    3. Run the Shell cmd: listcompactions. Make sure there is at least one\n>    \"USER\" compaction.\n>    4. Run the Shell cmd: fate -list or fate -print. There should be the\n>    User Compact FATE operation printed but you only get 0 transactions\n>    5. From ZK Shell, ls /accumulo/<instance_id>/fate\n>    [zk: localhost:2181(CONNECTED) 3] ls\n>    /accumulo/363c7563-bd35-448a-9dbc-dc6ef18cd819/fate\n>    [tx_291329b4af233519]\n>    6. In the logs directory: grep \"291329b4af233519\" *.log to see:\n>\n> *Expected behavior*\n> The user compaction Fate TX should be printed in the shell.\n>\n> ***@***.***> compact -t ci\n> 2022-06-03T07:39:29,891 [shell.Shell] INFO : Compaction of table ci started for given range\n> ***@***.***> fate -list\n> 2022-06-03T07:39:31,775 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\n>  0 transactions\n> ***@***.***> listcompactions\n>  SERVER               | AGE       | TYPE  | REASON | READ  | WROTE | TABLE           | TABLET                                   | INPUT | OUTPUT                              | ITERATORS | ITERATOR OPTIONS\n>        localhost:9997 |   5s424ms | MAJOR | SYSTEM |  921K |  902K |              ci | 1;733333333333333e;6cccccccccccccd7      |     4 |        /1/t-000004m/C000027e.rf_tmp |        [] | {}\n>        localhost:9997 |    5s23ms |  FULL |   USER |  840K |  829K |              ci | 1;533333333333333b;4cccccccccccccd4      |     8 |        /1/t-000004h/A000027f.rf_tmp |        [] | {}\n>        localhost:9997 |   3s125ms |  FULL |   USER |  547K |  540K |              ci | 1<;79999999999999a5                      |     7 |   /1/default_tablet/A000027g.rf_tmp |        [] | {}\n>       localhost:10000 |   5s243ms |  FULL |   USER |  897K |  893K |              ci | 1;0cccccccccccccce;0666666666666667      |     5 |        /1/t-0000046/A000022u.rf_tmp |        [] | {}\n>       localhost:10000 |   1s225ms |  FULL |   USER |  208K |  206K |              ci | 1;1333333333333335;0cccccccccccccce      |     7 |        /1/t-0000047/A000022v.rf_tmp |        [] | {}\n> ***@***.***> fate -list\n> 2022-06-03T07:39:44,128 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\n>  0 transactions\n> [zk: localhost:2181(CONNECTED) 3] ls /accumulo/363c7563-bd35-448a-9dbc-dc6ef18cd819/fate\n> [tx_291329b4af233519]\n> 08:00:34 {main} ~/workspace/uno/install/logs/accumulo$ grep 291329b4af233519 *.log\n> manager_ip-10-113-14-231-06-03-22-07-1.log:2022-06-03T07:39:29,881 [fate.Fate] INFO : Seeding FATE[291329b4af233519] TABLE_COMPACT Compact table (1) with config []\n> manager_ip-10-113-14-231-06-03-22-07-1.log:2022-06-03T07:39:29,895 [zookeeper.DistributedReadWriteLock] INFO : Added lock entry 0 userData 291329b4af233519 lockType READ\n> manager_ip-10-113-14-231-06-03-22-07-1.log:2022-06-03T07:39:29,896 [tableOps.Utils] INFO : namespace +default (291329b4af233519) locked for read operation: COMPACT\n> manager_ip-10-113-14-231-06-03-22-07-1.log:2022-06-03T07:39:29,904 [zookeeper.DistributedReadWriteLock] INFO : Added lock entry 0 userData 291329b4af233519 lockType READ\n> manager_ip-10-113-14-231-06-03-22-07-1.log:2022-06-03T07:39:29,905 [tableOps.Utils] INFO : table 1 (291329b4af233519) locked for read operation: COMPACT\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/2754>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSVZ5J5AJAQA5QGVOI3LVNHYB5ANCNFSM5XYNIFDQ>\n> .\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145903247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145921868","html_url":"https://github.com/apache/accumulo/issues/2696#issuecomment-1145921868","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2696","id":1145921868,"node_id":"IC_kwDOACaFSM5ETWFM","user":{"login":"nosewings","id":24929858,"node_id":"MDQ6VXNlcjI0OTI5ODU4","avatar_url":"https://avatars.githubusercontent.com/u/24929858?v=4","gravatar_id":"","url":"https://api.github.com/users/nosewings","html_url":"https://github.com/nosewings","followers_url":"https://api.github.com/users/nosewings/followers","following_url":"https://api.github.com/users/nosewings/following{/other_user}","gists_url":"https://api.github.com/users/nosewings/gists{/gist_id}","starred_url":"https://api.github.com/users/nosewings/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nosewings/subscriptions","organizations_url":"https://api.github.com/users/nosewings/orgs","repos_url":"https://api.github.com/users/nosewings/repos","events_url":"https://api.github.com/users/nosewings/events{/privacy}","received_events_url":"https://api.github.com/users/nosewings/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T12:39:28Z","updated_at":"2022-06-03T12:39:28Z","author_association":"CONTRIBUTOR","body":"In addition to the PR I've submitted, I also have a non-recursive version that just runs the retry logic inside a loop in one Future. I don't like that version as much, though, because it involves calling `Future.get()` inside the body of a `CompletableFuture`, which makes exception-handling messy and generally seems unidiomatic.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145921868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145969873","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1145969873","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1145969873,"node_id":"IC_kwDOACaFSM5EThzR","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T13:32:12Z","updated_at":"2022-06-03T13:32:12Z","author_association":"CONTRIBUTOR","body":"> Is this reproduced with the changes in PR [#2215](https://github.com/apache/accumulo/pull/2215)?\r\n\r\nI haven't tested it with your branch but if it is up to date then I think it would have the same problem.\r\n\r\n> When I was originally testing, I found that timing was important for the fate -list command. I usually added a timer during table creation in order to see a fate transaction taking place. Otherwise, the transaction finished before I could print/ do other fate commands to it.\r\n\r\nRight, it is tricky to get the timing. I found it helps if you use the `SlowIterator` on a compaction. This requires the test jar and can be done using these commands:\r\n<pre>\r\nconfig -t ci -s table.iterator.majc.slow=1,org.apache.accumulo.test.functional.SlowIterator\r\nconfig -t ci -s table.iterator.majc.slow.opt.sleepTime=5\r\n</pre>\r\n\r\nIt helps to cancel compactions on the table first too then run a user compaction. Fate TX will only be created for user initiated compaction. I just confirmed this again on main using the `SlowIterator`:\r\n<pre>\r\n[zk: localhost:2181(CONNECTED) 2] ls /accumulo/af1770d1-ffa1-4373-95f9-d715b11d70dd/fate \r\n[tx_50704e650c56e804]\r\n[zk: localhost:2181(CONNECTED) 3] get /accumulo/af1770d1-ffa1-4373-95f9-d715b11d70dd/fate/tx_50704e650c56e804 \r\nIN_PROGRESS\r\nroot@uno ci> fate -print 50704e650c56e804\r\n2022-06-03T09:26:32,409 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\n 0 transactions\r\nroot@uno ci> fate -print 50704e650c56e804\r\n2022-06-03T09:30:27,019 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\n 0 transactions\r\nroot@uno ci> fate -print \r\n2022-06-03T09:30:31,987 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\n 0 transactions\r\nroot@uno ci> fate -list\r\n2022-06-03T09:30:34,832 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\n 0 transactions\r\n</pre>\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1145969873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146032846","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146032846","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146032846,"node_id":"IC_kwDOACaFSM5ETxLO","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T14:40:03Z","updated_at":"2022-06-03T14:40:03Z","author_association":"CONTRIBUTOR","body":"I think there is a bigger issue going on here, unrelated to the Fate Command. I setup a cluster after I reverted back to before #2569 was merged and it works better. I am able to see FATE TXs, even with the NPE that was fixed in #2738. I think there is an unresolved issue related to the ZK prop store refactor in #2569 that is causing the Fate Command to not work properly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146032846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146039222","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146039222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146039222,"node_id":"IC_kwDOACaFSM5ETyu2","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T14:46:45Z","updated_at":"2022-06-03T14:46:45Z","author_association":"MEMBER","body":"FWIW, I just pulled in #2569 to my 1.10 branch and immediately got this running `mvn clean verify`\r\n```\r\n[INFO] Apache Accumulo Maven Plugin ....................... SKIPPED                                                                                                                                                                                                                                                         \r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  42.187 s                                                                                                                                                                                                                                                                                                \r\n[INFO] Finished at: 2022-06-03T14:14:52Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M4:test (default-test) on project accumulo-fate: There are test failures.\r\n[ERROR]\r\n[ERROR] Please refer to /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire-reports for the individual test results.\r\n[ERROR] Please refer to dump files (if any exist) [date].dump, [date]-jvmRun[N].dump and [date].dumpstream.\r\n[ERROR] ExecutionException The forked VM terminated without properly saying goodbye. VM crash or System.exit called?\r\n[ERROR] Command was /bin/sh -c cd /home/mjwall/src/oss/accumulo-mjwall-1.10/fate && /home/mjwall/opt/jdk-11.0.14/bin/java -Xmx1G -jar /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire/surefirebooter5780153386212598703.jar /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire 2022-06-03T14-14-30\r\n_316-jvmRun6 surefire16622590161902785932tmp surefire_88617873131608458531tmp\r\n[ERROR] Process Exit Code: 0\r\n[ERROR] org.apache.maven.surefire.booter.SurefireBooterForkException: ExecutionException The forked VM terminated without properly saying goodbye. VM crash or System.exit called?                                                                                                                                          \r\n[ERROR] Command was /bin/sh -c cd /home/mjwall/src/oss/accumulo-mjwall-1.10/fate && /home/mjwall/opt/jdk-11.0.14/bin/java -Xmx1G -jar /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire/surefirebooter5780153386212598703.jar /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire 2022-06-03T14-14-30\r\n_316-jvmRun6 surefire16622590161902785932tmp surefire_88617873131608458531tmp\r\n[ERROR] Process Exit Code: 0\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter.awaitResultsDone(ForkStarter.java:513)\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter.runSuitesForkPerTestSet(ForkStarter.java:460)\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:301)\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter.run(ForkStarter.java:249)\r\n[ERROR]         at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeProvider(AbstractSurefireMojo.java:1217)\r\n[ERROR]         at org.apache.maven.plugin.surefire.AbstractSurefireMojo.executeAfterPreconditionsChecked(AbstractSurefireMojo.java:1063)\r\n[ERROR]         at org.apache.maven.plugin.surefire.AbstractSurefireMojo.execute(AbstractSurefireMojo.java:889)\r\n[ERROR]         at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:137)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute(MojoExecutor.java:301)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:211)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:165)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:157)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:121)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:81)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:56)\r\n[ERROR]         at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:127)\r\n[ERROR]         at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:294)\r\n[ERROR]         at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:192)\r\n[ERROR]         at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:105)\r\n[ERROR]         at org.apache.maven.cli.MavenCli.execute(MavenCli.java:960)\r\n[ERROR]         at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:293)\r\n[ERROR]         at org.apache.maven.cli.MavenCli.main(MavenCli.java:196)\r\n[ERROR]         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n[ERROR]         at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n[ERROR]         at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n[ERROR]         at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n[ERROR]         at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:282)\r\n[ERROR]         at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:225)\r\n[ERROR]         at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:406)\r\n[ERROR]         at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:347)\r\n[ERROR] Caused by: org.apache.maven.surefire.booter.SurefireBooterForkException: The forked VM terminated without properly saying goodbye. VM crash or System.exit called?\r\n[ERROR] Command was /bin/sh -c cd /home/mjwall/src/oss/accumulo-mjwall-1.10/fate && /home/mjwall/opt/jdk-11.0.14/bin/java -Xmx1G -jar /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire/surefirebooter5780153386212598703.jar /home/mjwall/src/oss/accumulo-mjwall-1.10/fate/target/surefire 2022-06-03T14-14-30\r\n_316-jvmRun6 surefire16622590161902785932tmp surefire_88617873131608458531tmp\r\n[ERROR] Process Exit Code: 0\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter.fork(ForkStarter.java:690)\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter.access$600(ForkStarter.java:118)\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter$2.call(ForkStarter.java:447)\r\n[ERROR]         at org.apache.maven.plugin.surefire.booterclient.ForkStarter$2.call(ForkStarter.java:423)\r\n[ERROR]         at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n[ERROR]         at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n[ERROR]         at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n[ERROR]         at java.base/java.lang.Thread.run(Thread.java:834)\r\n[ERROR]\r\n[ERROR] -> [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n[ERROR]\r\n[ERROR] After correcting the problems, you can resume the build with the command\r\n[ERROR]   mvn <args> -rf :accumulo-fate\r\n```\r\n\r\nRerunning `mvn clean verify` passed successfully","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146039222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146043463","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146043463","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146043463,"node_id":"IC_kwDOACaFSM5ETzxH","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T14:51:42Z","updated_at":"2022-06-03T14:51:42Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/accumulo/pull/2569 was specifically written with 2.1 - I'd be surprised if it compiled against 1.10 and even more astonished it it worked at all.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146043463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146045713","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146045713","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146045713,"node_id":"IC_kwDOACaFSM5ET0UR","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T14:54:23Z","updated_at":"2022-06-03T14:56:16Z","author_association":"MEMBER","body":"You are right, I meant #2708.  Saw fate and thought it was related. Ignore this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146045713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146056782","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146056782","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146056782,"node_id":"IC_kwDOACaFSM5ET3BO","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T15:06:50Z","updated_at":"2022-06-03T15:50:14Z","author_association":"CONTRIBUTOR","body":"tl/dr; - seems to work for me.\r\n\r\nThe fate print command seems to work for me using a branch with https://github.com/apache/accumulo/pull/2215 merged with current main.\r\n\r\nTo reproduce:\r\n\r\nUsed uno shell to create a table.\r\nAdded 26 rows of dataa\r\nAdded the slow iterator with:\r\n```\r\nroot@uno tbl1> config -t tbl1 -s table.iterator.majc.slow=1,org.apache.accumulo.test.functional.SlowIterator\r\nroot@uno tbl1> config -t tbl1 -s table.iterator.majc.slow.opt.sleepTime=10000\r\n\r\ncompact -t tbl1 -w\r\n\r\n```\r\n\r\nwhile that's running, in a second shell:\r\n```\r\nroot@uno> fate -print\r\ntxid: 633b2f2278fc35b0  status: IN_PROGRESS         op: CompactRange     locked: [R:+default, R:1] locking: []              top: CompactionDriver created: 2022-06-03T14:55:56.435Z\r\n 1 transactions\r\nroot@uno> fate -list\r\ntxid: 633b2f2278fc35b0  status: IN_PROGRESS         op: CompactRange     locked: [R:+default, R:1] locking: []              top: CompactionDriver created: 2022-06-03T14:55:56.435Z\r\n 1 transactions\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146056782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146087086","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146087086","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146087086,"node_id":"IC_kwDOACaFSM5ET-au","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T15:38:56Z","updated_at":"2022-06-03T15:39:20Z","author_association":"CONTRIBUTOR","body":"I do get an exception in a tserver log - if I try to run the fate -print command with -e option to the shell. The error is intermitent, and if I log into the shell, run fate -print, log back out of the shell, it seems to work passing it as a command\r\n\r\n```\r\n$ accumulo shell -u root -p uno -e 'fate -print'\r\n\r\n2022-06-03T15:29:00,326 [shell.Shell] ERROR: java.lang.RuntimeException: Unexpected exception thrown\r\n```\r\nA full trace from tserver log\r\n<details>\r\n  <summary>Click to expand</summary>\r\n  \r\n2022-06-03T15:27:40,187 [client.ClientServiceHandler] ERROR: ThriftSecurityException\r\norg.apache.accumulo.core.clientImpl.thrift.ThriftSecurityException: null\r\n        at org.apache.accumulo.server.security.SecurityOperation.authenticate(SecurityOperation.java:207) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.security.AuditedSecurityOperation.authenticate(AuditedSecurityOperation.java:730) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.security.SecurityOperation.authenticateUser(SecurityOperation.java:219) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.client.ClientServiceHandler.authenticate(ClientServiceHandler.java:153) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.server.client.ClientServiceHandler.executeAdminOperation(ClientServiceHandler.java:473) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\r\n        at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\r\n        at org.apache.accumulo.core.trace.TraceUtil.lambda$wrapService$0(TraceUtil.java:206) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at com.sun.proxy.$Proxy36.executeAdminOperation(Unknown Source) ~[?:?]\r\n        at org.apache.accumulo.core.clientImpl.thrift.ClientService$Processor$executeAdminOperation.getResult(ClientService.java:3134) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.accumulo.core.clientImpl.thrift.ClientService$Processor$executeAdminOperation.getResult(ClientService.java:3113) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.ProcessFunction.process(ProcessFunction.java:38) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:38) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.thrift.TMultiplexedProcessor.process(TMultiplexedProcessor.java:138) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.accumulo.server.rpc.TimedProcessor.process(TimedProcessor.java:54) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.server.AbstractNonblockingServer$FrameBuffer.invoke(AbstractNonblockingServer.java:524) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.accumulo.server.rpc.CustomNonBlockingServer$CustomFrameBuffer.invoke(CustomNonBlockingServer.java:129) ~[accumulo-server-base-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at org.apache.thrift.server.Invocation.run(Invocation.java:18) ~[libthrift-0.16.0.jar:0.16.0]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\r\n        at java.lang.Thread.run(Thread.java:834) ~[?:?]\r\n\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146087086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146100474","html_url":"https://github.com/apache/accumulo/issues/2322#issuecomment-1146100474","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2322","id":1146100474,"node_id":"IC_kwDOACaFSM5EUBr6","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T15:55:52Z","updated_at":"2022-06-03T15:55:52Z","author_association":"MEMBER","body":"In my testing the TabletDeletedException is being handled correctly.  Thinking it is something else, closing this ticket","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146100474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146313851","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1146313851","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1146313851,"node_id":"IC_kwDOACaFSM5EU1x7","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T19:56:56Z","updated_at":"2022-06-03T19:56:56Z","author_association":"CONTRIBUTOR","body":"In my attempts to try and create a test for #2754 I added this test to `ShellServerIT`:\r\n<pre>\r\n@Test\r\n  public void testFateCommandWithSlowCompaction() throws Exception {\r\n    final String table = getUniqueNames(1)[0];\r\n\r\n    // compact\r\n    ts.exec(\"createtable \" + table);\r\n\r\n    String tableId = getTableId(table);\r\n\r\n    // make two files\r\n    ts.exec(\"insert a b c d\");\r\n    ts.exec(\"flush -w\");\r\n    ts.exec(\"insert x y z v\");\r\n    ts.exec(\"flush -w\");\r\n    int oldCount = countFiles(tableId);\r\n\r\n    // setup SlowIterator to sleep for 10 seconds\r\n    ts.exec(\"config -t \" + table + \" -s table.iterator.majc.slow=1,org.apache.accumulo.test.functional.SlowIterator\");\r\n    ts.exec(\"config -t \" + table + \" -s table.iterator.majc.slow.opt.sleepTime=10000\");\r\n\r\n    // merge two files into one\r\n    ts.exec(\"compact -t \" + table);\r\n\r\n    // compaction should still be running\r\n    //assertFalse(countFiles(tableId) < oldCount);\r\n\r\n    log.info(\"Calling fate print for table = {}\", table);\r\n    ts.exec(\"fate -print\", true, \"txid:\", true);\r\n\r\n    ts.exec(\"deletetable -f \" + table);\r\n  }\r\n</pre>\r\n\r\nThis test will usually fail on main but on this branch it passes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146313851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146319958","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1146319958","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1146319958,"node_id":"IC_kwDOACaFSM5EU3RW","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-03T20:05:37Z","updated_at":"2022-06-03T20:05:37Z","author_association":"CONTRIBUTOR","body":"I wrote a test to try and recreate this bug but it fails for for different reasons than on a live cluster:\r\n<pre>\r\n2022-06-03T16:02:49,542 [shell.ShellServerIT] INFO : Calling fate print for table = ShellServerIT_testFateCommandWithSlowCompaction0\r\n2022-06-03T16:02:49,542 [Shell.audit] INFO : root@miniInstance ShellServerIT_testFateCommandWithSlowCompaction0> fate -print\r\n2022-06-03T16:02:49,544 [shell.Shell] ERROR: java.lang.IllegalArgumentException: Failed to load Accumulo configuration 'accumulo.properties' from classpath\r\n</pre>\r\nI copy and pasted the test [here](https://github.com/apache/accumulo/pull/2215#issuecomment-1146313851).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146319958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146694254","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1146694254","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1146694254,"node_id":"IC_kwDOACaFSM5EWSpu","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-04T22:22:12Z","updated_at":"2022-06-04T22:22:12Z","author_association":"CONTRIBUTOR","body":"I believe that additional test from @milleruntime fails on current main because the fate command wants access to the accumulo.properties file.  When mini sets up, it uses the accumulo.properties in a mini /conf directory and the properties file is not on the classpath.  Normally the shell IT test is using accumulo-client.properties so not having the accumulo.properties file is **\"normal\"**.  \r\n\r\nThe changes in this branch remove the need for accumulo.properties - and that's why it passes here, but fails on current (7f42c7d72a) main.  The test will pass (with other logic changes) on main if the test is modified so that accumulo.properties is set for the FATE command with:\r\n```\r\n    System.setProperty(\"accumulo.properties\",  \"file://\" + getCluster().getConfig().getAccumuloPropsFile().getCanonicalPath());\r\n```\r\n\r\nI added the test to #2755, and with the logic change, the new test will pass. Once this PR is merged, the test should be modified so that only the client properties file is necessary to pass\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1146694254/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1147458786","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1147458786","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1147458786,"node_id":"IC_kwDOACaFSM5EZNTi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T13:39:13Z","updated_at":"2022-06-06T13:39:13Z","author_association":"CONTRIBUTOR","body":"I can't get the ContinuousVerify M/R job in https://github.com/dlmarion/accumulo-testing/tree/ci-verify-consistency-level to use the ScanServer. I have modifed the AccumuloInputFormat configuration several times, I must be missing something. The CI scan, walk, and batch walk do use the ScanServer. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1147458786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1147544766","html_url":"https://github.com/apache/accumulo/pull/2215#issuecomment-1147544766","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2215","id":1147544766,"node_id":"IC_kwDOACaFSM5EZiS-","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T14:59:50Z","updated_at":"2022-06-06T14:59:50Z","author_association":"MEMBER","body":"> Well, I think the permissions issue should be addressed before this is merged.\r\n\r\nAttempted to address this in [bf2b32b](https://github.com/apache/accumulo/pull/2215/commits/bf2b32b920a15e25610784323688b8ba83aab4e3)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1147544766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1148507453","html_url":"https://github.com/apache/accumulo/pull/2756#issuecomment-1148507453","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2756","id":1148507453,"node_id":"IC_kwDOACaFSM5EdNU9","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T10:52:13Z","updated_at":"2022-06-07T10:52:13Z","author_association":"CONTRIBUTOR","body":"Thanks @ctubbsii !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1148507453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1148520608","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1148520608","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1148520608,"node_id":"IC_kwDOACaFSM5EdQig","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T11:07:07Z","updated_at":"2022-06-07T11:07:07Z","author_association":"CONTRIBUTOR","body":"I opened #2757 for the M/R issue above.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1148520608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1149136177","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1149136177","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1149136177,"node_id":"IC_kwDOACaFSM5Efm0x","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T20:30:55Z","updated_at":"2022-06-07T20:30:55Z","author_association":"CONTRIBUTOR","body":"@dlmarion made a few suggestions about the testing.   I updated and the report and ran some new tests based on that.  The new tests results are in the report. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1149136177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1149849147","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1149849147","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1149849147,"node_id":"IC_kwDOACaFSM5EiU47","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T12:27:14Z","updated_at":"2022-06-08T12:27:14Z","author_association":"CONTRIBUTOR","body":"Continuous Ingest on a local Uno cluster for ~15 minutes was successful.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1149849147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1149969820","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1149969820","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1149969820,"node_id":"IC_kwDOACaFSM5EiyWc","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T14:09:14Z","updated_at":"2022-06-08T14:09:14Z","author_association":"CONTRIBUTOR","body":"Summarizing the remaining unresolved issues from the conversation above:\r\n\r\n1. There is disagreement on the naming of the API methods.\r\n2. There is concern about merging this into 2.1 due to the complexity of this change, on top of the other complex changes already in 2.1, that it will require too much time to test that it will delay the release of 2.1. \r\n\r\nDid I capture those correctly? Did I miss anything?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1149969820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150104519","html_url":"https://github.com/apache/accumulo/pull/2761#issuecomment-1150104519","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2761","id":1150104519,"node_id":"IC_kwDOACaFSM5EjTPH","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T15:58:38Z","updated_at":"2022-06-08T15:58:38Z","author_association":"CONTRIBUTOR","body":"Why are you suggesting this as a change to Accumulo?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150104519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150107974","html_url":"https://github.com/apache/accumulo/pull/2761#issuecomment-1150107974","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2761","id":1150107974,"node_id":"IC_kwDOACaFSM5EjUFG","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T16:01:54Z","updated_at":"2022-06-08T16:01:54Z","author_association":"CONTRIBUTOR","body":"We do not use circleci ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150107974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150203011","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1150203011","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1150203011,"node_id":"IC_kwDOACaFSM5EjrSD","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T17:35:06Z","updated_at":"2022-06-08T17:35:06Z","author_association":"CONTRIBUTOR","body":"Ran all the ITs on Github. Saw the following ITs fail, but then passed locally:\r\n- CompactionIT\r\n- BatchScanSplitIT\r\n- PermissionsIT\r\n- NewTableConfigurationIT\r\n- SummaryIT","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150203011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150205282","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1150205282","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1150205282,"node_id":"IC_kwDOACaFSM5Ejr1i","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T17:37:14Z","updated_at":"2022-06-08T17:37:14Z","author_association":"CONTRIBUTOR","body":"I think this PR is GTG. @dlmarion I did some renaming and clean up in [86d3fec](https://github.com/apache/accumulo/pull/2750/commits/86d3fec840ee1a405f26c59e41de95be1e691664) if you wanted to take another look before I merge.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150205282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150233321","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1150233321","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1150233321,"node_id":"IC_kwDOACaFSM5Ejyrp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T18:08:27Z","updated_at":"2022-06-08T18:08:27Z","author_association":"CONTRIBUTOR","body":"LGTM, thanks for the changes","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1150233321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151167566","html_url":"https://github.com/apache/accumulo/pull/2197#issuecomment-1151167566","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2197","id":1151167566,"node_id":"IC_kwDOACaFSM5EnWxO","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T14:07:55Z","updated_at":"2022-06-09T14:07:55Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I re-base'd my per-table crypto changes again with latest for 2.1. Did you want to take another look at this PR before I rewrite the tests? There are a lot of changes but I think the design is solid. Here is a summary of the big updates for this feature:\r\n\r\n1. New `CryptoFactoryLoader` class. This class replaces `CryptoServiceFactory`. It can create a new instance of CryptoFactory and has convenience methods to get the CryptoService directly.\r\n- `public static CryptoFactory newInstance(AccumuloConfiguration conf, ClassloaderType ct)`\r\n- `public static CryptoFactory none() `\r\n- `public static CryptoService getCryptoJavaTable(AccumuloConfiguration conf)` (Used by server code)\r\n- `public static CryptoService getCryptoFromTableProps(InstanceOperations instOps, Map<String,String> tableProps, TableId TableId)` (Used by client code)\r\n\r\n2. New `CryptoFactory` interface. Single method: `  CryptoService getService(CryptoEnvironment environment, Map<String,String> properties)`\r\n- Create 2 basic factory implementations: `PerTableCryptoFactory` and `NoCryptoFactory`\r\n\r\n3. Modifications to the current Crypto.\r\n- Drop the init method from `CryptoService`\r\n- Add TableId to `CryptoEnvironment`\r\n\r\n4. Disable Crypto in the `RFile` API. This is a stop gap until we figure out how to support crypto in the RFile API\r\n\r\n\r\nClasses with major changes:\r\n[Property](https://github.com/apache/accumulo/pull/2197/files#diff-6c2d215eebb1a6157a2b7d95f49496834bd91a150c8aedd97cca6b01aedc05cb)\r\n[CryptoFactoryLoader](https://github.com/apache/accumulo/pull/2197/files#diff-6bc04f7fde1143ced2a2ef3097baf6429467690b93557e44c0c9c2542b6d32e9)\r\n[PerTableCryptoFactory](https://github.com/apache/accumulo/pull/2197/files#diff-8a243847ef39a9dedc8daceaa1629aca85a4a550b2ff20ec3ec249c0bb917625)\r\n[CryptoFactory interface](https://github.com/apache/accumulo/pull/2197/files#diff-3ab2b08082155f62ed88ac1bb83d9456ece437b562425e255bc76170f3004e7f)\r\n[CryptoEnvironment interface](https://github.com/apache/accumulo/pull/2197/files#diff-e9b7d2e72ebd5675e60efb4646ae6cbe868199c557225ec18db0392d2368b300)\r\n[TableConfiguration](https://github.com/apache/accumulo/pull/2197/files#diff-c8804c4993551d0fc6f293963d664d4e35151f7639955f4c7e2b3a7bf2a694b1)\r\n[ServerContext](https://github.com/apache/accumulo/pull/2197/files#diff-44b9172cc16cdb9b671926c7aed1b0d57372715bc181dd79ef0be76828b708f3)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151167566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151214907","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1151214907","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1151214907,"node_id":"IC_kwDOACaFSM5EniU7","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T14:45:35Z","updated_at":"2022-06-09T14:45:35Z","author_association":"MEMBER","body":"After this change, 4 tests are failing, and total build time increased to 5 hours 57 minutes or 5 hours 23 minutes (in 2 successive runs) from 4 hours 17 minutes (last successful run on the previous commit):\r\n```\r\n    CloneTestIT.testCloneWithSplits after 2 min 11 sec\r\n    DeleteRowsIT.testManyRows after 5 min 11 sec\r\n    DeleteRowsSplitIT.run after 4 min 12 sec\r\n    ShellServerIT.deleterows after 1 min 0\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151214907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151264444","html_url":"https://github.com/apache/accumulo/pull/2750#issuecomment-1151264444","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2750","id":1151264444,"node_id":"IC_kwDOACaFSM5Enua8","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T15:22:55Z","updated_at":"2022-06-09T15:22:55Z","author_association":"CONTRIBUTOR","body":"> After this change, 4 tests are failing, and total build time increased to 5 hours 57 minutes or 5 hours 23 minutes (in 2 successive runs) from 4 hours 17 minutes (last successful run on the previous commit):\r\n> \r\n> ```\r\n>     CloneTestIT.testCloneWithSplits after 2 min 11 sec\r\n>     DeleteRowsIT.testManyRows after 5 min 11 sec\r\n>     DeleteRowsSplitIT.run after 4 min 12 sec\r\n>     ShellServerIT.deleterows after 1 min 0\r\n> ```\r\n\r\nI think they are all failing for the same reason in `TabletGroupWatcher` and the time increase is due to the timeouts. I am looking at a fix now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151264444/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151286437","html_url":"https://github.com/apache/accumulo/pull/2197#issuecomment-1151286437","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2197","id":1151286437,"node_id":"IC_kwDOACaFSM5Enzyl","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T15:33:37Z","updated_at":"2022-06-09T15:33:37Z","author_association":"MEMBER","body":"> @ctubbsii I re-base'd my per-table crypto changes again with latest for 2.1. Did you want to take another look at this PR before I rewrite the tests?\r\n\r\nI do want to take another look, but please don't let me hold you up in making progress.\r\n\r\n> There are a lot of changes but I think the design is solid. Here is a summary of the big updates for this feature:\r\n> \r\n> 1. New `CryptoFactoryLoader` class. This class replaces `CryptoServiceFactory`. It can create a new instance of CryptoFactory and has convenience methods to get the CryptoService directly.\r\n\r\nMy understanding is that this is just an internal utility class to load the configured SPI CryptoFactory instance that is intended to be a singleton for the process. Is that correct?\r\n\r\n> 2. New `CryptoFactory` interface. Single method: `  CryptoService getService(CryptoEnvironment environment, Map<String,String> properties)`\r\n\r\nI think I prefer the name CryptoServiceFactory, since it builds CryptoService objects and not Crypto objects. Another name could be something like FileCryptoModule to make it more clear that it's a comprehensive \"black box\" that is responsible for file encryption/decryption and to avoid the \"Factory\" terminology.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151286437/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151331785","html_url":"https://github.com/apache/accumulo/issues/2763#issuecomment-1151331785","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2763","id":1151331785,"node_id":"IC_kwDOACaFSM5En-3J","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T16:10:22Z","updated_at":"2022-06-09T16:10:22Z","author_association":"CONTRIBUTOR","body":"Other ITs related that are also failing: DeleteRowsSplitIT, DeleteRowsIT, and CloneTestIT","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151331785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151357227","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1151357227","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1151357227,"node_id":"IC_kwDOACaFSM5EoFEr","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T16:37:45Z","updated_at":"2022-06-09T16:37:45Z","author_association":"CONTRIBUTOR","body":"I started up a 2 node cluster from commit `fcd2738` and my accumulo-testing [branch ](https://github.com/dlmarion/accumulo-testing/tree/ci-verify-consistency-level) which includes changes to set the consistency level for the continuous walker, batch walker, scanner, and verify applications. I loaded data for an hour using `cingest ingest`, then used `cingest verify` jobs to test my changes in commits abcd8a7, 406df63, and c7dd148. The first job ran with consistency level `IMMEDIATE` (which uses the tserver) and the second job ran with `EVENTUAL` (which uses the sserver). I confirmed that the scans during the second job showed up on the Active Scans page in the monitor and confirmed that the metrics worked using Grafana. In the Grafana screenshot below you can see the end of the ingest process happening and then the two verify jobs, first one using the tserver and the second one using the sserver.\r\n\r\n![Screenshot at 2022-06-09 12-27-22](https://user-images.githubusercontent.com/567911/172898698-a2c32a38-a731-499b-8ff5-a61256506e19.png)\r\n\r\n\r\nI should also note that the verify jobs both came back with the same results.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151357227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151453011","html_url":"https://github.com/apache/accumulo/issues/2673#issuecomment-1151453011","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2673","id":1151453011,"node_id":"IC_kwDOACaFSM5EocdT","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T18:22:01Z","updated_at":"2022-06-09T18:22:01Z","author_association":"MEMBER","body":"Closed via #2720","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151453011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151479584","html_url":"https://github.com/apache/accumulo/issues/2673#issuecomment-1151479584","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2673","id":1151479584,"node_id":"IC_kwDOACaFSM5Eoi8g","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T18:47:07Z","updated_at":"2022-06-09T18:47:07Z","author_association":"MEMBER","body":"> Closed via #2720\r\n\r\nTechnically, this is not enforced. But, I'm also fine with closing this as \"won't fix\".","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151479584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151481840","html_url":"https://github.com/apache/accumulo/pull/2764#issuecomment-1151481840","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2764","id":1151481840,"node_id":"IC_kwDOACaFSM5Eojfw","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T18:49:45Z","updated_at":"2022-06-09T18:49:45Z","author_association":"CONTRIBUTOR","body":"The ITs that were failing are all passing with this fix (CloneTestIT,DeleteRowsSplitIT,DeleteRowsIT,ShellServerIT)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151481840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151813019","html_url":"https://github.com/apache/accumulo/pull/2764#issuecomment-1151813019","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2764","id":1151813019,"node_id":"IC_kwDOACaFSM5Ep0Wb","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T01:36:00Z","updated_at":"2022-06-10T01:36:00Z","author_association":"CONTRIBUTOR","body":"I merged this into a local branch that I'm working on.  With these changes, sunny tests pass.  I kicked off a set of full ITs and it not looking as good.  4 of the tasks failed, and 4 remaining are just spinning.  Of the the ones that failed (so far) \r\n\r\nThree of them failed with errors similar to:\r\n\r\n```\r\nMultiTableInputFormatIT>AccumuloClusterHarness.setupCluster:167 » IllegalState Unable to find instance id from zookeeper\r\n```\r\n\r\nAnd one timed out:\r\n\r\n```\r\nShellServerIT.deleterows execution timed out after 60000 ms\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1151813019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152237400","html_url":"https://github.com/apache/accumulo/pull/2665#issuecomment-1152237400","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2665","id":1152237400,"node_id":"IC_kwDOACaFSM5Erb9Y","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T10:55:23Z","updated_at":"2022-06-10T10:55:23Z","author_association":"CONTRIBUTOR","body":"I kicked off a full build with ITs and the only ITs that failed are the same ones that are currently failing in `main`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152237400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152243110","html_url":"https://github.com/apache/accumulo/pull/2765#issuecomment-1152243110","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2765","id":1152243110,"node_id":"IC_kwDOACaFSM5ErdWm","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T11:03:18Z","updated_at":"2022-06-10T11:03:18Z","author_association":"CONTRIBUTOR","body":"> I broke the scans and compactions columns up into running and queued instead of having the queued compactions in the same column within the parenthesis.\r\n\r\nThat does look easier to read but I am worried how wide it makes the table. What was the reasoning for breaking them out into new columns? Maybe we could put the scan and compaction numbers in a separate table?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152243110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152245073","html_url":"https://github.com/apache/accumulo/pull/2764#issuecomment-1152245073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2764","id":1152245073,"node_id":"IC_kwDOACaFSM5Erd1R","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T11:05:48Z","updated_at":"2022-06-10T11:05:48Z","author_association":"CONTRIBUTOR","body":"> ShellServerIT.deleterows execution timed out after 60000 ms\r\n\r\nThis was the test that was failing prior to this fix. Do you still have the logs?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152245073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152258235","html_url":"https://github.com/apache/accumulo/pull/2764#issuecomment-1152258235","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2764","id":1152258235,"node_id":"IC_kwDOACaFSM5ErhC7","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T11:23:51Z","updated_at":"2022-06-10T11:23:51Z","author_association":"CONTRIBUTOR","body":"Since you guys both approved this fix, I am going to merge. But I have a follow up with more GC clean up on the way...","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152258235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152262408","html_url":"https://github.com/apache/accumulo/issues/2696#issuecomment-1152262408","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2696","id":1152262408,"node_id":"IC_kwDOACaFSM5EriEI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T11:29:34Z","updated_at":"2022-06-10T11:29:34Z","author_association":"CONTRIBUTOR","body":"@nosewings - I'd like to see the iterative solution if that's ok. I'm going to drop a few comments on #2752, but honestly I'm not familiar with the code and I'm not familiar with the concurrent objects being used. The lack of comments in the original implementation doesn't help the situation. Hopefully @keith-turner  can look at this, I think he will understand it better.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152262408/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152306210","html_url":"https://github.com/apache/accumulo/issues/2747#issuecomment-1152306210","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2747","id":1152306210,"node_id":"IC_kwDOACaFSM5Erswi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T12:27:44Z","updated_at":"2022-06-10T12:27:44Z","author_association":"CONTRIBUTOR","body":"The test added in #2766 produces the same error when force is `true` and the code change in ManagerClientServiceHandler is not applied. With the fix, there is no error on the client side when the TabletServer does not exist. The manager log contains a message that the server is not running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152306210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152331271","html_url":"https://github.com/apache/accumulo/issues/2696#issuecomment-1152331271","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2696","id":1152331271,"node_id":"IC_kwDOACaFSM5Ery4H","user":{"login":"nosewings","id":24929858,"node_id":"MDQ6VXNlcjI0OTI5ODU4","avatar_url":"https://avatars.githubusercontent.com/u/24929858?v=4","gravatar_id":"","url":"https://api.github.com/users/nosewings","html_url":"https://github.com/nosewings","followers_url":"https://api.github.com/users/nosewings/followers","following_url":"https://api.github.com/users/nosewings/following{/other_user}","gists_url":"https://api.github.com/users/nosewings/gists{/gist_id}","starred_url":"https://api.github.com/users/nosewings/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nosewings/subscriptions","organizations_url":"https://api.github.com/users/nosewings/orgs","repos_url":"https://api.github.com/users/nosewings/repos","events_url":"https://api.github.com/users/nosewings/events{/privacy}","received_events_url":"https://api.github.com/users/nosewings/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T12:57:30Z","updated_at":"2022-06-10T12:57:30Z","author_association":"CONTRIBUTOR","body":"@dlmarion Sure. The iterative solution is at nosewings/accumulo@cfc35ab.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152331271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152392453","html_url":"https://github.com/apache/accumulo/pull/2765#issuecomment-1152392453","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2765","id":1152392453,"node_id":"IC_kwDOACaFSM5EsB0F","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T13:58:34Z","updated_at":"2022-06-10T13:58:34Z","author_association":"MEMBER","body":"> That does look easier to read but I am worried how wide it makes the table. \r\n\r\nIt makes the table only slightly wider and the table is still able to shrink to fit the window like before:\r\n![image](https://user-images.githubusercontent.com/47725857/173078866-5edf7551-d4de-43ab-9a89-410832e60083.png)\r\n\r\n\r\n> What was the reasoning for breaking them out into new columns? Maybe we could put the scan and compaction numbers in a separate table?\r\n\r\nIt seemed more intuitive to have them in separate, labeled columns since there is nothing that says what the two numbers in the single columns mean.\r\n\r\n> Maybe we could put the scan and compaction numbers in a separate table?\r\n\r\nThat seems like it could be a good option. Do you think we should do that?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152392453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152399680","html_url":"https://github.com/apache/accumulo/pull/2767#issuecomment-1152399680","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2767","id":1152399680,"node_id":"IC_kwDOACaFSM5EsDlA","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T14:06:04Z","updated_at":"2022-06-10T14:06:04Z","author_association":"CONTRIBUTOR","body":"The recently failing ITs are still passing: CloneTestIT,DeleteRowsSplitIT,DeleteRowsIT,ShellServerIT","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152399680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152404095","html_url":"https://github.com/apache/accumulo/pull/2767#issuecomment-1152404095","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2767","id":1152404095,"node_id":"IC_kwDOACaFSM5EsEp_","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-10T14:10:23Z","updated_at":"2022-06-10T14:10:23Z","author_association":"CONTRIBUTOR","body":"@keith-turner take a look at these changes. I think they improve on the work you did with the All volume delete markers in https://github.com/apache/accumulo/pull/1389","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1152404095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]