[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538007129","html_url":"https://github.com/apache/iceberg/pull/513#issuecomment-538007129","issue_url":"https://api.github.com/repos/apache/iceberg/issues/513","id":538007129,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAwNzEyOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T15:54:45Z","updated_at":"2019-10-03T15:54:45Z","author_association":"CONTRIBUTOR","body":"@Parth-Brahmbhatt could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538007129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538017850","html_url":"https://github.com/apache/iceberg/pull/514#issuecomment-538017850","issue_url":"https://api.github.com/repos/apache/iceberg/issues/514","id":538017850,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAxNzg1MA==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T16:20:50Z","updated_at":"2019-10-03T16:20:50Z","author_association":"CONTRIBUTOR","body":"cc @rdblue @aokolnychyi @fbocse @prodeezy @rominparekh","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538017850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538035616","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-538035616","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":538035616,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAzNTYxNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T17:05:11Z","updated_at":"2019-10-03T17:24:07Z","author_association":"CONTRIBUTOR","body":"> Please note that both have the same schema.\r\n\r\nI think the problem is that these do not have the same schema. If the Parquet schema does not have field IDs, then the IDs are assigned using the fallback logic. The fallback logic matches columns by position, not by name.\r\n\r\nIf you want to read this file, you need to create a name-to-id schema mapping. Those were added in #338. You'd also need to update the fallback strategy in Parquet to use the schema mapping to assign IDs when one is present, instead of the default position-based approach.\r\n\r\n@rdsr, FYI","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538035616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538036232","html_url":"https://github.com/apache/iceberg/pull/514#issuecomment-538036232","issue_url":"https://api.github.com/repos/apache/iceberg/issues/514","id":538036232,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODAzNjIzMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T17:06:41Z","updated_at":"2019-10-03T17:24:37Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @andrei-ionescu!\r\n\r\nUnfortunately, I think the approach here is incorrect. I think the problem is that the fields are mapped incorrectly to the Iceberg schema. Iceberg uses position by default, not names. We haven't yet added name mapping support to Parquet (it is in progress for Avro), so if you'd like to work on that it would be great!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538036232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538045553","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-538045553","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":538045553,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODA0NTU1Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T17:30:49Z","updated_at":"2019-10-03T17:30:49Z","author_association":"CONTRIBUTOR","body":"Sorry, I was wrong about that in the comment above. Since this is validating the write schema, the Parquet schema handling has nothing to do with it. I made an assumption because Parquet was mentioned in the summary. I'll take a closer look at this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538045553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538101847","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-538101847","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":538101847,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODEwMTg0Nw==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T19:53:32Z","updated_at":"2019-10-03T19:53:32Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538101847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538155832","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-538155832","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":538155832,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODE1NTgzMg==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-03T22:38:07Z","updated_at":"2019-10-03T22:38:07Z","author_association":"CONTRIBUTOR","body":"@rdblue can you please check this one, thanks !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538155832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538175051","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538175051","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538175051,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODE3NTA1MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T00:05:35Z","updated_at":"2019-10-04T00:05:35Z","author_association":"CONTRIBUTOR","body":"Thanks @rdsr! I think this is about ready. Just a few things to fix, like map keys in `PruneColumns`.\r\n\r\nSorry it took me so long to complete a review round! I kept getting pulled away mid-review.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538175051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538191265","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538191265","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538191265,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODE5MTI2NQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T01:25:06Z","updated_at":"2019-10-04T01:25:06Z","author_association":"CONTRIBUTOR","body":"No problem. Thanks for taking a look at it @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538191265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538440181","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538440181","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538440181,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ0MDE4MQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T15:14:17Z","updated_at":"2019-10-04T21:52:48Z","author_association":"CONTRIBUTOR","body":"@rdblue,  I've addressed some of your comments. For map keys, as I have mentioned above I cannot use `keyValue` schema as a complex key could have newly assigned ids.\r\n\r\nI've moved the 'id' determining methods to AvroSchemaUtil as u suggested.\r\n\r\nI was also thinking whether it makes sense to initialize nameMapping with expectedSchema, if there's no nameMapping specified, under `ProjectionDatumReader` .  This could help us read old Avro data for tables which do not have external mapping specified. \r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538440181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538459293","html_url":"https://github.com/apache/iceberg/pull/512#issuecomment-538459293","issue_url":"https://api.github.com/repos/apache/iceberg/issues/512","id":538459293,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ1OTI5Mw==","user":{"login":"bryanck","id":5475421,"node_id":"MDQ6VXNlcjU0NzU0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/5475421?v=4","gravatar_id":"","url":"https://api.github.com/users/bryanck","html_url":"https://github.com/bryanck","followers_url":"https://api.github.com/users/bryanck/followers","following_url":"https://api.github.com/users/bryanck/following{/other_user}","gists_url":"https://api.github.com/users/bryanck/gists{/gist_id}","starred_url":"https://api.github.com/users/bryanck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryanck/subscriptions","organizations_url":"https://api.github.com/users/bryanck/orgs","repos_url":"https://api.github.com/users/bryanck/repos","events_url":"https://api.github.com/users/bryanck/events{/privacy}","received_events_url":"https://api.github.com/users/bryanck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T16:01:46Z","updated_at":"2019-10-04T16:01:46Z","author_association":"CONTRIBUTOR","body":"I feel this new functionality might be better suited to a separate class, something like ReplaceManifests? The current rewrite functionality and add/delete don't share much in common. If we did want to share some code, maybe create a base class.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538459293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538483943","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538483943","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538483943,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ4Mzk0Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T17:12:48Z","updated_at":"2019-10-04T17:12:48Z","author_association":"CONTRIBUTOR","body":"> I was also thinking whether it makes sense to initialize nameMapping with expectedSchema\r\n\r\nYeah, I've been thinking about this suggestion as well. It would prevent getting all null values when there is no mapping (if you only have optional columns). But, it's also performing an implicit mapping that may not be correct. It's also not going to be the same behavior as we use by default for Parquet tables, but I guess we could add a table property to choose which fallback method we use for Parquet (name-based vs position-based).\r\n\r\nIn general, I think I'm for it. It would be good to hear what @aokolnychyi and @edgarRd think about this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538483943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538485580","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538485580","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538485580,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ4NTU4MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T17:17:26Z","updated_at":"2019-10-04T17:17:26Z","author_association":"CONTRIBUTOR","body":"One more thing: for Parquet, we detect when there are no field IDs in the schema and use the fallback ID assignment strategy only in that case. If we do initialize the mapping with the projection schema, then we should do that for Avro as well. That way, we don't mix the cases where we need to fallback to name-based resolution and the case where at least some IDs are correctly assigned.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538485580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538488175","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538488175","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538488175,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ4ODE3NQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T17:25:09Z","updated_at":"2019-10-04T17:25:19Z","author_association":"CONTRIBUTOR","body":"> If we do initialize the mapping with the projection schema, then we should do that for Avro as well\r\n\r\nDo you mean Parquet ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538488175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538490329","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-538490329","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":538490329,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODQ5MDMyOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-04T17:31:18Z","updated_at":"2019-10-04T17:31:18Z","author_association":"CONTRIBUTOR","body":"No, by \"that\" I meant checking whether there are any field IDs before using fallback. We should not use a name mapping, especially one that is created automatically, if there are already IDs in the schema.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538490329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538794014","html_url":"https://github.com/apache/iceberg/pull/512#issuecomment-538794014","issue_url":"https://api.github.com/repos/apache/iceberg/issues/512","id":538794014,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODc5NDAxNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-06T22:22:56Z","updated_at":"2019-10-06T22:27:48Z","author_association":"CONTRIBUTOR","body":"@bryanck I also thought about having a separate class but I was a bit worried about adding a new method with a similar purpose to the `Table` API as it already contains quite some logic. The change did feel too big to me as we still reuse a couple of methods.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538794014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538796389","html_url":"https://github.com/apache/iceberg/pull/512#issuecomment-538796389","issue_url":"https://api.github.com/repos/apache/iceberg/issues/512","id":538796389,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODc5NjM4OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-06T22:54:45Z","updated_at":"2019-10-06T22:54:45Z","author_association":"CONTRIBUTOR","body":"@bryanck @rdblue thanks for the initial review! There are a couple of questions I want to clarify before updating the PR. Let me know what you think.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538796389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538797109","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-538797109","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":538797109,"node_id":"MDEyOklzc3VlQ29tbWVudDUzODc5NzEwOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-06T23:03:19Z","updated_at":"2019-10-06T23:03:19Z","author_association":"CONTRIBUTOR","body":"@rdblue related to expiring snapshots in general: does it make sense to have a table property with the minimum retention interval and validate it here?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/538797109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539033724","html_url":"https://github.com/apache/iceberg/pull/514#issuecomment-539033724","issue_url":"https://api.github.com/repos/apache/iceberg/issues/514","id":539033724,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTAzMzcyNA==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T14:17:13Z","updated_at":"2019-10-07T14:17:13Z","author_association":"CONTRIBUTOR","body":"@rdblue: By any chance, did you have a time looking into this and related #510?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539033724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539159647","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-539159647","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":539159647,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTE1OTY0Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-07T19:07:46Z","updated_at":"2019-10-07T19:07:46Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, I think it would make sense to default the settings passed to `expireOlderThan` and `retainLast` with table properties. Maybe `metadata.expiration.snapshot-age-days` and `metadata.expiration.retain-snapshot-count`?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539159647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539417240","html_url":"https://github.com/apache/iceberg/issues/358#issuecomment-539417240","issue_url":"https://api.github.com/repos/apache/iceberg/issues/358","id":539417240,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTQxNzI0MA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T08:50:56Z","updated_at":"2019-10-08T08:51:04Z","author_association":"CONTRIBUTOR","body":"Hi @rdblue , regarding \r\n> deletes apply to any data file with a sequence number less than or equal to the delete's sequence number\r\n\r\nI think the delete could not be applied to the data file with a sequence number equal to the delete's sequence number, am I correct?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539417240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539509099","html_url":"https://github.com/apache/iceberg/pull/517#issuecomment-539509099","issue_url":"https://api.github.com/repos/apache/iceberg/issues/517","id":539509099,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTUwOTA5OQ==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T13:18:31Z","updated_at":"2019-10-08T13:18:31Z","author_association":"CONTRIBUTOR","body":"@rdblue would you please help to review this small change at your most convenience?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539509099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539512277","html_url":"https://github.com/apache/iceberg/issues/501#issuecomment-539512277","issue_url":"https://api.github.com/repos/apache/iceberg/issues/501","id":539512277,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTUxMjI3Nw==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T13:26:00Z","updated_at":"2019-10-08T13:26:00Z","author_association":"CONTRIBUTOR","body":"Sure, will submit a PR to fix that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539512277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539535212","html_url":"https://github.com/apache/iceberg/issues/507#issuecomment-539535212","issue_url":"https://api.github.com/repos/apache/iceberg/issues/507","id":539535212,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTUzNTIxMg==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T14:17:05Z","updated_at":"2019-10-08T14:17:14Z","author_association":"CONTRIBUTOR","body":"We unfortunately depend on this currently but we will work on taking this dependency out. \r\ncc @fbocse @rominparekh ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539535212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539576746","html_url":"https://github.com/apache/iceberg/issues/358#issuecomment-539576746","issue_url":"https://api.github.com/repos/apache/iceberg/issues/358","id":539576746,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTU3Njc0Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T15:46:21Z","updated_at":"2019-10-08T15:46:21Z","author_association":"CONTRIBUTOR","body":"Yes, a delete should not be applied to a file with the same sequence number. An upsert would add a delete file and a data file with the same sequence number, one containing the row-level delete and one containing the upserted row content. Not applying deletes with the same sequence number ensures that the upsert doesn't delete itself.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539576746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539612977","html_url":"https://github.com/apache/iceberg/issues/507#issuecomment-539612977","issue_url":"https://api.github.com/repos/apache/iceberg/issues/507","id":539612977,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTYxMjk3Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T17:12:59Z","updated_at":"2019-10-08T17:12:59Z","author_association":"CONTRIBUTOR","body":"@prodeezy, we'll leave it in for now. Just let us know when you've moved away from it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539612977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539630157","html_url":"https://github.com/apache/iceberg/pull/513#issuecomment-539630157","issue_url":"https://api.github.com/repos/apache/iceberg/issues/513","id":539630157,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTYzMDE1Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T17:56:51Z","updated_at":"2019-10-08T17:56:51Z","author_association":"CONTRIBUTOR","body":"@rdblue, this PR is ready for another review round","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539630157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539633310","html_url":"https://github.com/apache/iceberg/pull/513#issuecomment-539633310","issue_url":"https://api.github.com/repos/apache/iceberg/issues/513","id":539633310,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTYzMzMxMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T18:04:54Z","updated_at":"2019-10-08T18:04:54Z","author_association":"CONTRIBUTOR","body":"+1 when tests pass.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539633310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539713125","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-539713125","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":539713125,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTcxMzEyNQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T21:31:52Z","updated_at":"2019-10-08T21:31:52Z","author_association":"CONTRIBUTOR","body":"@rdblue . Do you have any more comments for this PR?\r\nFor \"initializing nameMapping with expectedSchema\" we can probably address this as part of a separate PR","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539713125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539737143","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-539737143","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":539737143,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTczNzE0Mw==","user":{"login":"jun-ma-0","id":51969269,"node_id":"MDQ6VXNlcjUxOTY5MjY5","avatar_url":"https://avatars.githubusercontent.com/u/51969269?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-ma-0","html_url":"https://github.com/jun-ma-0","followers_url":"https://api.github.com/users/jun-ma-0/followers","following_url":"https://api.github.com/users/jun-ma-0/following{/other_user}","gists_url":"https://api.github.com/users/jun-ma-0/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-ma-0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-ma-0/subscriptions","organizations_url":"https://api.github.com/users/jun-ma-0/orgs","repos_url":"https://api.github.com/users/jun-ma-0/repos","events_url":"https://api.github.com/users/jun-ma-0/events{/privacy}","received_events_url":"https://api.github.com/users/jun-ma-0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T22:52:56Z","updated_at":"2019-10-08T22:53:58Z","author_association":"NONE","body":"@ppadma and I discussed offline. We have some thoughts and would like to get feedback from the community.\r\n1) Make path relative to manifest instead of table. This approach can make two use cases happen\r\na) avoid rebuilding metadata when migrating data from one table to another\r\nb) allow table data to exist in multiple locations. \r\n2) Backward compatibility. We can have a relative path flag in manifest or table level to control whether relative path should be used or not. Making it on manifest level may provide more flexibility. It should default to false to ensure backward compatibility.\r\n3) Forward compatibility. To ensure this, it seems both absolute path and relative path have to be populated. It's redundant and can be difficult to keep both fields consistent depending on how users are making use of the table. Can we avoid populating both fields? That may mean relative path will not be forward compatible.\r\n\r\ncc: @rdblue, @aokolnychyi, @prodeezy , @xabriel , @rominparekh ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539737143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539743286","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-539743286","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":539743286,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTc0MzI4Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T23:14:59Z","updated_at":"2019-10-08T23:14:59Z","author_association":"CONTRIBUTOR","body":"Sorry, I'm behind on reviews right now. I'll have a look in the next day or two.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539743286/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539777638","html_url":"https://github.com/apache/iceberg/issues/31#issuecomment-539777638","issue_url":"https://api.github.com/repos/apache/iceberg/issues/31","id":539777638,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTc3NzYzOA==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T01:30:12Z","updated_at":"2019-10-09T01:30:12Z","author_association":"CONTRIBUTOR","body":"#327 was merged. Should we close this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539777638/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539840666","html_url":"https://github.com/apache/iceberg/issues/522#issuecomment-539840666","issue_url":"https://api.github.com/repos/apache/iceberg/issues/522","id":539840666,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTg0MDY2Ng==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T05:38:00Z","updated_at":"2019-10-09T07:22:43Z","author_association":"CONTRIBUTOR","body":"@anjalinorwood  isn't this same as https://github.com/apache/incubator-iceberg/issues/311 ?  I can close that one if you think it's the same.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/539840666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540003192","html_url":"https://github.com/apache/iceberg/issues/504#issuecomment-540003192","issue_url":"https://api.github.com/repos/apache/iceberg/issues/504","id":540003192,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDAwMzE5Mg==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T13:34:34Z","updated_at":"2019-10-09T13:34:34Z","author_association":"COLLABORATOR","body":"Hi @aokolnychyi, \r\nOne question about inheriting the snpahostId, If the new manifests inherit the snapshot id, does that means the time travel feature broken since one snaphost may has different dataset at different time?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540003192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540067535","html_url":"https://github.com/apache/iceberg/issues/31#issuecomment-540067535","issue_url":"https://api.github.com/repos/apache/iceberg/issues/31","id":540067535,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDA2NzUzNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T15:59:17Z","updated_at":"2019-10-09T15:59:17Z","author_association":"CONTRIBUTOR","body":"Feel free to close issues like this. It's easy to reopen them if we need to.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540067535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540068617","html_url":"https://github.com/apache/iceberg/pull/523#issuecomment-540068617","issue_url":"https://api.github.com/repos/apache/iceberg/issues/523","id":540068617,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDA2ODYxNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T16:01:46Z","updated_at":"2019-10-09T16:01:46Z","author_association":"CONTRIBUTOR","body":"Looks good to me. Thanks for catching these!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540068617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540079827","html_url":"https://github.com/apache/iceberg/issues/31#issuecomment-540079827","issue_url":"https://api.github.com/repos/apache/iceberg/issues/31","id":540079827,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDA3OTgyNw==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T16:28:38Z","updated_at":"2019-10-09T16:28:38Z","author_association":"CONTRIBUTOR","body":"I only have comment privileges :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540079827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540083687","html_url":"https://github.com/apache/iceberg/issues/31#issuecomment-540083687","issue_url":"https://api.github.com/repos/apache/iceberg/issues/31","id":540083687,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDA4MzY4Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T16:37:55Z","updated_at":"2019-10-09T16:37:55Z","author_association":"CONTRIBUTOR","body":"I didn't realize that was locked down. Good to know, thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540083687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540124989","html_url":"https://github.com/apache/iceberg/pull/513#issuecomment-540124989","issue_url":"https://api.github.com/repos/apache/iceberg/issues/513","id":540124989,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDEyNDk4OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T18:18:18Z","updated_at":"2019-10-09T18:18:18Z","author_association":"CONTRIBUTOR","body":"@rdblue, I am going to merge this one if there are no objections.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540124989/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540125233","html_url":"https://github.com/apache/iceberg/pull/513#issuecomment-540125233","issue_url":"https://api.github.com/repos/apache/iceberg/issues/513","id":540125233,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDEyNTIzMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T18:18:59Z","updated_at":"2019-10-09T18:18:59Z","author_association":"CONTRIBUTOR","body":"Go for it!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540125233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540154278","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-540154278","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":540154278,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE1NDI3OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T19:31:04Z","updated_at":"2019-10-09T19:31:04Z","author_association":"CONTRIBUTOR","body":"It looks like this is trying to assign the same IDs for a spec each time it is created, but I think the approach should be to assign IDs to each field in a spec. The JSON serialization should be updated to parse an ID for each field. That's a good place to start, just adding the ability to track an ID for each partition field","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540154278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540155136","html_url":"https://github.com/apache/iceberg/pull/524#issuecomment-540155136","issue_url":"https://api.github.com/repos/apache/iceberg/issues/524","id":540155136,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE1NTEzNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T19:33:22Z","updated_at":"2019-10-09T19:33:22Z","author_association":"CONTRIBUTOR","body":"@manishmalhotrawork, can you describe what this change does?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540155136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540167159","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-540167159","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":540167159,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE2NzE1OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:03:36Z","updated_at":"2019-10-09T20:03:36Z","author_association":"CONTRIBUTOR","body":"@andrei-ionescu, sorry for the delay, I had fallen behind with reviews.\r\n\r\nI agree with your assessment of the problem. Spark is producing a schema that marks all fields nullable, which breaks because Iceberg validation is strict so that errors are caught at job planning time, rather than at runtime.\r\n\r\nWhile you could fix this with a UDF that returns a type is not nullable, that's not a great solution because people need to know to write that UDF and it's a big annoyance.\r\n\r\nI think it would be reasonable to have a write option that will relax this constraint. That could be an Spark option (`spark.sql.iceberg.disable-nullability-check`) or could be an option passed to the write in DataFrameWriter (`df.write.option(\"disable-nullability-check\", \"true\")`).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540167159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540168081","html_url":"https://github.com/apache/iceberg/pull/514#issuecomment-540168081","issue_url":"https://api.github.com/repos/apache/iceberg/issues/514","id":540168081,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE2ODA4MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:05:30Z","updated_at":"2019-10-09T20:05:30Z","author_association":"CONTRIBUTOR","body":"This looks like a great start, but I think this should be controlled by an option (possibly a table option and a write option) that ignores nullability in this check. If you want to be able to deploy it globally, then we may want to consider adding a Spark SQL option as well, so you can set it in your cluster environment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540168081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540173189","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-540173189","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":540173189,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE3MzE4OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:16:55Z","updated_at":"2019-10-09T20:16:55Z","author_association":"CONTRIBUTOR","body":"I agree with the approach of making relative paths optional. If a path is a full path, then use it. But if it is a relative path, then add some prefix.\r\n\r\nI'm not sure that we need forward compatibility. We might want to make this an option that people can turn on with a table property. Then it is possible to opt into this behavior and we will maintain forward compatibility by default. We can also include it in a format v2. We are planning to do a format upgrade for row-level deletes, so we _could_ include a format change like this at the same time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540173189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540173778","html_url":"https://github.com/apache/iceberg/issues/156#issuecomment-540173778","issue_url":"https://api.github.com/repos/apache/iceberg/issues/156","id":540173778,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE3Mzc3OA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:18:11Z","updated_at":"2019-10-09T20:18:11Z","author_association":"CONTRIBUTOR","body":"@rdsr @mccheah @rdblue I think we can close this one: https://github.com/apache/incubator-iceberg/blob/master/build.gradle#L167","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540173778/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540174195","html_url":"https://github.com/apache/iceberg/issues/33#issuecomment-540174195","issue_url":"https://api.github.com/repos/apache/iceberg/issues/33","id":540174195,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE3NDE5NQ==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:19:09Z","updated_at":"2019-10-09T20:19:09Z","author_association":"CONTRIBUTOR","body":"I can pick this up","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540174195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540175400","html_url":"https://github.com/apache/iceberg/issues/156#issuecomment-540175400","issue_url":"https://api.github.com/repos/apache/iceberg/issues/156","id":540175400,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE3NTQwMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:21:36Z","updated_at":"2019-10-09T20:21:36Z","author_association":"CONTRIBUTOR","body":"Fixed by #198.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540175400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540183270","html_url":"https://github.com/apache/iceberg/pull/527#issuecomment-540183270","issue_url":"https://api.github.com/repos/apache/iceberg/issues/527","id":540183270,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDE4MzI3MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T20:38:18Z","updated_at":"2019-10-09T20:38:18Z","author_association":"CONTRIBUTOR","body":"Thanks @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540183270/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540242391","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-540242391","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":540242391,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDI0MjM5MQ==","user":{"login":"ppadma","id":1904860,"node_id":"MDQ6VXNlcjE5MDQ4NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1904860?v=4","gravatar_id":"","url":"https://api.github.com/users/ppadma","html_url":"https://github.com/ppadma","followers_url":"https://api.github.com/users/ppadma/followers","following_url":"https://api.github.com/users/ppadma/following{/other_user}","gists_url":"https://api.github.com/users/ppadma/gists{/gist_id}","starred_url":"https://api.github.com/users/ppadma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppadma/subscriptions","organizations_url":"https://api.github.com/users/ppadma/orgs","repos_url":"https://api.github.com/users/ppadma/repos","events_url":"https://api.github.com/users/ppadma/events{/privacy}","received_events_url":"https://api.github.com/users/ppadma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-09T23:01:28Z","updated_at":"2019-10-09T23:01:28Z","author_association":"NONE","body":"@rdblue @jun-ma-0 We have a use case for some complex migration scenarios where table data could be in multiple locations. We are looking into adding manifests from an existing table in one location to a new table in a different location. For that to work, we really need to have relative paths per manifest, not table. So, what I am suggesting is to make this behavior opt-in at table level. But, each manifest should have a flag indicating whether the paths are relative or not and if relative, we should have a basePath specified in the manifest.  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540242391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540296402","html_url":"https://github.com/apache/iceberg/pull/526#issuecomment-540296402","issue_url":"https://api.github.com/repos/apache/iceberg/issues/526","id":540296402,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDI5NjQwMg==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T02:10:34Z","updated_at":"2019-10-10T02:10:34Z","author_association":"CONTRIBUTOR","body":"Seems like some checkstyle errors are remaining. https://travis-ci.org/apache/incubator-iceberg/jobs/595801676","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540296402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540431741","html_url":"https://github.com/apache/iceberg/issues/457#issuecomment-540431741","issue_url":"https://api.github.com/repos/apache/iceberg/issues/457","id":540431741,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDQzMTc0MQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T07:26:06Z","updated_at":"2019-10-10T07:26:06Z","author_association":"COLLABORATOR","body":"Found more discussion in #510  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540431741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540549067","html_url":"https://github.com/apache/iceberg/pull/530#issuecomment-540549067","issue_url":"https://api.github.com/repos/apache/iceberg/issues/530","id":540549067,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDU0OTA2Nw==","user":{"login":"TGooch44","id":1591711,"node_id":"MDQ6VXNlcjE1OTE3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1591711?v=4","gravatar_id":"","url":"https://api.github.com/users/TGooch44","html_url":"https://github.com/TGooch44","followers_url":"https://api.github.com/users/TGooch44/followers","following_url":"https://api.github.com/users/TGooch44/following{/other_user}","gists_url":"https://api.github.com/users/TGooch44/gists{/gist_id}","starred_url":"https://api.github.com/users/TGooch44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TGooch44/subscriptions","organizations_url":"https://api.github.com/users/TGooch44/orgs","repos_url":"https://api.github.com/users/TGooch44/repos","events_url":"https://api.github.com/users/TGooch44/events{/privacy}","received_events_url":"https://api.github.com/users/TGooch44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T12:28:45Z","updated_at":"2019-10-10T12:28:45Z","author_association":"CONTRIBUTOR","body":"@rdblue @danielcweeks Can you take a look and see if this looks good?  If we can get this merged, I'll update the docs and push those today too.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540549067/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540643121","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-540643121","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":540643121,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY0MzEyMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T15:32:32Z","updated_at":"2019-10-10T15:32:32Z","author_association":"CONTRIBUTOR","body":"While onboarding some users, I realized that they sometimes struggle to find a timestamp they can use for expiration even though they know a finite number snapshots they want to keep. Metadata tables give us properly formatted timestamps but we expect a timestamp in millis in the API. So, users have to transform that and be sure not to make a mistake.\r\n\r\n@rdblue based on your suggestion, will the following help people who know only the number of snapshots they want to keep?\r\n\r\n```\r\ntable.expireSnapshots()\r\n    .expireOlderThan(System.currentTimeMillis())\r\n    .retainLast(10)\r\n    .commit()\r\n```\r\n\r\nI think it is mostly relevant while populating the table initially.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540643121/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540674402","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-540674402","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":540674402,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY3NDQwMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T16:47:52Z","updated_at":"2019-10-10T16:47:52Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, yes. The behavior I'm suggesting would keep the 10 latest snapshots, no matter what the expiration time is.\r\n\r\nFor these users, maybe we should also add methods to configure expiration using a time window, like what I was talking about for the table property. That way, users could call `expireAfterNumDays(3)`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540674402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540674743","html_url":"https://github.com/apache/iceberg/pull/512#issuecomment-540674743","issue_url":"https://api.github.com/repos/apache/iceberg/issues/512","id":540674743,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY3NDc0Mw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T16:48:31Z","updated_at":"2019-10-10T16:48:31Z","author_association":"CONTRIBUTOR","body":"@rdblue I am not sure changing the status of entries from `ADDED` to `EXISTING` while copying manifests would give us any benefits. Instead, I would leave that to the utilities that produce staged manifests. Later, we want to get rid of copying manifests at all.\r\n\r\nHere is how we read metadata per file:\r\n\r\n```\r\n    val manifestPathDS = spark.sparkContext.parallelize(manifestPaths, numPartitions.toInt).toDS()\r\n    manifestPathDS.flatMap { path =>\r\n      val reader = ManifestReader.read(io.newInputFile(path), specLookup)\r\n      val spec = reader.spec\r\n      try {\r\n        val filteredManifest = reader.select(ImmutableList.of(\"*\"))\r\n        filteredManifest.liveEntries.asScala.map { entry =>\r\n          val file = entry.file.copy()\r\n          val snapshotId = entry.snapshotId\r\n          (spec.specId, snapshotId, strategy.clusterBy(spec, file), file)\r\n        }\r\n      } finally {\r\n        reader.close()\r\n      }\r\n    }\r\n```\r\n\r\nWhile writing staged manifets, we call `writer.existing(file, snapshotId)` to have correct entry status.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540674743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540689319","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-540689319","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":540689319,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDY4OTMxOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T17:27:24Z","updated_at":"2019-10-10T17:27:24Z","author_association":"CONTRIBUTOR","body":"Not confident yet, but hour-based retention might make sense for some use cases. I'd vote for having two table properties: min retention interval in ms or at least in hours and min num of manifests to keep. As suggested, we can use those properties as defaults in `ExpireSnapshots`.\r\n\r\nBy subtracting a needed interval from `System.currentTimeMillis` we can always expire snapshots older than a given interval in hours/days and `retainLast` would be our safety check.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540689319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540710884","html_url":"https://github.com/apache/iceberg/pull/525#issuecomment-540710884","issue_url":"https://api.github.com/repos/apache/iceberg/issues/525","id":540710884,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDcxMDg4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T18:22:16Z","updated_at":"2019-10-10T18:22:16Z","author_association":"CONTRIBUTOR","body":"Thanks for working on these, @Fokko! Great to see you in this community as well as Avro and Parquet!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540710884/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540716243","html_url":"https://github.com/apache/iceberg/pull/535#issuecomment-540716243","issue_url":"https://api.github.com/repos/apache/iceberg/issues/535","id":540716243,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDcxNjI0Mw==","user":{"login":"mccheah","id":8975385,"node_id":"MDQ6VXNlcjg5NzUzODU=","avatar_url":"https://avatars.githubusercontent.com/u/8975385?v=4","gravatar_id":"","url":"https://api.github.com/users/mccheah","html_url":"https://github.com/mccheah","followers_url":"https://api.github.com/users/mccheah/followers","following_url":"https://api.github.com/users/mccheah/following{/other_user}","gists_url":"https://api.github.com/users/mccheah/gists{/gist_id}","starred_url":"https://api.github.com/users/mccheah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mccheah/subscriptions","organizations_url":"https://api.github.com/users/mccheah/orgs","repos_url":"https://api.github.com/users/mccheah/repos","events_url":"https://api.github.com/users/mccheah/events{/privacy}","received_events_url":"https://api.github.com/users/mccheah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T18:34:58Z","updated_at":"2019-10-10T18:34:58Z","author_association":"CONTRIBUTOR","body":"Attempt at fixing https://github.com/apache/incubator-iceberg/pull/533 versioning stuff","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540716243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540738554","html_url":"https://github.com/apache/iceberg/pull/535#issuecomment-540738554","issue_url":"https://api.github.com/repos/apache/iceberg/issues/535","id":540738554,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDczODU1NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T19:18:11Z","updated_at":"2019-10-10T19:18:11Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @mccheah!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540738554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540738857","html_url":"https://github.com/apache/iceberg/pull/533#issuecomment-540738857","issue_url":"https://api.github.com/repos/apache/iceberg/issues/533","id":540738857,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDczODg1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T19:18:47Z","updated_at":"2019-10-10T19:18:47Z","author_association":"CONTRIBUTOR","body":"Fixed by #535 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540738857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540815248","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-540815248","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":540815248,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDgxNTI0OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T21:51:46Z","updated_at":"2019-10-10T21:51:46Z","author_association":"CONTRIBUTOR","body":"I'm not sure about paths relative to manifest locations. That sounds complex to reason about and manage to me.\r\n\r\nWhat is the use case that is motivating paths relative to manifest locations? If the path is in a manifest, wouldn't you still need to rewrite the manifest to change paths? If it is relative to the manifest's location, how would you handle the default layout where you'd need a relative path with a parent directory (`../data/file.parquet`)? Seems like this is still going to require a lot of rewrites.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540815248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540821308","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-540821308","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":540821308,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDgyMTMwOA==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T22:13:23Z","updated_at":"2019-10-10T22:13:36Z","author_association":"CONTRIBUTOR","body":"@rdblue thanks.\r\n\r\n>It looks like this is trying to assign the same IDs for a spec each time it is created, but I think the approach should be to assign IDs to each field in a spec.\r\n\r\n`PartitionSpecParser.getLastPartitionField(JsonNode manifestSchemaJson)` is parsing the old PartitionSpec manifestSchema to find the max id from the field list. and this Id will be used as the init Id if new PartitionSpec is added. My understanding was to use the persistent partition field_id, and then use +1 of it for next partitionSpec. So that 2 partitionSpec will not have same partition_field Id.\r\n\r\n> The JSON serialization should be updated to parse an ID for each field. That's a good place to start, just adding the ability to track an ID for each partition field\r\n\r\nI believe you meant when Avro file is created using `AvroFileAppender`?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540821308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540824007","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-540824007","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":540824007,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDgyNDAwNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T22:23:16Z","updated_at":"2019-10-10T22:23:16Z","author_association":"CONTRIBUTOR","body":"> this Id will be used as the init Id if new PartitionSpec is added\r\n\r\n[This](https://github.com/apache/incubator-iceberg/pull/499/files#diff-ab407a336e6b0a36b713edd5a8498cd5R120) is assigning an ID. Those IDs should be statically assigned when the partition spec is created the first time and stored with the field information when it is serialized. The highest assigned ID in any spec should be kept in table-level metadata, like the lastColumnId property.\r\n\r\n> I believe you meant when Avro file is created using AvroFileAppender?\r\n\r\nNo; JSON serialization of a partition spec should encode the IDs. That gets put into file metadata, but the main thing is to add field IDs to partition fields.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540824007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540839338","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-540839338","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":540839338,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDgzOTMzOA==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T23:29:40Z","updated_at":"2019-10-10T23:29:40Z","author_association":"CONTRIBUTOR","body":">> this Id will be used as the init Id if new PartitionSpec is added\r\n\r\n> This is assigning an ID. Those IDs should be statically assigned when the partition spec is created the first time and stored with the field information when it is serialized. The highest assigned ID in any spec should be kept in table-level metadata, like the lastColumnId property.\r\n\r\nOk, I started that way, but currently `PartitionSpec` doesn't store the partitionFieldId ( 1000+) but stores the schema fieldId ( 1+) which is real schema id, It stores the partitionFieldId in the avro-schema of the file. Also the schema field Ids starts from 0, when converted from say from spark schema, or assigned manually when created the `NestedField` as the columns of the schema.\r\n\r\nSo, in case of partitionFieldId also, when its firstTime newMetadata is created we can assign, but next time it should be part of the PartitionSpec Object.   \r\n\r\njust to verify the partitionFieldIds, this is the manifest file schema ( partial till has partition field-id )\r\n\r\n```{\r\n  \"type\": \"record\",\r\n  \"name\": \"manifest_entry\",\r\n  \"fields\": [\r\n    {\r\n      \"name\": \"status\",\r\n      \"type\": \"int\",\r\n      \"field-id\": 0\r\n    },\r\n    {\r\n      \"name\": \"snapshot_id\",\r\n      \"type\": \"long\",\r\n      \"field-id\": 1\r\n    },\r\n    {\r\n      \"name\": \"data_file\",\r\n      \"type\": {\r\n        \"type\": \"record\",\r\n        \"name\": \"r2\",\r\n        \"fields\": [\r\n          {\r\n            \"name\": \"file_path\",\r\n            \"type\": \"string\",\r\n            \"field-id\": 100\r\n          },\r\n          {\r\n            \"name\": \"file_format\",\r\n            \"type\": \"string\",\r\n            \"field-id\": 101\r\n          },\r\n          {\r\n            \"name\": \"partition\",\r\n            \"type\": {\r\n              \"type\": \"record\",\r\n              \"name\": \"r102\",\r\n              \"fields\": [\r\n                **{\r\n                  \"name\": \"data_bucket\",\r\n                  \"type\": [\r\n                    \"null\",\r\n                    \"int\"\r\n                  ],\r\n                  \"default\": null,\r\n                  \"field-id\": 1000\r\n                }\r\n              ]\r\n            },**\r\n            \"field-id\": 102\r\n          }```\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540839338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540848300","html_url":"https://github.com/apache/iceberg/pull/467#issuecomment-540848300","issue_url":"https://api.github.com/repos/apache/iceberg/issues/467","id":540848300,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDg0ODMwMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T00:12:50Z","updated_at":"2019-10-11T00:12:50Z","author_association":"CONTRIBUTOR","body":"This looks reasonable to me. @aokolnychyi, any comments?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540848300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540848516","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-540848516","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":540848516,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDg0ODUxNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T00:14:06Z","updated_at":"2019-10-11T00:14:06Z","author_association":"CONTRIBUTOR","body":"Yeah, the first step is to add a partition field ID in addition to the existing source field ID.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540848516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540860262","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-540860262","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":540860262,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDg2MDI2Mg==","user":{"login":"yp-oss","id":15472649,"node_id":"MDQ6VXNlcjE1NDcyNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/15472649?v=4","gravatar_id":"","url":"https://api.github.com/users/yp-oss","html_url":"https://github.com/yp-oss","followers_url":"https://api.github.com/users/yp-oss/followers","following_url":"https://api.github.com/users/yp-oss/following{/other_user}","gists_url":"https://api.github.com/users/yp-oss/gists{/gist_id}","starred_url":"https://api.github.com/users/yp-oss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yp-oss/subscriptions","organizations_url":"https://api.github.com/users/yp-oss/orgs","repos_url":"https://api.github.com/users/yp-oss/repos","events_url":"https://api.github.com/users/yp-oss/events{/privacy}","received_events_url":"https://api.github.com/users/yp-oss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T01:19:37Z","updated_at":"2019-10-11T01:19:37Z","author_association":"NONE","body":"@rdblue @aokolnychyi what about the below approach?\r\n\r\nUse just one table property, may be \"metadata.expiration.snapshot-age-millis\".\r\n\r\n<pre><code>table.expireSnapshots()\r\n.commit()</code></pre>\r\n\r\nIf the table property is defined, the above call expires older snapshots, else do nothing. Use either `expireOlderThan` or `retainLast` methods to override the table property.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540860262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540988619","html_url":"https://github.com/apache/iceberg/pull/467#issuecomment-540988619","issue_url":"https://api.github.com/repos/apache/iceberg/issues/467","id":540988619,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDk4ODYxOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T09:23:17Z","updated_at":"2019-10-11T09:23:17Z","author_association":"CONTRIBUTOR","body":"I am +1. I think it is in line with #511 and will eliminate the need to build a spec lookup function in utilities.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/540988619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541108885","html_url":"https://github.com/apache/iceberg/pull/526#issuecomment-541108885","issue_url":"https://api.github.com/repos/apache/iceberg/issues/526","id":541108885,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTEwODg4NQ==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T15:21:54Z","updated_at":"2019-10-11T15:21:54Z","author_association":"CONTRIBUTOR","body":"Thanks @rdsr for pointing out, I've fixed the checkstyle issues as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541108885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541140549","html_url":"https://github.com/apache/iceberg/pull/497#issuecomment-541140549","issue_url":"https://api.github.com/repos/apache/iceberg/issues/497","id":541140549,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTE0MDU0OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T16:49:38Z","updated_at":"2019-10-11T16:49:38Z","author_association":"CONTRIBUTOR","body":"@yathindranath, I think we should add table properties in a separate PR. For this one, let's focus on making sure we have a good plan for the behavior of `retainLast`.\r\n\r\nWhen we do add table properties, I think we should add one for retainLast and one for snapshot age. Using milliseconds doesn't sound very friendly to me, when people will almost certainly want some number of days or hours. But maybe we should just start supporting units in table properties, like `5d` or `72h`. Like I said, we can follow up on this in a later PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541140549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541201187","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-541201187","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":541201187,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIwMTE4Nw==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T19:50:23Z","updated_at":"2019-10-11T19:50:23Z","author_association":"CONTRIBUTOR","body":"Thank you @rdblue, I’ll add the changes soon on the https://github.com/apache/incubator-iceberg/pull/514 PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541201187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541202306","html_url":"https://github.com/apache/iceberg/pull/514#issuecomment-541202306","issue_url":"https://api.github.com/repos/apache/iceberg/issues/514","id":541202306,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIwMjMwNg==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T19:53:53Z","updated_at":"2019-10-11T19:53:53Z","author_association":"CONTRIBUTOR","body":"Thank you @rdblue. I’ll do that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541202306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541204076","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-541204076","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":541204076,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIwNDA3Ng==","user":{"login":"manishmalhotrawork","id":22434010,"node_id":"MDQ6VXNlcjIyNDM0MDEw","avatar_url":"https://avatars.githubusercontent.com/u/22434010?v=4","gravatar_id":"","url":"https://api.github.com/users/manishmalhotrawork","html_url":"https://github.com/manishmalhotrawork","followers_url":"https://api.github.com/users/manishmalhotrawork/followers","following_url":"https://api.github.com/users/manishmalhotrawork/following{/other_user}","gists_url":"https://api.github.com/users/manishmalhotrawork/gists{/gist_id}","starred_url":"https://api.github.com/users/manishmalhotrawork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manishmalhotrawork/subscriptions","organizations_url":"https://api.github.com/users/manishmalhotrawork/orgs","repos_url":"https://api.github.com/users/manishmalhotrawork/repos","events_url":"https://api.github.com/users/manishmalhotrawork/events{/privacy}","received_events_url":"https://api.github.com/users/manishmalhotrawork/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T19:59:47Z","updated_at":"2019-10-12T02:13:28Z","author_association":"CONTRIBUTOR","body":"> Yeah, the first step is to add a partition field ID in addition to the existing source field ID.\r\n\r\nCool. then we also have to also handle cases where table is created with old way (partition-field if in ) and not adding partitionSpec to that table?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541204076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541212272","html_url":"https://github.com/apache/iceberg/pull/499#issuecomment-541212272","issue_url":"https://api.github.com/repos/apache/iceberg/issues/499","id":541212272,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIxMjI3Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T20:26:53Z","updated_at":"2019-10-11T20:26:53Z","author_association":"CONTRIBUTOR","body":"> then we also have to also handle cases where table is created with old way (partition-field if in ) and not adding partitionSpec to that table?\r\n\r\nYes. In that case, we can get IDs by assigning the same way they would be in the method that returns the partition schema.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541212272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541213614","html_url":"https://github.com/apache/iceberg/pull/538#issuecomment-541213614","issue_url":"https://api.github.com/repos/apache/iceberg/issues/538","id":541213614,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIxMzYxNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T20:31:27Z","updated_at":"2019-10-11T20:31:27Z","author_association":"CONTRIBUTOR","body":"Tests have passed twice so far. Starting a third run.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541213614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541221493","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-541221493","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":541221493,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIyMTQ5Mw==","user":{"login":"ppadma","id":1904860,"node_id":"MDQ6VXNlcjE5MDQ4NjA=","avatar_url":"https://avatars.githubusercontent.com/u/1904860?v=4","gravatar_id":"","url":"https://api.github.com/users/ppadma","html_url":"https://github.com/ppadma","followers_url":"https://api.github.com/users/ppadma/followers","following_url":"https://api.github.com/users/ppadma/following{/other_user}","gists_url":"https://api.github.com/users/ppadma/gists{/gist_id}","starred_url":"https://api.github.com/users/ppadma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ppadma/subscriptions","organizations_url":"https://api.github.com/users/ppadma/orgs","repos_url":"https://api.github.com/users/ppadma/repos","events_url":"https://api.github.com/users/ppadma/events{/privacy}","received_events_url":"https://api.github.com/users/ppadma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T20:57:19Z","updated_at":"2019-10-11T20:57:19Z","author_association":"NONE","body":"@rdblue We have a use case where we have to stitch data in two different data lakes as a single table.  We already have an iceberg table with manifests and data in data lake 1.  Plan is to add these manifests to the new table created on data lake 2. We want to do this so we don't have to physically migrate/copy the data from data lake 1 to data lake 2.  I tried this and it works fine. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541221493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541222346","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-541222346","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":541222346,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIyMjM0Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T21:00:20Z","updated_at":"2019-10-11T21:00:20Z","author_association":"CONTRIBUTOR","body":"> If that is the case, then we are effectively changing the projected/read schema . . . Won't this affect Spark, Presto etc, since they are expecting the locations column?\r\n\r\nYes, that's what I'm suggesting. This won't affect Spark and Presto because the Iceberg schema of the data will still match. The name that we use to project data in Avro aren't actually used by Spark. Spark knows that id is at position 0 and location is going to be at position 1. The schema that we use to configure the Avro decoder doesn't need to be the same as the one we use for records.\r\n\r\nUsing a different schema is how we currently handle projection. Say your file has one column, 2: \"a\", and the current Iceberg schema is 1: \"x\" and 2: \"y\". The schema that we use to read is actually \"x\" and \"y\" (alias \"a\"). And that schema will be different for every file schema. The important part is that the positions are correct, not the names or concrete schema.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541222346/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541222642","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-541222642","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":541222642,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTIyMjY0Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-11T21:01:17Z","updated_at":"2019-10-11T21:01:17Z","author_association":"CONTRIBUTOR","body":"> if we maintain the invariant that the read schema is always a common subset of the table schema and table mapping, then we can side step this problem.\r\n\r\nThat doesn't work because the underlying records won't be large enough or won't use the right positions. The read schema needs to leave space for columns that will be filled with nulls.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541222642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541275065","html_url":"https://github.com/apache/iceberg/pull/207#issuecomment-541275065","issue_url":"https://api.github.com/repos/apache/iceberg/issues/207","id":541275065,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTI3NTA2NQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-12T02:27:27Z","updated_at":"2019-10-12T02:40:36Z","author_association":"CONTRIBUTOR","body":"Thanks for the detailed explanation. I'll try this out.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541275065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541290098","html_url":"https://github.com/apache/iceberg/pull/467#issuecomment-541290098","issue_url":"https://api.github.com/repos/apache/iceberg/issues/467","id":541290098,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTI5MDA5OA==","user":{"login":"lxynov","id":47990574,"node_id":"MDQ6VXNlcjQ3OTkwNTc0","avatar_url":"https://avatars.githubusercontent.com/u/47990574?v=4","gravatar_id":"","url":"https://api.github.com/users/lxynov","html_url":"https://github.com/lxynov","followers_url":"https://api.github.com/users/lxynov/followers","following_url":"https://api.github.com/users/lxynov/following{/other_user}","gists_url":"https://api.github.com/users/lxynov/gists{/gist_id}","starred_url":"https://api.github.com/users/lxynov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lxynov/subscriptions","organizations_url":"https://api.github.com/users/lxynov/orgs","repos_url":"https://api.github.com/users/lxynov/repos","events_url":"https://api.github.com/users/lxynov/events{/privacy}","received_events_url":"https://api.github.com/users/lxynov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-12T06:11:39Z","updated_at":"2019-10-12T06:11:39Z","author_association":"CONTRIBUTOR","body":"@rdblue @aokolnychyi Thank you for the review! I'll continue working on steps 2&3 listed in #459 after this PR is merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541290098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541378851","html_url":"https://github.com/apache/iceberg/pull/244#issuecomment-541378851","issue_url":"https://api.github.com/repos/apache/iceberg/issues/244","id":541378851,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTM3ODg1MQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T02:17:18Z","updated_at":"2019-10-20T23:53:00Z","author_association":"CONTRIBUTOR","body":"@fbocse are you still planning to work on this task?\r\n\r\nWe had a similar requirement. My changes are specified here: https://github.com/rdsr/incubator-iceberg/commit/4c73bf57d443f43b72c4f1913577e2ce1efd5f46\r\n\r\nI used your tests as base and kept the same user facing api as yours.\r\nMy approach is slightly different though. ~~I've implemented two visitors~~\r\n\r\nFirst visitor traverses the updated schema and checks for additions and updates against the current / existing schema. In updates it also checks for ~~renames~~, type widening, and documentation.\r\n\r\n~~Second visitor traverses the existing schema and checks for deletes in the updated schema.~~\r\n\r\nLet me know what you guys think @rdblue  and @fbocse ! If you guys feel this approach is workable I'll create a PR from this\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541378851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541440371","html_url":"https://github.com/apache/iceberg/issues/540#issuecomment-541440371","issue_url":"https://api.github.com/repos/apache/iceberg/issues/540","id":541440371,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0MDM3MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T17:49:53Z","updated_at":"2019-10-13T17:49:53Z","author_association":"CONTRIBUTOR","body":"What do you mean by automatic schema evolution? When you write to a table, any new columns are automatically added?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541440371/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541441529","html_url":"https://github.com/apache/iceberg/pull/539#issuecomment-541441529","issue_url":"https://api.github.com/repos/apache/iceberg/issues/539","id":541441529,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0MTUyOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T18:00:29Z","updated_at":"2019-10-13T18:00:29Z","author_association":"CONTRIBUTOR","body":"Is the behavior of `setLength` the same for both classes? This section is tricky because some of the lengths are measured in bytes, some in chars, and some in codepoints.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541441529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541441863","html_url":"https://github.com/apache/iceberg/issues/540#issuecomment-541441863","issue_url":"https://api.github.com/repos/apache/iceberg/issues/540","id":541441863,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0MTg2Mw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T18:04:02Z","updated_at":"2019-10-13T18:04:02Z","author_association":"CONTRIBUTOR","body":"Yes, if the columns are valid as per the schema evolution rules\r\nWe've seen use-cases of it where users want their jobs to automatically evolve their private tables when the upstream datasets evolve.  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541441863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541442093","html_url":"https://github.com/apache/iceberg/issues/540#issuecomment-541442093","issue_url":"https://api.github.com/repos/apache/iceberg/issues/540","id":541442093,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0MjA5Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T18:06:42Z","updated_at":"2019-10-13T18:06:42Z","author_association":"CONTRIBUTOR","body":"Yeah, I think that could be a good idea. We'd want to document some of the risks, though. It's easy to add columns with the wrong type when you're doing that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541442093/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541442220","html_url":"https://github.com/apache/iceberg/issues/540#issuecomment-541442220","issue_url":"https://api.github.com/repos/apache/iceberg/issues/540","id":541442220,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0MjIyMA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T18:08:16Z","updated_at":"2019-10-13T18:08:16Z","author_association":"CONTRIBUTOR","body":"> It's easy to add columns with the wrong type when you're doing that.\r\n\r\nWouldn't `UpdateSchema` catch invalid schema evolutions?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541442220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541442319","html_url":"https://github.com/apache/iceberg/pull/529#issuecomment-541442319","issue_url":"https://api.github.com/repos/apache/iceberg/issues/529","id":541442319,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0MjMxOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T18:09:30Z","updated_at":"2019-10-13T18:09:30Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, can you update the PR description with a summary of what you're proposing here?\r\n\r\nIf I understand correctly, the idea is to have a catalog for path-based tables that builds paths from table names so that a directory looks like a catalog. Is that correct?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541442319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541446146","html_url":"https://github.com/apache/iceberg/issues/540#issuecomment-541446146","issue_url":"https://api.github.com/repos/apache/iceberg/issues/540","id":541446146,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0NjE0Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T18:47:32Z","updated_at":"2019-10-13T18:47:32Z","author_association":"CONTRIBUTOR","body":"Yes, it will. But we would want to fail earlier than that. The case I'm thinking about is when you're developing a change that adds a column and everything looks fine in the data, so you deploy it. But what if you accidentally used a string instead of an int? You'll quickly catch that when people start using the new column, but you won't be able to simply update the type and write because string to int is an incompatible change.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541446146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449291","html_url":"https://github.com/apache/iceberg/pull/309#issuecomment-541449291","issue_url":"https://api.github.com/repos/apache/iceberg/issues/309","id":541449291,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0OTI5MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T19:21:14Z","updated_at":"2019-10-13T19:21:14Z","author_association":"CONTRIBUTOR","body":"> Iceberg tables can share locations. Can they share metadata locations?\r\n\r\nYes, they could. That's another good reason to avoid listing to clean this up.\r\n\r\n> If we are to keep only 100 last files, does it mean that we will be deleting the most recent file on every commit?\r\n\r\nYes. I think this would be done after the commit to avoid failure, but we would want to clean up the dangling metadata file each commit to ensure it gets deleted. By keeping track of the last N metadata locations, we can also build this into snapshot expiration to catch any problems.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449375","html_url":"https://github.com/apache/iceberg/pull/309#issuecomment-541449375","issue_url":"https://api.github.com/repos/apache/iceberg/issues/309","id":541449375,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0OTM3NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T19:21:56Z","updated_at":"2019-10-13T19:21:56Z","author_association":"CONTRIBUTOR","body":"I'm closing this for now, since the approach is probably not what we will go with in the end, but I'd like to get a solution for this finished by next release.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449685","html_url":"https://github.com/apache/iceberg/issues/181#issuecomment-541449685","issue_url":"https://api.github.com/repos/apache/iceberg/issues/181","id":541449685,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0OTY4NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T19:25:23Z","updated_at":"2019-10-13T19:25:23Z","author_association":"CONTRIBUTOR","body":"From discussion on #309, I think the right way to expire old metadata is to keep a list of the N previous metadata files in each metadata file, then regularly clean up the old files after each commit. Both the number of old versions and whether to delete the oldest file after each commit should be configured by a table properties.\r\n\r\nWe can also add additional checking in the snapshot expiration code since we can go back and read the old metadata locations to find what should have been deleted (but may have failed).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449734","html_url":"https://github.com/apache/iceberg/issues/181#issuecomment-541449734","issue_url":"https://api.github.com/repos/apache/iceberg/issues/181","id":541449734,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTQ0OTczNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-13T19:26:00Z","updated_at":"2019-10-13T19:26:00Z","author_association":"CONTRIBUTOR","body":"Adding this to the 0.8.0 release milestone.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541449734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541536032","html_url":"https://github.com/apache/iceberg/pull/543#issuecomment-541536032","issue_url":"https://api.github.com/repos/apache/iceberg/issues/543","id":541536032,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTUzNjAzMg==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T07:48:13Z","updated_at":"2019-10-14T08:17:22Z","author_association":"CONTRIBUTOR","body":"The change is to return an empty set of manifest file when snapshot is null, and as a result, FindFiles#collect() returns an empty collection of manifest entries. We could also stop the program if snapshot is null, but it might not be a good idea to me.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541536032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541537590","html_url":"https://github.com/apache/iceberg/pull/543#issuecomment-541537590","issue_url":"https://api.github.com/repos/apache/iceberg/issues/543","id":541537590,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTUzNzU5MA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T07:54:01Z","updated_at":"2019-10-14T07:56:24Z","author_association":"CONTRIBUTOR","body":"@rdblue , please help to review it at your most convenience, thanks!\r\nBy the way, CI reports: \r\n> TestFindFiles.java:165: printStackTrace is not generally allowed.\r\n\r\nI might need `printStackTrace` here in UT so as to get clear information when the UT specified for the issue gets failed. What about your opinion?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541537590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541572275","html_url":"https://github.com/apache/iceberg/pull/529#issuecomment-541572275","issue_url":"https://api.github.com/repos/apache/iceberg/issues/529","id":541572275,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTU3MjI3NQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T09:19:30Z","updated_at":"2019-10-14T09:19:30Z","author_association":"COLLABORATOR","body":"@rdblue, you are correct. There is an open issue [here](https://github.com/apache/incubator-iceberg/issues/422) ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541572275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541667320","html_url":"https://github.com/apache/iceberg/pull/539#issuecomment-541667320","issue_url":"https://api.github.com/repos/apache/iceberg/issues/539","id":541667320,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTY2NzMyMA==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T13:08:16Z","updated_at":"2019-10-14T13:08:16Z","author_association":"CONTRIBUTOR","body":"I had to do some research there. It looks the same to me. The docstrings are the same:\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\r\nhttps://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html\r\n\r\nAlso the `.length()` method is the equal for both of the classes (character count).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541667320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541680111","html_url":"https://github.com/apache/iceberg/pull/514#issuecomment-541680111","issue_url":"https://api.github.com/repos/apache/iceberg/issues/514","id":541680111,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTY4MDExMQ==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T13:32:49Z","updated_at":"2019-10-14T13:32:49Z","author_association":"CONTRIBUTOR","body":"@rdblue I implemented the suggestions, please have another look. Thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541680111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541718169","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-541718169","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":541718169,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTcxODE2OQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T14:38:47Z","updated_at":"2019-10-14T19:48:00Z","author_association":"CONTRIBUTOR","body":"Wouldn't this option allow writing records to a table with fields which are really optional in the parquet file even though the table schema has marked those fields as  **required**.  This could fail reads from the said table as a record could have a required field missing.  \r\n\r\nIs there an option that instead of reading using parquet source, we register those files metadata as Iceberg table and then read from the table?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541718169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541743654","html_url":"https://github.com/apache/iceberg/issues/510#issuecomment-541743654","issue_url":"https://api.github.com/repos/apache/iceberg/issues/510","id":541743654,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MTc0MzY1NA==","user":{"login":"andrei-ionescu","id":3389505,"node_id":"MDQ6VXNlcjMzODk1MDU=","avatar_url":"https://avatars.githubusercontent.com/u/3389505?v=4","gravatar_id":"","url":"https://api.github.com/users/andrei-ionescu","html_url":"https://github.com/andrei-ionescu","followers_url":"https://api.github.com/users/andrei-ionescu/followers","following_url":"https://api.github.com/users/andrei-ionescu/following{/other_user}","gists_url":"https://api.github.com/users/andrei-ionescu/gists{/gist_id}","starred_url":"https://api.github.com/users/andrei-ionescu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrei-ionescu/subscriptions","organizations_url":"https://api.github.com/users/andrei-ionescu/orgs","repos_url":"https://api.github.com/users/andrei-ionescu/repos","events_url":"https://api.github.com/users/andrei-ionescu/events{/privacy}","received_events_url":"https://api.github.com/users/andrei-ionescu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-14T15:21:49Z","updated_at":"2019-10-14T15:21:49Z","author_association":"CONTRIBUTOR","body":"@rdsr Can you provide a gist of this in a Spark distributed manner? \r\n\r\nWriting data once more to disk is not a viable solution because it will double the space for storage and/or maybe additional processes to clean up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/541743654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]