[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147682895","html_url":"https://github.com/apache/iceberg/pull/4956#issuecomment-1147682895","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4956","id":1147682895,"node_id":"IC_kwDOCW7NX85EaEBP","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:12:52Z","updated_at":"2022-06-06T17:12:52Z","author_association":"CONTRIBUTOR","body":"> > What was wrong with the `CommitMetadata` name? I think we should have a simpler name than `CallerWithCommitMetadata`. That's a bit too confusing. I think the original name was good.\r\n> \r\n> [#4956 (comment)](https://github.com/apache/iceberg/pull/4956#discussion_r889199722) @kbendick mentioned some potential conflict with SS's CommitMetadata here, I don't have strong opinion on this\r\n\r\nI’m good with the original name too (and prefer it to the new one).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147682895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147697030","html_url":"https://github.com/apache/iceberg/pull/4967#issuecomment-1147697030","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4967","id":1147697030,"node_id":"IC_kwDOCW7NX85EaHeG","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:26:54Z","updated_at":"2022-06-06T17:26:54Z","author_association":"CONTRIBUTOR","body":"Thanks, @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147697030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147698334","html_url":"https://github.com/apache/iceberg/pull/4963#issuecomment-1147698334","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4963","id":1147698334,"node_id":"IC_kwDOCW7NX85EaHye","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:28:08Z","updated_at":"2022-06-06T17:28:08Z","author_association":"CONTRIBUTOR","body":"This should not be merged. Upgrading the format version used for a table can't be reversed and should not happen automatically. The user should do this explicitly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147698334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147700210","html_url":"https://github.com/apache/iceberg/pull/4969#issuecomment-1147700210","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4969","id":1147700210,"node_id":"IC_kwDOCW7NX85EaIPy","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:29:59Z","updated_at":"2022-06-06T17:29:59Z","author_association":"CONTRIBUTOR","body":"I don't think we can merge this without a plan for how to handle incremental data in Flink. There's a similar effort happening for Spark and I think it makes sense to have a similar plan for how Flink is going to work. Would you like to work on a design? Maybe you and @stevenzwu could come up with the Flink design.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147700210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147702155","html_url":"https://github.com/apache/iceberg/pull/4964#issuecomment-1147702155","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4964","id":1147702155,"node_id":"IC_kwDOCW7NX85EaIuL","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:32:06Z","updated_at":"2022-06-06T17:32:06Z","author_association":"CONTRIBUTOR","body":"Thanks, @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147702155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147706071","html_url":"https://github.com/apache/iceberg/pull/4588#issuecomment-1147706071","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4588","id":1147706071,"node_id":"IC_kwDOCW7NX85EaJrX","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:36:19Z","updated_at":"2022-06-06T17:36:19Z","author_association":"CONTRIBUTOR","body":"I'm working on rebasing on master, reconciling the conflicts with #4683.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147706071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147710462","html_url":"https://github.com/apache/iceberg/pull/4923#issuecomment-1147710462","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4923","id":1147710462,"node_id":"IC_kwDOCW7NX85EaKv-","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:41:02Z","updated_at":"2022-06-06T17:41:02Z","author_association":"CONTRIBUTOR","body":"Personally, I don't think I'd add this. An extra development dependency just to run tasks doesn't seem worth it. The Makefile is not really required, it's just a convenience. Adding a dependency that makes the configuration less obvious doesn't seem like a win to me.\r\n\r\nThat said, if people strongly prefer this I'm happy with whatever the community decides!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147710462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147713114","html_url":"https://github.com/apache/iceberg/issues/4959#issuecomment-1147713114","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4959","id":1147713114,"node_id":"IC_kwDOCW7NX85EaLZa","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:43:53Z","updated_at":"2022-06-06T17:45:43Z","author_association":"CONTRIBUTOR","body":"I don’t necessarily know of another version of the Revapi plug-in for gradle. Have any input on that subject @KarlManong?\r\n\r\nAlso, what happens if you set the lang \r\nIdeally we can get them to fix this upstream?\r\n\r\nAnd what is your `LANGUAGE` configured to or how can we otherwise replicate this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147713114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147717278","html_url":"https://github.com/apache/iceberg/pull/4923#issuecomment-1147717278","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4923","id":1147717278,"node_id":"IC_kwDOCW7NX85EaMae","user":{"login":"dramaticlly","id":5961173,"node_id":"MDQ6VXNlcjU5NjExNzM=","avatar_url":"https://avatars.githubusercontent.com/u/5961173?v=4","gravatar_id":"","url":"https://api.github.com/users/dramaticlly","html_url":"https://github.com/dramaticlly","followers_url":"https://api.github.com/users/dramaticlly/followers","following_url":"https://api.github.com/users/dramaticlly/following{/other_user}","gists_url":"https://api.github.com/users/dramaticlly/gists{/gist_id}","starred_url":"https://api.github.com/users/dramaticlly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dramaticlly/subscriptions","organizations_url":"https://api.github.com/users/dramaticlly/orgs","repos_url":"https://api.github.com/users/dramaticlly/repos","events_url":"https://api.github.com/users/dramaticlly/events{/privacy}","received_events_url":"https://api.github.com/users/dramaticlly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T17:48:20Z","updated_at":"2022-06-06T17:48:46Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue , @samredai  and @Fokko  for the review, I am just proposing some ideas and I agree its benefits is tangential and probably nor worth merge it in. I can close this PR","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147717278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147746050","html_url":"https://github.com/apache/iceberg/pull/4974#issuecomment-1147746050","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4974","id":1147746050,"node_id":"IC_kwDOCW7NX85EaTcC","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T18:20:22Z","updated_at":"2022-06-06T18:20:22Z","author_association":"CONTRIBUTOR","body":"I think we can also mark this as not up to date, or run this particular action _without_ clean, but with `--rerun-tasks`.\r\n\r\nSee https://stackoverflow.com/questions/42175235/force-gradle-to-run-task-even-if-it-is-up-to-date","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147746050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147748743","html_url":"https://github.com/apache/iceberg/pull/4870#issuecomment-1147748743","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4870","id":1147748743,"node_id":"IC_kwDOCW7NX85EaUGH","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T18:23:13Z","updated_at":"2022-06-06T18:23:28Z","author_association":"CONTRIBUTOR","body":"I've simplified this PR to always resolve equality deletes for now. I feel like it is easier to get this working first and add the option of not resolving equality deletes later. Right now, all added scan tasks fit well into `FileScanTask`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147748743/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147754785","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1147754785","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1147754785,"node_id":"IC_kwDOCW7NX85EaVkh","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T18:29:48Z","updated_at":"2022-06-06T18:29:48Z","author_association":"CONTRIBUTOR","body":"> I don't think that we guarantee stability of hashCode, nor should we.\r\n\r\nYes that's a good point, it's hard to guarantee and also not worth the effort. In that case I think we can just move to use `hashCode`, sorry for the back and forth.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147754785/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147766405","html_url":"https://github.com/apache/iceberg/pull/4812#issuecomment-1147766405","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4812","id":1147766405,"node_id":"IC_kwDOCW7NX85EaYaF","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T18:41:31Z","updated_at":"2022-06-06T18:43:11Z","author_association":"COLLABORATOR","body":"@stevenzwu yea I think equality deletes will be different tables because the schema is not the same.  Yea as delete_files is a summary, I thought this would be useful as we are lacking any way for user to see contents of delete files easily.  I guess it will not be the exact same as CDC table.\r\n\r\n@aokolnychyi yea the idea wrt RewritePositionDeleteFiles was to use the building blocks in conjunction with file-scan-task-set-id, for the compaction case.  This pr should have most of the pieces though, and hopefully we just need to add some wiring.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147766405/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147871867","html_url":"https://github.com/apache/iceberg/pull/4812#issuecomment-1147871867","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4812","id":1147871867,"node_id":"IC_kwDOCW7NX85EayJ7","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T20:12:33Z","updated_at":"2022-06-06T20:12:33Z","author_association":"CONTRIBUTOR","body":"> I thought this would be useful as we are lacking any way for user to see contents of delete files easily. \r\n\r\nThanks for confirming.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147871867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147876252","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1147876252","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1147876252,"node_id":"IC_kwDOCW7NX85EazOc","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T20:16:40Z","updated_at":"2022-06-06T20:16:40Z","author_association":"CONTRIBUTOR","body":"@kbendick any additional comment?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147876252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147952777","html_url":"https://github.com/apache/iceberg/pull/4975#issuecomment-1147952777","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4975","id":1147952777,"node_id":"IC_kwDOCW7NX85EbF6J","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T21:31:09Z","updated_at":"2022-06-06T21:31:09Z","author_association":"CONTRIBUTOR","body":"@rymurr and @nastra, FYI. The plan to use the null byte as a separator character was with you both, but it is apparently blocked by some HTTP frameworks because of null byte vulnerabilities. It makes much more sense to use a character reserved for this purpose, 0x1F (unit separator).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147952777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147975994","html_url":"https://github.com/apache/iceberg/pull/4956#issuecomment-1147975994","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4956","id":1147975994,"node_id":"IC_kwDOCW7NX85EbLk6","user":{"login":"CodingCat","id":678008,"node_id":"MDQ6VXNlcjY3ODAwOA==","avatar_url":"https://avatars.githubusercontent.com/u/678008?v=4","gravatar_id":"","url":"https://api.github.com/users/CodingCat","html_url":"https://github.com/CodingCat","followers_url":"https://api.github.com/users/CodingCat/followers","following_url":"https://api.github.com/users/CodingCat/following{/other_user}","gists_url":"https://api.github.com/users/CodingCat/gists{/gist_id}","starred_url":"https://api.github.com/users/CodingCat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/CodingCat/subscriptions","organizations_url":"https://api.github.com/users/CodingCat/orgs","repos_url":"https://api.github.com/users/CodingCat/repos","events_url":"https://api.github.com/users/CodingCat/events{/privacy}","received_events_url":"https://api.github.com/users/CodingCat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T22:00:24Z","updated_at":"2022-06-06T22:00:24Z","author_association":"CONTRIBUTOR","body":"@kbendick @rdblue @singhpk234 updated the PR accordingly, thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147975994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147997101","html_url":"https://github.com/apache/iceberg/pull/4963#issuecomment-1147997101","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4963","id":1147997101,"node_id":"IC_kwDOCW7NX85EbQut","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T22:28:04Z","updated_at":"2022-06-06T22:28:04Z","author_association":"CONTRIBUTOR","body":"It only works when creating a table, and version 1 does not work properly when creating an UPSERT table. If this is not feasible, can we send a warning message when creating a UPSERT table but not using version 2. \r\n\r\nOur developers sometimes come to us because of this oversight, 😄 \r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1147997101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148008561","html_url":"https://github.com/apache/iceberg/pull/4956#issuecomment-1148008561","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4956","id":1148008561,"node_id":"IC_kwDOCW7NX85EbThx","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T22:48:26Z","updated_at":"2022-06-06T22:48:26Z","author_association":"CONTRIBUTOR","body":"Thanks, @CodingCat!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148008561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148011159","html_url":"https://github.com/apache/iceberg/pull/4329#issuecomment-1148011159","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4329","id":1148011159,"node_id":"IC_kwDOCW7NX85EbUKX","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T22:53:48Z","updated_at":"2022-06-06T22:53:48Z","author_association":"CONTRIBUTOR","body":"Thanks, @stevenzwu!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148011159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148013017","html_url":"https://github.com/apache/iceberg/pull/4944#issuecomment-1148013017","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4944","id":1148013017,"node_id":"IC_kwDOCW7NX85EbUnZ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T22:57:55Z","updated_at":"2022-06-06T22:57:55Z","author_association":"CONTRIBUTOR","body":"I think this is ready to commit. Next step is to bring it up on the dev list and vote on it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148013017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148015646","html_url":"https://github.com/apache/iceberg/pull/4947#issuecomment-1148015646","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4947","id":1148015646,"node_id":"IC_kwDOCW7NX85EbVQe","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T23:02:45Z","updated_at":"2022-06-06T23:02:45Z","author_association":"CONTRIBUTOR","body":"@rdblue after I picked up this commit in master, my local build fails with\r\n```\r\nExecution failed for task ':iceberg-api:revapi'.\r\n> There were Java public API/ABI breaks reported by revapi:\r\n  \r\n  java.method.addedToInterface: Method was added to an interface.\r\n  \r\n  old: <none>\r\n  new: method boolean org.apache.iceberg.expressions.BoundTerm<T>::isEquivalentTo(org.apache.iceberg.expressions.BoundTerm<?>)\r\n  \r\n  SOURCE: BREAKING, BINARY: NON_BREAKING, SEMANTIC: POTENTIALLY_BREAKING\r\n  \r\n  From old archive: <none>\r\n  From new archive: iceberg-api-0.14.0-SNAPSHOT.jar\r\n  \r\n  If this is an acceptable break that will not harm your users, you can ignore it in future runs like so for:\r\n  \r\n    * Just this break:\r\n        ./gradlew :iceberg-api:revapiAcceptBreak --justification \"{why this break is ok}\" \\\r\n          --code \"java.method.addedToInterface\" \\\r\n          --new \"method boolean org.apache.iceberg.expressions.BoundTerm<T>::isEquivalentTo(org.apache.iceberg.expressions.BoundTerm<?>)\"\r\n    * All breaks in this project:\r\n        ./gradlew :iceberg-api:revapiAcceptAllBreaks --justification \"{why this break is ok}\"\r\n    * All breaks in all projects:\r\n        ./gradlew revapiAcceptAllBreaks --justification \"{why this break is ok}\"\r\n  ----------------------------------------------------------------------------------------------------\r\n```\r\nDo you need to add something to .palantir/revapi.yml?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148015646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148024362","html_url":"https://github.com/apache/iceberg/pull/4979#issuecomment-1148024362","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4979","id":1148024362,"node_id":"IC_kwDOCW7NX85EbXYq","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T23:16:02Z","updated_at":"2022-06-06T23:16:26Z","author_association":"CONTRIBUTOR","body":"I confirmed that the git diff output doesn't show anything from PR #4329 : https://gist.github.com/stevenzwu/d56179d147d22ff9d54fec13366a2af7\r\n```\r\ngit diff --no-index flink/v1.14/flink/src flink/v1.15/flink/src > flink.diff\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148024362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148029408","html_url":"https://github.com/apache/iceberg/pull/4926#issuecomment-1148029408","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4926","id":1148029408,"node_id":"IC_kwDOCW7NX85EbYng","user":{"login":"namrathamyske","id":17932873,"node_id":"MDQ6VXNlcjE3OTMyODcz","avatar_url":"https://avatars.githubusercontent.com/u/17932873?v=4","gravatar_id":"","url":"https://api.github.com/users/namrathamyske","html_url":"https://github.com/namrathamyske","followers_url":"https://api.github.com/users/namrathamyske/followers","following_url":"https://api.github.com/users/namrathamyske/following{/other_user}","gists_url":"https://api.github.com/users/namrathamyske/gists{/gist_id}","starred_url":"https://api.github.com/users/namrathamyske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namrathamyske/subscriptions","organizations_url":"https://api.github.com/users/namrathamyske/orgs","repos_url":"https://api.github.com/users/namrathamyske/repos","events_url":"https://api.github.com/users/namrathamyske/events{/privacy}","received_events_url":"https://api.github.com/users/namrathamyske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T23:23:26Z","updated_at":"2022-06-06T23:27:47Z","author_association":"CONTRIBUTOR","body":"> There is a more fundamental issue here for maintaining the correct snapshot lineage on a branch. The parent of the new snapshot needs to be set to the tip of the branch so that when the operation commits the lineage is correct.\r\n> \r\n> Also there should be validation that the ref is actually a branch and not a tag since we cannot produce snapshots to a tag.\r\n> \r\n> In apply https://github.com/apache/iceberg/blob/master/core/src/main/java/org/apache/iceberg/SnapshotProducer.java#L170\r\n> \r\n> If the branch is main, the parent is the current snapshot\r\n> \r\n> If the branch is not main, the parent is the tip of the branch which would be retrieved via table.ref(branch).snapshotId().\r\n\r\n@amogh-jahagirdar  Not only the parent ID, even the manifests need to merged by taking the parent tip into account. \r\n\r\nIn line https://github.com/apache/iceberg/blob/9a8b83c7339ff8905badeccbeb3e3bfa30621243/core/src/main/java/org/apache/iceberg/MergingSnapshotProducer.java#L686\r\n\r\nMaking a change as following:\r\n\r\n    if(branchToUpdate != null){\r\n\r\n      current = base.snapshot(base.ref(branchToUpdate).snapshotId());\r\n\r\n    }\r\n    else{\r\n\r\n      current = base.currentSnapshot();\r\n\r\n    }","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148029408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148037875","html_url":"https://github.com/apache/iceberg/pull/4947#issuecomment-1148037875","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4947","id":1148037875,"node_id":"IC_kwDOCW7NX85Ebarz","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T23:36:52Z","updated_at":"2022-06-06T23:36:52Z","author_association":"CONTRIBUTOR","body":"@wypoon, I merged a PR that added `BoundTerm.isEquivalentTo` earlier today: https://github.com/apache/iceberg/commit/c9efc4b8ccdaf047f32dc134096f68cb7133c545\r\n\r\n@kbendick, can you make sure we're running the checks on PRs correctly?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148037875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148040089","html_url":"https://github.com/apache/iceberg/pull/4947#issuecomment-1148040089","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4947","id":1148040089,"node_id":"IC_kwDOCW7NX85EbbOZ","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-06T23:40:39Z","updated_at":"2022-06-06T23:40:39Z","author_association":"CONTRIBUTOR","body":"> @wypoon, I merged a PR that added `BoundTerm.isEquivalentTo` earlier today: [c9efc4b](https://github.com/apache/iceberg/commit/c9efc4b8ccdaf047f32dc134096f68cb7133c545)\r\n> \r\nThanks. I haven't picked up #4965. I'll do so then.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148040089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148091191","html_url":"https://github.com/apache/iceberg/pull/4969#issuecomment-1148091191","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4969","id":1148091191,"node_id":"IC_kwDOCW7NX85Ebns3","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T01:18:18Z","updated_at":"2022-06-07T01:18:18Z","author_association":"CONTRIBUTOR","body":"@rdblue Yes, I'm glad to do. Does Spark have a design for reference?\r\n@stevenzwu, what do you think of this? Or has there been some progress?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148091191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148098866","html_url":"https://github.com/apache/iceberg/issues/4959#issuecomment-1148098866","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4959","id":1148098866,"node_id":"IC_kwDOCW7NX85Ebpky","user":{"login":"KarlManong","id":2627662,"node_id":"MDQ6VXNlcjI2Mjc2NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2627662?v=4","gravatar_id":"","url":"https://api.github.com/users/KarlManong","html_url":"https://github.com/KarlManong","followers_url":"https://api.github.com/users/KarlManong/followers","following_url":"https://api.github.com/users/KarlManong/following{/other_user}","gists_url":"https://api.github.com/users/KarlManong/gists{/gist_id}","starred_url":"https://api.github.com/users/KarlManong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarlManong/subscriptions","organizations_url":"https://api.github.com/users/KarlManong/orgs","repos_url":"https://api.github.com/users/KarlManong/repos","events_url":"https://api.github.com/users/KarlManong/events{/privacy}","received_events_url":"https://api.github.com/users/KarlManong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T01:34:33Z","updated_at":"2022-06-07T01:37:46Z","author_association":"CONTRIBUTOR","body":"I'm not familiar with Revapi, so can't give an idea.\r\n\r\nMy computer is running as this LANGUAGE\r\n```shell\r\n$ echo $LANGUAGE\r\nzh_CN:en_US:en\r\n```\r\nJust set the $LANGUAGE can reproduce the issue.\r\n\r\nMaybe we can comment the build doc which set the LANGUAGE before building.\r\n\r\nBy the way, according https://stackoverflow.com/questions/10633564/how-does-one-change-the-language-of-the-command-line-interface-of-git, there has some other ways to  change the output language of the Git.\r\n\r\nHope I have described clearly. Sorry for My English.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148098866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148101954","html_url":"https://github.com/apache/iceberg/pull/4726#issuecomment-1148101954","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4726","id":1148101954,"node_id":"IC_kwDOCW7NX85EbqVC","user":{"login":"ebyhr","id":6237050,"node_id":"MDQ6VXNlcjYyMzcwNTA=","avatar_url":"https://avatars.githubusercontent.com/u/6237050?v=4","gravatar_id":"","url":"https://api.github.com/users/ebyhr","html_url":"https://github.com/ebyhr","followers_url":"https://api.github.com/users/ebyhr/followers","following_url":"https://api.github.com/users/ebyhr/following{/other_user}","gists_url":"https://api.github.com/users/ebyhr/gists{/gist_id}","starred_url":"https://api.github.com/users/ebyhr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebyhr/subscriptions","organizations_url":"https://api.github.com/users/ebyhr/orgs","repos_url":"https://api.github.com/users/ebyhr/repos","events_url":"https://api.github.com/users/ebyhr/events{/privacy}","received_events_url":"https://api.github.com/users/ebyhr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T01:40:59Z","updated_at":"2022-06-07T01:40:59Z","author_association":"CONTRIBUTOR","body":"@jackye1995 Gentle reminder.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148101954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148127916","html_url":"https://github.com/apache/iceberg/pull/4974#issuecomment-1148127916","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4974","id":1148127916,"node_id":"IC_kwDOCW7NX85Ebwqs","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T02:33:27Z","updated_at":"2022-06-07T02:33:27Z","author_association":"MEMBER","body":"can we also do some dummy changes in the `api/` module (until the review is done)?  So, it will run the rev api check? Now out of 26 checks it ran, I don't see the rev api check. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148127916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148132465","html_url":"https://github.com/apache/iceberg/pull/4946#issuecomment-1148132465","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4946","id":1148132465,"node_id":"IC_kwDOCW7NX85Ebxxx","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T02:44:28Z","updated_at":"2022-06-07T02:44:28Z","author_association":"MEMBER","body":"@rdblue : Thanks for the review again. I have addressed all the comments. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148132465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148158612","html_url":"https://github.com/apache/iceberg/pull/4596#issuecomment-1148158612","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4596","id":1148158612,"node_id":"IC_kwDOCW7NX85Eb4KU","user":{"login":"uncleGen","id":7402327,"node_id":"MDQ6VXNlcjc0MDIzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/7402327?v=4","gravatar_id":"","url":"https://api.github.com/users/uncleGen","html_url":"https://github.com/uncleGen","followers_url":"https://api.github.com/users/uncleGen/followers","following_url":"https://api.github.com/users/uncleGen/following{/other_user}","gists_url":"https://api.github.com/users/uncleGen/gists{/gist_id}","starred_url":"https://api.github.com/users/uncleGen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uncleGen/subscriptions","organizations_url":"https://api.github.com/users/uncleGen/orgs","repos_url":"https://api.github.com/users/uncleGen/repos","events_url":"https://api.github.com/users/uncleGen/events{/privacy}","received_events_url":"https://api.github.com/users/uncleGen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T03:38:40Z","updated_at":"2022-06-07T03:38:59Z","author_association":"CONTRIBUTOR","body":"> IMHO, if a blocking queue blocks the producers, it usually means the consumer is not fast enough, in which case the bottleneck is the consumer, rather than the queue itself.\r\n\r\n> Does the blocking queue approach introduce any substantial performance bottleneck ? If we think the default blocking queue size is a bit small, then we can increase this default blocking queue size to 10000. \r\n\r\nIIUC, `blocking queue` should not introduce any bottleneck. Besides, if `blocking queue` can resolve OOM issue, it will be better and easier than doing additional tuning works for dev.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148158612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148172108","html_url":"https://github.com/apache/iceberg/pull/4596#issuecomment-1148172108","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4596","id":1148172108,"node_id":"IC_kwDOCW7NX85Eb7dM","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T04:08:39Z","updated_at":"2022-06-07T04:11:28Z","author_association":"CONTRIBUTOR","body":"I do see the points you raise and have admittedly used a BlockingQueue in similar situations in large scale streaming ETL in the past (thinking in terms of manifests in the sort of “envelope” sense that is manifest lists and even just overall snapshot change set). About 10k as the size per worker served me well (though would defer to others as in this sense I was streaming kinesis shards, which aren’t entirely unlike a manifest list given potentially variable size and need to rate limit).\r\n\r\nCan we introduce a configuration parameter, with a blocking queue size? If we give the parameter a negative value, ideally the user would not use a queue but would keep current behavior (similar to `CachingCatalog`s cache timeout milliseconds disables the cache when negative). This way the user can avoid the queue or keep old behavior but also users interested in trying the BlockingQueue approach can do so (as it has served me well, particularly in streaming scenario where the pipeline cannot stop).\r\n\r\nThis is also not unlike `streamResults` parameter for some spark driver side operations or akin to whether or not the worker thread pool is used in my opinion. So if we configure it in terms of size of queue, that’s the trade off users can more easily tune.\r\n\r\nWould this be achievable?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148172108/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148191069","html_url":"https://github.com/apache/iceberg/pull/4588#issuecomment-1148191069","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4588","id":1148191069,"node_id":"IC_kwDOCW7NX85EcAFd","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T04:46:51Z","updated_at":"2022-06-07T04:46:51Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @flyrain I have rebased on master and reconciled the conflicts with #4683. Counting deletes only happen for the normal read path, not the new path added by #4683.\r\nRussell, I have adopted your suggestions for `TestSparkReaderDeletes`. For the other questions/points you raised, I have answered them earlier.\r\nI don't think this work has any performance impact. The costs of incrementing an in-memory counter are dwarfed by the costs of opening and reading delete files.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148191069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148285552","html_url":"https://github.com/apache/iceberg/pull/4944#issuecomment-1148285552","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4944","id":1148285552,"node_id":"IC_kwDOCW7NX85EcXJw","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T07:15:48Z","updated_at":"2022-06-07T07:15:48Z","author_association":"MEMBER","body":"thanks for the merge!\r\n\r\n> I think this is ready to commit. Next step is to bring it up on the dev list and vote on it.\r\n\r\n@rdblue  who can do this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148285552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148300101","html_url":"https://github.com/apache/iceberg/pull/4945#issuecomment-1148300101","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4945","id":1148300101,"node_id":"IC_kwDOCW7NX85EcatF","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T07:29:45Z","updated_at":"2022-06-07T07:29:45Z","author_association":"MEMBER","body":"comments applied. @rdblue mind taking another look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148300101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148310218","html_url":"https://github.com/apache/iceberg/pull/4537#issuecomment-1148310218","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4537","id":1148310218,"node_id":"IC_kwDOCW7NX85EcdLK","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T07:39:26Z","updated_at":"2022-06-07T07:39:26Z","author_association":"MEMBER","body":"Now that the format spec https://github.com/apache/iceberg/pull/4944 is merged (thank you @rdblue! )\r\ni think this one is ready to merge too as it implements the format.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148310218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148319767","html_url":"https://github.com/apache/iceberg/pull/4916#issuecomment-1148319767","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4916","id":1148319767,"node_id":"IC_kwDOCW7NX85EcfgX","user":{"login":"renshangtao","id":53618158,"node_id":"MDQ6VXNlcjUzNjE4MTU4","avatar_url":"https://avatars.githubusercontent.com/u/53618158?v=4","gravatar_id":"","url":"https://api.github.com/users/renshangtao","html_url":"https://github.com/renshangtao","followers_url":"https://api.github.com/users/renshangtao/followers","following_url":"https://api.github.com/users/renshangtao/following{/other_user}","gists_url":"https://api.github.com/users/renshangtao/gists{/gist_id}","starred_url":"https://api.github.com/users/renshangtao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/renshangtao/subscriptions","organizations_url":"https://api.github.com/users/renshangtao/orgs","repos_url":"https://api.github.com/users/renshangtao/repos","events_url":"https://api.github.com/users/renshangtao/events{/privacy}","received_events_url":"https://api.github.com/users/renshangtao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T07:49:07Z","updated_at":"2022-06-07T07:49:07Z","author_association":"CONTRIBUTOR","body":"@pvary OK,Thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148319767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148820285","html_url":"https://github.com/apache/iceberg/issues/4095#issuecomment-1148820285","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4095","id":1148820285,"node_id":"IC_kwDOCW7NX85EeZs9","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T15:22:50Z","updated_at":"2022-06-07T15:22:50Z","author_association":"CONTRIBUTOR","body":"Fixed by https://github.com/apache/iceberg-docs/pull/74","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148820285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148848833","html_url":"https://github.com/apache/iceberg/pull/4517#issuecomment-1148848833","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4517","id":1148848833,"node_id":"IC_kwDOCW7NX85EegrB","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T15:46:35Z","updated_at":"2022-06-07T15:46:35Z","author_association":"CONTRIBUTOR","body":"I think this is good to go, and there is no further comment for quite a while now. I will merge it, thanks for the reviews! @rdblue @SreeramGarlapati ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148848833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148858466","html_url":"https://github.com/apache/iceberg/pull/4943#issuecomment-1148858466","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4943","id":1148858466,"node_id":"IC_kwDOCW7NX85EejBi","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T15:55:09Z","updated_at":"2022-06-07T15:55:09Z","author_association":"COLLABORATOR","body":"@kbendick @stevenzwu @hililiwei I rebased and addressed comments, PTAL.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148858466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148903245","html_url":"https://github.com/apache/iceberg/issues/4933#issuecomment-1148903245","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4933","id":1148903245,"node_id":"IC_kwDOCW7NX85Eet9N","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T16:31:49Z","updated_at":"2022-06-07T16:31:49Z","author_association":"CONTRIBUTOR","body":"+1 to pyiceberg","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148903245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148988958","html_url":"https://github.com/apache/iceberg/pull/4988#issuecomment-1148988958","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4988","id":1148988958,"node_id":"IC_kwDOCW7NX85EfC4e","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T17:50:40Z","updated_at":"2022-06-07T17:50:40Z","author_association":"COLLABORATOR","body":"Discussed a little bit of this with @aokolnychyi .  @rdblue @jackye1995 or any others, could you see if this makes sense?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1148988958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149002762","html_url":"https://github.com/apache/iceberg/pull/4987#issuecomment-1149002762","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4987","id":1149002762,"node_id":"IC_kwDOCW7NX85EfGQK","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T18:05:35Z","updated_at":"2022-06-07T18:05:35Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this! Have you checked if there are any other warnings related to `UnescapedEntity`? If so I think we can fix in the same PR. Also make sure the PR title is in the format of `Area: Commit message` and be more concrete, for eaxmple `Doc: Fix UnescapedEntity HTML javadoc warning`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149002762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149052738","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1149052738","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1149052738,"node_id":"IC_kwDOCW7NX85EfSdC","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T19:01:09Z","updated_at":"2022-06-07T19:01:09Z","author_association":"CONTRIBUTOR","body":"This PR replaces https://github.com/apache/iceberg/pull/4974","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149052738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149053363","html_url":"https://github.com/apache/iceberg/pull/4974#issuecomment-1149053363","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4974","id":1149053363,"node_id":"IC_kwDOCW7NX85EfSmz","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T19:01:49Z","updated_at":"2022-06-07T19:01:49Z","author_association":"CONTRIBUTOR","body":"Replaced by https://github.com/apache/iceberg/pull/4989 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149053363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149058249","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1149058249","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1149058249,"node_id":"IC_kwDOCW7NX85EfTzJ","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T19:07:13Z","updated_at":"2022-06-07T19:07:13Z","author_association":"CONTRIBUTOR","body":"cc @singhpk234 @ajantha-bhat @findepi \r\n\r\nI tested this _exact_ configuration in my fork and it worked as seen here: https://github.com/kbendick/iceberg/runs/6780458052?check_suite_focus=true\r\n\r\nPlease see the PR summary for my explanation of the issue.\r\n\r\nWe can likely slowly add back in some of the cache layers, as I think the _primary_ issue was the fact that it was checked out in a detached HEAD state (as shown by the log output of checkout action and as discussed [in this issue](https://github.com/actions/checkout/issues/124).\r\n\r\nHowever for now I would like to merge in something that I have seen work for sure and then we can make this more efficient.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149058249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149072306","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1149072306","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1149072306,"node_id":"IC_kwDOCW7NX85EfXOy","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T19:22:09Z","updated_at":"2022-06-07T19:23:43Z","author_association":"CONTRIBUTOR","body":"I just checked in my fork and we can remove these flags ` --rerun-tasks, --no-build-cache, and --no-daemon`. Though `--no-daemon` might be desirable to some degree.\r\n\r\nI'm going to leave `--rerun-tasks` in, in case we add the `actions/cache` back in. Though this _only_ builds api when running and is pretty fast still.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149072306/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149083480","html_url":"https://github.com/apache/iceberg/pull/4990#issuecomment-1149083480","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4990","id":1149083480,"node_id":"IC_kwDOCW7NX85EfZ9Y","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T19:34:36Z","updated_at":"2022-06-07T19:34:51Z","author_association":"CONTRIBUTOR","body":"Small nit: I wouldn't consider this a `Bug Fix`. More `Code Cleanup`. Or just `[parquet]`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149083480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149084095","html_url":"https://github.com/apache/iceberg/pull/4990#issuecomment-1149084095","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4990","id":1149084095,"node_id":"IC_kwDOCW7NX85EfaG_","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T19:35:20Z","updated_at":"2022-06-07T19:35:20Z","author_association":"CONTRIBUTOR","body":"+1, please update the title to something like `Checkstyle: fix reference of non canonical subclass`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149084095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149113179","html_url":"https://github.com/apache/iceberg/pull/4518#issuecomment-1149113179","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4518","id":1149113179,"node_id":"IC_kwDOCW7NX85EfhNb","user":{"login":"rizaon","id":6033430,"node_id":"MDQ6VXNlcjYwMzM0MzA=","avatar_url":"https://avatars.githubusercontent.com/u/6033430?v=4","gravatar_id":"","url":"https://api.github.com/users/rizaon","html_url":"https://github.com/rizaon","followers_url":"https://api.github.com/users/rizaon/followers","following_url":"https://api.github.com/users/rizaon/following{/other_user}","gists_url":"https://api.github.com/users/rizaon/gists{/gist_id}","starred_url":"https://api.github.com/users/rizaon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rizaon/subscriptions","organizations_url":"https://api.github.com/users/rizaon/orgs","repos_url":"https://api.github.com/users/rizaon/repos","events_url":"https://api.github.com/users/rizaon/events{/privacy}","received_events_url":"https://api.github.com/users/rizaon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T20:06:57Z","updated_at":"2022-06-07T20:06:57Z","author_association":"CONTRIBUTOR","body":"One way to avoid churn / pressure in cache is to detect what is the reason of most recent cache eviction. Say, if CachingFileIO tend to evict most entries in short time due to total memory size constraint, CachingFileIO should consider just bypassing cache for some period or until some entries evicted due to expiration rather than size limit.\r\n\r\nWe can do that with caffeine cache by implementing RemovalListener\r\nhttps://www.javadoc.io/doc/com.github.ben-manes.caffeine/caffeine/2.3.1/com/github/benmanes/caffeine/cache/RemovalListener.html\r\n\r\nAnother way is to impose high watermark limit on cache total weight. Thus, bypassing the cache once this high watermark limit exceeded.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149113179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149115695","html_url":"https://github.com/apache/iceberg/pull/4987#issuecomment-1149115695","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4987","id":1149115695,"node_id":"IC_kwDOCW7NX85Efh0v","user":{"login":"ericlgoodman","id":6923972,"node_id":"MDQ6VXNlcjY5MjM5NzI=","avatar_url":"https://avatars.githubusercontent.com/u/6923972?v=4","gravatar_id":"","url":"https://api.github.com/users/ericlgoodman","html_url":"https://github.com/ericlgoodman","followers_url":"https://api.github.com/users/ericlgoodman/followers","following_url":"https://api.github.com/users/ericlgoodman/following{/other_user}","gists_url":"https://api.github.com/users/ericlgoodman/gists{/gist_id}","starred_url":"https://api.github.com/users/ericlgoodman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericlgoodman/subscriptions","organizations_url":"https://api.github.com/users/ericlgoodman/orgs","repos_url":"https://api.github.com/users/ericlgoodman/repos","events_url":"https://api.github.com/users/ericlgoodman/events{/privacy}","received_events_url":"https://api.github.com/users/ericlgoodman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T20:09:33Z","updated_at":"2022-06-07T20:09:33Z","author_association":"CONTRIBUTOR","body":"Just rebuilt and found no `UnescapedEntity` warnings.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149115695/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149145976","html_url":"https://github.com/apache/iceberg/issues/4985#issuecomment-1149145976","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4985","id":1149145976,"node_id":"IC_kwDOCW7NX85EfpN4","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T20:40:37Z","updated_at":"2022-06-07T20:40:37Z","author_association":"CONTRIBUTOR","body":"I went ahead and created a PR https://github.com/apache/iceberg/pull/4992\r\n\r\n@rdblue suggested to keep `_type` postfix for `element` for the List, `key` and `value` for the Map. This is in line with the `field_type` of the NestedField. Also, Java also uses `keyType`: https://github.com/apache/iceberg/blob/master/api/src/main/java/org/apache/iceberg/types/Types.java#L761-L777\r\n\r\nNext to that, Java uses `keyField`, so this also nicely aligns then by renaming `key` into `key_field` in Python.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149145976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149243949","html_url":"https://github.com/apache/iceberg/pull/4898#issuecomment-1149243949","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4898","id":1149243949,"node_id":"IC_kwDOCW7NX85EgBIt","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-07T22:42:32Z","updated_at":"2022-06-07T22:42:32Z","author_association":"CONTRIBUTOR","body":"> Is this something we can do or need to wait until V3?\r\n\r\n@szehon-ho, this is something we can do because it is backward compatible. Older readers will ignore new fields, so we can add it safely. And if we don't have a schema ID for a column, then we just return null and skip the optimization.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149243949/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149353678","html_url":"https://github.com/apache/iceberg/pull/3998#issuecomment-1149353678","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3998","id":1149353678,"node_id":"IC_kwDOCW7NX85Egb7O","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T01:39:15Z","updated_at":"2022-06-08T01:39:15Z","author_association":"CONTRIBUTOR","body":"> I think it is a good idea to be able to override some table properties in the runtime configuration. However, I'm -1 for the approach taken by this PR, which replaces the table properties with overridden properties. I think they should be kept separate so that it is clear what is happening.\r\n> \r\n> We have the same feature in Spark, but Spark defines more specific contextual properties to do the override. Here's a concrete example: it makes more sense to set `write-format` than to set `write.format.default` when configuring a write. What does it mean to set a \"default\" for the write?\r\n\r\nI read the implementation of Spark. It does make more sense than the current PR. I will modify it in the same way as Spark.\r\nThank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149353678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149497348","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1149497348","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1149497348,"node_id":"IC_kwDOCW7NX85Eg_AE","user":{"login":"singhpk234","id":35593236,"node_id":"MDQ6VXNlcjM1NTkzMjM2","avatar_url":"https://avatars.githubusercontent.com/u/35593236?v=4","gravatar_id":"","url":"https://api.github.com/users/singhpk234","html_url":"https://github.com/singhpk234","followers_url":"https://api.github.com/users/singhpk234/followers","following_url":"https://api.github.com/users/singhpk234/following{/other_user}","gists_url":"https://api.github.com/users/singhpk234/gists{/gist_id}","starred_url":"https://api.github.com/users/singhpk234/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/singhpk234/subscriptions","organizations_url":"https://api.github.com/users/singhpk234/orgs","repos_url":"https://api.github.com/users/singhpk234/repos","events_url":"https://api.github.com/users/singhpk234/events{/privacy}","received_events_url":"https://api.github.com/users/singhpk234/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T06:02:11Z","updated_at":"2022-06-08T06:02:37Z","author_association":"CONTRIBUTOR","body":"Thanks @kbendick for the change and comprehensive deep-dive, the above approach LGTM !!\r\n\r\n[question] : Have a small question, based on this [article](https://frontside.com/blog/2020-05-26-github-actions-pull_request/#how-does-pull_request-affect-actionscheckout)\r\n\r\n> that a pull_request workflow `ref` would look like refs/remotes/pull/##/merge, SHA of a pull_request workflow doesn't  matches the commit that triggered the workflow; instead the SHA of the pull_request is the resulting commit that was created from merging the base to the head.\r\n\r\nAre we ok failing in the CI incase there is a merge conflict when merging base to the head ? Thoughts.\r\n (I think we should be ok, considering we need to resolve them any how before final merge.)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149497348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149679107","html_url":"https://github.com/apache/iceberg/issues/4940#issuecomment-1149679107","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4940","id":1149679107,"node_id":"IC_kwDOCW7NX85EhrYD","user":{"login":"ymZhao1001","id":19317643,"node_id":"MDQ6VXNlcjE5MzE3NjQz","avatar_url":"https://avatars.githubusercontent.com/u/19317643?v=4","gravatar_id":"","url":"https://api.github.com/users/ymZhao1001","html_url":"https://github.com/ymZhao1001","followers_url":"https://api.github.com/users/ymZhao1001/followers","following_url":"https://api.github.com/users/ymZhao1001/following{/other_user}","gists_url":"https://api.github.com/users/ymZhao1001/gists{/gist_id}","starred_url":"https://api.github.com/users/ymZhao1001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymZhao1001/subscriptions","organizations_url":"https://api.github.com/users/ymZhao1001/orgs","repos_url":"https://api.github.com/users/ymZhao1001/repos","events_url":"https://api.github.com/users/ymZhao1001/events{/privacy}","received_events_url":"https://api.github.com/users/ymZhao1001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T09:25:57Z","updated_at":"2022-06-08T09:25:57Z","author_association":"CONTRIBUTOR","body":"closed by \r\nhttps://github.com/apache/iceberg/pull/4649","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149679107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149822422","html_url":"https://github.com/apache/iceberg/pull/4915#issuecomment-1149822422","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4915","id":1149822422,"node_id":"IC_kwDOCW7NX85EiOXW","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T11:59:59Z","updated_at":"2022-06-08T11:59:59Z","author_association":"CONTRIBUTOR","body":"@samredai: Could you please check again? Went through your comments, and added 2 new paragraphs.\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149822422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149893039","html_url":"https://github.com/apache/iceberg/pull/4911#issuecomment-1149893039","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4911","id":1149893039,"node_id":"IC_kwDOCW7NX85Eifmv","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T13:07:54Z","updated_at":"2022-06-08T13:07:54Z","author_association":"CONTRIBUTOR","body":"@openinx can you help take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149893039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149907182","html_url":"https://github.com/apache/iceberg/issues/4996#issuecomment-1149907182","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4996","id":1149907182,"node_id":"IC_kwDOCW7NX85EijDu","user":{"login":"chenwyi2","id":19389434,"node_id":"MDQ6VXNlcjE5Mzg5NDM0","avatar_url":"https://avatars.githubusercontent.com/u/19389434?v=4","gravatar_id":"","url":"https://api.github.com/users/chenwyi2","html_url":"https://github.com/chenwyi2","followers_url":"https://api.github.com/users/chenwyi2/followers","following_url":"https://api.github.com/users/chenwyi2/following{/other_user}","gists_url":"https://api.github.com/users/chenwyi2/gists{/gist_id}","starred_url":"https://api.github.com/users/chenwyi2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenwyi2/subscriptions","organizations_url":"https://api.github.com/users/chenwyi2/orgs","repos_url":"https://api.github.com/users/chenwyi2/repos","events_url":"https://api.github.com/users/chenwyi2/events{/privacy}","received_events_url":"https://api.github.com/users/chenwyi2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T13:20:24Z","updated_at":"2022-06-08T13:20:24Z","author_association":"NONE","body":"and i already use using use-starting-sequence-number variable, iceberg version is 0.13.1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149907182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149920747","html_url":"https://github.com/apache/iceberg/issues/4930#issuecomment-1149920747","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4930","id":1149920747,"node_id":"IC_kwDOCW7NX85EimXr","user":{"login":"lcspinter","id":47777102,"node_id":"MDQ6VXNlcjQ3Nzc3MTAy","avatar_url":"https://avatars.githubusercontent.com/u/47777102?v=4","gravatar_id":"","url":"https://api.github.com/users/lcspinter","html_url":"https://github.com/lcspinter","followers_url":"https://api.github.com/users/lcspinter/followers","following_url":"https://api.github.com/users/lcspinter/following{/other_user}","gists_url":"https://api.github.com/users/lcspinter/gists{/gist_id}","starred_url":"https://api.github.com/users/lcspinter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lcspinter/subscriptions","organizations_url":"https://api.github.com/users/lcspinter/orgs","repos_url":"https://api.github.com/users/lcspinter/repos","events_url":"https://api.github.com/users/lcspinter/events{/privacy}","received_events_url":"https://api.github.com/users/lcspinter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T13:31:41Z","updated_at":"2022-06-08T13:31:41Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer Could you please help me understand what should be the correct behaviour? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1149920747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150127669","html_url":"https://github.com/apache/iceberg/issues/4930#issuecomment-1150127669","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4930","id":1150127669,"node_id":"IC_kwDOCW7NX85EjY41","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T16:19:55Z","updated_at":"2022-06-08T16:20:33Z","author_association":"MEMBER","body":"I believe the proper behavior should be that neither allows the old data to be read back. Currently I wrote a repo\r\n\r\n```scala\r\nscala> spark.sql(\"CREATE external TABLE migratetest (foo int, bar int, zaz int) USING PARQUET LOCATION '/Users/russellspitzer/Temp/migratetest'\").show\r\n\r\nscala> spark.sql(\"INSERT INTO migratetest (foo, bar , zaz) VALUES (1, 1, 1)\")\r\nres7: org.apache.spark.sql.DataFrame = []\r\n\r\nscala> spark.sql(\"call spark_catalog.system.migrate('spark_catalog.default.migratetest')\")\r\nres8: org.apache.spark.sql.DataFrame = [migrated_files_count: bigint]\r\n\r\nscala> spark.sql(\"SELECT * FROM migratetest\").show\r\n+---+---+---+\r\n|foo|bar|zaz|\r\n+---+---+---+\r\n|  1|  1|  1|\r\n+---+---+---+\r\n\r\nscala> spark.sql(\"ALTER TABLE migratetest DROP COLUMN foo\")\r\nres10: org.apache.spark.sql.DataFrame = []\r\n\r\nscala> spark.sql(\"SELECT * FROM migratetest\").show\r\n+---+---+\r\n|bar|zaz|\r\n+---+---+\r\n|  1|  1|\r\n+---+---+\r\n\r\nscala> spark.sql(\"ALTER TABLE migratetest ADD COLUMN foo int\")\r\nres12: org.apache.spark.sql.DataFrame = []\r\n\r\nscala> spark.sql(\"SELECT * FROM migratetest\").show\r\n+---+---+---+\r\n|bar|zaz|foo|\r\n+---+---+---+\r\n|  1|  1|  1|\r\n```\r\n\r\nThe issue here is that the default name mapping is changed when the second foo column is added, overriding the original name mapping.\r\n\r\nName Mapping in original table : Foo maps to 1\r\n```\r\n[\r\n {\\n  \\\"field-id\\\" : 1,\\n  \\\"names\\\" : [ \\\"foo\\\" ]\\n},\r\n {\\n  \\\"field-id\\\" : 2,\\n  \\\"names\\\" : [ \\\"bar\\\" ]\\n}, \r\n {\\n  \\\"field-id\\\" : 3,\\n  \\\"names\\\" : [ \\\"zaz\\\" ]\\n} ]\r\n```\r\n\r\nName Mapping after dropping \"foo\" : Foo still maps to 1\r\n```\r\n[ {\\n  \\\"field-id\\\" : 1,\\n  \\\"names\\\" : [ \\\"foo\\\" ]\\n}, \r\n{\\n  \\\"field-id\\\" : 2,\\n  \\\"names\\\" : [ \\\"bar\\\" ]\\n}, \r\n{\\n  \\\"field-id\\\" : 3,\\n  \\\"names\\\" : [ \\\"zaz\\\" ]\\n} \r\n|]\r\n```\r\n\r\nName Mapping after adding \"foo\" back : Foo now maps to 4 *This is incorrect we should not be changing the existing mapping*\r\n```\r\n[ {\\n  \\\"field-id\\\" : 1,\\n  \\\"names\\\" : [ ]\\n}, \r\n{\\n  \\\"field-id\\\" : 2,\\n  \\\"names\\\" : [ \\\"bar\\\" ]\\n},\r\n {\\n  \\\"field-id\\\" : 3,\\n  \\\"names\\\" : [ \\\"zaz\\\" ]\\n}, \r\n {\\n  \\\"field-id\\\" : 4,\\n  \\\"names\\\" : [ \\\"foo\\\" ]\\n} ]\r\n```\r\n\r\nI'm on vacation now so i'm not going to look into this more, but IMHO that final default name mapping should be identical to the one when dropping the column. So the error here is in the \"ADD COLUMN\" code.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150127669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150145883","html_url":"https://github.com/apache/iceberg/issues/4952#issuecomment-1150145883","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4952","id":1150145883,"node_id":"IC_kwDOCW7NX85EjdVb","user":{"login":"sungwy-backup","id":52230321,"node_id":"MDQ6VXNlcjUyMjMwMzIx","avatar_url":"https://avatars.githubusercontent.com/u/52230321?v=4","gravatar_id":"","url":"https://api.github.com/users/sungwy-backup","html_url":"https://github.com/sungwy-backup","followers_url":"https://api.github.com/users/sungwy-backup/followers","following_url":"https://api.github.com/users/sungwy-backup/following{/other_user}","gists_url":"https://api.github.com/users/sungwy-backup/gists{/gist_id}","starred_url":"https://api.github.com/users/sungwy-backup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sungwy-backup/subscriptions","organizations_url":"https://api.github.com/users/sungwy-backup/orgs","repos_url":"https://api.github.com/users/sungwy-backup/repos","events_url":"https://api.github.com/users/sungwy-backup/events{/privacy}","received_events_url":"https://api.github.com/users/sungwy-backup/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T16:38:32Z","updated_at":"2022-06-08T16:38:32Z","author_association":"NONE","body":"@felixYyu @nssalian @rdblue \r\nHello folks! Just wanted to tag you to see if you had any thoughts on this issue.\r\n\r\nAt the very least I think we could expect companies using managed SQL infrastructures with varying degrees in strictness of lint checks getting unnecessary noise or failures from having to deal with a reserved key word as a column.\r\n\r\nIt doesn't look like this change has made it to a release yet, but other open source projects are already looking into onboarding this implementation, so it would be good to understand whether this schema will be staying for good, or it might be worth changing this now.\r\n\r\nhttps://github.com/trinodb/trino/pull/11772/files#diff-e4db49a223035ceaad88fc346e7558b55ff83485ac36bf92e97409b36ceb9717R102","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150145883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150147877","html_url":"https://github.com/apache/iceberg/issues/4952#issuecomment-1150147877","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4952","id":1150147877,"node_id":"IC_kwDOCW7NX85Ejd0l","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T16:40:44Z","updated_at":"2022-06-08T16:40:44Z","author_association":"CONTRIBUTOR","body":"@sungwy, if this hasn't been released yet, then let's fix it. Can you open a PR?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150147877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150153301","html_url":"https://github.com/apache/iceberg/issues/4952#issuecomment-1150153301","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4952","id":1150153301,"node_id":"IC_kwDOCW7NX85EjfJV","user":{"login":"sungwy-backup","id":52230321,"node_id":"MDQ6VXNlcjUyMjMwMzIx","avatar_url":"https://avatars.githubusercontent.com/u/52230321?v=4","gravatar_id":"","url":"https://api.github.com/users/sungwy-backup","html_url":"https://github.com/sungwy-backup","followers_url":"https://api.github.com/users/sungwy-backup/followers","following_url":"https://api.github.com/users/sungwy-backup/following{/other_user}","gists_url":"https://api.github.com/users/sungwy-backup/gists{/gist_id}","starred_url":"https://api.github.com/users/sungwy-backup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sungwy-backup/subscriptions","organizations_url":"https://api.github.com/users/sungwy-backup/orgs","repos_url":"https://api.github.com/users/sungwy-backup/repos","events_url":"https://api.github.com/users/sungwy-backup/events{/privacy}","received_events_url":"https://api.github.com/users/sungwy-backup/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T16:46:09Z","updated_at":"2022-06-08T16:46:09Z","author_association":"NONE","body":"Sure thing - I am doing this work as a part of a company, so I will raise a ticket for Open Source contribution, and open the PR soon on the company account. Will keep you posted","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150153301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150156129","html_url":"https://github.com/apache/iceberg/issues/4952#issuecomment-1150156129","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4952","id":1150156129,"node_id":"IC_kwDOCW7NX85Ejf1h","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T16:48:47Z","updated_at":"2022-06-08T16:48:47Z","author_association":"CONTRIBUTOR","body":"Great, thank you for doing this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150156129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150243728","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1150243728","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1150243728,"node_id":"IC_kwDOCW7NX85Ej1OQ","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T18:20:07Z","updated_at":"2022-06-08T18:25:51Z","author_association":"CONTRIBUTOR","body":"> Thanks @kbendick for the change and comprehensive deep-dive, the above approach LGTM !!\r\n> \r\n> [question] : Have a small question, based on this [article](https://frontside.com/blog/2020-05-26-github-actions-pull_request/#how-does-pull_request-affect-actionscheckout)\r\n> \r\n> > that a pull_request workflow `ref` would look like refs/remotes/pull/##/merge, SHA of a pull_request workflow doesn't  matches the commit that triggered the workflow; instead the SHA of the pull_request is the resulting commit that was created from merging the base to the head.\r\n> \r\n> Are we ok failing in the CI incase there is a merge conflict when merging base to the head ? Thoughts. (I think we should be ok, considering we need to resolve them any how before final merge.)\r\n\r\nAdding a specific `ref` has been removed @singhpk234. So in the case of a merge request, we _do_ want it to grab the branch that is the default for the action. We don't want to grab the SHA of just the commit before, but the whole branch (ie the result of squashing it).\r\n\r\nBut I agree, we should be ok as we need to resolve them anyhow before final merge. And I'd rather it give a false positive (a failure that is not an actual failure) than false negatives. If we do encounter a false positive, that will trigger somebody to go look and follow up.\r\n\r\nAnd like you said, we have to deal with this before merging anyway.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150243728/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150244905","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1150244905","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1150244905,"node_id":"IC_kwDOCW7NX85Ej1gp","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T18:21:20Z","updated_at":"2022-06-08T18:21:20Z","author_association":"CONTRIBUTOR","body":"This should be good to go now once tests pass @findepi @singhpk234 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150244905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150255006","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150255006","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150255006,"node_id":"IC_kwDOCW7NX85Ej3-e","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T18:31:15Z","updated_at":"2022-06-08T18:31:15Z","author_association":"CONTRIBUTOR","body":"Hi @puchengy!\r\n\r\nCan you please indicate what version of Spark (full version, including patch, and whether or not it's a fork), as well as the exact Iceberg version you're using?\r\n\r\nAlso, can you please add the full (detailed) query plan? Sometimes filters show up kind of funny as some of them might be pushed down further (or handled farther up).\r\n\r\nThank you!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150255006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150262358","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1150262358","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1150262358,"node_id":"IC_kwDOCW7NX85Ej5xW","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T18:39:37Z","updated_at":"2022-06-08T18:39:37Z","author_association":"CONTRIBUTOR","body":"> Thanks @kbendick for the change and comprehensive deep-dive, the above approach LGTM !!\r\n> \r\n> [question] : Have a small question, based on this [article](https://frontside.com/blog/2020-05-26-github-actions-pull_request/#how-does-pull_request-affect-actionscheckout)\r\n> \r\n> > that a pull_request workflow `ref` would look like refs/remotes/pull/##/merge, SHA of a pull_request workflow doesn't  matches the commit that triggered the workflow; instead the SHA of the pull_request is the resulting commit that was created from merging the base to the head.\r\n> \r\n> Are we ok failing in the CI incase there is a merge conflict when merging base to the head ? Thoughts. (I think we should be ok, considering we need to resolve them any how before final merge.)\r\n\r\nSo if I understand the article correctly, we _might _ still need to use the specific branch for `pull_request`.\r\n\r\nI tested in my fork without it, and it was fine.\r\n\r\nAdditionally, the article states that in the worse case we'll get false positives. I'd rather that than false negatives as mentioned.\r\n\r\nLet's go with this simpler workflow for now as I've tested it extensively in my fork and if we get false positives - then we'll catch them and deal with it then. But thanks for the article link, it's very helpful. Same applies for false negatives which we _should_ catch eventually as people run via the CLI which should always generate the proper result.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150262358/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150283584","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150283584","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150283584,"node_id":"IC_kwDOCW7NX85Ej-9A","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T18:58:45Z","updated_at":"2022-06-08T19:07:45Z","author_association":"CONTRIBUTOR","body":"@kbendick Hey, here is the information:\r\n\r\nspark version: 3.2.0, with some custom changes.\r\niceberg version: [0.13.1](https://github.com/pinterest/iceberg/commits/pinterest-release-0.13.1), with some patches from the iceberg master branch\r\n\r\nfull query plan (with some columns masked out):\r\n```\r\nspark-sql> explain select * FROM db.tbl WHERE dt BETWEEN date_sub('2022-06-06', 1) and '2022-06-06';\r\nplan\r\n== Physical Plan ==\r\n*(1) Project [col1#66, col2#67L, ..., dt#89, bool_partition_col#90]\r\n+- *(1) Filter (((cast(dt#89 as date) >= 2022-06-05) AND isnotnull(dt#89)) AND (dt#89 <= 2022-06-06))\r\n   +- BatchScan[col1#66, col2#67L, ..., dt#89, bool_partition_col#90] spark_catalog.db.tbl [filters=dt IS NOT NULL, dt <= '2022-06-06'] RuntimeFilters: []\r\n```\r\n\r\nv.s. normal one\r\n```\r\nspark-sql> explain select * FROM db.tbl WHERE dt BETWEEN '2022-06-05' and '2022-06-06';\r\nplan\r\n== Physical Plan ==\r\n*(1) Project [col1#66, col2#67L, ..., dt#89, bool_partition_col#90]\r\n+- *(1) Filter ((isnotnull(dt#89) AND (dt#89 >= 2022-06-05)) AND (dt#89 <= 2022-06-06))\r\n   +- BatchScan[col1#66, col2#67L, ..., dt#89, bool_partition_col#90] spark_catalog.db.tbl [filters=dt IS NOT NULL, dt >= '2022-06-05', dt <= '2022-06-06'] RuntimeFilters: []\r\n```\r\n\r\nI didn't pay attention to the full query plan closely before, now after I do, it seems the filter is correct, but it is not get pushed down to BatchScan operator.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150283584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150319746","html_url":"https://github.com/apache/iceberg/pull/4975#issuecomment-1150319746","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4975","id":1150319746,"node_id":"IC_kwDOCW7NX85EkHyC","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:33:34Z","updated_at":"2022-06-08T19:33:34Z","author_association":"CONTRIBUTOR","body":"I think we should just change it since we haven't yet released the code or the spec.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150319746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150333821","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1150333821","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1150333821,"node_id":"IC_kwDOCW7NX85EkLN9","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:45:39Z","updated_at":"2022-06-08T19:45:39Z","author_association":"CONTRIBUTOR","body":"> > I don't think that we guarantee stability of hashCode, nor should we.\r\n> \r\n> Yes that's a good point, it's hard to guarantee and also not worth the effort. In that case I think we can just move to use `hashCode`, sorry for the back and forth.\r\n\r\nNope. No additional comments. This looks good to me.\r\n\r\nI agree we don't guarantee hashCode (nor should we), but the rule is beneficial to avoid the unnecessary array allocation. Thanks for this and sorry for the back and forth @amogh-jahagirdar!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150333821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150334748","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1150334748","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1150334748,"node_id":"IC_kwDOCW7NX85EkLcc","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:46:47Z","updated_at":"2022-06-08T19:46:58Z","author_association":"CONTRIBUTOR","body":"No problem at all @kbendick @jackye1995 , want to make sure we're reaching the right decision! :) ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150334748/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150335877","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1150335877","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1150335877,"node_id":"IC_kwDOCW7NX85EkLuF","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:48:08Z","updated_at":"2022-06-08T19:48:08Z","author_association":"CONTRIBUTOR","body":"Oh @amogh-jahagirdar you might want to update the PR title again! That way if anybody is looking through old PRs, it will be reflective of the actual changes! Not a huge deal but worth mentioning.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150335877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150339109","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1150339109","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1150339109,"node_id":"IC_kwDOCW7NX85EkMgl","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:52:10Z","updated_at":"2022-06-08T19:52:10Z","author_association":"CONTRIBUTOR","body":"> Oh @amogh-jahagirdar you might want to update the PR title again! That way if anybody is looking through old PRs, it will be reflective of the actual changes! Not a huge deal but worth mentioning.\r\n\r\nDefinitely, done! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150339109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150339974","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150339974","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150339974,"node_id":"IC_kwDOCW7NX85EkMuG","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:53:16Z","updated_at":"2022-06-08T19:53:16Z","author_association":"CONTRIBUTOR","body":"I know for certain types of partition predicates (at least for aggregates I think), there are certain joins that need to be disabled.\r\n\r\nI'm not sure (and don't think actually) that's the case here, but worth mentioning.\r\n\r\nCan you provide the explain output with a plain parquet table the same as well?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150339974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150343103","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150343103","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150343103,"node_id":"IC_kwDOCW7NX85EkNe_","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T19:56:59Z","updated_at":"2022-06-08T20:02:39Z","author_association":"CONTRIBUTOR","body":"Also, would you mind removing the `[BUG]` from the title? It's slightly misleading imo. We can add it back if others agree it is a bug, but seeing `[BUG]` like that makes me think there's incorrect output, which isn't the case.\r\n\r\nIf we check and plain Spark with Parquet has the same behavior, then it's more of a feature request.\r\n\r\nI think `BUG` should be limited to issues of highest concern, namely ones that cause incorrect output.\r\n\r\nSome of us have been discussing issue tags and we will hopefully talk about it at the next community sync up, so this is just my opinion at the moment. But seeing `[BUG]` in an issue could be a little alarming for newer users etc. Especially if this is the same behavior that a plain table stored `as parquet` would give.\r\n\r\nWe could update it to something other than bug for now, but I _do_ think that dynamic predicate pushdown (what's happening with the UDF) ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150343103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150349886","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150349886","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150349886,"node_id":"IC_kwDOCW7NX85EkPI-","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T20:03:43Z","updated_at":"2022-06-08T20:07:20Z","author_association":"CONTRIBUTOR","body":"This relates to https://github.com/apache/iceberg/pull/3400\r\n\r\nYou have to disable broadcast joins for dynamic partition filtering to work, as broadcast joins are generally still considered faster (cost based optimization only does so much).\r\n\r\nCan you set `spark.sql.autoBroadcastJoinThreshold = -1` in your spark config and then try running the explain again?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150349886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150350306","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1150350306","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1150350306,"node_id":"IC_kwDOCW7NX85EkPPi","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T20:04:12Z","updated_at":"2022-06-08T20:04:12Z","author_association":"CONTRIBUTOR","body":"Looks good to me, thanks for the review! @kbendick @rdblue @singhpk234 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150350306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150351731","html_url":"https://github.com/apache/iceberg/pull/4953#issuecomment-1150351731","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4953","id":1150351731,"node_id":"IC_kwDOCW7NX85EkPlz","user":{"login":"amogh-jahagirdar","id":87500546,"node_id":"MDQ6VXNlcjg3NTAwNTQ2","avatar_url":"https://avatars.githubusercontent.com/u/87500546?v=4","gravatar_id":"","url":"https://api.github.com/users/amogh-jahagirdar","html_url":"https://github.com/amogh-jahagirdar","followers_url":"https://api.github.com/users/amogh-jahagirdar/followers","following_url":"https://api.github.com/users/amogh-jahagirdar/following{/other_user}","gists_url":"https://api.github.com/users/amogh-jahagirdar/gists{/gist_id}","starred_url":"https://api.github.com/users/amogh-jahagirdar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amogh-jahagirdar/subscriptions","organizations_url":"https://api.github.com/users/amogh-jahagirdar/orgs","repos_url":"https://api.github.com/users/amogh-jahagirdar/repos","events_url":"https://api.github.com/users/amogh-jahagirdar/events{/privacy}","received_events_url":"https://api.github.com/users/amogh-jahagirdar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T20:05:44Z","updated_at":"2022-06-08T20:05:44Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews all! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150351731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150428085","html_url":"https://github.com/apache/iceberg/pull/4975#issuecomment-1150428085","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4975","id":1150428085,"node_id":"IC_kwDOCW7NX85EkiO1","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T21:22:25Z","updated_at":"2022-06-08T21:22:25Z","author_association":"CONTRIBUTOR","body":"Belated +1. We'd discussed this offline. Thanks @danielcweeks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150428085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150429957","html_url":"https://github.com/apache/iceberg/issues/4856#issuecomment-1150429957","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4856","id":1150429957,"node_id":"IC_kwDOCW7NX85EkisF","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T21:24:48Z","updated_at":"2022-06-08T21:24:48Z","author_association":"CONTRIBUTOR","body":"This has been fixed","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150429957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150430856","html_url":"https://github.com/apache/iceberg/issues/4689#issuecomment-1150430856","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4689","id":1150430856,"node_id":"IC_kwDOCW7NX85Eki6I","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T21:26:05Z","updated_at":"2022-06-08T21:26:05Z","author_association":"CONTRIBUTOR","body":"I think I found the issue for this. PartitionoSpec.unpartitioned() results in a spec of `{\"spec-id\":0,\"fields\":[]}`, so I think we need to ensure that the partition specs have fields and are not the void spec.\r\n\r\nI will investigate further.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150430856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150507969","html_url":"https://github.com/apache/iceberg/pull/4847#issuecomment-1150507969","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4847","id":1150507969,"node_id":"IC_kwDOCW7NX85Ek1vB","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T23:19:42Z","updated_at":"2022-06-08T23:19:42Z","author_association":"COLLABORATOR","body":"FYI @rdblue if you have time to take a look, as well, thanks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150507969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150522177","html_url":"https://github.com/apache/iceberg/pull/4994#issuecomment-1150522177","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4994","id":1150522177,"node_id":"IC_kwDOCW7NX85Ek5NB","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T23:46:10Z","updated_at":"2022-06-08T23:46:10Z","author_association":"CONTRIBUTOR","body":"I don't think it is a good idea for Iceberg tables to store engine-specific expressions. I would possibly support expressions that are supported natively with Iceberg, like partition transforms. But beyond that I think this would create a big compatibility problem.\r\n\r\nWhat you're trying to solve is probably best solved with a higher layer, possibly outside of the Iceberg project. There is nothing specific to Iceberg about computed columns -- why not have a generic way to store those expressions and add them to a table?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150522177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150523491","html_url":"https://github.com/apache/iceberg/pull/4989#issuecomment-1150523491","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4989","id":1150523491,"node_id":"IC_kwDOCW7NX85Ek5hj","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T23:49:18Z","updated_at":"2022-06-08T23:49:18Z","author_association":"CONTRIBUTOR","body":"Thanks, @kbendick!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150523491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150528263","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150528263","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150528263,"node_id":"IC_kwDOCW7NX85Ek6sH","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-08T23:59:02Z","updated_at":"2022-06-08T23:59:02Z","author_association":"CONTRIBUTOR","body":"Also, thinking out loud here, but what plan gets generated if you use `INTERVAL`?  For example `explain select * from db.tbl where dt between '2022-01-01' - interval 1 days` (or something equivalent).\r\n\r\nIf that worked, that would be my suggestion solution as disabling broadcast joins is not exactly the best resolution.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150528263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150578252","html_url":"https://github.com/apache/iceberg/pull/4994#issuecomment-1150578252","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4994","id":1150578252,"node_id":"IC_kwDOCW7NX85ElG5M","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T01:36:27Z","updated_at":"2022-06-09T01:42:57Z","author_association":"CONTRIBUTOR","body":"> I don't think it is a good idea for Iceberg tables to store engine-specific expressions.\r\n\r\nFlink aside, computed columns are not an engine-specific expression. Many relational databases supports this.\r\n\r\nFirst, we assume that computed columns should be part of the table schema. Show such as:\r\n```sql\r\ncreate table t1(\r\n\tid int,\r\n\tname string,\r\n\tid2 as id*2\r\n)\r\n```\r\n\r\nId2 should be visible to all upper-level engines and maintain the same operational logic: `id*2`.\r\n\r\n  \r\nSecond, we want to know if we are prepared to support this DDL syntax inside Iceberg. This is a critical decision, and it is not so strongly related to the upper engine. If not, we need to look for a resolution at the top level, and as you say, it might even need to be addressed outside of the Iceberg project. If a computed column is supported in Flink, how can the column be visible when using Spark? Another compromise would be to support only Time-Attributes-related columns in Flink, so those columns are meaningless to Spark and its visibility is less important. However, in this case, old sql logic using computed columns (which use expressions similar to the above id2) cannot be smoothly migrated to Iceberg, which needs a lot of remodeling.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150578252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150582861","html_url":"https://github.com/apache/iceberg/pull/4994#issuecomment-1150582861","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4994","id":1150582861,"node_id":"IC_kwDOCW7NX85ElIBN","user":{"login":"hililiwei","id":59213263,"node_id":"MDQ6VXNlcjU5MjEzMjYz","avatar_url":"https://avatars.githubusercontent.com/u/59213263?v=4","gravatar_id":"","url":"https://api.github.com/users/hililiwei","html_url":"https://github.com/hililiwei","followers_url":"https://api.github.com/users/hililiwei/followers","following_url":"https://api.github.com/users/hililiwei/following{/other_user}","gists_url":"https://api.github.com/users/hililiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/hililiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hililiwei/subscriptions","organizations_url":"https://api.github.com/users/hililiwei/orgs","repos_url":"https://api.github.com/users/hililiwei/repos","events_url":"https://api.github.com/users/hililiwei/events{/privacy}","received_events_url":"https://api.github.com/users/hililiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T01:46:46Z","updated_at":"2022-06-09T01:46:46Z","author_association":"CONTRIBUTOR","body":">  -- why not have a generic way to store those expressions and add them to a table?\r\n\r\nIt's a good inspiration. We'll try it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150582861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150594476","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150594476","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150594476,"node_id":"IC_kwDOCW7NX85ElK2s","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T02:12:34Z","updated_at":"2022-06-09T02:12:34Z","author_association":"CONTRIBUTOR","body":"@kbendick thanks for the response, here is the query plan you suggest me to try, however, they both seems do not help much.\r\n\r\n> Can you set spark.sql.autoBroadcastJoinThreshold = -1 in your spark config and then try running the explain again?\r\n\r\n```\r\nspark-sql> set spark.sql.autoBroadcastJoinThreshold=-1;\r\nspark-sql> explain select * FROM db.tbl WHERE dt BETWEEN date_sub('2022-06-06', 1) and '2022-06-06';\r\n...\r\nplan\r\n== Physical Plan ==\r\n*(1) Project [col1#36, col2#37L, ..., dt#59, bool_partition_col#60]\r\n+- *(1) Filter (((cast(dt#59 as date) >= 2022-06-05) AND isnotnull(dt#59)) AND (dt#59 <= 2022-06-06))\r\n   +- BatchScan[col1#36, col2#37L, ..., dt#59, bool_partition_col#60] spark_catalog.db.tbl [filters=dt IS NOT NULL, dt <= '2022-06-06'] RuntimeFilters: []\r\n```\r\n\r\n>  but what plan gets generated if you use INTERVAL?\r\n```\r\nspark-sql> explain select * FROM db.tbl WHERE dt BETWEEN cast('2022-06-06' as date) - interval 1 day and '2022-06-06';\r\n...\r\nplan\r\n== Physical Plan ==\r\n*(1) Project [col1#96, col2#97L, app#98, ..., dt#119, bool_partition_col#120]\r\n+- *(1) Filter (((cast(dt#119 as date) >= 2022-06-05) AND isnotnull(dt#119)) AND (dt#119 <= 2022-06-06))\r\n   +- BatchScan[col1#96, col2#97L, ..., dt#119, bool_partition_col#120] spark_catalog.db.tbl [filters=dt IS NOT NULL, dt <= '2022-06-06'] RuntimeFilters: []\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150594476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150600979","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150600979","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150600979,"node_id":"IC_kwDOCW7NX85ElMcT","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T02:26:37Z","updated_at":"2022-06-09T02:26:37Z","author_association":"CONTRIBUTOR","body":"You’re right, they don’t.\r\n\r\nInstead of using `cast` in the interval one, I’d suggest using something like `DATE “2022-06-05”` (but I might be mixing up my Flink SQL and Spark SQL).\r\n\r\nAs a general guideline the explicit use of cast operator tends to limit filter push down.\r\n\r\nSome of the folks who worked on https://github.com/apache/iceberg/pull/3400 might be better able to help with this issue than I am.\r\n\r\nFor now, if this runs inside of a Java / Scala / Python program, I’d suggest generating the WHERE clause as a string via the programming language while we gather further input.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150600979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150602784","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150602784","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150602784,"node_id":"IC_kwDOCW7NX85ElM4g","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T02:30:53Z","updated_at":"2022-06-09T02:30:53Z","author_association":"CONTRIBUTOR","body":"I just tried and you can use the string without cast. That might help for the interval one.\r\n\r\n```\r\nspark-sql> select '2022-01-01' - interval 1 days;\r\n2021-12-31 00:00:00\r\nTime taken: 2.867 seconds, Fetched 1 row(s)\r\n```\r\n\r\nSo is it not possible to do `select * from db.tbl WHERE dt between '2022-06-06' - interval 1 days AND '2022-06-06'`;\r\n\r\nI'm thinking the removal of the explicit cast might help out (as you can see the case in the filter in the second plan).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150602784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150604767","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150604767","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150604767,"node_id":"IC_kwDOCW7NX85ElNXf","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T02:35:04Z","updated_at":"2022-06-09T02:35:51Z","author_association":"CONTRIBUTOR","body":"@kbendick Hi thanks for the suggestion, I think we can have what you mentioned as a workaround for now, however, we still want more for it to be resolved as it is not easy for us to change every SQL query that fall into this case for our customers.\r\n\r\nwith that I will ping the reviewer of #3400 here: hey, @rdblue @flyrain @karuppayya @szehon-ho @RussellSpitzer @aokolnychyi  when you get a chance, could you take a look? thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150604767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150606785","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150606785","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150606785,"node_id":"IC_kwDOCW7NX85ElN3B","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T02:39:23Z","updated_at":"2022-06-09T02:39:23Z","author_association":"CONTRIBUTOR","body":"@puchengy with the suggested syntax (the latest interval one w/o the cast), I think the filter pushdown will work. i just tried something similar and it did.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150606785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150618527","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150618527","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150618527,"node_id":"IC_kwDOCW7NX85ElQuf","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T03:06:40Z","updated_at":"2022-06-09T03:09:07Z","author_association":"CONTRIBUTOR","body":"> @kbendick Hi thanks for the suggestion, I think we can have what you mentioned as a workaround for now, however, we still want more for it to be resolved as it is not easy for us to change every SQL query that fall into this case for our customers.\r\n> \r\n> with that I will ping the reviewer of #3400 here: hey, @rdblue @flyrain @karuppayya @szehon-ho @RussellSpitzer @aokolnychyi when you get a chance, could you take a look? thanks.\r\n\r\nI agree it's not a good solution for pure SQL users. I'm surprised that disabling the broadcast join didn't help. The people you tagged would know more than I would.\r\n\r\nBut I just ran a full test and using the syntax `select * from db.tbl WHERE dt between '2022-06-06' - interval 1 days AND '2022-06-06';` the pushdown worked entirely.\r\n\r\n```\r\nspark-sql> create table date_partition_pushdown_test(id bigint, dt date) using iceberg partitioned by (dt);\r\nspark-sql> insert into date_partition_pushdown_test VALUES(1, date '2022-06-06'), (2, date '2022-06-05'), (3, date '2022-06-04');\r\nspark-sql> explain extended select * from date_partition_pushdown_test where dt between '2022-06-06' - interval 1 days AND '2022-06-06';\r\n== Parsed Logical Plan ==\r\n'Project [*]\r\n+- 'Filter (('dt >= (2022-06-06 - INTERVAL '1' DAY)) AND ('dt <= 2022-06-06))\r\n   +- 'UnresolvedRelation [date_partition_pushdown_test], [], false\r\n\r\n== Analyzed Logical Plan ==\r\nid: bigint, dt: date\r\nProject [id#6L, dt#7]\r\n+- Filter ((dt#7 >= cast(cast(2022-06-06 - INTERVAL '1' DAY as string) as date)) AND (dt#7 <= cast(2022-06-06 as date)))\r\n   +- SubqueryAlias demo.date_partition_pushdown_test\r\n      +- RelationV2[id#6L, dt#7] demo.date_partition_pushdown_test\r\n\r\n== Optimized Logical Plan ==\r\nFilter ((isnotnull(dt#7) AND (dt#7 >= 2022-06-05)) AND (dt#7 <= 2022-06-06))\r\n+- RelationV2[id#6L, dt#7] demo.date_partition_pushdown_test\r\n\r\n== Physical Plan ==\r\n*(1) Project [id#6L, dt#7]\r\n+- *(1) Filter ((isnotnull(dt#7) AND (dt#7 >= 2022-06-05)) AND (dt#7 <= 2022-06-06))\r\n   +- BatchScan[id#6L, dt#7] demo.date_partition_pushdown_test [filters=dt IS NOT NULL, dt >= 19148, dt <= 19149] RuntimeFilters: []\r\n```\r\n\r\nPlease let me know if removing the cast operator does not resolve the issue. Otherwise, please post your  table schema (including partitioning information) or at least the relevant parts.\r\n\r\nIf changing your SQL queries isn't an option (e.g. you have hard coded casts in your scripts), that's likely an issue that needs to be dealt with in Spark (as I have made it work with Iceberg).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150618527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150619382","html_url":"https://github.com/apache/iceberg/issues/4981#issuecomment-1150619382","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4981","id":1150619382,"node_id":"IC_kwDOCW7NX85ElQ72","user":{"login":"noneback","id":46670806,"node_id":"MDQ6VXNlcjQ2NjcwODA2","avatar_url":"https://avatars.githubusercontent.com/u/46670806?v=4","gravatar_id":"","url":"https://api.github.com/users/noneback","html_url":"https://github.com/noneback","followers_url":"https://api.github.com/users/noneback/followers","following_url":"https://api.github.com/users/noneback/following{/other_user}","gists_url":"https://api.github.com/users/noneback/gists{/gist_id}","starred_url":"https://api.github.com/users/noneback/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noneback/subscriptions","organizations_url":"https://api.github.com/users/noneback/orgs","repos_url":"https://api.github.com/users/noneback/repos","events_url":"https://api.github.com/users/noneback/events{/privacy}","received_events_url":"https://api.github.com/users/noneback/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T03:08:25Z","updated_at":"2022-06-09T03:08:25Z","author_association":"NONE","body":"@openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150619382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150623315","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150623315","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150623315,"node_id":"IC_kwDOCW7NX85ElR5T","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T03:16:47Z","updated_at":"2022-06-09T03:18:12Z","author_association":"CONTRIBUTOR","body":"I suspect that your table partitioning and schema might be different in some way as all queries push down for me when I use the schema `tbl(id bigint, dt date) using iceberg partitioned by (dt)`.\r\n\r\nIf you can please share your create table ddl (or the relevant portions). I was actually able to make `date_add` pushdown _without_ disabling broadcast joins:\r\n\r\n```\r\nspark-sql> explain extended select * from date_partition_pushdown_test where dt between date_add('2022-06-06', -1) AND '2022-06-06';\r\n...\r\n== Physical Plan ==\r\n*(1) Project [id#20L, dt#21]\r\n+- *(1) Filter ((isnotnull(dt#21) AND (dt#21 >= 2022-06-07)) AND (dt#21 <= 2022-06-06))\r\n   +- BatchScan[id#20L, dt#21] demo.date_partition_pushdown_test [filters=dt IS NOT NULL, dt >= 19150, dt <= 19149] RuntimeFilters: []\r\n```\r\n\r\nAs you can see, the filter on dt (on the Iceberg partitioning) is pushed down entirely).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150623315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150627437","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150627437","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150627437,"node_id":"IC_kwDOCW7NX85ElS5t","user":{"login":"puchengy","id":8072956,"node_id":"MDQ6VXNlcjgwNzI5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/8072956?v=4","gravatar_id":"","url":"https://api.github.com/users/puchengy","html_url":"https://github.com/puchengy","followers_url":"https://api.github.com/users/puchengy/followers","following_url":"https://api.github.com/users/puchengy/following{/other_user}","gists_url":"https://api.github.com/users/puchengy/gists{/gist_id}","starred_url":"https://api.github.com/users/puchengy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/puchengy/subscriptions","organizations_url":"https://api.github.com/users/puchengy/orgs","repos_url":"https://api.github.com/users/puchengy/repos","events_url":"https://api.github.com/users/puchengy/events{/privacy}","received_events_url":"https://api.github.com/users/puchengy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T03:26:17Z","updated_at":"2022-06-09T03:26:17Z","author_association":"CONTRIBUTOR","body":"@kbendick Thank you so much for your help. I will work on my own and conduct some small testings, my goal is find out the issue with your input or provide a set of queries that can reproduce my issue.\r\n\r\nFor others: no need to look into this right now, thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150627437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150628646","html_url":"https://github.com/apache/iceberg/issues/4997#issuecomment-1150628646","issue_url":"https://api.github.com/repos/apache/iceberg/issues/4997","id":1150628646,"node_id":"IC_kwDOCW7NX85ElTMm","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-06-09T03:28:42Z","updated_at":"2022-06-09T03:29:16Z","author_association":"CONTRIBUTOR","body":"Sure thing. Like I said, my table was `create table tbl(id bigint, dt date) using iceberg partitioned by (dt)`. So an Iceberg table partitioned with an identity transformation on a column of type date.\r\n\r\nDo let us know what you find if it’s relevant at all to the community!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/1150628646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]