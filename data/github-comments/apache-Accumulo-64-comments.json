[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811147061","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-811147061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":811147061,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTE0NzA2MQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T15:15:12Z","updated_at":"2021-03-31T15:18:10Z","author_association":"CONTRIBUTOR","body":"It may make sense to move constraints package into the public API like like was done with iterators.  Thinking this for the following reasons.\r\n\r\n  * All the types in the package could easily be moved to the public API\r\n  * Except for KeyExtent I think the types referenced by the package are in the public api in the data and security packages.\r\n  * The interfaces have been stable since at least 2012 (except for the addition of a single method I think), but probably since Accumulo was open sourced.\r\n  * Users have been encouraged to use the interfaces by Documentation for a very long time https://accumulo.apache.org/docs/2.x/getting-started/table_configuration#constraints https://accumulo.apache.org/1.10/accumulo_user_manual.html#_constraints\r\n  * Like iterators these classes deal with user data, for me when something has that purpose I think public API.\r\n  * The method that returns a KeyExtent could be deprecated for removal for now if the package is promoted to public API.\r\n  * There is a shell command for dealing with constraints","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811147061/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811152811","html_url":"https://github.com/apache/accumulo/issues/1990#issuecomment-811152811","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1990","id":811152811,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTE1MjgxMQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T15:23:06Z","updated_at":"2021-03-31T15:23:06Z","author_association":"CONTRIBUTOR","body":"We have been manually testing changes so far.  This is going to be fun to figure out how to write ITs for.  One approach to look into could be using the good old slow iterator, giving a chance to observe external compaction metadata in an IT.  However timing  like that is still iffy and makes ITs unstable.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811152811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811179614","html_url":"https://github.com/apache/accumulo/issues/1990#issuecomment-811179614","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1990","id":811179614,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTE3OTYxNA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T15:59:01Z","updated_at":"2021-03-31T15:59:01Z","author_association":"CONTRIBUTOR","body":"Maybe have a separate utility for testing external compactions in accumulo-testing?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811179614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811216640","html_url":"https://github.com/apache/accumulo/issues/1992#issuecomment-811216640","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1992","id":811216640,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTIxNjY0MA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T16:31:15Z","updated_at":"2021-03-31T16:31:15Z","author_association":"CONTRIBUTOR","body":"One use case I would like to experiment with that will need metrics is dynamically adjusting the number of external compactors running in Kubernetes based on the number of external compactions queued.  To test this scenario I would somehow need to obtain the running and queued counts from Accumulo.  Since not all running compactors may necessarily be running a compaction, that is why I am thinking the running count metrics may also be useful.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811216640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811223376","html_url":"https://github.com/apache/accumulo/pull/1980#issuecomment-811223376","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1980","id":811223376,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTIyMzM3Ng==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T16:35:18Z","updated_at":"2021-03-31T16:35:18Z","author_association":"CONTRIBUTOR","body":"I went ahead and added a format function people can use and also one that just returns the long value for it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811223376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811285634","html_url":"https://github.com/apache/accumulo/issues/1990#issuecomment-811285634","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1990","id":811285634,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTI4NTYzNA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T17:47:47Z","updated_at":"2021-03-31T17:47:47Z","author_association":"CONTRIBUTOR","body":"> Maybe have a separate utility for testing external compactions in accumulo-testing?\r\n\r\nWe could use the existing code in accumulo-testing and run continous ingest w/ configuration to use external compactions for large compactions.  Run that for a day or two and then verify it looking for lost data.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/811285634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/812231746","html_url":"https://github.com/apache/accumulo/issues/1984#issuecomment-812231746","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1984","id":812231746,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjIzMTc0Ng==","user":{"login":"sjyang18","id":41694933,"node_id":"MDQ6VXNlcjQxNjk0OTMz","avatar_url":"https://avatars.githubusercontent.com/u/41694933?v=4","gravatar_id":"","url":"https://api.github.com/users/sjyang18","html_url":"https://github.com/sjyang18","followers_url":"https://api.github.com/users/sjyang18/followers","following_url":"https://api.github.com/users/sjyang18/following{/other_user}","gists_url":"https://api.github.com/users/sjyang18/gists{/gist_id}","starred_url":"https://api.github.com/users/sjyang18/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sjyang18/subscriptions","organizations_url":"https://api.github.com/users/sjyang18/orgs","repos_url":"https://api.github.com/users/sjyang18/repos","events_url":"https://api.github.com/users/sjyang18/events{/privacy}","received_events_url":"https://api.github.com/users/sjyang18/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T23:32:03Z","updated_at":"2021-04-02T02:28:16Z","author_association":"CONTRIBUTOR","body":"When I enabled both TLS and SASL in Zookeeper side, I am getting more ACL in /accumulo/*/delegation_token_keys.\r\n\r\n```\r\n2021-04-01T22:05:26,786 [delegation.ZooAuthenticationKeyDistributor] ERROR: Saw more than one ACL on the node\r\n2021-04-01T22:05:26,788 [delegation.ZooAuthenticationKeyDistributor] ERROR: Expected /accumulo/1478471c-189b-453d-b186-bdc0bc84215c/delegation_token_keys to have ACLs [31,s{'auth,'}\r\n] but was [31,s{'x509,'CN=accucluster3-0.example.domain.com}\r\n, 31,s{'sasl,'azureuser}\r\n, 31,s{'digest,'accumulo:KBeh49allLP6OCuJmbGiQ7Q0guQ=}\r\n]\r\n```\r\n\r\nLooking at   https://github.com/apache/accumulo/blob/aab34a980d7a9ccad63797913b99b331c5cbbaae/server/base/src/main/java/org/apache/accumulo/server/security/delegation/ZooAuthenticationKeyDistributor.java#L72, it expects only one ACL, with one digest, accumulo ACL. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/812231746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/813390478","html_url":"https://github.com/apache/accumulo/issues/1992#issuecomment-813390478","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1992","id":813390478,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzM5MDQ3OA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T13:23:23Z","updated_at":"2021-04-05T13:23:23Z","author_association":"CONTRIBUTOR","body":"@keith-turner started this with [commit](https://github.com/apache/accumulo/commit/f3ece8801ebf027bb1e7b3b665bd14ae90012c6f)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/813390478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/813397289","html_url":"https://github.com/apache/accumulo/issues/1986#issuecomment-813397289","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1986","id":813397289,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzM5NzI4OQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T13:38:33Z","updated_at":"2021-04-05T13:38:33Z","author_association":"CONTRIBUTOR","body":"Reviewed this code and it matches what is being done in TabletServer.announceExistence() which creates a node containing the servers Thrift client address and then attempts to get a lock at the same path with a Watcher that will Halt the process if the node is deleted or the ZooKeeper communication is interrupted. I think this is correct.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/813397289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/814272257","html_url":"https://github.com/apache/accumulo/issues/1987#issuecomment-814272257","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1987","id":814272257,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDI3MjI1Nw==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T16:49:18Z","updated_at":"2021-04-06T16:49:32Z","author_association":"CONTRIBUTOR","body":"@dlmarion made some changes related to this in 75274ab29b5399788a8a61e4973acde3defa74bf. If those changes look good to you I think we could close this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/814272257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/814465489","html_url":"https://github.com/apache/accumulo/issues/2002#issuecomment-814465489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2002","id":814465489,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDQ2NTQ4OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T22:01:18Z","updated_at":"2021-04-06T22:01:18Z","author_association":"MEMBER","body":"@jjmar11 are you interested in working on this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/814465489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/814942401","html_url":"https://github.com/apache/accumulo/issues/2004#issuecomment-814942401","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2004","id":814942401,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDk0MjQwMQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-07T14:04:37Z","updated_at":"2021-04-07T14:04:37Z","author_association":"CONTRIBUTOR","body":"I am running into a few inconsistent test failures with these changes. Namely, `AssignmentWatcherTest`. A few are consistently failing which are the ones being excluded. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/814942401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815026134","html_url":"https://github.com/apache/accumulo/issues/2002#issuecomment-815026134","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2002","id":815026134,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNTAyNjEzNA==","user":{"login":"jjmar11","id":80709086,"node_id":"MDQ6VXNlcjgwNzA5MDg2","avatar_url":"https://avatars.githubusercontent.com/u/80709086?v=4","gravatar_id":"","url":"https://api.github.com/users/jjmar11","html_url":"https://github.com/jjmar11","followers_url":"https://api.github.com/users/jjmar11/followers","following_url":"https://api.github.com/users/jjmar11/following{/other_user}","gists_url":"https://api.github.com/users/jjmar11/gists{/gist_id}","starred_url":"https://api.github.com/users/jjmar11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjmar11/subscriptions","organizations_url":"https://api.github.com/users/jjmar11/orgs","repos_url":"https://api.github.com/users/jjmar11/repos","events_url":"https://api.github.com/users/jjmar11/events{/privacy}","received_events_url":"https://api.github.com/users/jjmar11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-07T15:53:40Z","updated_at":"2021-04-07T15:53:40Z","author_association":"CONTRIBUTOR","body":"Yes. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815026134/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815051170","html_url":"https://github.com/apache/accumulo/issues/2003#issuecomment-815051170","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2003","id":815051170,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNTA1MTE3MA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-07T16:27:19Z","updated_at":"2021-04-07T16:27:19Z","author_association":"CONTRIBUTOR","body":"yeah I can look at it","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815051170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815073775","html_url":"https://github.com/apache/accumulo/issues/2004#issuecomment-815073775","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2004","id":815073775,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNTA3Mzc3NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-07T17:00:31Z","updated_at":"2021-04-07T17:00:31Z","author_association":"MEMBER","body":"@Manno15 Just keep in mind, the test that fails may not be the one that's actually the problem. It might be a previous test that messed with some internal static state.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815073775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815087323","html_url":"https://github.com/apache/accumulo/issues/2004#issuecomment-815087323","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2004","id":815087323,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNTA4NzMyMw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-07T17:21:00Z","updated_at":"2021-04-07T17:21:00Z","author_association":"CONTRIBUTOR","body":"Good point. I will keep that in mind. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/815087323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816636099","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-816636099","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":816636099,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjYzNjA5OQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T12:06:36Z","updated_at":"2021-04-09T12:06:36Z","author_association":"CONTRIBUTOR","body":"> The main question I have is: is it worth it? What's the difference in the total test runtime with reuseForks turned off and turned on? (mvn clean package runtime)\r\n\r\nGithub actions seems to show roughly have the time of completion for the unit-test portion. ~14m down to ~7-8 min. Locally, due to me running the tests in parallel, I only save roughly ~1 min. ~6min to ~5min.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816636099/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816753285","html_url":"https://github.com/apache/accumulo/pull/2008#issuecomment-816753285","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2008","id":816753285,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjc1MzI4NQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T15:12:05Z","updated_at":"2021-04-09T15:12:05Z","author_association":"CONTRIBUTOR","body":"Was the reasoning behind this change discussed elsewhere? The changes look good, just looking for more insight. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816753285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816771387","html_url":"https://github.com/apache/accumulo/pull/2008#issuecomment-816771387","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2008","id":816771387,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjc3MTM4Nw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T15:40:19Z","updated_at":"2021-04-09T15:40:19Z","author_association":"CONTRIBUTOR","body":"> Was the reasoning behind this change discussed elsewhere? The changes look good, just looking for more insight.\r\n\r\nNope. I was examining the code while trying to decipher another bug and noticed the two similar constructors. Only having one constructor makes the class easier to follow everywhere it's created (like using find usage in an IDE) and is less code. The other improvements were just bonuses.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816771387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816840030","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-816840030","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":816840030,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjg0MDAzMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T17:31:23Z","updated_at":"2021-04-09T17:31:23Z","author_association":"CONTRIBUTOR","body":"ConstraintCheckerTest is failing due to this change:\r\nhttps://github.com/apache/accumulo/pull/1985/files#diff-9b57b5f5a5804a57cdd64ac2b0aaeb91bea33de80cc1f11023c3c175376d0ed6R88\r\n\r\nI will rewrite the Mocks once we finalize the rest of this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816840030/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816840304","html_url":"https://github.com/apache/accumulo/pull/2006#issuecomment-816840304","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2006","id":816840304,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjg0MDMwNA==","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T17:31:53Z","updated_at":"2021-04-09T17:31:53Z","author_association":"CONTRIBUTOR","body":"> Also, have you looked into how these would apply to the latest branch? I think these classes may have changed in the newer branch, and it may help determine the appropriate 1.10 implementation to contextualize the target implementation in the main branch.\r\n\r\nThis change can be simply dropped when merging into 2.0 because the whole configuration mechanism changed there and the AccumuloConfiguration.Deriver mechanism takes care of this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816840304/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816842600","html_url":"https://github.com/apache/accumulo/pull/2008#issuecomment-816842600","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2008","id":816842600,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjg0MjYwMA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T17:35:55Z","updated_at":"2021-04-09T17:35:55Z","author_association":"CONTRIBUTOR","body":"The unit-tests pass locally. For some reason GitHub keeps timing out our second QA check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816842600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816873506","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-816873506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":816873506,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjg3MzUwNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T18:24:50Z","updated_at":"2021-04-09T18:28:24Z","author_association":"MEMBER","body":"@Manno15 This change actually broke the build. The exclude/include strategy won't work without renaming the tests or relocating the package they are in, because the maven-failsafe-plugin cannot load test classes from test jars that exist in the same package as classes loaded from the non-test jars, due to jar sealing violations. Unit tests run by maven-surefire-plugin don't have this problem because it doesn't load classes from jars, but from the `target/classes` directory (since it runs before the jars are built at the `package` phase).\r\n\r\nSee https://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html for more info about jar sealing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816873506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816896329","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-816896329","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":816896329,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjg5NjMyOQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T19:03:33Z","updated_at":"2021-04-09T19:03:33Z","author_association":"CONTRIBUTOR","body":"@ctubbsii That is my mistake. I will take a look at this next week. My apologies. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816896329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816898686","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-816898686","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":816898686,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNjg5ODY4Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-09T19:07:20Z","updated_at":"2021-04-09T19:07:20Z","author_association":"MEMBER","body":"No problem. I knew about this possibility, but it didn't occur to me to bring it up before.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/816898686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817807025","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-817807025","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":817807025,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzgwNzAyNQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T13:22:04Z","updated_at":"2021-04-12T13:22:04Z","author_association":"CONTRIBUTOR","body":"@ctubbsii What do you think the most appropriate solution would be? Remove the exclude/include and simply rename the packages to an 'IT' variant or keep the include/exclude just to list the ones that break the build and then either rename or move them? I noticed at least one of the tests will have issues with moving based on a class it depends on. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817807025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817833586","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-817833586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":817833586,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzgzMzU4Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T13:56:04Z","updated_at":"2021-04-12T13:56:04Z","author_association":"MEMBER","body":"@Manno15 Either way, in order to avoid jar sealing violations, they will need to be moved to a package (or packages) that does not exist in the regular, non-test jars. If you want to keep the current names, so you have a list of excludes/includes to track, that's fine. But rename or not, they do need to be in different packages if they are being run by failsafe instead of surefire.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817833586/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817894181","html_url":"https://github.com/apache/accumulo/issues/2003#issuecomment-817894181","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2003","id":817894181,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzg5NDE4MQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T15:12:16Z","updated_at":"2021-04-12T15:12:16Z","author_association":"CONTRIBUTOR","body":"@keith-turner - we talked about this last week, right? TServer going down should not cancel external compaction that is running, right? If so, I can take this over and make the necessary code mods.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817894181/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817904729","html_url":"https://github.com/apache/accumulo/issues/2003#issuecomment-817904729","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2003","id":817904729,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzkwNDcyOQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T15:25:58Z","updated_at":"2021-04-12T15:25:58Z","author_association":"CONTRIBUTOR","body":"Right, it should not cancel them.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817904729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817917683","html_url":"https://github.com/apache/accumulo/issues/1992#issuecomment-817917683","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1992","id":817917683,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzkxNzY4Mw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T15:42:57Z","updated_at":"2021-04-12T15:42:57Z","author_association":"CONTRIBUTOR","body":"FYI that there is work in progress with migrating the current metrics framework from Hadoop Metrics2 to Micrometer at https://github.com/apache/accumulo/pull/1981\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817917683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817928715","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-817928715","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":817928715,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzkyODcxNQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T15:58:32Z","updated_at":"2021-04-12T15:58:32Z","author_association":"CONTRIBUTOR","body":"Can you give a brief summary of what happens when an external compaction completes?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817928715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817931327","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-817931327","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":817931327,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzkzMTMyNw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T16:01:41Z","updated_at":"2021-04-12T16:01:41Z","author_association":"CONTRIBUTOR","body":"Are there sanity checks in place that verify that the input files for the external compaction are still in the current set of files for the tablet when the external compaction is committed? I'm thinking about the case where more than one external compaction is in progress when the table is offlined and we need to commit the compactions in order when the table is brought back online.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817931327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817946992","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-817946992","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":817946992,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzk0Njk5Mg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T16:22:49Z","updated_at":"2021-04-12T16:24:07Z","author_association":"CONTRIBUTOR","body":"We will have to take in consideration all offline operations as they currently make assumptions about the state of the table when it is offline. For example, An Admin offlines a table in order to perform an exportTable. The exportTable behavior will now have to take in consideration external compactions. Ideally, this new consideration won't make the Admin's life more difficult.  \r\n\r\nIf we allow external compactions to continue when a table is offline, I think we will also have to modify all the offline operations to check for running external compactions and handle them in some way. I have no idea how difficult this would be as offline behavior is rather mysterious and elusively sprinkled across different operations. For example, a new table created offline probably won't be affected but I am not sure about exportTable, table clone, bulk imports, or the offline scan map reduce option. Also didn't we add offline splits in 2.0 as well?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817946992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817963821","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-817963821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":817963821,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNzk2MzgyMQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T16:47:25Z","updated_at":"2021-04-12T16:47:25Z","author_association":"CONTRIBUTOR","body":"@ctubbsii @keith-turner would like to get your thoughts on the Constraints API. I made a new Constraint and Violations in `org.apache.accumulo.core.data.constraints`. I made the Constraint interface and Violations class extend the new ones. I copied over the Constraint implementations that we have provided to users (DefaultKeySizeConstraint, NoDeleteConstraint and VisibilityConstraint) to the new package. I am not sure if this is what we want though. I didn't think it necessary to create new versions of these classes since they aren't changing but the move will break usage of the classes and break any user classes extending them.\r\n\r\nAlso, do you think we need to create 2 versions of tests? I currently just copied the old tests to the new package and made them use the new classes. I think it would be nice to at least have a test that maintains the deprecated functionality to ensure I haven't broken anything.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/817963821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818026878","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-818026878","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":818026878,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODAyNjg3OA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T18:21:24Z","updated_at":"2021-04-12T18:21:24Z","author_association":"CONTRIBUTOR","body":">Are there sanity checks in place that verify that the input files for the external compaction are still in the current set of files for the tablet when the external compaction is committed?\r\n\r\nYeah that is done by the following sanity check which existed before external compactions.\r\n\r\nhttps://github.com/apache/accumulo/blob/183387ab6de5c82ed23f9b236a76ea7fce669be4/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/DatafileManager.java#L424\r\n\r\n> For example, a new table created offline probably won't be affected but I am not sure about exportTable, table clone, bulk imports, or the offline scan map reduce option. Also didn't we add offline splits in 2.0 as well?\r\n\r\nAs currently implemented external compactions running against a table that is offline do not commit (update tablet metadata) until the table comes back online.  So this should not impact any of those operations.  Also if when the table comes back online the tablet for the ext compaction no longer exists for some reason (like split/merge), then the commit operation will be a no-op.\r\n\r\nI think all of these cases you mentioned are good reasons to never commit an external compaction in an offline table.  Which was something I was uncertain about.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818026878/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818040783","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-818040783","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":818040783,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODA0MDc4Mw==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T18:40:14Z","updated_at":"2021-04-12T18:43:01Z","author_association":"CONTRIBUTOR","body":"> Can you give a brief summary of what happens when an external compaction completes?\r\n\r\n1. The compactor makes an RPC call the compaction coordinator to let it know the compactions completed\r\n2. The coordinator writes an entry to the ~ecomp section of the metadata table recording the compaction completed AND queues up an async RPC to the tablet to let it know the ext compaction completed.\r\n3. The coordinator periodically scans the ~ecomp section of the metadata table looking for tablets to notify\r\n4. When the tablet recieves the message that an external compaction completed, it does some sanity checks and if everything looks ok it will :\r\n   1. Update tablets in memory list of files\r\n   2. Update tablet metadata (deleting the tablets information about the external compaction and updating the files atomically in a single mutation)\r\n   3. Delete ~ecomp entry from metadata table","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818040783/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818046254","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-818046254","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":818046254,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODA0NjI1NA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T18:48:05Z","updated_at":"2021-04-12T18:48:05Z","author_association":"CONTRIBUTOR","body":"On a commit are you using KeyExtent prevRow and endRow to determine if the range is that same to check if split / merge has occurred?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818046254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818062276","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-818062276","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":818062276,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODA2MjI3Ng==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T19:07:28Z","updated_at":"2021-04-12T19:07:28Z","author_association":"CONTRIBUTOR","body":"> On a commit are you using KeyExtent prevRow and endRow to determine if the range is that same to check if split / merge has occurred?\r\n\r\nYes.  Each external compaction has a UUID that identifies it.  Each tablet records running external compactions in the tablets metadata using the UUID.   A commit message references the UUID and tservers map that to a tablet.  That reminds we need to ensure that when a tablet splits or merges, that no external compaction metadata propagates.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818062276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818070657","html_url":"https://github.com/apache/accumulo/issues/1998#issuecomment-818070657","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1998","id":818070657,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODA3MDY1Nw==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T19:21:22Z","updated_at":"2021-04-12T19:21:22Z","author_association":"CONTRIBUTOR","body":"I opened #2011 and #2012 based on previous comment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818070657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818107453","html_url":"https://github.com/apache/accumulo/issues/1997#issuecomment-818107453","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1997","id":818107453,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODEwNzQ1Mw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T19:54:39Z","updated_at":"2021-04-12T19:54:39Z","author_association":"CONTRIBUTOR","body":"Added a Watcher to the Compactor in 8b54b3f. If the Watcher gets the NodeDeleted event, then it cancels the compaction.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818107453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818112876","html_url":"https://github.com/apache/accumulo/issues/2013#issuecomment-818112876","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2013","id":818112876,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODExMjg3Ng==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-12T19:57:14Z","updated_at":"2021-04-12T20:14:12Z","author_association":"CONTRIBUTOR","body":"I think tablet servers should not delete the external compaction final state markers when they do not know about the external compaction.  They should only delete these markers when they are hosting the tablet related to the compaction and the tablet knows about the compaction.\r\n\r\nFor final state markers that reference external compactions that no longer exists or tablets that no longer exist, the coordinator could periodically look for these and clean them up.  This periodic detection would be similar to what the dead compaction detection is currently doing, but would be looking for the inverse.  The periodic algorithm could do the following.\r\n\r\n  1. Scan the final states markers in metadata table (~ecomp section) and store them in a set w/ UUID (compaction id) as key.\r\n  2. Scan the metadata tablets section looking for compactions tablets think are running and remove them from the set.\r\n  3. Delete any final state markers in the set since these reference tablets and/or external compactions that no longer exists.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818112876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818460037","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-818460037","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":818460037,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODQ2MDAzNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T05:56:42Z","updated_at":"2021-04-13T05:56:42Z","author_association":"MEMBER","body":"@Manno15 Okay, so, I did a partial revert, changing the default value for reuseForks to false for surefire, and removing the includes/excludes, just to get things working again, so we can get other PRs merged. If some tests can be renamed to the `*IT` pattern, and placed in a different (sub)package, then that's one option. Another option would be to run an extra execution of maven-surefire-plugin for just those tests, with reuseForks specifically turned off (similar to how minicluster/pom.xml forces forkCount to be 1). However, it may be okay just to leave this configurable for now, and set the default value to true later, after further improvements. I'm not sure how much work any of these options are.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818460037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818617134","html_url":"https://github.com/apache/accumulo/pull/2007#issuecomment-818617134","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2007","id":818617134,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODYxNzEzNA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T10:06:34Z","updated_at":"2021-04-13T10:06:34Z","author_association":"CONTRIBUTOR","body":"I will investigate further. The extra execution of surefire is interesting. Either way, having it configurable is a good place to be in the meantime. Thanks for taking a look and doing the partial revert @ctubbsii ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818617134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818690715","html_url":"https://github.com/apache/accumulo/issues/2012#issuecomment-818690715","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2012","id":818690715,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODY5MDcxNQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T12:19:32Z","updated_at":"2021-04-13T12:19:32Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I modified the TServer and Coordinator pass the Extent to the TServer on compaction completion. I left two CBUG comments in CompactionManager as a reminder to complete the wiring up of the sanity checks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818690715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818705479","html_url":"https://github.com/apache/accumulo/issues/2011#issuecomment-818705479","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2011","id":818705479,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODcwNTQ3OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T12:43:58Z","updated_at":"2021-04-13T12:43:58Z","author_association":"CONTRIBUTOR","body":"As a reference for others, here is the point in the code where we cancel compactions. \r\nIt is called while closing the Tablet in `initiateClose(true)` during `Tablet.split()`:\r\nhttps://github.com/apache/accumulo/blob/9b504121dd69bf033dced56adb55d727b0eafdc4/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/Tablet.java#L1204","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818705479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818721857","html_url":"https://github.com/apache/accumulo/issues/1999#issuecomment-818721857","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1999","id":818721857,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODcyMTg1Nw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T13:08:17Z","updated_at":"2021-04-13T13:08:17Z","author_association":"CONTRIBUTOR","body":"I just ran into this while testing with fluo-uno. This might be a blocker to testing. I'm going to dig in and see what I can find.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818721857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818769389","html_url":"https://github.com/apache/accumulo/issues/1999#issuecomment-818769389","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1999","id":818769389,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODc2OTM4OQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T14:12:47Z","updated_at":"2021-04-13T14:12:47Z","author_association":"CONTRIBUTOR","body":"I made a change locally which seems to work. The change is to use `candidates` instead of `Set.copyOf(selectedFiles)` [here](https://github.com/apache/accumulo/blob/1451-external-compactions-feature/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L526). I think the issue is that `selectedFiles` is being modified in another thread (while loading data into the table new files are created when mutations are flushed from memory). In most cases modification of `selectedFiles` is done within a `synchronized(this)` block, except in one method where the method has the `synchronized` modifier.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818769389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818844962","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-818844962","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":818844962,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODg0NDk2Mg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T15:51:39Z","updated_at":"2021-04-13T15:51:39Z","author_association":"CONTRIBUTOR","body":"> @ctubbsii @keith-turner would like to get your thoughts on the Constraints API. I made a new Constraint and Violations in `org.apache.accumulo.core.data.constraints`. I made the Constraint interface and Violations class extend the new ones. I copied over the Constraint implementations that we have provided to users (DefaultKeySizeConstraint, NoDeleteConstraint and VisibilityConstraint) to the new package. I am not sure if this is what we want though. I didn't think it necessary to create new versions of these classes since they aren't changing but the move will break usage of the classes and break any user classes extending them.\r\n> \r\n> Also, do you think we need to create 2 versions of tests? I currently just copied the old tests to the new package and made them use the new classes. I think it would be nice to at least have a test that maintains the deprecated functionality to ensure I haven't broken anything.\r\n\r\nI think I found a good solution in 667880f. I moved the old tests to the new API package and created a new test called `OldConstraintTest`. The `OldConstraintTest` is a consolidation of all the old tests so we can maintain backwards compatibility. I also had to create a new method name for the check method because I couldn't get around the ambiguous method name error. Let me know what you guys think.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818844962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818915204","html_url":"https://github.com/apache/accumulo/pull/2015#issuecomment-818915204","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2015","id":818915204,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODkxNTIwNA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T17:30:31Z","updated_at":"2021-04-13T17:30:31Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I wanted to get my current work out there so you could give some thoughts on it. I am still looking into the separate execution of the `maven-surefire-plugin` which is why this is only a draft for the moment. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818915204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818994661","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-818994661","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":818994661,"node_id":"MDEyOklzc3VlQ29tbWVudDgxODk5NDY2MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-13T19:24:18Z","updated_at":"2021-04-13T19:24:18Z","author_association":"CONTRIBUTOR","body":"I just saw this happen in the testing repo too, which may indicate it has nothing to do with recent changes to the main repo.\r\nhttps://github.com/apache/accumulo-testing/pull/138/checks?check_run_id=2336663420","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/818994661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819282264","html_url":"https://github.com/apache/accumulo/pull/2015#issuecomment-819282264","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2015","id":819282264,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTI4MjI2NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T07:04:36Z","updated_at":"2021-04-14T07:05:14Z","author_association":"MEMBER","body":"In order to run the problematic tests with `reuseForks=true` set for the others, you'll need to exclude these classes from the main configuration of `maven-surefire-plugin` with `<excludes>` (this can be done in core/pom.xml and server/tserver/pom.xml, rather than the root pom.xml, where you've made the current changes), and then you will need to have an additional execution of the surefire plugin, as in the following (not complete):\r\n\r\n```xml\r\n<build>\r\n  <plugins>\r\n    <plugin>\r\n      <artifactId>maven-surefire-plugin</artifactId>\r\n      <executions>\r\n        <execution>\r\n          <id>no-reuse-forks-tests</id>\r\n          <goals>\r\n            <goal>test</goal>\r\n          </goals>\r\n          <configuration>\r\n            <reuseForks>false</reuseForks>\r\n            <includes />\r\n          </configuration>\r\n        </execution>\r\n      </executions>\r\n    </plugin>\r\n  </plugins>\r\n</build>\r\n```\r\n\r\nWhat I'm not sure about is whether the plugin's second execution will clobber any test output from the previous (default, built-in) execution.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819282264/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819545532","html_url":"https://github.com/apache/accumulo/pull/2018#issuecomment-819545532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2018","id":819545532,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTU0NTUzMg==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T14:05:57Z","updated_at":"2021-04-14T14:05:57Z","author_association":"CONTRIBUTOR","body":"FWIW I'm working on a test right now that extends TServer. I opted to add the `protected` modifier to the constructor and placed the class in the test package. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819545532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819570739","html_url":"https://github.com/apache/accumulo/pull/2018#issuecomment-819570739","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2018","id":819570739,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTU3MDczOQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T14:40:01Z","updated_at":"2021-04-14T14:40:01Z","author_association":"CONTRIBUTOR","body":"> FWIW I'm working on a test right now that extends TServer. I opted to add the `protected` modifier to the constructor and placed the class in the test package.\r\n\r\nOK cool. I wasn't sure if it was appropriate it or not. But it looks like being able to extend it for testing is very useful.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819570739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819584487","html_url":"https://github.com/apache/accumulo/pull/2018#issuecomment-819584487","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2018","id":819584487,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTU4NDQ4Nw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T14:56:41Z","updated_at":"2021-04-14T14:56:41Z","author_association":"CONTRIBUTOR","body":"I will close this since it seems making the constructor protected is a better move.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819584487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819645418","html_url":"https://github.com/apache/accumulo/pull/2020#issuecomment-819645418","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2020","id":819645418,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTY0NTQxOA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T16:20:26Z","updated_at":"2021-04-14T16:20:26Z","author_association":"CONTRIBUTOR","body":"Why? That information is useful in certain situations - especially if you have zk node failures or need to do a zk node restart.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819645418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819676434","html_url":"https://github.com/apache/accumulo/pull/2020#issuecomment-819676434","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2020","id":819676434,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTY3NjQzNA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T17:05:57Z","updated_at":"2021-04-14T17:05:57Z","author_association":"MEMBER","body":"> Why? That information is useful in certain situations - especially if you have zk node failures or need to do a zk node restart.\r\n\r\nThe reasoning seems discussed on the referenced issue. The underlying issue is that our ability to display this is dependent on an insecure and outdated way of retrieving information from the ZK servers (4LW) that have been replaced by a new way (Adminserver) and is broken by default, without significant extra work to support retrieving the information from ZK under a variety of circumstances (such as when TLS is enabled for the Adminserver).\r\n\r\nAs hinted at on the issue, but perhaps not explicitly stated, it's better to remove the responsibility of displaying ZK stats from Accumulo and let users monitor their own ZK instances their own way, via features provided by ZK, rather than us. The Accumulo monitor should not be responsible for monitoring other services in a user's cluster, but should be narrowly scoped to monitor Accumulo itself, leaving the responsibility of monitoring other services in a user's cluster to those other projects or to users. Even if the information is useful, it's not reasonable to consider the monitoring of other services in a user's cluster to be in scope for Accumulo, especially as the amount of code required to support it grows (to handle 4LW and Adminserver, with and without TLS, etc.)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819676434/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819692920","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-819692920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":819692920,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTY5MjkyMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T17:32:23Z","updated_at":"2021-04-14T17:32:23Z","author_association":"MEMBER","body":"I noticed that in these cases, the logs aren't being uploaded. It looks like the timeout is set on entire jobs, so the upload-artifact steps never happen if the timeout is reached in running the Maven build. This can be addressed by moving the timeout-minutes to the steps, rather than under the job. That way, if any individual step times out, the other steps (like uploading log artifacts) still run.\r\n\r\nAlso, the last thing done in a workflow before the runner shuts down is to kill orphaned processes. I noticed that there may be fewer processes running than expected. Here is an example from a recent timeout:\r\n\r\n```\r\n2021-04-14T17:17:43.3208229Z Cleaning up orphan processes\r\n2021-04-14T17:17:43.3656311Z Terminate orphan process: pid (1580) (java)\r\n2021-04-14T17:17:43.3799021Z Terminate orphan process: pid (18229) (sh)\r\n2021-04-14T17:17:43.3833188Z Terminate orphan process: pid (18233) (java)\r\n2021-04-14T17:17:43.3882297Z Terminate orphan process: pid (18253) (java)\r\n2021-04-14T17:17:43.3938861Z Terminate orphan process: pid (18361) (java)\r\n2021-04-14T17:17:43.4044764Z Terminate orphan process: pid (18362) (java)\r\n2021-04-14T17:17:43.4095156Z Terminate orphan process: pid (18475) (java)\r\n2021-04-14T17:17:43.4151569Z Terminate orphan process: pid (18476) (java)\r\n```\r\n\r\nI'm not sure which java processes are still running at the end of the job, but it looks like mini isn't starting or shutting down correctly when everything times out and is terminated. It would be useful to get more information in the output about what these processes are, in order to determine what is causing the problem. A simple \"ps aux | grep jav[a]\" or similar might help provide more insight into which processes are left running (and perhaps which aren't running that should have been).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819692920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819720780","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-819720780","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":819720780,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTcyMDc4MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T17:59:47Z","updated_at":"2021-04-14T17:59:47Z","author_association":"MEMBER","body":"I updated the timeout settings, but have not yet attempted to add any logging about the still running processes. I'm hoping the logs will have some insights, now that they *should* be uploaded on timeouts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819720780/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819793131","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-819793131","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":819793131,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTc5MzEzMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T19:58:04Z","updated_at":"2021-04-14T21:50:31Z","author_association":"MEMBER","body":"Okay, so fixing the timeout works. I was able to get the logs. It looks like services are starting up okay, but cannot talk to each other. The services register themselves using the local host name determined by using reverse DNS on the local IP address. When services are reached on localhost, everything works fine (e.g. services can talk to zookeeper on `localhost:33647` just fine). I don't see any errors with sending to the tracer service, but do see it listening on an IP address (`[tracer.AsyncSpanReceiver] INFO : starting span receiver with hostname 10.1.0.83`) instead of resolving a hostname.\r\n\r\nTservers and the master in 1.10 (the build I was testing) show that they are listening on hostname `fv-az95-160`, but when the master tries to talk to the tservers, it fails to connect and times out:\r\n\r\n```\r\n2021-04-14T18:10:40,775 [manager.Manager] INFO : New servers: [fv-az95-160:45343[100000b12f00006], fv-az95-160:36911[100000b12f00002]]\r\n2021-04-14T18:10:40,794 [manager.EventCoordinator] INFO : There are now 2 tablet servers            \r\n2021-04-14T18:10:40,803 [manager.Manager] INFO : tserver availability check disabled, continuing with-2 servers. To enable, set manager.startup.tserver.avail.min.count\r\n2021-04-14T18:10:40,956 [server.ServerUtil] WARN : System swappiness setting is greater than ten (60) which can cause time-sensitive operations to be delayed. Accumulo is time sensitive because it needs to maintain distributed lock agreement.\r\n2021-04-14T18:10:40,980 [manager.Manager] INFO : Setting manager lock data to fv-az95-160:35861     \r\n2021-04-14T18:10:41,040 [metrics.ManagerMetricsFactory] INFO : Registered replication metrics module   \r\n2021-04-14T18:10:41,061 [metrics.ManagerMetricsFactory] INFO : Registered FATE metrics module       \r\n2021-04-14T18:10:41,061 [manager.Manager] INFO : All metrics modules registered                        \r\n2021-04-14T18:10:41,330 [balancer.TableLoadBalancer] INFO : Loaded class org.apache.accumulo.core.spi.balancer.SimpleLoadBalancer for table +r\r\n2021-04-14T18:10:41,331 [manager.Manager] INFO : Assigning 1 tablets                                \r\n2021-04-14T18:11:20,829 [rpc.ThriftUtil] WARN : Failed to open transport to fv-az95-160:36911          \r\n2021-04-14T18:11:20,830 [rpc.ThriftUtil] WARN : Failed to open transport to fv-az95-160:45343          \r\n2021-04-14T18:11:20,830 [manager.Manager] ERROR: unable to get tablet server status fv-az95-160:36911[100000b12f00002] org.apache.thrift.transport.TTransportException: java.nio.channels.ClosedByInterruptException\r\n```\r\n\r\nThere is an additional stack trace further along, but it doesn't have any additional information, just that there was a timeout trying to connect to the tserver.\r\n\r\nSo, either there is a problem with DNS/rDNS mapping between the hostname and IP address of the runner, or there is some other security / firewall policy preventing services from talking on the non-localhost IP address.\r\n\r\nThis is clearly the result of some change in GitHub Actions runners, and not in our code, since it also affects minicluster in 1.10.\r\n\r\nThe most likely change I can think of that could have caused this is the switch of `ubuntu-latest` from mapping to `ubuntu-18.04` to `ubuntu-20.04`. However, I don't have an Ubuntu instance to experiment with at the moment, so this is where I'm stuck for now.\r\n\r\nThere's a few options forward, if it is an issue with Ubuntu 20.04:\r\n1. ~Force using ubuntu-18.04 instead of ubuntu-latest~ didn't work, test still hung and timed out with the same errors connecting\r\n2. ~Disable firewalld (or other firewall, if it's running on Ubuntu 20.04 runners)~ didn't work, the firewall is already inactive\r\n3. ~Add firewall rules (if the problem is the firewall)~ firewall is already inactive\r\n4. Fix rDNS name lookup for the local IP address by adding a hosts entry to /etc/hosts or doing something in /etc/nsswitch.conf to use the myhostname local name service rather than DNS and hostnamectl (if the problem is DNS)\r\n5. Force minicluster services to use localhost\r\n6. Get GitHub to fix it, if it's a problem with runner\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819793131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819816644","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-819816644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":819816644,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTgxNjY0NA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T20:39:11Z","updated_at":"2021-04-14T20:39:11Z","author_association":"CONTRIBUTOR","body":"If it helps, locally I run Ubuntu 20.04.2 LTS (Focal Fossa) and have not seen this occur.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/819816644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820013155","html_url":"https://github.com/apache/accumulo/pull/2021#issuecomment-820013155","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2021","id":820013155,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDAxMzE1NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T02:33:54Z","updated_at":"2021-04-15T02:33:54Z","author_association":"MEMBER","body":"I'm going to open a separate PR for this. I want to break things down so it's easier to review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820013155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820341849","html_url":"https://github.com/apache/accumulo/pull/2023#issuecomment-820341849","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2023","id":820341849,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDM0MTg0OQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T11:12:36Z","updated_at":"2021-04-15T11:12:36Z","author_association":"CONTRIBUTOR","body":"The build seems to be hanging on the unit tests. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820341849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820342029","html_url":"https://github.com/apache/accumulo/pull/2022#issuecomment-820342029","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2022","id":820342029,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDM0MjAyOQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T11:12:56Z","updated_at":"2021-04-15T11:12:56Z","author_association":"CONTRIBUTOR","body":"The build seems to be hanging on the unit tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820342029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820347829","html_url":"https://github.com/apache/accumulo/pull/2020#issuecomment-820347829","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2020","id":820347829,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDM0NzgyOQ==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T11:23:22Z","updated_at":"2021-04-15T11:23:22Z","author_association":"CONTRIBUTOR","body":"> The removal of the `refreshZKTable` function from `overview.js` and the place where that function is called can also be included in this PR, and any other related javascript code that kept this table up-to-date can also be removed (if any), as well as any related CSS stylesheet information that was specific to this table.\r\n\r\nIt was a bit of oversight from my side, thanks for mentioning the clean up activity. I have removed the `refreshZKTable` function, calls to the function & also the 3 java programs under `/monitor/rest/zk` directory in the new commit. Hopefully, these are the one's (I think) that had kept the ZK table up-to-date. Let me know if there is anything else? \r\nI also did a regression test and ensured the behaviour is still the same. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820347829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820502918","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-820502918","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":820502918,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDUwMjkxOA==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T15:05:26Z","updated_at":"2021-04-15T15:05:26Z","author_association":"CONTRIBUTOR","body":"@milleruntime if someone configures one of the constraints that ship w/ Accumulo using the old package, like org.apache.accumulo.core.constraints.VisibilityConstraint is there anything that will make this work?  I looked and did not see anything.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820502918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820515553","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-820515553","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":820515553,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDUxNTU1Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T15:22:34Z","updated_at":"2021-04-15T15:22:34Z","author_association":"CONTRIBUTOR","body":"> @milleruntime if someone configures one of the constraints that ship w/ Accumulo using the old package, like org.apache.accumulo.core.constraints.VisibilityConstraint is there anything that will make this work? I looked and did not see anything.\r\n\r\nNo there is nothing to handle that. I assume as this PR is now, a runtime error like a `ClassNotFoundException` would occur. I think we could add something to the upgrade code to check configuration for old package names and either rename or warn the user. Otherwise I am not sure how we could handle this cleanly internally.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820515553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820525793","html_url":"https://github.com/apache/accumulo/pull/2015#issuecomment-820525793","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2015","id":820525793,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDUyNTc5Mw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T15:36:08Z","updated_at":"2021-04-15T15:36:08Z","author_association":"CONTRIBUTOR","body":"I added the exception as you suggested. Everything passes locally though it is hanging on the QA check which is unrelated. It is hard to verify that the second execution is running, so I am unsure if I did it correctly. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820525793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820556363","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-820556363","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":820556363,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDU1NjM2Mw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T16:17:03Z","updated_at":"2021-04-15T16:17:03Z","author_association":"CONTRIBUTOR","body":"According to https://github.blog/changelog/2020-10-29-github-actions-ubuntu-latest-workflows-will-use-ubuntu-20-04/. The change to 20.04 should have happened a few months ago (unless it took them this long to roll it out). I do not see any similar issue in their virtual-environments repository. If we are confident that it exists on their end, we can create a ticket there. \r\n \r\n It also says 18.04 is still supported so we test against that as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820556363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820662409","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-820662409","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":820662409,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDY2MjQwOQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T19:00:37Z","updated_at":"2021-04-15T19:00:37Z","author_association":"CONTRIBUTOR","body":"> Otherwise I am not sure how we could handle this cleanly internally.\r\n\r\nWould it be possible to create classes in the old package and that extend the new classes?  Like a VisConstraint class in the old package that simple extends the new VisConstraint class.  This makes it easy to configure either. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820662409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820773438","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-820773438","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":820773438,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDc3MzQzOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T22:44:46Z","updated_at":"2021-04-15T22:44:46Z","author_association":"MEMBER","body":"Okay, so I've spent a few hours looking into this today, and I think it's a bug in GitHub Actions DNS servers.\r\n\r\nIf you create a GitHub Actions job that simply prints the output of `hostname -i` and `hostname -I`, you can clearly see there's a problem. They don't return the same IP address. The former uses DNS to show the IP address based on the current machine's hostname. The latter shows the IP addresses for the non-loopback network interfaces on the current machine. The IP address from the DNS lookup does not match any of the network interfaces for this machine. So, clearly, something is wrong. You can confirm the local network interfaces with `ifconfig` or `ip -4 -br addr`.\r\n\r\nSince Accumulo services are listening on `0.0.0.0`, and using `hostname` to advertise themselves in ZooKeeper, and since `hostname` results in an IP address resolution that doesn't match any of the IP addresses for any of the local network interfaces on the current machine, of course it can't talk to the Accumulo process.... because it's using the wrong IP address!\r\n\r\nI tried a few different methods to force the name lookup to resolve correctly, including using `myhostname` entry in `/etc/nsswitch.conf` prior to `files dns`, I tried dropping `dns` from that as well, and I tried appending an entry in `/etc/hosts` with the correct IP address for the current host. All of these are hacks, and nothing seemed to work quite right. Another workaround would be to force minicluster services to listen on `localhost`/`127.0.0.1`. This isn't a great solution, but it might resolve the problems with misconfigured DNS in GitHub Actions runners.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820773438/reactions","total_count":3,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820782637","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-820782637","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":820782637,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDc4MjYzNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T22:57:38Z","updated_at":"2021-04-15T22:57:38Z","author_association":"MEMBER","body":"I filed a bug report with GitHub support.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820782637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820784955","html_url":"https://github.com/apache/accumulo/pull/2022#issuecomment-820784955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2022","id":820784955,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDc4NDk1NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T23:04:38Z","updated_at":"2021-04-15T23:04:38Z","author_association":"MEMBER","body":"> The build seems to be hanging on the unit tests.\r\n\r\nYeah, that's because of the DNS problem I identified in #2016 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820784955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820859984","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-820859984","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":820859984,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDg1OTk4NA==","user":{"login":"mjwall","id":2342,"node_id":"MDQ6VXNlcjIzNDI=","avatar_url":"https://avatars.githubusercontent.com/u/2342?v=4","gravatar_id":"","url":"https://api.github.com/users/mjwall","html_url":"https://github.com/mjwall","followers_url":"https://api.github.com/users/mjwall/followers","following_url":"https://api.github.com/users/mjwall/following{/other_user}","gists_url":"https://api.github.com/users/mjwall/gists{/gist_id}","starred_url":"https://api.github.com/users/mjwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mjwall/subscriptions","organizations_url":"https://api.github.com/users/mjwall/orgs","repos_url":"https://api.github.com/users/mjwall/repos","events_url":"https://api.github.com/users/mjwall/events{/privacy}","received_events_url":"https://api.github.com/users/mjwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T02:15:13Z","updated_at":"2021-04-16T02:15:13Z","author_association":"MEMBER","body":"> \r\n> \r\n> Okay, so I've spent a few hours looking into this today, and I think it's a bug in GitHub Actions DNS servers.\r\n> \r\n> If you create a GitHub Actions job that simply prints the output of `hostname -i` and `hostname -I`, you can clearly see there's a problem. They don't return the same IP address. The former uses DNS to show the IP address based on the current machine's hostname. The latter shows the IP addresses for the non-loopback network interfaces on the current machine. The IP address from the DNS lookup does not match any of the network interfaces for this machine. So, clearly, something is wrong. You can confirm the local network interfaces with `ifconfig` or `ip -4 -br addr`.\r\n> \r\n> Since Accumulo services are listening on `0.0.0.0`, and using `hostname` to advertise themselves in ZooKeeper, and since `hostname` results in an IP address resolution that doesn't match any of the IP addresses for any of the local network interfaces on the current machine, of course it can't talk to the Accumulo process.... because it's using the wrong IP address!\r\n> \r\n> I tried a few different methods to force the name lookup to resolve correctly, including using `myhostname` entry in `/etc/nsswitch.conf` prior to `files dns`, I tried dropping `dns` from that as well, and I tried appending an entry in `/etc/hosts` with the correct IP address for the current host. All of these are hacks, and nothing seemed to work quite right. Another workaround would be to force minicluster services to listen on `localhost`/`127.0.0.1`. This isn't a great solution, but it might resolve the problems with misconfigured DNS in GitHub Actions runners.\r\n\r\nNice detective work @ctubbsii ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820859984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820948839","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-820948839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":820948839,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDk0ODgzOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T06:38:03Z","updated_at":"2021-04-16T06:38:03Z","author_association":"MEMBER","body":"[Here's another report](https://lists.apache.org/thread.html/r40b2da182952f21a3b94696e6f1bf8594e7ff16e1c5979fe8b2d51c8%40%3Cbuilds.apache.org%3E) of the same issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820948839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820964113","html_url":"https://github.com/apache/accumulo/issues/2016#issuecomment-820964113","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2016","id":820964113,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDk2NDExMw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T07:05:51Z","updated_at":"2021-04-16T07:05:51Z","author_association":"MEMBER","body":"My previous attempt to fix this had a typo in the /etc/hosts filename. Correcting that typo should fix the issue, even though it's a hack. See PR #2024 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/820964113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821003464","html_url":"https://github.com/apache/accumulo/pull/2024#issuecomment-821003464","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2024","id":821003464,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTAwMzQ2NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T08:13:39Z","updated_at":"2021-04-16T08:13:39Z","author_association":"MEMBER","body":"Tested this multiple times. It works. Merged to main branch in dd0d88eb664fc60714a7283b357a51afaad3b899","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821003464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821087318","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-821087318","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":821087318,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTA4NzMxOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T10:42:03Z","updated_at":"2021-04-16T10:42:03Z","author_association":"CONTRIBUTOR","body":"I fired up Uno, created a table and then updated the core jar with these changes. I didn't see any errors until I tried to insert data into the table:\r\n<pre>\r\nroot@uno test> insert row3 cf cq val1\r\n\tConstraint Failures:\r\n\t\tConstraintViolationSummary(constrainClass:org.apache.accumulo.tserver.constraints.UnsatisfiableConstraint, violationCode:-1, violationDescription:Failed to load constraints, not accepting mutations., numberOfViolatingMutations:1)\r\n</pre>\r\n\r\nI also noticed that the table came with `org.apache.accumulo.core.constraints.DefaultKeySizeConstraint=1` by default. So this may be trickier than I had originally thought.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821087318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821101214","html_url":"https://github.com/apache/accumulo/pull/2024#issuecomment-821101214","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2024","id":821101214,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTEwMTIxNA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T11:09:36Z","updated_at":"2021-04-16T11:09:36Z","author_association":"CONTRIBUTOR","body":"Things seem to be passing consistently now, good job @ctubbsii ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821101214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821103354","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-821103354","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":821103354,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTEwMzM1NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T11:13:52Z","updated_at":"2021-04-16T11:13:52Z","author_association":"CONTRIBUTOR","body":"> > Otherwise I am not sure how we could handle this cleanly internally.\r\n> \r\n> Would it be possible to create classes in the old package and that extend the new classes? Like a VisConstraint class in the old package that simple extends the new VisConstraint class. This makes it easy to configure either.\r\n\r\nI think so but the existing `check()` method causes a \"method does not override or implement a method from a supertype\" cause of the Override annotation. I don't _think_ that the Override annotation will make a difference (my understanding is that it is just for the compiler to check your code but doesn't change the actual compiled code) but the classes will compile if I remove it. I can also override the new method and make it call the old one like I did with the old Constraint interface.\r\n\r\n<pre>\r\n@Override\r\n  public List<Short> checkMutation(Environment env, Mutation mutation) {\r\n    return check(env, mutation);\r\n  }\r\n</pre>","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821103354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821106908","html_url":"https://github.com/apache/accumulo/pull/2024#issuecomment-821106908","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2024","id":821106908,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTEwNjkwOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T11:21:38Z","updated_at":"2021-04-16T11:21:38Z","author_association":"CONTRIBUTOR","body":"Good catch!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821106908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821211722","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-821211722","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":821211722,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTIxMTcyMg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T14:20:03Z","updated_at":"2021-04-16T14:20:03Z","author_association":"CONTRIBUTOR","body":"I tested the latest changes on an upgrade and they work fine. I created the table `test` with the old code, installed new code and then ran:\r\n<pre>\r\nroot@uno test> constraint -l\r\norg.apache.accumulo.core.constraints.DefaultKeySizeConstraint=1\r\norg.apache.accumulo.core.constraints.VisibilityConstraint=2\r\nroot@uno test> insert row3 cf cq val1\r\nroot@uno test> scan\r\nrow1 cf:cq []\tval1\r\nrow2 cf:cq []\tval2\r\nrow3 cf:cq []\tval1\r\nroot@uno test> createtable test2\r\nroot@uno test2> constraint -l\r\norg.apache.accumulo.core.data.constraints.DefaultKeySizeConstraint=1\r\nroot@uno test2> constraint -a org.apache.accumulo.core.constraints.VisibilityConstraint\r\nAdded constraint org.apache.accumulo.core.constraints.VisibilityConstraint to table test2 with number 2\r\nroot@uno test2> insert row3 cf cq val1\r\nroot@uno test2> scan\r\nrow3 cf:cq []\tval1\r\nroot@uno test2> constraint -l\r\norg.apache.accumulo.core.constraints.VisibilityConstraint=2\r\norg.apache.accumulo.core.data.constraints.DefaultKeySizeConstraint=1\r\n</pre>\r\n\r\nI think the only other thing we could do is to print a warning if someone uses the deprecated Constraints.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821211722/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821288581","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-821288581","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":821288581,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTI4ODU4MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T16:18:52Z","updated_at":"2021-04-16T16:18:52Z","author_association":"CONTRIBUTOR","body":"> There are two possible options, one is to extend and make the class final like the following. This supports configuring the class, but does not support anyone extending the class in java. This would break any class extending the class.\r\n\r\nWhat if we don't make the class final? This would allow users to keep their current class that extends the deprecated class. I think they would get a warning about their class being deprecated then. Although they will probably only see the warning if they recompile after upgrading.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821288581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821291717","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-821291717","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":821291717,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTI5MTcxNw==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T16:24:25Z","updated_at":"2021-04-16T16:24:59Z","author_association":"CONTRIBUTOR","body":"> What if we don't make the class final?\r\n\r\nThat could be a possibility.  Would need to look at the new class hierarchy and make a determination about what the behavior is relative to prev Accumulo release.  I just threw the final in to avoid that analysis w/ the assumption that it no longer offers the same behavior w.r.t. to extensions.  But I have no idea if the behavior is the same.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821291717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821319162","html_url":"https://github.com/apache/accumulo/issues/1994#issuecomment-821319162","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1994","id":821319162,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTMxOTE2Mg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T17:14:01Z","updated_at":"2021-04-16T17:14:01Z","author_association":"CONTRIBUTOR","body":"One way to test this is to drop the ZK max client connections (maxClientCnxns=10) down to something low like 5-10. The problem is it is very hard to debug or do anything as Accumulo will hover in this degraded state. It gets enough connections to be alive and that's about it. You can't even debug ZK using 4 letter commands or the CLI because there aren't any connections. There may be a sweet spot where the Master and a tserver can get enough connections to function but a 2nd tserver will be half alive. I have yet to find what that is though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821319162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821319952","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-821319952","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":821319952,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTMxOTk1Mg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T17:15:37Z","updated_at":"2021-04-16T17:15:37Z","author_association":"CONTRIBUTOR","body":"Next I am going to redo OldConstraintsTest and have it test old classes extending the new ones to make sure they work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821319952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821328744","html_url":"https://github.com/apache/accumulo/pull/2020#issuecomment-821328744","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2020","id":821328744,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMTMyODc0NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-16T17:32:33Z","updated_at":"2021-04-16T17:32:33Z","author_association":"MEMBER","body":"I think this caused a failure in the WebViewsIT integration test. It's probably due to a test case against one of the removed REST endpoints that should also be removed, but I haven't investigated yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/821328744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822422194","html_url":"https://github.com/apache/accumulo/pull/2020#issuecomment-822422194","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2020","id":822422194,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMjQyMjE5NA==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-19T12:18:43Z","updated_at":"2021-04-19T12:18:43Z","author_association":"CONTRIBUTOR","body":"> I think this caused a failure in the WebViewsIT integration test. It's probably due to a test case against one of the removed REST endpoints that should also be removed, but I haven't investigated yet.\r\n\r\n@ctubbsii To investigate this, I ran `mvn clean verify -Dit.test=WebViewsIT -Dtest=foo` which resulted in the below failure. \r\n\r\n> [ERROR] Failures: \r\n[ERROR]   WebViewsIT.finishMocks:107 On mock #0 (zero indexed): \r\n  Unexpected method calls:\r\n    ServerContext.getZooKeepers()\r\n[ERROR]   WebViewsIT.testGetTablesConstraintPassing:143 should return status 200 expected:<200> but was:<500>\r\n[INFO] \r\n[ERROR] Tests run: 4, Failures: 2, Errors: 0, Skipped: 0\r\n\r\nAs part of the change, I included `getZooKeepers()` in `WebViews.java` which was missing in the relevant integration test. \r\nAfter adding `getZooKeepers()` to `createMocks()` method (as highlighted below) the integration test ran successfully. Let me know if you're ok with this change? Thanks \r\n\r\n<pre>\r\nexpect(contextMock.getInstanceID()).andReturn(\"foo\").atLeastOnce();\r\nexpect(contextMock.getInstanceName()).andReturn(\"foo\").anyTimes();\r\n<b>expect(contextMock.getZooKeepers()).andReturn(\"foo:2181\").anyTimes(); </b>\r\n</pre>\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822422194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822490385","html_url":"https://github.com/apache/accumulo/issues/1994#issuecomment-822490385","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1994","id":822490385,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMjQ5MDM4NQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-19T14:01:01Z","updated_at":"2021-04-20T18:22:11Z","author_association":"CONTRIBUTOR","body":"After some analysis running Accumulo 2.1 latest in Uno, it looks like each process at a minimum (no activity) takes the following ZK connections.\r\nZK Admin command - 1\r\nManager - 2\r\nGC - 2\r\nTracer - 3\r\nMonitor - 2\r\ntserver - 2 each\r\nscans, shell, clients - ~1 each","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822490385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822587653","html_url":"https://github.com/apache/accumulo/pull/2020#issuecomment-822587653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2020","id":822587653,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMjU4NzY1Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-19T16:04:55Z","updated_at":"2021-04-19T16:04:55Z","author_association":"MEMBER","body":"> expect(contextMock.getZooKeepers()).andReturn(\"foo:2181\").anyTimes();\r\n\r\nTested this change and it works. Applied in 8dfe443af55f5d3aacb12fb38c5002dcb61cb772","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822587653/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822728835","html_url":"https://github.com/apache/accumulo/issues/1992#issuecomment-822728835","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1992","id":822728835,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMjcyODgzNQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-19T19:31:22Z","updated_at":"2021-04-19T19:31:22Z","author_association":"CONTRIBUTOR","body":"I think the only thing that might be missing is the generator of queued/running metrics for each external queue like what was done with CompactionExecutorsMetrics on the internal queues","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/822728835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823286096","html_url":"https://github.com/apache/accumulo/pull/2015#issuecomment-823286096","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2015","id":823286096,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzI4NjA5Ng==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T13:44:34Z","updated_at":"2021-04-20T13:44:34Z","author_association":"CONTRIBUTOR","body":"Everything passes now and I confirmed the tests run. Had to add a line to reset the exclude tag after the initial execution finished. Overall, barely any time was added with the second execution (if any at all). ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823286096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823304838","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-823304838","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":823304838,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzMwNDgzOA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T14:08:44Z","updated_at":"2021-04-20T14:08:44Z","author_association":"CONTRIBUTOR","body":"I started creating a test to test a class that extends a deprecated constraint but I think I found a bug in one of the old classes https://github.com/apache/accumulo/pull/2025\r\nThis is on hold again until I get that fixed. Then I will update the tests to test a user extending the deprecated classes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823304838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823403678","html_url":"https://github.com/apache/accumulo/issues/1991#issuecomment-823403678","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1991","id":823403678,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzQwMzY3OA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T16:04:28Z","updated_at":"2021-04-20T16:04:28Z","author_association":"CONTRIBUTOR","body":"  * Add Compactor and CompactionCoordinator components at https://accumulo.apache.org/docs/2.x/getting-started/design#components.\r\n  * Update documentation at https://accumulo.apache.org/docs/2.x/getting-started/table_configuration#compaction for internal compaction and external compaction changes in 2.1\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823403678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823404781","html_url":"https://github.com/apache/accumulo/issues/1991#issuecomment-823404781","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1991","id":823404781,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzQwNDc4MQ==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T16:06:04Z","updated_at":"2021-04-20T16:06:04Z","author_association":"CONTRIBUTOR","body":"Changes should go into the next-release branch. https://github.com/apache/accumulo-website/tree/next-release\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823404781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823533331","html_url":"https://github.com/apache/accumulo/pull/2025#issuecomment-823533331","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2025","id":823533331,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzUzMzMzMQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T19:11:43Z","updated_at":"2021-04-20T19:11:43Z","author_association":"CONTRIBUTOR","body":"I guess it doesn't really matter if it is a bug or not, the question should be whether or not this should be changed. Changing this Constraint could break existing tables with big Row IDs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823533331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823559400","html_url":"https://github.com/apache/accumulo/issues/1134#issuecomment-823559400","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1134","id":823559400,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzU1OTQwMA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T19:54:57Z","updated_at":"2021-04-20T19:54:57Z","author_association":"CONTRIBUTOR","body":"And external example of external usage of current Accumulo metrics is at: https://code.nsa.gov/timely/docs/#collecting-metrics-from-hadoop-and-accumulo\r\nThis is something we should consider as we convert over that we should support. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823559400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823605204","html_url":"https://github.com/apache/accumulo/issues/1991#issuecomment-823605204","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1991","id":823605204,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzYwNTIwNA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T21:16:17Z","updated_at":"2021-04-20T21:16:17Z","author_association":"CONTRIBUTOR","body":"Changes up at https://github.com/apache/accumulo-website/pull/266/files","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823605204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823951031","html_url":"https://github.com/apache/accumulo/pull/2015#issuecomment-823951031","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2015","id":823951031,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzk1MTAzMQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-21T10:19:02Z","updated_at":"2021-04-21T10:19:02Z","author_association":"CONTRIBUTOR","body":"> I guess my main question at this point is: if a failure is introduced in the first execution, or in the second, does the plugin behave properly by failing the build and preserving the logs for the failed tests. Have you checked to see what happens when you introduce a failure in the first execution? The second?\r\n\r\nI will do more explicit testing today. From my observations though, everything appears to be running as expected. The second execution doesn't overwrite any logs and it has inherited all of the properties of the first execution so it behaves the same. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/823951031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/824047596","html_url":"https://github.com/apache/accumulo/pull/2015#issuecomment-824047596","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2015","id":824047596,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNDA0NzU5Ng==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-21T13:09:30Z","updated_at":"2021-04-21T13:09:30Z","author_association":"CONTRIBUTOR","body":"When a failure is introduced in the first execution, the build properly fails and all logs are preserved. The second execution does not start. \r\n\r\nWhen a failure is introduced in the second execution, the build fails after the second execution as expected. All logs are still preserved, including the first execution logs. This is true for both accumulo-core tests and accumulo-tserver tests. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/824047596/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/824073073","html_url":"https://github.com/apache/accumulo/pull/1985#issuecomment-824073073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1985","id":824073073,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNDA3MzA3Mw==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-21T13:44:49Z","updated_at":"2021-04-21T13:44:49Z","author_association":"CONTRIBUTOR","body":"I added a test for extending the deprecated constraint and tested upgrading in Uno. Regardless of what happens with #2025, I think the Constraint API is ready to go. @ctubbsii @keith-turner do you want to give it one final look?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/824073073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]