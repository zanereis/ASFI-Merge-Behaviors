[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721431347","html_url":"https://github.com/apache/couchdb/issues/3232#issuecomment-721431347","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3232","id":721431347,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTQzMTM0Nw==","user":{"login":"mtenrero","id":6759022,"node_id":"MDQ6VXNlcjY3NTkwMjI=","avatar_url":"https://avatars.githubusercontent.com/u/6759022?v=4","gravatar_id":"","url":"https://api.github.com/users/mtenrero","html_url":"https://github.com/mtenrero","followers_url":"https://api.github.com/users/mtenrero/followers","following_url":"https://api.github.com/users/mtenrero/following{/other_user}","gists_url":"https://api.github.com/users/mtenrero/gists{/gist_id}","starred_url":"https://api.github.com/users/mtenrero/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtenrero/subscriptions","organizations_url":"https://api.github.com/users/mtenrero/orgs","repos_url":"https://api.github.com/users/mtenrero/repos","events_url":"https://api.github.com/users/mtenrero/events{/privacy}","received_events_url":"https://api.github.com/users/mtenrero/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-03T23:39:24Z","updated_at":"2020-11-03T23:39:41Z","author_association":"NONE","body":"I've discovered this issue it's already fixed with this #3165 which it's already merged on 3.x branch.\r\n\r\nI've compiled from source and I can confirm the JWT authentication with ISS required claim it's working as expected.\r\n\r\nSo in the next release, it will be completely usable. For the moment if you need a CouchDB version with JWT auth and iss required claim, I'd suggest to compile from 3.x source branch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721431347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721438369","html_url":"https://github.com/apache/couchdb/pull/3243#issuecomment-721438369","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3243","id":721438369,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTQzODM2OQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T00:03:14Z","updated_at":"2020-11-04T00:03:14Z","author_association":"MEMBER","body":"Significantly modified my approach here (due to the original approach being very silly indeed).\r\n\r\nHere we can opt-in to allowing the GRV of the current transaction being used in the subsequent transaction only. Each transaction must choose for itself if this is appropriate. The only place we currently do this is when opening the users doc in chttpd_auth_cache, which solves the two txn problem for the common case.\r\n\r\nThis is a bit fiddly and ugly, opinions welcome.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721438369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721743383","html_url":"https://github.com/apache/couchdb/pull/3243#issuecomment-721743383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3243","id":721743383,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTc0MzM4Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T13:51:18Z","updated_at":"2020-11-04T13:51:18Z","author_association":"MEMBER","body":"changed tack again, this is simpler.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721743383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721812372","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-721812372","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":721812372,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTgxMjM3Mg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T15:50:06Z","updated_at":"2020-11-04T15:50:42Z","author_association":"MEMBER","body":"example\r\n\r\n```json\r\n{\r\n  \"cluster\": {\r\n    \"n\": 0,\r\n    \"q\": 0,\r\n    \"r\": 0,\r\n    \"w\": 0\r\n  },\r\n  \"compact_running\": false,\r\n  \"data_size\": 0,\r\n  \"db_name\": \"q\",\r\n  \"disk_format_version\": 0,\r\n  \"disk_size\": 0,\r\n  \"instance_start_time\": \"0\",\r\n  \"purge_seq\": 0,\r\n  \"encryption\": {\r\n    \"enabled\": false\r\n  },\r\n  \"update_seq\": \"000004e44366054100000000\",\r\n  \"uuid\": \"730549213c01c025acc49778776f430f\",\r\n  \"doc_del_count\": 0,\r\n  \"doc_count\": 56,\r\n  \"sizes\": {\r\n    \"external\": 2776,\r\n    \"views\": 440\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721812372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721818376","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-721818376","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":721818376,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTgxODM3Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T16:00:32Z","updated_at":"2020-11-04T16:00:32Z","author_association":"MEMBER","body":"This is good :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721818376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721826111","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-721826111","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":721826111,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTgyNjExMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T16:13:32Z","updated_at":"2020-11-04T16:13:56Z","author_association":"CONTRIBUTOR","body":"Looks reasonable. What about making it a regular callback. They key manager can just return `[]` and it would avoid the `function_exported` line?\r\n\r\n+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721826111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721833478","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-721833478","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":721833478,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTgzMzQ3OA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T16:25:55Z","updated_at":"2020-11-04T16:25:55Z","author_association":"MEMBER","body":"my reasoning is that the \"enabled\" flag is implemented for you automatically (and uniformly), and that might be all you need. I don't need you to implement a function if there's nothing new to report (contrast to the open_db/init_db where we want an affirmative boolean as to whether encryption happened).\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721833478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721848352","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-721848352","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":721848352,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMTg0ODM1Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-04T16:51:35Z","updated_at":"2020-11-04T16:51:35Z","author_association":"CONTRIBUTOR","body":"ah ok, that's reasonable","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/721848352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722274784","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-722274784","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":722274784,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjI3NDc4NA==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T10:03:10Z","updated_at":"2020-11-05T10:03:10Z","author_association":"NONE","body":"I wonder if there is some utility in collecting any key manager specific fields under another well-known field name e.g. `key_manager` or whatever sensible name applies\r\n```json\r\n\"encryption\" : {\r\n  \"enabled\": true,\r\n  \"key_manager\": {}\r\n}\r\n```\r\nthis might make interacting with the variable fields marginally easier for anything using strong typing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722274784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722351637","html_url":"https://github.com/apache/couchdb/pull/3244#issuecomment-722351637","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3244","id":722351637,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjM1MTYzNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T12:37:21Z","updated_at":"2020-11-05T12:37:21Z","author_association":"MEMBER","body":"@ricellis that's not a bad idea, I'll do that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722351637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722562272","html_url":"https://github.com/apache/couchdb/pull/3248#issuecomment-722562272","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3248","id":722562272,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjU2MjI3Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T18:35:17Z","updated_at":"2020-11-05T18:35:17Z","author_association":"CONTRIBUTOR","body":"The test could be to create a conflicted doc in one of the fabric2 tests. Then mock out [ddoc_doc_prompt/3]( https://github.com/apache/couchdb/pull/3248/files#diff-8f1054ceca34825814325bf034fd42dab92664e1339267fe2d3b0aedc7b1d155R519) and count how many times it was called (with `meck:num_calls/3`) when running the changes feed with the filter.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722562272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722562948","html_url":"https://github.com/apache/couchdb/pull/3248#issuecomment-722562948","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3248","id":722562948,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjU2Mjk0OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T18:36:27Z","updated_at":"2020-11-05T18:36:27Z","author_association":"MEMBER","body":"I thought about that, but ddoc_doc_prompt isn't module qualified when its called so I don't think that'll work directly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722562948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722569710","html_url":"https://github.com/apache/couchdb/pull/3248#issuecomment-722569710","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3248","id":722569710,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjU2OTcxMA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T18:48:30Z","updated_at":"2020-11-05T18:48:30Z","author_association":"CONTRIBUTOR","body":"Hmm, you're right. Then perhaps mock out `gen_server:call(couch_proc_manager, {get_proc, DDoc, DDocKey}, get_os_process_timeout())` since we call `with_ddoc_proc/2` from `ddoc_proc_prompt/3`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722569710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722626446","html_url":"https://github.com/apache/couchdb/pull/3248#issuecomment-722626446","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3248","id":722626446,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjYyNjQ0Ng==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T20:30:15Z","updated_at":"2020-11-05T20:30:15Z","author_association":"MEMBER","body":"any further thoughts?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722626446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722663962","html_url":"https://github.com/apache/couchdb/pull/3248#issuecomment-722663962","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3248","id":722663962,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjY2Mzk2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T21:45:55Z","updated_at":"2020-11-05T21:45:55Z","author_association":"MEMBER","body":"Will that test case approach port cleanly to 3.x?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/722663962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/724188094","html_url":"https://github.com/apache/couchdb/pull/3254#issuecomment-724188094","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3254","id":724188094,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDE4ODA5NA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T18:20:30Z","updated_at":"2020-11-09T18:20:30Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/724188094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/724197315","html_url":"https://github.com/apache/couchdb/issues/1853#issuecomment-724197315","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1853","id":724197315,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNDE5NzMxNQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-09T18:35:30Z","updated_at":"2020-11-09T18:35:30Z","author_association":"MEMBER","body":"It should be possible to pass `keys` to the underlying view in some cases. Perhaps this isn't ideal, but I would think is preferable to a range scan and in-memory comparison.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/724197315/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/725673462","html_url":"https://github.com/apache/couchdb/issues/3236#issuecomment-725673462","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3236","id":725673462,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNTY3MzQ2Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-11T21:33:38Z","updated_at":"2020-11-11T21:33:38Z","author_association":"MEMBER","body":"Ah, thanks for a thorough bug report @gesellix. I do wonder if we can improve this.\r\n\r\nLooking at the intersection of RFC3986 sub-delims and the allowed characters in database names the only issue we have is with `+`. The function in mochiweb that we use to unquote the path segments does specifically swap `+` for a ` `. We don't have any ambiguity with a user wanting to create a DB with a space in the name as that's not allowed.\r\n\r\nDocument IDs would be significantly more complicated and I think not worth the risk of trying to change our encoding rules.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/725673462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/725693485","html_url":"https://github.com/apache/couchdb/pull/3243#issuecomment-725693485","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3243","id":725693485,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNTY5MzQ4NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-11T22:20:35Z","updated_at":"2020-11-11T22:25:57Z","author_association":"CONTRIBUTOR","body":"@rnewson It looks good. I think we may need to clear the grv cache when we handle restart_tx functionality. Basically in these two places:\r\n\r\n - https://github.com/apache/couchdb/blob/main/src/fabric/src/fabric2_fdb.erl#L545\r\n - https://github.com/apache/couchdb/blob/main/src/fabric/src/fabric2_fdb.erl#L1843\r\n\r\nThen it might be nice to have some eunit tests covering some of this new code. `fabric2` eunit tests might work since we might need some mocking to check if a new transaction re-used the grv or not. Perhaps we can copy some setup code from https://github.com/apache/couchdb/blob/1a138804f692d0e578a7d4a19f9f13099a59a1cd/src/fabric/test/fabric2_fdb_tx_retry_tests.erl or https://github.com/apache/couchdb/blob/1a138804f692d0e578a7d4a19f9f13099a59a1cd/src/fabric/test/fabric2_db_misc_tests.erl\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/725693485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726055264","html_url":"https://github.com/apache/couchdb/pull/3260#issuecomment-726055264","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3260","id":726055264,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjA1NTI2NA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T12:43:59Z","updated_at":"2020-11-12T12:43:59Z","author_association":"MEMBER","body":"```\r\n[notice] 2020-11-12T12:42:34.897280Z node1@127.0.0.1 <0.984.0> 92483dbd6f localhost:15984 127.0.0.1 foo GET /db1/_design/foo/_view/bar?include_docs=true&reduce=false 500 aborted 3091\r\n[error] 2020-11-12T12:42:34.897318Z node1@127.0.0.1 <0.984.0> 92483dbd6f Response abnormally terminated: multiple_responses_attempted\r\n```\r\n\r\nThis is how a response is logged if two responses are sent for the same request (due to the erlfdb retry loop). What do we think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726055264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726089117","html_url":"https://github.com/apache/couchdb/issues/3261#issuecomment-726089117","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3261","id":726089117,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjA4OTExNw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T13:49:24Z","updated_at":"2020-11-12T13:49:24Z","author_association":"MEMBER","body":"those look like honest oversights. A PR would get merged quickly :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726089117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726098461","html_url":"https://github.com/apache/couchdb/issues/3261#issuecomment-726098461","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3261","id":726098461,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjA5ODQ2MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-12T14:05:25Z","updated_at":"2020-11-12T14:05:25Z","author_association":"MEMBER","body":"The fix is simple enough. We should use the `send_json` functions from `chttpd` module, not `couch_httpd`;\r\n\r\ncouch_replicator_httpd.erl\r\n\r\n```\r\n-import(couch_httpd, [\r\n    send_json/2,\r\n    send_json/3,\r\n    send_method_not_allowed/2\r\n]).```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726098461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726759288","html_url":"https://github.com/apache/couchdb/issues/2344#issuecomment-726759288","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2344","id":726759288,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjc1OTI4OA==","user":{"login":"BlackGlory","id":1365962,"node_id":"MDQ6VXNlcjEzNjU5NjI=","avatar_url":"https://avatars.githubusercontent.com/u/1365962?v=4","gravatar_id":"","url":"https://api.github.com/users/BlackGlory","html_url":"https://github.com/BlackGlory","followers_url":"https://api.github.com/users/BlackGlory/followers","following_url":"https://api.github.com/users/BlackGlory/following{/other_user}","gists_url":"https://api.github.com/users/BlackGlory/gists{/gist_id}","starred_url":"https://api.github.com/users/BlackGlory/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BlackGlory/subscriptions","organizations_url":"https://api.github.com/users/BlackGlory/orgs","repos_url":"https://api.github.com/users/BlackGlory/repos","events_url":"https://api.github.com/users/BlackGlory/events{/privacy}","received_events_url":"https://api.github.com/users/BlackGlory/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-13T13:17:21Z","updated_at":"2020-11-13T13:17:21Z","author_association":"NONE","body":"I have the same error on Docker, so maybe this problem is not only in NFS, the version of CouchDB is 3.1.1.\r\n\r\nDocker:\r\n```\r\nStorage Driver: overlay2\r\n  Backing Filesystem: extfs\r\n  Supports d_type: true\r\n  Native Overlay Diff: true\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726759288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726920380","html_url":"https://github.com/apache/couchdb/issues/2344#issuecomment-726920380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2344","id":726920380,"node_id":"MDEyOklzc3VlQ29tbWVudDcyNjkyMDM4MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-13T17:56:55Z","updated_at":"2020-11-13T17:56:55Z","author_association":"MEMBER","body":"The error is pretty unequivocal - your database file got truncated. You'll need to restore from backup.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/726920380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728286263","html_url":"https://github.com/apache/couchdb/pull/3266#issuecomment-728286263","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3266","id":728286263,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI4NjI2Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-16T19:50:12Z","updated_at":"2020-11-16T19:50:12Z","author_association":"CONTRIBUTOR","body":"I noticed a few exceptions when running unit tests:\r\n\r\n```\r\n CRASH REPORT Process  (<0.671.0>) with 0 neighbors crashed with reason: no function clause matching erlfdb:get_ss({erlfdb_snapshot,{erlfdb_transaction,#Ref<0.2213159554.4118937601.149766>}}, <<\"�/metadataVersion\">>)(line:317) at fabric2_fdb:check_metadata_version/1(line:1316) <= fabric2_fdb:ensure_current/2(line:1897) <= fabric2_fdb:get_last_change/1(line:1100) <= fabric2_fdb:execute_transaction/3(line:1960) <= erlfdb:do_transaction/2(line:663) <= fabric2_fdb:do_transaction/2(line:171) <= fabric2_fdb:transactional/2(line:142); initial_call: {couch_views_indexer,init,[]}, ancestors: [couch_views_server,couch_views_sup,<0.662.0>], message_queue_len: 0, messages: [], links: [<0.666.0>], dictionary: [{'$couch_jobs_current',{erlfdb_transaction,#Ref<0.2213159554.4118937601.149649>}},...], trap_exit: false, status: running, heap_size: 1598, stack_size: 27, reductions: 16199\r\n```\r\n\r\nIt looks like we'd need a no-op or passthrough case for when we get a snapshot of a snapshot handle.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728286263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728286882","html_url":"https://github.com/apache/couchdb/pull/3266#issuecomment-728286882","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3266","id":728286882,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODI4Njg4Mg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-16T19:51:15Z","updated_at":"2020-11-16T19:51:15Z","author_association":"MEMBER","body":"Huh, I thought I'd added that at one point. Good catch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728286882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728322868","html_url":"https://github.com/apache/couchdb/pull/3271#issuecomment-728322868","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3271","id":728322868,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODMyMjg2OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-16T20:52:40Z","updated_at":"2020-11-16T20:52:40Z","author_association":"MEMBER","body":"To be clear, the check that's being removed is both incorrect and redundant. There's a compression aware check that happens inside the `couch_db:with_stream` function so even if this check had been correct it would still be redundant.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728322868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728688740","html_url":"https://github.com/apache/couchdb/issues/1540#issuecomment-728688740","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1540","id":728688740,"node_id":"MDEyOklzc3VlQ29tbWVudDcyODY4ODc0MA==","user":{"login":"nkev","id":5410916,"node_id":"MDQ6VXNlcjU0MTA5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/5410916?v=4","gravatar_id":"","url":"https://api.github.com/users/nkev","html_url":"https://github.com/nkev","followers_url":"https://api.github.com/users/nkev/followers","following_url":"https://api.github.com/users/nkev/following{/other_user}","gists_url":"https://api.github.com/users/nkev/gists{/gist_id}","starred_url":"https://api.github.com/users/nkev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkev/subscriptions","organizations_url":"https://api.github.com/users/nkev/orgs","repos_url":"https://api.github.com/users/nkev/repos","events_url":"https://api.github.com/users/nkev/events{/privacy}","received_events_url":"https://api.github.com/users/nkev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-17T05:06:23Z","updated_at":"2020-11-17T05:06:23Z","author_association":"NONE","body":"I wonder if attitudes regarding the use of CouchDB as a replicating-streaming server will improve in V4 with FoundationDB as the underlying engine...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/728688740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729030867","html_url":"https://github.com/apache/couchdb/issues/3273#issuecomment-729030867","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3273","id":729030867,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTAzMDg2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-17T16:08:18Z","updated_at":"2020-11-17T16:08:18Z","author_association":"MEMBER","body":"Duplicate of #3115 .\r\n\r\nWe don't at present recommend running CouchDB in production on Erlang 21+. (Our binaries all ship against 20.3.8.25.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729030867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729031967","html_url":"https://github.com/apache/couchdb/issues/3115#issuecomment-729031967","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3115","id":729031967,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTAzMTk2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-17T16:09:58Z","updated_at":"2020-11-17T16:09:58Z","author_association":"MEMBER","body":"FYI:\r\n\r\n```irc\r\n16:59 <+rnewson> couchdb goes quite wrong on 21/22\r\n16:59 <+rnewson> the mochiweb modules thingy\r\n16:59 <+rnewson> (at least)\r\n16:59 <+rnewson> Wohali: I think it's all fixable but hard to keep 18/19 support\r\n16:59 <+rnewson> I didn't get deep into it, but it bites me whenever I forget to add\r\n                 erlang 20 to my path\r\n17:00 <+rnewson> cloudant is on 20 all over afaik\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729031967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729081705","html_url":"https://github.com/apache/couchdb/pull/3266#issuecomment-729081705","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3266","id":729081705,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTA4MTcwNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-17T17:27:54Z","updated_at":"2020-11-17T17:27:54Z","author_association":"MEMBER","body":"Ah derps, I had that locally but forgot to create a spearate PR for erlfdb since its a separate repo. Thanks for the hand there!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729081705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729098893","html_url":"https://github.com/apache/couchdb/pull/3266#issuecomment-729098893","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3266","id":729098893,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTA5ODg5Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-17T17:55:14Z","updated_at":"2020-11-17T17:55:14Z","author_association":"CONTRIBUTOR","body":"@davisp Maybe add a few tests if you'd like to get some coverage for the new bits","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729098893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729099328","html_url":"https://github.com/apache/couchdb/pull/3266#issuecomment-729099328","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3266","id":729099328,"node_id":"MDEyOklzc3VlQ29tbWVudDcyOTA5OTMyOA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-17T17:55:56Z","updated_at":"2020-11-17T17:55:56Z","author_association":"MEMBER","body":"Yap. Forgot I hadn't done that bit yet. Doing now before merging.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/729099328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730267600","html_url":"https://github.com/apache/couchdb/issues/3261#issuecomment-730267600","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3261","id":730267600,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDI2NzYwMA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T10:08:43Z","updated_at":"2020-11-19T10:08:43Z","author_association":"MEMBER","body":"I'm interested in opening a PR (or two, I guess) for this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730267600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730273887","html_url":"https://github.com/apache/couchdb/pull/3268#issuecomment-730273887","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3268","id":730273887,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDI3Mzg4Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T10:19:03Z","updated_at":"2020-11-19T10:19:03Z","author_association":"MEMBER","body":"needs backporting to 3.x.\r\n\r\nnoting also that this only matters if code modifies the MochiReq and sets req_body outside of mochiweb, which is something Cloudant does but CouchDB does not currently do.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730273887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730310619","html_url":"https://github.com/apache/couchdb/pull/3276#issuecomment-730310619","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3276","id":730310619,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDMxMDYxOQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T11:26:48Z","updated_at":"2020-11-19T11:26:48Z","author_association":"CONTRIBUTOR","body":"This also depends on https://github.com/apache/couchdb/pull/2991","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730310619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730313896","html_url":"https://github.com/apache/couchdb/pull/3276#issuecomment-730313896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3276","id":730313896,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDMxMzg5Ng==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T11:33:36Z","updated_at":"2020-11-19T11:33:36Z","author_association":"CONTRIBUTOR","body":"The PR which backport both is here https://github.com/apache/couchdb/pull/3277","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730313896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730359414","html_url":"https://github.com/apache/couchdb/pull/3277#issuecomment-730359414","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3277","id":730359414,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDM1OTQxNA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T12:59:51Z","updated_at":"2020-11-19T12:59:51Z","author_association":"MEMBER","body":"In all existing cases, req_body is either undefined or it is the result of MochiReq:recv_body/1 or recv_body/2.\r\n\r\nIn this PR we are doing something different, req_body will be the json decoded version of that body.\r\n\r\nI think that's too confusing, especially as the request body caching code is already confusing enough due to its history.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730359414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730369929","html_url":"https://github.com/apache/couchdb/pull/3277#issuecomment-730369929","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3277","id":730369929,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDM2OTkyOQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T13:20:21Z","updated_at":"2020-11-19T13:20:21Z","author_association":"CONTRIBUTOR","body":"> I think that's too confusing, especially as the request body caching code is already confusing enough due to its history.\r\n\r\nThe two PRs backported here move away from implicit value propagation via process dictionary to explicit propagation via a field in the chttpd record. Which is easier to understand and maintain. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730369929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730374329","html_url":"https://github.com/apache/couchdb/pull/3277#issuecomment-730374329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3277","id":730374329,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDM3NDMyOQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T13:28:16Z","updated_at":"2020-11-19T13:28:25Z","author_association":"MEMBER","body":"Could you address my comment about the change of the format of req_body in this PR versus all the current uses of req_body?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730374329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730397702","html_url":"https://github.com/apache/couchdb/pull/3277#issuecomment-730397702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3277","id":730397702,"node_id":"MDEyOklzc3VlQ29tbWVudDczMDM5NzcwMg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-19T14:05:29Z","updated_at":"2020-11-19T14:05:29Z","author_association":"CONTRIBUTOR","body":"> Could you address my comment about the change of the format of req_body in this PR versus all the current uses of req_body?\r\n\r\nThe purpose of https://github.com/apache/couchdb/pull/2991 is to allow injecting modified body from EPI plugins. Without this change it is quite hard to modify body because the one would need to either:\r\n- find a way how to override HTTP headers in Mochiweb to change \"Content-Encoding\" to identity (there is no official way).\r\n- convert JSON object into binary and optionally gzip it if `\"Content-Encoding\"` header contains `gzip` (which would add an overhead for big requests).\r\n\r\nIt also let us to remove process dictionary use in `chttpd_misc:handle_replicate_req` (leaky abstraction).\r\n\r\nThe change allows EPI users to easily modify body. \r\n- `Req#httpd{req_body={Props}}` - for JSON\r\n- `Req#httpd{req_body=<<\"non-JSON body\">>}` - for non JSON\r\n\r\nThe `json_body/1` always returns JSON obj:\r\n- when `req_body` is undefined we decompress and decode JSON from Mochiweb\r\n- when `req_body` is set we return it as is (we assume it is set as `#httpd{req_body={Props}}` i.e. contains JSON obj, this is a responsibility of EPI plugin author).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/730397702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731461849","html_url":"https://github.com/apache/couchdb/issues/3087#issuecomment-731461849","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3087","id":731461849,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTQ2MTg0OQ==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-20T23:38:55Z","updated_at":"2020-11-20T23:38:55Z","author_association":"NONE","body":"I think it is preferable to solve this by always reading the body rather than changing the existing behaviour to a `400 Bad Request`. The existing `POST /{db}/_changes` endpoint that has been released in the wild for a long time permits other requests (i.e. not just those not using a filter) and any change to that behaviour would break existing code/users.\r\n\r\nFor example, whilst it is perhaps unusual to POST a `{}` body it's not completely unexpected given the way the API is described in the [docs](https://docs.couchdb.org/en/stable/api/database/changes.html#post--db-_changes):\r\n>Requests the database changes feed in the same way as GET /{db}/_changes does, but is widely used with ?filter=_doc_ids\r\n\r\nNothing stated about it being valid _only_ for filters.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731461849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731512721","html_url":"https://github.com/apache/couchdb/issues/3259#issuecomment-731512721","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3259","id":731512721,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTUxMjcyMQ==","user":{"login":"Ljzn","id":19494388,"node_id":"MDQ6VXNlcjE5NDk0Mzg4","avatar_url":"https://avatars.githubusercontent.com/u/19494388?v=4","gravatar_id":"","url":"https://api.github.com/users/Ljzn","html_url":"https://github.com/Ljzn","followers_url":"https://api.github.com/users/Ljzn/followers","following_url":"https://api.github.com/users/Ljzn/following{/other_user}","gists_url":"https://api.github.com/users/Ljzn/gists{/gist_id}","starred_url":"https://api.github.com/users/Ljzn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ljzn/subscriptions","organizations_url":"https://api.github.com/users/Ljzn/orgs","repos_url":"https://api.github.com/users/Ljzn/repos","events_url":"https://api.github.com/users/Ljzn/events{/privacy}","received_events_url":"https://api.github.com/users/Ljzn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-21T05:38:46Z","updated_at":"2020-11-21T05:38:46Z","author_association":"NONE","body":"https://github.com/apache/couchdb-config/pull/31 Hi, I did a fix but the travisCI is broken due to fdb.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731512721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731577311","html_url":"https://github.com/apache/couchdb/issues/3236#issuecomment-731577311","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3236","id":731577311,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTU3NzMxMQ==","user":{"login":"gesellix","id":432791,"node_id":"MDQ6VXNlcjQzMjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/432791?v=4","gravatar_id":"","url":"https://api.github.com/users/gesellix","html_url":"https://github.com/gesellix","followers_url":"https://api.github.com/users/gesellix/followers","following_url":"https://api.github.com/users/gesellix/following{/other_user}","gists_url":"https://api.github.com/users/gesellix/gists{/gist_id}","starred_url":"https://api.github.com/users/gesellix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gesellix/subscriptions","organizations_url":"https://api.github.com/users/gesellix/orgs","repos_url":"https://api.github.com/users/gesellix/repos","events_url":"https://api.github.com/users/gesellix/events{/privacy}","received_events_url":"https://api.github.com/users/gesellix/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-21T13:09:27Z","updated_at":"2020-11-21T13:09:27Z","author_association":"NONE","body":"Thanks for the feedback @kocolosk.\r\n\r\nIf I understand correctly, you're saying that we might have a chance to fix the handling of database names in url paths, but document ids _in url paths_ might be problematic and would need a special handling?\r\n\r\nIf so: is there a chance to apply such a special handling to make the behaviour for clients more transparent and don't force them to apply CouchDB specific encoding?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731577311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731880109","html_url":"https://github.com/apache/couchdb/issues/3087#issuecomment-731880109","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3087","id":731880109,"node_id":"MDEyOklzc3VlQ29tbWVudDczMTg4MDEwOQ==","user":{"login":"stheobald","id":10693305,"node_id":"MDQ6VXNlcjEwNjkzMzA1","avatar_url":"https://avatars.githubusercontent.com/u/10693305?v=4","gravatar_id":"","url":"https://api.github.com/users/stheobald","html_url":"https://github.com/stheobald","followers_url":"https://api.github.com/users/stheobald/followers","following_url":"https://api.github.com/users/stheobald/following{/other_user}","gists_url":"https://api.github.com/users/stheobald/gists{/gist_id}","starred_url":"https://api.github.com/users/stheobald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stheobald/subscriptions","organizations_url":"https://api.github.com/users/stheobald/orgs","repos_url":"https://api.github.com/users/stheobald/repos","events_url":"https://api.github.com/users/stheobald/events{/privacy}","received_events_url":"https://api.github.com/users/stheobald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T00:57:24Z","updated_at":"2020-11-23T00:57:24Z","author_association":"NONE","body":"@ricellis after discussing this with some of the maintainers, it has become apparent neither this, or the related enhancement is considered a high priority item, and is accordingly unlikely to be fixed by the volunteer maintainers in their free time. They did suggest that they'd consider fixing it as a paid gig.\r\n\r\nIn the meantime, I have found a workaround by having an API endpoint maintain a design document filter for each user. This mechanism allows me to pass what I would have hoped to pass in a req.body as a doc instead. Then I restart the replication with a reference to that updated filter. Replicating that design document to the client allows me to keep all clients associated with that user in sync.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/731880109/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732014490","html_url":"https://github.com/apache/couchdb/issues/3261#issuecomment-732014490","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3261","id":732014490,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjAxNDQ5MA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T08:42:38Z","updated_at":"2020-11-23T08:42:38Z","author_association":"MEMBER","body":"Nit: I believe it's `_scheduler/jobs/{jobid}` instead of `{db}/_scheduler/jobs/{jobid}` in the ticket description.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732014490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732036510","html_url":"https://github.com/apache/couchdb/pull/3279#issuecomment-732036510","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3279","id":732036510,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjAzNjUxMA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T09:26:03Z","updated_at":"2020-11-23T09:26:03Z","author_association":"MEMBER","body":"I intend to backport this to `3.x` after review & merge.\r\nAlso, I can open a PR to [docs](https://docs.couchdb.org/en/stable/api/basics.html#response-headers) if people think the default headers should be included there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732036510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732048998","html_url":"https://github.com/apache/couchdb/issues/3261#issuecomment-732048998","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3261","id":732048998,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjA0ODk5OA==","user":{"login":"vmatyus","id":26717393,"node_id":"MDQ6VXNlcjI2NzE3Mzkz","avatar_url":"https://avatars.githubusercontent.com/u/26717393?v=4","gravatar_id":"","url":"https://api.github.com/users/vmatyus","html_url":"https://github.com/vmatyus","followers_url":"https://api.github.com/users/vmatyus/followers","following_url":"https://api.github.com/users/vmatyus/following{/other_user}","gists_url":"https://api.github.com/users/vmatyus/gists{/gist_id}","starred_url":"https://api.github.com/users/vmatyus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmatyus/subscriptions","organizations_url":"https://api.github.com/users/vmatyus/orgs","repos_url":"https://api.github.com/users/vmatyus/repos","events_url":"https://api.github.com/users/vmatyus/events{/privacy}","received_events_url":"https://api.github.com/users/vmatyus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T09:50:11Z","updated_at":"2020-11-23T09:50:11Z","author_association":"NONE","body":"> Nit: I believe it's _scheduler/jobs/{jobid} instead of {db}/_scheduler/jobs/{jobid} in the ticket description.\r\n\r\nYes, corrected the description.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732048998/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732052017","html_url":"https://github.com/apache/couchdb/pull/3279#issuecomment-732052017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3279","id":732052017,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjA1MjAxNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T09:55:50Z","updated_at":"2020-11-23T09:55:50Z","author_association":"MEMBER","body":"This would appear to cause duplicate headers as the original locations where these two headers are added are left intact. Also, the `++` operation is slow and best avoided. The original locations do it more efficiently. Can you take another look at this please?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732052017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732062479","html_url":"https://github.com/apache/couchdb/pull/3279#issuecomment-732062479","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3279","id":732062479,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjA2MjQ3OQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T10:14:06Z","updated_at":"2020-11-23T10:14:06Z","author_association":"MEMBER","body":"Thank you for the review, @rnewson !\r\n\r\n> Also, the `++` operation is slow and best avoided\r\n\r\nAre you suggesting I should do a \"cons\" operator instead?\r\n\r\n> This would appear to cause duplicate headers\r\n\r\nI did some quick eyeballing, but I'm not seeing the duplicate headers. Can you please show me an example request?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732062479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732074517","html_url":"https://github.com/apache/couchdb/pull/3279#issuecomment-732074517","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3279","id":732074517,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjA3NDUxNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T10:37:16Z","updated_at":"2020-11-23T10:37:16Z","author_association":"MEMBER","body":"+1, nice fix. (I was wrong on duplicates)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732074517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732075247","html_url":"https://github.com/apache/couchdb/pull/3279#issuecomment-732075247","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3279","id":732075247,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjA3NTI0Nw==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T10:38:52Z","updated_at":"2020-11-23T10:39:47Z","author_association":"MEMBER","body":"Thank you for the review and the approve, @rnewson !\r\nCan you please merge this for me?\r\nAfter the merge, I'll open a PR to backport this to `3.x`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732075247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732423405","html_url":"https://github.com/apache/couchdb/pull/3277#issuecomment-732423405","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3277","id":732423405,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjQyMzQwNQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T21:01:00Z","updated_at":"2020-11-23T21:01:00Z","author_association":"CONTRIBUTOR","body":"@rnewson I noticed a problem with `_list` endpoint and pushed a fix after your approval. This fixup don't need to be ported to `main` because `_list` endpoint is [disabled](https://github.com/apache/couchdb/blob/main/src/chttpd/src/chttpd_httpd_handlers.erl#L55) there ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732423405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732716471","html_url":"https://github.com/apache/couchdb/issues/1799#issuecomment-732716471","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1799","id":732716471,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjcxNjQ3MQ==","user":{"login":"kasserater","id":15342304,"node_id":"MDQ6VXNlcjE1MzQyMzA0","avatar_url":"https://avatars.githubusercontent.com/u/15342304?v=4","gravatar_id":"","url":"https://api.github.com/users/kasserater","html_url":"https://github.com/kasserater","followers_url":"https://api.github.com/users/kasserater/followers","following_url":"https://api.github.com/users/kasserater/following{/other_user}","gists_url":"https://api.github.com/users/kasserater/gists{/gist_id}","starred_url":"https://api.github.com/users/kasserater/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kasserater/subscriptions","organizations_url":"https://api.github.com/users/kasserater/orgs","repos_url":"https://api.github.com/users/kasserater/repos","events_url":"https://api.github.com/users/kasserater/events{/privacy}","received_events_url":"https://api.github.com/users/kasserater/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T07:42:36Z","updated_at":"2020-11-24T07:43:15Z","author_association":"NONE","body":"@janl, @jiangphcn  the documentation was never updated to reflect this change.\r\nplease see https://docs.couchdb.org/en/stable/intro/security.html?highlight=security","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/732716471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733088269","html_url":"https://github.com/apache/couchdb/pull/3281#issuecomment-733088269","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3281","id":733088269,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzA4ODI2OQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T16:23:25Z","updated_at":"2020-11-24T16:23:25Z","author_association":"MEMBER","body":"Thank you for the review, @rnewson ! Can you please merge this PR for me?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733088269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733151064","html_url":"https://github.com/apache/couchdb/pull/3281#issuecomment-733151064","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3281","id":733151064,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzE1MTA2NA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-24T18:15:58Z","updated_at":"2020-11-24T18:15:58Z","author_association":"MEMBER","body":"Thank you for the review and merge, @nickva !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733151064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733687376","html_url":"https://github.com/apache/couchdb/issues/3261#issuecomment-733687376","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3261","id":733687376,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzY4NzM3Ng==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T12:50:29Z","updated_at":"2020-11-25T12:50:29Z","author_association":"MEMBER","body":"I believe this is done now. Can somebody please close the ticket?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733687376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733933942","html_url":"https://github.com/apache/couchdb/pull/2946#issuecomment-733933942","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2946","id":733933942,"node_id":"MDEyOklzc3VlQ29tbWVudDczMzkzMzk0Mg==","user":{"login":"ChrisPaprocki","id":6357230,"node_id":"MDQ6VXNlcjYzNTcyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/6357230?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisPaprocki","html_url":"https://github.com/ChrisPaprocki","followers_url":"https://api.github.com/users/ChrisPaprocki/followers","following_url":"https://api.github.com/users/ChrisPaprocki/following{/other_user}","gists_url":"https://api.github.com/users/ChrisPaprocki/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisPaprocki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisPaprocki/subscriptions","organizations_url":"https://api.github.com/users/ChrisPaprocki/orgs","repos_url":"https://api.github.com/users/ChrisPaprocki/repos","events_url":"https://api.github.com/users/ChrisPaprocki/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisPaprocki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-25T20:34:31Z","updated_at":"2020-11-25T20:34:31Z","author_association":"NONE","body":"Would there be any chances for this change being discussed?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/733933942/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/737452264","html_url":"https://github.com/apache/couchdb/pull/3102#issuecomment-737452264","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3102","id":737452264,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzQ1MjI2NA==","user":{"login":"WeiliangLuo","id":5402036,"node_id":"MDQ6VXNlcjU0MDIwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/5402036?v=4","gravatar_id":"","url":"https://api.github.com/users/WeiliangLuo","html_url":"https://github.com/WeiliangLuo","followers_url":"https://api.github.com/users/WeiliangLuo/followers","following_url":"https://api.github.com/users/WeiliangLuo/following{/other_user}","gists_url":"https://api.github.com/users/WeiliangLuo/gists{/gist_id}","starred_url":"https://api.github.com/users/WeiliangLuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/WeiliangLuo/subscriptions","organizations_url":"https://api.github.com/users/WeiliangLuo/orgs","repos_url":"https://api.github.com/users/WeiliangLuo/repos","events_url":"https://api.github.com/users/WeiliangLuo/events{/privacy}","received_events_url":"https://api.github.com/users/WeiliangLuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T19:40:57Z","updated_at":"2020-12-02T19:40:57Z","author_association":"NONE","body":"@wohali Hi, is it possible to backport this into 2.x?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/737452264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/737516380","html_url":"https://github.com/apache/couchdb/pull/3102#issuecomment-737516380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3102","id":737516380,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzUxNjM4MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T21:47:52Z","updated_at":"2020-12-02T21:47:52Z","author_association":"MEMBER","body":"@WeiliangLuo We are not doing any more 2.x releases at this time. Sorry about that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/737516380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/737589956","html_url":"https://github.com/apache/couchdb/issues/3047#issuecomment-737589956","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3047","id":737589956,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzU4OTk1Ng==","user":{"login":"bdoyle0182","id":11879547,"node_id":"MDQ6VXNlcjExODc5NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/11879547?v=4","gravatar_id":"","url":"https://api.github.com/users/bdoyle0182","html_url":"https://github.com/bdoyle0182","followers_url":"https://api.github.com/users/bdoyle0182/followers","following_url":"https://api.github.com/users/bdoyle0182/following{/other_user}","gists_url":"https://api.github.com/users/bdoyle0182/gists{/gist_id}","starred_url":"https://api.github.com/users/bdoyle0182/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdoyle0182/subscriptions","organizations_url":"https://api.github.com/users/bdoyle0182/orgs","repos_url":"https://api.github.com/users/bdoyle0182/repos","events_url":"https://api.github.com/users/bdoyle0182/events{/privacy}","received_events_url":"https://api.github.com/users/bdoyle0182/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T00:59:36Z","updated_at":"2020-12-03T00:59:36Z","author_association":"NONE","body":"I'm a little confused on what gets shipped by default. So you have the ratio channel and the slack channel. Are they both used by default or is one prioritized? If the slack default is 16mb, when would the ratio channel ever even get used? I think this should change it's pretty scary for people upgrading from 2.x and most people have much larger db's than this so they're treated to constant compaction","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/737589956/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/738909806","html_url":"https://github.com/apache/couchdb/pull/2648#issuecomment-738909806","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2648","id":738909806,"node_id":"MDEyOklzc3VlQ29tbWVudDczODkwOTgwNg==","user":{"login":"jainishmehta","id":45054638,"node_id":"MDQ6VXNlcjQ1MDU0NjM4","avatar_url":"https://avatars.githubusercontent.com/u/45054638?v=4","gravatar_id":"","url":"https://api.github.com/users/jainishmehta","html_url":"https://github.com/jainishmehta","followers_url":"https://api.github.com/users/jainishmehta/followers","following_url":"https://api.github.com/users/jainishmehta/following{/other_user}","gists_url":"https://api.github.com/users/jainishmehta/gists{/gist_id}","starred_url":"https://api.github.com/users/jainishmehta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jainishmehta/subscriptions","organizations_url":"https://api.github.com/users/jainishmehta/orgs","repos_url":"https://api.github.com/users/jainishmehta/repos","events_url":"https://api.github.com/users/jainishmehta/events{/privacy}","received_events_url":"https://api.github.com/users/jainishmehta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T17:25:28Z","updated_at":"2020-12-04T17:32:43Z","author_association":"NONE","body":"@atrauzzi  I cannot for the life of me configure this and I need it for a project, can someone help, thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/738909806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/738950516","html_url":"https://github.com/apache/couchdb/pull/2648#issuecomment-738950516","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2648","id":738950516,"node_id":"MDEyOklzc3VlQ29tbWVudDczODk1MDUxNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-04T18:40:23Z","updated_at":"2020-12-04T18:40:23Z","author_association":"MEMBER","body":"@jainishmehta Please don't spam closed PRs. For more immediate support please see https://couchdb.apache.org/#chat and join the Slack community, or you can post a new thread on the [Discussions](https://github.com/apache/couchdb/discussions) section of this repository, if the [documentation](https://docs.couchdb.org/en/latest/api/server/authn.html#jwt-authentication) isn't sufficient.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/738950516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/739133843","html_url":"https://github.com/apache/couchdb/issues/1499#issuecomment-739133843","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1499","id":739133843,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTEzMzg0Mw==","user":{"login":"rdewolff","id":130704,"node_id":"MDQ6VXNlcjEzMDcwNA==","avatar_url":"https://avatars.githubusercontent.com/u/130704?v=4","gravatar_id":"","url":"https://api.github.com/users/rdewolff","html_url":"https://github.com/rdewolff","followers_url":"https://api.github.com/users/rdewolff/followers","following_url":"https://api.github.com/users/rdewolff/following{/other_user}","gists_url":"https://api.github.com/users/rdewolff/gists{/gist_id}","starred_url":"https://api.github.com/users/rdewolff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdewolff/subscriptions","organizations_url":"https://api.github.com/users/rdewolff/orgs","repos_url":"https://api.github.com/users/rdewolff/repos","events_url":"https://api.github.com/users/rdewolff/events{/privacy}","received_events_url":"https://api.github.com/users/rdewolff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-05T06:20:25Z","updated_at":"2020-12-05T06:20:25Z","author_association":"NONE","body":"Any update on this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/739133843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/739135184","html_url":"https://github.com/apache/couchdb/issues/1499#issuecomment-739135184","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1499","id":739135184,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTEzNTE4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-05T06:37:44Z","updated_at":"2020-12-05T06:37:44Z","author_association":"MEMBER","body":"No. Spamming the ticket is going to get you banned from our repo.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/739135184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/739819064","html_url":"https://github.com/apache/couchdb/issues/3236#issuecomment-739819064","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3236","id":739819064,"node_id":"MDEyOklzc3VlQ29tbWVudDczOTgxOTA2NA==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T10:14:32Z","updated_at":"2020-12-07T10:16:33Z","author_association":"NONE","body":"I think this is a duplicate of https://github.com/apache/couchdb/issues/2235\r\n\r\nCouchDB's non-spec compliant handling of `+` characters in path segments of URLs is a long standing issue (note that #2235 was dervied from a JIRA originally opened in 2010) that irks all client side code following standard URL encoding practices.\r\n\r\nI'd love to see this resolved so the API aligned with standards, but the problems of compatibility with existing code that relies on the current behaviour of `+` in the path definitely shouldn't be underestimated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/739819064/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/740011175","html_url":"https://github.com/apache/couchdb/issues/3236#issuecomment-740011175","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3236","id":740011175,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MDAxMTE3NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-07T16:02:56Z","updated_at":"2020-12-07T16:02:56Z","author_association":"MEMBER","body":"I agree. Closing as duplicate.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/740011175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741780827","html_url":"https://github.com/apache/couchdb/issues/1531#issuecomment-741780827","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1531","id":741780827,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTc4MDgyNw==","user":{"login":"SinanGabel","id":5586130,"node_id":"MDQ6VXNlcjU1ODYxMzA=","avatar_url":"https://avatars.githubusercontent.com/u/5586130?v=4","gravatar_id":"","url":"https://api.github.com/users/SinanGabel","html_url":"https://github.com/SinanGabel","followers_url":"https://api.github.com/users/SinanGabel/followers","following_url":"https://api.github.com/users/SinanGabel/following{/other_user}","gists_url":"https://api.github.com/users/SinanGabel/gists{/gist_id}","starred_url":"https://api.github.com/users/SinanGabel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SinanGabel/subscriptions","organizations_url":"https://api.github.com/users/SinanGabel/orgs","repos_url":"https://api.github.com/users/SinanGabel/repos","events_url":"https://api.github.com/users/SinanGabel/events{/privacy}","received_events_url":"https://api.github.com/users/SinanGabel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T13:46:01Z","updated_at":"2020-12-09T13:46:01Z","author_association":"NONE","body":"[Millions of writes/s](https://github.com/richardartoul/tsdb-layer)\r\n\r\nPerhaps that link provides some insights about the time series possibilities with FoundationDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741780827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741804790","html_url":"https://github.com/apache/couchdb/issues/2448#issuecomment-741804790","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2448","id":741804790,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTgwNDc5MA==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T14:26:49Z","updated_at":"2020-12-09T14:26:49Z","author_association":"NONE","body":"I've seen this error message when the multipart boundaries, headers and bodies are separated only by LF instead of by CRLF.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741804790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741839742","html_url":"https://github.com/apache/couchdb/issues/1943#issuecomment-741839742","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1943","id":741839742,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTgzOTc0Mg==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T15:20:05Z","updated_at":"2020-12-09T15:20:05Z","author_association":"NONE","body":"I just ran into this issue as well, initially using my Java client, but reproduced in curl too.\r\n\r\nThe [mp-request.mp.gz](https://github.com/apache/couchdb/files/5666675/mp-request.mp.gz) file I'm using is the [docs example](https://docs.couchdb.org/en/stable/api/document/common.html#creating-multiple-attachments) but with only 1 of the attachments instead of both.\r\n\r\nCurl multipart request that works (curl automatically adds the `Content-Length` header):\r\n`curl -v -u 'admin:**' -X PUT -H 'Content-Type: multipart/related; boundary=abc123' -T mp-request.mp 'http://localhost:5984/test/testmp4'`\r\n```\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (::1) port 5984 (#0)\r\n* Server auth using Basic with user 'admin'\r\n> PUT /test/testmp4 HTTP/1.1\r\n> Host: localhost:5984\r\n> Authorization: Basic **==\r\n> User-Agent: curl/7.64.1\r\n> Accept: */*\r\n> Content-Type: multipart/related; boundary=abc123\r\n> Content-Length: 373\r\n> Expect: 100-continue\r\n> \r\n* Done waiting for 100-continue\r\n* We are completely uploaded and fine\r\n< HTTP/1.1 201 Created\r\n< Cache-Control: must-revalidate\r\n< Content-Length: 70\r\n< Content-Type: application/json\r\n< Date: Wed, 09 Dec 2020 14:42:36 GMT\r\n< ETag: \"1-7ce5f48fde00bce2167f25fd04031e8e\"\r\n< Location: http://localhost:5984/test/testmp4\r\n< Server: CouchDB/3.1.1 (Erlang OTP/20)\r\n< X-Couch-Request-ID: 31cddc5df6\r\n< X-CouchDB-Body-Time: 0\r\n< \r\n{\"ok\":true,\"id\":\"testmp4\",\"rev\":\"1-7ce5f48fde00bce2167f25fd04031e8e\"}\r\n```\r\n\r\nAnd curl request with added `Transfer-Encoding: chunked` header that hangs:\r\n`curl -v --max-time 30 -u 'admin:**' -X PUT -H 'Transfer-Encoding: chunked' -H 'Content-Type: multipart/related; boundary=abc123' -T mp-request.mp 'http://localhost:5984/test/testmp3'`\r\n```\r\n*   Trying ::1...\r\n* TCP_NODELAY set\r\n* Connected to localhost (::1) port 5984 (#0)\r\n* Server auth using Basic with user 'admin'\r\n> PUT /test/testmp3 HTTP/1.1\r\n> Host: localhost:5984\r\n> Authorization: Basic **==\r\n> User-Agent: curl/7.64.1\r\n> Accept: */*\r\n> Transfer-Encoding: chunked\r\n> Content-Type: multipart/related; boundary=abc123\r\n> Expect: 100-continue\r\n> \r\n* Done waiting for 100-continue\r\n* Signaling end of chunked upload via terminating chunk.\r\n* Operation timed out after 30002 milliseconds with 0 bytes received\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741839742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741862560","html_url":"https://github.com/apache/couchdb/issues/3262#issuecomment-741862560","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3262","id":741862560,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MTg2MjU2MA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T15:51:31Z","updated_at":"2020-12-09T15:51:31Z","author_association":"MEMBER","body":"Closed via https://github.com/apache/couchdb/pull/3266","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/741862560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742127830","html_url":"https://github.com/apache/couchdb/issues/2941#issuecomment-742127830","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2941","id":742127830,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjEyNzgzMA==","user":{"login":"bdoyle0182","id":11879547,"node_id":"MDQ6VXNlcjExODc5NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/11879547?v=4","gravatar_id":"","url":"https://api.github.com/users/bdoyle0182","html_url":"https://github.com/bdoyle0182","followers_url":"https://api.github.com/users/bdoyle0182/followers","following_url":"https://api.github.com/users/bdoyle0182/following{/other_user}","gists_url":"https://api.github.com/users/bdoyle0182/gists{/gist_id}","starred_url":"https://api.github.com/users/bdoyle0182/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdoyle0182/subscriptions","organizations_url":"https://api.github.com/users/bdoyle0182/orgs","repos_url":"https://api.github.com/users/bdoyle0182/repos","events_url":"https://api.github.com/users/bdoyle0182/events{/privacy}","received_events_url":"https://api.github.com/users/bdoyle0182/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T23:25:45Z","updated_at":"2020-12-09T23:29:56Z","author_association":"NONE","body":"we're seeing a similar issue with random compactions on shards when upgrading from 2.x to 3.1.1. But might be completely unrelated. The compaction metadata file blew up to about 500gb over 24 hours for a shard that is about 30gb constantly hitting this error. Similarly we're also seeing large disk io on the nodes this is happening on versus nodes this is not happening on.\r\n\r\n```<0.5181.0> -------- exit for compaction of [\"shards/60000000-7fffffff/core_activations.1589336264\"]: {badarith,[{couch_file,get_pread_locnum,3,[{file,\"src/couch_file.erl\"},{line,730}]},{lists,map,2,[{file,\"lists.erl\"},{line,1239}]},{lists,map,2,[{file,\"lists.erl\"},{line,1239}]},{couch_file,read_multi_raw_iolists_int,2,[{file,\"src/couch_file.erl\"},{line,719}]},{couch_file,handle_call,3,[{file,\"src/couch_file.erl\"},{line,507}]},{gen_server,try_handle_call,4,[{file,\"gen_server.erl\"},{line,636}]},{gen_server,handle_msg,6,[{file,\"gen_server.erl\"},{line,665}]},{proc_lib,init_p_do_apply,3,[{file,\"proc_lib.erl\"},{line,247}]}]}```\r\n\r\n```-------- CRASH REPORT Process  (<0.32443.1691>) with 3 neighbors crashed with reason: bad arithmetic expression at couch_file:get_pread_locnum/3(line:730) <= lists:map/2(line:1239) <= couch_file:read_multi_raw_iolists_int/2(line:719) <= couch_file:handle_call/3(line:507) <= gen_server:try_handle_call/4(line:636) <= gen_server:handle_msg/6(line:665) <= proc_lib:init_p_do_apply/3(line:247); initial_call: {couch_file,init,['Argument__1']}, ancestors: [<0.3352.1692>], message_queue_len: 0, messages: [], links: [<0.3352.1692>], dictionary: [{couch_file_fd,{{file_descriptor,prim_file,{#Port<0.1924847>,92}},\"...\"}},...], trap_exit: false, status: running, heap_size: 28690, stack_size: 27, reductions: 13483```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742127830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742132760","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-742132760","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":742132760,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjEzMjc2MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T23:39:46Z","updated_at":"2020-12-09T23:39:46Z","author_association":"MEMBER","body":"Are you able to test the fix that was merged in https://github.com/apache/couchdb/pull/3001 ?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742132760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742134449","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-742134449","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":742134449,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjEzNDQ0OQ==","user":{"login":"bdoyle0182","id":11879547,"node_id":"MDQ6VXNlcjExODc5NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/11879547?v=4","gravatar_id":"","url":"https://api.github.com/users/bdoyle0182","html_url":"https://github.com/bdoyle0182","followers_url":"https://api.github.com/users/bdoyle0182/followers","following_url":"https://api.github.com/users/bdoyle0182/following{/other_user}","gists_url":"https://api.github.com/users/bdoyle0182/gists{/gist_id}","starred_url":"https://api.github.com/users/bdoyle0182/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdoyle0182/subscriptions","organizations_url":"https://api.github.com/users/bdoyle0182/orgs","repos_url":"https://api.github.com/users/bdoyle0182/repos","events_url":"https://api.github.com/users/bdoyle0182/events{/privacy}","received_events_url":"https://api.github.com/users/bdoyle0182/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-09T23:45:00Z","updated_at":"2020-12-09T23:45:00Z","author_association":"NONE","body":"I was under the impression the fix was included in 3.1.1 which we directly upgraded to from 2.x according to the release notes under bug fixes\r\nhttps://docs.couchdb.org/en/latest/whatsnew/3.1.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742134449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742141919","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-742141919","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":742141919,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjE0MTkxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-10T00:04:13Z","updated_at":"2020-12-10T00:04:13Z","author_association":"MEMBER","body":"Yup, you're right, my mistake.\r\n\r\n@nickva Does this look like anything that #3001 would have missed?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742141919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742713037","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-742713037","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":742713037,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MjcxMzAzNw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-10T18:35:48Z","updated_at":"2020-12-10T18:35:48Z","author_association":"CONTRIBUTOR","body":"This looks like a different failure from #3001. \r\n\r\n@bdoyle0182 what version of 2.x was running on the old nodes? What Erlang VM version, OS (which version of CentOS), and file system was used?\r\n\r\nLooking through the issues so far it's first instance of `badarith` error from that part of the code I think.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742713037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742753429","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-742753429","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":742753429,"node_id":"MDEyOklzc3VlQ29tbWVudDc0Mjc1MzQyOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-10T19:45:09Z","updated_at":"2020-12-10T19:45:09Z","author_association":"CONTRIBUTOR","body":"Looking at the code the crash is coming from https://github.com/apache/couchdb/blob/23b98345f0db38214eaad33b159cf10dd9deaf72/src/couch/src/couch_file.erl#L729-L730\r\n\r\nIt looks like `Pos` (position) there is not an integer but something like `undefined` or `eof`.\r\n\r\nThat gets called from `couch_file:pread_terms` which is only called from the compactor's `copy_meta_data`: https://github.com/apache/couchdb/blob/23b98345f0db38214eaad33b159cf10dd9deaf72/src/couch/src/couch_bt_engine_compactor.erl#L554-L555\r\n\r\nor compactor's `merge_doc_ids` https://github.com/apache/couchdb/blob/23b98345f0db38214eaad33b159cf10dd9deaf72/src/couch/src/couch_bt_engine_compactor.erl#L662-L669","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742753429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742780586","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-742780586","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":742780586,"node_id":"MDEyOklzc3VlQ29tbWVudDc0Mjc4MDU4Ng==","user":{"login":"bdoyle0182","id":11879547,"node_id":"MDQ6VXNlcjExODc5NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/11879547?v=4","gravatar_id":"","url":"https://api.github.com/users/bdoyle0182","html_url":"https://github.com/bdoyle0182","followers_url":"https://api.github.com/users/bdoyle0182/followers","following_url":"https://api.github.com/users/bdoyle0182/following{/other_user}","gists_url":"https://api.github.com/users/bdoyle0182/gists{/gist_id}","starred_url":"https://api.github.com/users/bdoyle0182/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdoyle0182/subscriptions","organizations_url":"https://api.github.com/users/bdoyle0182/orgs","repos_url":"https://api.github.com/users/bdoyle0182/repos","events_url":"https://api.github.com/users/bdoyle0182/events{/privacy}","received_events_url":"https://api.github.com/users/bdoyle0182/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-10T20:31:55Z","updated_at":"2020-12-10T20:34:52Z","author_association":"NONE","body":"Current couchdb: 3.1.1\r\nPrevious couchdb: 2.3.1\r\n\r\nCurrent erlang: 20.3.8.24\r\nPrevious erlang: 19.2\r\n\r\ncentos: CentOS Linux release 7.9.2009\r\n\r\nfile system: overlay","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/742780586/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743292282","html_url":"https://github.com/apache/couchdb/pull/3285#issuecomment-743292282","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3285","id":743292282,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzI5MjI4Mg==","user":{"login":"glynnbird","id":697925,"node_id":"MDQ6VXNlcjY5NzkyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/697925?v=4","gravatar_id":"","url":"https://api.github.com/users/glynnbird","html_url":"https://github.com/glynnbird","followers_url":"https://api.github.com/users/glynnbird/followers","following_url":"https://api.github.com/users/glynnbird/following{/other_user}","gists_url":"https://api.github.com/users/glynnbird/gists{/gist_id}","starred_url":"https://api.github.com/users/glynnbird/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/glynnbird/subscriptions","organizations_url":"https://api.github.com/users/glynnbird/orgs","repos_url":"https://api.github.com/users/glynnbird/repos","events_url":"https://api.github.com/users/glynnbird/events{/privacy}","received_events_url":"https://api.github.com/users/glynnbird/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-11T16:27:51Z","updated_at":"2020-12-11T16:27:51Z","author_association":"CONTRIBUTOR","body":"@nickva my reading of the Apache docs are that although .asy.yaml is branch specific, configuration the pertains to branch protection needs to be in the default (main) branch. So If you want additional branches protected, they need adding to this PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743292282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743306689","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-743306689","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":743306689,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzMwNjY4OQ==","user":{"login":"bdoyle0182","id":11879547,"node_id":"MDQ6VXNlcjExODc5NTQ3","avatar_url":"https://avatars.githubusercontent.com/u/11879547?v=4","gravatar_id":"","url":"https://api.github.com/users/bdoyle0182","html_url":"https://github.com/bdoyle0182","followers_url":"https://api.github.com/users/bdoyle0182/followers","following_url":"https://api.github.com/users/bdoyle0182/following{/other_user}","gists_url":"https://api.github.com/users/bdoyle0182/gists{/gist_id}","starred_url":"https://api.github.com/users/bdoyle0182/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdoyle0182/subscriptions","organizations_url":"https://api.github.com/users/bdoyle0182/orgs","repos_url":"https://api.github.com/users/bdoyle0182/repos","events_url":"https://api.github.com/users/bdoyle0182/events{/privacy}","received_events_url":"https://api.github.com/users/bdoyle0182/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-11T16:53:33Z","updated_at":"2020-12-11T16:53:33Z","author_association":"NONE","body":"Just to update the compaction did successfully complete after being re-triggered so just deleting the compaction files seems like a fine remediation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743306689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743354040","html_url":"https://github.com/apache/couchdb/pull/3285#issuecomment-743354040","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3285","id":743354040,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzM1NDA0MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-11T18:29:37Z","updated_at":"2020-12-11T18:29:37Z","author_association":"CONTRIBUTOR","body":"@glynnbird ah makes sense, metadata about protected branches would be in the main branch. Let's add 3.x to the list of branches then.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743354040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743358947","html_url":"https://github.com/apache/couchdb/issues/3292#issuecomment-743358947","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3292","id":743358947,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzM1ODk0Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-11T18:40:26Z","updated_at":"2020-12-11T18:40:26Z","author_association":"CONTRIBUTOR","body":"@bdoyle0182 makes sense, thanks for confirming. This probably is an upgrade issue, we have upgrade code to handle the main .couch files but not necessarily the .compact.* files I think.\r\n\r\n@davisp I wonder if we can automatically detect the upgrade scenario and auto-delete or at least ignore the older compaction files when the format is upgraded?\r\n\r\nWe should update the docs to advise users to complete compactions on the 2.x nodes before they are upgraded to 3.x, or alternatively to delete the .compact.meta and .compact.data after the upgrade.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743358947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743804165","html_url":"https://github.com/apache/couchdb/issues/2236#issuecomment-743804165","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2236","id":743804165,"node_id":"MDEyOklzc3VlQ29tbWVudDc0MzgwNDE2NQ==","user":{"login":"elijahdorman","id":9434264,"node_id":"MDQ6VXNlcjk0MzQyNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/9434264?v=4","gravatar_id":"","url":"https://api.github.com/users/elijahdorman","html_url":"https://github.com/elijahdorman","followers_url":"https://api.github.com/users/elijahdorman/followers","following_url":"https://api.github.com/users/elijahdorman/following{/other_user}","gists_url":"https://api.github.com/users/elijahdorman/gists{/gist_id}","starred_url":"https://api.github.com/users/elijahdorman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elijahdorman/subscriptions","organizations_url":"https://api.github.com/users/elijahdorman/orgs","repos_url":"https://api.github.com/users/elijahdorman/repos","events_url":"https://api.github.com/users/elijahdorman/events{/privacy}","received_events_url":"https://api.github.com/users/elijahdorman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-12T19:27:19Z","updated_at":"2020-12-12T19:27:19Z","author_association":"NONE","body":"Why isn't there an ability to index array entries?\r\n\r\nIf the index target is `myArr: []` then create a map where the key is the array value and the value is a set of IDs. When items are inserted/deleted, updating the map and set will be fast.\r\n\r\nNow you can compare the map keys to the query and for each match return the sets. These document IDs can then be unioned with the rest of the query for final results.\r\n\r\nThis seems like a simple, but effective performance enhancement.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743804165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743984530","html_url":"https://github.com/apache/couchdb/issues/3295#issuecomment-743984530","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3295","id":743984530,"node_id":"MDEyOklzc3VlQ29tbWVudDc0Mzk4NDUzMA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-13T10:24:59Z","updated_at":"2020-12-13T10:24:59Z","author_association":"MEMBER","body":"server move snafu, I’m on it\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743984530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743984921","html_url":"https://github.com/apache/couchdb/issues/3295#issuecomment-743984921","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3295","id":743984921,"node_id":"MDEyOklzc3VlQ29tbWVudDc0Mzk4NDkyMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-13T10:28:47Z","updated_at":"2020-12-13T10:28:47Z","author_association":"MEMBER","body":"fixed, it’ll be 3600 seconds for DNS to propagate. If you want to get ahead of the curve, `185.26.156.247` is the new IP for couchdb.neighbourhood.ie","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/743984921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744216762","html_url":"https://github.com/apache/couchdb/pull/3296#issuecomment-744216762","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3296","id":744216762,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDIxNjc2Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T06:54:41Z","updated_at":"2020-12-14T06:54:41Z","author_association":"MEMBER","body":"@rnewson Do we need to do a code clearance on this, since this is coming from IBM?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744216762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744659008","html_url":"https://github.com/apache/couchdb/pull/3296#issuecomment-744659008","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3296","id":744659008,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDY1OTAwOA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T19:27:43Z","updated_at":"2020-12-14T19:27:43Z","author_association":"MEMBER","body":"@wohali I'm not sure what the threshold is these days but we've done similar imports as this in the recent past without one (for ken, smoosh for 3.x).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744659008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744669688","html_url":"https://github.com/apache/couchdb/pull/3296#issuecomment-744669688","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3296","id":744669688,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDY2OTY4OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T19:47:58Z","updated_at":"2020-12-14T19:47:58Z","author_association":"MEMBER","body":"Given all devs on this are already CouchDB devs, and given I expect internal clearance has already been made inside of IBM for IP clearance, I am +1 on this in principle. (I cannot review the code itself.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744669688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744676111","html_url":"https://github.com/apache/couchdb/issues/3294#issuecomment-744676111","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3294","id":744676111,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDY3NjExMQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T20:00:32Z","updated_at":"2020-12-14T20:00:32Z","author_association":"MEMBER","body":"That seems plausible looking at it. I think the right solution would be to have a new internal API that will silence a future (as opposed to cancelling) by setting the `cancelled` flag to true so that we don't send the message.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744676111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744682060","html_url":"https://github.com/apache/couchdb/issues/3294#issuecomment-744682060","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3294","id":744682060,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDY4MjA2MA==","user":{"login":"leonardb","id":699184,"node_id":"MDQ6VXNlcjY5OTE4NA==","avatar_url":"https://avatars.githubusercontent.com/u/699184?v=4","gravatar_id":"","url":"https://api.github.com/users/leonardb","html_url":"https://github.com/leonardb","followers_url":"https://api.github.com/users/leonardb/followers","following_url":"https://api.github.com/users/leonardb/following{/other_user}","gists_url":"https://api.github.com/users/leonardb/gists{/gist_id}","starred_url":"https://api.github.com/users/leonardb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonardb/subscriptions","organizations_url":"https://api.github.com/users/leonardb/orgs","repos_url":"https://api.github.com/users/leonardb/repos","events_url":"https://api.github.com/users/leonardb/events{/privacy}","received_events_url":"https://api.github.com/users/leonardb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T20:11:33Z","updated_at":"2020-12-14T20:11:33Z","author_association":"NONE","body":"@davisp \r\nI'm not well versed enough in the design of the nif, but it seems that even then there may be a race condition where the message is dispatched before being silenced","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744682060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744720274","html_url":"https://github.com/apache/couchdb/issues/3294#issuecomment-744720274","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3294","id":744720274,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDcyMDI3NA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T21:25:49Z","updated_at":"2020-12-14T21:25:49Z","author_association":"MEMBER","body":"@leonardb I've pushed a branch to `couchdb-erlfdb` that should theoretically fix the issue. Do you think you could give it a try to see if it fixes the issue for you?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744720274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744732087","html_url":"https://github.com/apache/couchdb/issues/3294#issuecomment-744732087","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3294","id":744732087,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDczMjA4Nw==","user":{"login":"leonardb","id":699184,"node_id":"MDQ6VXNlcjY5OTE4NA==","avatar_url":"https://avatars.githubusercontent.com/u/699184?v=4","gravatar_id":"","url":"https://api.github.com/users/leonardb","html_url":"https://github.com/leonardb","followers_url":"https://api.github.com/users/leonardb/followers","following_url":"https://api.github.com/users/leonardb/following{/other_user}","gists_url":"https://api.github.com/users/leonardb/gists{/gist_id}","starred_url":"https://api.github.com/users/leonardb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leonardb/subscriptions","organizations_url":"https://api.github.com/users/leonardb/orgs","repos_url":"https://api.github.com/users/leonardb/repos","events_url":"https://api.github.com/users/leonardb/events{/privacy}","received_events_url":"https://api.github.com/users/leonardb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T21:49:18Z","updated_at":"2020-12-14T21:49:18Z","author_association":"NONE","body":"Thanks @davisp \r\n\r\nI can confirm I'm no longer receiving spurious messages with the patch applied when running the same ops/data I was using for the initial report.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744732087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744760675","html_url":"https://github.com/apache/couchdb/pull/3297#issuecomment-744760675","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3297","id":744760675,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NDc2MDY3NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-14T22:49:37Z","updated_at":"2020-12-14T22:49:37Z","author_association":"MEMBER","body":"Backport of this to 3.x, was missed on initial commit, +1 from me for previous submission by Simon + jan","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/744760675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/745195428","html_url":"https://github.com/apache/couchdb/issues/2701#issuecomment-745195428","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2701","id":745195428,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTE5NTQyOA==","user":{"login":"vsoloviov","id":15050416,"node_id":"MDQ6VXNlcjE1MDUwNDE2","avatar_url":"https://avatars.githubusercontent.com/u/15050416?v=4","gravatar_id":"","url":"https://api.github.com/users/vsoloviov","html_url":"https://github.com/vsoloviov","followers_url":"https://api.github.com/users/vsoloviov/followers","following_url":"https://api.github.com/users/vsoloviov/following{/other_user}","gists_url":"https://api.github.com/users/vsoloviov/gists{/gist_id}","starred_url":"https://api.github.com/users/vsoloviov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vsoloviov/subscriptions","organizations_url":"https://api.github.com/users/vsoloviov/orgs","repos_url":"https://api.github.com/users/vsoloviov/repos","events_url":"https://api.github.com/users/vsoloviov/events{/privacy}","received_events_url":"https://api.github.com/users/vsoloviov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-15T10:22:53Z","updated_at":"2020-12-15T10:22:53Z","author_association":"NONE","body":"If anyone else is looking here why a new database requires auth after upgrade to 3.x: you need to remove *_admin* role from http://localhost:5984/_utils/#/database/your_database_name/permissions from **Members** to make the database anonymously accessible.\r\n\r\n<img width=\"1072\" alt=\"image\" src=\"https://user-images.githubusercontent.com/15050416/102202480-069cef80-3ed0-11eb-9ff0-be9cfb2a3189.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/745195428/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/745352898","html_url":"https://github.com/apache/couchdb/issues/3300#issuecomment-745352898","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3300","id":745352898,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NTM1Mjg5OA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-15T15:07:38Z","updated_at":"2020-12-15T15:07:38Z","author_association":"MEMBER","body":"I'm interested in fixing this","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/745352898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/747606145","html_url":"https://github.com/apache/couchdb/issues/3087#issuecomment-747606145","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3087","id":747606145,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NzYwNjE0NQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-17T18:07:31Z","updated_at":"2020-12-17T18:07:31Z","author_association":"MEMBER","body":"Just want to drop a note here that I've found the root case for this bug and going to open PR with the fix after Holidays.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/747606145/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/747633817","html_url":"https://github.com/apache/couchdb/pull/3189#issuecomment-747633817","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3189","id":747633817,"node_id":"MDEyOklzc3VlQ29tbWVudDc0NzYzMzgxNw==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-17T18:58:33Z","updated_at":"2020-12-17T18:58:33Z","author_association":"MEMBER","body":"@iilyak are these efforts still valid? I saw you merged a PR (#3286) to overcome an issue I was stuck in front of :+1: \r\n\r\nYou think this approach is still valid?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/747633817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/748073005","html_url":"https://github.com/apache/couchdb/pull/3189#issuecomment-748073005","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3189","id":748073005,"node_id":"MDEyOklzc3VlQ29tbWVudDc0ODA3MzAwNQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-18T13:03:17Z","updated_at":"2020-12-18T13:03:17Z","author_association":"CONTRIBUTOR","body":"> @iilyak are these efforts still valid? I saw you merged a PR (#3286) to overcome an issue I was stuck in front of 👍\r\n\r\nI didn't know that inability to skip tests is what motivated you for this work. I implemented  #3286 as an additional target to call instead of  `make elixir` for people who run customized versions of CouchDB. \r\n\r\nThe idea was that CouchDB CI would use your work. We possibly use different tags for things which are not implemented yet for FDB based CouchDB. Maybe `3.x` tag for all elixir tests and `4.x` for tests which already working in `main` branch. This should cover all possible combinations:\r\n\r\n\r\n| 3x | 4x | description |\r\n|-|-|-|\r\n|      |  + | New APIs (new pagination API from #2870 for example) |\r\n|  +  |     | APIs which are not yet implemented in `main` or removed |\r\n| +   |  + | APIs which already work for `main` and `master` |\r\n\r\nHowever these new tags might interfere with `kind`. Which probably means we probably need to comment out 3x tests which are testing not implemented yet features. \r\n\r\nAgain the #3286 switches to `make elixir-suite` as a temporary solution. Nick noticed that the coverage via #3286 is greater than the one via `make elixir tests=test/elixir/test/basics_test.exs,test/elixir/test/replication_test.exs,test/elixir/test/map_test.exs,test/elixir/test/all_docs_test.exs,test/elixir/test/bulk_docs_test.exs` so he proposed to use new way for now.\r\n\r\nThe deficiency of  #3286 is the need to maintain `test/elixir/test/config/suite.elixir`. It is ok for people who run customized versions, but IMO it is not good enough as a primary mechanism. Ideally the ability to skip tests via blacklist should be supported by testing framework. I considered opening PR for mix. However I realized that CouchDB wouldn't benefit from the feature because it is going to be a long time before we migrate to version of Elixir which would have my patch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/748073005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590314","html_url":"https://github.com/apache/couchdb/issues/4227#issuecomment-1280590314","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4227","id":1280590314,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzMTQ=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-19T08:01:09Z","updated_at":"2020-12-19T08:01:09Z","author_association":"MEMBER","body":"This looks like something that could go in our documentation. Would you be willing to write a PR for this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590314/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590320","html_url":"https://github.com/apache/couchdb/issues/4227#issuecomment-1280590320","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4227","id":1280590320,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzMjA=","user":{"login":"ceremcem","id":6639874,"node_id":"MDQ6VXNlcjY2Mzk4NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6639874?v=4","gravatar_id":"","url":"https://api.github.com/users/ceremcem","html_url":"https://github.com/ceremcem","followers_url":"https://api.github.com/users/ceremcem/followers","following_url":"https://api.github.com/users/ceremcem/following{/other_user}","gists_url":"https://api.github.com/users/ceremcem/gists{/gist_id}","starred_url":"https://api.github.com/users/ceremcem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ceremcem/subscriptions","organizations_url":"https://api.github.com/users/ceremcem/orgs","repos_url":"https://api.github.com/users/ceremcem/repos","events_url":"https://api.github.com/users/ceremcem/events{/privacy}","received_events_url":"https://api.github.com/users/ceremcem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-19T15:28:50Z","updated_at":"2020-12-19T15:28:50Z","author_association":"CONTRIBUTOR","body":"I would expect CouchDB to make (or at least ask) that setting during the installation, but if you think that this is user's responsibility, then it's related to the documentation. I would love to create a PR for this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]