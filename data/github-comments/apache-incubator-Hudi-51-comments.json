[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609480782","html_url":"https://github.com/apache/hudi/issues/1487#issuecomment-609480782","issue_url":"https://api.github.com/repos/apache/hudi/issues/1487","id":609480782,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTQ4MDc4Mg==","user":{"login":"malanb5","id":30410670,"node_id":"MDQ6VXNlcjMwNDEwNjcw","avatar_url":"https://avatars.githubusercontent.com/u/30410670?v=4","gravatar_id":"","url":"https://api.github.com/users/malanb5","html_url":"https://github.com/malanb5","followers_url":"https://api.github.com/users/malanb5/followers","following_url":"https://api.github.com/users/malanb5/following{/other_user}","gists_url":"https://api.github.com/users/malanb5/gists{/gist_id}","starred_url":"https://api.github.com/users/malanb5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/malanb5/subscriptions","organizations_url":"https://api.github.com/users/malanb5/orgs","repos_url":"https://api.github.com/users/malanb5/repos","events_url":"https://api.github.com/users/malanb5/events{/privacy}","received_events_url":"https://api.github.com/users/malanb5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-05T20:52:32Z","updated_at":"2020-04-05T20:52:32Z","author_association":"NONE","body":"@lamber-ken Thank you for the help.  I updated the version of Hive.  Now I'm getting the following:\r\n\r\n```\r\nException in thread \"main\" java.lang.IllegalArgumentException: Unable to instantiate SparkSession with Hive support because Hive classes are not found.\r\n        at org.apache.spark.sql.SparkSession$Builder.enableHiveSupport(SparkSession.scala:869)\r\n        at com.github.malanb5.mlpipelines.FeatureExtractor.main(FeatureExtractor.java:59\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609480782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609489074","html_url":"https://github.com/apache/hudi/issues/1480#issuecomment-609489074","issue_url":"https://api.github.com/repos/apache/hudi/issues/1480","id":609489074,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTQ4OTA3NA==","user":{"login":"symfrog","id":767914,"node_id":"MDQ6VXNlcjc2NzkxNA==","avatar_url":"https://avatars.githubusercontent.com/u/767914?v=4","gravatar_id":"","url":"https://api.github.com/users/symfrog","html_url":"https://github.com/symfrog","followers_url":"https://api.github.com/users/symfrog/followers","following_url":"https://api.github.com/users/symfrog/following{/other_user}","gists_url":"https://api.github.com/users/symfrog/gists{/gist_id}","starred_url":"https://api.github.com/users/symfrog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symfrog/subscriptions","organizations_url":"https://api.github.com/users/symfrog/orgs","repos_url":"https://api.github.com/users/symfrog/repos","events_url":"https://api.github.com/users/symfrog/events{/privacy}","received_events_url":"https://api.github.com/users/symfrog/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-05T21:41:18Z","updated_at":"2020-04-05T21:41:18Z","author_association":"NONE","body":"@xushiyan Yes, thanks, that would work. I am using COW for the tables.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609489074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609493045","html_url":"https://github.com/apache/hudi/pull/1486#issuecomment-609493045","issue_url":"https://api.github.com/repos/apache/hudi/issues/1486","id":609493045,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTQ5MzA0NQ==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-05T22:12:20Z","updated_at":"2020-04-05T22:12:20Z","author_association":"MEMBER","body":"Test added. Thanks for the review","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609493045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609493874","html_url":"https://github.com/apache/hudi/issues/1487#issuecomment-609493874","issue_url":"https://api.github.com/repos/apache/hudi/issues/1487","id":609493874,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTQ5Mzg3NA==","user":{"login":"malanb5","id":30410670,"node_id":"MDQ6VXNlcjMwNDEwNjcw","avatar_url":"https://avatars.githubusercontent.com/u/30410670?v=4","gravatar_id":"","url":"https://api.github.com/users/malanb5","html_url":"https://github.com/malanb5","followers_url":"https://api.github.com/users/malanb5/followers","following_url":"https://api.github.com/users/malanb5/following{/other_user}","gists_url":"https://api.github.com/users/malanb5/gists{/gist_id}","starred_url":"https://api.github.com/users/malanb5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/malanb5/subscriptions","organizations_url":"https://api.github.com/users/malanb5/orgs","repos_url":"https://api.github.com/users/malanb5/repos","events_url":"https://api.github.com/users/malanb5/events{/privacy}","received_events_url":"https://api.github.com/users/malanb5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-05T22:18:33Z","updated_at":"2020-04-05T22:18:33Z","author_association":"NONE","body":"I was running this through the JVM not the script spark-submit which loaded in the spark classes.  Thanks for the help again @lamber-ken ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609493874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609496962","html_url":"https://github.com/apache/hudi/issues/1487#issuecomment-609496962","issue_url":"https://api.github.com/repos/apache/hudi/issues/1487","id":609496962,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTQ5Njk2Mg==","user":{"login":"malanb5","id":30410670,"node_id":"MDQ6VXNlcjMwNDEwNjcw","avatar_url":"https://avatars.githubusercontent.com/u/30410670?v=4","gravatar_id":"","url":"https://api.github.com/users/malanb5","html_url":"https://github.com/malanb5","followers_url":"https://api.github.com/users/malanb5/followers","following_url":"https://api.github.com/users/malanb5/following{/other_user}","gists_url":"https://api.github.com/users/malanb5/gists{/gist_id}","starred_url":"https://api.github.com/users/malanb5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/malanb5/subscriptions","organizations_url":"https://api.github.com/users/malanb5/orgs","repos_url":"https://api.github.com/users/malanb5/repos","events_url":"https://api.github.com/users/malanb5/events{/privacy}","received_events_url":"https://api.github.com/users/malanb5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-05T22:42:10Z","updated_at":"2020-04-05T22:43:26Z","author_association":"NONE","body":"Posted this on Stack Overflow, hopefully this will help others:\r\n\r\nhttps://stackoverflow.com/a/61050495/8366477","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609496962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609498911","html_url":"https://github.com/apache/hudi/issues/1482#issuecomment-609498911","issue_url":"https://api.github.com/repos/apache/hudi/issues/1482","id":609498911,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTQ5ODkxMQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-05T22:56:42Z","updated_at":"2020-04-05T22:56:42Z","author_association":"CONTRIBUTOR","body":"@venkee14 : can you try setting a default value for the new field. \r\n{\r\n    \"name\" : \"_hoodie_is_deleted\",\r\n    \"type\" : \"boolean\",\r\n    \"default\" : false\r\n  }\r\nLet me know if this works. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609498911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609550970","html_url":"https://github.com/apache/hudi/issues/1487#issuecomment-609550970","issue_url":"https://api.github.com/repos/apache/hudi/issues/1487","id":609550970,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTU1MDk3MA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T03:49:10Z","updated_at":"2020-04-06T03:49:10Z","author_association":"MEMBER","body":"You're always welcome : )","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609550970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609588466","html_url":"https://github.com/apache/hudi/issues/827#issuecomment-609588466","issue_url":"https://api.github.com/repos/apache/hudi/issues/827","id":609588466,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTU4ODQ2Ng==","user":{"login":"malanb5","id":30410670,"node_id":"MDQ6VXNlcjMwNDEwNjcw","avatar_url":"https://avatars.githubusercontent.com/u/30410670?v=4","gravatar_id":"","url":"https://api.github.com/users/malanb5","html_url":"https://github.com/malanb5","followers_url":"https://api.github.com/users/malanb5/followers","following_url":"https://api.github.com/users/malanb5/following{/other_user}","gists_url":"https://api.github.com/users/malanb5/gists{/gist_id}","starred_url":"https://api.github.com/users/malanb5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/malanb5/subscriptions","organizations_url":"https://api.github.com/users/malanb5/orgs","repos_url":"https://api.github.com/users/malanb5/repos","events_url":"https://api.github.com/users/malanb5/events{/privacy}","received_events_url":"https://api.github.com/users/malanb5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T06:21:35Z","updated_at":"2020-04-06T06:21:35Z","author_association":"NONE","body":"A follow up on this, the class is in com.uber.hoodie.hadoop (now as of 4/5/2020) com.apache.hudi, therefore, include the Hoodie Hadoop module dependency from maven:\r\n\r\n        <!-- Hoodie -->\r\n        <dependency>\r\n            <groupId>org.apache.hudi</groupId>\r\n            <artifactId>hudi-hadoop-mr</artifactId>\r\n            <version>${hudi.version}</version>\r\n        </dependency>\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609588466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609647685","html_url":"https://github.com/apache/hudi/pull/1150#issuecomment-609647685","issue_url":"https://api.github.com/repos/apache/hudi/issues/1150","id":609647685,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTY0NzY4NQ==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T08:21:23Z","updated_at":"2020-04-06T08:21:23Z","author_association":"CONTRIBUTOR","body":"@bvaradar Have addressed the comments. Please take a pass. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609647685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609676490","html_url":"https://github.com/apache/hudi/pull/1174#issuecomment-609676490","issue_url":"https://api.github.com/repos/apache/hudi/issues/1174","id":609676490,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTY3NjQ5MA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T09:19:31Z","updated_at":"2020-04-06T09:19:31Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @n3nash lets revive this? :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609676490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609849702","html_url":"https://github.com/apache/hudi/pull/1396#issuecomment-609849702","issue_url":"https://api.github.com/repos/apache/hudi/issues/1396","id":609849702,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTg0OTcwMg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T15:02:40Z","updated_at":"2020-04-06T15:02:40Z","author_association":"MEMBER","body":"@bhasudha is fixing the RT incremental pull. Hopefully this is all much easier.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609849702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609914596","html_url":"https://github.com/apache/hudi/issues/1480#issuecomment-609914596","issue_url":"https://api.github.com/repos/apache/hudi/issues/1480","id":609914596,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTkxNDU5Ng==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T16:57:22Z","updated_at":"2020-04-06T16:57:37Z","author_association":"MEMBER","body":">we could start with COW tables support?\r\n\r\nsg. as long as we throw a loud exception saying MOR + transformer is not supported :) \r\n\r\nTime to file a JIRA?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609914596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609980893","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-609980893","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":609980893,"node_id":"MDEyOklzc3VlQ29tbWVudDYwOTk4MDg5Mw==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T19:06:38Z","updated_at":"2020-04-06T19:06:38Z","author_association":"NONE","body":"Please, add me tverdokhlebd@gmail.com\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/609980893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610010320","html_url":"https://github.com/apache/hudi/pull/1476#issuecomment-610010320","issue_url":"https://api.github.com/repos/apache/hudi/issues/1476","id":610010320,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDAxMDMyMA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T20:09:05Z","updated_at":"2020-04-06T20:09:05Z","author_association":"MEMBER","body":"Currently the export writes out binary avro records for instants read from the metadata archive files. This beats the purpose of exporting for debugging. I am updating the code to write out json formatted records instead for all exported instants.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610010320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610070984","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610070984","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610070984,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDA3MDk4NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T22:31:15Z","updated_at":"2020-04-06T22:31:15Z","author_association":"CONTRIBUTOR","body":"Didnt spend too much time into the debug logs. Can you try increasing hudi parallelism configurations and give more executors. I couldn't find how many executors are present in the application.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610070984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610073501","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610073501","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610073501,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDA3MzUwMQ==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T22:39:03Z","updated_at":"2020-04-06T22:39:38Z","author_association":"NONE","body":"@bvaradar , it's a local mode with 2 threads. Yes, I have tried to increase hudi parallelism (Default values)/threads, but it didn't help me.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610073501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610079124","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610079124","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610079124,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDA3OTEyNA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T22:57:56Z","updated_at":"2020-04-06T22:57:56Z","author_association":"CONTRIBUTOR","body":"Ohh. I didn't realize that. Haven't tried ingesting 30M record ingestion in local mode with 2 threads. You might be stretching the limits here. The OOM error happens in executor. How much is executor memory ? Try giving more ?\r\n\r\nIf you are running this with local docker, have you given docker desktop with enough memory to docker engine ? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610079124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610082513","html_url":"https://github.com/apache/hudi/issues/1488#issuecomment-610082513","issue_url":"https://api.github.com/repos/apache/hudi/issues/1488","id":610082513,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDA4MjUxMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-06T23:08:52Z","updated_at":"2020-04-06T23:08:52Z","author_association":"CONTRIBUTOR","body":"@jvaesteves : Yes, the default KeyGenerator (https://github.com/apache/incubator-hudi/blob/master/hudi-spark/src/main/scala/org/apache/hudi/DataSourceOptions.scala#L216) expects record keys and partition-paths to be string (other types converted to string using toString()). You can plugin your own implementation of keygenerator for binary types (record-keys).\r\nTry setting hoodie.datasource.write.keygenerator.class=org.apache.hudi.utilities.keygen.TimestampBasedKeyGenerator for fixing the partition-path alone. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610082513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610106545","html_url":"https://github.com/apache/hudi/issues/1480#issuecomment-610106545","issue_url":"https://api.github.com/repos/apache/hudi/issues/1480","id":610106545,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDEwNjU0NQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T00:30:58Z","updated_at":"2020-04-07T00:30:58Z","author_association":"MEMBER","body":"@vinothchandar filed\r\nhttps://jira.apache.org/jira/browse/HUDI-767\r\nhttps://jira.apache.org/jira/browse/HUDI-768\r\n\r\n@bvaradar @vinothchandar ok to close this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610106545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610133949","html_url":"https://github.com/apache/hudi/issues/1480#issuecomment-610133949","issue_url":"https://api.github.com/repos/apache/hudi/issues/1480","id":610133949,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDEzMzk0OQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T02:15:02Z","updated_at":"2020-04-07T02:15:02Z","author_association":"CONTRIBUTOR","body":"Thanks @xushiyan . If you are planning to have the jiras done in 0.6.0, can you mark the fix versions accordingly. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610133949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610149441","html_url":"https://github.com/apache/hudi/pull/1469#issuecomment-610149441","issue_url":"https://api.github.com/repos/apache/hudi/issues/1469","id":610149441,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDE0OTQ0MQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T03:14:28Z","updated_at":"2020-04-07T03:14:28Z","author_association":"MEMBER","body":"> @lamber-ken : is this in a reviewable shape or you want me to wait.\r\n\r\nThanks for reviewing this pr, I'll ping you later when finished : )","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610149441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610166379","html_url":"https://github.com/apache/hudi/pull/1490#issuecomment-610166379","issue_url":"https://api.github.com/repos/apache/hudi/issues/1490","id":610166379,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDE2NjM3OQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T04:28:09Z","updated_at":"2020-04-09T06:50:22Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=h1) Report\n> Merging [#1490](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/c146ca90fdd102f2bda90a2b15f6aef56414f9f4&el=desc) will **increase** coverage by `3.99%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1490/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1490      +/-   ##\n============================================\n+ Coverage     67.64%   71.64%   +3.99%     \n- Complexity      261      288      +27     \n============================================\n  Files           348      338      -10     \n  Lines         16672    15931     -741     \n  Branches       1694     1625      -69     \n============================================\n+ Hits          11278    11413     +135     \n+ Misses         4653     3785     -868     \n+ Partials        741      733       -8     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../org/apache/hudi/table/HoodieMergeOnReadTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllTWVyZ2VPblJlYWRUYWJsZS5qYXZh) | `83.12% <0.00%> (-2.50%)` | `0.00% <0.00%> (ø%)` | |\n| [...i/utilities/deltastreamer/HoodieDeltaStreamer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllRGVsdGFTdHJlYW1lci5qYXZh) | `78.77% <0.00%> (-1.43%)` | `10.00% <0.00%> (+2.00%)` | :arrow_down: |\n| [...in/java/org/apache/hudi/metrics/HoodieMetrics.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9Ib29kaWVNZXRyaWNzLmphdmE=) | `86.53% <0.00%> (-0.97%)` | `0.00% <0.00%> (ø%)` | |\n| [.../org/apache/hudi/table/HoodieCopyOnWriteTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllQ29weU9uV3JpdGVUYWJsZS5qYXZh) | `89.28% <0.00%> (-0.66%)` | `0.00% <0.00%> (ø%)` | |\n| [...java/org/apache/hudi/client/HoodieWriteClient.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0hvb2RpZVdyaXRlQ2xpZW50LmphdmE=) | `69.23% <0.00%> (-0.55%)` | `0.00% <0.00%> (ø%)` | |\n| [.../apache/hudi/client/AbstractHoodieWriteClient.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0Fic3RyYWN0SG9vZGllV3JpdGVDbGllbnQuamF2YQ==) | `74.15% <0.00%> (-0.29%)` | `0.00% <0.00%> (ø%)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `71.85% <0.00%> (-0.15%)` | `38.00% <0.00%> (ø%)` | |\n| [...n/java/org/apache/hudi/common/model/HoodieKey.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0hvb2RpZUtleS5qYXZh) | `88.88% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [...java/org/apache/hudi/common/util/CleanerUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvQ2xlYW5lclV0aWxzLmphdmE=) | `95.65% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [.../java/org/apache/hudi/utilities/HoodieCleaner.java](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL0hvb2RpZUNsZWFuZXIuamF2YQ==) | | | |\n| ... and [42 more](https://codecov.io/gh/apache/incubator-hudi/pull/1490/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=footer). Last update [c146ca9...32ef3e7](https://codecov.io/gh/apache/incubator-hudi/pull/1490?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610166379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610175780","html_url":"https://github.com/apache/hudi/pull/1492#issuecomment-610175780","issue_url":"https://api.github.com/repos/apache/hudi/issues/1492","id":610175780,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDE3NTc4MA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T05:05:41Z","updated_at":"2020-04-07T05:05:41Z","author_association":"MEMBER","body":"still have a case to fix.. but provide sufficient ideas for you.. @bvaradar ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610175780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610196060","html_url":"https://github.com/apache/hudi/issues/1438#issuecomment-610196060","issue_url":"https://api.github.com/repos/apache/hudi/issues/1438","id":610196060,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDE5NjA2MA==","user":{"login":"carmhuo","id":9296411,"node_id":"MDQ6VXNlcjkyOTY0MTE=","avatar_url":"https://avatars.githubusercontent.com/u/9296411?v=4","gravatar_id":"","url":"https://api.github.com/users/carmhuo","html_url":"https://github.com/carmhuo","followers_url":"https://api.github.com/users/carmhuo/followers","following_url":"https://api.github.com/users/carmhuo/following{/other_user}","gists_url":"https://api.github.com/users/carmhuo/gists{/gist_id}","starred_url":"https://api.github.com/users/carmhuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carmhuo/subscriptions","organizations_url":"https://api.github.com/users/carmhuo/orgs","repos_url":"https://api.github.com/users/carmhuo/repos","events_url":"https://api.github.com/users/carmhuo/events{/privacy}","received_events_url":"https://api.github.com/users/carmhuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T06:14:02Z","updated_at":"2020-04-07T06:14:02Z","author_association":"CONTRIBUTOR","body":"@nsivabalan   I have committed the records before read.  In the test code,  i just using HoodieKey to find the fileId, but when i set partitionPath=null with IndexType.GLOBAL_BLOOM,  the result is empty. And when i set partitionPath not empty in HoodieKey,  the result is  OK.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610196060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610227776","html_url":"https://github.com/apache/hudi/pull/1493#issuecomment-610227776","issue_url":"https://api.github.com/repos/apache/hudi/issues/1493","id":610227776,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDIyNzc3Ng==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T07:37:00Z","updated_at":"2020-04-07T07:39:12Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=h1) Report\n> Merging [#1493](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/eaf6cc2d90bf27c0d9414a4ea18dbd1b61f58e50&el=desc) will **increase** coverage by `0.03%`.\n> The diff coverage is `100.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1493/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1493      +/-   ##\n============================================\n+ Coverage     71.54%   71.58%   +0.03%     \n+ Complexity      261      260       -1     \n============================================\n  Files           336      336              \n  Lines         15744    15741       -3     \n  Branches       1610     1610              \n============================================\n+ Hits          11264    11268       +4     \n+ Misses         3759     3752       -7     \n  Partials        721      721              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/incubator-hudi/pull/1493/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `72.00% <100.00%> (ø)` | `38.00 <0.00> (ø)` | |\n| [...i/utilities/deltastreamer/HoodieDeltaStreamer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1493/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllRGVsdGFTdHJlYW1lci5qYXZh) | `78.28% <100.00%> (-0.33%)` | `7.00 <1.00> (-1.00)` | |\n| [...n/java/org/apache/hudi/common/model/HoodieKey.java](https://codecov.io/gh/apache/incubator-hudi/pull/1493/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0hvb2RpZUtleS5qYXZh) | `88.88% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [...src/main/java/org/apache/hudi/metrics/Metrics.java](https://codecov.io/gh/apache/incubator-hudi/pull/1493/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9NZXRyaWNzLmphdmE=) | `72.22% <0.00%> (+13.88%)` | `0.00% <0.00%> (ø%)` | |\n| [...g/apache/hudi/metrics/InMemoryMetricsReporter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1493/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9Jbk1lbW9yeU1ldHJpY3NSZXBvcnRlci5qYXZh) | `80.00% <0.00%> (+40.00%)` | `0.00% <0.00%> (ø%)` | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=footer). Last update [eaf6cc2...8d5582e](https://codecov.io/gh/apache/incubator-hudi/pull/1493?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610227776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610233979","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610233979","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610233979,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDIzMzk3OQ==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T07:50:33Z","updated_at":"2020-04-07T07:50:33Z","author_association":"NONE","body":"I will try with default memoryOverhead and 10GB driver memory","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610233979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610243459","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-610243459","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":610243459,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDI0MzQ1OQ==","user":{"login":"malanb5","id":30410670,"node_id":"MDQ6VXNlcjMwNDEwNjcw","avatar_url":"https://avatars.githubusercontent.com/u/30410670?v=4","gravatar_id":"","url":"https://api.github.com/users/malanb5","html_url":"https://github.com/malanb5","followers_url":"https://api.github.com/users/malanb5/followers","following_url":"https://api.github.com/users/malanb5/following{/other_user}","gists_url":"https://api.github.com/users/malanb5/gists{/gist_id}","starred_url":"https://api.github.com/users/malanb5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/malanb5/subscriptions","organizations_url":"https://api.github.com/users/malanb5/orgs","repos_url":"https://api.github.com/users/malanb5/repos","events_url":"https://api.github.com/users/malanb5/events{/privacy}","received_events_url":"https://api.github.com/users/malanb5/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T08:11:13Z","updated_at":"2020-04-07T08:11:13Z","author_association":"NONE","body":"Please add me too malanb5@gmail.com","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610243459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610257073","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-610257073","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":610257073,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDI1NzA3Mw==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T08:39:26Z","updated_at":"2020-04-07T08:39:26Z","author_association":"MEMBER","body":"hi @malanb5 @tverdokhlebd, done and welcome : )","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610257073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610298123","html_url":"https://github.com/apache/hudi/pull/1490#issuecomment-610298123","issue_url":"https://api.github.com/repos/apache/hudi/issues/1490","id":610298123,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDI5ODEyMw==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T10:07:04Z","updated_at":"2020-04-07T10:07:04Z","author_association":"CONTRIBUTOR","body":"@yanghua @vinothchandar please have a review.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610298123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610298785","html_url":"https://github.com/apache/hudi/pull/1452#issuecomment-610298785","issue_url":"https://api.github.com/repos/apache/hudi/issues/1452","id":610298785,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDI5ODc4NQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T10:08:26Z","updated_at":"2020-04-07T10:08:26Z","author_association":"CONTRIBUTOR","body":"again, is this PR not only for `clean` command?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610298785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610307143","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610307143","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610307143,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDMwNzE0Mw==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T10:26:35Z","updated_at":"2020-04-07T10:36:01Z","author_association":"NONE","body":"So, the process took 2h 40m (local[4] and driver memory 10gb) and thrown \"java.lang.OutOfMemoryError: GC overhead limit exceeded\".\r\nLog https://drive.google.com/open?id=1Ark99uXcdp5_4Ns7-DdaSkMfkahJgK6n.\r\n\r\nIs it normal, that the process took such time?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610307143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610432304","html_url":"https://github.com/apache/hudi/pull/1289#issuecomment-610432304","issue_url":"https://api.github.com/repos/apache/hudi/issues/1289","id":610432304,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDQzMjMwNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T14:50:17Z","updated_at":"2020-04-07T14:50:17Z","author_association":"MEMBER","body":"TestMergeOnReadTable or TestClientCopyOnWriteStorage etc that will do a full upsert dag for cow and mor are good starting points.. but really, we need to run an upsert with a real job to ensure these values also show up in real deployments","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610432304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610457107","html_url":"https://github.com/apache/hudi/pull/1452#issuecomment-610457107","issue_url":"https://api.github.com/repos/apache/hudi/issues/1452","id":610457107,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDQ1NzEwNw==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T15:33:03Z","updated_at":"2020-04-07T15:33:03Z","author_association":"CONTRIBUTOR","body":"> again, is this PR not only for `clean` command?\r\n\r\nSorry for change it late :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610457107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610504319","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610504319","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610504319,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDUwNDMxOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T16:58:25Z","updated_at":"2020-04-07T16:58:25Z","author_association":"MEMBER","body":"Is this real data or can you share a reproducible snippet of code? Especially with these local microbenchmarks, its useful to understand as the small costs that typically don't matter in real cluster, kind of tend to amplify.. \r\n\r\nFrom the logs, it seems like \r\n1) bulk_insert is succeeding and upsert is what's failing... and it's failing during the write phase, when we actually allocate some memory to do the merge.. \r\n\r\n\r\n2) From the logs below, it seems like you have a lot of data potentially for a single node.. How much total data do you have in those 53M records? (That's a key metric for runtime, more than number of records. Hudi does not have a maxiumum records limit etc per se)\r\n\r\n```\r\n20/04/07 08:02:55 INFO ExternalAppendOnlyMap: Thread 136 spilling in-memory map of 1325.4 MB to disk (1 time so far)\r\n20/04/07 08:03:04 INFO ExternalAppendOnlyMap: Thread 137 spilling in-memory map of 1329.9 MB to disk (1 time so far)\r\n20/04/07 08:03:04 INFO ExternalAppendOnlyMap: Thread 135 spilling in-memory map of 1325.7 MB to disk (1 time so far)\r\n20/04/07 08:03:07 INFO ExternalAppendOnlyMap: Thread 47 spilling in-memory map of 1385.6 MB to disk (1 time so far)\r\n20/04/07 08:03:25 INFO ExternalAppendOnlyMap: Thread 136 spilling in-memory map of 1325.4 MB to disk (2 times so far)\r\n20/04/07 08:03:41 INFO ExternalAppendOnlyMap: Thread 137 spilling in-memory map of 1325.5 MB to disk (2 times so far)\r\n20/04/07 08:03:43 INFO ExternalAppendOnlyMap: Thread 135 spilling in-memory map of 1325.4 MB to disk (2 times so far)\r\n20/04/07 08:03:58 INFO ExternalAppendOnlyMap: Thread 47 spilling in-memory map of 1381.4 MB to disk (2 times so far)\r\n20/04/07 08:04:08 INFO ExternalAppendOnlyMap: Thread 136 spilling in-memory map of 1325.4 MB to disk (3 times so far)\r\n20/04/07 08:04:24 INFO ExternalAppendOnlyMap: Thread 137 spilling in-memory map of 1325.4 MB to disk (3 times so far)\r\n20/04/07 08:04:28 INFO ExternalAppendOnlyMap: Thread 135 spilling in-memory map of 1327.7 MB to disk (3 times so far)\r\n20/04/07 08:04:57 INFO ExternalAppendOnlyMap: Thread 136 spilling in-memory map of 1325.4 MB to disk (4 times so far)\r\n20/04/07 08:04:59 INFO ExternalAppendOnlyMap: Thread 47 spilling in-memory map of 1491.8 MB to disk (3 times so far)\r\n20/04/07 08:05:14 INFO ExternalAppendOnlyMap: Thread 137 spilling in-memory map of 1363.9 MB to disk (4 times so far)\r\n20/04/07 08:05:16 INFO ExternalAppendOnlyMap: Thread 135 spilling in-memory map of 1325.4 MB to disk (4 times so far)\r\n20/04/07 08:05:47 INFO ExternalAppendOnlyMap: Thread 47 spilling in-memory map of 1349.8 MB to disk (4 times so far)\r\n20/04/07 08:06:05 INFO ExternalAppendOnlyMap: Thread 137 spilling in-memory map of 1300.9 MB to disk (5 times so far)\r\n```\r\n\r\nI suspect what's happening is that spark memory is actually full (Hudi caches input to derive workload profile etc and typically advised to keep input data in memory) and it keeps spilling to disk, slowing everything down.. (more of a spark tuning thing)... But things don't break until Hudi tries to allocate some memory on its own, at which point the heap is full.. \r\n\r\nCan you give this a shot on a cluster?\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610504319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610564674","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610564674","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610564674,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDU2NDY3NA==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T19:01:27Z","updated_at":"2020-04-07T19:34:14Z","author_association":"NONE","body":"Code:\r\n\r\nsparkSession\r\n  .read\r\n  .jdbc(\r\n    url = jdbcConfig.url,\r\n    table = table,\r\n    columnName = \"partition\",\r\n    lowerBound = 0,\r\n    upperBound = jdbcConfig.partitionsCount.toInt,\r\n    numPartitions = jdbcConfig.partitionsCount.toInt,\r\n    connectionProperties = new Properties() {\r\n      put(\"driver\", jdbcConfig.driver)\r\n      put(\"user\", jdbcConfig.user)\r\n      put(\"password\", jdbcConfig.password)\r\n    }\r\n  )\r\n  .withColumn(\"year\", substring(col(jdbcConfig.dateColumnName), 0, 4))\r\n  .withColumn(\"month\", substring(col(jdbcConfig.dateColumnName), 6, 2))\r\n  .withColumn(\"day\", substring(col(jdbcConfig.dateColumnName), 9, 2))\r\n  .write\r\n  .option(HoodieWriteConfig.TABLE_NAME, hudiConfig.tableName)\r\n  .option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, hudiConfig.recordKey)\r\n  .option(DataSourceWriteOptions.PRECOMBINE_FIELD_OPT_KEY, hudiConfig.precombineKey)\r\n  .option(DataSourceWriteOptions.PARTITIONPATH_FIELD_OPT_KEY, hudiConfig.partitionPathKey)\r\n  .option(DataSourceWriteOptions.KEYGENERATOR_CLASS_OPT_KEY, classOf[ComplexKeyGenerator].getName)\r\n  .option(DataSourceWriteOptions.HIVE_STYLE_PARTITIONING_OPT_KEY, \"true\")\r\n  .option(\"hoodie.datasource.write.operation\", writeOperation)\r\n  .option(\"hoodie.bulkinsert.shuffle.parallelism\", hudiConfig.bulkInsertParallelism)\r\n  .option(\"hoodie.insert.shuffle.parallelism\", hudiConfig.parallelism)\r\n  .option(\"hoodie.upsert.shuffle.parallelism\", hudiConfig.parallelism)\r\n  .option(\"hoodie.cleaner.policy\", HoodieCleaningPolicy.KEEP_LATEST_FILE_VERSIONS.name())\r\n  .option(\"hoodie.cleaner.fileversions.retained\", \"1\")\r\n  .option(\"hoodie.metrics.graphite.host\", hudiConfig.graphiteHost)\r\n  .option(\"hoodie.metrics.graphite.port\", hudiConfig.graphitePort)\r\n  .option(\"hoodie.metrics.graphite.metric.prefix\", hudiConfig.graphiteMetricPrefix)\r\n  .format(\"org.apache.hudi\")\r\n  .mode(SaveMode.Append)\r\n  .save(outputPath)\r\n\r\nThis code is executing on Jenkins, with next parameters:\r\n\r\ndocker run --rm -v ${PWD}:${PWD} -v /mnt/ml_data:/mnt/ml_data bde2020/spark-master:2.4.5-hadoop2.7 \\\r\nbash ./spark/bin/spark-submit \\\r\n--master \"local[2]\" \\\r\n--packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.2-incubating,org.apache.hadoop:hadoop-aws:2.7.3,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n--conf spark.local.dir=/mnt/ml_data \\\r\n--conf spark.ui.enabled=false \\\r\n--conf spark.driver.memory=4g \\\r\n--conf spark.driver.memoryOverhead=1024 \\\r\n--conf spark.driver.maxResultSize=2g \\\r\n--conf spark.kryoserializer.buffer.max=512m \\\r\n--conf spark.serializer=org.apache.spark.serializer.KryoSerializer \\\r\n--conf spark.rdd.compress=true \\\r\n--conf spark.shuffle.service.enabled=true \\\r\n--conf spark.sql.hive.convertMetastoreParquet=false \\\r\n--conf spark.hadoop.fs.defaultFS=s3a://ir-mtu-ml-bucket/ml_hudi \\\r\n--conf spark.hadoop.fs.s3a.impl=org.apache.hadoop.fs.s3a.S3AFileSystem \\\r\n--conf spark.hadoop.fs.s3a.access.key=${AWS_ACCESS_KEY_ID} \\\r\n--conf spark.hadoop.fs.s3a.secret.key=${AWS_SECRET_ACCESS_KEY} \\\r\n--conf spark.executorEnv.period.startDate=${date} \\\r\n--conf spark.executorEnv.period.numDays=${numDays} \\\r\n--conf spark.executorEnv.jdbc.url=${VERTICA_URL} \\\r\n--conf spark.executorEnv.jdbc.user=${VERTICA_USER} \\\r\n--conf spark.executorEnv.jdbc.password=${VERTICA_PWD} \\\r\n--conf spark.executorEnv.jdbc.driver=${VERTICA_DRIVER}\\\r\n--conf spark.executorEnv.jdbc.schemaName=mtu_owner \\\r\n--conf spark.executorEnv.jdbc.tableName=ext_ml_data \\\r\n--conf spark.executorEnv.jdbc.dateColumnName=hit_date \\\r\n--conf spark.executorEnv.jdbc.partitionColumnName=hit_timestamp \\\r\n--conf spark.executorEnv.jdbc.partitionsCount=8 \\\r\n--conf spark.executorEnv.hudi.outputPath=s3a://ir-mtu-ml-bucket/ml_hudi \\\r\n--conf spark.executorEnv.hudi.tableName=ext_ml_data \\\r\n--conf spark.executorEnv.hudi.recordKey=tds_cid \\\r\n--conf spark.executorEnv.hudi.precombineKey=hit_timestamp \\\r\n--conf spark.executorEnv.hudi.parallelism=8 \\\r\n--conf spark.executorEnv.hudi.bulkInsertParallelism=8 \\\r\n--class mtu.spark.analytics.ExtMLDataToS3 \\\r\n${PWD}/ml-vertica-to-s3-hudi.jar\r\n\r\nI try to move 53 million records (The table contains 48 columns) from the Vertica database to s3 storage.\r\nOperation \"bulk_insert\" successfully completes and takes ~40-50 minutes.\r\nOperation \"upsert\" on the same records throws exceptions with OOM.\r\n\r\nOn Hudi 0.5.1 \"upsert\" operations were hanging. I found the issue https://github.com/apache/incubator-hudi/issues/1328 and updated Hudi to 0.5.2. The problem with hanging, it seems to me, was resolved.\r\n\r\nAfter the \"bulk_insert\" operation, the total size of data on S3 storage is 3.7GB.\r\nExported data from the database to CSV file for ~30M records is ~8.6GB.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610564674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610580236","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610580236","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610580236,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDU4MDIzNg==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T19:36:03Z","updated_at":"2020-04-07T19:36:11Z","author_association":"NONE","body":"> Can you give this a shot on a cluster?\r\n\r\nDo you mean access to the cluster? Those steps also were reproducing on my local machine.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610580236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610626104","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610626104","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610626104,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDYyNjEwNA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T21:19:27Z","updated_at":"2020-04-07T21:19:27Z","author_association":"MEMBER","body":"hi @tverdokhlebd, thanks your detailed spark log, from your description and dataset, key information\r\n- run on local machine\r\n- the size of each record is large \r\n\r\nI noticed that OOM happened after parquet read old record to memory, which means we need to control the number of old records, so try add this option \r\n```\r\n.option(\"hoodie.write.buffer.limit.bytes\", \"131072\")  //128MB\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/20113411/78720105-a96f9800-7957-11ea-86b5-984978d169a2.png)\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610626104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610630535","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610630535","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610630535,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDYzMDUzNQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T21:30:06Z","updated_at":"2020-04-07T21:30:06Z","author_association":"MEMBER","body":"\r\n![image](https://user-images.githubusercontent.com/20113411/78721369-fc4a4f00-7959-11ea-8fa2-340717c3a233.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610630535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610635678","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610635678","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610635678,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDYzNTY3OA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-07T21:43:31Z","updated_at":"2020-04-07T22:02:19Z","author_association":"MEMBER","body":"> Can you give this a shot on a cluster?\r\n\r\nbtw, what @vinothchandar wants to say is that run your snippet code on yarn cluster if possiable, so we can know how it behaves to when running in a cluster.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610635678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610681461","html_url":"https://github.com/apache/hudi/issues/1488#issuecomment-610681461","issue_url":"https://api.github.com/repos/apache/hudi/issues/1488","id":610681461,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDY4MTQ2MQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T00:12:56Z","updated_at":"2020-04-08T00:17:39Z","author_association":"MEMBER","body":"hi @jvaesteves \r\n\r\n> the partition name is /18228, is this the expected behaviour?\r\n\r\nit's not the expected behaviour, the partition field also required as string type, show you a right demo.\r\n\r\n```\r\n${SPARK_HOME}/bin/spark-shell \\\r\n    --driver-memory 6G \\\r\n    --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n    --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\nimport org.apache.spark.sql.functions._\r\n\r\nval tableName = \"hudi_mor_table\"\r\nval basePath = \"file:///tmp/hudi_mor_tablen\"\r\n\r\nval hudiOptions = Map[String,String](\r\n  \"hoodie.insert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.delete.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.bulkinsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.datasource.write.recordkey.field\" -> \"key\",\r\n  \"hoodie.datasource.write.partitionpath.field\" -> \"dt\", \r\n  \"hoodie.table.name\" -> tableName,\r\n  \"hoodie.datasource.write.precombine.field\" -> \"timestamp\"\r\n)\r\n\r\nval inputDF = spark.range(1, 5).\r\n   withColumn(\"key\", $\"id\").\r\n   withColumn(\"data\", lit(\"data\")).\r\n   withColumn(\"timestamp\", current_timestamp()).\r\n   withColumn(\"dt\", date_format($\"timestamp\", \"yyyy-MM-dd\"))\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Overwrite\").\r\n  save(basePath)\r\n```\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610681461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610681802","html_url":"https://github.com/apache/hudi/issues/1488#issuecomment-610681802","issue_url":"https://api.github.com/repos/apache/hudi/issues/1488","id":610681802,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDY4MTgwMg==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T00:14:23Z","updated_at":"2020-04-08T00:14:23Z","author_association":"MEMBER","body":"![image](https://user-images.githubusercontent.com/20113411/78730984-eeec8f00-7970-11ea-83bd-fae208a13d62.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610681802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610700940","html_url":"https://github.com/apache/hudi/pull/1493#issuecomment-610700940","issue_url":"https://api.github.com/repos/apache/hudi/issues/1493","id":610700940,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDcwMDk0MA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T01:27:42Z","updated_at":"2020-04-08T01:27:42Z","author_association":"MEMBER","body":"combine with https://github.com/apache/incubator-hudi/pull/1486","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610700940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610701882","html_url":"https://github.com/apache/hudi/pull/1486#issuecomment-610701882","issue_url":"https://api.github.com/repos/apache/hudi/issues/1486","id":610701882,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDcwMTg4Mg==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T01:31:38Z","updated_at":"2020-04-08T01:31:38Z","author_association":"MEMBER","body":"Add https://github.com/apache/incubator-hudi/pull/1493 into this PR.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610701882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610745060","html_url":"https://github.com/apache/hudi/issues/1480#issuecomment-610745060","issue_url":"https://api.github.com/repos/apache/hudi/issues/1480","id":610745060,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDc0NTA2MA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T04:30:17Z","updated_at":"2020-04-08T04:30:17Z","author_association":"MEMBER","body":"@bvaradar Yes, I marked 767 for 0.6.0. I'll put 768 on waiting list at the moment 😄 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610745060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610761048","html_url":"https://github.com/apache/hudi/pull/1495#issuecomment-610761048","issue_url":"https://api.github.com/repos/apache/hudi/issues/1495","id":610761048,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDc2MTA0OA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T05:35:55Z","updated_at":"2020-04-13T05:47:44Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=h1) Report\n> Merging [#1495](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/c0f96e072650d39433929c6efe3bc0b2cd882a39&el=desc) will **decrease** coverage by `0.07%`.\n> The diff coverage is `81.48%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1495/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1495      +/-   ##\n============================================\n- Coverage     72.25%   72.17%   -0.08%     \n  Complexity      289      289              \n============================================\n  Files           338      365      +27     \n  Lines         15946    16228     +282     \n  Branches       1624     1632       +8     \n============================================\n+ Hits          11521    11712     +191     \n- Misses         3697     3783      +86     \n- Partials        728      733       +5     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...c/main/java/org/apache/hudi/table/HoodieTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllVGFibGUuamF2YQ==) | `79.64% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...g/apache/hudi/table/action/BaseActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL0Jhc2VBY3Rpb25FeGVjdXRvci5qYXZh) | `100.00% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...ltacommit/BulkInsertDeltaCommitActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2RlbHRhY29tbWl0L0J1bGtJbnNlcnREZWx0YUNvbW1pdEFjdGlvbkV4ZWN1dG9yLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...it/BulkInsertPreppedDeltaCommitActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2RlbHRhY29tbWl0L0J1bGtJbnNlcnRQcmVwcGVkRGVsdGFDb21taXRBY3Rpb25FeGVjdXRvci5qYXZh) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...commit/InsertPreppedDeltaCommitActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2RlbHRhY29tbWl0L0luc2VydFByZXBwZWREZWx0YUNvbW1pdEFjdGlvbkV4ZWN1dG9yLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...commit/UpsertPreppedDeltaCommitActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2RlbHRhY29tbWl0L1Vwc2VydFByZXBwZWREZWx0YUNvbW1pdEFjdGlvbkV4ZWN1dG9yLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [.../org/apache/hudi/table/HoodieMergeOnReadTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllTWVyZ2VPblJlYWRUYWJsZS5qYXZh) | `73.33% <22.22%> (-9.80%)` | `0.00 <0.00> (ø)` | |\n| [.../action/commit/BulkInsertCommitActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2NvbW1pdC9CdWxrSW5zZXJ0Q29tbWl0QWN0aW9uRXhlY3V0b3IuamF2YQ==) | `55.55% <55.55%> (ø)` | `0.00 <0.00> (?)` | |\n| [.../commit/BulkInsertPreppedCommitActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2NvbW1pdC9CdWxrSW5zZXJ0UHJlcHBlZENvbW1pdEFjdGlvbkV4ZWN1dG9yLmphdmE=) | `55.55% <55.55%> (ø)` | `0.00 <0.00> (?)` | |\n| [.../apache/hudi/table/action/commit/DeleteHelper.java](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2NvbW1pdC9EZWxldGVIZWxwZXIuamF2YQ==) | `64.28% <64.28%> (ø)` | `0.00 <0.00> (?)` | |\n| ... and [60 more](https://codecov.io/gh/apache/incubator-hudi/pull/1495/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=footer). Last update [c0f96e0...8a3b612](https://codecov.io/gh/apache/incubator-hudi/pull/1495?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610761048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610877618","html_url":"https://github.com/apache/hudi/pull/1427#issuecomment-610877618","issue_url":"https://api.github.com/repos/apache/hudi/issues/1427","id":610877618,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDg3NzYxOA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T10:23:10Z","updated_at":"2020-04-08T10:23:10Z","author_association":"CONTRIBUTOR","body":"> Looks like the hive query exited with 2.. Hmmm. seeing a bit of flakiness like this recently.. wondering if this is travis related\r\n\r\nIt is failing continuously with this error for me at some place or the other. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610877618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610880742","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610880742","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610880742,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDg4MDc0Mg==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T10:31:04Z","updated_at":"2020-04-08T10:34:05Z","author_association":"NONE","body":"> .option(\"hoodie.write.buffer.limit.bytes\", \"131072\")  //128MB\r\n\r\nI have tried but it doesn't help me. Tested on local mode with 3 threads and driver memory 8GB.\r\n\r\nNext, I have split my data into a single file with 5M records and try again, but it also doesn't help me - upsert failed with GC limit exception.\r\n\r\nAlso, tried to decrease parquet file size, memory merge fraction, buffer limit bytes.\r\n\r\nSo, I have attached log and data with 5M records:\r\n- CSV data with 5M records https://drive.google.com/open?id=1uwJ68_RrKMUTbEtsGl56_P5b_mNX3k2S\r\n- Log with GC limit exception https://drive.google.com/open?id=147Qz7Iau1RWyRlWYSq8WvtWFB0fAXLM8\r\n\r\n@lamber-ken, can you try to do bulk insert and then upsert on those data and configuration?\r\nPart of code and configuration you may take above from my reply.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610880742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610882317","html_url":"https://github.com/apache/hudi/pull/1452#issuecomment-610882317","issue_url":"https://api.github.com/repos/apache/hudi/issues/1452","id":610882317,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDg4MjMxNw==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T10:34:56Z","updated_at":"2020-04-08T10:34:56Z","author_association":"CONTRIBUTOR","body":"LGTM. @yanghua @hddong ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610882317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610899494","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610899494","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610899494,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDg5OTQ5NA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T11:17:43Z","updated_at":"2020-04-08T14:04:38Z","author_association":"MEMBER","body":"@tverdokhlebd, thanks for your feedback, will try to reproduce it follow your steps.\r\n1. bulk_insert the CSV dataset\r\n2. upsert (use the same CSV dataset) ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610899494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610968315","html_url":"https://github.com/apache/hudi/pull/1449#issuecomment-610968315","issue_url":"https://api.github.com/repos/apache/hudi/issues/1449","id":610968315,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDk2ODMxNQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T13:43:36Z","updated_at":"2020-04-08T13:43:36Z","author_association":"CONTRIBUTOR","body":"@hddong conflicting files and failed travis.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610968315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610980530","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610980530","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610980530,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDk4MDUzMA==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T14:06:21Z","updated_at":"2020-04-08T14:06:21Z","author_association":"NONE","body":"> upsert (use the same CSV dataset) ?\r\n\r\nYes, use the same CSV dataset.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610980530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610982711","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-610982711","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":610982711,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMDk4MjcxMQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T14:10:25Z","updated_at":"2020-04-08T14:10:25Z","author_association":"MEMBER","body":"Ok, I had downloaded the CSV data, trying ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/610982711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611032718","html_url":"https://github.com/apache/hudi/pull/1394#issuecomment-611032718","issue_url":"https://api.github.com/repos/apache/hudi/issues/1394","id":611032718,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTAzMjcxOA==","user":{"login":"Antauri","id":1658877,"node_id":"MDQ6VXNlcjE2NTg4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/1658877?v=4","gravatar_id":"","url":"https://api.github.com/users/Antauri","html_url":"https://github.com/Antauri","followers_url":"https://api.github.com/users/Antauri/followers","following_url":"https://api.github.com/users/Antauri/following{/other_user}","gists_url":"https://api.github.com/users/Antauri/gists{/gist_id}","starred_url":"https://api.github.com/users/Antauri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Antauri/subscriptions","organizations_url":"https://api.github.com/users/Antauri/orgs","repos_url":"https://api.github.com/users/Antauri/repos","events_url":"https://api.github.com/users/Antauri/events{/privacy}","received_events_url":"https://api.github.com/users/Antauri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T15:40:23Z","updated_at":"2020-04-08T15:43:51Z","author_association":"NONE","body":"Present in 0.5.2-incubating on EMR 6.x which we're using. We're in development of a framework that does S3 to S3 ingestion using Hudi and using Spark SQL writers (not RDDs). We have year=x/month=y/day=z/bin=q partitioning. For 3 days and 575 paths each it takes 3+ minutes between repetitive \"listing leaf files and directories\". In total some 9 minutes for just 3 days.\r\n\r\nAny idea when 0.6.0 will be released? And does adding \"Hive\" as the metastore helps in reducing this listing or it doesn't matter?\r\n\r\nThank you kind!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611032718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611059024","html_url":"https://github.com/apache/hudi/pull/1174#issuecomment-611059024","issue_url":"https://api.github.com/repos/apache/hudi/issues/1174","id":611059024,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTA1OTAyNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T16:28:42Z","updated_at":"2020-04-08T16:28:42Z","author_association":"MEMBER","body":"@pratyakshsharma sure! can you rebase and let us know if its ready for a final review and merge cycle? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611059024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611068333","html_url":"https://github.com/apache/hudi/pull/1394#issuecomment-611068333","issue_url":"https://api.github.com/repos/apache/hudi/issues/1394","id":611068333,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTA2ODMzMw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T16:47:05Z","updated_at":"2020-04-08T16:47:05Z","author_association":"MEMBER","body":"@Antauri we will be having a release end of April.. Since its a small fix, you try cherry-picking onto 0.5.2 and having a custom build till then? \r\n\r\n>does adding \"Hive\" as the metastore helps in reducing this listing or it doesn't matter?\r\nNot really :/ . Check out RFC-15 here, we hope to have that done by may. Should be night-day difference once we have that in terms of list performance https://cwiki.apache.org/confluence/display/HUDI/RFC+-+15%3A+HUDI+File+Listing+and+Query+Planning+Improvements \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611068333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611069603","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611069603","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611069603,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTA2OTYwMw==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T16:49:30Z","updated_at":"2020-04-08T16:49:30Z","author_association":"MEMBER","body":"hi @vinothchandar @bvaradar I think we can analyze this issue in parallel, reproduce steps: \r\n\r\n1. Download CSV data with 5M records\r\n```\r\nhttps://drive.google.com/open?id=1uwJ68_RrKMUTbEtsGl56_P5b_mNX3k2S\r\n```\r\n2. Run demo command\r\n```\r\nexport SPARK_HOME=/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7\r\n${SPARK_HOME}/bin/spark-shell \\\r\n    --driver-memory 6G \\\r\n    --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n    --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\nimport org.apache.spark.sql.functions._\r\n\r\nval tableName = \"hudi_mor_table\"\r\nval basePath = \"file:///tmp/hudi_mor_table\"\r\n\r\nvar inputDF = spark.read.format(\"csv\").option(\"header\", \"true\").load(\"file:///work/hudi-debug/2.csv\")\r\n\r\nval hudiOptions = Map[String,String](\r\n  \"hoodie.insert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.delete.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.bulkinsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.datasource.write.recordkey.field\" -> \"tds_cid\",\r\n  \"hoodie.datasource.write.partitionpath.field\" -> \"hit_date\", \r\n  \"hoodie.table.name\" -> tableName,\r\n  \"hoodie.datasource.write.precombine.field\" -> \"hit_timestamp\",\r\n  \"hoodie.datasource.write.operation\" -> \"upsert\"\r\n)\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Overwrite\").\r\n  save(basePath)\r\n\r\nspark.read.format(\"org.apache.hudi\").load(basePath + \"/2020-03-19/*\").count();\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611069603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611114936","html_url":"https://github.com/apache/hudi/issues/1499#issuecomment-611114936","issue_url":"https://api.github.com/repos/apache/hudi/issues/1499","id":611114936,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTExNDkzNg==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T18:21:01Z","updated_at":"2020-04-08T18:21:01Z","author_association":"MEMBER","body":"hi @hikiyoung, there are two ways to solve your problem\r\n\r\n1. Keep hudi-0.5.0 version\r\n\r\n```\r\n1. checkout 0.5.0 branch\r\nhttps://github.com/apache/incubator-hudi/tree/release-0.5.0\r\n\r\n2. remove these code \r\nhttps://github.com/apache/incubator-hudi/blob/release-0.5.0/packaging/hudi-spark-bundle/pom.xml\r\n\r\n<relocation>\r\n  <pattern>org.apache.hive.jdbc.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hive.jdbc.</shadedPattern>\r\n</relocation>\r\n<relocation>\r\n  <pattern>org.apache.hadoop.hive.metastore.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hadoop_hive.metastore.</shadedPattern>\r\n</relocation>\r\n<relocation>\r\n  <pattern>org.apache.hive.common.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hive.common.</shadedPattern>\r\n</relocation>\r\n<relocation>\r\n  <pattern>org.apache.hadoop.hive.common.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hadoop_hive.common.</shadedPattern>\r\n</relocation>\r\n<relocation>\r\n  <pattern>org.apache.hadoop.hive.conf.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hadoop_hive.conf.</shadedPattern>\r\n</relocation>\r\n<relocation>\r\n  <pattern>org.apache.hive.service.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hive.service.</shadedPattern>\r\n</relocation>\r\n<relocation>\r\n  <pattern>org.apache.hadoop.hive.service.</pattern>\r\n  <shadedPattern>org.apache.hudi.org.apache.hadoop_hive.service.</shadedPattern>\r\n</relocation>\r\n\r\n3. compile hudi package\r\n```\r\n\r\n2. Upgrade hudi to 0.5.2 version","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611114936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611116577","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611116577","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611116577,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTExNjU3Nw==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T18:24:18Z","updated_at":"2020-04-08T18:28:31Z","author_association":"MEMBER","body":"hi @tverdokhlebd, it works fine in my local env(didn't run command on docker).\r\n\r\nMy local machine: 16GB, 4core.\r\n\r\nJust some warning, no OOM error\r\n```\r\n20/04/09 02:07:32 WARN BlockManager: Persisting block rdd_48_33 to disk instead.\r\n[Stage 16:==================================================>     (36 + 4) / 40]20/04/09 02:07:38 WARN MemoryStore: Not enough space to cache rdd_48_37 in memory! (computed 58.0 MB so far)\r\n20/04/09 02:07:38 WARN BlockManager: Persisting block rdd_48_37 to disk instead.\r\n[Stage 16:===================================================>    (37 + 3) / 40]20/04/09 02:07:38 WARN MemoryStore: Not enough space to cache rdd_48_38 in memory! (computed 39.2 MB so far)\r\n20/04/09 02:07:38 WARN BlockManager: Persisting block rdd_48_38 to disk instead.\r\n20/04/09 02:07:38 WARN MemoryStore: Not enough space to cache rdd_48_39 in memory! (computed 11.5 MB so far)\r\n20/04/09 02:07:38 WARN BlockManager: Persisting block rdd_48_39 to disk instead.\r\n20/04/09 02:10:27 WARN DefaultSource: Snapshot view not supported yet via data source, for MERGE_ON_READ tables. Please query the Hive table registered using Spark SQL.\r\n\r\nscala> spark.read.format(\"org.apache.hudi\").load(basePath + \"/2020-03-19/*\").count();\r\n20/04/09 02:22:07 WARN DefaultSource: Snapshot view not supported yet via data source, for MERGE_ON_READ tables. Please query the Hive table registered using Spark SQL.\r\n```\r\n\r\n### Upsert commnad\r\n```\r\nexport SPARK_HOME=/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7\r\n${SPARK_HOME}/bin/spark-shell \\\r\n    --driver-memory 6G \\\r\n    --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n    --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\nimport org.apache.spark.sql.functions._\r\n\r\nval tableName = \"hudi_mor_table\"\r\nval basePath = \"file:///tmp/hudi_mor_table\"\r\n\r\nvar inputDF = spark.read.format(\"csv\").option(\"header\", \"true\").load(\"file:///work/hudi-debug/2.csv\")\r\n\r\nval hudiOptions = Map[String,String](\r\n  \"hoodie.insert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.delete.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.bulkinsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.datasource.write.recordkey.field\" -> \"tds_cid\",\r\n  \"hoodie.datasource.write.partitionpath.field\" -> \"hit_date\", \r\n  \"hoodie.table.name\" -> tableName,\r\n  \"hoodie.datasource.write.precombine.field\" -> \"hit_timestamp\",\r\n  \"hoodie.datasource.write.operation\" -> \"upsert\",\r\n  \"hoodie.memory.merge.max.size\" -> \"2004857600000\"\r\n)\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Append\").\r\n  save(basePath)\r\n\r\nspark.read.format(\"org.apache.hudi\").load(basePath + \"/2020-03-19/*\").count();\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611116577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611117191","html_url":"https://github.com/apache/hudi/issues/1499#issuecomment-611117191","issue_url":"https://api.github.com/repos/apache/hudi/issues/1499","id":611117191,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTExNzE5MQ==","user":{"login":"hikiyoung","id":1989458,"node_id":"MDQ6VXNlcjE5ODk0NTg=","avatar_url":"https://avatars.githubusercontent.com/u/1989458?v=4","gravatar_id":"","url":"https://api.github.com/users/hikiyoung","html_url":"https://github.com/hikiyoung","followers_url":"https://api.github.com/users/hikiyoung/followers","following_url":"https://api.github.com/users/hikiyoung/following{/other_user}","gists_url":"https://api.github.com/users/hikiyoung/gists{/gist_id}","starred_url":"https://api.github.com/users/hikiyoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hikiyoung/subscriptions","organizations_url":"https://api.github.com/users/hikiyoung/orgs","repos_url":"https://api.github.com/users/hikiyoung/repos","events_url":"https://api.github.com/users/hikiyoung/events{/privacy}","received_events_url":"https://api.github.com/users/hikiyoung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T18:25:30Z","updated_at":"2020-04-08T18:25:30Z","author_association":"NONE","body":"@lamber-ken \r\nThanks for the quick response. Let me try.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611117191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611158024","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611158024","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611158024,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTE1ODAyNA==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T19:49:02Z","updated_at":"2020-04-08T19:49:02Z","author_association":"NONE","body":"@lamber-ken , did you do \"bulk insert\" on a partition and then \"upsert\" to the same partition, yes?\r\n\r\nDid you test with those params?\r\n\r\n.option(\"hoodie.cleaner.policy\", HoodieCleaningPolicy.KEEP_LATEST_FILE_VERSIONS.name())\r\n.option(\"hoodie.cleaner.fileversions.retained\", \"1\")","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611158024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611161092","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611161092","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611161092,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTE2MTA5Mg==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T19:54:57Z","updated_at":"2020-04-08T19:54:57Z","author_association":"MEMBER","body":"1. use the same CSV dataset, bulk_insert, then upsert.\r\n\r\n2. no, other params keep default","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611161092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611161702","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611161702","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611161702,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTE2MTcwMg==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T19:56:09Z","updated_at":"2020-04-08T19:56:09Z","author_association":"NONE","body":"@lamber-ken , can you try with those params?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611161702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611164201","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611164201","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611164201,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTE2NDIwMQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T20:01:26Z","updated_at":"2020-04-08T20:01:26Z","author_association":"MEMBER","body":"> @lamber-ken , can you try with those params?\r\n\r\nNo proplem, will reply to you in a few hours, need to deal with other things : )","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611164201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611202945","html_url":"https://github.com/apache/hudi/pull/1396#issuecomment-611202945","issue_url":"https://api.github.com/repos/apache/hudi/issues/1396","id":611202945,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTIwMjk0NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-08T21:25:08Z","updated_at":"2020-04-08T21:25:08Z","author_association":"MEMBER","body":"@bvaradar Please take a final pass and merge.. I don't have concerns to move forward.. cc @satishkotha ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611202945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611276825","html_url":"https://github.com/apache/hudi/pull/1500#issuecomment-611276825","issue_url":"https://api.github.com/repos/apache/hudi/issues/1500","id":611276825,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTI3NjgyNQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T01:26:44Z","updated_at":"2020-04-09T01:26:44Z","author_association":"MEMBER","body":"@yihua are you able to you review this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611276825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611277336","html_url":"https://github.com/apache/hudi/pull/1479#issuecomment-611277336","issue_url":"https://api.github.com/repos/apache/hudi/issues/1479","id":611277336,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTI3NzMzNg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T01:28:52Z","updated_at":"2020-04-09T01:28:52Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=h1) Report\n> Merging [#1479](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/bd716ece1826fcc44092bd0add6cbbc097eeaec2&el=desc) will **increase** coverage by `71.02%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1479/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #1479       +/-   ##\n=============================================\n+ Coverage      0.62%   71.65%   +71.02%     \n- Complexity        2      290      +288     \n=============================================\n  Files           299      338       +39     \n  Lines         14645    15931     +1286     \n  Branches       1483     1625      +142     \n=============================================\n+ Hits             92    11415    +11323     \n+ Misses        14550     3784    -10766     \n- Partials          3      732      +729     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...java/org/apache/hudi/client/HoodieCleanClient.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0hvb2RpZUNsZWFuQ2xpZW50LmphdmE=) | | | |\n| [...va/org/apache/hudi/avro/MercifulJsonConverter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvYXZyby9NZXJjaWZ1bEpzb25Db252ZXJ0ZXIuamF2YQ==) | | | |\n| [...java/com/uber/hoodie/hadoop/HoodieInputFormat.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9jb20vdWJlci9ob29kaWUvaGFkb29wL0hvb2RpZUlucHV0Rm9ybWF0LmphdmE=) | | | |\n| [...die/hadoop/realtime/HoodieRealtimeInputFormat.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9jb20vdWJlci9ob29kaWUvaGFkb29wL3JlYWx0aW1lL0hvb2RpZVJlYWx0aW1lSW5wdXRGb3JtYXQuamF2YQ==) | | | |\n| [...ava/org/apache/hudi/metrics/JmxReporterServer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9KbXhSZXBvcnRlclNlcnZlci5qYXZh) | | | |\n| [...g/apache/hudi/metrics/MetricsGraphiteReporter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9NZXRyaWNzR3JhcGhpdGVSZXBvcnRlci5qYXZh) | | | |\n| [...c/main/java/org/apache/hudi/table/CleanHelper.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvQ2xlYW5IZWxwZXIuamF2YQ==) | | | |\n| [...va/org/apache/hudi/metrics/JmxMetricsReporter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9KbXhNZXRyaWNzUmVwb3J0ZXIuamF2YQ==) | | | |\n| [...java/org/apache/hudi/common/HoodieJsonPayload.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL0hvb2RpZUpzb25QYXlsb2FkLmphdmE=) | | | |\n| [.../org/apache/hudi/utilities/sources/JsonSource.java](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvSnNvblNvdXJjZS5qYXZh) | `100.00% <0.00%> (ø)` | `1.00% <0.00%> (?%)` | |\n| ... and [307 more](https://codecov.io/gh/apache/incubator-hudi/pull/1479/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=footer). Last update [bd716ec...c0f6f42](https://codecov.io/gh/apache/incubator-hudi/pull/1479?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611277336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611288468","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611288468","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611288468,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTI4ODQ2OA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T02:12:45Z","updated_at":"2020-04-09T02:29:24Z","author_association":"MEMBER","body":"Hi @tverdokhlebd, the whole upsert cost about 30min\r\n```\r\ndcadmin-imac:hudi-debug dcadmin$ export SPARK_HOME=/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7\r\ndcadmin-imac:hudi-debug dcadmin$ ${SPARK_HOME}/bin/spark-shell \\\r\n>     --driver-memory 6G \\\r\n>     --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n>     --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\nIvy Default Cache set to: /Users/dcadmin/.ivy2/cache\r\nThe jars for the packages stored in: /Users/dcadmin/.ivy2/jars\r\n:: loading settings :: url = jar:file:/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7/jars/ivy-2.4.0.jar!/org/apache/ivy/core/settings/ivysettings.xml\r\norg.apache.hudi#hudi-spark-bundle_2.11 added as a dependency\r\norg.apache.spark#spark-avro_2.11 added as a dependency\r\n:: resolving dependencies :: org.apache.spark#spark-submit-parent-204b7ab2-3e3f-4853-9220-5e038fc99fc2;1.0\r\n\tconfs: [default]\r\n\tfound org.apache.hudi#hudi-spark-bundle_2.11;0.5.1-incubating in central\r\n\tfound org.apache.spark#spark-avro_2.11;2.4.4 in central\r\n\tfound org.spark-project.spark#unused;1.0.0 in spark-list\r\n:: resolution report :: resolve 258ms :: artifacts dl 5ms\r\n\t:: modules in use:\r\n\torg.apache.hudi#hudi-spark-bundle_2.11;0.5.1-incubating from central in [default]\r\n\torg.apache.spark#spark-avro_2.11;2.4.4 from central in [default]\r\n\torg.spark-project.spark#unused;1.0.0 from spark-list in [default]\r\n\t---------------------------------------------------------------------\r\n\t|                  |            modules            ||   artifacts   |\r\n\t|       conf       | number| search|dwnlded|evicted|| number|dwnlded|\r\n\t---------------------------------------------------------------------\r\n\t|      default     |   3   |   0   |   0   |   0   ||   3   |   0   |\r\n\t---------------------------------------------------------------------\r\n:: retrieving :: org.apache.spark#spark-submit-parent-204b7ab2-3e3f-4853-9220-5e038fc99fc2\r\n\tconfs: [default]\r\n\t0 artifacts copied, 3 already retrieved (0kB/5ms)\r\n20/04/09 09:23:38 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\nUsing Spark's default log4j profile: org/apache/spark/log4j-defaults.properties\r\nSetting default log level to \"WARN\".\r\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\r\nSpark context Web UI available at http://10.101.52.18:4040\r\nSpark context available as 'sc' (master = local[*], app id = local-1586395425370).\r\nSpark session available as 'spark'.\r\nWelcome to\r\n      ____              __\r\n     / __/__  ___ _____/ /__\r\n    _\\ \\/ _ \\/ _ `/ __/  '_/\r\n   /___/ .__/\\_,_/_/ /_/\\_\\   version 2.4.4\r\n      /_/\r\n         \r\nUsing Scala version 2.11.12 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_211)\r\nType in expressions to have them evaluated.\r\nType :help for more information.\r\n\r\nscala> \r\n\r\nscala> import org.apache.spark.sql.functions._\r\nimport org.apache.spark.sql.functions._\r\n\r\nscala> \r\n\r\nscala> val tableName = \"hudi_mor_table\"\r\ntableName: String = hudi_mor_table\r\n\r\nscala> val basePath = \"file:///tmp/hudi_mor_table\"\r\nbasePath: String = file:///tmp/hudi_mor_table\r\n\r\nscala> \r\n\r\nscala> var inputDF = spark.read.format(\"csv\").option(\"header\", \"true\").load(\"file:///work/hudi-debug/2.csv\")\r\ninputDF: org.apache.spark.sql.DataFrame = [tds_cid: string, hit_timestamp: string ... 46 more fields]\r\n\r\nscala> \r\n\r\nscala> val hudiOptions = Map[String,String](\r\n     |   \"hoodie.insert.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.delete.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.bulkinsert.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.datasource.write.recordkey.field\" -> \"tds_cid\",\r\n     |   \"hoodie.datasource.write.partitionpath.field\" -> \"hit_date\", \r\n     |   \"hoodie.table.name\" -> tableName,\r\n     |   \"hoodie.datasource.write.precombine.field\" -> \"hit_timestamp\",\r\n     |   \"hoodie.datasource.write.operation\" -> \"upsert\",\r\n     |   \"hoodie.memory.merge.max.size\" -> \"2004857600000\",\r\n     |   \"hoodie.cleaner.policy\" -> \"KEEP_LATEST_FILE_VERSIONS\",\r\n     |   \"hoodie.cleaner.fileversions.retained\" -> \"1\"\r\n     | )\r\nhudiOptions: scala.collection.immutable.Map[String,String] = Map(hoodie.insert.shuffle.parallelism -> 10, hoodie.datasource.write.precombine.field -> hit_timestamp, hoodie.cleaner.fileversions.retained -> 1, hoodie.delete.shuffle.parallelism -> 10, hoodie.datasource.write.operation -> upsert, hoodie.datasource.write.recordkey.field -> tds_cid, hoodie.table.name -> hudi_mor_table, hoodie.memory.merge.max.size -> 2004857600000, hoodie.cleaner.policy -> KEEP_LATEST_FILE_VERSIONS, hoodie.upsert.shuffle.parallelism -> 10, hoodie.datasource.write.partitionpath.field -> hit_date, hoodie.bulkinsert.shuffle.parallelism -> 10)\r\n\r\nscala> \r\n\r\nscala> inputDF.write.format(\"org.apache.hudi\").\r\n     |   options(hudiOptions).\r\n     |   mode(\"Append\").\r\n     |   save(basePath)\r\n20/04/09 09:23:53 WARN Utils: Truncated the string representation of a plan since it was too large. This behavior can be adjusted by setting 'spark.debug.maxToStringFields' in SparkEnv.conf.\r\n[Stage 3:>                                                         (0 + 4) / 10]20/04/09 09:24:55 WARN MemoryStore: Not enough space to cache rdd_16_1 in memory! (computed 87.6 MB so far)\r\n20/04/09 09:24:55 WARN BlockManager: Persisting block rdd_16_1 to disk instead.\r\n20/04/09 09:24:56 WARN MemoryStore: Not enough space to cache rdd_16_2 in memory! (computed 196.9 MB so far)\r\n20/04/09 09:24:56 WARN BlockManager: Persisting block rdd_16_2 to disk instead.\r\n20/04/09 09:24:56 WARN MemoryStore: Not enough space to cache rdd_16_0 in memory! (computed 130.8 MB so far)\r\n20/04/09 09:24:56 WARN BlockManager: Persisting block rdd_16_0 to disk instead.\r\n20/04/09 09:24:56 WARN MemoryStore: Not enough space to cache rdd_16_3 in memory! (computed 196.3 MB so far)\r\n20/04/09 09:24:56 WARN BlockManager: Persisting block rdd_16_3 to disk instead.\r\n[Stage 3:=======================>                                  (4 + 4) / 10]20/04/09 09:25:12 WARN MemoryStore: Not enough space to cache rdd_16_6 in memory! (computed 58.5 MB so far)\r\n20/04/09 09:25:12 WARN BlockManager: Persisting block rdd_16_6 to disk instead.\r\n20/04/09 09:25:12 WARN MemoryStore: Not enough space to cache rdd_16_4 in memory! (computed 58.3 MB so far)\r\n20/04/09 09:25:12 WARN BlockManager: Persisting block rdd_16_4 to disk instead.\r\n20/04/09 09:25:12 WARN MemoryStore: Not enough space to cache rdd_16_5 in memory! (computed 87.6 MB so far)\r\n20/04/09 09:25:12 WARN BlockManager: Persisting block rdd_16_5 to disk instead.\r\n20/04/09 09:25:12 WARN MemoryStore: Failed to reserve initial memory threshold of 1024.0 KB for computing block rdd_16_7 in memory.\r\n20/04/09 09:25:12 WARN MemoryStore: Not enough space to cache rdd_16_7 in memory! (computed 0.0 B so far)\r\n20/04/09 09:25:12 WARN BlockManager: Persisting block rdd_16_7 to disk instead.\r\n[Stage 3:==============================================>           (8 + 2) / 10]20/04/09 09:25:26 WARN MemoryStore: Not enough space to cache rdd_16_9 in memory! (computed 58.4 MB so far)\r\n20/04/09 09:25:26 WARN BlockManager: Persisting block rdd_16_9 to disk instead.\r\n20/04/09 09:25:26 WARN MemoryStore: Not enough space to cache rdd_16_8 in memory! (computed 87.6 MB so far)\r\n20/04/09 09:25:26 WARN BlockManager: Persisting block rdd_16_8 to disk instead.\r\n[Stage 14:=======================================>                (28 + 4) / 40]20/04/09 09:44:14 WARN MemoryStore: Not enough space to cache rdd_44_30 in memory! (computed 39.3 MB so far)\r\n20/04/09 09:44:14 WARN BlockManager: Persisting block rdd_44_30 to disk instead.\r\n20/04/09 09:44:14 WARN MemoryStore: Not enough space to cache rdd_44_29 in memory! (computed 58.5 MB so far)\r\n20/04/09 09:44:14 WARN BlockManager: Persisting block rdd_44_29 to disk instead.\r\n20/04/09 09:44:14 WARN MemoryStore: Not enough space to cache rdd_44_28 in memory! (computed 58.6 MB so far)\r\n20/04/09 09:44:14 WARN BlockManager: Persisting block rdd_44_28 to disk instead.\r\n20/04/09 09:44:14 WARN MemoryStore: Not enough space to cache rdd_44_31 in memory! (computed 17.3 MB so far)\r\n20/04/09 09:44:14 WARN BlockManager: Persisting block rdd_44_31 to disk instead.\r\n[Stage 14:============================================>           (32 + 4) / 40]20/04/09 09:44:19 WARN MemoryStore: Not enough space to cache rdd_44_33 in memory! (computed 26.0 MB so far)\r\n20/04/09 09:44:19 WARN BlockManager: Persisting block rdd_44_33 to disk instead.\r\n20/04/09 09:44:19 WARN MemoryStore: Not enough space to cache rdd_44_32 in memory! (computed 25.8 MB so far)\r\n20/04/09 09:44:19 WARN BlockManager: Persisting block rdd_44_32 to disk instead.\r\n20/04/09 09:44:19 WARN MemoryStore: Not enough space to cache rdd_44_35 in memory! (computed 5.2 MB so far)\r\n20/04/09 09:44:19 WARN BlockManager: Persisting block rdd_44_35 to disk instead.\r\n20/04/09 09:44:19 WARN MemoryStore: Not enough space to cache rdd_44_34 in memory! (computed 5.1 MB so far)\r\n20/04/09 09:44:19 WARN BlockManager: Persisting block rdd_44_34 to disk instead.\r\n[Stage 14:==================================================>     (36 + 4) / 40]20/04/09 09:44:26 WARN MemoryStore: Not enough space to cache rdd_44_38 in memory! (computed 1032.0 KB so far)\r\n20/04/09 09:44:26 WARN BlockManager: Persisting block rdd_44_38 to disk instead.\r\n20/04/09 09:44:26 WARN MemoryStore: Not enough space to cache rdd_44_36 in memory! (computed 3.4 MB so far)\r\n20/04/09 09:44:26 WARN MemoryStore: Not enough space to cache rdd_44_37 in memory! (computed 3.4 MB so far)\r\n20/04/09 09:44:26 WARN BlockManager: Persisting block rdd_44_37 to disk instead.\r\n20/04/09 09:44:26 WARN BlockManager: Persisting block rdd_44_36 to disk instead.\r\n20/04/09 09:44:26 WARN MemoryStore: Not enough space to cache rdd_44_39 in memory! (computed 7.6 MB so far)\r\n20/04/09 09:44:26 WARN BlockManager: Persisting block rdd_44_39 to disk instead.\r\n20/04/09 09:47:19 WARN DefaultSource: Snapshot view not supported yet via data source, for MERGE_ON_READ tables. Please query the Hive table registered using Spark SQL.\r\n\r\nscala> \r\n\r\nscala> spark.read.format(\"org.apache.hudi\").load(basePath + \"/2020-03-19/*\").count();\r\n20/04/09 09:47:19 WARN DefaultSource: Snapshot view not supported yet via data source, for MERGE_ON_READ tables. Please query the Hive table registered using Spark SQL.\r\nres1: Long = 5045301                                                            \r\n\r\nscala> \r\n\r\nscala> \r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/20113411/78850756-8ffb4880-7a4a-11ea-973d-5cb15a0c6c95.png)\r\n\r\n![image](https://user-images.githubusercontent.com/20113411/78851656-eec1c180-7a4c-11ea-9b88-6ca0146d7016.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611288468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611302392","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-611302392","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":611302392,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTMwMjM5Mg==","user":{"login":"qiuchen100","id":20908624,"node_id":"MDQ6VXNlcjIwOTA4NjI0","avatar_url":"https://avatars.githubusercontent.com/u/20908624?v=4","gravatar_id":"","url":"https://api.github.com/users/qiuchen100","html_url":"https://github.com/qiuchen100","followers_url":"https://api.github.com/users/qiuchen100/followers","following_url":"https://api.github.com/users/qiuchen100/following{/other_user}","gists_url":"https://api.github.com/users/qiuchen100/gists{/gist_id}","starred_url":"https://api.github.com/users/qiuchen100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qiuchen100/subscriptions","organizations_url":"https://api.github.com/users/qiuchen100/orgs","repos_url":"https://api.github.com/users/qiuchen100/repos","events_url":"https://api.github.com/users/qiuchen100/events{/privacy}","received_events_url":"https://api.github.com/users/qiuchen100/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T03:06:31Z","updated_at":"2020-04-09T03:06:31Z","author_association":"NONE","body":"Please add me too  qiuchen100@163.com","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611302392/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611308595","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-611308595","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":611308595,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTMwODU5NQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T03:31:31Z","updated_at":"2020-04-09T03:31:31Z","author_association":"MEMBER","body":"> Please add me too [qiuchen100@163.com](mailto:qiuchen100@163.com)\r\n\r\nDone and welcome","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611308595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611334390","html_url":"https://github.com/apache/hudi/issues/1498#issuecomment-611334390","issue_url":"https://api.github.com/repos/apache/hudi/issues/1498","id":611334390,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTMzNDM5MA==","user":{"login":"bhasudha","id":2179254,"node_id":"MDQ6VXNlcjIxNzkyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2179254?v=4","gravatar_id":"","url":"https://api.github.com/users/bhasudha","html_url":"https://github.com/bhasudha","followers_url":"https://api.github.com/users/bhasudha/followers","following_url":"https://api.github.com/users/bhasudha/following{/other_user}","gists_url":"https://api.github.com/users/bhasudha/gists{/gist_id}","starred_url":"https://api.github.com/users/bhasudha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bhasudha/subscriptions","organizations_url":"https://api.github.com/users/bhasudha/orgs","repos_url":"https://api.github.com/users/bhasudha/repos","events_url":"https://api.github.com/users/bhasudha/events{/privacy}","received_events_url":"https://api.github.com/users/bhasudha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T05:21:50Z","updated_at":"2020-04-09T05:21:50Z","author_association":"CONTRIBUTOR","body":"@vontman  thanks for reporting this. I am trying to see if there is anything missing. @bvaradar do you think of anything here?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611334390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611335457","html_url":"https://github.com/apache/hudi/pull/1310#issuecomment-611335457","issue_url":"https://api.github.com/repos/apache/hudi/issues/1310","id":611335457,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTMzNTQ1Nw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T05:25:49Z","updated_at":"2020-04-09T05:25:49Z","author_association":"CONTRIBUTOR","body":"@modi95 please squash your commits to 1\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611335457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611344210","html_url":"https://github.com/apache/hudi/pull/1449#issuecomment-611344210","issue_url":"https://api.github.com/repos/apache/hudi/issues/1449","id":611344210,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTM0NDIxMA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T05:58:38Z","updated_at":"2020-04-14T09:30:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=h1) Report\n> Merging [#1449](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/17bf9303423821483f17785f8536b7bfed45e42e&el=desc) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1449/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1449      +/-   ##\n============================================\n+ Coverage     72.20%   72.21%   +0.01%     \n  Complexity      289      289              \n============================================\n  Files           365      372       +7     \n  Lines         16228    16267      +39     \n  Branches       1632     1637       +5     \n============================================\n+ Hits          11717    11747      +30     \n- Misses         3778     3784       +6     \n- Partials        733      736       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../org/apache/hudi/table/HoodieMergeOnReadTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllTWVyZ2VPblJlYWRUYWJsZS5qYXZh) | `57.50% <0.00%> (-15.84%)` | `0.00% <0.00%> (ø%)` | |\n| [.../org/apache/hudi/table/HoodieCopyOnWriteTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllQ29weU9uV3JpdGVUYWJsZS5qYXZh) | `61.62% <0.00%> (-8.02%)` | `0.00% <0.00%> (ø%)` | |\n| [...a/org/apache/hudi/common/util/collection/Pair.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvY29sbGVjdGlvbi9QYWlyLmphdmE=) | `72.00% <0.00%> (-4.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...java/org/apache/hudi/client/HoodieWriteClient.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0hvb2RpZVdyaXRlQ2xpZW50LmphdmE=) | `67.96% <0.00%> (-3.31%)` | `0.00% <0.00%> (ø%)` | |\n| [...i/common/table/timeline/TimelineMetadataUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL1RpbWVsaW5lTWV0YWRhdGFVdGlscy5qYXZh) | `95.23% <0.00%> (-0.51%)` | `0.00% <0.00%> (ø%)` | |\n| [.../apache/hudi/client/AbstractHoodieWriteClient.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0Fic3RyYWN0SG9vZGllV3JpdGVDbGllbnQuamF2YQ==) | `68.33% <0.00%> (-0.18%)` | `0.00% <0.00%> (ø%)` | |\n| [...c/main/java/org/apache/hudi/table/HoodieTable.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllVGFibGUuamF2YQ==) | `79.64% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [...e/hudi/table/action/clean/CleanActionExecutor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvYWN0aW9uL2NsZWFuL0NsZWFuQWN0aW9uRXhlY3V0b3IuamF2YQ==) | `89.31% <0.00%> (ø)` | `0.00% <0.00%> (ø%)` | |\n| [...org/apache/hudi/table/rollback/RollbackHelper.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvcm9sbGJhY2svUm9sbGJhY2tIZWxwZXIuamF2YQ==) | | | |\n| [...rg/apache/hudi/table/rollback/RollbackRequest.java](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvcm9sbGJhY2svUm9sbGJhY2tSZXF1ZXN0LmphdmE=) | | | |\n| ... and [10 more](https://codecov.io/gh/apache/incubator-hudi/pull/1449/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=footer). Last update [17bf930...b14b63b](https://codecov.io/gh/apache/incubator-hudi/pull/1449?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611344210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611350137","html_url":"https://github.com/apache/hudi/pull/1449#issuecomment-611350137","issue_url":"https://api.github.com/repos/apache/hudi/issues/1449","id":611350137,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTM1MDEzNw==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T06:16:45Z","updated_at":"2020-04-09T06:16:45Z","author_association":"CONTRIBUTOR","body":"@yanghua this PR is green now, please have a review.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611350137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611355603","html_url":"https://github.com/apache/hudi/pull/1501#issuecomment-611355603","issue_url":"https://api.github.com/repos/apache/hudi/issues/1501","id":611355603,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTM1NTYwMw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T06:33:33Z","updated_at":"2020-04-09T06:33:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=h1) Report\n> Merging [#1501](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/3c803421e0e138c223c9bec90f9b7c8a6751317d&el=desc) will **increase** coverage by `0.17%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1501/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1501      +/-   ##\n============================================\n+ Coverage     71.64%   71.81%   +0.17%     \n  Complexity      290      290              \n============================================\n  Files           338      338              \n  Lines         15931    15931              \n  Branches       1625     1625              \n============================================\n+ Hits          11413    11441      +28     \n+ Misses         3785     3758      -27     \n+ Partials        733      732       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...mmon/table/log/AbstractHoodieLogRecordScanner.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL2xvZy9BYnN0cmFjdEhvb2RpZUxvZ1JlY29yZFNjYW5uZXIuamF2YQ==) | `86.99% <0.00%> (+0.81%)` | `0.00% <0.00%> (ø%)` | |\n| [.../apache/hudi/hadoop/RecordReaderValueIterator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL1JlY29yZFJlYWRlclZhbHVlSXRlcmF0b3IuamF2YQ==) | `79.16% <0.00%> (+8.33%)` | `0.00% <0.00%> (ø%)` | |\n| [...hadoop/realtime/RealtimeCompactedRecordReader.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL3JlYWx0aW1lL1JlYWx0aW1lQ29tcGFjdGVkUmVjb3JkUmVhZGVyLmphdmE=) | `72.34% <0.00%> (+8.51%)` | `0.00% <0.00%> (ø%)` | |\n| [.../hadoop/realtime/RealtimeUnmergedRecordReader.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL3JlYWx0aW1lL1JlYWx0aW1lVW5tZXJnZWRSZWNvcmRSZWFkZXIuamF2YQ==) | `96.96% <0.00%> (+12.12%)` | `0.00% <0.00%> (ø%)` | |\n| [...src/main/java/org/apache/hudi/metrics/Metrics.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9NZXRyaWNzLmphdmE=) | `72.22% <0.00%> (+13.88%)` | `0.00% <0.00%> (ø%)` | |\n| [...he/hudi/hadoop/SafeParquetRecordReaderWrapper.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL1NhZmVQYXJxdWV0UmVjb3JkUmVhZGVyV3JhcHBlci5qYXZh) | `92.85% <0.00%> (+21.42%)` | `0.00% <0.00%> (ø%)` | |\n| [...di/hadoop/realtime/HoodieRealtimeRecordReader.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL3JlYWx0aW1lL0hvb2RpZVJlYWx0aW1lUmVjb3JkUmVhZGVyLmphdmE=) | `84.21% <0.00%> (+36.84%)` | `0.00% <0.00%> (ø%)` | |\n| [...g/apache/hudi/metrics/InMemoryMetricsReporter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1501/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9Jbk1lbW9yeU1ldHJpY3NSZXBvcnRlci5qYXZh) | `80.00% <0.00%> (+40.00%)` | `0.00% <0.00%> (ø%)` | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=footer). Last update [3c80342...ce23431](https://codecov.io/gh/apache/incubator-hudi/pull/1501?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611355603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611383523","html_url":"https://github.com/apache/hudi/issues/1498#issuecomment-611383523","issue_url":"https://api.github.com/repos/apache/hudi/issues/1498","id":611383523,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTM4MzUyMw==","user":{"login":"ahmed-elfar","id":20902425,"node_id":"MDQ6VXNlcjIwOTAyNDI1","avatar_url":"https://avatars.githubusercontent.com/u/20902425?v=4","gravatar_id":"","url":"https://api.github.com/users/ahmed-elfar","html_url":"https://github.com/ahmed-elfar","followers_url":"https://api.github.com/users/ahmed-elfar/followers","following_url":"https://api.github.com/users/ahmed-elfar/following{/other_user}","gists_url":"https://api.github.com/users/ahmed-elfar/gists{/gist_id}","starred_url":"https://api.github.com/users/ahmed-elfar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahmed-elfar/subscriptions","organizations_url":"https://api.github.com/users/ahmed-elfar/orgs","repos_url":"https://api.github.com/users/ahmed-elfar/repos","events_url":"https://api.github.com/users/ahmed-elfar/events{/privacy}","received_events_url":"https://api.github.com/users/ahmed-elfar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T07:45:43Z","updated_at":"2020-04-09T07:45:43Z","author_association":"NONE","body":"@bhasudha please consider that we have tested vs master build as well:\r\nHudi and spark version: \"**hudi-spark-bundle\" % \"0.6.0-incubating**\", **Spark-2.4.4**, \"**spark-avro\" % \"2.4.4**\", yet still the same performance.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611383523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611440958","html_url":"https://github.com/apache/hudi/issues/1498#issuecomment-611440958","issue_url":"https://api.github.com/repos/apache/hudi/issues/1498","id":611440958,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTQ0MDk1OA==","user":{"login":"vontman","id":4175383,"node_id":"MDQ6VXNlcjQxNzUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/4175383?v=4","gravatar_id":"","url":"https://api.github.com/users/vontman","html_url":"https://github.com/vontman","followers_url":"https://api.github.com/users/vontman/followers","following_url":"https://api.github.com/users/vontman/following{/other_user}","gists_url":"https://api.github.com/users/vontman/gists{/gist_id}","starred_url":"https://api.github.com/users/vontman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vontman/subscriptions","organizations_url":"https://api.github.com/users/vontman/orgs","repos_url":"https://api.github.com/users/vontman/repos","events_url":"https://api.github.com/users/vontman/events{/privacy}","received_events_url":"https://api.github.com/users/vontman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T09:55:31Z","updated_at":"2020-04-09T09:55:31Z","author_association":"NONE","body":"These are some screenshots from the spark ui on the 25min job.\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/78882570-8aa4fa80-7a58-11ea-8de2-5876cc0a0f7c.png)\r\n![image](https://user-images.githubusercontent.com/4175383/78882602-94c6f900-7a58-11ea-9e8a-85e05bb7fbd0.png)\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/78882653-a6a89c00-7a58-11ea-9fa9-983af602cd3a.png)\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/78882690-b6c07b80-7a58-11ea-811a-6813a7366fb1.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611440958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611445641","html_url":"https://github.com/apache/hudi/pull/1490#issuecomment-611445641","issue_url":"https://api.github.com/repos/apache/hudi/issues/1490","id":611445641,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTQ0NTY0MQ==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T10:06:26Z","updated_at":"2020-04-09T10:06:26Z","author_association":"CONTRIBUTOR","body":"@yanghua Thanks for your review, had address them.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611445641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611452422","html_url":"https://github.com/apache/hudi/issues/1499#issuecomment-611452422","issue_url":"https://api.github.com/repos/apache/hudi/issues/1499","id":611452422,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTQ1MjQyMg==","user":{"login":"hikiyoung","id":1989458,"node_id":"MDQ6VXNlcjE5ODk0NTg=","avatar_url":"https://avatars.githubusercontent.com/u/1989458?v=4","gravatar_id":"","url":"https://api.github.com/users/hikiyoung","html_url":"https://github.com/hikiyoung","followers_url":"https://api.github.com/users/hikiyoung/followers","following_url":"https://api.github.com/users/hikiyoung/following{/other_user}","gists_url":"https://api.github.com/users/hikiyoung/gists{/gist_id}","starred_url":"https://api.github.com/users/hikiyoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hikiyoung/subscriptions","organizations_url":"https://api.github.com/users/hikiyoung/orgs","repos_url":"https://api.github.com/users/hikiyoung/repos","events_url":"https://api.github.com/users/hikiyoung/events{/privacy}","received_events_url":"https://api.github.com/users/hikiyoung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T10:23:12Z","updated_at":"2020-04-09T10:23:12Z","author_association":"NONE","body":"It works with the way #1. Thank you so much @lamber-ken .","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611452422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611462195","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611462195","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611462195,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTQ2MjE5NQ==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T10:46:53Z","updated_at":"2020-04-09T10:46:53Z","author_association":"NONE","body":"Hmm, this is strange :(\r\n\r\nI have tried with your parameters (parallelism and memory), but it does not help me again:\r\n\r\n1. Do \"bulk_insert\" with append mode to partition path \"2020-03-19\" from the CSV file\r\n2. Do \"upsert\" with append mode to partition path \"2020-03-19\" from the same CSV file\r\n\r\nI did those operations with 2 threads and 6GB driver memory and without parameter \"hoodie.delete.shuffle.parallelism\". I think that parameter doesn't affect processing.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611462195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611466622","html_url":"https://github.com/apache/hudi/issues/857#issuecomment-611466622","issue_url":"https://api.github.com/repos/apache/hudi/issues/857","id":611466622,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTQ2NjYyMg==","user":{"login":"iftachsc","id":28829551,"node_id":"MDQ6VXNlcjI4ODI5NTUx","avatar_url":"https://avatars.githubusercontent.com/u/28829551?v=4","gravatar_id":"","url":"https://api.github.com/users/iftachsc","html_url":"https://github.com/iftachsc","followers_url":"https://api.github.com/users/iftachsc/followers","following_url":"https://api.github.com/users/iftachsc/following{/other_user}","gists_url":"https://api.github.com/users/iftachsc/gists{/gist_id}","starred_url":"https://api.github.com/users/iftachsc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iftachsc/subscriptions","organizations_url":"https://api.github.com/users/iftachsc/orgs","repos_url":"https://api.github.com/users/iftachsc/repos","events_url":"https://api.github.com/users/iftachsc/events{/privacy}","received_events_url":"https://api.github.com/users/iftachsc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T10:58:40Z","updated_at":"2020-04-09T10:58:40Z","author_association":"CONTRIBUTOR","body":"> @firecast, would you please share the major reasons for choosing HUDI over Delta Lake?\r\n> Thanks a lot.\r\n\r\nWe would love to hear why you chose Hudi over the others","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611466622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611468030","html_url":"https://github.com/apache/hudi/issues/857#issuecomment-611468030","issue_url":"https://api.github.com/repos/apache/hudi/issues/857","id":611468030,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTQ2ODAzMA==","user":{"login":"iftachsc","id":28829551,"node_id":"MDQ6VXNlcjI4ODI5NTUx","avatar_url":"https://avatars.githubusercontent.com/u/28829551?v=4","gravatar_id":"","url":"https://api.github.com/users/iftachsc","html_url":"https://github.com/iftachsc","followers_url":"https://api.github.com/users/iftachsc/followers","following_url":"https://api.github.com/users/iftachsc/following{/other_user}","gists_url":"https://api.github.com/users/iftachsc/gists{/gist_id}","starred_url":"https://api.github.com/users/iftachsc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iftachsc/subscriptions","organizations_url":"https://api.github.com/users/iftachsc/orgs","repos_url":"https://api.github.com/users/iftachsc/repos","events_url":"https://api.github.com/users/iftachsc/events{/privacy}","received_events_url":"https://api.github.com/users/iftachsc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T11:02:10Z","updated_at":"2020-04-09T11:02:10Z","author_association":"CONTRIBUTOR","body":"@leesf could you elaborate on Opensource Governance support? you mean the fact that it is part of Apache? or are we talking on data governance tools","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611468030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611586057","html_url":"https://github.com/apache/hudi/pull/1310#issuecomment-611586057","issue_url":"https://api.github.com/repos/apache/hudi/issues/1310","id":611586057,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTU4NjA1Nw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T15:18:50Z","updated_at":"2020-04-09T15:18:50Z","author_association":"CONTRIBUTOR","body":"This PR has been moved to #1501","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611586057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611626685","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611626685","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611626685,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTYyNjY4NQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T16:37:37Z","updated_at":"2020-04-09T16:37:37Z","author_association":"MEMBER","body":"I run those operations with `local[2]` and 6GB driver memory, still worked fine.\r\n\r\nI run those operations on local env not in docker env. Can you run those operations in linux env?\r\n\r\n```\r\ndcadmin-imac:flink-1.6.3.sdk dcadmin$ ${SPARK_HOME}/bin/spark-shell     --master 'local[2]'     --driver-memory 6G     --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.4     --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\nIvy Default Cache set to: /Users/dcadmin/.ivy2/cache\r\nThe jars for the packages stored in: /Users/dcadmin/.ivy2/jars\r\n:: loading settings :: url = jar:file:/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7/jars/ivy-2.4.0.jar!/org/apache/ivy/core/settings/ivysettings.xml\r\norg.apache.hudi#hudi-spark-bundle_2.11 added as a dependency\r\norg.apache.spark#spark-avro_2.11 added as a dependency\r\n:: resolving dependencies :: org.apache.spark#spark-submit-parent-e1b9ce1d-8bb9-4da6-a29f-c5287bfad216;1.0\r\n\tconfs: [default]\r\n\tfound org.apache.hudi#hudi-spark-bundle_2.11;0.5.1-incubating in central\r\n\tfound org.apache.spark#spark-avro_2.11;2.4.4 in central\r\n\tfound org.spark-project.spark#unused;1.0.0 in spark-list\r\n:: resolution report :: resolve 226ms :: artifacts dl 5ms\r\n\t:: modules in use:\r\n\torg.apache.hudi#hudi-spark-bundle_2.11;0.5.1-incubating from central in [default]\r\n\torg.apache.spark#spark-avro_2.11;2.4.4 from central in [default]\r\n\torg.spark-project.spark#unused;1.0.0 from spark-list in [default]\r\n\t---------------------------------------------------------------------\r\n\t|                  |            modules            ||   artifacts   |\r\n\t|       conf       | number| search|dwnlded|evicted|| number|dwnlded|\r\n\t---------------------------------------------------------------------\r\n\t|      default     |   3   |   0   |   0   |   0   ||   3   |   0   |\r\n\t---------------------------------------------------------------------\r\n:: retrieving :: org.apache.spark#spark-submit-parent-e1b9ce1d-8bb9-4da6-a29f-c5287bfad216\r\n\tconfs: [default]\r\n\t0 artifacts copied, 3 already retrieved (0kB/5ms)\r\n20/04/09 23:59:12 WARN NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\nUsing Spark's default log4j profile: org/apache/spark/log4j-defaults.properties\r\nSetting default log level to \"WARN\".\r\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\r\n20/04/09 23:59:18 WARN Utils: Service 'SparkUI' could not bind on port 4040. Attempting port 4041.\r\nSpark context Web UI available at http://10.101.52.18:4041\r\nSpark context available as 'sc' (master = local[2], app id = local-1586447958208).\r\nSpark session available as 'spark'.\r\nWelcome to\r\n      ____              __\r\n     / __/__  ___ _____/ /__\r\n    _\\ \\/ _ \\/ _ `/ __/  '_/\r\n   /___/ .__/\\_,_/_/ /_/\\_\\   version 2.4.4\r\n      /_/\r\n         \r\nUsing Scala version 2.11.12 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_211)\r\nType in expressions to have them evaluated.\r\nType :help for more information.\r\n\r\nscala> \r\n\r\nscala> import org.apache.spark.sql.functions._\r\nimport org.apache.spark.sql.functions._\r\n\r\nscala> \r\n\r\nscala> val tableName = \"hudi_mor_table\"\r\ntableName: String = hudi_mor_table\r\n\r\nscala> val basePath = \"file:///tmp/hudi_mor_table\"\r\nbasePath: String = file:///tmp/hudi_mor_table\r\n\r\nscala> \r\n\r\nscala> var inputDF = spark.read.format(\"csv\").option(\"header\", \"true\").load(\"file:///work/hudi-debug/2.csv\")\r\ninputDF: org.apache.spark.sql.DataFrame = [tds_cid: string, hit_timestamp: string ... 46 more fields]\r\n\r\nscala> \r\n\r\nscala> val hudiOptions = Map[String,String](\r\n     |   \"hoodie.insert.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.delete.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.bulkinsert.shuffle.parallelism\" -> \"10\",\r\n     |   \"hoodie.datasource.write.recordkey.field\" -> \"tds_cid\",\r\n     |   \"hoodie.datasource.write.partitionpath.field\" -> \"hit_date\", \r\n     |   \"hoodie.table.name\" -> tableName,\r\n     |   \"hoodie.datasource.write.precombine.field\" -> \"hit_timestamp\",\r\n     |   \"hoodie.datasource.write.operation\" -> \"upsert\",\r\n     |   \"hoodie.memory.merge.max.size\" -> \"2004857600000\",\r\n     |   \"hoodie.cleaner.policy\" -> \"KEEP_LATEST_FILE_VERSIONS\",\r\n     |   \"hoodie.cleaner.fileversions.retained\" -> \"1\"\r\n     | )\r\nhudiOptions: scala.collection.immutable.Map[String,String] = Map(hoodie.insert.shuffle.parallelism -> 10, hoodie.datasource.write.precombine.field -> hit_timestamp, hoodie.cleaner.fileversions.retained -> 1, hoodie.delete.shuffle.parallelism -> 10, hoodie.datasource.write.operation -> upsert, hoodie.datasource.write.recordkey.field -> tds_cid, hoodie.table.name -> hudi_mor_table, hoodie.memory.merge.max.size -> 2004857600000, hoodie.cleaner.policy -> KEEP_LATEST_FILE_VERSIONS, hoodie.upsert.shuffle.parallelism -> 10, hoodie.datasource.write.partitionpath.field -> hit_date, hoodie.bulkinsert.shuffle.parallelism -> 10)\r\n\r\nscala> \r\n\r\nscala> inputDF.write.format(\"org.apache.hudi\").\r\n     |   options(hudiOptions).\r\n     |   mode(\"Append\").\r\n     |   save(basePath)\r\n20/04/10 00:01:07 WARN Utils: Truncated the string representation of a plan since it was too large. This behavior can be adjusted by setting 'spark.debug.maxToStringFields' in SparkEnv.conf.\r\n[Stage 3:==================================>                       (6 + 2) / 10]20/04/10 00:02:58 WARN MemoryStore: Not enough space to cache rdd_16_6 in memory! (computed 58.5 MB so far)\r\n20/04/10 00:02:58 WARN BlockManager: Persisting block rdd_16_6 to disk instead.\r\n20/04/10 00:02:58 WARN MemoryStore: Not enough space to cache rdd_16_7 in memory! (computed 58.1 MB so far)\r\n20/04/10 00:02:58 WARN BlockManager: Persisting block rdd_16_7 to disk instead.\r\n[Stage 3:==============================================>           (8 + 2) / 10]20/04/10 00:03:12 WARN MemoryStore: Not enough space to cache rdd_16_8 in memory! (computed 17.3 MB so far)\r\n20/04/10 00:03:12 WARN BlockManager: Persisting block rdd_16_8 to disk instead.\r\n20/04/10 00:03:12 WARN MemoryStore: Not enough space to cache rdd_16_9 in memory! (computed 131.4 MB so far)\r\n20/04/10 00:03:12 WARN BlockManager: Persisting block rdd_16_9 to disk instead.\r\n[Stage 14:============================================>           (32 + 2) / 40]20/04/10 00:30:38 WARN MemoryStore: Not enough space to cache rdd_44_32 in memory! (computed 58.3 MB so far)\r\n20/04/10 00:30:38 WARN BlockManager: Persisting block rdd_44_32 to disk instead.\r\n20/04/10 00:30:38 WARN MemoryStore: Not enough space to cache rdd_44_33 in memory! (computed 58.2 MB so far)\r\n20/04/10 00:30:38 WARN BlockManager: Persisting block rdd_44_33 to disk instead.\r\n[Stage 14:=================================================>      (35 + 2) / 40]20/04/10 00:30:42 WARN MemoryStore: Not enough space to cache rdd_44_35 in memory! (computed 11.6 MB so far)\r\n20/04/10 00:30:42 WARN BlockManager: Persisting block rdd_44_35 to disk instead.\r\n20/04/10 00:30:43 WARN MemoryStore: Not enough space to cache rdd_44_36 in memory! (computed 11.6 MB so far)\r\n20/04/10 00:30:43 WARN BlockManager: Persisting block rdd_44_36 to disk instead.\r\n[Stage 14:=====================================================>  (38 + 2) / 40]20/04/10 00:30:51 WARN MemoryStore: Not enough space to cache rdd_44_38 in memory! (computed 58.8 MB so far)\r\n20/04/10 00:30:51 WARN BlockManager: Persisting block rdd_44_38 to disk instead.\r\n20/04/10 00:30:51 WARN MemoryStore: Not enough space to cache rdd_44_39 in memory! (computed 11.4 MB so far)\r\n20/04/10 00:30:51 WARN BlockManager: Persisting block rdd_44_39 to disk instead.\r\n20/04/10 00:33:53 WARN DefaultSource: Snapshot view not supported yet via data source, for MERGE_ON_READ tables. Please query the Hive table registered using Spark SQL.\r\n\r\nscala> spark.read.format(\"org.apache.hudi\").load(basePath + \"/2020-03-19/*\").count();\r\n20/04/10 00:34:10 WARN DefaultSource: Snapshot view not supported yet via data source, for MERGE_ON_READ tables. Please query the Hive table registered using Spark SQL.\r\nres1: Long = 5087127  \r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611626685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611627711","html_url":"https://github.com/apache/hudi/issues/1499#issuecomment-611627711","issue_url":"https://api.github.com/repos/apache/hudi/issues/1499","id":611627711,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTYyNzcxMQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T16:39:39Z","updated_at":"2020-04-09T16:39:39Z","author_association":"MEMBER","body":"> It works with the way #1. Thank you so much @lamber-ken .\r\n\r\nYou're welcome : )","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611627711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611636241","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611636241","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611636241,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTYzNjI0MQ==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T16:56:55Z","updated_at":"2020-04-09T16:56:55Z","author_association":"NONE","body":"@lamber-ken , I have run on my local machine (Windows, WSL) without docker. \r\nBut, I have also Jenkins (Linux) and there I run processing in a docker environment.\r\n\r\nI will try to run processing with your parameters one to one.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611636241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611680765","html_url":"https://github.com/apache/hudi/pull/1476#issuecomment-611680765","issue_url":"https://api.github.com/repos/apache/hudi/issues/1476","id":611680765,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTY4MDc2NQ==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T18:22:04Z","updated_at":"2020-04-09T18:22:04Z","author_association":"MEMBER","body":"Updated to write out instant metadata in json format so its easy to use CLI tools. Tested using a few HUDI datasets and works good.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611680765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611704510","html_url":"https://github.com/apache/hudi/pull/1502#issuecomment-611704510","issue_url":"https://api.github.com/repos/apache/hudi/issues/1502","id":611704510,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTcwNDUxMA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-09T19:12:07Z","updated_at":"2020-04-09T19:12:07Z","author_association":"MEMBER","body":"@ramachandranms lets park this before we can get it green","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611704510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611819504","html_url":"https://github.com/apache/hudi/pull/1457#issuecomment-611819504","issue_url":"https://api.github.com/repos/apache/hudi/issues/1457","id":611819504,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTgxOTUwNA==","user":{"login":"afilipchik","id":1406795,"node_id":"MDQ6VXNlcjE0MDY3OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1406795?v=4","gravatar_id":"","url":"https://api.github.com/users/afilipchik","html_url":"https://github.com/afilipchik","followers_url":"https://api.github.com/users/afilipchik/followers","following_url":"https://api.github.com/users/afilipchik/following{/other_user}","gists_url":"https://api.github.com/users/afilipchik/gists{/gist_id}","starred_url":"https://api.github.com/users/afilipchik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afilipchik/subscriptions","organizations_url":"https://api.github.com/users/afilipchik/orgs","repos_url":"https://api.github.com/users/afilipchik/repos","events_url":"https://api.github.com/users/afilipchik/events{/privacy}","received_events_url":"https://api.github.com/users/afilipchik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T00:42:56Z","updated_at":"2020-04-10T00:42:56Z","author_association":"CONTRIBUTOR","body":"What will happen if there is incompatible message in Kafka? Will pipeline stall? What will be the way to fix it without purging whole kafka topic? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611819504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611891832","html_url":"https://github.com/apache/hudi/pull/1486#issuecomment-611891832","issue_url":"https://api.github.com/repos/apache/hudi/issues/1486","id":611891832,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTg5MTgzMg==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T05:59:52Z","updated_at":"2020-04-10T05:59:52Z","author_association":"MEMBER","body":"hmm... Looks like the checkstyle auto-fix something...Let me see what's going...","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611891832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611897189","html_url":"https://github.com/apache/hudi/pull/1486#issuecomment-611897189","issue_url":"https://api.github.com/repos/apache/hudi/issues/1486","id":611897189,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTg5NzE4OQ==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T06:20:09Z","updated_at":"2020-04-10T06:20:09Z","author_association":"MEMBER","body":"I added the save action and checkstyle as documented, not sure which one triggered all those `final` and `this`. Is that ok to add those? As a scala programmer I do prefer to use `val` all the time and the Google Java Guide does encourage using final, but I am not sure what is the preference of Hudi. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611897189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611920831","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611920831","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611920831,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTkyMDgzMQ==","user":{"login":"tverdokhlebd","id":10245067,"node_id":"MDQ6VXNlcjEwMjQ1MDY3","avatar_url":"https://avatars.githubusercontent.com/u/10245067?v=4","gravatar_id":"","url":"https://api.github.com/users/tverdokhlebd","html_url":"https://github.com/tverdokhlebd","followers_url":"https://api.github.com/users/tverdokhlebd/followers","following_url":"https://api.github.com/users/tverdokhlebd/following{/other_user}","gists_url":"https://api.github.com/users/tverdokhlebd/gists{/gist_id}","starred_url":"https://api.github.com/users/tverdokhlebd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tverdokhlebd/subscriptions","organizations_url":"https://api.github.com/users/tverdokhlebd/orgs","repos_url":"https://api.github.com/users/tverdokhlebd/repos","events_url":"https://api.github.com/users/tverdokhlebd/events{/privacy}","received_events_url":"https://api.github.com/users/tverdokhlebd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T07:43:50Z","updated_at":"2020-04-10T07:43:50Z","author_association":"NONE","body":"> I run those operations with local[2] and 6GB driver memory, still worked fine.\r\n\r\nHow did you set memory? I don't see any memory config...","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611920831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611921813","html_url":"https://github.com/apache/hudi/issues/1491#issuecomment-611921813","issue_url":"https://api.github.com/repos/apache/hudi/issues/1491","id":611921813,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMTkyMTgxMw==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T07:46:55Z","updated_at":"2020-04-10T07:46:55Z","author_association":"MEMBER","body":"Hi, here is spark command\r\n```\r\nexport SPARK_HOME=/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7\r\n${SPARK_HOME}/bin/spark-shell \\\r\n    --master 'local[2]' \\\r\n    --driver-memory 6G \\\r\n    --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.1-incubating,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n    --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/611921813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612052977","html_url":"https://github.com/apache/hudi/pull/1452#issuecomment-612052977","issue_url":"https://api.github.com/repos/apache/hudi/issues/1452","id":612052977,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjA1Mjk3Nw==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T14:28:03Z","updated_at":"2020-04-10T14:28:03Z","author_association":"CONTRIBUTOR","body":"@yanghua @pratyakshsharma thanks for your review.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612052977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612058285","html_url":"https://github.com/apache/hudi/pull/1504#issuecomment-612058285","issue_url":"https://api.github.com/repos/apache/hudi/issues/1504","id":612058285,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjA1ODI4NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T14:40:38Z","updated_at":"2020-04-10T14:40:38Z","author_association":"MEMBER","body":"@yanghua @xushiyan my style has been to only use javadocs when it warrants them. forced writing of trivial/obvious docs is not very helpful.. That said, public APIs should have detailed/accurate javadocs, test framework/utility classes should. Not sure if we want to burn cycles (and increase file lengths) just for sake of having javadocs.. \r\n\r\nI know this is subjective. but atleast goes with few books I have read in the past and what made sense to me.. We can also start a separate DISCUSS on this and defer.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612058285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612079202","html_url":"https://github.com/apache/hudi/pull/1505#issuecomment-612079202","issue_url":"https://api.github.com/repos/apache/hudi/issues/1505","id":612079202,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjA3OTIwMg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T15:29:07Z","updated_at":"2020-04-10T15:29:07Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=h1) Report\n> Merging [#1505](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/f5f34bb1c16e6d070668486eba2a29f554c0bbc7&el=desc) will **increase** coverage by `0.00%`.\n> The diff coverage is `50.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1505/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff            @@\n##             master    #1505   +/-   ##\n=========================================\n  Coverage     72.15%   72.15%           \n+ Complexity      290      289    -1     \n=========================================\n  Files           338      338           \n  Lines         15929    15926    -3     \n  Branches       1625     1622    -3     \n=========================================\n- Hits          11494    11492    -2     \n- Misses         3704     3705    +1     \n+ Partials        731      729    -2     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/incubator-hudi/pull/1505/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `72.44% <ø> (+0.58%)` | `37.00 <0.00> (-1.00)` | :arrow_up: |\n| [...s/deltastreamer/HoodieMultiTableDeltaStreamer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1505/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllTXVsdGlUYWJsZURlbHRhU3RyZWFtZXIuamF2YQ==) | `78.39% <0.00%> (-0.49%)` | `18.00 <0.00> (ø)` | |\n| [...i/utilities/deltastreamer/HoodieDeltaStreamer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1505/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllRGVsdGFTdHJlYW1lci5qYXZh) | `79.14% <100.00%> (+0.37%)` | `10.00 <0.00> (ø)` | |\n| [...ache/hudi/common/fs/inline/InMemoryFileSystem.java](https://codecov.io/gh/apache/incubator-hudi/pull/1505/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL2lubGluZS9Jbk1lbW9yeUZpbGVTeXN0ZW0uamF2YQ==) | `79.31% <0.00%> (-10.35%)` | `0.00% <0.00%> (ø%)` | |\n| [...g/apache/hudi/metrics/InMemoryMetricsReporter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1505/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9Jbk1lbW9yeU1ldHJpY3NSZXBvcnRlci5qYXZh) | `80.00% <0.00%> (+40.00%)` | `0.00% <0.00%> (ø%)` | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=footer). Last update [f5f34bb...7e05fda](https://codecov.io/gh/apache/incubator-hudi/pull/1505?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612079202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612113721","html_url":"https://github.com/apache/hudi/issues/1498#issuecomment-612113721","issue_url":"https://api.github.com/repos/apache/hudi/issues/1498","id":612113721,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjExMzcyMQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T16:41:53Z","updated_at":"2020-04-10T16:41:53Z","author_association":"CONTRIBUTOR","body":"@vontman : This looks to me like the columnar file creation is taking close to 17 mins out of 25 mins.  Can you also attach the commit metadata (.commit file under .hoodie folder corresponding to each runs) and the UI screenshots for the 47 min run too. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612113721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612151106","html_url":"https://github.com/apache/hudi/pull/1503#issuecomment-612151106","issue_url":"https://api.github.com/repos/apache/hudi/issues/1503","id":612151106,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjE1MTEwNg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T18:10:35Z","updated_at":"2020-04-10T18:10:35Z","author_association":"CONTRIBUTOR","body":"Closed PR -> https://github.com/apache/incubator-hudi/pull/1053 in favor of this one. @bvaradar PTAL","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612151106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612156801","html_url":"https://github.com/apache/hudi/issues/1498#issuecomment-612156801","issue_url":"https://api.github.com/repos/apache/hudi/issues/1498","id":612156801,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjE1NjgwMQ==","user":{"login":"vontman","id":4175383,"node_id":"MDQ6VXNlcjQxNzUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/4175383?v=4","gravatar_id":"","url":"https://api.github.com/users/vontman","html_url":"https://github.com/vontman","followers_url":"https://api.github.com/users/vontman/followers","following_url":"https://api.github.com/users/vontman/following{/other_user}","gists_url":"https://api.github.com/users/vontman/gists{/gist_id}","starred_url":"https://api.github.com/users/vontman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vontman/subscriptions","organizations_url":"https://api.github.com/users/vontman/orgs","repos_url":"https://api.github.com/users/vontman/repos","events_url":"https://api.github.com/users/vontman/events{/privacy}","received_events_url":"https://api.github.com/users/vontman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T18:24:46Z","updated_at":"2020-04-10T18:24:46Z","author_association":"NONE","body":"@bvaradar \r\nThe `.commit` file: https://gist.github.com/vontman/e2242b6b0bd3cfc126ed725bb85ccdea\r\n\r\nThis is the schema for the table as well: https://gist.github.com/vontman/761e34981994fa36d3c9d22db5a80ea8\r\n\r\nScreenshots from the 47min run:\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/79013450-0aba8580-7b69-11ea-9e9d-892e3e71d260.png)\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/79013460-11e19380-7b69-11ea-9104-fcbea62c159e.png)\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/79013528-3e95ab00-7b69-11ea-8e65-84f4655c17c0.png)\r\n\r\n![image](https://user-images.githubusercontent.com/4175383/79013473-1d34bf00-7b69-11ea-969d-3f3ae81dd61e.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612156801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612171042","html_url":"https://github.com/apache/hudi/pull/1486#issuecomment-612171042","issue_url":"https://api.github.com/repos/apache/hudi/issues/1486","id":612171042,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjE3MTA0Mg==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T18:58:47Z","updated_at":"2020-04-10T18:58:47Z","author_association":"MEMBER","body":"Addressed some comments, summary:\r\n\r\n- Removed `--bootstrap-from` option in the delta streamer. Use `hoodie.deltastreamer.checkpoint.provider.path` field in the props instead. \r\n- Use TypedProperty to construct the `InitialCheckPointProvider` and `init(FileSystem fs)` to initialize the class\r\n- Keep `hiveConf` as the variable name even change `HiveConf` type to `Configuration`. Open to discussion if you guys don't agree.\r\n- Not able to replace all `null` in this PR because `null` was served as a flag in the delta streamer workflow, this might change the behavior of other classes using the `TypedProperty` field. Will need a separate PR to do the code refactoring. \r\n- The style check tool automatically adds `final` and `this` to match the stylecheck.xml. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612171042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612245263","html_url":"https://github.com/apache/hudi/pull/1053#issuecomment-612245263","issue_url":"https://api.github.com/repos/apache/hudi/issues/1053","id":612245263,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjI0NTI2Mw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-10T22:26:39Z","updated_at":"2020-04-10T22:26:39Z","author_association":"CONTRIBUTOR","body":"Closing this in favor of #1503","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/612245263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]