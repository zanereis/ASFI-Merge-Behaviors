[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/893895075","html_url":"https://github.com/apache/pinot/pull/7169#issuecomment-893895075","issue_url":"https://api.github.com/repos/apache/pinot/issues/7169","id":893895075,"node_id":"IC_kwDOATCU_c41R8Gj","user":{"login":"jadami10","id":4760722,"node_id":"MDQ6VXNlcjQ3NjA3MjI=","avatar_url":"https://avatars.githubusercontent.com/u/4760722?v=4","gravatar_id":"","url":"https://api.github.com/users/jadami10","html_url":"https://github.com/jadami10","followers_url":"https://api.github.com/users/jadami10/followers","following_url":"https://api.github.com/users/jadami10/following{/other_user}","gists_url":"https://api.github.com/users/jadami10/gists{/gist_id}","starred_url":"https://api.github.com/users/jadami10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jadami10/subscriptions","organizations_url":"https://api.github.com/users/jadami10/orgs","repos_url":"https://api.github.com/users/jadami10/repos","events_url":"https://api.github.com/users/jadami10/events{/privacy}","received_events_url":"https://api.github.com/users/jadami10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T23:44:00Z","updated_at":"2021-08-05T23:44:00Z","author_association":"CONTRIBUTOR","body":"> and also drop the ones which don't exist? That will reduce the overall response size.\r\n\r\n+1 to this. I'm looking at it in the UI now, and it's impossible to tell if a red X means \"not reloaded\" or \"not indexed at all\".\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/893895075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/893900651","html_url":"https://github.com/apache/pinot/pull/7258#issuecomment-893900651","issue_url":"https://api.github.com/repos/apache/pinot/issues/7258","id":893900651,"node_id":"IC_kwDOATCU_c41R9dr","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T23:55:49Z","updated_at":"2021-08-05T23:58:57Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7258](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a0b0de1) into [master](https://codecov.io/gh/apache/pinot/commit/066c79399922fecc428ff05b2b983ef7367512d3?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (066c793) will **increase** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7258/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7258      +/-   ##\n============================================\n+ Coverage     73.53%   73.54%   +0.01%     \n  Complexity       92       92              \n============================================\n  Files          1508     1508              \n  Lines         73999    73999              \n  Branches      10691    10691              \n============================================\n+ Hits          54413    54424      +11     \n+ Misses        16020    16005      -15     \n- Partials       3566     3570       +4     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `41.87% <ø> (+0.07%)` | :arrow_up: |\n| unittests | `65.29% <ø> (-0.04%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...data/manager/realtime/SegmentCommitterFactory.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvU2VnbWVudENvbW1pdHRlckZhY3RvcnkuamF2YQ==) | `64.70% <0.00%> (-35.30%)` | :arrow_down: |\n| [...er/api/resources/LLCSegmentCompletionHandlers.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL0xMQ1NlZ21lbnRDb21wbGV0aW9uSGFuZGxlcnMuamF2YQ==) | `52.40% <0.00%> (-8.66%)` | :arrow_down: |\n| [...altime/ServerSegmentCompletionProtocolHandler.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VydmVyL3JlYWx0aW1lL1NlcnZlclNlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2xIYW5kbGVyLmphdmE=) | `49.52% <0.00%> (-8.58%)` | :arrow_down: |\n| [...e/data/manager/realtime/SplitSegmentCommitter.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvU3BsaXRTZWdtZW50Q29tbWl0dGVyLmphdmE=) | `53.84% <0.00%> (-7.70%)` | :arrow_down: |\n| [...lix/core/realtime/PinotRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90UmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `77.94% <0.00%> (-6.16%)` | :arrow_down: |\n| [...impl/dictionary/FloatOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvRmxvYXRPZmZIZWFwTXV0YWJsZURpY3Rpb25hcnkuamF2YQ==) | `72.34% <0.00%> (-5.32%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/data/TimeFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9UaW1lRmllbGRTcGVjLmphdmE=) | `88.63% <0.00%> (-2.28%)` | :arrow_down: |\n| [...mpl/dictionary/DoubleOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvRG91YmxlT2ZmSGVhcE11dGFibGVEaWN0aW9uYXJ5LmphdmE=) | `57.44% <0.00%> (-2.13%)` | :arrow_down: |\n| [...e/pinot/segment/local/io/util/PinotDataBitSet.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL1Bpbm90RGF0YUJpdFNldC5qYXZh) | `96.03% <0.00%> (-1.59%)` | :arrow_down: |\n| [...ot/common/protocols/SegmentCompletionProtocol.java](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcHJvdG9jb2xzL1NlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2wuamF2YQ==) | `94.78% <0.00%> (-0.95%)` | :arrow_down: |\n| ... and [20 more](https://codecov.io/gh/apache/pinot/pull/7258/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [066c793...a0b0de1](https://codecov.io/gh/apache/pinot/pull/7258?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/893900651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894030620","html_url":"https://github.com/apache/pinot/pull/7260#issuecomment-894030620","issue_url":"https://api.github.com/repos/apache/pinot/issues/7260","id":894030620,"node_id":"IC_kwDOATCU_c41SdMc","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T06:18:35Z","updated_at":"2021-08-06T06:18:35Z","author_association":"CONTRIBUTOR","body":"Can you add a bit more context on why you are trying to add these extra logs the broker and why do you think it will be useful?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894030620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894529188","html_url":"https://github.com/apache/pinot/pull/7260#issuecomment-894529188","issue_url":"https://api.github.com/repos/apache/pinot/issues/7260","id":894529188,"node_id":"IC_kwDOATCU_c41UW6k","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:31:43Z","updated_at":"2021-08-06T21:31:43Z","author_association":"CONTRIBUTOR","body":"@snleee Adding the `WARN` log can help to identify slow queries with automatic tools. For my use case, we have a logging tool which retain relevant log for debugging purposes, it only stored `WARN` level and up logs and ignore `INFO` logs.    ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894529188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894545850","html_url":"https://github.com/apache/pinot/pull/7260#issuecomment-894545850","issue_url":"https://api.github.com/repos/apache/pinot/issues/7260","id":894545850,"node_id":"IC_kwDOATCU_c41Ua-6","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T22:17:42Z","updated_at":"2021-08-10T01:10:10Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7260](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3b81185) into [master](https://codecov.io/gh/apache/pinot/commit/337c58cec20cc60a99966351d75c7573ae2615a4?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (337c58c) will **decrease** coverage by `41.28%`.\n> The diff coverage is `100.00%`.\n\n> :exclamation: Current head 3b81185 differs from pull request most recent head 7345600. Consider uploading reports for the commit 7345600 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7260/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7260       +/-   ##\n=============================================\n- Coverage     71.17%   29.89%   -41.29%     \n+ Complexity     3355       86     -3269     \n=============================================\n  Files          1508     1498       -10     \n  Lines         74007    73667      -340     \n  Branches      10693    10656       -37     \n=============================================\n- Hits          52673    22020    -30653     \n- Misses        17746    49672    +31926     \n+ Partials       3588     1975     -1613     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.89% <100.00%> (+0.08%)` | :arrow_up: |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...va/org/apache/pinot/spi/utils/CommonConstants.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQ29tbW9uQ29uc3RhbnRzLmphdmE=) | `0.00% <ø> (-25.00%)` | :arrow_down: |\n| [...roker/requesthandler/BaseBrokerRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcmVxdWVzdGhhbmRsZXIvQmFzZUJyb2tlclJlcXVlc3RIYW5kbGVyLmphdmE=) | `64.06% <100.00%> (-7.23%)` | :arrow_down: |\n| [...e/pinot/core/transport/InstanceRequestHandler.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS90cmFuc3BvcnQvSW5zdGFuY2VSZXF1ZXN0SGFuZGxlci5qYXZh) | `63.88% <100.00%> (+1.57%)` | :arrow_up: |\n| [.../java/org/apache/pinot/server/conf/ServerConf.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvY29uZi9TZXJ2ZXJDb25mLmphdmE=) | `76.00% <100.00%> (-7.34%)` | :arrow_down: |\n| [...rg/apache/pinot/server/starter/ServerInstance.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9TZXJ2ZXJJbnN0YW5jZS5qYXZh) | `65.09% <100.00%> (-24.43%)` | :arrow_down: |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/config/table/TableType.java](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1RhYmxlVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1042 more](https://codecov.io/gh/apache/pinot/pull/7260/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [337c58c...7345600](https://codecov.io/gh/apache/pinot/pull/7260?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894545850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894552983","html_url":"https://github.com/apache/pinot/issues/7206#issuecomment-894552983","issue_url":"https://api.github.com/repos/apache/pinot/issues/7206","id":894552983,"node_id":"IC_kwDOATCU_c41UcuX","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T22:44:12Z","updated_at":"2021-08-06T22:44:12Z","author_association":"CONTRIBUTOR","body":"PR #7241 handles this - so closing the issue. Support is via `OPTION(minServerGroupTrimSize=<value>)`; if you use -1 for the time size, trimming is disabled.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894552983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894567690","html_url":"https://github.com/apache/pinot/pull/7210#issuecomment-894567690","issue_url":"https://api.github.com/repos/apache/pinot/issues/7210","id":894567690,"node_id":"IC_kwDOATCU_c41UgUK","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T23:40:13Z","updated_at":"2021-08-06T23:40:13Z","author_association":"CONTRIBUTOR","body":"Late to this discussion. I have the same question on why additional constructs are needed under `explain` package. Shouldn't it be easier to send a bit along with the request to the servers for skipping the execution and just collecting the stats back to the broker?\r\n\r\n@chenboat wrote a [proposal](https://docs.google.com/document/d/1K3ZgA_2O99ChKD8LffVw0tHQhT1u6A9pj4xiiXzSgzQ/edit) on this earlier this year. I'm curious to see his thoughts on this.\r\n\r\nLastly, can you grant access to the design doc? I requested the access a couple of days ago.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894567690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894584129","html_url":"https://github.com/apache/pinot/pull/7210#issuecomment-894584129","issue_url":"https://api.github.com/repos/apache/pinot/issues/7210","id":894584129,"node_id":"IC_kwDOATCU_c41UkVB","user":{"login":"amrishlal","id":4550395,"node_id":"MDQ6VXNlcjQ1NTAzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4550395?v=4","gravatar_id":"","url":"https://api.github.com/users/amrishlal","html_url":"https://github.com/amrishlal","followers_url":"https://api.github.com/users/amrishlal/followers","following_url":"https://api.github.com/users/amrishlal/following{/other_user}","gists_url":"https://api.github.com/users/amrishlal/gists{/gist_id}","starred_url":"https://api.github.com/users/amrishlal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrishlal/subscriptions","organizations_url":"https://api.github.com/users/amrishlal/orgs","repos_url":"https://api.github.com/users/amrishlal/repos","events_url":"https://api.github.com/users/amrishlal/events{/privacy}","received_events_url":"https://api.github.com/users/amrishlal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T01:18:02Z","updated_at":"2021-08-07T01:18:02Z","author_association":"CONTRIBUTOR","body":"> Late to this discussion. I have the same question on why additional constructs are needed under `explain` package. Shouldn't it be easier to send a bit along with the request to the servers for skipping the execution and just collecting the stats back to the broker?\r\n\r\nThe server-side implementation is currently being worked on, but given the large potential scope of the EXPLAIN plan functionality (logical plan, physical plan, run-time costs, plus possible profiling information), I don't think that even the server-side implementation would be considered close to \"done\" in any sense. IMHO, the best case scenario is probably a BETA cut that should be integrated into the codebase (possibly under an execution flag) sooner than later so that we can start iterating upon it. Anything that is merged at this point will drastically change if / when we get to the point of sending EXPLAIN query to all the servers for collecting profiling cost information, etc.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894584129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894603971","html_url":"https://github.com/apache/pinot/issues/7242#issuecomment-894603971","issue_url":"https://api.github.com/repos/apache/pinot/issues/7242","id":894603971,"node_id":"IC_kwDOATCU_c41UpLD","user":{"login":"elonazoulay","id":1587350,"node_id":"MDQ6VXNlcjE1ODczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1587350?v=4","gravatar_id":"","url":"https://api.github.com/users/elonazoulay","html_url":"https://github.com/elonazoulay","followers_url":"https://api.github.com/users/elonazoulay/followers","following_url":"https://api.github.com/users/elonazoulay/following{/other_user}","gists_url":"https://api.github.com/users/elonazoulay/gists{/gist_id}","starred_url":"https://api.github.com/users/elonazoulay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elonazoulay/subscriptions","organizations_url":"https://api.github.com/users/elonazoulay/orgs","repos_url":"https://api.github.com/users/elonazoulay/repos","events_url":"https://api.github.com/users/elonazoulay/events{/privacy}","received_events_url":"https://api.github.com/users/elonazoulay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T04:44:09Z","updated_at":"2021-08-07T04:44:09Z","author_association":"CONTRIBUTOR","body":"Thanks, sounds good! For the connector there is a new pr which adds an explicit limit (integer) to broker queries.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894603971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894604019","html_url":"https://github.com/apache/pinot/issues/7242#issuecomment-894604019","issue_url":"https://api.github.com/repos/apache/pinot/issues/7242","id":894604019,"node_id":"IC_kwDOATCU_c41UpLz","user":{"login":"elonazoulay","id":1587350,"node_id":"MDQ6VXNlcjE1ODczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1587350?v=4","gravatar_id":"","url":"https://api.github.com/users/elonazoulay","html_url":"https://github.com/elonazoulay","followers_url":"https://api.github.com/users/elonazoulay/followers","following_url":"https://api.github.com/users/elonazoulay/following{/other_user}","gists_url":"https://api.github.com/users/elonazoulay/gists{/gist_id}","starred_url":"https://api.github.com/users/elonazoulay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elonazoulay/subscriptions","organizations_url":"https://api.github.com/users/elonazoulay/orgs","repos_url":"https://api.github.com/users/elonazoulay/repos","events_url":"https://api.github.com/users/elonazoulay/events{/privacy}","received_events_url":"https://api.github.com/users/elonazoulay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T04:44:56Z","updated_at":"2021-08-07T04:44:56Z","author_association":"CONTRIBUTOR","body":"What about the grpc endpoint? Would it be possible to have long limit in that case?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894604019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894604049","html_url":"https://github.com/apache/pinot/issues/7242#issuecomment-894604049","issue_url":"https://api.github.com/repos/apache/pinot/issues/7242","id":894604049,"node_id":"IC_kwDOATCU_c41UpMR","user":{"login":"elonazoulay","id":1587350,"node_id":"MDQ6VXNlcjE1ODczNTA=","avatar_url":"https://avatars.githubusercontent.com/u/1587350?v=4","gravatar_id":"","url":"https://api.github.com/users/elonazoulay","html_url":"https://github.com/elonazoulay","followers_url":"https://api.github.com/users/elonazoulay/followers","following_url":"https://api.github.com/users/elonazoulay/following{/other_user}","gists_url":"https://api.github.com/users/elonazoulay/gists{/gist_id}","starred_url":"https://api.github.com/users/elonazoulay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elonazoulay/subscriptions","organizations_url":"https://api.github.com/users/elonazoulay/orgs","repos_url":"https://api.github.com/users/elonazoulay/repos","events_url":"https://api.github.com/users/elonazoulay/events{/privacy}","received_events_url":"https://api.github.com/users/elonazoulay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T04:45:21Z","updated_at":"2021-08-07T04:45:21Z","author_association":"CONTRIBUTOR","body":"Could be used to export and reimport (or copy) a pinot table.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894604049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894697983","html_url":"https://github.com/apache/pinot/pull/7260#issuecomment-894697983","issue_url":"https://api.github.com/repos/apache/pinot/issues/7260","id":894697983,"node_id":"IC_kwDOATCU_c41VAH_","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T19:33:21Z","updated_at":"2021-08-07T19:33:21Z","author_association":"CONTRIBUTOR","body":"I am unclear on the motivation behind this change. The slow query threshold and filtering should be part of the automatic tool. In fact, that gives you more flexibility since you can analyze logs based on threshold of your choice provided to the tool.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894697983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894698378","html_url":"https://github.com/apache/pinot/pull/7237#issuecomment-894698378","issue_url":"https://api.github.com/repos/apache/pinot/issues/7237","id":894698378,"node_id":"IC_kwDOATCU_c41VAOK","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T19:36:41Z","updated_at":"2021-08-07T19:36:56Z","author_association":"CONTRIBUTOR","body":"Yeah, I had also mentioned the same edge case as mentioned by @npawar, we should handle that.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894698378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894750823","html_url":"https://github.com/apache/pinot/pull/7237#issuecomment-894750823","issue_url":"https://api.github.com/repos/apache/pinot/issues/7237","id":894750823,"node_id":"IC_kwDOATCU_c41VNBn","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-08T06:29:57Z","updated_at":"2021-08-08T06:29:57Z","author_association":"CONTRIBUTOR","body":"Will be addressing this today.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894750823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894767345","html_url":"https://github.com/apache/pinot/issues/7261#issuecomment-894767345","issue_url":"https://api.github.com/repos/apache/pinot/issues/7261","id":894767345,"node_id":"IC_kwDOATCU_c41VRDx","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-08T09:10:32Z","updated_at":"2021-08-08T09:10:32Z","author_association":"CONTRIBUTOR","body":"https://hub.docker.com/layers/apachepinot/pinot/latest/images/sha256-ae26a48f6f3d7918d3311c132d2aee0dd2455eeefae4e8852438d7371a3c4a0b?context=repo","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894767345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894767510","html_url":"https://github.com/apache/pinot/issues/7261#issuecomment-894767510","issue_url":"https://api.github.com/repos/apache/pinot/issues/7261","id":894767510,"node_id":"IC_kwDOATCU_c41VRGW","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-08T09:12:05Z","updated_at":"2021-08-08T09:12:05Z","author_association":"CONTRIBUTOR","body":"Please refer to this doc for docker deployment: https://docs.pinot.apache.org/basics/getting-started/running-pinot-in-docker\n\nAnd k8s: https://docs.pinot.apache.org/basics/getting-started/kubernetes-quickstart","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894767510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894869783","html_url":"https://github.com/apache/pinot/pull/7210#issuecomment-894869783","issue_url":"https://api.github.com/repos/apache/pinot/issues/7210","id":894869783,"node_id":"IC_kwDOATCU_c41VqEX","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-08T23:08:54Z","updated_at":"2021-08-08T23:08:54Z","author_association":"CONTRIBUTOR","body":"> > > Thanks for the PR. can you provide read-only access for everyone by default?\r\n> > \r\n> > \r\n> > Unfortunately, I created the document using my LinkedIn account so it won't let me share access by default. I will give commenter access when people request.\r\n> \r\n> Can you please use your personal account to recreate and reshare the link.\r\n\r\n+1, please reshare a link from an account that has read access for all (by default).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/894869783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895118686","html_url":"https://github.com/apache/pinot/pull/7263#issuecomment-895118686","issue_url":"https://api.github.com/repos/apache/pinot/issues/7263","id":895118686,"node_id":"IC_kwDOATCU_c41Wm1e","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T10:36:53Z","updated_at":"2021-08-10T01:11:24Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7263](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e0c9de3) into [master](https://codecov.io/gh/apache/pinot/commit/d7e08b2ff46b35588c9021ecbaa7fdbf5469dd23?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d7e08b2) will **decrease** coverage by `56.72%`.\n> The diff coverage is `0.00%`.\n\n> :exclamation: Current head e0c9de3 differs from pull request most recent head 4bad330. Consider uploading reports for the commit 4bad330 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7263/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7263       +/-   ##\n=============================================\n- Coverage     71.16%   14.43%   -56.73%     \n+ Complexity     3265       92     -3173     \n=============================================\n  Files          1508     1462       -46     \n  Lines         74007    72115     -1892     \n  Branches      10693    10493      -200     \n=============================================\n- Hits          52664    10407    -42257     \n- Misses        17756    60947    +43191     \n+ Partials       3587      761     -2826     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `14.43% <0.00%> (+<0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../apache/pinot/common/metrics/PinotMetricUtils.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9QaW5vdE1ldHJpY1V0aWxzLmphdmE=) | `0.00% <0.00%> (-86.85%)` | :arrow_down: |\n| [.../tasks/BaseMultipleSegmentsConversionExecutor.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvQmFzZU11bHRpcGxlU2VnbWVudHNDb252ZXJzaW9uRXhlY3V0b3IuamF2YQ==) | `2.29% <0.00%> (-73.57%)` | :arrow_down: |\n| [...ion/tasks/BaseSingleSegmentConversionExecutor.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvQmFzZVNpbmdsZVNlZ21lbnRDb252ZXJzaW9uRXhlY3V0b3IuamF2YQ==) | `3.27% <0.00%> (-70.50%)` | :arrow_down: |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ain/java/org/apache/pinot/core/data/table/Key.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL0tleS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/core/data/table/Record.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL1JlY29yZC5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/core/util/GroupByUtils.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL0dyb3VwQnlVdGlscy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1181 more](https://codecov.io/gh/apache/pinot/pull/7263/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [d7e08b2...4bad330](https://codecov.io/gh/apache/pinot/pull/7263?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895118686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895137148","html_url":"https://github.com/apache/pinot/issues/7229#issuecomment-895137148","issue_url":"https://api.github.com/repos/apache/pinot/issues/7229","id":895137148,"node_id":"IC_kwDOATCU_c41WrV8","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T11:09:48Z","updated_at":"2021-08-09T11:09:48Z","author_association":"CONTRIBUTOR","body":"@kishoreg @mcvsubbu [Here](https://docs.google.com/document/d/1txrsoI4WPRMPWuAvE-BHlHP5WIpbjrp0g7znkZD71Fk/edit?usp=sharing) is the design proposal on the feature. One section is still in todo (evaluating the performance implications of this feature).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895137148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895186631","html_url":"https://github.com/apache/pinot/pull/7237#issuecomment-895186631","issue_url":"https://api.github.com/repos/apache/pinot/issues/7237","id":895186631,"node_id":"IC_kwDOATCU_c41W3bH","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T12:36:05Z","updated_at":"2021-08-09T12:36:59Z","author_association":"CONTRIBUTOR","body":"> Yeah, I had also mentioned the same edge case as mentioned by @npawar, we should handle that.\r\n\r\n@mayankshriv @npawar apologies this has been hanging around for a while, I was a bit busy with the proposal for tiered storage. One question. When `fieldsToRead` is empty or `null`, all columns are read by default:\r\n\r\n```\r\n  @Override\r\n  public void init(File dataFile, @Nullable Set<String> fieldsToRead, @Nullable RecordReaderConfig recordReaderConfig)\r\n      throws IOException {\r\n```\r\n\r\nIn this case, to determine how many values a record contains, I'll have to read an actual record from the file (I cannot rely on the configured header for this as it is the header itself that we are verifying). But reading the file in `init()` doesn't look like a nice idea. Would you recommend I do it?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895186631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895190726","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895190726","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895190726,"node_id":"IC_kwDOATCU_c41W4bG","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T12:42:44Z","updated_at":"2021-08-09T12:47:34Z","author_association":"NONE","body":"Nailed it down to the transformer configuration\r\n```\r\n\"transformConfigs\": [\r\n  {\r\n    \"columnName\": \"timestamp\",\r\n    \"transformFunction\": \"Groovy({query.mappingTime == -1 ? 31536000: query.mappingTime}, query.mappingTime)\"\r\n  }\r\n]\r\n```\r\nWhere I want to transform the mappingTime to a valid timestamp in case its value is -1.\r\n\r\nHowever, I'm not able to provide a valid transformer configuration. Getting\r\n`Created dictionary for LONG column: timestamp with cardinality: 1, range: -9223372036854775808 to -9223372036854775808` all the time.\r\n\r\nI've tried different configurations\r\n```\r\n\"transformFunction\": \"Groovy({query.mappingTime == -1 ? 31536000: query.mappingTime}, query.mappingTime)\"\r\n...\r\n\"transformFunction\": \"Groovy({query.mappingTime == -1 ? 31536000: query.mappingTime}, query)\"\r\n...\r\n\"transformFunction\": \"Groovy({mappingTime == -1 ? 31536000: mappingTime}, query)\"\r\n```\r\nNone of them do work. I also tried to add `query.mappingTime` to my schema definition lik so:\r\n```\r\n{\r\n  \"schemaName\": \"kpis\",\r\n  \"dimensionFieldSpecs\": [\r\n    {\r\n      \"name\": \"query.userQuery\",\r\n      \"dataType\": \"STRING\"\r\n    },\r\n    {\r\n      \"name\": \"query.masterQuery\",\r\n      \"dataType\": \"STRING\"\r\n    }\r\n  ],\r\n  \"metricFieldSpecs\": [\r\n    {\r\n      \"name\": \"kpis.clicks\",\r\n      \"dataType\": \"INT\"\r\n    },\r\n    {\r\n      \"name\": \"kpis.checkout\",\r\n      \"dataType\": \"INT\"\r\n    },\r\n    {\r\n      \"name\": \"kpis.cart\",\r\n      \"dataType\": \"INT\"\r\n    }\r\n  ],\r\n  \"dateTimeFieldSpecs\": [\r\n    {\r\n      \"name\": \"timestamp\",\r\n      \"dataType\": \"LONG\",\r\n      \"format\": \"1:SECONDS:EPOCH\",\r\n      \"granularity\": \"15:MINUTES\"\r\n    },\r\n    {\r\n      \"name\": \"query.mappingTime\",\r\n      \"dataType\": \"LONG\",\r\n      \"format\": \"1:SECONDS:EPOCH\",\r\n      \"granularity\": \"15:MINUTES\"\r\n    }\r\n  ]\r\n}\r\n```\r\nWhen I adjust my transformer configuration to just return the timestamp without any condition, the data gets ingested fine.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895190726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895215480","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-895215480","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":895215480,"node_id":"IC_kwDOATCU_c41W-d4","user":{"login":"mayankshriv","id":12615885,"node_id":"MDQ6VXNlcjEyNjE1ODg1","avatar_url":"https://avatars.githubusercontent.com/u/12615885?v=4","gravatar_id":"","url":"https://api.github.com/users/mayankshriv","html_url":"https://github.com/mayankshriv","followers_url":"https://api.github.com/users/mayankshriv/followers","following_url":"https://api.github.com/users/mayankshriv/following{/other_user}","gists_url":"https://api.github.com/users/mayankshriv/gists{/gist_id}","starred_url":"https://api.github.com/users/mayankshriv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayankshriv/subscriptions","organizations_url":"https://api.github.com/users/mayankshriv/orgs","repos_url":"https://api.github.com/users/mayankshriv/repos","events_url":"https://api.github.com/users/mayankshriv/events{/privacy}","received_events_url":"https://api.github.com/users/mayankshriv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T13:18:26Z","updated_at":"2021-08-09T13:18:26Z","author_association":"CONTRIBUTOR","body":"+1 @xiangfu0 's comment. Implementing an accurate algorithm almost looks like the distinctCount implementation (perhaps could be refactored). But wondering if there's libraries that provide approx algorithms for this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895215480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895424222","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-895424222","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":895424222,"node_id":"IC_kwDOATCU_c41Xxbe","user":{"login":"DanielTing","id":6915853,"node_id":"MDQ6VXNlcjY5MTU4NTM=","avatar_url":"https://avatars.githubusercontent.com/u/6915853?v=4","gravatar_id":"","url":"https://api.github.com/users/DanielTing","html_url":"https://github.com/DanielTing","followers_url":"https://api.github.com/users/DanielTing/followers","following_url":"https://api.github.com/users/DanielTing/following{/other_user}","gists_url":"https://api.github.com/users/DanielTing/gists{/gist_id}","starred_url":"https://api.github.com/users/DanielTing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DanielTing/subscriptions","organizations_url":"https://api.github.com/users/DanielTing/orgs","repos_url":"https://api.github.com/users/DanielTing/repos","events_url":"https://api.github.com/users/DanielTing/events{/privacy}","received_events_url":"https://api.github.com/users/DanielTing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T18:00:09Z","updated_at":"2021-08-09T18:00:09Z","author_association":"NONE","body":"Just commenting a bit on how data sketches could be used for this problem and some of the limitations. The short is that existing libraries won't provide this exact functionality but can help with this. There is extra work involved. You'd get an approximate result that covers a good set of cases (but not all). \r\n\r\nSo for continuous data with a smooth density, the distribution is pretty easy to approximate using a quantile sketch. Both the KLL sketch in Apache Datasketches and the t-digest should work well. (See technical note below on some details)\r\n\r\nFor discrete data (the more likely case when you compute the mode in database settings), the problem is exactly the same as top-k with k=1, so frequent item sketches can help you find it. The main problems are 1) that you won't know how to size the sketch without knowing how frequent the mode is in advance, and 2) that if the distribution is too \"flat\", it takes too much space. You can likely still get around problem (1) in practice, but not (2). If you cover both the continuous/discrete cases, you can consider using a KLL quantile sketch to act as a frequent item sketch. It's not quite optimized for the frequent item problem, but it could make engineering easier since you don't need to know if the data is continuous/discrete in advance. Even though it's a quantile sketch, you can still apply it to string data since there's a comparison operator. Distinct counting sketches will have too high of a chance of discarding the mode because they don't favor keeping around items with lots of duplicates.\r\n\r\nOn the technical side, the KLL sketch has some proofs on the correctness for quantiles but doesn't explicitly cover finding the mode. To make sure it works with some guarantees, you'd likely have to assume the density is \"smooth enough\" like the derivative of the density is not too big. The simple procedure to find the mode would then be to apply a kernel density estimate on top of the points in the KLL sketch, and find the mode of the smoothed density.\r\n\r\nFor the T-digest, you'd pretty much do the same, but the there wouldn't be any theoretical guarantees and the (perhaps main) advantage that it has accurate tails is irrelevant. The relevant error when computing the mode would be the maximum error (which should occur around the median). ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895424222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895467442","html_url":"https://github.com/apache/pinot/issues/7242#issuecomment-895467442","issue_url":"https://api.github.com/repos/apache/pinot/issues/7242","id":895467442,"node_id":"IC_kwDOATCU_c41X7-y","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T19:05:01Z","updated_at":"2021-08-09T19:05:01Z","author_association":"CONTRIBUTOR","body":"Currently the `PinotQuery` (parsed pinot query) has `limit` as an `int` field, so it is hard to add it. One possible workaround would be put the long limit as a query option, but that is quite hacky","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895467442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895479498","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895479498","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895479498,"node_id":"IC_kwDOATCU_c41X-7K","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T19:23:16Z","updated_at":"2021-08-09T19:23:16Z","author_association":"CONTRIBUTOR","body":"Can you please check if there are any exceptions logged?\r\nAdding @npawar and @yupeng9 to also take a look","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895479498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895481866","html_url":"https://github.com/apache/pinot/issues/7264#issuecomment-895481866","issue_url":"https://api.github.com/repos/apache/pinot/issues/7264","id":895481866,"node_id":"IC_kwDOATCU_c41X_gK","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T19:27:10Z","updated_at":"2021-08-09T19:27:10Z","author_association":"CONTRIBUTOR","body":"There is an indication that the response is partial. Why add an exception?\r\nIf there is a need for the reason, then we can add a \"reason\" field ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895481866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895487020","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895487020","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895487020,"node_id":"IC_kwDOATCU_c41YAws","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T19:36:03Z","updated_at":"2021-08-09T19:36:03Z","author_association":"CONTRIBUTOR","body":"This looks like you could simply use json extraction udfs.\r\n\r\n```\r\nJSONPATHLONG(jsonField, 'jsonPath', [defaultValue])\r\n```\r\neg\r\n```\r\nJSONPATHLONG(query, '$.mappingTime', 31536000)\r\n```\r\nHere's also a demo which shows the usage of this: https://youtu.be/L5b_OJVOJKo?t=2479\r\n\r\nBut if you in particular want to use the complex field config, @yupeng9 should be able to help you.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895487020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895487473","html_url":"https://github.com/apache/pinot/issues/7264#issuecomment-895487473","issue_url":"https://api.github.com/repos/apache/pinot/issues/7264","id":895487473,"node_id":"IC_kwDOATCU_c41YA3x","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T19:36:53Z","updated_at":"2021-08-09T19:36:53Z","author_association":"CONTRIBUTOR","body":"We don't really have that for case 1 and 2. For case 3, we should not expect normal users to check `numServersQueried` and `numServersResponded` and compare them to tell whether the result is partial. (The `partialResponse` flag is in LinkedIn internal code IIRC)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895487473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895513322","html_url":"https://github.com/apache/pinot/issues/7264#issuecomment-895513322","issue_url":"https://api.github.com/repos/apache/pinot/issues/7264","id":895513322,"node_id":"IC_kwDOATCU_c41YHLq","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T20:18:37Z","updated_at":"2021-08-09T20:18:37Z","author_association":"CONTRIBUTOR","body":"> We don't really have that for case 1 and 2. For case 3, we should not expect normal users to check `numServersQueried` and `numServersResponded` and compare them to tell whether the result is partial. (The `partialResponse` flag is in LinkedIn internal code IIRC)\r\n\r\nIf partial response flag is not set in all cases, then that is a bug. Let us definitely fix it.\r\n\r\nI think applications check for exceptions and assume that there is no result. So, exceptions when there are partial results may not be the right answer. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895513322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895520797","html_url":"https://github.com/apache/pinot/pull/7226#issuecomment-895520797","issue_url":"https://api.github.com/repos/apache/pinot/issues/7226","id":895520797,"node_id":"IC_kwDOATCU_c41YJAd","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T20:30:43Z","updated_at":"2021-08-24T20:40:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7226](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (aa833e9) into [master](https://codecov.io/gh/apache/pinot/commit/767a149773a27fb38fadfd1448fd6162dff510ac?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (767a149) will **decrease** coverage by `1.19%`.\n> The diff coverage is `87.90%`.\n\n> :exclamation: Current head aa833e9 differs from pull request most recent head 907783f. Consider uploading reports for the commit 907783f to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7226/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7226      +/-   ##\n============================================\n- Coverage     71.63%   70.43%   -1.20%     \n- Complexity     3297     3308      +11     \n============================================\n  Files          1509     1515       +6     \n  Lines         74868    74992     +124     \n  Branches      10887    10903      +16     \n============================================\n- Hits          53629    52822     -807     \n- Misses        17608    18552     +944     \n+ Partials       3631     3618      -13     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `29.03% <0.00%> (-0.15%)` | :arrow_down: |\n| unittests1 | `69.53% <87.90%> (+0.10%)` | :arrow_up: |\n| unittests2 | `14.46% <0.00%> (-0.03%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...gment/local/aggregator/ValueAggregatorFactory.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9hZ2dyZWdhdG9yL1ZhbHVlQWdncmVnYXRvckZhY3RvcnkuamF2YQ==) | `84.61% <ø> (ø)` | |\n| [...unction/PercentileRawEstMVAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9QZXJjZW50aWxlUmF3RXN0TVZBZ2dyZWdhdGlvbkZ1bmN0aW9uLmphdmE=) | `60.00% <60.00%> (ø)` | |\n| [...ion/PercentileRawTDigestMVAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9QZXJjZW50aWxlUmF3VERpZ2VzdE1WQWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `60.00% <60.00%> (ø)` | |\n| [...gregation/function/AggregationFunctionFactory.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9BZ2dyZWdhdGlvbkZ1bmN0aW9uRmFjdG9yeS5qYXZh) | `86.86% <75.00%> (-1.74%)` | :arrow_down: |\n| [...che/pinot/segment/spi/AggregationFunctionType.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1zcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3NlZ21lbnQvc3BpL0FnZ3JlZ2F0aW9uRnVuY3Rpb25UeXBlLmphdmE=) | `97.18% <83.33%> (-2.82%)` | :arrow_down: |\n| [.../segment/local/customobject/SerializedTDigest.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9jdXN0b21vYmplY3QvU2VyaWFsaXplZFREaWdlc3QuamF2YQ==) | `85.71% <85.71%> (ø)` | |\n| [...t/local/customobject/SerializedQuantileDigest.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9jdXN0b21vYmplY3QvU2VyaWFsaXplZFF1YW50aWxlRGlnZXN0LmphdmE=) | `87.50% <87.50%> (ø)` | |\n| [.../function/PercentileRawEstAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9QZXJjZW50aWxlUmF3RXN0QWdncmVnYXRpb25GdW5jdGlvbi5qYXZh) | `96.96% <96.96%> (ø)` | |\n| [...ction/PercentileRawTDigestAggregationFunction.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9hZ2dyZWdhdGlvbi9mdW5jdGlvbi9QZXJjZW50aWxlUmF3VERpZ2VzdEFnZ3JlZ2F0aW9uRnVuY3Rpb24uamF2YQ==) | `97.05% <97.05%> (ø)` | |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [117 more](https://codecov.io/gh/apache/pinot/pull/7226/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [767a149...907783f](https://codecov.io/gh/apache/pinot/pull/7226?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895520797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895539754","html_url":"https://github.com/apache/pinot/issues/7264#issuecomment-895539754","issue_url":"https://api.github.com/repos/apache/pinot/issues/7264","id":895539754,"node_id":"IC_kwDOATCU_c41YNoq","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T20:56:33Z","updated_at":"2021-08-09T20:56:33Z","author_association":"CONTRIBUTOR","body":"We don't have that flag in OSS. IIRC the logic for that flag is check if `numServersQueried` matches `numServersResponded` and whether there are exceptions.\r\n\r\nWe don't model exceptions this way. Having exceptions does not indicate no result. It actually indicates the results are not complete (e.g. one segment throws exception, others work fine). When broker failed to route the query to a server, it also adds an exception.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895539754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895575208","html_url":"https://github.com/apache/pinot/pull/7265#issuecomment-895575208","issue_url":"https://api.github.com/repos/apache/pinot/issues/7265","id":895575208,"node_id":"IC_kwDOATCU_c41YWSo","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T21:52:04Z","updated_at":"2021-08-09T22:04:03Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7265](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e19854b) into [master](https://codecov.io/gh/apache/pinot/commit/d7e08b2ff46b35588c9021ecbaa7fdbf5469dd23?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d7e08b2) will **decrease** coverage by `6.71%`.\n> The diff coverage is `0.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7265/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7265      +/-   ##\n============================================\n- Coverage     71.16%   64.44%   -6.72%     \n- Complexity     3265     3268       +3     \n============================================\n  Files          1508     1462      -46     \n  Lines         74007    72114    -1893     \n  Branches      10693    10493     -200     \n============================================\n- Hits          52664    46476    -6188     \n- Misses        17756    22302    +4546     \n+ Partials       3587     3336     -251     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `68.95% <ø> (+<0.01%)` | :arrow_up: |\n| unittests2 | `14.42% <0.00%> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../tasks/BaseMultipleSegmentsConversionExecutor.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvQmFzZU11bHRpcGxlU2VnbWVudHNDb252ZXJzaW9uRXhlY3V0b3IuamF2YQ==) | `2.29% <0.00%> (-73.57%)` | :arrow_down: |\n| [...ion/tasks/BaseSingleSegmentConversionExecutor.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvQmFzZVNpbmdsZVNlZ21lbnRDb252ZXJzaW9uRXhlY3V0b3IuamF2YQ==) | `3.27% <0.00%> (-70.50%)` | :arrow_down: |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pache/pinot/common/utils/grpc/GrpcQueryClient.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvZ3JwYy9HcnBjUXVlcnlDbGllbnQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pinot/minion/exception/TaskCancelledException.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtbWluaW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9taW5pb24vZXhjZXB0aW9uL1Rhc2tDYW5jZWxsZWRFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/startree/plan/StarTreeDocIdSetPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlRG9jSWRTZXRQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ot/common/restlet/resources/TableMetadataInfo.java](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVzdGxldC9yZXNvdXJjZXMvVGFibGVNZXRhZGF0YUluZm8uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [342 more](https://codecov.io/gh/apache/pinot/pull/7265/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [d7e08b2...e19854b](https://codecov.io/gh/apache/pinot/pull/7265?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895575208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895602993","html_url":"https://github.com/apache/pinot/pull/7267#issuecomment-895602993","issue_url":"https://api.github.com/repos/apache/pinot/issues/7267","id":895602993,"node_id":"IC_kwDOATCU_c41YdEx","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T22:52:56Z","updated_at":"2021-09-15T22:09:42Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7267](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (9f58f6c) into [master](https://codecov.io/gh/apache/pinot/commit/69a91acbead90b110800bbf98424415630f78527?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (69a91ac) will **decrease** coverage by `32.41%`.\n> The diff coverage is `13.69%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7267/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7267       +/-   ##\n=============================================\n- Coverage     71.93%   39.51%   -32.42%     \n+ Complexity     3346      178     -3168     \n=============================================\n  Files          1516     1517        +1     \n  Lines         75109    75171       +62     \n  Branches      10945    10954        +9     \n=============================================\n- Hits          54026    29707    -24319     \n- Misses        17454    43217    +25763     \n+ Partials       3629     2247     -1382     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.68% <13.69%> (+0.30%)` | :arrow_up: |\n| integration2 | `29.08% <9.58%> (+<0.01%)` | :arrow_up: |\n| unittests1 | `?` | |\n| unittests2 | `14.49% <0.00%> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/pinot/common/utils/ServiceStatus.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvU2VydmljZVN0YXR1cy5qYXZh) | `41.32% <0.00%> (-26.06%)` | :arrow_down: |\n| [...ter/helix/OffsetBasedConsumptionStatusChecker.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9PZmZzZXRCYXNlZENvbnN1bXB0aW9uU3RhdHVzQ2hlY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...va/org/apache/pinot/spi/stream/OffsetCriteria.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL09mZnNldENyaXRlcmlhLmphdmE=) | `0.00% <0.00%> (-89.66%)` | :arrow_down: |\n| [.../pinot/server/starter/helix/BaseServerStarter.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9CYXNlU2VydmVyU3RhcnRlci5qYXZh) | `55.33% <14.28%> (-0.49%)` | :arrow_down: |\n| [...manager/realtime/LLRealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvTExSZWFsdGltZVNlZ21lbnREYXRhTWFuYWdlci5qYXZh) | `60.60% <90.00%> (-11.47%)` | :arrow_down: |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../java/org/apache/pinot/spi/utils/BooleanUtils.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQm9vbGVhblV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [814 more](https://codecov.io/gh/apache/pinot/pull/7267/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [69a91ac...9f58f6c](https://codecov.io/gh/apache/pinot/pull/7267?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895602993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895605164","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895605164","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895605164,"node_id":"IC_kwDOATCU_c41Ydms","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T22:58:54Z","updated_at":"2021-08-09T22:58:54Z","author_association":"CONTRIBUTOR","body":"complex type handling is not released yet. Did you use master or existing releases?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895605164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895619273","html_url":"https://github.com/apache/pinot/pull/7267#issuecomment-895619273","issue_url":"https://api.github.com/repos/apache/pinot/issues/7267","id":895619273,"node_id":"IC_kwDOATCU_c41YhDJ","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T23:29:26Z","updated_at":"2021-08-09T23:29:26Z","author_association":"MEMBER","body":"What's the scenario where this feature will be useful? \n\nAny drawbacks? Looks like this will make entire server not accessible during catch-up instead of just one segment. Is my understanding correct?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895619273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895624138","html_url":"https://github.com/apache/pinot/pull/7267#issuecomment-895624138","issue_url":"https://api.github.com/repos/apache/pinot/issues/7267","id":895624138,"node_id":"IC_kwDOATCU_c41YiPK","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T23:44:15Z","updated_at":"2021-08-09T23:44:15Z","author_association":"CONTRIBUTOR","body":"> What's the scenario where this feature will be useful?\r\n> \r\n> Any drawbacks? Looks like this will make entire server not accessible during catch-up instead of just one segment. Is my understanding correct?\r\n\r\nThis is useful in scenarios where there is a very high ingestion rate and low latency requirements for queries (as well as high query throughput). We need to do some catching up during server restarts before we declare the server ready to serve queries. Right now, there is a (configurable) hard time limit that the server waits for before declaring itself ready to serve queries. We would like that the server automatically detect when it is ready to serve queries.\r\n\r\nThe default behavior (of allowing queries right away) will still remain.  Once we analyze a few use cases, we will add appropriate configs, so that the feature can be turned on for tables such as those declared above. We were thinking of per server config, but we could make it a table config, so that if it is not configured, the segments declare as being ready right away. The Config part will be a separate PR, and up for discussion.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895624138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895624536","html_url":"https://github.com/apache/pinot/pull/7260#issuecomment-895624536","issue_url":"https://api.github.com/repos/apache/pinot/issues/7260","id":895624536,"node_id":"IC_kwDOATCU_c41YiVY","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T23:45:35Z","updated_at":"2021-08-09T23:45:35Z","author_association":"CONTRIBUTOR","body":"@mayankshriv The main motivation here is to use `WARN` log instead of `INFO` log for slow queries since they are suspicious. Automatic tools should handle `WARN` log and `INFO` log differently. For my use case the `INFO` log will be filtered out, `WARN` and up logs will be stored in remote logging system which has much longer retention time than keeping them in local disk.  And we are able to do error alerting, anomaly detection, etc based on the remote logging system.     ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895624536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895627352","html_url":"https://github.com/apache/pinot/pull/7267#issuecomment-895627352","issue_url":"https://api.github.com/repos/apache/pinot/issues/7267","id":895627352,"node_id":"IC_kwDOATCU_c41YjBY","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T23:54:32Z","updated_at":"2021-08-09T23:54:32Z","author_association":"CONTRIBUTOR","body":"> What's the scenario where this feature will be useful?\r\n> \r\n> Any drawbacks? Looks like this will make entire server not accessible during catch-up instead of just one segment. Is my understanding correct?\r\n\r\nHere's the existing behavior: if the value for config `pinot.server.starter.realtimeConsumptionCatchupWaitMs` is greater than zero (zero is the default value), the pinot-server just waits for the period specified in the config to allow ALL consumers to catch up. This requires some knowledge on how much time is good for different use cases to only consume at startup. Keep in mind that consumption might change over time and then we need to adjust the config value.\r\nThe new status checker still uses that startup-consumption-timeout as the upper bound, but in each status check interval, which is 10s, it checks if all consuming segments have reached their latest stream offset.\r\nJust FYI we have 2 minutes timeout (10m for high rate) in our prod use cases.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895627352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895630805","html_url":"https://github.com/apache/pinot/issues/7202#issuecomment-895630805","issue_url":"https://api.github.com/repos/apache/pinot/issues/7202","id":895630805,"node_id":"IC_kwDOATCU_c41Yj3V","user":{"login":"liuchang0520","id":33030174,"node_id":"MDQ6VXNlcjMzMDMwMTc0","avatar_url":"https://avatars.githubusercontent.com/u/33030174?v=4","gravatar_id":"","url":"https://api.github.com/users/liuchang0520","html_url":"https://github.com/liuchang0520","followers_url":"https://api.github.com/users/liuchang0520/followers","following_url":"https://api.github.com/users/liuchang0520/following{/other_user}","gists_url":"https://api.github.com/users/liuchang0520/gists{/gist_id}","starred_url":"https://api.github.com/users/liuchang0520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuchang0520/subscriptions","organizations_url":"https://api.github.com/users/liuchang0520/orgs","repos_url":"https://api.github.com/users/liuchang0520/repos","events_url":"https://api.github.com/users/liuchang0520/events{/privacy}","received_events_url":"https://api.github.com/users/liuchang0520/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T00:03:40Z","updated_at":"2021-08-10T00:03:40Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang @chenboat @yupeng9 , per the discussion, add a flag to table config to indicate if we handle the null value in time column or not. \r\n\r\nIf it is enabled, we fill in machine time.\r\n\r\nBy default set this flag to false to keep backward compatibility.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895630805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895707258","html_url":"https://github.com/apache/pinot/pull/7267#issuecomment-895707258","issue_url":"https://api.github.com/repos/apache/pinot/issues/7267","id":895707258,"node_id":"IC_kwDOATCU_c41Y2h6","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T03:50:52Z","updated_at":"2021-08-10T03:50:52Z","author_association":"MEMBER","body":"Is it possible to make the status checker an interface and have this implemented within LinkedIn Pinot wrapper. We also have seen some needs of customizing health status checks in Kubernetes and might be a good idea to make it pluggable.\n\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895707258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895726791","html_url":"https://github.com/apache/pinot/pull/7226#issuecomment-895726791","issue_url":"https://api.github.com/repos/apache/pinot/issues/7226","id":895726791,"node_id":"IC_kwDOATCU_c41Y7TH","user":{"login":"lakshmanan-v","id":85200301,"node_id":"MDQ6VXNlcjg1MjAwMzAx","avatar_url":"https://avatars.githubusercontent.com/u/85200301?v=4","gravatar_id":"","url":"https://api.github.com/users/lakshmanan-v","html_url":"https://github.com/lakshmanan-v","followers_url":"https://api.github.com/users/lakshmanan-v/followers","following_url":"https://api.github.com/users/lakshmanan-v/following{/other_user}","gists_url":"https://api.github.com/users/lakshmanan-v/gists{/gist_id}","starred_url":"https://api.github.com/users/lakshmanan-v/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lakshmanan-v/subscriptions","organizations_url":"https://api.github.com/users/lakshmanan-v/orgs","repos_url":"https://api.github.com/users/lakshmanan-v/repos","events_url":"https://api.github.com/users/lakshmanan-v/events{/privacy}","received_events_url":"https://api.github.com/users/lakshmanan-v/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T04:51:54Z","updated_at":"2021-08-10T04:51:54Z","author_association":"CONTRIBUTOR","body":"plz test","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895726791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895746969","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895746969","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895746969,"node_id":"IC_kwDOATCU_c41ZAOZ","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T05:48:43Z","updated_at":"2021-08-10T05:48:43Z","author_association":"NONE","body":"@yupeng9 I've setup a Docker compose with `image: apachepinot/pinot:latest`\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895746969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895749849","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895749849","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895749849,"node_id":"IC_kwDOATCU_c41ZA7Z","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T05:56:35Z","updated_at":"2021-08-10T06:00:21Z","author_association":"NONE","body":"@npawar I've tried \r\n```\r\n\"transformConfigs\": [\r\n  {\r\n    \"columnName\": \"timestamp\",\r\n    \"transformFunction\": \"JSONPATHLONG(query, '$.mappingTime', 31536000)\"\r\n  }\r\n]\r\n```\r\nand\r\n```\r\n\"transformConfigs\": [\r\n  {\r\n    \"columnName\": \"timestamp\",\r\n    \"transformFunction\": \"JSONPATHLONG(query, '$.query.mappingTime', 31536000)\"\r\n  }\r\n]\r\n```\r\nboth resulting in `Created dictionary for LONG column: timestamp with cardinality: 1, range: 31536000 to 31536000` where all rows contain the default value.\r\n\r\n![image](https://user-images.githubusercontent.com/11541497/128815923-97f66793-6815-41ab-8fd7-454e2944a691.png)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895749849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895755814","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895755814","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895755814,"node_id":"IC_kwDOATCU_c41ZCYm","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T06:10:15Z","updated_at":"2021-08-10T06:10:15Z","author_association":"CONTRIBUTOR","body":"According to the syntax,\nJsonField = query\nJsonPath = $.mapping\nSo try, jsonPathLong(query, '$.mapping', default value)\n\nOn Mon, Aug 9, 2021, 10:56 PM HJK181 ***@***.***> wrote:\n\n> @npawar <https://github.com/npawar> I've tried\n>\n> \"transformConfigs\": [\n>   {\n>     \"columnName\": \"timestamp\",\n>     \"transformFunction\": \"JSONPATHLONG(query, '$.mappingTime', 31536000)\"\n>   }\n> ]\n>\n> and\n>\n> \"transformConfigs\": [\n>   {\n>     \"columnName\": \"timestamp\",\n>     \"transformFunction\": \"JSONPATHLONG(query, '$.query.mappingTime', 31536000)\"\n>   }\n> ]\n>\n> both resulting in Created dictionary for LONG column: timestamp with\n> cardinality: 1, range: 31536000 to 31536000 where all rows contain the\n> default value.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/pinot/issues/7262#issuecomment-895749849>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AEWIC3JQDWZDHTZIPJBYNQDT4C5R5ANCNFSM5BZO5J3A>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&utm_campaign=notification-email>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895755814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895762497","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895762497","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895762497,"node_id":"IC_kwDOATCU_c41ZEBB","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T06:24:30Z","updated_at":"2021-08-10T06:30:46Z","author_association":"NONE","body":"@npawar Same result, `cardinality: 1`. I don't understand why it should be '$.mapping' the avro field is called `mappingTime` and in my schema definition I have configured \r\n```\r\n\"dateTimeFieldSpecs\": [\r\n    {\r\n      \"name\": \"timestamp\",\r\n      \"dataType\": \"LONG\",\r\n      \"format\": \"1:SECONDS:EPOCH\",\r\n      \"granularity\": \"15:MINUTES\"\r\n    },\r\n    {\r\n      \"name\": \"query.mappingTime\",\r\n      \"dataType\": \"LONG\",\r\n      \"format\": \"1:SECONDS:EPOCH\",\r\n      \"granularity\": \"15:MINUTES\"\r\n    }\r\n  ]\r\n```\r\nSo `JSONPATHLONG(query, '$.mappingTime', 31536000)` should be correct, shouldn't it? But this also results in `cardinality: 1`\r\n\r\nBtw. if I remove \r\n```\r\n,\r\n      \"complexTypeConfig\": {\r\n        \"fieldsToUnnest\": [\r\n          \"query\",\r\n          \"kpis\"\r\n        ]\r\n      }\r\n```\r\nfrom my table configuration I get \r\n`Created dictionary for LONG column: timestamp with cardinality: 28202, range: -1 to 1623628697` Looks like JSONPATHLONG is working here, but no default value is used, as I guess it will be used in case the column is `null` but in my case I want the default value to be set if the column's value is equal to `-1`. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895762497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895766305","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-895766305","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":895766305,"node_id":"IC_kwDOATCU_c41ZE8h","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T06:32:58Z","updated_at":"2021-08-10T06:33:40Z","author_association":"NONE","body":"What is working for the mappingTime default value is the following table configuration:\r\n```\r\n{\r\n  \"OFFLINE\": {\r\n    \"tableName\": \"kpis_OFFLINE\",\r\n    \"tableType\": \"OFFLINE\",\r\n    \"segmentsConfig\": {\r\n      \"timeType\": \"MILLISECONDS\",\r\n      \"schemaName\": \"kpis\",\r\n      \"timeColumnName\": \"timestamp\",\r\n      \"replication\": \"1\"\r\n    },\r\n    \"tenants\": {\r\n      \"broker\": \"DefaultTenant\",\r\n      \"server\": \"DefaultTenant\"\r\n    },\r\n    \"tableIndexConfig\": {\r\n      \"invertedIndexColumns\": [],\r\n      \"autoGeneratedInvertedIndex\": false,\r\n      \"createInvertedIndexDuringSegmentGeneration\": false,\r\n      \"loadMode\": \"MMAP\",\r\n      \"enableDefaultStarTree\": false,\r\n      \"enableDynamicStarTreeCreation\": false,\r\n      \"aggregateMetrics\": false,\r\n      \"nullHandlingEnabled\": false\r\n    },\r\n    \"metadata\": {},\r\n    \"ingestionConfig\": {\r\n      \"transformConfigs\": [\r\n        {\r\n          \"columnName\": \"timestamp\",\r\n          \"transformFunction\": \"Groovy({query.mappingTime == -1 ? 31536000: query.mappingTime}, query)\"\r\n        }\r\n      ]\r\n    },\r\n    \"isDimTable\": false\r\n  }\r\n}\r\n```\r\nI removed the `complexTypeConfig` but with this configuration, I get a cardinality: 1 for all other columns:\r\n```\r\nUsing fixed length dictionary for column: query.userQuery, size: 4\r\nCreated dictionary for STRING column: query.userQuery with cardinality: 1, max length in bytes: 4, range: null to null\r\nCreated dictionary for LONG column: query.mappingTime with cardinality: 1, range: -9223372036854775808 to -9223372036854775808\r\nUsing fixed length dictionary for column: query.masterQuery, size: 4\r\nCreated dictionary for STRING column: query.masterQuery with cardinality: 1, max length in bytes: 4, range: null to null\r\nCreated dictionary for INT column: kpis.clicks with cardinality: 1, range: 0 to 0\r\nCreated dictionary for INT column: kpis.checkout with cardinality: 1, range: 0 to 0\r\nCreated dictionary for INT column: kpis.cart with cardinality: 1, range: 0 to 0\r\nCreated dictionary for LONG column: timestamp with cardinality: 28202, range: 31536000 to 1623628697\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895766305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895792554","html_url":"https://github.com/apache/pinot/pull/7269#issuecomment-895792554","issue_url":"https://api.github.com/repos/apache/pinot/issues/7269","id":895792554,"node_id":"IC_kwDOATCU_c41ZLWq","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T07:20:39Z","updated_at":"2021-08-17T03:09:45Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7269](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (22a9a98) into [master](https://codecov.io/gh/apache/pinot/commit/12e5bcd37350a3e85a9e9630a7f6de05d91b5a24?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (12e5bcd) will **decrease** coverage by `0.01%`.\n> The diff coverage is `81.81%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7269/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7269      +/-   ##\n============================================\n- Coverage     71.32%   71.30%   -0.02%     \n+ Complexity     3367     3280      -87     \n============================================\n  Files          1503     1503              \n  Lines         74030    74050      +20     \n  Branches      10718    10723       +5     \n============================================\n  Hits          52803    52803              \n- Misses        17622    17637      +15     \n- Partials       3605     3610       +5     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.03% <0.00%> (-0.04%)` | :arrow_down: |\n| integration2 | `29.25% <0.00%> (-0.08%)` | :arrow_down: |\n| unittests1 | `68.97% <81.81%> (-0.05%)` | :arrow_down: |\n| unittests2 | `14.63% <0.00%> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../local/recordtransformer/CompositeTransformer.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWNvcmR0cmFuc2Zvcm1lci9Db21wb3NpdGVUcmFuc2Zvcm1lci5qYXZh) | `83.33% <ø> (ø)` | |\n| [...he/pinot/segment/local/utils/TableConfigUtils.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC91dGlscy9UYWJsZUNvbmZpZ1V0aWxzLmphdmE=) | `66.31% <50.00%> (-0.09%)` | :arrow_down: |\n| [.../local/recordtransformer/NullValueTransformer.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWNvcmR0cmFuc2Zvcm1lci9OdWxsVmFsdWVUcmFuc2Zvcm1lci5qYXZh) | `90.00% <78.57%> (-10.00%)` | :arrow_down: |\n| [...ig/table/SegmentsValidationAndRetentionConfig.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1NlZ21lbnRzVmFsaWRhdGlvbkFuZFJldGVudGlvbkNvbmZpZy5qYXZh) | `95.83% <100.00%> (+0.27%)` | :arrow_up: |\n| [...he/pinot/spi/utils/builder/TableConfigBuilder.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvYnVpbGRlci9UYWJsZUNvbmZpZ0J1aWxkZXIuamF2YQ==) | `81.25% <100.00%> (+0.39%)` | :arrow_up: |\n| [...a/manager/realtime/RealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVTZWdtZW50RGF0YU1hbmFnZXIuamF2YQ==) | `50.00% <0.00%> (-25.00%)` | :arrow_down: |\n| [.../helix/core/minion/MinionInstancesCleanupTask.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9NaW5pb25JbnN0YW5jZXNDbGVhbnVwVGFzay5qYXZh) | `60.86% <0.00%> (-8.70%)` | :arrow_down: |\n| [.../startree/v2/builder/OffHeapSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL09mZkhlYXBTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `83.23% <0.00%> (-8.39%)` | :arrow_down: |\n| [...inot/core/util/SegmentCompletionProtocolUtils.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1NlZ21lbnRDb21wbGV0aW9uUHJvdG9jb2xVdGlscy5qYXZh) | `53.84% <0.00%> (-7.70%)` | :arrow_down: |\n| [.../segment/index/readers/OnHeapStringDictionary.java](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L3JlYWRlcnMvT25IZWFwU3RyaW5nRGljdGlvbmFyeS5qYXZh) | `70.00% <0.00%> (-6.67%)` | :arrow_down: |\n| ... and [18 more](https://codecov.io/gh/apache/pinot/pull/7269/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [12e5bcd...22a9a98](https://codecov.io/gh/apache/pinot/pull/7269?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895792554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895837329","html_url":"https://github.com/apache/pinot/issues/7266#issuecomment-895837329","issue_url":"https://api.github.com/repos/apache/pinot/issues/7266","id":895837329,"node_id":"IC_kwDOATCU_c41ZWSR","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T08:30:16Z","updated_at":"2021-08-10T08:30:16Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang I can take this up. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/895837329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896126800","html_url":"https://github.com/apache/pinot/pull/7267#issuecomment-896126800","issue_url":"https://api.github.com/repos/apache/pinot/issues/7267","id":896126800,"node_id":"IC_kwDOATCU_c41ac9Q","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T16:18:34Z","updated_at":"2021-08-10T16:18:34Z","author_association":"CONTRIBUTOR","body":"> Is it possible to make the status checker an interface and have this implemented within LinkedIn Pinot wrapper. We also have seen some needs of customizing health status checks in Kubernetes and might be a good idea to make it pluggable.\r\n\r\nI think that is a useful thing to have. The static staus checker has always been a bit of a pain. \r\n\r\nHowever it not only increases the scope of this PR a lot, it also causes us to change all our internal software to start using the new interface for healthcheck. Can we file a separate issue for that and get it done? thanks.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896126800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896141163","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-896141163","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":896141163,"node_id":"IC_kwDOATCU_c41agdr","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T16:45:04Z","updated_at":"2021-08-10T16:45:04Z","author_association":"CONTRIBUTOR","body":"```\r\n        \"fieldsToUnnest\": [\r\n          \"query\",\r\n          \"kpis\"\r\n        ]\r\n```\r\n\r\nThis is to unnest collections. But `query, kpis` are records in your schema?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896141163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896177574","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-896177574","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":896177574,"node_id":"IC_kwDOATCU_c41apWm","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T17:31:08Z","updated_at":"2021-08-10T17:31:08Z","author_association":"NONE","body":"Yes, see the schema definition of my initial post.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896177574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896178167","html_url":"https://github.com/apache/pinot/issues/7274#issuecomment-896178167","issue_url":"https://api.github.com/repos/apache/pinot/issues/7274","id":896178167,"node_id":"IC_kwDOATCU_c41apf3","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T17:31:57Z","updated_at":"2021-08-10T17:31:57Z","author_association":"CONTRIBUTOR","body":"Please note that this improvement has been a TODO for a long time:\r\nhttps://github.com/apache/pinot/blob/master/pinot-common/src/main/java/org/apache/pinot/common/utils/ServiceStatus.java#L204","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896178167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896179063","html_url":"https://github.com/apache/pinot/issues/7274#issuecomment-896179063","issue_url":"https://api.github.com/repos/apache/pinot/issues/7274","id":896179063,"node_id":"IC_kwDOATCU_c41apt3","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T17:33:09Z","updated_at":"2021-08-10T17:33:09Z","author_association":"CONTRIBUTOR","body":"The 2nd approach is being implemented in #7267 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896179063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896181852","html_url":"https://github.com/apache/pinot/pull/7272#issuecomment-896181852","issue_url":"https://api.github.com/repos/apache/pinot/issues/7272","id":896181852,"node_id":"IC_kwDOATCU_c41aqZc","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T17:37:14Z","updated_at":"2021-08-10T17:37:14Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7272](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (74f6e39) into [master](https://codecov.io/gh/apache/pinot/commit/e4d391c47b5aabe7e254b71dbd6c172c9dc5098b?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e4d391c) will **increase** coverage by `4.43%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7272/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7272      +/-   ##\n============================================\n+ Coverage     64.50%   68.94%   +4.43%     \n+ Complexity     3269     3173      -96     \n============================================\n  Files          1462     1110     -352     \n  Lines         72337    52322   -20015     \n  Branches      10538     7810    -2728     \n============================================\n- Hits          46661    36072   -10589     \n+ Misses        22331    13678    -8653     \n+ Partials       3345     2572     -773     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests1 | `68.94% <ø> (-0.01%)` | :arrow_down: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../startree/v2/builder/OffHeapSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL09mZkhlYXBTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `83.23% <0.00%> (-4.20%)` | :arrow_down: |\n| [.../impl/dictionary/BaseOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQmFzZU9mZkhlYXBNdXRhYmxlRGljdGlvbmFyeS5qYXZh) | `81.33% <0.00%> (-3.34%)` | :arrow_down: |\n| [.../core/operator/combine/GroupByCombineOperator.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9jb21iaW5lL0dyb3VwQnlDb21iaW5lT3BlcmF0b3IuamF2YQ==) | `75.40% <0.00%> (-1.64%)` | :arrow_down: |\n| [...er/api/resources/PinotInstanceRestletResource.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90SW5zdGFuY2VSZXN0bGV0UmVzb3VyY2UuamF2YQ==) | | |\n| [...pinot/controller/util/CompletionServiceHelper.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci91dGlsL0NvbXBsZXRpb25TZXJ2aWNlSGVscGVyLmphdmE=) | | |\n| [...org/apache/pinot/broker/api/RequestStatistics.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL1JlcXVlc3RTdGF0aXN0aWNzLmphdmE=) | | |\n| [.../org/apache/pinot/client/SimpleBrokerSelector.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1NpbXBsZUJyb2tlclNlbGVjdG9yLmphdmE=) | | |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | | |\n| [...in/stream/kafka20/KafkaStreamMetadataProvider.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1zdHJlYW0taW5nZXN0aW9uL3Bpbm90LWthZmthLTIuMC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvcGx1Z2luL3N0cmVhbS9rYWZrYTIwL0thZmthU3RyZWFtTWV0YWRhdGFQcm92aWRlci5qYXZh) | | |\n| [...batch/standalone/SegmentMetadataPushJobRunner.java](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1iYXRjaC1pbmdlc3Rpb24vcGlub3QtYmF0Y2gtaW5nZXN0aW9uLXN0YW5kYWxvbmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9pbmdlc3Rpb24vYmF0Y2gvc3RhbmRhbG9uZS9TZWdtZW50TWV0YWRhdGFQdXNoSm9iUnVubmVyLmphdmE=) | | |\n| ... and [348 more](https://codecov.io/gh/apache/pinot/pull/7272/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [e4d391c...74f6e39](https://codecov.io/gh/apache/pinot/pull/7272?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896181852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896209391","html_url":"https://github.com/apache/pinot/issues/7275#issuecomment-896209391","issue_url":"https://api.github.com/repos/apache/pinot/issues/7275","id":896209391,"node_id":"IC_kwDOATCU_c41axHv","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T18:15:32Z","updated_at":"2021-08-10T18:15:32Z","author_association":"CONTRIBUTOR","body":"Can you add some more specific requirements? Are you looking for a no downtime move?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896209391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896311665","html_url":"https://github.com/apache/pinot/issues/7271#issuecomment-896311665","issue_url":"https://api.github.com/repos/apache/pinot/issues/7271","id":896311665,"node_id":"IC_kwDOATCU_c41bKFx","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T20:57:51Z","updated_at":"2021-08-10T20:57:51Z","author_association":"CONTRIBUTOR","body":"This reflection is introduced in https://github.com/apache/pinot/pull/5440/files and  we had similar issue in https://github.com/apache/pinot/pull/5531.\r\n\r\nCan we try to update the reflection lib to 0.9.9 ? @KKcorps ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896311665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896313268","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-896313268","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":896313268,"node_id":"IC_kwDOATCU_c41bKe0","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T21:00:45Z","updated_at":"2021-08-10T21:00:45Z","author_association":"CONTRIBUTOR","body":"@HJK181 Without the complex type support, you may transform other fields similar to how `timestamp` is transformed: either using `jsonPathLong` and `jsonPathString` or using groovy function","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896313268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896314043","html_url":"https://github.com/apache/pinot/issues/7271#issuecomment-896314043","issue_url":"https://api.github.com/repos/apache/pinot/issues/7271","id":896314043,"node_id":"IC_kwDOATCU_c41bKq7","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T21:02:00Z","updated_at":"2021-08-10T21:02:00Z","author_association":"CONTRIBUTOR","body":"Opened a PR:  https://github.com/apache/pinot/pull/7277 for testing ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896314043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896379151","html_url":"https://github.com/apache/pinot/issues/7280#issuecomment-896379151","issue_url":"https://api.github.com/repos/apache/pinot/issues/7280","id":896379151,"node_id":"IC_kwDOATCU_c41bakP","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T23:30:21Z","updated_at":"2021-08-10T23:30:21Z","author_association":"CONTRIBUTOR","body":"Another way to solve the same usecase, is an API to force commit (as suggested by @Jackie-Jiang )","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896379151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896388957","html_url":"https://github.com/apache/pinot/issues/7280#issuecomment-896388957","issue_url":"https://api.github.com/repos/apache/pinot/issues/7280","id":896388957,"node_id":"IC_kwDOATCU_c41bc9d","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T23:55:31Z","updated_at":"2021-08-10T23:55:31Z","author_association":"CONTRIBUTOR","body":"If force commit will do, then we should do that. See Issue #6302 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896388957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896389313","html_url":"https://github.com/apache/pinot/pull/7277#issuecomment-896389313","issue_url":"https://api.github.com/repos/apache/pinot/issues/7277","id":896389313,"node_id":"IC_kwDOATCU_c41bdDB","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T23:56:32Z","updated_at":"2021-08-11T00:08:15Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7277](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e60be06) into [master](https://codecov.io/gh/apache/pinot/commit/c2637d139dd5ba79682b4244cde316dacb0852ee?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c2637d1) will **decrease** coverage by `0.90%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7277/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7277      +/-   ##\n============================================\n- Coverage     71.29%   70.39%   -0.91%     \n- Complexity     3277     3359      +82     \n============================================\n  Files          1509     1509              \n  Lines         74271    74292      +21     \n  Branches      10744    10747       +3     \n============================================\n- Hits          52952    52295     -657     \n- Misses        17710    18382     +672     \n- Partials       3609     3615       +6     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.03% <ø> (+0.08%)` | :arrow_up: |\n| integration2 | `?` | |\n| unittests1 | `68.97% <ø> (+0.02%)` | :arrow_up: |\n| unittests2 | `14.63% <ø> (-0.01%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...pache/pinot/common/utils/grpc/GrpcQueryClient.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvZ3JwYy9HcnBjUXVlcnlDbGllbnQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ore/operator/streaming/StreamingResponseUtils.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9zdHJlYW1pbmcvU3RyZWFtaW5nUmVzcG9uc2VVdGlscy5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ager/realtime/PeerSchemeSplitSegmentCommitter.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUGVlclNjaGVtZVNwbGl0U2VnbWVudENvbW1pdHRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ator/streaming/StreamingSelectionOnlyOperator.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9zdHJlYW1pbmcvU3RyZWFtaW5nU2VsZWN0aW9uT25seU9wZXJhdG9yLmphdmE=) | `0.00% <0.00%> (-92.31%)` | :arrow_down: |\n| [...he/pinot/core/plan/StreamingSelectionPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9wbGFuL1N0cmVhbWluZ1NlbGVjdGlvblBsYW5Ob2RlLmphdmE=) | `0.00% <0.00%> (-90.00%)` | :arrow_down: |\n| [...ller/api/access/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvYWNjZXNzL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (-80.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/core/auth/BasicAuthUtils.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9hdXRoL0Jhc2ljQXV0aFV0aWxzLmphdmE=) | `0.00% <0.00%> (-77.28%)` | :arrow_down: |\n| [...he/pinot/common/utils/grpc/GrpcRequestBuilder.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvZ3JwYy9HcnBjUmVxdWVzdEJ1aWxkZXIuamF2YQ==) | `0.00% <0.00%> (-72.73%)` | :arrow_down: |\n| [...org/apache/pinot/core/auth/BasicAuthPrincipal.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9hdXRoL0Jhc2ljQXV0aFByaW5jaXBhbC5qYXZh) | `0.00% <0.00%> (-70.00%)` | :arrow_down: |\n| [...main/java/org/apache/pinot/core/util/TlsUtils.java](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1Rsc1V0aWxzLmphdmE=) | `4.34% <0.00%> (-68.12%)` | :arrow_down: |\n| ... and [77 more](https://codecov.io/gh/apache/pinot/pull/7277/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c2637d1...e60be06](https://codecov.io/gh/apache/pinot/pull/7277?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896389313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896389562","html_url":"https://github.com/apache/pinot/pull/7279#issuecomment-896389562","issue_url":"https://api.github.com/repos/apache/pinot/issues/7279","id":896389562,"node_id":"IC_kwDOATCU_c41bdG6","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-10T23:57:18Z","updated_at":"2021-08-10T23:57:18Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7279](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (44e7e17) into [master](https://codecov.io/gh/apache/pinot/commit/6ef7f9423518cd46052c682dd37b62b6d860d655?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6ef7f94) will **increase** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7279/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7279      +/-   ##\n============================================\n+ Coverage     68.95%   68.99%   +0.04%     \n+ Complexity     3185     3183       -2     \n============================================\n  Files          1111     1111              \n  Lines         52346    52346              \n  Branches       7812     7812              \n============================================\n+ Hits          36097    36118      +21     \n+ Misses        13672    13655      -17     \n+ Partials       2577     2573       -4     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests1 | `68.99% <ø> (+0.04%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../startree/v2/builder/OffHeapSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL09mZkhlYXBTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `87.42% <0.00%> (-4.20%)` | :arrow_down: |\n| [...e/impl/forward/FixedByteMVMutableForwardIndex.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2ZvcndhcmQvRml4ZWRCeXRlTVZNdXRhYmxlRm9yd2FyZEluZGV4LmphdmE=) | `90.90% <0.00%> (-3.04%)` | :arrow_down: |\n| [...e/pinot/segment/local/io/util/PinotDataBitSet.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pby91dGlsL1Bpbm90RGF0YUJpdFNldC5qYXZh) | `96.03% <0.00%> (-1.59%)` | :arrow_down: |\n| [...main/java/org/apache/pinot/spi/data/FieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9GaWVsZFNwZWMuamF2YQ==) | `80.85% <0.00%> (-0.54%)` | :arrow_down: |\n| [...cal/startree/v2/builder/BaseSingleTreeBuilder.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9idWlsZGVyL0Jhc2VTaW5nbGVUcmVlQnVpbGRlci5qYXZh) | `89.23% <0.00%> (+0.89%)` | :arrow_up: |\n| [.../java/org/apache/pinot/spi/data/TimeFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9UaW1lRmllbGRTcGVjLmphdmE=) | `90.90% <0.00%> (+2.27%)` | :arrow_up: |\n| [...ot/segment/local/startree/OffHeapStarTreeNode.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS9PZmZIZWFwU3RhclRyZWVOb2RlLmphdmE=) | `77.77% <0.00%> (+5.55%)` | :arrow_up: |\n| [...pache/pinot/core/util/SortedRangeIntersection.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS91dGlsL1NvcnRlZFJhbmdlSW50ZXJzZWN0aW9uLmphdmE=) | `88.23% <0.00%> (+7.35%)` | :arrow_up: |\n| [...nt/local/startree/v2/store/StarTreeDataSource.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9zdG9yZS9TdGFyVHJlZURhdGFTb3VyY2UuamF2YQ==) | `53.33% <0.00%> (+13.33%)` | :arrow_up: |\n| [...core/startree/operator/StarTreeFilterOperator.java](https://codecov.io/gh/apache/pinot/pull/7279/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9vcGVyYXRvci9TdGFyVHJlZUZpbHRlck9wZXJhdG9yLmphdmE=) | `83.68% <0.00%> (+15.60%)` | :arrow_up: |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [6ef7f94...44e7e17](https://codecov.io/gh/apache/pinot/pull/7279?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896389562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896393436","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-896393436","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":896393436,"node_id":"IC_kwDOATCU_c41beDc","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T00:06:41Z","updated_at":"2021-08-11T00:06:41Z","author_association":"CONTRIBUTOR","body":"@yupeng9  and I discussed offline, and here is the summary for Upsert support:\r\n\r\nFor upsert tables, we need an occasional refill of older data. During refill, the segments change data, and if ingestion is also going on, then it messes up the indexing since other (uploaded realtime) segments are being modified. A few minutes of pause where queries are still being served (but potentially served with stale data) is acceptable. The requirement is to pause all partitions, not one at a time.\r\n\r\nHaving things pause while retaining a CONSUMING segment with data in it is hard. Pausing is easy, but in case a server gets restarted, it is hard to remember the exact offset when things were paused, and consume up to that.\r\n\r\nInstead, I suggest we support two controller API primitives\r\n- Complete current consuming segments NOW, and optionally create a new segment. This may address Issue #7280 (basically, force a commit now). \r\n- Restart consumption by creating new consuming segments.\r\n- Support the above two for a single partition or all partitions (we can start with all I think).\r\n\r\nThings to think about and handle correctly (just listing a few)\r\n- Make sure the server initiates ONE call to complete segments. The pause operation needs to be invoked on the `PartitionConsumer` object. Not sure what happens if an ONLINE transition already comes in. A bad race condition can happen in such a case.\r\n- Make sure the periodic task does not restart a paused consumption.\r\n- Decide if paused state needs to be marked in zk (in idealstate?) Handle server restart during paused state.\r\n\r\nI am sure people can add more.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896393436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896399326","html_url":"https://github.com/apache/pinot/issues/7271#issuecomment-896399326","issue_url":"https://api.github.com/repos/apache/pinot/issues/7271","id":896399326,"node_id":"IC_kwDOATCU_c41bffe","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T00:19:51Z","updated_at":"2021-08-11T00:19:51Z","author_association":"CONTRIBUTOR","body":"Seem like there is no caught-able issue here when downgrading the reflection lib?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896399326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896426503","html_url":"https://github.com/apache/pinot/pull/7237#issuecomment-896426503","issue_url":"https://api.github.com/repos/apache/pinot/issues/7237","id":896426503,"node_id":"IC_kwDOATCU_c41bmIH","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T01:28:38Z","updated_at":"2021-08-11T01:28:38Z","author_association":"CONTRIBUTOR","body":"I dont see a way around it to solve the edge case. I think it is fine to read 1 line to verify the number of fields in the row, and then validate the header.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896426503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896431312","html_url":"https://github.com/apache/pinot/issues/7271#issuecomment-896431312","issue_url":"https://api.github.com/repos/apache/pinot/issues/7271","id":896431312,"node_id":"IC_kwDOATCU_c41bnTQ","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T01:35:05Z","updated_at":"2021-08-11T01:35:05Z","author_association":"CONTRIBUTOR","body":"Merged the change, can you give it a try on your side?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896431312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896445751","html_url":"https://github.com/apache/pinot/pull/7283#issuecomment-896445751","issue_url":"https://api.github.com/repos/apache/pinot/issues/7283","id":896445751,"node_id":"IC_kwDOATCU_c41bq03","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T02:13:12Z","updated_at":"2021-08-11T02:13:12Z","author_association":"CONTRIBUTOR","body":"@snleee @Jackie-Jiang ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896445751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896455835","html_url":"https://github.com/apache/pinot/pull/7282#issuecomment-896455835","issue_url":"https://api.github.com/repos/apache/pinot/issues/7282","id":896455835,"node_id":"IC_kwDOATCU_c41btSb","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T02:41:55Z","updated_at":"2021-08-26T01:11:24Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7282](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (03fbdd4) into [master](https://codecov.io/gh/apache/pinot/commit/c5e8ddfd21c8fe5ed8195cc31334fde066e91ee1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c5e8ddf) will **decrease** coverage by `6.97%`.\n> The diff coverage is `88.46%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7282/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7282      +/-   ##\n============================================\n- Coverage     71.77%   64.79%   -6.98%     \n+ Complexity     3306     3300       -6     \n============================================\n  Files          1515     1469      -46     \n  Lines         74979    73073    -1906     \n  Branches      10904    10701     -203     \n============================================\n- Hits          53813    47347    -6466     \n- Misses        17527    22349    +4822     \n+ Partials       3639     3377     -262     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `69.48% <ø> (-0.06%)` | :arrow_down: |\n| unittests2 | `14.47% <88.46%> (+0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ller/recommender/rules/io/configs/IndexConfig.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pby9jb25maWdzL0luZGV4Q29uZmlnLmphdmE=) | `92.10% <66.66%> (-5.27%)` | :arrow_down: |\n| [...commender/rules/impl/RealtimeProvisioningRule.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL1JlYWx0aW1lUHJvdmlzaW9uaW5nUnVsZS5qYXZh) | `92.30% <88.88%> (-1.35%)` | :arrow_down: |\n| [...mmender/realtime/provisioning/MemoryEstimator.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9yZWFsdGltZS9wcm92aXNpb25pbmcvTWVtb3J5RXN0aW1hdG9yLmphdmE=) | `87.09% <100.00%> (+1.44%)` | :arrow_up: |\n| [...mmender/rules/impl/VariedLengthDictionaryRule.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9yZWNvbW1lbmRlci9ydWxlcy9pbXBsL1ZhcmllZExlbmd0aERpY3Rpb25hcnlSdWxlLmphdmE=) | `100.00% <100.00%> (ø)` | |\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pache/pinot/common/utils/grpc/GrpcQueryClient.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvZ3JwYy9HcnBjUXVlcnlDbGllbnQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [365 more](https://codecov.io/gh/apache/pinot/pull/7282/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c5e8ddf...03fbdd4](https://codecov.io/gh/apache/pinot/pull/7282?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896455835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896456488","html_url":"https://github.com/apache/pinot/pull/7283#issuecomment-896456488","issue_url":"https://api.github.com/repos/apache/pinot/issues/7283","id":896456488,"node_id":"IC_kwDOATCU_c41btco","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T02:44:00Z","updated_at":"2021-08-11T03:15:25Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7283](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (4d4ef8a) into [master](https://codecov.io/gh/apache/pinot/commit/385b3cf47c4995e250d18c0d8c0d601955722ffc?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (385b3cf) will **decrease** coverage by `40.46%`.\n> The diff coverage is `75.00%`.\n\n> :exclamation: Current head 4d4ef8a differs from pull request most recent head 42fd30d. Consider uploading reports for the commit 42fd30d to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7283/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7283       +/-   ##\n=============================================\n- Coverage     71.34%   30.88%   -40.47%     \n+ Complexity     3277       86     -3191     \n=============================================\n  Files          1505     1495       -10     \n  Lines         74224    73884      -340     \n  Branches      10733    10697       -36     \n=============================================\n- Hits          52958    22821    -30137     \n- Misses        17661    49048    +31387     \n+ Partials       3605     2015     -1590     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.88% <75.00%> (+0.74%)` | :arrow_up: |\n| integration2 | `?` | |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...controller/helix/core/minion/PinotTaskManager.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9QaW5vdFRhc2tNYW5hZ2VyLmphdmE=) | `28.14% <ø> (+0.37%)` | :arrow_up: |\n| [...apache/pinot/controller/api/upload/ZKOperator.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvdXBsb2FkL1pLT3BlcmF0b3IuamF2YQ==) | `71.71% <72.72%> (-3.57%)` | :arrow_down: |\n| [.../tasks/BaseMultipleSegmentsConversionExecutor.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvQmFzZU11bHRpcGxlU2VnbWVudHNDb252ZXJzaW9uRXhlY3V0b3IuamF2YQ==) | `87.35% <100.00%> (+11.49%)` | :arrow_up: |\n| [...c/main/java/org/apache/pinot/common/tier/Tier.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ava/org/apache/pinot/spi/data/MetricFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9NZXRyaWNGaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...va/org/apache/pinot/spi/utils/BigDecimalUtils.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvdXRpbHMvQmlnRGVjaW1hbFV0aWxzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...java/org/apache/pinot/common/tier/TierFactory.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdGllci9UaWVyRmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...a/org/apache/pinot/spi/config/table/TableType.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvY29uZmlnL3RhYmxlL1RhYmxlVHlwZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/DimensionFieldSpec.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9EaW1lbnNpb25GaWVsZFNwZWMuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../org/apache/pinot/spi/data/readers/FileFormat.java](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvZGF0YS9yZWFkZXJzL0ZpbGVGb3JtYXQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [1038 more](https://codecov.io/gh/apache/pinot/pull/7283/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [385b3cf...42fd30d](https://codecov.io/gh/apache/pinot/pull/7283?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896456488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896470893","html_url":"https://github.com/apache/pinot/pull/7210#issuecomment-896470893","issue_url":"https://api.github.com/repos/apache/pinot/issues/7210","id":896470893,"node_id":"IC_kwDOATCU_c41bw9t","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T03:25:22Z","updated_at":"2021-08-11T03:25:22Z","author_association":"CONTRIBUTOR","body":"Update - We had met and discussed that directly doing phase 2 work outlined in the design doc is better. So we are reworking the PR (most likely will send new PR and close this).\r\n\r\nLet me see if I can open the current document for comment access to all. If no luck, I will copy the document to a new one and share from my gmail account.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896470893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896472380","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-896472380","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":896472380,"node_id":"IC_kwDOATCU_c41bxU8","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T03:30:29Z","updated_at":"2021-08-11T03:30:29Z","author_association":"CONTRIBUTOR","body":"Thanks for writing down the summary!\r\n\r\nA question on if we need to complete the consuming segment upon pause. Is it possible to simply pause the consumption? If the server restarts, then the server will lose the offset info, and restart from the previous checkpoint which is the same as the current consuming segment behavior. This could avoid the segment sealing (and small segment file) if the pause is not too long.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896472380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896472466","html_url":"https://github.com/apache/pinot/pull/7282#issuecomment-896472466","issue_url":"https://api.github.com/repos/apache/pinot/issues/7282","id":896472466,"node_id":"IC_kwDOATCU_c41bxWS","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T03:30:48Z","updated_at":"2021-08-11T03:31:01Z","author_association":"CONTRIBUTOR","body":"Yet to review fully. Before I forget, can you change the name of `_variedLengthDictionaryColumns` to `_varLengthDictionaryColumns` in the output format. It has caused quite a bit of confusion recently (came up today as well) when customers have tried to apply the config and copy the wrong name. \r\nhttps://github.com/apache/pinot/blob/master/pinot-controller/src/main/java/org/apache/pinot/controller/recommender/rules/io/configs/IndexConfig.java#L39","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896472466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896474846","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-896474846","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":896474846,"node_id":"IC_kwDOATCU_c41bx7e","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T03:39:19Z","updated_at":"2021-08-11T03:39:19Z","author_association":"CONTRIBUTOR","body":"I suggest to provide an option of either discarding all the consuming segments or completing all of them. I feel that handling server restarts when we are consumed half way and paused will be hard. \r\n\r\nTake the case when the server starts to consume a segment at offset 100 and there are two replicas A and B. After sometime, a \"pause\" command is entered. Replica A is at 150, and Replica B is at 160, and they stop consuming, with the rows still in memory.\r\n\r\nNow, A gets restarted. Ingestion has continued, so the current offset available in stream is 200. \r\n\r\nShould A just serve data until 100 (i.e. data that has been committed) whereas B will serve data until 150?\r\nShould A consume up to 150 and stop?\r\nShould A consume up to 160 and stop? What if there are three replicas?\r\n\r\nIt gets harder to maintain state.\r\n\r\nWe can provide the operator an option to either complete the current consuming segment or discard it. Either way, we \"pause\" at a point where everything is committed.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896474846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896512330","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-896512330","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":896512330,"node_id":"IC_kwDOATCU_c41b7FK","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T05:29:28Z","updated_at":"2021-08-11T05:29:28Z","author_association":"NONE","body":"@Jackie-Jiang Do you have an idea why this is necessary? When I look at your example data, no transformation should be needed, just name fields dot-separated, e.g. query.userQuery as I did. Here is a small snippet of what `avro cat` prints for my data:\r\n```\r\n{\r\n  \"query\": {\r\n    \"userQuery\": \"picknick decke\",\r\n    \"masterQuery\": null,\r\n    \"mappingTime\": -1\r\n  },\r\n  \"kpis\": {\r\n    \"clicks\": 3,\r\n    \"checkout\": 0,\r\n    \"cart\": 10\r\n  }\r\n}\r\n{\r\n  \"query\": {\r\n    \"userQuery\": \"100243020\",\r\n    \"masterQuery\": null,\r\n    \"mappingTime\": -1\r\n  },\r\n  \"kpis\": {\r\n    \"clicks\": 1,\r\n    \"checkout\": 0,\r\n    \"cart\": 0\r\n  }\r\n}\r\n{\r\n  \"query\": {\r\n    \"userQuery\": \"foo\",\r\n    \"masterQuery\": bar,\r\n    \"mappingTime\": 1617418890\r\n  },\r\n  \"kpis\": {\r\n    \"clicks\": 10,\r\n    \"checkout\": 1,\r\n    \"cart\": 2\r\n  }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896512330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896515115","html_url":"https://github.com/apache/pinot/issues/7262#issuecomment-896515115","issue_url":"https://api.github.com/repos/apache/pinot/issues/7262","id":896515115,"node_id":"IC_kwDOATCU_c41b7wr","user":{"login":"HJK181","id":11541497,"node_id":"MDQ6VXNlcjExNTQxNDk3","avatar_url":"https://avatars.githubusercontent.com/u/11541497?v=4","gravatar_id":"","url":"https://api.github.com/users/HJK181","html_url":"https://github.com/HJK181","followers_url":"https://api.github.com/users/HJK181/followers","following_url":"https://api.github.com/users/HJK181/following{/other_user}","gists_url":"https://api.github.com/users/HJK181/gists{/gist_id}","starred_url":"https://api.github.com/users/HJK181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HJK181/subscriptions","organizations_url":"https://api.github.com/users/HJK181/orgs","repos_url":"https://api.github.com/users/HJK181/repos","events_url":"https://api.github.com/users/HJK181/events{/privacy}","received_events_url":"https://api.github.com/users/HJK181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T05:36:52Z","updated_at":"2021-08-11T05:36:52Z","author_association":"NONE","body":"@yupeng9 Indeed `kpis` is not a record, it's a map. Do I need complexType config for a map?\r\nActually, we have two avro files in our project referencing each other:\r\nquery.avsc\r\n```\r\n{\r\n    \"namespace\": \"foo.bar.v1\",\r\n    \"type\": \"record\",\r\n    \"name\": \"MappedQuery\",\r\n    \"fields\": [\r\n        {\"name\": \"userQuery\", \"type\": \"string\"},\r\n        {\"name\": \"masterQuery\",  \"type\": [ \"null\", \"string\"]},\r\n        {\"name\": \"mappingTime\", \"type\": \"long\", \"order\": \"ignore\"}\r\n    ]\r\n}\r\n```\r\nkpi.avsc\r\n```\r\n{\r\n    \"namespace\": \"foo.bar.v1\",\r\n    \"name\": \"queryKpis\",\r\n    \"type\": \"array\",\r\n    \"items\": {\r\n        \"namespace\": \"foo.bar.v1\",\r\n        \"name\": \"QueryWithKpis\",\r\n        \"type\": \"record\",\r\n        \"fields\": [\r\n            {\r\n                \"name\": \"query\",\r\n                \"type\": \"foo.bar.MappedQuery\"\r\n            },\r\n            {\r\n                \"name\": \"kpis\",\r\n                \"type\": {\r\n                    \"type\": \"map\",\r\n                    \"values\": \"double\"\r\n                }\r\n            }\r\n        ]\r\n    }\r\n}\r\n```\r\nThe avro schema of my initial post is the result of calling `avro cat --print-schema` for the sample data above.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896515115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896625486","html_url":"https://github.com/apache/pinot/issues/5951#issuecomment-896625486","issue_url":"https://api.github.com/repos/apache/pinot/issues/5951","id":896625486,"node_id":"IC_kwDOATCU_c41cWtO","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T08:40:04Z","updated_at":"2021-08-11T08:40:04Z","author_association":"CONTRIBUTOR","body":"Any update on this?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896625486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896625880","html_url":"https://github.com/apache/pinot/issues/7275#issuecomment-896625880","issue_url":"https://api.github.com/repos/apache/pinot/issues/7275","id":896625880,"node_id":"IC_kwDOATCU_c41cWzY","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T08:40:39Z","updated_at":"2021-08-11T08:40:39Z","author_association":"CONTRIBUTOR","body":"I think we can leverage https://github.com/apache/pinot/issues/5951 to simplify this logic.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896625880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896639177","html_url":"https://github.com/apache/pinot/pull/7214#issuecomment-896639177","issue_url":"https://api.github.com/repos/apache/pinot/issues/7214","id":896639177,"node_id":"IC_kwDOATCU_c41caDJ","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T09:00:58Z","updated_at":"2021-08-11T09:00:58Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang Please see and let me know your comments","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896639177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896938700","html_url":"https://github.com/apache/pinot/issues/7264#issuecomment-896938700","issue_url":"https://api.github.com/repos/apache/pinot/issues/7264","id":896938700,"node_id":"IC_kwDOATCU_c41djLM","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T15:45:49Z","updated_at":"2021-08-11T15:45:49Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nI also suggest we change the default behavior to disallow partial response by default, and provide the flag to turn it on.\r\nIn many use cases, data quality and correctness is a serious issue. So it's ok to fail the query but not so to return a partial result silently.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896938700/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896943273","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-896943273","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":896943273,"node_id":"IC_kwDOATCU_c41dkSp","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T15:51:54Z","updated_at":"2021-08-11T15:51:54Z","author_association":"CONTRIBUTOR","body":"Perhaps I didn't fully see the complexity. \r\nI feel when the consumption is paused, then it's paused regardless of the offset. If a server restarts, the offset will rewind, but it will not consume.\r\n\r\nI think the same issue applies to normal consumption? You still have this offset mismatch across servers, when a server restarts?\r\n\r\nOr in other words, I hope the pause can be a simple instruction to the consumers, but not related to the state transition.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896943273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896976125","html_url":"https://github.com/apache/pinot/issues/7271#issuecomment-896976125","issue_url":"https://api.github.com/repos/apache/pinot/issues/7271","id":896976125,"node_id":"IC_kwDOATCU_c41dsT9","user":{"login":"chenboat","id":2549137,"node_id":"MDQ6VXNlcjI1NDkxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2549137?v=4","gravatar_id":"","url":"https://api.github.com/users/chenboat","html_url":"https://github.com/chenboat","followers_url":"https://api.github.com/users/chenboat/followers","following_url":"https://api.github.com/users/chenboat/following{/other_user}","gists_url":"https://api.github.com/users/chenboat/gists{/gist_id}","starred_url":"https://api.github.com/users/chenboat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenboat/subscriptions","organizations_url":"https://api.github.com/users/chenboat/orgs","repos_url":"https://api.github.com/users/chenboat/repos","events_url":"https://api.github.com/users/chenboat/events{/privacy}","received_events_url":"https://api.github.com/users/chenboat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T16:34:49Z","updated_at":"2021-08-11T16:34:49Z","author_association":"CONTRIBUTOR","body":"Thanks @xiangfu0. I will test.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/896976125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897006542","html_url":"https://github.com/apache/pinot/pull/7243#issuecomment-897006542","issue_url":"https://api.github.com/repos/apache/pinot/issues/7243","id":897006542,"node_id":"IC_kwDOATCU_c41dzvO","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T17:18:49Z","updated_at":"2021-08-11T17:18:49Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang @jackjlli I have updated the code to fix the following:\r\n1. As Jackie pointed out, there are cases when externalView is not updated yet but the SegmentSelector has picked up. We have very good test coverage and it help me found out all those failed cases.\r\n2. To support the above cases, introduced `SelectedSegment` class with sorted Sha256 hash so we can quickly compare whether the Set of segments are a match. It helps our cases, and should benefit most Offline table or real time table are not so dynamically updated.\r\n\r\nAfter the optimization, we have either 8x performance improvements, or 2x if the table is dynamic. The 2x improvement comes from avoiding the frequent `MurmurHash.getPartition('a7df')` call.\r\n\r\nPlease help review again, thanks!\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897006542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897015742","html_url":"https://github.com/apache/pinot/pull/7174#issuecomment-897015742","issue_url":"https://api.github.com/repos/apache/pinot/issues/7174","id":897015742,"node_id":"IC_kwDOATCU_c41d1--","user":{"login":"amrishlal","id":4550395,"node_id":"MDQ6VXNlcjQ1NTAzOTU=","avatar_url":"https://avatars.githubusercontent.com/u/4550395?v=4","gravatar_id":"","url":"https://api.github.com/users/amrishlal","html_url":"https://github.com/amrishlal","followers_url":"https://api.github.com/users/amrishlal/followers","following_url":"https://api.github.com/users/amrishlal/following{/other_user}","gists_url":"https://api.github.com/users/amrishlal/gists{/gist_id}","starred_url":"https://api.github.com/users/amrishlal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/amrishlal/subscriptions","organizations_url":"https://api.github.com/users/amrishlal/orgs","repos_url":"https://api.github.com/users/amrishlal/repos","events_url":"https://api.github.com/users/amrishlal/events{/privacy}","received_events_url":"https://api.github.com/users/amrishlal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T17:32:10Z","updated_at":"2021-08-11T17:32:10Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu @jackjlli Based on our offline discussion, I modified code to use a `Properties` object to store table name and setting it under lock to ensure that there are no thread synchronization issues if we end up in situation where multiple threads are running the same task. Also confirming that task will block only if another thread is running the same task at the same time, but different tasks won't block each other). Also, now we only specify one table in the API along with its type (OFFLINE|ONLINE) since this appears to be the pattern that is being used for other API calls too.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897015742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897055065","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897055065","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897055065,"node_id":"IC_kwDOATCU_c41d_lZ","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T18:30:28Z","updated_at":"2021-08-11T18:30:28Z","author_association":"CONTRIBUTOR","body":"Trying to understand the requirement here. The the result of the mode same as `select col, count(*) as cnt group by col order by cnt desc/asc limit 1`?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897055065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897062223","html_url":"https://github.com/apache/pinot/pull/7286#issuecomment-897062223","issue_url":"https://api.github.com/repos/apache/pinot/issues/7286","id":897062223,"node_id":"IC_kwDOATCU_c41eBVP","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T18:41:48Z","updated_at":"2021-08-31T22:45:02Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7286](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (263882a) into [master](https://codecov.io/gh/apache/pinot/commit/c62a1fb328f1b151fa4a7a4a6ef17875662d6059?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c62a1fb) will **decrease** coverage by `39.47%`.\n> The diff coverage is `22.69%`.\n\n> :exclamation: Current head 263882a differs from pull request most recent head 4ee9b17. Consider uploading reports for the commit 4ee9b17 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7286/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #7286       +/-   ##\n=============================================\n- Coverage     71.65%   32.18%   -39.48%     \n+ Complexity     3311       93     -3218     \n=============================================\n  Files          1515     1508        -7     \n  Lines         75006    74659      -347     \n  Branches      10910    10876       -34     \n=============================================\n- Hits          53749    24026    -29723     \n- Misses        17628    48564    +30936     \n+ Partials       3629     2069     -1560     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `30.34% <21.16%> (-0.07%)` | :arrow_down: |\n| integration2 | `29.10% <22.39%> (-0.01%)` | :arrow_down: |\n| unittests1 | `?` | |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `21.73% <0.00%> (-20.82%)` | :arrow_down: |\n| [.../org/apache/pinot/client/SimpleBrokerSelector.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1NpbXBsZUJyb2tlclNlbGVjdG9yLmphdmE=) | `0.00% <0.00%> (-83.34%)` | :arrow_down: |\n| [...common/exception/SchemaAlreadyExistsException.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZXhjZXB0aW9uL1NjaGVtYUFscmVhZHlFeGlzdHNFeGNlcHRpb24uamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...ller/api/resources/PinotSchemaRestletResource.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9hcGkvcmVzb3VyY2VzL1Bpbm90U2NoZW1hUmVzdGxldFJlc291cmNlLmphdmE=) | `23.93% <0.00%> (-14.81%)` | :arrow_down: |\n| [...re/data/table/UnboundedConcurrentIndexedTable.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL3RhYmxlL1VuYm91bmRlZENvbmN1cnJlbnRJbmRleGVkVGFibGUuamF2YQ==) | `0.00% <0.00%> (-22.73%)` | :arrow_down: |\n| [...perator/combine/GroupByOrderByCombineOperator.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9vcGVyYXRvci9jb21iaW5lL0dyb3VwQnlPcmRlckJ5Q29tYmluZU9wZXJhdG9yLmphdmE=) | `60.49% <0.00%> (-22.23%)` | :arrow_down: |\n| [...indexsegment/immutable/ImmutableSegmentLoader.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9pbmRleHNlZ21lbnQvaW1tdXRhYmxlL0ltbXV0YWJsZVNlZ21lbnRMb2FkZXIuamF2YQ==) | `0.00% <0.00%> (-91.18%)` | :arrow_down: |\n| [...ocal/segment/index/loader/IndexHandlerFactory.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2xvYWRlci9JbmRleEhhbmRsZXJGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...ocal/segment/index/loader/SegmentPreProcessor.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2xvYWRlci9TZWdtZW50UHJlUHJvY2Vzc29yLmphdmE=) | `0.00% <0.00%> (-68.00%)` | :arrow_down: |\n| [...t/index/loader/bloomfilter/BloomFilterHandler.java](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zZWdtZW50L2luZGV4L2xvYWRlci9ibG9vbWZpbHRlci9CbG9vbUZpbHRlckhhbmRsZXIuamF2YQ==) | `0.00% <0.00%> (-17.86%)` | :arrow_down: |\n| ... and [1016 more](https://codecov.io/gh/apache/pinot/pull/7286/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [c62a1fb...4ee9b17](https://codecov.io/gh/apache/pinot/pull/7286?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897062223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897086362","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897086362","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897086362,"node_id":"IC_kwDOATCU_c41eHOa","user":{"login":"mr-agrwal","id":24796847,"node_id":"MDQ6VXNlcjI0Nzk2ODQ3","avatar_url":"https://avatars.githubusercontent.com/u/24796847?v=4","gravatar_id":"","url":"https://api.github.com/users/mr-agrwal","html_url":"https://github.com/mr-agrwal","followers_url":"https://api.github.com/users/mr-agrwal/followers","following_url":"https://api.github.com/users/mr-agrwal/following{/other_user}","gists_url":"https://api.github.com/users/mr-agrwal/gists{/gist_id}","starred_url":"https://api.github.com/users/mr-agrwal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mr-agrwal/subscriptions","organizations_url":"https://api.github.com/users/mr-agrwal/orgs","repos_url":"https://api.github.com/users/mr-agrwal/repos","events_url":"https://api.github.com/users/mr-agrwal/events{/privacy}","received_events_url":"https://api.github.com/users/mr-agrwal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T19:18:46Z","updated_at":"2021-08-11T19:19:20Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang The requirement is something like `select item, mode(price) from sales group by item`. To achieve this we would basically have to do the following for each item.\r\n```\r\nselect price, count(*) as cnt from sales where item = <itemId> group by price order by cnt desc limit 1\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897086362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897106540","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897106540","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897106540,"node_id":"IC_kwDOATCU_c41eMJs","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T19:51:49Z","updated_at":"2021-08-11T19:51:49Z","author_association":"CONTRIBUTOR","body":"I see. So basically it will be very similar to `group by price, item`, but only keep the top `cnt` for each item.\r\n\r\nTo model it as an aggregation function, we need to maintain a `map` from value to count. It will be similar to `distinctcount`, and calculating the 100% accurate result will be a very costly function","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897106540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897110259","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897110259","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897110259,"node_id":"IC_kwDOATCU_c41eNDz","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T19:58:14Z","updated_at":"2021-08-11T19:58:14Z","author_association":"MEMBER","body":"If it's partitioned by item, this can be pushed down to server right","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897110259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897208938","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897208938","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897208938,"node_id":"IC_kwDOATCU_c41elJq","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T22:43:17Z","updated_at":"2021-08-11T22:43:17Z","author_association":"CONTRIBUTOR","body":"@kishoreg For group-by queries (not specific to the `mode`), if the group key is partitioned, then the aggregation can be pushed down to server (directly get the final result instead of sending back the intermediate result).\r\nFor `mode`, if the `price` is partitioned, we can send back only 1 map entry (similar to `segmentPartitionedDistinctCount`)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897208938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897210236","html_url":"https://github.com/apache/pinot/pull/7287#issuecomment-897210236","issue_url":"https://api.github.com/repos/apache/pinot/issues/7287","id":897210236,"node_id":"IC_kwDOATCU_c41eld8","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T22:46:46Z","updated_at":"2021-08-12T03:14:43Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7287](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (73c4a04) into [master](https://codecov.io/gh/apache/pinot/commit/6fb51d2889e5b269e52f483f3cac89f5562a3a62?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6fb51d2) will **decrease** coverage by `0.05%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7287/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7287      +/-   ##\n============================================\n- Coverage     71.33%   71.28%   -0.06%     \n+ Complexity     3363     3358       -5     \n============================================\n  Files          1505     1505              \n  Lines         74224    74224              \n  Branches      10733    10733              \n============================================\n- Hits          52950    52907      -43     \n- Misses        17678    17707      +29     \n- Partials       3596     3610      +14     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.90% <ø> (+0.04%)` | :arrow_up: |\n| integration2 | `29.43% <ø> (+0.19%)` | :arrow_up: |\n| unittests1 | `68.95% <ø> (-0.07%)` | :arrow_down: |\n| unittests2 | `14.59% <ø> (-0.02%)` | :arrow_down: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ntroller/helix/core/minion/TaskMetricsEmitter.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9UYXNrTWV0cmljc0VtaXR0ZXIuamF2YQ==) | `77.27% <0.00%> (-13.64%)` | :arrow_down: |\n| [...nt/local/startree/v2/store/StarTreeDataSource.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9zdG9yZS9TdGFyVHJlZURhdGFTb3VyY2UuamF2YQ==) | `40.00% <0.00%> (-13.34%)` | :arrow_down: |\n| [...r/helix/SegmentOnlineOfflineStateModelFactory.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VydmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zZXJ2ZXIvc3RhcnRlci9oZWxpeC9TZWdtZW50T25saW5lT2ZmbGluZVN0YXRlTW9kZWxGYWN0b3J5LmphdmE=) | `58.87% <0.00%> (-6.55%)` | :arrow_down: |\n| [...core/startree/operator/StarTreeFilterOperator.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9vcGVyYXRvci9TdGFyVHJlZUZpbHRlck9wZXJhdG9yLmphdmE=) | `88.65% <0.00%> (-5.68%)` | :arrow_down: |\n| [...ot/segment/local/startree/OffHeapStarTreeNode.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS9PZmZIZWFwU3RhclRyZWVOb2RlLmphdmE=) | `72.22% <0.00%> (-5.56%)` | :arrow_down: |\n| [...core/query/executor/ServerQueryExecutorV1Impl.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9leGVjdXRvci9TZXJ2ZXJRdWVyeUV4ZWN1dG9yVjFJbXBsLmphdmE=) | `81.42% <0.00%> (-4.92%)` | :arrow_down: |\n| [...lix/core/minion/PinotHelixTaskResourceManager.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9QaW5vdEhlbGl4VGFza1Jlc291cmNlTWFuYWdlci5qYXZh) | `72.00% <0.00%> (-4.67%)` | :arrow_down: |\n| [...pinot/core/query/request/context/TimerContext.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9yZXF1ZXN0L2NvbnRleHQvVGltZXJDb250ZXh0LmphdmE=) | `91.66% <0.00%> (-4.17%)` | :arrow_down: |\n| [.../impl/dictionary/BaseOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQmFzZU9mZkhlYXBNdXRhYmxlRGljdGlvbmFyeS5qYXZh) | `81.33% <0.00%> (-3.34%)` | :arrow_down: |\n| [...lix/core/realtime/PinotRealtimeSegmentManager.java](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL1Bpbm90UmVhbHRpbWVTZWdtZW50TWFuYWdlci5qYXZh) | `80.00% <0.00%> (-3.08%)` | :arrow_down: |\n| ... and [16 more](https://codecov.io/gh/apache/pinot/pull/7287/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [d40e2d3...73c4a04](https://codecov.io/gh/apache/pinot/pull/7287?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897210236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897215150","html_url":"https://github.com/apache/pinot/pull/7285#issuecomment-897215150","issue_url":"https://api.github.com/repos/apache/pinot/issues/7285","id":897215150,"node_id":"IC_kwDOATCU_c41emqu","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T23:00:11Z","updated_at":"2021-08-11T23:00:11Z","author_association":"CONTRIBUTOR","body":"We don't want to use `ColumnDataType.OBJECT` as the final result type. Since `AggregationFunction` requires a fixed final result type, we can use `ColumnDataType.STRING` to cover all types.\r\n\r\nFor the ser/de, to cover all the data types, we might also want to add the support for `Float` and `ByteArray` in addition to `Int`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897215150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897240506","html_url":"https://github.com/apache/pinot/pull/7288#issuecomment-897240506","issue_url":"https://api.github.com/repos/apache/pinot/issues/7288","id":897240506,"node_id":"IC_kwDOATCU_c41es26","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T00:03:59Z","updated_at":"2021-08-12T00:03:59Z","author_association":"CONTRIBUTOR","body":"Good catch, thx for the improvement. LGTM.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897240506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897257174","html_url":"https://github.com/apache/pinot/pull/7288#issuecomment-897257174","issue_url":"https://api.github.com/repos/apache/pinot/issues/7288","id":897257174,"node_id":"IC_kwDOATCU_c41ew7W","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T00:35:16Z","updated_at":"2021-08-12T00:35:16Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7288](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c721aa5) into [master](https://codecov.io/gh/apache/pinot/commit/6fb51d2889e5b269e52f483f3cac89f5562a3a62?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (6fb51d2) will **decrease** coverage by `0.08%`.\n> The diff coverage is `100.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7288/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7288      +/-   ##\n============================================\n- Coverage     71.33%   71.25%   -0.09%     \n+ Complexity     3363     3358       -5     \n============================================\n  Files          1505     1505              \n  Lines         74224    74230       +6     \n  Branches      10733    10734       +1     \n============================================\n- Hits          52950    52890      -60     \n- Misses        17678    17734      +56     \n- Partials       3596     3606      +10     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `29.84% <0.00%> (-0.01%)` | :arrow_down: |\n| integration2 | `29.37% <0.00%> (+0.12%)` | :arrow_up: |\n| unittests1 | `68.95% <ø> (-0.08%)` | :arrow_down: |\n| unittests2 | `14.62% <100.00%> (+<0.01%)` | :arrow_up: |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...n/tasks/merge\\_rollup/MergeRollupTaskGenerator.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtcGx1Z2lucy9waW5vdC1taW5pb24tdGFza3MvcGlub3QtbWluaW9uLWJ1aWx0aW4tdGFza3Mvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3Bpbm90L3BsdWdpbi9taW5pb24vdGFza3MvbWVyZ2Vfcm9sbHVwL01lcmdlUm9sbHVwVGFza0dlbmVyYXRvci5qYXZh) | `92.89% <100.00%> (+0.20%)` | :arrow_up: |\n| [...a/manager/realtime/RealtimeSegmentDataManager.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvUmVhbHRpbWVTZWdtZW50RGF0YU1hbmFnZXIuamF2YQ==) | `50.00% <0.00%> (-25.00%)` | :arrow_down: |\n| [...ntroller/helix/core/minion/TaskMetricsEmitter.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9UYXNrTWV0cmljc0VtaXR0ZXIuamF2YQ==) | `77.27% <0.00%> (-13.64%)` | :arrow_down: |\n| [...nt/local/startree/v2/store/StarTreeDataSource.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS92Mi9zdG9yZS9TdGFyVHJlZURhdGFTb3VyY2UuamF2YQ==) | `40.00% <0.00%> (-13.34%)` | :arrow_down: |\n| [...core/startree/operator/StarTreeFilterOperator.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9vcGVyYXRvci9TdGFyVHJlZUZpbHRlck9wZXJhdG9yLmphdmE=) | `86.52% <0.00%> (-7.81%)` | :arrow_down: |\n| [...ot/segment/local/startree/OffHeapStarTreeNode.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9zdGFydHJlZS9PZmZIZWFwU3RhclRyZWVOb2RlLmphdmE=) | `72.22% <0.00%> (-5.56%)` | :arrow_down: |\n| [...core/query/executor/ServerQueryExecutorV1Impl.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9leGVjdXRvci9TZXJ2ZXJRdWVyeUV4ZWN1dG9yVjFJbXBsLmphdmE=) | `81.42% <0.00%> (-4.92%)` | :arrow_down: |\n| [...lix/core/minion/PinotHelixTaskResourceManager.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL21pbmlvbi9QaW5vdEhlbGl4VGFza1Jlc291cmNlTWFuYWdlci5qYXZh) | `72.00% <0.00%> (-4.67%)` | :arrow_down: |\n| [...pinot/core/query/request/context/TimerContext.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9xdWVyeS9yZXF1ZXN0L2NvbnRleHQvVGltZXJDb250ZXh0LmphdmE=) | `91.66% <0.00%> (-4.17%)` | :arrow_down: |\n| [.../impl/dictionary/BaseOffHeapMutableDictionary.java](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3Qtc2VnbWVudC1sb2NhbC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3Qvc2VnbWVudC9sb2NhbC9yZWFsdGltZS9pbXBsL2RpY3Rpb25hcnkvQmFzZU9mZkhlYXBNdXRhYmxlRGljdGlvbmFyeS5qYXZh) | `81.33% <0.00%> (-3.34%)` | :arrow_down: |\n| ... and [15 more](https://codecov.io/gh/apache/pinot/pull/7288/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [d40e2d3...c721aa5](https://codecov.io/gh/apache/pinot/pull/7288?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897257174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897272921","html_url":"https://github.com/apache/pinot/pull/7289#issuecomment-897272921","issue_url":"https://api.github.com/repos/apache/pinot/issues/7289","id":897272921,"node_id":"IC_kwDOATCU_c41e0xZ","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T01:19:14Z","updated_at":"2021-08-13T17:12:43Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#7289](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cd699cc) into [master](https://codecov.io/gh/apache/pinot/commit/fca88a20e98edf363e9721bf43e0487e9aafd7b6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (fca88a2) will **decrease** coverage by `2.26%`.\n> The diff coverage is `n/a`.\n\n> :exclamation: Current head cd699cc differs from pull request most recent head e405d47. Consider uploading reports for the commit e405d47 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/pinot/pull/7289/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7289      +/-   ##\n============================================\n- Coverage     71.31%   69.04%   -2.27%     \n+ Complexity     3361     3186     -175     \n============================================\n  Files          1503     1109     -394     \n  Lines         73995    52137   -21858     \n  Branches      10709     7790    -2919     \n============================================\n- Hits          52766    35999   -16767     \n+ Misses        17627    13563    -4064     \n+ Partials       3602     2575    -1027     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration1 | `?` | |\n| integration2 | `?` | |\n| unittests1 | `69.04% <ø> (+0.03%)` | :arrow_up: |\n| unittests2 | `?` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...a/org/apache/pinot/common/metrics/MinionMeter.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25NZXRlci5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...g/apache/pinot/common/metrics/ControllerMeter.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Db250cm9sbGVyTWV0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/BrokerQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9Ccm9rZXJRdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../apache/pinot/common/metrics/MinionQueryPhase.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0cmljcy9NaW5pb25RdWVyeVBoYXNlLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...pache/pinot/common/utils/grpc/GrpcQueryClient.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvZ3JwYy9HcnBjUXVlcnlDbGllbnQuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...he/pinot/common/messages/SegmentReloadMessage.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWVzc2FnZXMvU2VnbWVudFJlbG9hZE1lc3NhZ2UuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...not/common/exception/HttpErrorStatusException.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vZXhjZXB0aW9uL0h0dHBFcnJvclN0YXR1c0V4Y2VwdGlvbi5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...t/core/startree/plan/StarTreeDocIdSetPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlRG9jSWRTZXRQbGFuTm9kZS5qYXZh) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...ot/common/restlet/resources/TableMetadataInfo.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vcmVzdGxldC9yZXNvdXJjZXMvVGFibGVNZXRhZGF0YUluZm8uamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [.../core/startree/plan/StarTreeTransformPlanNode.java](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9zdGFydHJlZS9wbGFuL1N0YXJUcmVlVHJhbnNmb3JtUGxhbk5vZGUuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| ... and [590 more](https://codecov.io/gh/apache/pinot/pull/7289/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=footer&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Last update [fca88a2...e405d47](https://codecov.io/gh/apache/pinot/pull/7289?src=pr&el=lastupdated&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897272921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897374684","html_url":"https://github.com/apache/pinot/pull/7282#issuecomment-897374684","issue_url":"https://api.github.com/repos/apache/pinot/issues/7282","id":897374684,"node_id":"IC_kwDOATCU_c41fNnc","user":{"login":"sajjad-moradi","id":8548220,"node_id":"MDQ6VXNlcjg1NDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/8548220?v=4","gravatar_id":"","url":"https://api.github.com/users/sajjad-moradi","html_url":"https://github.com/sajjad-moradi","followers_url":"https://api.github.com/users/sajjad-moradi/followers","following_url":"https://api.github.com/users/sajjad-moradi/following{/other_user}","gists_url":"https://api.github.com/users/sajjad-moradi/gists{/gist_id}","starred_url":"https://api.github.com/users/sajjad-moradi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sajjad-moradi/subscriptions","organizations_url":"https://api.github.com/users/sajjad-moradi/orgs","repos_url":"https://api.github.com/users/sajjad-moradi/repos","events_url":"https://api.github.com/users/sajjad-moradi/events{/privacy}","received_events_url":"https://api.github.com/users/sajjad-moradi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T06:09:19Z","updated_at":"2021-08-12T06:09:19Z","author_association":"CONTRIBUTOR","body":"@siddharthteotia Since it was a small change, I added number of rows for each segment size to the output of RT prov. rule. It can be used for setting parameter `realtime.segment.flush.autotune.initialRows`.\r\n\r\nNow the output of the rule looks like this:\r\n\r\n![image](https://user-images.githubusercontent.com/8548220/129146293-80f330ea-5ec3-4e7b-b6fb-51315392548a.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897374684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897426863","html_url":"https://github.com/apache/pinot/issues/7264#issuecomment-897426863","issue_url":"https://api.github.com/repos/apache/pinot/issues/7264","id":897426863,"node_id":"IC_kwDOATCU_c41faWv","user":{"login":"suddendust","id":84911643,"node_id":"MDQ6VXNlcjg0OTExNjQz","avatar_url":"https://avatars.githubusercontent.com/u/84911643?v=4","gravatar_id":"","url":"https://api.github.com/users/suddendust","html_url":"https://github.com/suddendust","followers_url":"https://api.github.com/users/suddendust/followers","following_url":"https://api.github.com/users/suddendust/following{/other_user}","gists_url":"https://api.github.com/users/suddendust/gists{/gist_id}","starred_url":"https://api.github.com/users/suddendust/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/suddendust/subscriptions","organizations_url":"https://api.github.com/users/suddendust/orgs","repos_url":"https://api.github.com/users/suddendust/repos","events_url":"https://api.github.com/users/suddendust/events{/privacy}","received_events_url":"https://api.github.com/users/suddendust/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T07:54:49Z","updated_at":"2021-08-12T07:54:49Z","author_association":"CONTRIBUTOR","body":"I think the fundamental concern here is that partial results might be returned without the users taking cognisance of them. While having a flag like `partialResponse` solves to an extent, it is still prone to being missed by the user (many users don't even look at the response stats if the query was fast enough). I agree with @yupeng9 that the default behaviour in such cases should be failing the query. If the user has explicitly specified that he is okay with partial responses, then it can be indicated in a flag to the user.\r\n\r\nSo this entails three changes:\r\n1. Throwing exception from the broker in all the three cases.\r\n2. Indicating the user about partial response in all the three cases.\r\n3. Changing the default query behaviour.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897426863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897450402","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897450402","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897450402,"node_id":"IC_kwDOATCU_c41fgGi","user":{"login":"mr-agrwal","id":24796847,"node_id":"MDQ6VXNlcjI0Nzk2ODQ3","avatar_url":"https://avatars.githubusercontent.com/u/24796847?v=4","gravatar_id":"","url":"https://api.github.com/users/mr-agrwal","html_url":"https://github.com/mr-agrwal","followers_url":"https://api.github.com/users/mr-agrwal/followers","following_url":"https://api.github.com/users/mr-agrwal/following{/other_user}","gists_url":"https://api.github.com/users/mr-agrwal/gists{/gist_id}","starred_url":"https://api.github.com/users/mr-agrwal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mr-agrwal/subscriptions","organizations_url":"https://api.github.com/users/mr-agrwal/orgs","repos_url":"https://api.github.com/users/mr-agrwal/repos","events_url":"https://api.github.com/users/mr-agrwal/events{/privacy}","received_events_url":"https://api.github.com/users/mr-agrwal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T08:32:06Z","updated_at":"2021-08-12T08:32:06Z","author_association":"CONTRIBUTOR","body":"You would hardly be able to take advantage of partitioning by `price` because by default most of the data will be partitioned also by a timeframe.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897450402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897502073","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-897502073","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":897502073,"node_id":"IC_kwDOATCU_c41fst5","user":{"login":"Aka-shi","id":52004626,"node_id":"MDQ6VXNlcjUyMDA0NjI2","avatar_url":"https://avatars.githubusercontent.com/u/52004626?v=4","gravatar_id":"","url":"https://api.github.com/users/Aka-shi","html_url":"https://github.com/Aka-shi","followers_url":"https://api.github.com/users/Aka-shi/followers","following_url":"https://api.github.com/users/Aka-shi/following{/other_user}","gists_url":"https://api.github.com/users/Aka-shi/gists{/gist_id}","starred_url":"https://api.github.com/users/Aka-shi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aka-shi/subscriptions","organizations_url":"https://api.github.com/users/Aka-shi/orgs","repos_url":"https://api.github.com/users/Aka-shi/repos","events_url":"https://api.github.com/users/Aka-shi/events{/privacy}","received_events_url":"https://api.github.com/users/Aka-shi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T09:51:52Z","updated_at":"2021-08-12T09:51:52Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu Sorry for the delayed response. The initial use case for which I raised this issue is:\r\nWe had frequent downtimes on Kafka at that time and during every downtime server fails to ingest and we had to restart servers to recover. Even though we were informed of the downtime, the other option to avoid server restarts was to disable the table. But disabling the table also means querying is disabled for that table, which is not intended. So we wanted a functionality where if we are aware/anticipate ingestion failures we can just pause the ingestion and resume it later. \r\n\r\n\r\nRecently, we are also using the upsert feature in pinot and we want to manually push segments to the upsert table too. SO @yupeng9's use case is valid for us too. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897502073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897736161","html_url":"https://github.com/apache/pinot/issues/6439#issuecomment-897736161","issue_url":"https://api.github.com/repos/apache/pinot/issues/6439","id":897736161,"node_id":"IC_kwDOATCU_c41gl3h","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T15:29:22Z","updated_at":"2021-08-12T15:29:22Z","author_association":"MEMBER","body":"@Jackie-Jiang it should be partitioned by item right?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897736161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897799677","html_url":"https://github.com/apache/pinot/pull/7214#issuecomment-897799677","issue_url":"https://api.github.com/repos/apache/pinot/issues/7214","id":897799677,"node_id":"IC_kwDOATCU_c41g1X9","user":{"login":"atris","id":1724131,"node_id":"MDQ6VXNlcjE3MjQxMzE=","avatar_url":"https://avatars.githubusercontent.com/u/1724131?v=4","gravatar_id":"","url":"https://api.github.com/users/atris","html_url":"https://github.com/atris","followers_url":"https://api.github.com/users/atris/followers","following_url":"https://api.github.com/users/atris/following{/other_user}","gists_url":"https://api.github.com/users/atris/gists{/gist_id}","starred_url":"https://api.github.com/users/atris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atris/subscriptions","organizations_url":"https://api.github.com/users/atris/orgs","repos_url":"https://api.github.com/users/atris/repos","events_url":"https://api.github.com/users/atris/events{/privacy}","received_events_url":"https://api.github.com/users/atris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T16:49:27Z","updated_at":"2021-08-12T16:49:27Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang Please see","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/897799677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]