[{"url":"https://api.github.com/repos/apache/jena/issues/comments/1618262063","html_url":"https://github.com/apache/jena/pull/1949#issuecomment-1618262063","issue_url":"https://api.github.com/repos/apache/jena/issues/1949","id":1618262063,"node_id":"IC_kwDOAHF7Ec5gdLgv","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-03T13:28:04Z","updated_at":"2023-07-03T13:28:04Z","author_association":"MEMBER","body":"Plans have resources, timescales and goals.\r\n\r\nNot _a plan_!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1618262063/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621262300","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1621262300","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1621262300,"node_id":"IC_kwDOAHF7Ec5gon_c","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T08:15:20Z","updated_at":"2023-07-05T08:15:20Z","author_association":"MEMBER","body":"Hi @xilixii,\r\n\r\nIt's technically possible but not supported.\r\n\r\nIf you look in the main script, you'll see it is a series of calls to other scripts to do each of the steps. They could be run separately by hacking the script if none of the files, including the intermediate working files in the temporary directory, have been touched at all. \r\n\r\nThat's time consuming for the user so it is probably easier (quicker) to rerun. `disown` helps to reduce the risk of accidentally killing it.\r\n\r\nBTW a large number of threads, more than the number of cores, usually doesn't give an improvement. But may be you have a large machine.\r\n\r\nApproximately how many triples are in the TTL file? `tdb2.tdbloader --loader=parallel` on a large server-class machine with local SSD/NVMe may be faster.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621262300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621530981","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1621530981","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1621530981,"node_id":"IC_kwDOAHF7Ec5gppll","user":{"login":"xilixii","id":76767481,"node_id":"MDQ6VXNlcjc2NzY3NDgx","avatar_url":"https://avatars.githubusercontent.com/u/76767481?v=4","gravatar_id":"","url":"https://api.github.com/users/xilixii","html_url":"https://github.com/xilixii","followers_url":"https://api.github.com/users/xilixii/followers","following_url":"https://api.github.com/users/xilixii/following{/other_user}","gists_url":"https://api.github.com/users/xilixii/gists{/gist_id}","starred_url":"https://api.github.com/users/xilixii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xilixii/subscriptions","organizations_url":"https://api.github.com/users/xilixii/orgs","repos_url":"https://api.github.com/users/xilixii/repos","events_url":"https://api.github.com/users/xilixii/events{/privacy}","received_events_url":"https://api.github.com/users/xilixii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T11:04:22Z","updated_at":"2023-07-05T11:04:22Z","author_association":"NONE","body":"Thank you for your  reply @afs,\r\nIt is about 1,400,000,000 triples in the TTL file. I know that it is recommanded to set the threads by the number of cpu cores minus one. And I did use a server-class machine with 104 cores, so it is ok.\r\nBTW I have rerunned tdb2.xloader. I would like to try the option --loader=parallel next time. \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621530981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621671355","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1621671355","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1621671355,"node_id":"IC_kwDOAHF7Ec5gqL27","user":{"login":"xilixii","id":76767481,"node_id":"MDQ6VXNlcjc2NzY3NDgx","avatar_url":"https://avatars.githubusercontent.com/u/76767481?v=4","gravatar_id":"","url":"https://api.github.com/users/xilixii","html_url":"https://github.com/xilixii","followers_url":"https://api.github.com/users/xilixii/followers","following_url":"https://api.github.com/users/xilixii/following{/other_user}","gists_url":"https://api.github.com/users/xilixii/gists{/gist_id}","starred_url":"https://api.github.com/users/xilixii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xilixii/subscriptions","organizations_url":"https://api.github.com/users/xilixii/orgs","repos_url":"https://api.github.com/users/xilixii/repos","events_url":"https://api.github.com/users/xilixii/events{/privacy}","received_events_url":"https://api.github.com/users/xilixii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T12:36:23Z","updated_at":"2023-07-05T12:36:23Z","author_association":"NONE","body":"I have received the same error again, @afs \r\nI just rerun the command \r\n```\r\ntdb2.xloader --loc xxx --threads 100 xxx\r\n```\r\nAnd It was stuck at the stage of Build POS with no info output on screen for about 2 hours which seems unnormal, then it occurs to this error:\r\n<img width=\"713\" alt=\"image\" src=\"https://github.com/apache/jena/assets/76767481/4253b09f-ded0-45ce-a912-0bb32e3746ad\">\r\nI use a ssh connection to manipulate a server machine remotely. I don't know whether it is caused by the ssh connection problem or the tdb2.xloader problem.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621671355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621909651","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1621909651","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1621909651,"node_id":"IC_kwDOAHF7Ec5grGCT","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T14:44:39Z","updated_at":"2023-07-05T14:44:39Z","author_association":"MEMBER","body":"So if you are going to run this on a remote machine via a ssh session `disown` is likely not enough as a terminal disconnect, e.g. due to no output for a long time, still interrupts the process so you likely need `nohup` instead (aside [`disown` vs `nohup` explained](https://unix.stackexchange.com/a/148698))\r\n\r\nSo ideally you want something like the following:\r\n\r\n```bash\r\n$ nohup tdb2.xloader <your-args> > load.txt &\r\n$ tail -f load.txt\r\n```\r\n\r\nSo launch into with `nohup` to disassociate from the terminal and redirects its output to `load.txt` and places the process into the background.  Thus even if your `ssh` session disconnects the process continues running.  You can then monitor the process by tailing the log file, and you should also be able to see it in `ps`, `top` etc.\r\n\r\nThen if you get disconnected you can then reconnect and simply resume monitoring by tailing the log file, `ps`, `top` and so on\r\n\r\n--\r\n\r\nAn alternative workaround would be set up SSH Keepalive for your connection so long pauses in terminal output don't cause a disconnect.  See `ServerAliveInterval` in the [`ssh_config` man page](https://linux.die.net/man/5/ssh_config)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621909651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621973609","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1621973609","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1621973609,"node_id":"IC_kwDOAHF7Ec5grVpp","user":{"login":"xilixii","id":76767481,"node_id":"MDQ6VXNlcjc2NzY3NDgx","avatar_url":"https://avatars.githubusercontent.com/u/76767481?v=4","gravatar_id":"","url":"https://api.github.com/users/xilixii","html_url":"https://github.com/xilixii","followers_url":"https://api.github.com/users/xilixii/followers","following_url":"https://api.github.com/users/xilixii/following{/other_user}","gists_url":"https://api.github.com/users/xilixii/gists{/gist_id}","starred_url":"https://api.github.com/users/xilixii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xilixii/subscriptions","organizations_url":"https://api.github.com/users/xilixii/orgs","repos_url":"https://api.github.com/users/xilixii/repos","events_url":"https://api.github.com/users/xilixii/events{/privacy}","received_events_url":"https://api.github.com/users/xilixii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-05T15:17:06Z","updated_at":"2023-07-05T15:17:06Z","author_association":"NONE","body":"Your comment seems to be very helpful, Appreciate that @rvesse \r\nI will try this again, but I still worried whether it is a ssh problem or not. It failed on the same stage ```Build POS``` twice. And this time it was stuck on this ```Build POS``` stage for two hours. I am not sure about whether it is normal to be stuck at ```Build POS``` for such a long time. I mean, is there any chance to be a bug of ```tdb2.xloader``` script?\r\nHowever it is most likely caused by ssh connection problem. Any I will try ```nohup``` to rerun again, if it works then it means there is no problem with ```tdb2.xloader``` scripts.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1621973609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1623014797","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1623014797","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1623014797,"node_id":"IC_kwDOAHF7Ec5gvT2N","user":{"login":"xilixii","id":76767481,"node_id":"MDQ6VXNlcjc2NzY3NDgx","avatar_url":"https://avatars.githubusercontent.com/u/76767481?v=4","gravatar_id":"","url":"https://api.github.com/users/xilixii","html_url":"https://github.com/xilixii","followers_url":"https://api.github.com/users/xilixii/followers","following_url":"https://api.github.com/users/xilixii/following{/other_user}","gists_url":"https://api.github.com/users/xilixii/gists{/gist_id}","starred_url":"https://api.github.com/users/xilixii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xilixii/subscriptions","organizations_url":"https://api.github.com/users/xilixii/orgs","repos_url":"https://api.github.com/users/xilixii/repos","events_url":"https://api.github.com/users/xilixii/events{/privacy}","received_events_url":"https://api.github.com/users/xilixii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T05:30:23Z","updated_at":"2023-07-06T05:30:23Z","author_association":"NONE","body":"I have successfully load the TTL file into TDB2 database by ```nohup```. Thank you for your comment @rvesse ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1623014797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1623429012","html_url":"https://github.com/apache/jena/issues/1951#issuecomment-1623429012","issue_url":"https://api.github.com/repos/apache/jena/issues/1951","id":1623429012,"node_id":"IC_kwDOAHF7Ec5gw4-U","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-06T10:30:15Z","updated_at":"2023-07-06T10:30:15Z","author_association":"MEMBER","body":"Glad to hear you've loaded the data.\r\n\r\n`client_loop: send disconnect` is an SSH message.\r\n\r\nThe xloader goes quiet because there a large sort going on and the sort program does not output it's progress. We could add a \"hello I'm stil working on it\" but it would not indicate how far through the task.\r\n\r\nThe different indexes, SPO, POS, OSP can take quite different lengths of time to prepare using the sort - the first SPO is often shorter so I guess that's why no timeout happened.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1623429012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1628822659","html_url":"https://github.com/apache/jena/issues/1953#issuecomment-1628822659","issue_url":"https://api.github.com/repos/apache/jena/issues/1953","id":1628822659,"node_id":"IC_kwDOAHF7Ec5hFdyD","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T12:00:55Z","updated_at":"2023-07-10T12:00:55Z","author_association":"MEMBER","body":"I believe that most of the CLI tools are present in the Fuseki JAR distribution but it's non-obvious in that it requires knowing the package and classname of the tool you want to run e.g.\r\n\r\n```bash\r\n$ java -cp fuseki-server.jar tdb.tdbquery --help   \r\ntdbquery --loc=<path> --query=<query>\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1628822659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1629491484","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1629491484","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1629491484,"node_id":"IC_kwDOAHF7Ec5hIBEc","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T18:33:23Z","updated_at":"2023-07-10T18:33:23Z","author_association":"MEMBER","body":"Could you please attach the input and output files to this issue? (as a zip file if that helps avoiding any translation).\r\n\r\nJena should write UTF-8 which is the defined out the N-Triples standard. No BOM is written.\r\n\r\nWhat character set is set in your windows environment?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1629491484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1629495357","html_url":"https://github.com/apache/jena/issues/1953#issuecomment-1629495357","issue_url":"https://api.github.com/repos/apache/jena/issues/1953","id":1629495357,"node_id":"IC_kwDOAHF7Ec5hICA9","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-10T18:36:32Z","updated_at":"2023-07-10T18:36:32Z","author_association":"MEMBER","body":"Is the request to include the scripts in the Fuseki download?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1629495357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630187850","html_url":"https://github.com/apache/jena/issues/1953#issuecomment-1630187850","issue_url":"https://api.github.com/repos/apache/jena/issues/1953","id":1630187850,"node_id":"IC_kwDOAHF7Ec5hKrFK","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T05:56:59Z","updated_at":"2023-07-11T05:58:33Z","author_association":"CONTRIBUTOR","body":"I'm pretty sure that GeoSPARQL isn't part of the default Fuseki distribution yet, only the text index is there as an extension. I think I mentioned it some time ago hidden in some other issues, but forgot to keep track of it:\r\n\r\nhttps://github.com/apache/jena/blob/main/jena-fuseki2/jena-fuseki-server/pom.xml\r\n\r\nRegarding the confusion, the TO wants to use GeoSPARQL features with `tdbquery`, but this doesn't work at the moment. Adding a `jena-geosparql` Uber Jar to the classpath or use `tdbquery` from the Fuseki fulljar (once `jena-geosparql` has been added!) will at least make the functions and datatypes being registered and work:\r\n\r\n```\r\njava -cp /tmp/jena-fuseki-fulljar-4.9.0.jar tdb2.tdbquery --loc /tmp/tdb2 '\r\n\r\nPREFIX geo:  <http://www.opengis.net/ont/geosparql#>\r\nPREFIX geof: <http://www.opengis.net/def/function/geosparql/>\r\nPREFIX uom: <http://www.opengis.net/def/uom/OGC/1.0/>\r\n\r\nSELECT * {\r\nBIND(\"POINT(1.0 1.0)\"^^geo:wktLiteral AS ?p1)\r\nBIND(\"POINT(2.0 2.0)\"^^geo:wktLiteral AS ?p2)\r\nBIND(geof:distance(?p1, ?p2, uom:radian) AS ?d)\r\n}'\r\n07:53:56 WARN  system          :: The “SIS_DATA” environment variable is not set.\r\n------------------------------------------------------------------------------------\r\n| p1                               | p2                               | d          |\r\n====================================================================================\r\n| \"POINT(1.0 1.0)\"^^geo:wktLiteral | \"POINT(2.0 2.0)\"^^geo:wktLiteral | 0.024683e0 |\r\n------------------------------------------------------------------------------------\r\n```\r\n\r\n\r\nWhat does not work is probably using a `GeosparqlDataset` in an assembler file because from what I remember when looking at the code some time ago, `tdbquery` only considers a TDBDataset?\r\n\r\nSo my guess once you added a full jar of `jena-geosparql` (needs Maven shade plugin), the GeoSPARQL functions will work because they are registered via service loader, but the spatial index I guess won't as this is part of the `GeosparqlDataset`  which registers the index to the query context on initialization.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630187850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630295626","html_url":"https://github.com/apache/jena/issues/1956#issuecomment-1630295626","issue_url":"https://api.github.com/repos/apache/jena/issues/1956","id":1630295626,"node_id":"IC_kwDOAHF7Ec5hLFZK","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T07:28:37Z","updated_at":"2023-07-11T07:28:37Z","author_association":"MEMBER","body":"The close is the first 3 consecutive quotes encountered after the opening `\"\"\"`  like `\"\"\"A word is \"quoted\"\"\" \"`.\r\n\r\nhttps://www.w3.org/TR/turtle/#grammar-production-STRING_LITERAL_LONG_QUOTE\r\n\r\n```\r\nSTRING_LITERAL_LONG_QUOTE\t::=\t'\"\"\"' (('\"' | '\"\"')? ([^\"\\] | ECHAR | UCHAR )))* '\"\"\"'\r\n```\r\n\r\nNote the inner `('\"' | '\"\"')?` -- three in a row is not covered by the string contents part.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630295626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630333819","html_url":"https://github.com/apache/jena/issues/1953#issuecomment-1630333819","issue_url":"https://api.github.com/repos/apache/jena/issues/1953","id":1630333819,"node_id":"IC_kwDOAHF7Ec5hLOt7","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T07:55:29Z","updated_at":"2023-07-11T07:55:29Z","author_association":"MEMBER","body":"> I'm pretty sure that GeoSPARQL isn't part of the default Fuseki distribution yet, \r\n\r\nThere is `jena-fuseki-geosparql`, a build of Fuseki with `jena-geosparql`. It has different command line options which is one factor that stops common integration. \r\n\r\nIf the dataset is coming from an assembler, the extension mechanism [FusekiAutoModule](https://jena.apache.org/documentation/fuseki2/fuseki-modules.html) could be used. \r\n\r\nThat can also include a command line entry point that either (1) generates an assembler for later use (2) writes an assembler that is picked up by the module (3) or creates a datastructure with the details that the module picks up (preference - the latter so in-memory, no disk use at all works.).\r\n\r\n> tdbquery only considers a TDBDataset?\r\n\r\nYes.\r\n\r\nAssembling needs a starting point in the case of more than one description in a file. `tdbquery` is doing that based on type. The `sparql` command can take a configuration with any single dataset setup. A feature is needed to specific the starting point of building the dataset.\r\n\r\n----\r\n\r\nGeoSPARQL is sufficient different in its feature set and needs that there needs to be a community around it to maintain and evolve the GeoSPARQL support.\r\n\r\nSee also: #1344 which has several suggestions but hasn't come to a clear consensus on direction.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630333819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630352432","html_url":"https://github.com/apache/jena/issues/1956#issuecomment-1630352432","issue_url":"https://api.github.com/repos/apache/jena/issues/1956","id":1630352432,"node_id":"IC_kwDOAHF7Ec5hLTQw","user":{"login":"atextor","id":1199036,"node_id":"MDQ6VXNlcjExOTkwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1199036?v=4","gravatar_id":"","url":"https://api.github.com/users/atextor","html_url":"https://github.com/atextor","followers_url":"https://api.github.com/users/atextor/followers","following_url":"https://api.github.com/users/atextor/following{/other_user}","gists_url":"https://api.github.com/users/atextor/gists{/gist_id}","starred_url":"https://api.github.com/users/atextor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/atextor/subscriptions","organizations_url":"https://api.github.com/users/atextor/orgs","repos_url":"https://api.github.com/users/atextor/repos","events_url":"https://api.github.com/users/atextor/events{/privacy}","received_events_url":"https://api.github.com/users/atextor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T08:08:09Z","updated_at":"2023-07-11T08:08:09Z","author_association":"NONE","body":"The string can contain one quote - which is allowed by the rule - but it must then be followed by some non-quote ECHAR or UCHAR. So that means unescaped quotes are allowed everywhere in a triple-quoted string (which is why I expected this to work) _except_ as the last character, presumably to make parsing easier.\r\n\r\nThanks for the clarification. Since it's obviously not a bug in Jena, I'll close the issue.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630352432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630436213","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1630436213","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1630436213,"node_id":"IC_kwDOAHF7Ec5hLnt1","user":{"login":"larisa1995","id":41237767,"node_id":"MDQ6VXNlcjQxMjM3NzY3","avatar_url":"https://avatars.githubusercontent.com/u/41237767?v=4","gravatar_id":"","url":"https://api.github.com/users/larisa1995","html_url":"https://github.com/larisa1995","followers_url":"https://api.github.com/users/larisa1995/followers","following_url":"https://api.github.com/users/larisa1995/following{/other_user}","gists_url":"https://api.github.com/users/larisa1995/gists{/gist_id}","starred_url":"https://api.github.com/users/larisa1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larisa1995/subscriptions","organizations_url":"https://api.github.com/users/larisa1995/orgs","repos_url":"https://api.github.com/users/larisa1995/repos","events_url":"https://api.github.com/users/larisa1995/events{/privacy}","received_events_url":"https://api.github.com/users/larisa1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T09:00:06Z","updated_at":"2023-07-11T09:10:30Z","author_association":"NONE","body":"Dear @afs \r\n\r\nPlease see the input and output attached as a zip file, command and the characteristics of a sole Windows below. Unfortunately, I'm nothing like a programmer so I do not use any IDE, just CLI riot.bat.\r\n\r\n`riot --strict --output=RDF/XML simpleExample.ttl  > simpleExample.rdf`\r\n\r\nPS C:\\Users\\lzhuchiy> [System.Text.Encoding]::Default\r\n\r\nIsSingleByte      : True\r\nBodyName          : iso-8859-1\r\nEncodingName      : Western European (Windows)\r\nHeaderName        : Windows-1252\r\nWebName           : Windows-1252\r\nWindowsCodePage   : 1252\r\nIsBrowserDisplay  : True\r\nIsBrowserSave     : True\r\nIsMailNewsDisplay : True\r\nIsMailNewsSave    : True\r\nEncoderFallback   : System.Text.InternalEncoderBestFitFallback\r\nDecoderFallback   : System.Text.InternalDecoderBestFitFallback\r\nIsReadOnly        : True\r\nCodePage          : 1252\r\n\r\n[simpleExample.zip](https://github.com/apache/jena/files/12012720/simpleExample.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630436213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630640670","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1630640670","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1630640670,"node_id":"IC_kwDOAHF7Ec5hMZoe","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T11:19:34Z","updated_at":"2023-07-11T11:19:34Z","author_association":"MEMBER","body":"When I run riot (on Linux) `riot --strict --output=ntriples simpleExample.ttl > simpleExample.nt` I get:\r\n```\r\n<http://www.example.com/SK002> <http://www.example.com/friend> <http://www.example.com/SK00c> .\r\n```\r\nand it starts in hex: `3c 68 74 74 70 3a` which is `< h t t p :` -- no BOM.\r\n\r\nSame with output to RDF/XML. It starts `<` as XML does.\r\n\r\nYour `simpleExample.rdf` is some 16 bit unicode. Is that the output from riot directly or did you use Notepad++ on the file at any time? If so, maybe it's the notepad++ settings.\r\n\r\n`riot` can read your `simpleExample.rdf` because it uses the Java XML parser and that handles the BOM setup. this onyl applies to XML-based formats.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630640670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630856603","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1630856603","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1630856603,"node_id":"IC_kwDOAHF7Ec5hNOWb","user":{"login":"larisa1995","id":41237767,"node_id":"MDQ6VXNlcjQxMjM3NzY3","avatar_url":"https://avatars.githubusercontent.com/u/41237767?v=4","gravatar_id":"","url":"https://api.github.com/users/larisa1995","html_url":"https://github.com/larisa1995","followers_url":"https://api.github.com/users/larisa1995/followers","following_url":"https://api.github.com/users/larisa1995/following{/other_user}","gists_url":"https://api.github.com/users/larisa1995/gists{/gist_id}","starred_url":"https://api.github.com/users/larisa1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larisa1995/subscriptions","organizations_url":"https://api.github.com/users/larisa1995/orgs","repos_url":"https://api.github.com/users/larisa1995/repos","events_url":"https://api.github.com/users/larisa1995/events{/privacy}","received_events_url":"https://api.github.com/users/larisa1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T13:40:32Z","updated_at":"2023-07-11T13:40:32Z","author_association":"NONE","body":"Dear @afs \r\n\r\nThank you for your prompt reply. \r\n\r\nNo, I did not apply Notepad++ to the provided examples. This is a riot.bat output. I just open them in Notepad++ to check encoding.\r\n\r\nRegular Notepad of Windows (not Notepad++) shows UTF-16 LE encoding.\r\n\r\nI noticed problems when using riot.bat repeatedly for the same file to change serialization. My specific case was \"ntriples (in UTF-8) -> turtle -> XML/RDF\". \r\n\r\nThe first iteration produces UTF-16 output, but the second one expects UTF-8 file as input.\r\nAs a result, the second iteration (turtle to XML/RDF) produces an error file because the first one changed encoding. \r\n\r\nBut if manually change the encoding of the result of the first iteration from UTF-16 to UTF-8 in Notepad++, then it works fine (actually probably just Powershell without the Notepad++ could have helped).\r\n\r\nThis also happens without using Notepad++ at all. The first iteration produces UTF-16 output, but the second one expects UTF-8 file as input.\r\n\r\nPlease see \"no Notepad++, not even to check encoding\" files just riot.bat attached (file with error included).\r\n[simpleExample1.zip](https://github.com/apache/jena/files/12015310/simpleExample1.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630856603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630942640","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1630942640","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1630942640,"node_id":"IC_kwDOAHF7Ec5hNjWw","user":{"login":"larisa1995","id":41237767,"node_id":"MDQ6VXNlcjQxMjM3NzY3","avatar_url":"https://avatars.githubusercontent.com/u/41237767?v=4","gravatar_id":"","url":"https://api.github.com/users/larisa1995","html_url":"https://github.com/larisa1995","followers_url":"https://api.github.com/users/larisa1995/followers","following_url":"https://api.github.com/users/larisa1995/following{/other_user}","gists_url":"https://api.github.com/users/larisa1995/gists{/gist_id}","starred_url":"https://api.github.com/users/larisa1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larisa1995/subscriptions","organizations_url":"https://api.github.com/users/larisa1995/orgs","repos_url":"https://api.github.com/users/larisa1995/repos","events_url":"https://api.github.com/users/larisa1995/events{/privacy}","received_events_url":"https://api.github.com/users/larisa1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T14:31:33Z","updated_at":"2023-07-11T15:02:11Z","author_association":"NONE","body":"If it is of any help, I use SHACL API [1], blabel [2] and RMLMapper [3] CLIs in parallel with Jena and the first ones also change encoding while the last one stays with UTF-8. \r\n[1] https://github.com/TopQuadrant/shacl\r\n[2] https://github.com/aidhog/blabel\r\n[3] https://github.com/RMLio/rmlmapper-java","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630942640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630991668","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1630991668","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1630991668,"node_id":"IC_kwDOAHF7Ec5hNvU0","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T14:59:41Z","updated_at":"2023-07-11T15:01:23Z","author_association":"MEMBER","body":"What JVM are you using?\r\n\r\nThe fact that you see the same effect across multiple Java based tools would tend to imply a JVM effect from usage of some core Java IO APIs rather than a specific bug in any one tool.  Especially since 1 is Jena based and 2 uses a different RDF parsing library.\r\n\r\nPresumably the 3rd tool reads files in a different way to the others","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1630991668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631000271","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1631000271","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1631000271,"node_id":"IC_kwDOAHF7Ec5hNxbP","user":{"login":"larisa1995","id":41237767,"node_id":"MDQ6VXNlcjQxMjM3NzY3","avatar_url":"https://avatars.githubusercontent.com/u/41237767?v=4","gravatar_id":"","url":"https://api.github.com/users/larisa1995","html_url":"https://github.com/larisa1995","followers_url":"https://api.github.com/users/larisa1995/followers","following_url":"https://api.github.com/users/larisa1995/following{/other_user}","gists_url":"https://api.github.com/users/larisa1995/gists{/gist_id}","starred_url":"https://api.github.com/users/larisa1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larisa1995/subscriptions","organizations_url":"https://api.github.com/users/larisa1995/orgs","repos_url":"https://api.github.com/users/larisa1995/repos","events_url":"https://api.github.com/users/larisa1995/events{/privacy}","received_events_url":"https://api.github.com/users/larisa1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T15:04:50Z","updated_at":"2023-07-11T15:05:26Z","author_association":"NONE","body":"Dear @rvesse \r\n\r\nSHACL API and Blabel are both based on Jena. Please see the Java characteristics below.\r\n\r\n```\r\nC:\\Users\\lzhuchiy>java -version\r\njava version \"17.0.5\" 2022-10-18 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.5+9-LTS-191)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.5+9-LTS-191, mixed mode, sharing)\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631000271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631110169","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1631110169","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1631110169,"node_id":"IC_kwDOAHF7Ec5hOMQZ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T16:13:08Z","updated_at":"2023-07-11T16:13:08Z","author_association":"MEMBER","body":"It could be the bat script execution or the \">\" redirection.\r\n\r\nThe bat scripts got rebuilt for v 4.8.0 (issue #1911) and another small change, otherwise they have been stable for quite sometime.\r\n\r\nAre you running [/RMLio/rmlmapper-java](https://github.com/RMLio/rmlmapper-java) as \"java -jar rmlmapper.jar\"?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631110169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631185024","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1631185024","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1631185024,"node_id":"IC_kwDOAHF7Ec5hOeiA","user":{"login":"larisa1995","id":41237767,"node_id":"MDQ6VXNlcjQxMjM3NzY3","avatar_url":"https://avatars.githubusercontent.com/u/41237767?v=4","gravatar_id":"","url":"https://api.github.com/users/larisa1995","html_url":"https://github.com/larisa1995","followers_url":"https://api.github.com/users/larisa1995/followers","following_url":"https://api.github.com/users/larisa1995/following{/other_user}","gists_url":"https://api.github.com/users/larisa1995/gists{/gist_id}","starred_url":"https://api.github.com/users/larisa1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larisa1995/subscriptions","organizations_url":"https://api.github.com/users/larisa1995/orgs","repos_url":"https://api.github.com/users/larisa1995/repos","events_url":"https://api.github.com/users/larisa1995/events{/privacy}","received_events_url":"https://api.github.com/users/larisa1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T17:07:57Z","updated_at":"2023-07-11T17:07:57Z","author_association":"NONE","body":"Dear @afs \r\n\r\nI run RMLMapper as follows\r\njava -jar rmlmapper.jar -m map.rml.ttl -o simpleExample.ttl -s turtle\r\n\r\nThank you for the \">\" redirection hint and sorry for bothering you.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631185024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631185811","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1631185811","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1631185811,"node_id":"IC_kwDOAHF7Ec5hOeuT","user":{"login":"larisa1995","id":41237767,"node_id":"MDQ6VXNlcjQxMjM3NzY3","avatar_url":"https://avatars.githubusercontent.com/u/41237767?v=4","gravatar_id":"","url":"https://api.github.com/users/larisa1995","html_url":"https://github.com/larisa1995","followers_url":"https://api.github.com/users/larisa1995/followers","following_url":"https://api.github.com/users/larisa1995/following{/other_user}","gists_url":"https://api.github.com/users/larisa1995/gists{/gist_id}","starred_url":"https://api.github.com/users/larisa1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/larisa1995/subscriptions","organizations_url":"https://api.github.com/users/larisa1995/orgs","repos_url":"https://api.github.com/users/larisa1995/repos","events_url":"https://api.github.com/users/larisa1995/events{/privacy}","received_events_url":"https://api.github.com/users/larisa1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T17:08:33Z","updated_at":"2023-07-11T17:08:33Z","author_association":"NONE","body":"\">\" redirection changes encoding","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631185811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631201146","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1631201146","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1631201146,"node_id":"IC_kwDOAHF7Ec5hOid6","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T17:19:15Z","updated_at":"2023-07-11T17:19:15Z","author_association":"MEMBER","body":"Thanks for letting us know. If any Windows users have suggestions here, please let us know.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631201146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631964096","html_url":"https://github.com/apache/jena/issues/1954#issuecomment-1631964096","issue_url":"https://api.github.com/repos/apache/jena/issues/1954","id":1631964096,"node_id":"IC_kwDOAHF7Ec5hRcvA","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T07:05:50Z","updated_at":"2023-07-12T07:05:50Z","author_association":"MEMBER","body":"\n> SHACL API and Blabel are both based on Jena.\n\nBlabel uses https://github.com/nxparser/nxparser AFAICT\n\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1631964096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1632452475","html_url":"https://github.com/apache/jena/issues/1953#issuecomment-1632452475","issue_url":"https://api.github.com/repos/apache/jena/issues/1953","id":1632452475,"node_id":"IC_kwDOAHF7Ec5hTT97","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-12T12:36:27Z","updated_at":"2023-07-12T12:36:27Z","author_association":"CONTRIBUTOR","body":"(by the way my colleague @Aklakan has built a [tool](https://github.com/SmartDataAnalytics/RdfProcessingToolkit/releases) around Apache Jena which you could use if you want to: `rpt integrate -e tdb2 --loc=yourtdb2 --geoindex --out-format text/plain yourquery.rq`)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1632452475/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1640902829","html_url":"https://github.com/apache/jena/pull/1766#issuecomment-1640902829","issue_url":"https://api.github.com/repos/apache/jena/issues/1766","id":1640902829,"node_id":"IC_kwDOAHF7Ec5hzjCt","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T19:46:36Z","updated_at":"2023-07-18T19:46:36Z","author_association":"MEMBER","body":"jena-fuseki-ui now uses `\"@zazuko/yasqe\": \"^4.2.29\"` and `\"@zazuko/yasr\": \"^4.2.30`.\r\n\r\nThese artifacts are bug-fixed versions of `@triply/yasgui`. Hopefully, `@zazuko/yasgui` v4.2.30 works for this PR.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1640902829/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1640945497","html_url":"https://github.com/apache/jena/pull/1960#issuecomment-1640945497","issue_url":"https://api.github.com/repos/apache/jena/issues/1960","id":1640945497,"node_id":"IC_kwDOAHF7Ec5hztdZ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T20:24:31Z","updated_at":"2023-07-18T20:24:31Z","author_association":"MEMBER","body":"Thanks for the comments.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1640945497/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1641715251","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1641715251","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1641715251,"node_id":"IC_kwDOAHF7Ec5h2pYz","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T09:07:57Z","updated_at":"2023-07-19T09:07:57Z","author_association":"MEMBER","body":"Any Graph or Dataset that uses our `Transactional` should already be thread safe if the calling code using transactions around the read/write operations on that instance i.e. [Jena Txn API](https://jena.apache.org/documentation/txn/txn.html)\r\n\r\nNow different implementations offer differing levels of concurrent access so the choice of implementation is going to depend on your usage pattern.  For example `DatasetGraphFactory.createTxnMem()` will give you an in-memory transactional `DatasetGraph` with multiple-reader single-writer (MRSW) concurrency.  Alternatively `TDB2Factory.createDataset()` gives you an in-memory transactional `Dataset` with multiple-reader and single-writer concurrency (MR+SW)\r\n\r\nIf you can provide more detail on how you use the `Graph` API currently we can try and give more specific advice on how to adapt your code to use one of our `Transactional` implementations","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1641715251/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1641813466","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1641813466","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1641813466,"node_id":"IC_kwDOAHF7Ec5h3BXa","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T10:13:47Z","updated_at":"2023-07-19T11:23:56Z","author_association":"CONTRIBUTOR","body":"Well, the code is open for both [ONT-API](https://github.com/owlcs/ont-api) and [concurrent-rdf-graph](https://github.com/sszuev/concurrent-rdf-graph).\r\nONT-API is an implementation of [OWL-API](https://github.com/owlcs/owlapi) api, we can't use transactions, there are RW-lock mechanism. We have to follow OWL-API rules. OWLAPI supports concurrent access to OWL via `java.util.concurrent.locks.ReadWriteLock`.\r\n\r\nAlso, I don't quite understand how transactions could help if we have Streams and don't want to put everything in memory.\r\nUsually transactions are used in the top-level, maybe with help of AOP. \r\nIn ONTAPI we have neither top-level nor AOP. And we can't use TDB in the library itself, it is out of scope. If someone wants use TDB he can, but it is not responsibility of the library. \r\n[ReadWriteLockingGraph](https://github.com/sszuev/concurrent-rdf-graph/blob/main/src/main/kotlin/ReadWriteLockingGraph.kt) offers such way. If we have a lot of read-operations, and few write ones, no so much memory is required (it use snapshot-mechanism but only if there are open Stream. Remain items are placed into memory in that case. Also there are some other attempts to reduce memory consumption.).\r\n\r\nIn concurrent-rdf-graph there are tests.\r\n\r\nIn any case, it seems to me that an additional mechanism will not hurt. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1641813466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1642065732","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1642065732","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1642065732,"node_id":"IC_kwDOAHF7Ec5h3-9E","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T13:17:00Z","updated_at":"2023-07-19T13:17:00Z","author_association":"MEMBER","body":"Thanks for raising this issue.\r\n\r\nJena provides: `GraphTxn` from `GraphFactory.createGraphTxn` (new name `Factory` ->  `GraphFactory`).\r\n\r\n`GraphTxn` is thread-safe on each single method call even without calling transaction begin-commit/abort from the application.\r\n\r\n> I don't quite understand how transactions could help if we have Streams and don't want to put everything in memory.\r\n\r\nWith transactions, iterators from this graph are consistent - they iterator over the data at the time `find()` was called regardless of changes by other threads. It is not a copy. It is MR+SW - readers and writers can run at the same time. TDB2 and TIM (the dataset for transactional use in-memory behind `GarphTxn`) do not throw away the state of the database until all usage of that epoch of the database have finished with it.\r\n\r\n> ONT-API is an implementation of [OWL-API](https://github.com/owlcs/owlapi) api, we can't use transactions, there are RW-lock mechanism.\r\n\r\nCould you expand on that? Why \"can't\"? There are various problems that arise that ACID transactions address. Protecting the graph datastructures is one part of that - having a consistency view of the data is another.\r\n\r\n> `SynchronizedGraph` & `ReadWriteLockingGraph`\r\n\r\nThese seem to protect individual operations but not a sequence of operations (the A in ACID). E.g. adding several triples. So datastructure are protected but application can see half-completed changes.\r\n\r\nI'm not sure the `remember()` function helps - it seems to only protect at each step of an iterator. But if the base data changes during an iterators life between calls to next(), it may thrown ConcurrentModificationException and if it doesn't may not give correct iteration, missing out or duplicating items. \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1642065732/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1642133177","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1642133177","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1642133177,"node_id":"IC_kwDOAHF7Ec5h4Pa5","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T13:54:43Z","updated_at":"2023-07-19T17:27:44Z","author_association":"CONTRIBUTOR","body":"> Could you expand on that? Why \"can't\"? There are various problems that arise that ACID transactions address. Protecting the graph datastructures is one part of that - having a consistency view of the data is another.\r\n\r\nOWLAPI provides R\\W locking mechanism, so we should also support this functionality in ONTAPI, we already has concurrent `OWLOntoloty`, so it would be nice to have protected RDF-view.\r\nTransactions can be used by those who use this library, they can protect calls of ONTAPI in anyway they like. ONTAPI is just an advanced wrapper of RDFGraph, a view. It can wrap any `Graph`.\r\nSo no problem for clients to make their own transaction protection. \r\nBut I think providing this functionality in the library itself would be out of scope. \r\nONTAPI is intended for OWL2 only. But maybe, some day, as an extension.\r\n\r\n> These seem to protect individual operations but not a sequence of operations (the A in ACID). E.g. adding several triples. So datastructure are protected but application can see half-completed changes.\r\n\r\nYou can comment out this method and run tests. I think the tests will fail. Method `remember` creates Wrapper for iterator (`OuterTriplesIterator`) with it is own lock (`ReentrantLock`, not the outer `ReadWriteLock`), it protects `next` & `hasNext` & `close`. When there is a Graph write operation, this lock plays its main role, see `releaseToSnapshot` (i.e. `wrapper.lock.withLock {}`). When this happens the iterator is collected to snapshot (`List`) but outer iteration is locked, all other iterators continue to run until their turn comes. After some iterator \"released to snapshot\" (i.e. collected to snapshot `List`), nothing blocks it from further iteration (against snapshot data not underlying data). Whole write operation is protected by R/W lock, so no new iterators will appeared (creation of iterator is a read operation), but already collected iterators are not locked any more.\r\n\r\nBut off course there could be mistakes and possible improvements, this implementation can be considered as a draft. \r\n(Honestly, I'm not sure if anyone is using this feature, but it should be in the ONT-API library for compatibility with OWLAPI-impl)\r\n\r\n> These seem to protect individual operations but not a sequence of operations (the A in ACID). E.g. adding several triples. So datastructure are protected but application can see half-completed changes.\r\n\r\nyes, there is an issue about protection RDF-Model view: https://github.com/owlcs/ont-api/issues/46\r\nAlso, I consider RW-Graph as a collection, similar to `java.util.concurrent.CopyOnWriteArrayList` but for RDF. \r\nSo yes, it is not about ACID (only A).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1642133177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1643835304","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1643835304","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1643835304,"node_id":"IC_kwDOAHF7Ec5h-u-o","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-20T12:27:10Z","updated_at":"2023-07-20T12:35:41Z","author_association":"MEMBER","body":"From the Jena project point of view, it's not desirable to add implementations that support one or two uses if there is a way to use the general machinery. The project fills up with random unloved code with a maintenance cost.\r\n\r\nJena already has `GraphTxn`. Can this be used?\r\n\r\nIt is better than MRSW that `ReadWriteLock` provides (multiple readers OR a single writer). An iterator blocks writers or is inconsistent and may cause CCE. \r\n\r\n`GraphTxn` provides multiple readers AND a single writer so while an iterator is in-use, writers are not held up.\r\n\r\nIt is thread-safe at the moment. It the moment iterators will see complete write transaction atomically appear between `next()` calls. This is a form of \"read commited\" semantics.\r\n\r\nThe only thing I see missing is have a consistent `Graph.find()` so that iterators do not see the overlapping writes\r\nThis can be added -- illustration: https://github.com/apache/jena/pull/1964 It assumes that ExtendedIterator.close is called.\r\n\r\nIt isn't even at risk of blocking other threads if the iterator is not closed; a write on the same thread will fail at the point of the write.\r\n\r\nIf the application uses explicit transactions itself, it will work as well.\r\n\r\nFuseki operations all use transactions.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1643835304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1643880486","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1643880486","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1643880486,"node_id":"IC_kwDOAHF7Ec5h-6Am","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-20T12:57:43Z","updated_at":"2023-07-20T21:40:43Z","author_association":"CONTRIBUTOR","body":"> It is better than MRSW that ReadWriteLock provides (multiple readers OR a single writer). An iterator blocks writers or is inconsistent and may cause CCE.\r\n\r\n`ReadWriteLockingGraph` solution does not prevent iteration of existing iterators even someone forget to close some iterator (and note: all iterators detached from the graph, so low memory leaks probability), but it is prevent creation new iterators, during `releaseToSnapshot` the only one processed iterator is blocked for iteration (I think there could be a solution how to overcome this limitation + I see some more improvements)\r\n\r\nI would not compare `GraphTxn` and `ReadWriteLockingGraph`, they have different scopes and usage.\r\n`GraphTxn` is great but complicated and transaction-oriented, `ReadWriteLockingGraph` is simple and lightweight, could be used as an concurrent collection.\r\n\r\n> Jena already has GraphTxn. Can this be used?\r\n\r\nI think ONT-API library users can use `GraphTxn` as a base graph (ONT-API is just an enhanced wrapper). \r\nBut that's not what ONT-API was created for.\r\n\r\n> From the Jena project point of view, it's not desirable to add implementations that support one or two uses if there is a way to use the general machinery. \r\n\r\nOk, I got the point. If it is the final resolution, then the issue, I think, can be closed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1643880486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1644108595","html_url":"https://github.com/apache/jena/issues/1862#issuecomment-1644108595","issue_url":"https://api.github.com/repos/apache/jena/issues/1862","id":1644108595,"node_id":"IC_kwDOAHF7Ec5h_xsz","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-20T15:12:13Z","updated_at":"2023-07-20T15:12:13Z","author_association":"CONTRIBUTOR","body":"you could also simply do this with your shell :\r\n\r\n```\r\ndatafiles=(data/*.ttl)\r\narq \"${datafiles[@]/#/--data=}\" --query etc...\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1644108595/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1645570295","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1645570295","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1645570295,"node_id":"IC_kwDOAHF7Ec5iFWj3","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-21T13:16:00Z","updated_at":"2023-07-21T13:16:00Z","author_association":"MEMBER","body":"The trouble with locks is deadlocks - both absolute (\"deadly embrace\") and under load (\"deadlock by congestion\").\r\n\r\nDon't mix \"simple\" and \"lightweight\" :-) Java locks are not lightweight. Their contract on the memory model is expensive to the whole application. It's the first generation memory model for Java. It's not a great fit to model processor architectures.\r\n\r\n`GraphTxn` - if the `Txn` troubles you ignore `Txn`.\r\nIt works without needing explicit application control - c.f. SQL has \"auto commit\".\r\n\r\nThe datastructures behind GraphTxn are a Java port of the structures in Scala.\r\n\r\nI don't know ONT-API in detail - what is the contract for the application?\r\n(OWL API doesn't mention it)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1645570295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646241895","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1646241895","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1646241895,"node_id":"IC_kwDOAHF7Ec5iH6hn","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-21T21:09:25Z","updated_at":"2023-07-23T13:40:16Z","author_association":"CONTRIBUTOR","body":"In OWL-API (and ONT-API), there is a concurrent `OWLOntologyManager` in additional to the standard one (e.g. OWL-API impl: https://github.com/owlcs/owlapi/blob/version5/impl/src/main/java/uk/ac/manchester/cs/owl/owlapi/concurrent/ConcurrentOWLOntologyImpl.java)\r\nAll Ontologies in a manager and manager itself use the single `ReadWriteLock` instance, so it is difficult to me to imagine a scenario with deadlocks. The same in ONT-API - RW-lock is not only about Graph operations, but also about managing references between ontologies, etc.\r\n\r\n> what is the contract for the application?\r\n\r\nMaybe \"contract\" is not quite the right term, sorry for the misleading.\r\nThe goal of ONT-API is to support all the features of the classic OWL-API-impl, having an RDF as the basis (with arbitrary nature).\r\n\r\nConcurrent manager is used, for example, in Protege (btw I have RDF-based fork of Protege with ONTAPI inside, as an example of ONTAPI use). Not sure concurrent manager in Protege is a correct solution (there are only two thread - main & EDT. it is a swing application).\r\nAlso, I raised a question https://github.com/owlcs/owlapi/issues/1110\r\nNow we know couple of usages in ancient projects. Maybe someone will give more examples.\r\n\r\n> GraphTxn - if the Txn troubles you ignore Txn.\r\n\r\nI should take a closer look at it. Maybe it would be a new feature in ONTAPI. \r\n\r\n\\+\r\n> Java locks are not lightweight. Their contract on the memory model is expensive to the whole application. It's the first generation memory model for Java. It's not a great fit to model processor architectures.\r\n\r\nMaybe it is second generation? From [wiki] (https://en.wikipedia.org/wiki/Java_memory_model):\r\n*The original Java memory model developed in 1995, was widely perceived as broken, preventing many runtime optimizations and not providing strong enough guarantees for code safety. It was updated through the Java Community Process, as Java Specification Request 133 (JSR-133), which took effect back in 2004, for Tiger (Java 5.0).*\r\n\r\n`java.util.concurrent.locks,ReentrantReadWriteLock` has also been introduced in Java 5.0.\r\nThe first generation of JMM supported only primitives like `synchronized`, `wait`, `notify`.\r\nAtomics, Concurrent Collections, Barriers, Locks have appeared later. Usually they use CAS approach. \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646241895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646519269","html_url":"https://github.com/apache/jena/issues/1966#issuecomment-1646519269","issue_url":"https://api.github.com/repos/apache/jena/issues/1966","id":1646519269,"node_id":"IC_kwDOAHF7Ec5iI-Pl","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-22T07:51:35Z","updated_at":"2023-07-22T07:51:35Z","author_association":"MEMBER","body":"I was thinking that an MRSW transaction would work as a migration path but it isn't as straight forward as that.\r\n\r\nThe problem is that graphs have their own API to transactions which does have a distinction of \"read\" and \"write\" that can be mapper to \"read lock\" and \"write lock\". Lock promotion isn't supported by Jena's ReentrantReadWriteLock.\r\n\r\n`SimpleTransactionHandler` does not support transactions.\r\n\r\nFor now, it is better to leave `Model.getLock` alone, just revise its javadoc.\r\n\r\n[StampedLock](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/StampedLock.html) introduced in Java8 which looks like it might help.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646519269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646521329","html_url":"https://github.com/apache/jena/pull/1967#issuecomment-1646521329","issue_url":"https://api.github.com/repos/apache/jena/issues/1967","id":1646521329,"node_id":"IC_kwDOAHF7Ec5iI-vx","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-22T08:03:38Z","updated_at":"2023-07-22T08:03:38Z","author_association":"MEMBER","body":"Deprecating Model.getLock isn't so simple - see the note on the issue #1966.\r\n\r\nSo I'll remove that part of this PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646521329/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646543401","html_url":"https://github.com/apache/jena/issues/1968#issuecomment-1646543401","issue_url":"https://api.github.com/repos/apache/jena/issues/1968","id":1646543401,"node_id":"IC_kwDOAHF7Ec5iJEIp","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-22T09:39:09Z","updated_at":"2023-07-22T09:39:09Z","author_association":"MEMBER","body":"> I've already raised this issue in Dev ML (can't find the link right now).\r\n\r\nhttps://lists.apache.org/thread/ztfvvz55oz3xmddtrpkfowtsgo9czg5n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1646543401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1648311492","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1648311492","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1648311492,"node_id":"IC_kwDOAHF7Ec5iPzzE","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-24T17:26:15Z","updated_at":"2023-07-24T17:39:29Z","author_association":"MEMBER","body":"> it is difficult to me to imagine a scenario with deadlocks\r\n\r\nThe discussion here is about general support. If graphs implementations are in ONT-API, they can do what is required for that module.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1648311492/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1648337195","html_url":"https://github.com/apache/jena/issues/1968#issuecomment-1648337195","issue_url":"https://api.github.com/repos/apache/jena/issues/1968","id":1648337195,"node_id":"IC_kwDOAHF7Ec5iP6Er","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-24T17:42:31Z","updated_at":"2023-07-24T17:42:31Z","author_association":"MEMBER","body":"Maybe you describe ONT-API briefly on this PR. Is it for managing an ontology - not for executing inference? That's not an issue - we just have to be clear what it is and what it isn't.\r\n\r\nFrom the previous discussion, I don't see anything that a blocker. I'm not completely sure what the permissions connection is - it is for Model, not OntModel anyway.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1648337195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1651128064","html_url":"https://github.com/apache/jena/issues/1972#issuecomment-1651128064","issue_url":"https://api.github.com/repos/apache/jena/issues/1972","id":1651128064,"node_id":"IC_kwDOAHF7Ec5iajcA","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-26T07:25:29Z","updated_at":"2023-07-26T07:25:29Z","author_association":"MEMBER","body":"There might be something useful in the logs, but 3.16.0 is very old, so it is hard for others to help you troubleshooting it.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1651128064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1651864509","html_url":"https://github.com/apache/jena/issues/1972#issuecomment-1651864509","issue_url":"https://api.github.com/repos/apache/jena/issues/1972","id":1651864509,"node_id":"IC_kwDOAHF7Ec5idXO9","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-26T13:57:51Z","updated_at":"2023-07-26T13:57:51Z","author_association":"MEMBER","body":"Hi @Joey-la The logs will show what was happening in the server at the time.\r\n\r\nI don't recall a specific issue between 3.16.0 and the current release 4.9.0 that matches your description.  If you could say some more about the environment, the server configuration and what is being disconnected, we may be able to help.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1651864509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1652193209","html_url":"https://github.com/apache/jena/issues/1968#issuecomment-1652193209","issue_url":"https://api.github.com/repos/apache/jena/issues/1968","id":1652193209,"node_id":"IC_kwDOAHF7Ec5iene5","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-26T17:03:44Z","updated_at":"2023-07-29T10:55:55Z","author_association":"CONTRIBUTOR","body":"1)\r\nA couple words about [OWL-API](https://github.com/owlcs/owlapi) and [ONT-API](https://github.com/owlcs/ont-api), once again.\r\n\r\nEach [org.semanticweb.owlapi.model.OWLOntology](https://github.com/owlcs/owlapi/blob/version5/api/src/main/java/org/semanticweb/owlapi/model/OWLOntology.java) provides access to [org.semanticweb.owlapi.model.OWLAxiom](https://github.com/owlcs/owlapi/blob/version5/api/src/main/java/org/semanticweb/owlapi/model/OWLAxiom.java)s which, in turn, consist of [org.semanticweb.owlapi.model.OWLObject](https://github.com/owlcs/owlapi/blob/version5/api/src/main/java/org/semanticweb/owlapi/model/OWLObject.java)s.\r\nThere are 38 types of OWL2 axioms + SWRL-Rule \"axiom\".\r\nIn the default [OWLAPI-impl](https://github.com/owlcs/owlapi/tree/version5/impl) each `OWLOntology` is a set of `OWLAxiom`s, everything is stored in memory.\r\n\r\nThere is a generic interface [org.semanticweb.owlapi.reasoner.OWLReasoner](https://github.com/owlcs/owlapi/blob/version5/api/src/main/java/org/semanticweb/owlapi/reasoner/OWLReasoner.java). In OWLAPI there are several limited implementations.\r\n\\+ Also, there are several external, advanced, implementations of `OWLReasoner`: [jfact](https://github.com/owlcs/jfact), [hermit](https://github.com/owlcs/hermit-reasoner), [openllet](https://github.com/Galigator/openllet).\r\n\r\nONT-API is an alternative implementation of OWLAPI-api. There is no any reasoner, but of course it can be used by any `OWLReasoner`.\r\n\r\nIn ONT-API there are tree layers:\r\n- Jena's `Graph`\r\n- Jena's extended `Model` with OWL2 support \r\n- OWLAPI-api implementation\r\n\r\nThanks to the fact that we have RDF under the hood, we can use OWL2 together with SHACL, SPARQL, etc. Also, any Graph could underlay, not only in-memory implementations. If some RDF construction does not meet the OWL2 specification, it is invisible from the top-level of ONT-API.\r\n\r\nThere is concurrent support via `ReadWriteLock`, but only for the first level ([`ReadWriteLockingGraph`](https://github.com/sszuev/concurrent-rdf-graph/blob/main/src/main/kotlin/ReadWriteLockingGraph.kt)) and the last one.\r\n\r\nI think, the whole ONT-API's code is not very suitable to be merged into Jena. But second level (Jena's extended `Model`) could be, it is closer to what Jena already has.\r\n\r\n2) \r\nHere is a spin-off of ONT-API - https://github.com/sszuev/jena-owl2 project. It contains second level: extended Jena `Model` - [com.github.sszuev.jena.ontapi.model.OntModel](https://github.com/sszuev/jena-owl2/blob/main/src/main/java/com/github/sszuev/jena/ontapi/model/OntModel.java)\r\nThe goal of this project is to repeat all the `org.apache.jena.ontology.OntModel`'s functionality, including rules-inference support, different specs, document-manager, etc. It is currently under development. At the moment there are only `OWL2_MEM`, `RDFS_MEM` and `OWL2_DL_MEM_RDFS_BUILTIN_INF` specs. `OntModel` is not `InfModel` yet.\r\n `ReadWriteLockingGraph` will not be part of this model-api (at least in the first release).\r\n\r\n`OntModel` interface supports all the feature of OWL2 and also SWRL (since it is present in OWLAPI).\r\n\r\nExample:\r\n```java\r\nOntModel m = OntModelFactory.createModel().setNsPrefixes(OntModelFactory.STANDARD);\r\nm.createDataAllValuesFrom(List.of(m.createDataProperty(\"dp\")), m.createDataRestriction(m.getDatatype(XSD.xstring),\r\n                m.createFacetRestriction(OntFacetRestriction.MaxLength.class, m.createTypedLiteral(42))))\r\n        .addEquivalentClass(m.createOntClass(\"C\"));\r\nm.ontObjects(OntClass.class).forEach(System.out::println);\r\nm.ontEntities().forEach(System.out::println);\r\nm.write(System.out, \"ttl\");\r\n```\r\nFor more examples see wiki https://github.com/owlcs/ont-api/wiki\r\n\r\nThere are no OWLAxiom objects, just like in `org.apache.jena.ontology.OntModel`.\r\nThere is [com.github.sszuev.jena.ontapi.UnionGraph](https://github.com/sszuev/jena-owl2/blob/main/src/main/java/com/github/sszuev/jena/ontapi/UnionGraph.java), any changes in imported ontologies (`owl:import`) are visible in the top-level.\r\n\r\nFor developing I use Jena's OntModel tests (tests rewritten and expanded with new tests): https://github.com/sszuev/jena-ont-tests `org.apache.jena.ontology.OntModel`'s documentation, and sometimes its implementation (but usually it is difficult to understand that code, it's easier to write from scratch)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1652193209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1653664798","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1653664798","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1653664798,"node_id":"IC_kwDOAHF7Ec5ikOwe","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-27T13:47:55Z","updated_at":"2023-07-27T13:47:55Z","author_association":"CONTRIBUTOR","body":"> Jena already has GraphTxn. Can this be used?\r\n\r\nI see `GraphTxn` is an in-memory Graph.\r\nhttps://github.com/apache/jena/blob/main/jena-arq/src/main/java/org/apache/jena/sparql/graph/GraphFactory.java#L45\r\n\r\nI think, due to this fact it is not very suitable for the library ONT-API, it is intended to wrap any graph, providing concurrent access out-of-box (maybe important, in the ONT-API there are two ways: concurrent and non-concurrent)\r\n\r\n\\+ I see lack of documentation, nothing is said about the fact that this graph is thread-safe.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1653664798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1657187392","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1657187392","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1657187392,"node_id":"IC_kwDOAHF7Ec5ixqxA","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-30T14:25:05Z","updated_at":"2023-07-30T14:32:08Z","author_association":"CONTRIBUTOR","body":"I did a quick research, it shows that in some cases `GraphTxn` has worse performance than RW and Synchronized Graphs. But of course need JMH benchmarks to proof or disproof this conclusion. Note that apparently the performance and memory consumption of RW Graph can be improved (https://github.com/sszuev/concurrent-rdf-graph/issues/1).\r\n\r\n![image](https://github.com/apache/jena/assets/17473366/42e6f87f-6c1d-41e1-9d64-2457cc555e29)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1657187392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1657764573","html_url":"https://github.com/apache/jena/issues/1976#issuecomment-1657764573","issue_url":"https://api.github.com/repos/apache/jena/issues/1976","id":1657764573,"node_id":"IC_kwDOAHF7Ec5iz3rd","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T06:43:30Z","updated_at":"2023-07-31T06:43:30Z","author_association":"MEMBER","body":"An RDF graph is a set of triples - there are no duplicates in a graph.\r\n\r\nA triple can be in several graphs. If you use the union default graph feature (make the default graph for query be the union of all the named graphs), there will still only be one triple in the default graph.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1657764573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1657779739","html_url":"https://github.com/apache/jena/issues/1976#issuecomment-1657779739","issue_url":"https://api.github.com/repos/apache/jena/issues/1976","id":1657779739,"node_id":"IC_kwDOAHF7Ec5iz7Yb","user":{"login":"xilixii","id":76767481,"node_id":"MDQ6VXNlcjc2NzY3NDgx","avatar_url":"https://avatars.githubusercontent.com/u/76767481?v=4","gravatar_id":"","url":"https://api.github.com/users/xilixii","html_url":"https://github.com/xilixii","followers_url":"https://api.github.com/users/xilixii/followers","following_url":"https://api.github.com/users/xilixii/following{/other_user}","gists_url":"https://api.github.com/users/xilixii/gists{/gist_id}","starred_url":"https://api.github.com/users/xilixii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xilixii/subscriptions","organizations_url":"https://api.github.com/users/xilixii/orgs","repos_url":"https://api.github.com/users/xilixii/repos","events_url":"https://api.github.com/users/xilixii/events{/privacy}","received_events_url":"https://api.github.com/users/xilixii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T06:57:40Z","updated_at":"2023-07-31T06:57:40Z","author_association":"NONE","body":"Thanks @afs ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1657779739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658035278","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1658035278","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1658035278,"node_id":"IC_kwDOAHF7Ec5i05xO","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T09:44:45Z","updated_at":"2023-07-31T10:20:47Z","author_association":"CONTRIBUTOR","body":"@afs \r\n\r\nIs it closed intentionally or accidentally (due to commit message)? It is OK for me if Jena doesn't need this thread-safe wrapper (lightweight and simple in my opinion), but it might be better if an explicit final resolution was written.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658035278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658332361","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1658332361","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1658332361,"node_id":"IC_kwDOAHF7Ec5i2CTJ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T13:02:28Z","updated_at":"2023-07-31T13:02:28Z","author_association":"MEMBER","body":"Side-effect of the PR. Reopened.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658332361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658354208","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1658354208","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1658354208,"node_id":"IC_kwDOAHF7Ec5i2Hog","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T13:16:08Z","updated_at":"2023-07-31T13:16:08Z","author_association":"MEMBER","body":"GraphTx does more. Because that includes multiple true concurrent views of the data it will cost more.\r\n\r\nIt does not require the Kotlin runtime.\r\n\r\nThis is like \"autocommit\" for SQL databases. It has all the consequences of that as well. It has more overhead, and does give application change consistency (e.g. a read-modify-write) is two transactions and other transactions/thread may change or view the database between the \"read\" and the \"write\").\r\n\r\nA back account with $1000. To add to the account, an app reads the amount, adds the extra amount, deltes the old value and writes the new value (let' assume there is a modify does delete-add atomically and not get into the fact `Model` doesn't have such a thing).\r\n\r\nThread A adds $500, thread B adds $250, what is the account now? With just safe read-modify operations, the answer is one of $1250, $1500, and $1750 depending on the way the operations interleave.\r\n\r\nAny solution to the concurrent read-modify-write needs the application to indicate the start and finish of \r\na block of code so it can read the data, decide on the change and write the data without any other code invalidating the decision.\r\n\r\n`Model` provides `enterCriticalSection` and `leaveCriticalSection`. This is rather old fashioned way to deal with the problem. But it at least gives a block of code over several operations.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658354208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658429038","html_url":"https://github.com/apache/jena/issues/1948#issuecomment-1658429038","issue_url":"https://api.github.com/repos/apache/jena/issues/1948","id":1658429038,"node_id":"IC_kwDOAHF7Ec5i2Z5u","user":{"login":"cdekok","id":190633,"node_id":"MDQ6VXNlcjE5MDYzMw==","avatar_url":"https://avatars.githubusercontent.com/u/190633?v=4","gravatar_id":"","url":"https://api.github.com/users/cdekok","html_url":"https://github.com/cdekok","followers_url":"https://api.github.com/users/cdekok/followers","following_url":"https://api.github.com/users/cdekok/following{/other_user}","gists_url":"https://api.github.com/users/cdekok/gists{/gist_id}","starred_url":"https://api.github.com/users/cdekok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdekok/subscriptions","organizations_url":"https://api.github.com/users/cdekok/orgs","repos_url":"https://api.github.com/users/cdekok/repos","events_url":"https://api.github.com/users/cdekok/events{/privacy}","received_events_url":"https://api.github.com/users/cdekok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T13:58:34Z","updated_at":"2023-07-31T14:09:43Z","author_association":"NONE","body":"What is the alternative API to use? it's marked as deprecated but no alternative seems to be provided as Node_Literal has a private constructor?\r\n\r\nI guess it's now only by calling the NodeFactory? e.g `NodeFactory.createLiteralByValue(x, y)`","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658429038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658715243","html_url":"https://github.com/apache/jena/issues/1948#issuecomment-1658715243","issue_url":"https://api.github.com/repos/apache/jena/issues/1948","id":1658715243,"node_id":"IC_kwDOAHF7Ec5i3fxr","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T16:19:56Z","updated_at":"2023-07-31T16:19:56Z","author_association":"MEMBER","body":"Which operation are you referring to? What is the caller trying to do?\r\n\r\nNodeFactory is the preferred way to create nodes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658715243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658816796","html_url":"https://github.com/apache/jena/issues/1972#issuecomment-1658816796","issue_url":"https://api.github.com/repos/apache/jena/issues/1972","id":1658816796,"node_id":"IC_kwDOAHF7Ec5i34kc","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T17:18:43Z","updated_at":"2023-07-31T17:18:43Z","author_association":"MEMBER","body":"Hi @Joey-la - did you solve this?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658816796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658852666","html_url":"https://github.com/apache/jena/issues/1948#issuecomment-1658852666","issue_url":"https://api.github.com/repos/apache/jena/issues/1948","id":1658852666,"node_id":"IC_kwDOAHF7Ec5i4BU6","user":{"login":"cdekok","id":190633,"node_id":"MDQ6VXNlcjE5MDYzMw==","avatar_url":"https://avatars.githubusercontent.com/u/190633?v=4","gravatar_id":"","url":"https://api.github.com/users/cdekok","html_url":"https://github.com/cdekok","followers_url":"https://api.github.com/users/cdekok/followers","following_url":"https://api.github.com/users/cdekok/following{/other_user}","gists_url":"https://api.github.com/users/cdekok/gists{/gist_id}","starred_url":"https://api.github.com/users/cdekok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdekok/subscriptions","organizations_url":"https://api.github.com/users/cdekok/orgs","repos_url":"https://api.github.com/users/cdekok/repos","events_url":"https://api.github.com/users/cdekok/events{/privacy}","received_events_url":"https://api.github.com/users/cdekok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T17:36:15Z","updated_at":"2023-07-31T17:37:01Z","author_association":"NONE","body":"I have a LiterLabel from the LiterlalLabelFactory, but with this change i can't convert it to a node anymore which is a bit weird.\r\nI can do a workaround with the NodeFactory but IMO then the LiteralLabelFactory has little use.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1658852666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1659843299","html_url":"https://github.com/apache/jena/pull/1977#issuecomment-1659843299","issue_url":"https://api.github.com/repos/apache/jena/issues/1977","id":1659843299,"node_id":"IC_kwDOAHF7Ec5i7zLj","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-01T08:39:48Z","updated_at":"2023-08-01T08:39:48Z","author_association":"MEMBER","body":"This upgrade combined with and #1980 (Caffeine) cause a dependency convergence error in `jena-serviceenhancer`\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce) on project jena-serviceenhancer: \r\n[ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.DependencyConvergence failed with message:\r\n[ERROR] Failed while enforcing releasability.\r\n[ERROR] \r\n[ERROR] Dependency convergence error for org.checkerframework:checker-qual:jar:3.36.0 paths to dependency are:\r\n[ERROR] +-org.apache.jena:jena-serviceenhancer:jar:4.10.0-SNAPSHOT\r\n[ERROR]   +-org.apache.jena:jena-arq:jar:4.10.0-SNAPSHOT:compile\r\n[ERROR]     +-org.apache.jena:jena-core:jar:4.10.0-SNAPSHOT:compile\r\n[ERROR]       +-org.apache.jena:jena-base:jar:4.10.0-SNAPSHOT:compile\r\n[ERROR]         +-com.github.ben-manes.caffeine:caffeine:jar:3.1.7:compile\r\n[ERROR]           +-org.checkerframework:checker-qual:jar:3.36.0:compile\r\n[ERROR] and\r\n[ERROR] +-org.apache.jena:jena-serviceenhancer:jar:4.10.0-SNAPSHOT\r\n[ERROR]   +-com.google.guava:guava:jar:32.1.2-jre:compile\r\n[ERROR]     +-org.checkerframework:checker-qual:jar:3.33.0:compile\r\n[ERROR] \r\n[ERROR] \r\n[ERROR] Dependency convergence error for com.google.errorprone:error_prone_annotations:jar:2.20.0 paths to dependency are:\r\n[ERROR] +-org.apache.jena:jena-serviceenhancer:jar:4.10.0-SNAPSHOT\r\n[ERROR]   +-org.apache.jena:jena-arq:jar:4.10.0-SNAPSHOT:compile\r\n[ERROR]     +-org.apache.jena:jena-core:jar:4.10.0-SNAPSHOT:compile\r\n[ERROR]       +-org.apache.jena:jena-base:jar:4.10.0-SNAPSHOT:compile\r\n[ERROR]         +-com.github.ben-manes.caffeine:caffeine:jar:3.1.7:compile\r\n[ERROR]           +-com.google.errorprone:error_prone_annotations:jar:2.20.0:compile\r\n[ERROR] and\r\n[ERROR] +-org.apache.jena:jena-serviceenhancer:jar:4.10.0-SNAPSHOT\r\n[ERROR]   +-com.google.guava:guava:jar:32.1.2-jre:compile\r\n[ERROR]     +-com.google.errorprone:error_prone_annotations:jar:2.18.0:compile\r\n[ERROR] \r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1659843299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1660415389","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1660415389","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1660415389,"node_id":"IC_kwDOAHF7Ec5i9-2d","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-01T14:12:02Z","updated_at":"2023-09-08T08:58:10Z","author_association":"CONTRIBUTOR","body":"I understand your example.\r\n\r\nOf course, thread-safe Graphs cannot replace transactional ones. I think they have different fields of application. Analogy: `Redis` vs `ConcurrentHashMap`.\r\n\r\nIt seems to me that the main question in this issue is whether it will be useful to someone or not. If not, then perhaps we shouldn't add this functionality to Apache Jena. \r\nThat's why I'm asking here: we need more examples of possible use. I also asked in the OWLCS group.\r\n\r\nThere is definitely one example of use: ONTAPI. I'm thinking of other examples, but so far such examples are purely speculative.\r\n\r\nFor example, we could collect a graph from various sources simultaneously and display it as a tree or a set of axioms on various devices without consistency. Perhaps even co-edit (but it seems in this case a transactional graph is more suitable).\r\n\r\nMaybe we could use a thread-safe graph as a kind of cache. The `Caffeine` cache uses `ConcurrentHashMap`, so why not. \r\n\r\nAnd of course, a thread-safe graph-wrapper has some advantages over a transactional one - performance and the ability to wrap any graph. Maybe it would be useful for someone.\r\n\r\nI asked a colleague about additional examples, if we come up with something, I will edit this comment.\r\n\r\n**UDP-1**: Found one real example from business project: we collect data from different sources (cockroach db) in parallel and then write data to RDF Graph. Maybe right now the performance of  `GraphTxn` is not bottleneck since db-operation costs must be more expensive. But we may change algorithm, e.g. process that graph on-fly. From DB we get entities, attributes and links (in OWL terms - class assertions, object & property assertions), so no conflicts are expected since we process in a stream not single triplet one by one, but a set of connected triplets for each entity. Maybe we will change this solution not to use single-graph algorithm. \r\n\r\n**UDP-2**: Asked ChatGPT:\r\n- Question: `given: concurrent RDF Graph implementation, no transaction (no ACID), provide use-cases where concurrent implementation will be better than ACID implementation. Note: ACID impl has worse performance`\r\n- Answer: \r\n```\r\nConcurrent RDF Graph implementations without the ACID properties (Atomicity, Consistency, Isolation, and Durability) trade data consistency guarantees for improved performance and efficiency, which can make them suitable for specific use cases. Below are some scenarios where a concurrent implementation might be a better choice than an ACID implementation, despite the latter providing stronger consistency guarantees:\r\n\r\n1. Data ingestion and analysis: In scenarios where large volumes of data need to be ingested and analyzed rapidly, such as in the IoT or social media streams, a concurrent RDF Graph implementation can handle the high throughput more efficiently, as long as occasional inconsistencies are tolerable.\r\n\r\n2. Real-time recommendations and collaborative filtering: When providing real-time recommendations for items like news articles, movies, or products, a concurrent RDF implementation might offer better performance for query processing. Since recommendations don't require transactions or strict consistency, this can be suitable for large-scale applications that necessitate quick response times.\r\n\r\n3. Cache maintenance: Concurrent implementation can be used as a frontend cache to regularly update synchronized RDF graphs, providing faster access to recently updated data. The non-ACID nature is not critical in this case, as long as the source of truth remains an ACID-based store.\r\n\r\n4. Data exploration, visualization, and dashboarding: Since these use cases often require low latency and a flexible query capability, a concurrent RDF implementation can be more suitable. In these scenarios, eventual consistency is often acceptable, as users are more focused on overall trends and insights rather than strict accuracy.\r\n\r\n5. Scientific simulations and modeling: Concurrent implementations can be particularly useful for large-scale simulations or modeling scenarios, such as climate studies or genomics research, where the sheer volume of data and frequent updates demand improved performance over strict consistency.\r\n\r\n6. High availability (A/B testing, load balancing, and failover): In systems where high availability and redundancy are important, a concurrent RDF implementation can ensure that replicas of the graph continue to operate despite occasional inconsistencies. In these cases, the speed of replication outweighs the need for perfect consistency.\r\n\r\nAs with any data management system, the choice of implementation depends on the specific use case and requirements. When absolute data consistency is less critical than performance, a concurrent RDF Graph implementation can offer various advantages over an ACID-compliant implementation.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1660415389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1661066170","html_url":"https://github.com/apache/jena/issues/1948#issuecomment-1661066170","issue_url":"https://api.github.com/repos/apache/jena/issues/1948","id":1661066170,"node_id":"IC_kwDOAHF7Ec5jAdu6","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-01T20:44:42Z","updated_at":"2023-08-07T15:41:49Z","author_association":"MEMBER","body":"Interesting. \r\n\r\nI have been looking at the Node area to see what can be simplified. Some generality is not used anywhere and has not come up on the mailing list of StackOverflow. I doubt it'll make a significant impact to be simpler, maybe a little extra performance because of less indirections for some processing intense code, and maybe a bit of space saving at scale.\r\n\r\nNode_Literal and LiteralLabel, especially in the light of the new term-centric graphs, are a area. I really do wonder what the significant of LiteralLabel is and I was wondering if LiteralLabel could be pulled up into Node_Literal. There is an impact on the `RDFDataype.isEqual` operation -- which should really be called \"sameValueAs\" because \"equal\" has multiple meanings (java .equals, sameTermAs sameValueAs).\r\n\r\nWhat are you using LiteralLabel for? Is Node_Literal not the right concept for the usage?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1661066170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1662963253","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1662963253","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1662963253,"node_id":"IC_kwDOAHF7Ec5jHs41","user":{"login":"arne-bdt","id":53625519,"node_id":"MDQ6VXNlcjUzNjI1NTE5","avatar_url":"https://avatars.githubusercontent.com/u/53625519?v=4","gravatar_id":"","url":"https://api.github.com/users/arne-bdt","html_url":"https://github.com/arne-bdt","followers_url":"https://api.github.com/users/arne-bdt/followers","following_url":"https://api.github.com/users/arne-bdt/following{/other_user}","gists_url":"https://api.github.com/users/arne-bdt/gists{/gist_id}","starred_url":"https://api.github.com/users/arne-bdt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arne-bdt/subscriptions","organizations_url":"https://api.github.com/users/arne-bdt/orgs","repos_url":"https://api.github.com/users/arne-bdt/repos","events_url":"https://api.github.com/users/arne-bdt/events{/privacy}","received_events_url":"https://api.github.com/users/arne-bdt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-02T21:04:44Z","updated_at":"2023-08-02T21:04:44Z","author_association":"CONTRIBUTOR","body":"Although I initially didn't plan to share this, given our ongoing discussion, I believe it's appropriate...\r\n\r\nI'm currently developing a thread-safe graph for Jena, which supports a multiple-reader plus single-writer (MR+SW) model. The existing implementation in Jena is based on [Dexx collections](https://github.com/andrewoma/dexx), which are \"a port of Scala's immutable, persistent collection classes to pure Java.\" This approach has numerous advantages, such as simple implementation, minimal locking requirements, and robustness. However, its main drawback is its poor performance and heavy reliance on the garbage collector.\r\n\r\nMy goal is to offer an alternative that should provide better performance. However, as this new model isn't based on immutable persistent collections, it's quite a delicate endeavor.\r\n\r\nThese graphs could form the foundation for an alternative thread-safe Dataset implementation. Therefore, they could potentially be used in Fuseki.\r\n\r\nPlease note that this is a work in progress and may take a few more weeks (or potentially months) to develop. It's still in an early stage and may need several rounds of refactoring. The current state of development suggests that my plan can be successful. Even considering the overhead of locking, thread-local variables, and some duplicate operations, this implementation can significantly outperform existing ones (as always, this will depend on specific use cases).\r\n\r\nFor anyone who can't resist a sneak peek, you can check out the progress at:\r\n[https://github.com/arne-bdt/jena/blob/SWMR_Dataset/jena-arq/src/main/java/org/apache/jena/sparql/core/mem2/GraphWrapperTransactional.java](https://github.com/arne-bdt/jena/blob/SWMR_Dataset/jena-arq/src/main/java/org/apache/jena/sparql/core/mem2/GraphWrapperTransactional.java)\r\n\r\nPlease be patient with me if my approach ends up not being successful. I'm doing my best to tackle this, but there's a high risk of failure.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1662963253/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663534977","html_url":"https://github.com/apache/jena/pull/1977#issuecomment-1663534977","issue_url":"https://api.github.com/repos/apache/jena/issues/1977","id":1663534977,"node_id":"IC_kwDOAHF7Ec5jJ4eB","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-03T08:37:31Z","updated_at":"2023-08-03T08:37:31Z","author_association":"MEMBER","body":"@dependabot recreate","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663534977/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663535321","html_url":"https://github.com/apache/jena/pull/1980#issuecomment-1663535321","issue_url":"https://api.github.com/repos/apache/jena/issues/1980","id":1663535321,"node_id":"IC_kwDOAHF7Ec5jJ4jZ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-03T08:37:45Z","updated_at":"2023-08-03T08:37:45Z","author_association":"MEMBER","body":"@dependabot recreate","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663535321/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663536166","html_url":"https://github.com/apache/jena/pull/1980#issuecomment-1663536166","issue_url":"https://api.github.com/repos/apache/jena/issues/1980","id":1663536166,"node_id":"IC_kwDOAHF7Ec5jJ4wm","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-03T08:38:19Z","updated_at":"2023-08-03T08:38:19Z","author_association":"CONTRIBUTOR","body":"Looks like com.github.ben-manes.caffeine:caffeine is up-to-date now, so this is no longer needed.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663536166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663536353","html_url":"https://github.com/apache/jena/pull/1977#issuecomment-1663536353","issue_url":"https://api.github.com/repos/apache/jena/issues/1977","id":1663536353,"node_id":"IC_kwDOAHF7Ec5jJ4zh","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2023-08-03T08:38:27Z","updated_at":"2023-08-03T08:38:27Z","author_association":"CONTRIBUTOR","body":"Looks like com.google.guava:guava is up-to-date now, so this is no longer needed.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1663536353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1666442368","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1666442368","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1666442368,"node_id":"IC_kwDOAHF7Ec5jU-SA","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-05T08:40:40Z","updated_at":"2023-08-05T08:40:40Z","author_association":"MEMBER","body":"Hi @flange-ipb,\r\n\r\nThank you for the clear description and the details.\r\n\r\nIs it only operations that completely clear the default graph?\r\nIf you delete a few triples that are indexed, does the number of text index results remain the same?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1666442368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1667687322","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1667687322","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1667687322,"node_id":"IC_kwDOAHF7Ec5jZuOa","user":{"login":"flange-ipb","id":34936695,"node_id":"MDQ6VXNlcjM0OTM2Njk1","avatar_url":"https://avatars.githubusercontent.com/u/34936695?v=4","gravatar_id":"","url":"https://api.github.com/users/flange-ipb","html_url":"https://github.com/flange-ipb","followers_url":"https://api.github.com/users/flange-ipb/followers","following_url":"https://api.github.com/users/flange-ipb/following{/other_user}","gists_url":"https://api.github.com/users/flange-ipb/gists{/gist_id}","starred_url":"https://api.github.com/users/flange-ipb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flange-ipb/subscriptions","organizations_url":"https://api.github.com/users/flange-ipb/orgs","repos_url":"https://api.github.com/users/flange-ipb/repos","events_url":"https://api.github.com/users/flange-ipb/events{/privacy}","received_events_url":"https://api.github.com/users/flange-ipb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T11:32:20Z","updated_at":"2023-08-07T11:56:44Z","author_association":"NONE","body":"Hello @afs,\r\n\r\nthe problem seems to be only with operations that clear the graph. If selected triples are deleted, then the index is updated.\r\n\r\nA more careful analysis:\r\n(Note: Between each of the tests I stopped Fuseki and deleted the TDB2 dataset, the Lucene index and the *run* directories.)\r\n\r\n**Graph Store HTTP Protocol**\r\n* `POST http://127.0.0.1:3030/dataset/data`: Looks good.\r\n  * POST data to an empty dataset\r\n  * POST the same data to an existing dataset\r\n  * POST new triples to an existing dataset\r\n  * POST new and existing triples to an existing dataset\r\n  * POST empty turtle file to an existing dataset\r\n* `PUT http://127.0.0.1:3030/dataset/data`:\r\n  * PUT data on an empty dataset: Looks good.\r\n  * PUT the same data to an existing dataset: **Not good.** Adds the \"new\" triples to the text index and doesn't remove the \"old\" ones.\r\n  * PUT new triples to an existing dataset: **Not good.** Adds the new triples to the text index, but doesn't remove the old ones.\r\n  * PUT new and existing triples to an existing dataset: **Not good.** Adds the new and the overwritten triples to the text index.\r\n  * PUT empty turtle file to an existing dataset: **Not good.** Doesn't remove the triples from the text index.\r\n* `DELETE http://127.0.0.1:3030/dataset/data?default`: **Not good.** Doesn't remove the triples from the text index.\r\n\r\n**SPARQL Update** (`POST http://127.0.0.1:3030/dataset/update`)\r\n* INSERT: Looks good.\r\n  * INSERT data into an empty dataset (`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>PREFIX dfgfo: <https://github.com/tibonto/dfgfo/>INSERT DATA {  dfgfo:101-03 rdfs:label \"Ancient History\"@en .}`)\r\n  * INSERT set same data into an existing dataset (same SPARQL Update query as before)\r\n  * INSERT new triples to an existing dataset (`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>PREFIX dfgfo: <https://github.com/tibonto/dfgfo/>INSERT DATA {  dfgfo:102-01 rdfs:label \"Medieval History\"@en .}`)\r\n  * INSERT new and existing triples into an existing dataset (`PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>PREFIX dfgfo: <https://github.com/tibonto/dfgfo/>INSERT DATA {  dfgfo:101-03 rdfs:label \"Ancient History\"@en . dfgfo:102-01 rdfs:label \"Medieval History\"@en .}`)\r\n* DELETE:\r\n  * I prepared the dataset by loading *dfgfo.ttl*, then executed `PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>PREFIX dfgfo: <https://github.com/tibonto/dfgfo/>DELETE DATA {  dfgfo:101-03 rdfs:label \"Ancient History\"@en .}`: Looks good. The triple is removed from the text index.\r\n* LOAD (`LOAD <file:///path/to/file.ttl>`): This repeats what I did with GSP POST and PUT. Looks good.\r\n  * LOAD data into an empty dataset\r\n  * LOAD the same data into an existing dataset\r\n  * LOAD new triples into an existing dataset\r\n  * LOAD new and existing triples into an existing dataset\r\n  * LOAD empty turtle file into an existing dataset\r\n* CLEAR:\r\n  * `CLEAR default`: **Not good.** Same behaviour like GSP DELETE.\r\n* DROP:\r\n  * `DROP default`: **Not good.** Same behaviour like GSP DELETE.\r\n* COPY: I added `<#entMap> text:graphField \"graph\" .` to *config-text-tdb2.ttl*, loaded some data into a named graph and then copied it into the default graph (`COPY <http://example.org/dfgfo> TO DEFAULT`). This emulates what I did with GSP POST and PUT.\r\n  * COPY into empty default graph: Looks good.\r\n  * COPY the same data into non-empty default graph: **Not good.** Adds the \"new\" triples to the text index and doesn't remove the \"old\" ones (like GSP PUT).\r\n  * COPY new triples into non-empty default graph: **Not good.** Adds the \"new\" triples to the text index and doesn't remove the \"old\" ones.\r\n  * COPY new and existing triples into non-empty default graph: **Not good.** Adds the new and the overwritten triples to the text index and doesn't remove the \"old\" ones.\r\n  * COPY data from empty named graph into non-empty default graph: Impossible, because Jena doesn't record empty named graphs.\r\n  * COPY data from empty default graph into non-empty named graph (`COPY DEFAULT TO <http://example.org/dfgfo>`), then run SPARQL SELECT to check the text index on named graph: Looks good. Empty named graph does not exist and Lucene index is empty (I checked the Lucene directory.)\r\n* MOVE: ...\r\n* ADD: ...\r\n\r\nAlright, I'm about to loose my mind with manual testing. If necessary, I can contribute some unit tests. I just need some help to get started - let's say a TDB2 dataset (can you run GSP operations on it programmatically?) with a Lucene index or an embedded Fuseki with the right dataset configuration.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1667687322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1667721481","html_url":"https://github.com/apache/jena/issues/1948#issuecomment-1667721481","issue_url":"https://api.github.com/repos/apache/jena/issues/1948","id":1667721481,"node_id":"IC_kwDOAHF7Ec5jZ2kJ","user":{"login":"cdekok","id":190633,"node_id":"MDQ6VXNlcjE5MDYzMw==","avatar_url":"https://avatars.githubusercontent.com/u/190633?v=4","gravatar_id":"","url":"https://api.github.com/users/cdekok","html_url":"https://github.com/cdekok","followers_url":"https://api.github.com/users/cdekok/followers","following_url":"https://api.github.com/users/cdekok/following{/other_user}","gists_url":"https://api.github.com/users/cdekok/gists{/gist_id}","starred_url":"https://api.github.com/users/cdekok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdekok/subscriptions","organizations_url":"https://api.github.com/users/cdekok/orgs","repos_url":"https://api.github.com/users/cdekok/repos","events_url":"https://api.github.com/users/cdekok/events{/privacy}","received_events_url":"https://api.github.com/users/cdekok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T11:58:14Z","updated_at":"2023-08-07T11:58:30Z","author_association":"NONE","body":"Currently I have some code that is writing code to RDF, so for example.\r\n\r\n```kotlin\r\nval value = LiteralLabelFactory.createTypedLiteral(true)\r\nval node = NodeFactory.createLiteral(label)\r\n```\r\n\r\nNow this can be converted ofcourse to just using the NodeFactory e.g\r\n\r\n```kotlin\r\nNodeFactory.createLiteralByValue(true, XSDDatatype.XSDboolean)\r\n```\r\n\r\nIt would be nice if the doc block would point to a use method when marking methods as deprecated.\r\n\r\nCurrently the method `NodeFactory.createLiteral` is marked as deprecated, but the `LiteralLabelFactory` is not only it's not possible to convert a LiteralLabel to a Node anymore since Node_Literal constructor is private.\r\n\r\nThe intention of the deprecated is a bit unclear for me, what incorrect states should it prevent, and why can I create LiteralLabels but not turn them into nodes?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1667721481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1668131401","html_url":"https://github.com/apache/jena/issues/1948#issuecomment-1668131401","issue_url":"https://api.github.com/repos/apache/jena/issues/1948","id":1668131401,"node_id":"IC_kwDOAHF7Ec5jbapJ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T15:50:19Z","updated_at":"2023-08-07T15:50:19Z","author_association":"MEMBER","body":"A lot of this is legacy (in relation to RDF 1.0), and reasons can be lost in the lost in the mists of time.\r\n\r\nI don't see the point of LiteralLabel from the viewpoint of today's Jena. As an interface, it has one implementation. It's in teh `impl` package but has leaked. Maybe the possibility was for complex values was there, but that does not make sense in a SPARQL world.\r\n\r\n`NodeFactory.createLiteralByValue` is the operation to use.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1668131401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1668140869","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1668140869","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1668140869,"node_id":"IC_kwDOAHF7Ec5jbc9F","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-07T15:56:05Z","updated_at":"2023-08-07T15:56:05Z","author_association":"MEMBER","body":"Hi @flange-ipb - that's very useful. I have an idea of which code path is involved.\r\n\r\nBy the way: COPY does leave the original triples behind.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1668140869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1672672425","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1672672425","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1672672425,"node_id":"IC_kwDOAHF7Ec5jsvSp","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-10T07:04:37Z","updated_at":"2023-08-10T07:04:37Z","author_association":"CONTRIBUTOR","body":"looks like `clear` from `DatasetGraphWrapper` isn't overridden in its extending class [`DatasetGraphTextMonitor`](https://github.com/apache/jena/blob/main/jena-text/src/main/java/org/apache/jena/query/text/changes/DatasetGraphTextMonitor.java) , right?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1672672425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1673023915","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1673023915","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1673023915,"node_id":"IC_kwDOAHF7Ec5juFGr","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-10T11:13:35Z","updated_at":"2023-08-10T11:13:35Z","author_association":"MEMBER","body":"Yes - it doesn't loop back to `DatasetGraphTextMonitor.deleteAny` (this is a general consequence of wrappers).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1673023915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1673618813","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1673618813","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1673618813,"node_id":"IC_kwDOAHF7Ec5jwWV9","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-10T17:25:03Z","updated_at":"2023-08-10T17:25:03Z","author_association":"MEMBER","body":"> Yes\r\n\r\nYes, but.\r\n\r\n`DROP` and `CLEAR default` operate on graphs, not the whole dataset. They use `GraphView.clear` (default graph) or `DatasetGraph.removeGraph` (drop named graph).\r\n\r\nThey don't go via `DatasetGraphText.clear` although that does need intercepting.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1673618813/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1679611564","html_url":"https://github.com/apache/jena/issues/1987#issuecomment-1679611564","issue_url":"https://api.github.com/repos/apache/jena/issues/1987","id":1679611564,"node_id":"IC_kwDOAHF7Ec5kHNas","user":{"login":"william-vw","id":11859376,"node_id":"MDQ6VXNlcjExODU5Mzc2","avatar_url":"https://avatars.githubusercontent.com/u/11859376?v=4","gravatar_id":"","url":"https://api.github.com/users/william-vw","html_url":"https://github.com/william-vw","followers_url":"https://api.github.com/users/william-vw/followers","following_url":"https://api.github.com/users/william-vw/following{/other_user}","gists_url":"https://api.github.com/users/william-vw/gists{/gist_id}","starred_url":"https://api.github.com/users/william-vw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/william-vw/subscriptions","organizations_url":"https://api.github.com/users/william-vw/orgs","repos_url":"https://api.github.com/users/william-vw/repos","events_url":"https://api.github.com/users/william-vw/events{/privacy}","received_events_url":"https://api.github.com/users/william-vw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-15T21:03:34Z","updated_at":"2023-08-15T21:13:52Z","author_association":"NONE","body":"see PR #1989","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1679611564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680200251","html_url":"https://github.com/apache/jena/pull/1989#issuecomment-1680200251","issue_url":"https://api.github.com/repos/apache/jena/issues/1989","id":1680200251,"node_id":"IC_kwDOAHF7Ec5kJdI7","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T08:40:35Z","updated_at":"2023-08-16T08:40:35Z","author_association":"MEMBER","body":"Could you please describe the bugs this PR is fixing?\r\n\r\nI can't see what those are from reading the PR diff.  There's a lot of whitespace change in this PR as well which makes understanding what's changed very difficult even with Hide Whitespace mode enabled so describing what's actually changed would be useful.\r\n\r\nFrom what I can follow you are changing the output format which I don't think we'd want to do because that potentially breaks all existing users of this tool.  The current output format is intentionally following classic `diff` style.  Perhaps consider putting the alternative output format behind a new flag/option so we retain backwards compatibility while allowing users like yourself to opt into a newer output format?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680200251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680203454","html_url":"https://github.com/apache/jena/issues/1987#issuecomment-1680203454","issue_url":"https://api.github.com/repos/apache/jena/issues/1987","id":1680203454,"node_id":"IC_kwDOAHF7Ec5kJd6-","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T08:42:56Z","updated_at":"2023-08-16T08:42:56Z","author_association":"MEMBER","body":"Bug reports should contain actual steps to reproduce the issue - \"not functioning as expected\" - is not a useful bug report.  Please provide steps, including sample data, that show scenario(s) where two input graphs don't yield the expected diff","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680203454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680380376","html_url":"https://github.com/apache/jena/issues/1987#issuecomment-1680380376","issue_url":"https://api.github.com/repos/apache/jena/issues/1987","id":1680380376,"node_id":"IC_kwDOAHF7Ec5kKJHY","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T10:49:16Z","updated_at":"2023-08-16T10:49:16Z","author_association":"MEMBER","body":"Latest changed to 4.9.0 ... so it is always valid in the future :-)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680380376/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680385299","html_url":"https://github.com/apache/jena/issues/1972#issuecomment-1680385299","issue_url":"https://api.github.com/repos/apache/jena/issues/1972","id":1680385299,"node_id":"IC_kwDOAHF7Ec5kKKUT","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T10:53:06Z","updated_at":"2023-08-16T10:53:06Z","author_association":"MEMBER","body":"Hi @Joey-la - any update?\r\n\r\nThere isn't enough information to attempt to reproducible this report. We'll close this if there is no further information.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680385299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680531250","html_url":"https://github.com/apache/jena/issues/1987#issuecomment-1680531250","issue_url":"https://api.github.com/repos/apache/jena/issues/1987","id":1680531250,"node_id":"IC_kwDOAHF7Ec5kKt8y","user":{"login":"william-vw","id":11859376,"node_id":"MDQ6VXNlcjExODU5Mzc2","avatar_url":"https://avatars.githubusercontent.com/u/11859376?v=4","gravatar_id":"","url":"https://api.github.com/users/william-vw","html_url":"https://github.com/william-vw","followers_url":"https://api.github.com/users/william-vw/followers","following_url":"https://api.github.com/users/william-vw/following{/other_user}","gists_url":"https://api.github.com/users/william-vw/gists{/gist_id}","starred_url":"https://api.github.com/users/william-vw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/william-vw/subscriptions","organizations_url":"https://api.github.com/users/william-vw/orgs","repos_url":"https://api.github.com/users/william-vw/repos","events_url":"https://api.github.com/users/william-vw/events{/privacy}","received_events_url":"https://api.github.com/users/william-vw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T12:40:35Z","updated_at":"2023-08-16T12:45:33Z","author_association":"NONE","body":"> Bug reports should contain actual steps to reproduce the issue - \"not functioning as expected\" - is not a useful bug report. Please provide steps, including sample data, that show scenario(s) where two input graphs don't yield the expected diff\r\n\r\nYou are right - apologies. I should've waited with this issue until I had enough time to elaborate.\r\n\r\nThe issues I found:\r\n(lines refer to [original code](https://github.com/apache/jena/blob/main/jena-cmds/src/main/java/arq/rdfdiff.java))\r\n\r\n- Any statements with blank nodes are seen as concrete (lines 120, 135). (Node_Blank is a subclass of Node_Concrete, and thus returns true for #isConcrete, which I think is the issue here.)\r\n\r\n\r\n- A subgraph from the second set should be added to the candidates list, not the subgraph from first set that is being compared with (line 180).\r\n\r\n\r\n- For a statement's first non-encountered bnode, it creates a new subgraph and adds the statement and its _forward_ closure to it (lines 228-235).\r\n\r\nHowever, this does not support cases where multiple nodes end at the same bnode. If you run on [testing/cmd/rdfdiff_1.ttl](https://github.com/william-vw/jena/blob/rdfdiff/jena-cmds/testing/cmd/rdfdiff_1.ttl) and [testing/cmd/rdfdiff_2.ttl](https://github.com/william-vw/jena/blob/rdfdiff/jena-cmds/testing/cmd/rdfdiff_2.ttl) (after fixing the above), you see that the \"England\" triple is ignored as it was not part of the closure of the bnode shared with the \"America\" triple.\r\n\r\nThere's a few solutions for this - my original PR implemented one potential solution, but now I'm unsure whether it's the way to go - perhaps adding a different kind of closure would be better.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680531250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680538344","html_url":"https://github.com/apache/jena/issues/1990#issuecomment-1680538344","issue_url":"https://api.github.com/repos/apache/jena/issues/1990","id":1680538344,"node_id":"IC_kwDOAHF7Ec5kKvro","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T12:45:29Z","updated_at":"2023-08-16T12:45:29Z","author_association":"MEMBER","body":"#1991 should address the issue.\r\n\r\nIt is draft at the moment.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1680538344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1681164041","html_url":"https://github.com/apache/jena/issues/1990#issuecomment-1681164041","issue_url":"https://api.github.com/repos/apache/jena/issues/1990","id":1681164041,"node_id":"IC_kwDOAHF7Ec5kNIcJ","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-16T19:32:02Z","updated_at":"2023-08-16T19:32:02Z","author_association":"MEMBER","body":"It's a consequence of the wrapper pattern. `UnmodifiableGraph.add` calls `base.add` which will calls `base.performAdd`.\r\n\r\n`UnmodifiableGraph` would need to intercept `add(Triple)` and `delete(Triple)`, as well as `remove` and `clear`.\r\n\r\nBut probably better to delete it because there is `GraphReadOnly` (#1991 fixes immutability for the prefixmapping).","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1681164041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1681907670","html_url":"https://github.com/apache/jena/issues/1992#issuecomment-1681907670","issue_url":"https://api.github.com/repos/apache/jena/issues/1992","id":1681907670,"node_id":"IC_kwDOAHF7Ec5kP9_W","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T09:03:33Z","updated_at":"2023-08-17T09:03:33Z","author_association":"MEMBER","body":"This is standard Java iterator behaviour.\r\n\r\nAny modification to an underlying datastructure may invalidate an iterator.\r\n\r\nFiltering is not a factor - the filter is navigation of the underlying datastructure.\r\n\r\nThe same is true for JDK lists and maps.\r\n\r\nFor example, in a HashMap, the whole hash vector maybe resized, moving everything around.\r\n\r\nIf you want isolation, consume the iterator to a list and iterate on the list, or keep a record of the changes to make and make them afterwards.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1681907670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1681941522","html_url":"https://github.com/apache/jena/issues/1992#issuecomment-1681941522","issue_url":"https://api.github.com/repos/apache/jena/issues/1992","id":1681941522,"node_id":"IC_kwDOAHF7Ec5kQGQS","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T09:26:31Z","updated_at":"2023-08-17T09:57:04Z","author_association":"CONTRIBUTOR","body":"Sure, that's standard for non-concurrent collections. No doubt. \r\nConcurrent collections provides safe iterators (i.e. not all JDK's iterators are unsafe). \r\nBut for non-thread-safe collections they are safe only for unmodifiable collections.\r\n\r\nYes, I know about isolation and `close`, but anyway thank you for detailed explanation. \r\n\r\nBut I think user may not know that `GraphMem` behaves just like JDK.\r\nAlso, it is strange that behavior differs in these two scenarios.  \r\nI think it would be more logical if `ConcurrentModificationException` was in both cases. \r\nOr in none, since the pattern and the concrete triple do not match. \r\nAnalogy: `Map<Triple, Iterator>`, modification of map in single thread does not broke iterators in that thread. \r\nWe expect that. \r\nIf `GraphMem` was built on top of `Map` we would not see `ConcurrentModificationException`.\r\n\r\nIt would be nice to have some words in javadoc that states that inappropriate `find` use MAY lead to `ConcurrentModificationException` (or may not).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1681941522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682003454","html_url":"https://github.com/apache/jena/issues/1992#issuecomment-1682003454","issue_url":"https://api.github.com/repos/apache/jena/issues/1992","id":1682003454,"node_id":"IC_kwDOAHF7Ec5kQVX-","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T10:04:21Z","updated_at":"2023-08-17T10:04:21Z","author_association":"MEMBER","body":"Contributions welcome.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682003454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682144967","html_url":"https://github.com/apache/jena/issues/1987#issuecomment-1682144967","issue_url":"https://api.github.com/repos/apache/jena/issues/1987","id":1682144967,"node_id":"IC_kwDOAHF7Ec5kQ37H","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T11:47:36Z","updated_at":"2023-08-17T11:47:36Z","author_association":"MEMBER","body":"Blank nodes are concrete. \"concrete\" covers the RDF terms that can go in an RDF graph and be printed.\r\n\r\nThe test \"triple.concrete\" isn't appropriate (from reading the code).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682144967/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682196600","html_url":"https://github.com/apache/jena/issues/1985#issuecomment-1682196600","issue_url":"https://api.github.com/repos/apache/jena/issues/1985","id":1682196600,"node_id":"IC_kwDOAHF7Ec5kREh4","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T12:27:18Z","updated_at":"2023-08-17T12:27:18Z","author_association":"MEMBER","body":"Not as simple!\r\n\r\nIt seems that the graph mgt operations (e.g. CLEAR) don't work but DELETE DATA and DELETE WHERE do.\r\n\r\nA CLEAR does affect the dataset. It's the index that isn't changing.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682196600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682463264","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1682463264","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1682463264,"node_id":"IC_kwDOAHF7Ec5kSFog","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T15:14:08Z","updated_at":"2023-08-17T15:14:08Z","author_association":"MEMBER","body":"Try \"add\" not \"addPrefix\"\r\n\r\nYour example throws \"IllegalArgumentException\" (because prefix does not end in \"/\").\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682463264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682467605","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1682467605","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1682467605,"node_id":"IC_kwDOAHF7Ec5kSGsV","user":{"login":"magutierrm","id":122987300,"node_id":"U_kgDOB1SjJA","avatar_url":"https://avatars.githubusercontent.com/u/122987300?v=4","gravatar_id":"","url":"https://api.github.com/users/magutierrm","html_url":"https://github.com/magutierrm","followers_url":"https://api.github.com/users/magutierrm/followers","following_url":"https://api.github.com/users/magutierrm/following{/other_user}","gists_url":"https://api.github.com/users/magutierrm/gists{/gist_id}","starred_url":"https://api.github.com/users/magutierrm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magutierrm/subscriptions","organizations_url":"https://api.github.com/users/magutierrm/orgs","repos_url":"https://api.github.com/users/magutierrm/repos","events_url":"https://api.github.com/users/magutierrm/events{/privacy}","received_events_url":"https://api.github.com/users/magutierrm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T15:16:47Z","updated_at":"2023-08-17T15:16:47Z","author_association":"NONE","body":"@afs Thanks for the answer. Unfortunately, I also tried with `add` but it did not work.\r\nIs there any place where `RDFConnectionRemoteBuilder` should call `RegistryRequestModifier`? Maybe I am calling it in a wrong place","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682467605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682482525","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1682482525","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1682482525,"node_id":"IC_kwDOAHF7Ec5kSKVd","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T15:26:03Z","updated_at":"2023-08-17T15:26:03Z","author_association":"MEMBER","body":"Were you getting IllegalArgumentException? If not, then maybe the code isn't called.\r\n\r\nYou can use `addPrefix(\"https://my-neptune-cluster.neptune.amazonaws.com:8182/\")` -- ends in \"/\" and applies to any URL at that host over https.\r\n\r\nThe registry is system-wide.\r\n\r\nTo test, use:\r\n\r\n```\r\n                HttpRequestModifier modifier = (params, headers) -> {\r\n                    System.err.println(\"CALLED\");\r\n                    };\r\n                RegistryRequestModifier.get().add(....., modifier);\r\n```\r\n\r\nand see what client-side output your get.\r\n\r\nAfter that, please provide a complete, minimal example. It does not have to be \"amazonaws.com\".","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682482525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682698873","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1682698873","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1682698873,"node_id":"IC_kwDOAHF7Ec5kS_J5","user":{"login":"magutierrm","id":122987300,"node_id":"U_kgDOB1SjJA","avatar_url":"https://avatars.githubusercontent.com/u/122987300?v=4","gravatar_id":"","url":"https://api.github.com/users/magutierrm","html_url":"https://github.com/magutierrm","followers_url":"https://api.github.com/users/magutierrm/followers","following_url":"https://api.github.com/users/magutierrm/following{/other_user}","gists_url":"https://api.github.com/users/magutierrm/gists{/gist_id}","starred_url":"https://api.github.com/users/magutierrm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magutierrm/subscriptions","organizations_url":"https://api.github.com/users/magutierrm/orgs","repos_url":"https://api.github.com/users/magutierrm/repos","events_url":"https://api.github.com/users/magutierrm/events{/privacy}","received_events_url":"https://api.github.com/users/magutierrm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T17:36:38Z","updated_at":"2023-08-17T18:26:59Z","author_association":"NONE","body":"I did not receive the exception and is not being called, Not sure if I am doing something wrong\r\n```java\r\n@Slf4j\r\n@Component\r\npublic class Test {\r\n\r\n    @PostConstruct\r\n    public void init() throws InterruptedException, IOException {\r\n\r\n        HttpRequestModifier modifier = (params, headers) -> {\r\n            System.err.println(\"CALLED\");\r\n            headers.put(\"x-test\", \"test\");\r\n        };\r\n        RegistryRequestModifier.get().addPrefix(\"https://github.com/status/\", modifier);\r\n\r\n        HttpClient httpClient = HttpClient.newBuilder().build();\r\n        HttpResponse<String> response = httpClient.send(\r\n            HttpRequest.newBuilder()\r\n                       .GET()\r\n                       .uri(URI.create(\"https://github.com/status/\"))\r\n                       .build(),\r\n            HttpResponse.BodyHandlers.ofString()\r\n        );\r\n\r\n        log.info(\"Request {}\", response.request());\r\n        log.info(\"Response {}\", response);\r\n        log.info(\"Headers {}\", response.request().headers().map());\r\n    }\r\n\r\n}\r\n```\r\n\r\nLogs:\r\n```\r\n2023-08-17 12:07:52.810 - INFO 25359 --- [           main] com.xxx.xxx.neptune.config.Test      : Request https://github.com/status/ GET\r\n2023-08-17 12:07:52.811 - INFO 25359 --- [           main] com.xxx.xxx.neptune.config.Test      : Response (GET https://github.com/status/) 200\r\n2023-08-17 12:07:52.811 - INFO 25359 --- [           main] com.xxx.xxx.neptune.config.Test      : Headers {}\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682698873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682859411","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1682859411","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1682859411,"node_id":"IC_kwDOAHF7Ec5kTmWT","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T19:41:31Z","updated_at":"2023-08-17T19:41:31Z","author_association":"MEMBER","body":"> `HttpClient httpClient = HttpClient.newBuilder().build();`\r\n> `       HttpResponse<String> response = httpClient.send(`\r\n\r\nThere isn't any Jena code there : `RegistryRequestModifier` is a Jena feature.\r\n\r\nExample:\r\n```java\r\n        HttpRequestModifier modifier = (params, headers) -> {\r\n            System.err.println(\"CALLED\");\r\n            //headers.put(\"x-test\", \"test\");\r\n        };\r\n\r\n        String URL = \"https://github.com/status/\";\r\n        RegistryRequestModifier.get().addPrefix(URL, modifier);\r\n\r\n        try {\r\n            RDFConnection conn = RDFConnectionRemote.service(\"https://github.com/status\")\r\n                    .queryEndpoint(\"query\")\r\n                    .build();\r\n            conn.query(\"ASK{}\").execAsk();\r\n        } catch (QueryExceptionHTTP ex) {\r\n            if ( 404 != ex.getStatusCode() )\r\n                System.err.print(\"Expected status code 404. Got \"+ex.getStatusCode());\r\n        }\r\n\r\n        System.out.println(\"DONE\");\r\n        System.exit(0);\r\n\r\n```\r\nIt only seems to work for query and update, not GSP/DSP which probably is a bug.\r\n\r\nWhat operations are your trying to use?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1682859411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683007757","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1683007757","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1683007757,"node_id":"IC_kwDOAHF7Ec5kUKkN","user":{"login":"magutierrm","id":122987300,"node_id":"U_kgDOB1SjJA","avatar_url":"https://avatars.githubusercontent.com/u/122987300?v=4","gravatar_id":"","url":"https://api.github.com/users/magutierrm","html_url":"https://github.com/magutierrm","followers_url":"https://api.github.com/users/magutierrm/followers","following_url":"https://api.github.com/users/magutierrm/following{/other_user}","gists_url":"https://api.github.com/users/magutierrm/gists{/gist_id}","starred_url":"https://api.github.com/users/magutierrm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/magutierrm/subscriptions","organizations_url":"https://api.github.com/users/magutierrm/orgs","repos_url":"https://api.github.com/users/magutierrm/repos","events_url":"https://api.github.com/users/magutierrm/events{/privacy}","received_events_url":"https://api.github.com/users/magutierrm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-17T21:31:58Z","updated_at":"2023-08-17T21:31:58Z","author_association":"NONE","body":"@afs Thanks for this code snippet. I didn't know that we can directly add our service without having to pass an HTTP Client. This works properly 😄 May I ask why you have decided to use the `http.net.java.HttpClient`? In my opinion, it is a very restricted client. In any case, you can close the issue. \r\nThank you again","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683007757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683569553","html_url":"https://github.com/apache/jena/issues/1995#issuecomment-1683569553","issue_url":"https://api.github.com/repos/apache/jena/issues/1995","id":1683569553,"node_id":"IC_kwDOAHF7Ec5kWTuR","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T08:39:47Z","updated_at":"2023-08-18T08:39:47Z","author_association":"MEMBER","body":"It's failing here: https://github.com/apache/jena/blob/84aa91e095e20e0e3c7a55c9780f285ef8fb54bb/apache-jena/bin/tdb2.xloader#L423\r\n\r\nWhat's your operating system and bash version (`bash --version`)?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683569553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683582609","html_url":"https://github.com/apache/jena/issues/1993#issuecomment-1683582609","issue_url":"https://api.github.com/repos/apache/jena/issues/1993","id":1683582609,"node_id":"IC_kwDOAHF7Ec5kWW6R","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T08:50:34Z","updated_at":"2023-08-18T08:50:34Z","author_association":"MEMBER","body":"I'm curious as to what features you think are missing. Code is never finished.\r\n\r\nThe requirement for Jena is to provide APIs and in most cases hiding the details of HTTP. Semantic Web usage of HTTP isn't the full generality of HTTP.\r\n\r\nJena used to use AHC (Apache HttpClient) version 4. There was some ability to optionally configure AHC for connection pools but APIs provided the functionality for SPARQL (query/update and graph store protocol) without requiring the user to understand AHC. There was some URLConnection usage as well. Support for authentication was a bit basic. No HTTP/2 support.\r\n\r\nAHC5 is quite different at least to get the new features such as HTTP/2 support. So migrating from AHC4 was a significant change either way.\r\n\r\nThe new-as-of-11 JDK HTTP code (JHC) is good. My view is that it is has become an important part of the JDK and will receive maintenance and refresh because of use in modern distributed systems including authentication integration. That can't be said for `URLConnection` but at Java1, HTTP wasn't as significant as it is today.\r\n\r\nOne reason to choose JHC is less dependency complexity. One role for Jena is as a library. Any package that might be used  by a system using Jena as a library runs into dependency complexity around on versions. Jena had already been having to control which version of AHC was used, excluding it as a dependency of some Jena dependencies due their dependencies not being updated.\r\n\r\nSo the decision was more like \"is JHC good enough?\".\r\n\r\nJHC is lower level than AHC and has a simpler API surface, though I would not be surprised to learn that AHC inspired some of the design of JHC. \r\n\r\nAbstractions can be built on top of JHC. `HttpRequestModifier` is part of that because, despite W3C standards, different remote endpoints of (commercial) triple stores have different requirements. Short of hard-coding the variations into Jena itself, being able to tweak the query string and the headers. \r\n\r\n`RDFConnection` (and its companion `RDFLink` for `Graph` and `Node`) pull the main mechanisms together (QueryExecHTTP, GSP etc) although those mechanism do have more direct ways of controlling headers because it's per operation related.\r\n\r\nSo my take is that JHC is a good engine for modern HTTP with good prospects for long term stability and support.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683582609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683636758","html_url":"https://github.com/apache/jena/issues/1995#issuecomment-1683636758","issue_url":"https://api.github.com/repos/apache/jena/issues/1995","id":1683636758,"node_id":"IC_kwDOAHF7Ec5kWkIW","user":{"login":"AllenConquest-6p6","id":85948939,"node_id":"MDQ6VXNlcjg1OTQ4OTM5","avatar_url":"https://avatars.githubusercontent.com/u/85948939?v=4","gravatar_id":"","url":"https://api.github.com/users/AllenConquest-6p6","html_url":"https://github.com/AllenConquest-6p6","followers_url":"https://api.github.com/users/AllenConquest-6p6/followers","following_url":"https://api.github.com/users/AllenConquest-6p6/following{/other_user}","gists_url":"https://api.github.com/users/AllenConquest-6p6/gists{/gist_id}","starred_url":"https://api.github.com/users/AllenConquest-6p6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AllenConquest-6p6/subscriptions","organizations_url":"https://api.github.com/users/AllenConquest-6p6/orgs","repos_url":"https://api.github.com/users/AllenConquest-6p6/repos","events_url":"https://api.github.com/users/AllenConquest-6p6/events{/privacy}","received_events_url":"https://api.github.com/users/AllenConquest-6p6/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T09:32:55Z","updated_at":"2023-08-18T09:32:55Z","author_association":"NONE","body":"> It's failing here:\r\n> \r\n> https://github.com/apache/jena/blob/84aa91e095e20e0e3c7a55c9780f285ef8fb54bb/apache-jena/bin/tdb2.xloader#L423\r\n> \r\n> What's your operating system and bash version (`bash --version`)?\r\n\r\nI am using iTerm on MacOS 14.0 ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683636758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683640114","html_url":"https://github.com/apache/jena/issues/1995#issuecomment-1683640114","issue_url":"https://api.github.com/repos/apache/jena/issues/1995","id":1683640114,"node_id":"IC_kwDOAHF7Ec5kWk8y","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T09:35:39Z","updated_at":"2023-08-18T09:35:39Z","author_association":"MEMBER","body":"The data isn't properly loaded.\r\n\r\n> Quads = 14,033,733\r\n\r\nThat isn't a lot of data - the xloader becomes better on much larger datasets.\r\n\r\n`tdb2.tdbloader` is likely quicker and is easier to use.\r\n\r\nYou can also try `tdb2.tdbloader --loader=parallel` if the machine is a server. On a laptop, \"parallel\" can swap the machine.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1683640114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1689585276","html_url":"https://github.com/apache/jena/issues/1995#issuecomment-1689585276","issue_url":"https://api.github.com/repos/apache/jena/issues/1995","id":1689585276,"node_id":"IC_kwDOAHF7Ec5ktQZ8","user":{"login":"AllenConquest-6p6","id":85948939,"node_id":"MDQ6VXNlcjg1OTQ4OTM5","avatar_url":"https://avatars.githubusercontent.com/u/85948939?v=4","gravatar_id":"","url":"https://api.github.com/users/AllenConquest-6p6","html_url":"https://github.com/AllenConquest-6p6","followers_url":"https://api.github.com/users/AllenConquest-6p6/followers","following_url":"https://api.github.com/users/AllenConquest-6p6/following{/other_user}","gists_url":"https://api.github.com/users/AllenConquest-6p6/gists{/gist_id}","starred_url":"https://api.github.com/users/AllenConquest-6p6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AllenConquest-6p6/subscriptions","organizations_url":"https://api.github.com/users/AllenConquest-6p6/orgs","repos_url":"https://api.github.com/users/AllenConquest-6p6/repos","events_url":"https://api.github.com/users/AllenConquest-6p6/events{/privacy}","received_events_url":"https://api.github.com/users/AllenConquest-6p6/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-23T09:12:35Z","updated_at":"2023-08-23T09:12:35Z","author_association":"NONE","body":"I moved to using tdb2.tdbloader, so this is no longer an issue for me.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1689585276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1693371271","html_url":"https://github.com/apache/jena/issues/1995#issuecomment-1693371271","issue_url":"https://api.github.com/repos/apache/jena/issues/1995","id":1693371271,"node_id":"IC_kwDOAHF7Ec5k7suH","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T13:34:16Z","updated_at":"2023-08-25T13:34:16Z","author_association":"MEMBER","body":"`-A` was added to bash in 2009. Looks either the shell is a restricted form of bash or is an older version.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1693371271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1694311207","html_url":"https://github.com/apache/jena/issues/1961#issuecomment-1694311207","issue_url":"https://api.github.com/repos/apache/jena/issues/1961","id":1694311207,"node_id":"IC_kwDOAHF7Ec5k_SMn","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-26T11:41:55Z","updated_at":"2023-09-06T13:36:31Z","author_association":"CONTRIBUTOR","body":"wrote benchmarks:\r\n```\r\n# Run complete. Total time: 09:03:24\r\n\r\nREMEMBER: The numbers below are just data. To gain reusable insights, you need to follow up on\r\nwhy the numbers are the way they are. Use profilers (see -prof, -lprof), design factorial\r\nexperiments, perform baseline and negative tests that provide experimental control, make sure\r\nthe benchmarking environment is safe on JVM/OS/HW level, ask for reviews from the domain experts.\r\nDo not assume the numbers tell you what you want them to tell.\r\n\r\nBenchmark                                                               (factory)   Mode  Cnt         Score         Error  Units\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_2x420              TXN_GRAPH  thrpt   25         1,446 �       0,041  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_2x420     SYNCHRONIZED_GRAPH  thrpt   25        18,554 �       0,204  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_2x420       RW_LOCKING_GRAPH  thrpt   25        20,452 �       0,315  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x5               TXN_GRAPH  thrpt   25         4,954 �       0,198  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x5      SYNCHRONIZED_GRAPH  thrpt   25         3,900 �       0,303  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_F_RW_5x5        RW_LOCKING_GRAPH  thrpt   25         2,894 �       0,144  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x21               TXN_GRAPH  thrpt   25         0,459 �       0,005  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x21      SYNCHRONIZED_GRAPH  thrpt   25       124,310 �       1,384  ops/s\r\nBigGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_G_R_4x21        RW_LOCKING_GRAPH  thrpt   25       120,663 �      11,241  ops/s\r\nFunctionalBenchmarks.ADD                                       SYNCHRONIZED_GRAPH  thrpt   25  10327745,424 �  324216,746  ops/s\r\nFunctionalBenchmarks.ADD                                         RW_LOCKING_GRAPH  thrpt   25   9642466,664 �  545900,257  ops/s\r\nFunctionalBenchmarks.ADD                                                TXN_GRAPH  thrpt   25    568284,348 �   14906,968  ops/s\r\nFunctionalBenchmarks.ADD                                                MEM_GRAPH  thrpt   25   9868883,985 �  351432,363  ops/s\r\nFunctionalBenchmarks.CONTAINS                                  SYNCHRONIZED_GRAPH  thrpt   25  17414202,069 �  838847,529  ops/s\r\nFunctionalBenchmarks.CONTAINS                                    RW_LOCKING_GRAPH  thrpt   25  16596013,888 �  360388,978  ops/s\r\nFunctionalBenchmarks.CONTAINS                                           TXN_GRAPH  thrpt   25      2617,453 �     639,489  ops/s\r\nFunctionalBenchmarks.CONTAINS                                           MEM_GRAPH  thrpt   25  17735128,066 �  332657,672  ops/s\r\nFunctionalBenchmarks.COUNT                                     SYNCHRONIZED_GRAPH  thrpt   25  34871132,016 �   54212,935  ops/s\r\nFunctionalBenchmarks.COUNT                                       RW_LOCKING_GRAPH  thrpt   25  30702008,214 �  124360,601  ops/s\r\nFunctionalBenchmarks.COUNT                                              TXN_GRAPH  thrpt   25     12754,607 �   12240,855  ops/s\r\nFunctionalBenchmarks.COUNT                                              MEM_GRAPH  thrpt   25  35705376,831 �   58186,669  ops/s\r\nFunctionalBenchmarks.DELETE                                    SYNCHRONIZED_GRAPH  thrpt   25   6132754,574 �  128806,329  ops/s\r\nFunctionalBenchmarks.DELETE                                      RW_LOCKING_GRAPH  thrpt   25   6006734,462 �  158163,662  ops/s\r\nFunctionalBenchmarks.DELETE                                             TXN_GRAPH  thrpt   25    466415,443 �   34619,335  ops/s\r\nFunctionalBenchmarks.DELETE                                             MEM_GRAPH  thrpt   25   6378279,427 �   74230,896  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                  SYNCHRONIZED_GRAPH  thrpt   25   1995921,417 �  197773,961  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                    RW_LOCKING_GRAPH  thrpt   25    731483,422 �    4945,364  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                           TXN_GRAPH  thrpt   25     27210,697 �   11762,668  ops/s\r\nFunctionalBenchmarks.FIND_ALL                                           MEM_GRAPH  thrpt   25   6250382,955 �  558544,461  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                 SYNCHRONIZED_GRAPH  thrpt   25   9185112,808 �  167003,190  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                   RW_LOCKING_GRAPH  thrpt   25   1891931,627 �   24180,754  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                          TXN_GRAPH  thrpt   25      2585,932 �     405,423  ops/s\r\nFunctionalBenchmarks.FIND_SOME                                          MEM_GRAPH  thrpt   25  19784548,579 � 1761162,017  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                          SYNCHRONIZED_GRAPH  thrpt   25    371974,804 �    6627,910  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                            RW_LOCKING_GRAPH  thrpt   25    160969,040 �    1328,173  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                   TXN_GRAPH  thrpt   25      1864,759 �     911,797  ops/s\r\nFunctionalBenchmarks.MIXED_OPERATIONS                                   MEM_GRAPH  thrpt   25    511414,126 �    4680,192  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x5             TXN_GRAPH  thrpt   25        53,449 �       0,348  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x5    SYNCHRONIZED_GRAPH  thrpt   25       455,535 �       3,287  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x5      RW_LOCKING_GRAPH  thrpt   25        40,529 �       0,714  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_8x4             TXN_GRAPH  thrpt   25        42,045 �       0,159  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_8x4    SYNCHRONIZED_GRAPH  thrpt   25       352,476 �       1,480  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_8x4      RW_LOCKING_GRAPH  thrpt   25        25,387 �       0,759  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5              TXN_GRAPH  thrpt   25        10,475 �       0,086  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5     SYNCHRONIZED_GRAPH  thrpt   25       261,004 �       2,216  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_5x5       RW_LOCKING_GRAPH  thrpt   25       257,982 �       1,757  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_8x4              TXN_GRAPH  thrpt   25         8,194 �       0,168  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_8x4     SYNCHRONIZED_GRAPH  thrpt   25       203,590 �       0,816  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_B_R_8x4       RW_LOCKING_GRAPH  thrpt   25       209,688 �       4,162  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_2x42            TXN_GRAPH  thrpt   25         8,184 �       0,346  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_2x42   SYNCHRONIZED_GRAPH  thrpt   25       183,167 �       2,297  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_2x42     RW_LOCKING_GRAPH  thrpt   25        45,588 �       0,512  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14            TXN_GRAPH  thrpt   25        17,841 �       0,509  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14   SYNCHRONIZED_GRAPH  thrpt   25       380,125 �       3,195  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_C_RW_8x14     RW_LOCKING_GRAPH  thrpt   25        81,118 �       0,655  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DB_RW_6x14           TXN_GRAPH  thrpt   25        12,359 �       0,188  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DB_RW_6x14  SYNCHRONIZED_GRAPH  thrpt   25       241,269 �       2,998  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_DB_RW_6x14    RW_LOCKING_GRAPH  thrpt   25        57,992 �       0,415  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5              TXN_GRAPH  thrpt   25       134,988 �       5,140  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5     SYNCHRONIZED_GRAPH  thrpt   25      1165,756 �      15,443  ops/s\r\nPizzaGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_D_W_5x5       RW_LOCKING_GRAPH  thrpt   25      1144,433 �       8,823  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x5             TXN_GRAPH  thrpt   25       861,604 �      11,766  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x5    SYNCHRONIZED_GRAPH  thrpt   25      2317,995 �      14,237  ops/s\r\nSmallGraphConcurrentBenchmarks.CONCURRENT_SCENARIO_A_RW_5x5      RW_LOCKING_GRAPH  thrpt   25      1361,093 �       9,248  ops/s\r\n\r\n```\r\n\r\nI think concurrent benchmarks are not fully correct (if somebody knows how to write them correctly please give me feedback).\r\nThese benchmarks show that `SynchronizedGraph` is really fast and `ReadWriteLockingGraph` is number two, `GraphTxn` has the worst performance, but not always.\r\n\r\n@arne-bdt let me know please when you finish your implementation, will include it in this benchmarks.\r\n\r\n\r\n\r\n[benchmarks-260823-01.txt](https://github.com/apache/jena/files/12445273/benchmarks-260823-01.txt)\r\n\r\n**UPD**: added `ExtendedSynchronizedGraph`, it is faster than `ReadWriteLockingGraph`\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1694311207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1694338069","html_url":"https://github.com/apache/jena/pull/1994#issuecomment-1694338069","issue_url":"https://api.github.com/repos/apache/jena/issues/1994","id":1694338069,"node_id":"IC_kwDOAHF7Ec5k_YwV","user":{"login":"sszuev","id":17473366,"node_id":"MDQ6VXNlcjE3NDczMzY2","avatar_url":"https://avatars.githubusercontent.com/u/17473366?v=4","gravatar_id":"","url":"https://api.github.com/users/sszuev","html_url":"https://github.com/sszuev","followers_url":"https://api.github.com/users/sszuev/followers","following_url":"https://api.github.com/users/sszuev/following{/other_user}","gists_url":"https://api.github.com/users/sszuev/gists{/gist_id}","starred_url":"https://api.github.com/users/sszuev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sszuev/subscriptions","organizations_url":"https://api.github.com/users/sszuev/orgs","repos_url":"https://api.github.com/users/sszuev/repos","events_url":"https://api.github.com/users/sszuev/events{/privacy}","received_events_url":"https://api.github.com/users/sszuev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-26T13:10:54Z","updated_at":"2023-08-26T14:56:48Z","author_association":"CONTRIBUTOR","body":"@afs \r\n\r\nWould it be a good idea to add a mention to the factory-method and directly to the particular implementations documentation that the `ConcurrentModificationException` may not occur in some cases? A client application (such as `ReadWriteLockingGrapg`) may use this circumstance for its own purposes. For example, for optimization (see issues https://github.com/apache/jena/issues/1992 and https://github.com/sszuev/concurrent-rdf-graph/issues/1)\r\n\r\nFor factory-method docs could look like this:\r\n```html\r\n<strong>Note</strong>: Interrupting Graph Iterators with modification operations \r\nin general may result in a `ConcurrentModificationException` due to structural changes.\r\nIt is <strong>strongly</strong> not recommended in the client code violate this rule. \r\nHowever, interruption is possible in some cases, but it depends on the implementation. \r\n\r\nSee the documentation for the specific `GraphMem` implementation. \r\nThis behavior can be changed at any time, \r\nso please read the documentation of specific implementations before\r\nif your code still requires interrupting iterations contrary to the recommendations.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1694338069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]