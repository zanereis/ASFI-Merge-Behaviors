[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/651244237","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-651244237","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":651244237,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTI0NDIzNw==","user":{"login":"triump2020","id":63033222,"node_id":"MDQ6VXNlcjYzMDMzMjIy","avatar_url":"https://avatars.githubusercontent.com/u/63033222?v=4","gravatar_id":"","url":"https://api.github.com/users/triump2020","html_url":"https://github.com/triump2020","followers_url":"https://api.github.com/users/triump2020/followers","following_url":"https://api.github.com/users/triump2020/following{/other_user}","gists_url":"https://api.github.com/users/triump2020/gists{/gist_id}","starred_url":"https://api.github.com/users/triump2020/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/triump2020/subscriptions","organizations_url":"https://api.github.com/users/triump2020/orgs","repos_url":"https://api.github.com/users/triump2020/repos","events_url":"https://api.github.com/users/triump2020/events{/privacy}","received_events_url":"https://api.github.com/users/triump2020/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T17:00:39Z","updated_at":"2020-06-29T17:00:39Z","author_association":"NONE","body":"@kof02guy 从 ObjectPool 中分配的对象所占用的内存是不会归还给系统的，如果到达最大值，再从里面分配，会返回null.\r\n       这个最大值从代码看目前不能调整， 是const 常量.\r\n      ObjectPool  适用于分配比较固定大小的 ，且生命周期比较短暂的，分配完之后，可能过一会儿就归还给Pool的object。这样ObjectPool 保持一个动态平衡。在这样的场景下， 性能应该很高.\r\n ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/651244237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/651479910","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-651479910","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":651479910,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTQ3OTkxMA==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-30T02:20:17Z","updated_at":"2020-06-30T02:20:17Z","author_association":"NONE","body":"> @kof02guy 从 ObjectPool 中分配的对象所占用的内存是不会归还给系统的，如果到达最大值，再从里面分配，会返回null.\r\n> 这个最大值从代码看目前不能调整， 是const 常量.\r\n> ObjectPool 适用于分配比较固定大小的 ，且生命周期比较短暂的，分配完之后，可能过一会儿就归还给Pool的object。这样ObjectPool 保持一个动态平衡。在这样的场景下， 性能应该很高.\r\n\r\n有的场景下，可能系统存在一个很高的性能尖峰，在那个尖峰可能需要分配很多的资源。但是在大多数情况下，系统的压力都很低，那些在性能尖峰分配出来的资源如果不shrink的话，那么相当于是变相的资源浪费了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/651479910/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/651534879","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-651534879","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":651534879,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTUzNDg3OQ==","user":{"login":"triump2020","id":63033222,"node_id":"MDQ6VXNlcjYzMDMzMjIy","avatar_url":"https://avatars.githubusercontent.com/u/63033222?v=4","gravatar_id":"","url":"https://api.github.com/users/triump2020","html_url":"https://github.com/triump2020","followers_url":"https://api.github.com/users/triump2020/followers","following_url":"https://api.github.com/users/triump2020/following{/other_user}","gists_url":"https://api.github.com/users/triump2020/gists{/gist_id}","starred_url":"https://api.github.com/users/triump2020/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/triump2020/subscriptions","organizations_url":"https://api.github.com/users/triump2020/orgs","repos_url":"https://api.github.com/users/triump2020/repos","events_url":"https://api.github.com/users/triump2020/events{/privacy}","received_events_url":"https://api.github.com/users/triump2020/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-30T04:56:28Z","updated_at":"2020-06-30T04:56:28Z","author_association":"NONE","body":"> > @kof02guy 从 ObjectPool 中分配的对象所占用的内存是不会归还给系统的，如果到达最大值，再从里面分配，会返回null.\r\n> > 这个最大值从代码看目前不能调整， 是const 常量.\r\n> > ObjectPool 适用于分配比较固定大小的 ，且生命周期比较短暂的，分配完之后，可能过一会儿就归还给Pool的object。这样ObjectPool 保持一个动态平衡。在这样的场景下， 性能应该很高.\r\n> \r\n> 有的场景下，可能系统存在一个很高的性能尖峰，在那个尖峰可能需要分配很多的资源。但是在大多数情况下，系统的压力都很低，那些在性能尖峰分配出来的资源如果不shrink的话，那么相当于是变相的资源浪费了\r\n\r\n你说的场景下是这样的，确实会占用内存。  ObjectPool 当初这么设计可能就是追求性能，分配和释放都是O(1).   ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/651534879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/652131514","html_url":"https://github.com/apache/brpc/issues/1150#issuecomment-652131514","issue_url":"https://api.github.com/repos/apache/brpc/issues/1150","id":652131514,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjEzMTUxNA==","user":{"login":"triump2020","id":63033222,"node_id":"MDQ6VXNlcjYzMDMzMjIy","avatar_url":"https://avatars.githubusercontent.com/u/63033222?v=4","gravatar_id":"","url":"https://api.github.com/users/triump2020","html_url":"https://github.com/triump2020","followers_url":"https://api.github.com/users/triump2020/followers","following_url":"https://api.github.com/users/triump2020/following{/other_user}","gists_url":"https://api.github.com/users/triump2020/gists{/gist_id}","starred_url":"https://api.github.com/users/triump2020/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/triump2020/subscriptions","organizations_url":"https://api.github.com/users/triump2020/orgs","repos_url":"https://api.github.com/users/triump2020/repos","events_url":"https://api.github.com/users/triump2020/events{/privacy}","received_events_url":"https://api.github.com/users/triump2020/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-01T01:21:37Z","updated_at":"2020-07-01T01:21:37Z","author_association":"NONE","body":"同一个线程里，对同一个原子变量的读写不会乱序","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/652131514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/652739006","html_url":"https://github.com/apache/brpc/issues/1149#issuecomment-652739006","issue_url":"https://api.github.com/repos/apache/brpc/issues/1149","id":652739006,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjczOTAwNg==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-02T02:15:15Z","updated_at":"2020-07-02T02:15:49Z","author_association":"CONTRIBUTOR","body":"说下我对这个问题的理解哈，这里说的延时应该是指从CutInputMessage得到一个新的msg，到建立的bthread flush之间的延时。\r\n延时来源于两方面：\r\n1) 一次DoRead得到的所有msg会通过一次bthread_flush被调度执行。\r\n2) last_msg的处理时机会被延后。当次DoRead的last_msg会在下一次DoRead后被QueueMessage，伴随下一次DoRead产生的msg被flush；若当次DoRead后读不到新的数据，last_msg会在析构时在当前bthread执行ProcessInputMessage。\r\n\r\n理论上来说last_msg的延时和一次DoRead的第一个msg是相当的，因此，OnNewMessages中延时主要是上述1)带来的。为什么要这么做，OnNewMessages下面的注释也给出了解释——“To minimize the overhead, scheduling is batched”。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/652739006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/652887148","html_url":"https://github.com/apache/brpc/issues/1149#issuecomment-652887148","issue_url":"https://api.github.com/repos/apache/brpc/issues/1149","id":652887148,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Mjg4NzE0OA==","user":{"login":"dangding","id":2231445,"node_id":"MDQ6VXNlcjIyMzE0NDU=","avatar_url":"https://avatars.githubusercontent.com/u/2231445?v=4","gravatar_id":"","url":"https://api.github.com/users/dangding","html_url":"https://github.com/dangding","followers_url":"https://api.github.com/users/dangding/followers","following_url":"https://api.github.com/users/dangding/following{/other_user}","gists_url":"https://api.github.com/users/dangding/gists{/gist_id}","starred_url":"https://api.github.com/users/dangding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dangding/subscriptions","organizations_url":"https://api.github.com/users/dangding/orgs","repos_url":"https://api.github.com/users/dangding/repos","events_url":"https://api.github.com/users/dangding/events{/privacy}","received_events_url":"https://api.github.com/users/dangding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-02T09:07:49Z","updated_at":"2020-07-02T09:07:49Z","author_association":"NONE","body":"> 说下我对这个问题的理解哈，这里说的延时应该是指从CutInputMessage得到一个新的msg，到建立的bthread flush之间的延时。\r\n> 延时来源于两方面：\r\n> \r\n> 1. 一次DoRead得到的所有msg会通过一次bthread_flush被调度执行。\r\n> 2. last_msg的处理时机会被延后。当次DoRead的last_msg会在下一次DoRead后被QueueMessage，伴随下一次DoRead产生的msg被flush；若当次DoRead后读不到新的数据，last_msg会在析构时在当前bthread执行ProcessInputMessage。\r\n> \r\n> 理论上来说last_msg的延时和一次DoRead的第一个msg是相当的，因此，OnNewMessages中延时主要是上述1)带来的。为什么要这么做，OnNewMessages下面的注释也给出了解释——“To minimize the overhead, scheduling is batched”。\r\n\r\n如果单个socket上qps很高，一次DoRead的数据量比较大呢？延时会不会明显？\r\n\r\nPS：用echo_server起了一个服务，在另一台机器上通过rpc_press发请求，当qps较大时，通过brpc的监控页面，可以看到，运行时间越长，延时会越来越大。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/652887148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/653715649","html_url":"https://github.com/apache/brpc/issues/743#issuecomment-653715649","issue_url":"https://api.github.com/repos/apache/brpc/issues/743","id":653715649,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzcxNTY0OQ==","user":{"login":"SOSDAN","id":13742801,"node_id":"MDQ6VXNlcjEzNzQyODAx","avatar_url":"https://avatars.githubusercontent.com/u/13742801?v=4","gravatar_id":"","url":"https://api.github.com/users/SOSDAN","html_url":"https://github.com/SOSDAN","followers_url":"https://api.github.com/users/SOSDAN/followers","following_url":"https://api.github.com/users/SOSDAN/following{/other_user}","gists_url":"https://api.github.com/users/SOSDAN/gists{/gist_id}","starred_url":"https://api.github.com/users/SOSDAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SOSDAN/subscriptions","organizations_url":"https://api.github.com/users/SOSDAN/orgs","repos_url":"https://api.github.com/users/SOSDAN/repos","events_url":"https://api.github.com/users/SOSDAN/events{/privacy}","received_events_url":"https://api.github.com/users/SOSDAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T03:34:29Z","updated_at":"2020-07-04T03:34:29Z","author_association":"NONE","body":"重启同机部署的consul client之后，也出现了worker调度极不均衡的问题，服务可用但是失败率飙升。导致重启consul client之后必须重启连接consul client的服务，该服务才能恢复正常。用的是ConsulNamingService。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/653715649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654007253","html_url":"https://github.com/apache/brpc/issues/1152#issuecomment-654007253","issue_url":"https://api.github.com/repos/apache/brpc/issues/1152","id":654007253,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDAwNzI1Mw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T04:23:19Z","updated_at":"2020-07-06T04:23:19Z","author_association":"CONTRIBUTOR","body":"The read/write lock functions in brpc are not implemented.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654007253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654058047","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-654058047","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":654058047,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDA1ODA0Nw==","user":{"login":"huntinux","id":6072626,"node_id":"MDQ6VXNlcjYwNzI2MjY=","avatar_url":"https://avatars.githubusercontent.com/u/6072626?v=4","gravatar_id":"","url":"https://api.github.com/users/huntinux","html_url":"https://github.com/huntinux","followers_url":"https://api.github.com/users/huntinux/followers","following_url":"https://api.github.com/users/huntinux/following{/other_user}","gists_url":"https://api.github.com/users/huntinux/gists{/gist_id}","starred_url":"https://api.github.com/users/huntinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huntinux/subscriptions","organizations_url":"https://api.github.com/users/huntinux/orgs","repos_url":"https://api.github.com/users/huntinux/repos","events_url":"https://api.github.com/users/huntinux/events{/privacy}","received_events_url":"https://api.github.com/users/huntinux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T07:13:15Z","updated_at":"2020-07-06T07:13:15Z","author_association":"NONE","body":"> > @kof02guy 从 ObjectPool 中分配的对象所占用的内存是不会归还给系统的，如果到达最大值，再从里面分配，会返回null.\r\n> > 这个最大值从代码看目前不能调整， 是const 常量.\r\n> > ObjectPool 适用于分配比较固定大小的 ，且生命周期比较短暂的，分配完之后，可能过一会儿就归还给Pool的object。这样ObjectPool 保持一个动态平衡。在这样的场景下， 性能应该很高.\r\n> \r\n> 有的场景下，可能系统存在一个很高的性能尖峰，在那个尖峰可能需要分配很多的资源。但是在大多数情况下，系统的压力都很低，那些在性能尖峰分配出来的资源如果不shrink的话，那么相当于是变相的资源浪费了\r\n\r\n如果性能尖峰是周期性的，拉长时间线来看，感觉也不算是资源浪费，因为这些资源会被下一个性能尖峰复用。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654058047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654663190","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-654663190","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":654663190,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDY2MzE5MA==","user":{"login":"triump2020","id":63033222,"node_id":"MDQ6VXNlcjYzMDMzMjIy","avatar_url":"https://avatars.githubusercontent.com/u/63033222?v=4","gravatar_id":"","url":"https://api.github.com/users/triump2020","html_url":"https://github.com/triump2020","followers_url":"https://api.github.com/users/triump2020/followers","following_url":"https://api.github.com/users/triump2020/following{/other_user}","gists_url":"https://api.github.com/users/triump2020/gists{/gist_id}","starred_url":"https://api.github.com/users/triump2020/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/triump2020/subscriptions","organizations_url":"https://api.github.com/users/triump2020/orgs","repos_url":"https://api.github.com/users/triump2020/repos","events_url":"https://api.github.com/users/triump2020/events{/privacy}","received_events_url":"https://api.github.com/users/triump2020/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T07:43:53Z","updated_at":"2020-07-07T07:43:53Z","author_association":"NONE","body":"> > > @kof02guy 从 ObjectPool 中分配的对象所占用的内存是不会归还给系统的，如果到达最大值，再从里面分配，会返回null.\r\n> > > 这个最大值从代码看目前不能调整， 是const 常量.\r\n> > > ObjectPool 适用于分配比较固定大小的 ，且生命周期比较短暂的，分配完之后，可能过一会儿就归还给Pool的object。这样ObjectPool 保持一个动态平衡。在这样的场景下， 性能应该很高.\r\n> > \r\n> > \r\n> > 有的场景下，可能系统存在一个很高的性能尖峰，在那个尖峰可能需要分配很多的资源。但是在大多数情况下，系统的压力都很低，那些在性能尖峰分配出来的资源如果不shrink的话，那么相当于是变相的资源浪费了\r\n> \r\n> 如果性能尖峰是周期性的，拉长时间线来看，感觉也不算是资源浪费，因为这些资源会被下一个性能尖峰复用。\r\n\r\n这就是资源浪费，现在没干活，干嘛要占用这么多资源。 这个对云是不友好的，没有弹性","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654663190/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654679871","html_url":"https://github.com/apache/brpc/issues/1136#issuecomment-654679871","issue_url":"https://api.github.com/repos/apache/brpc/issues/1136","id":654679871,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDY3OTg3MQ==","user":{"login":"kof02guy","id":19186563,"node_id":"MDQ6VXNlcjE5MTg2NTYz","avatar_url":"https://avatars.githubusercontent.com/u/19186563?v=4","gravatar_id":"","url":"https://api.github.com/users/kof02guy","html_url":"https://github.com/kof02guy","followers_url":"https://api.github.com/users/kof02guy/followers","following_url":"https://api.github.com/users/kof02guy/following{/other_user}","gists_url":"https://api.github.com/users/kof02guy/gists{/gist_id}","starred_url":"https://api.github.com/users/kof02guy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kof02guy/subscriptions","organizations_url":"https://api.github.com/users/kof02guy/orgs","repos_url":"https://api.github.com/users/kof02guy/repos","events_url":"https://api.github.com/users/kof02guy/events{/privacy}","received_events_url":"https://api.github.com/users/kof02guy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T08:15:14Z","updated_at":"2020-07-07T08:15:14Z","author_association":"NONE","body":"> > > @kof02guy 从 ObjectPool 中分配的对象所占用的内存是不会归还给系统的，如果到达最大值，再从里面分配，会返回null.\r\n> > > 这个最大值从代码看目前不能调整， 是const 常量.\r\n> > > ObjectPool 适用于分配比较固定大小的 ，且生命周期比较短暂的，分配完之后，可能过一会儿就归还给Pool的object。这样ObjectPool 保持一个动态平衡。在这样的场景下， 性能应该很高.\r\n> > \r\n> > \r\n> > 有的场景下，可能系统存在一个很高的性能尖峰，在那个尖峰可能需要分配很多的资源。但是在大多数情况下，系统的压力都很低，那些在性能尖峰分配出来的资源如果不shrink的话，那么相当于是变相的资源浪费了\r\n> \r\n> 如果性能尖峰是周期性的，拉长时间线来看，感觉也不算是资源浪费，因为这些资源会被下一个性能尖峰复用。\r\n\r\n嗯其实类似这样的池类的实现基本上都会周期性地shrink，或者至少有接口或者参数让用户可以有些许控制权，例如golang里的内存管理。因为一方面不一定下一个尖峰会到来，另一方面整个机器上可能会有别的资源需求，如果都被hold在这里而不能有效利用的话，那其实不是很合理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654679871/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654871059","html_url":"https://github.com/apache/brpc/issues/1155#issuecomment-654871059","issue_url":"https://api.github.com/repos/apache/brpc/issues/1155","id":654871059,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDg3MTA1OQ==","user":{"login":"liumh8","id":26078945,"node_id":"MDQ6VXNlcjI2MDc4OTQ1","avatar_url":"https://avatars.githubusercontent.com/u/26078945?v=4","gravatar_id":"","url":"https://api.github.com/users/liumh8","html_url":"https://github.com/liumh8","followers_url":"https://api.github.com/users/liumh8/followers","following_url":"https://api.github.com/users/liumh8/following{/other_user}","gists_url":"https://api.github.com/users/liumh8/gists{/gist_id}","starred_url":"https://api.github.com/users/liumh8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liumh8/subscriptions","organizations_url":"https://api.github.com/users/liumh8/orgs","repos_url":"https://api.github.com/users/liumh8/repos","events_url":"https://api.github.com/users/liumh8/events{/privacy}","received_events_url":"https://api.github.com/users/liumh8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T13:43:58Z","updated_at":"2020-07-07T13:43:58Z","author_association":"NONE","body":"@zyearn 你好，请帮忙确认一下是否是IOBuf的fetch1函数有问题导致Redis解析错误？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/654871059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/655344470","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-655344470","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":655344470,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTM0NDQ3MA==","user":{"login":"ming535","id":7576663,"node_id":"MDQ6VXNlcjc1NzY2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/7576663?v=4","gravatar_id":"","url":"https://api.github.com/users/ming535","html_url":"https://github.com/ming535","followers_url":"https://api.github.com/users/ming535/followers","following_url":"https://api.github.com/users/ming535/following{/other_user}","gists_url":"https://api.github.com/users/ming535/gists{/gist_id}","starred_url":"https://api.github.com/users/ming535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ming535/subscriptions","organizations_url":"https://api.github.com/users/ming535/orgs","repos_url":"https://api.github.com/users/ming535/repos","events_url":"https://api.github.com/users/ming535/events{/privacy}","received_events_url":"https://api.github.com/users/ming535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T07:34:56Z","updated_at":"2020-07-08T07:34:56Z","author_association":"NONE","body":"【那个bthread用std::mutex导致死锁的问题】请问这个是什么问题，现有的 issue 上也没有搜到","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/655344470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/655858507","html_url":"https://github.com/apache/brpc/issues/1154#issuecomment-655858507","issue_url":"https://api.github.com/repos/apache/brpc/issues/1154","id":655858507,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTg1ODUwNw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T02:27:28Z","updated_at":"2020-07-09T02:27:28Z","author_association":"CONTRIBUTOR","body":"可以开启一下熔断功能，时间就变成可控的了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/655858507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/655915774","html_url":"https://github.com/apache/brpc/issues/742#issuecomment-655915774","issue_url":"https://api.github.com/repos/apache/brpc/issues/742","id":655915774,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTkxNTc3NA==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T05:49:27Z","updated_at":"2020-07-09T05:49:27Z","author_association":"MEMBER","body":"@jamesge 不支持 32 位系统是因为使用了什么 32 位系统中不支持的特性还是只是因为使用场景少而没考虑该问题? 有这方面的什么考虑吗?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/655915774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656483900","html_url":"https://github.com/apache/brpc/issues/1158#issuecomment-656483900","issue_url":"https://api.github.com/repos/apache/brpc/issues/1158","id":656483900,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ4MzkwMA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T05:03:08Z","updated_at":"2020-07-10T05:03:08Z","author_association":"MEMBER","body":"这种是http service，不需要用grpc访问，直接用语言自带的http client访问就可以了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656483900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656545703","html_url":"https://github.com/apache/brpc/issues/1158#issuecomment-656545703","issue_url":"https://api.github.com/repos/apache/brpc/issues/1158","id":656545703,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjU0NTcwMw==","user":{"login":"walterzhaoJR","id":22393698,"node_id":"MDQ6VXNlcjIyMzkzNjk4","avatar_url":"https://avatars.githubusercontent.com/u/22393698?v=4","gravatar_id":"","url":"https://api.github.com/users/walterzhaoJR","html_url":"https://github.com/walterzhaoJR","followers_url":"https://api.github.com/users/walterzhaoJR/followers","following_url":"https://api.github.com/users/walterzhaoJR/following{/other_user}","gists_url":"https://api.github.com/users/walterzhaoJR/gists{/gist_id}","starred_url":"https://api.github.com/users/walterzhaoJR/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterzhaoJR/subscriptions","organizations_url":"https://api.github.com/users/walterzhaoJR/orgs","repos_url":"https://api.github.com/users/walterzhaoJR/repos","events_url":"https://api.github.com/users/walterzhaoJR/events{/privacy}","received_events_url":"https://api.github.com/users/walterzhaoJR/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T08:07:26Z","updated_at":"2020-07-10T08:07:41Z","author_association":"NONE","body":"@zyearn 是的，不过就是解析字符串麻烦一些……","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656545703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656598021","html_url":"https://github.com/apache/brpc/pull/1142#issuecomment-656598021","issue_url":"https://api.github.com/repos/apache/brpc/issues/1142","id":656598021,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjU5ODAyMQ==","user":{"login":"tobegit3hub","id":2715000,"node_id":"MDQ6VXNlcjI3MTUwMDA=","avatar_url":"https://avatars.githubusercontent.com/u/2715000?v=4","gravatar_id":"","url":"https://api.github.com/users/tobegit3hub","html_url":"https://github.com/tobegit3hub","followers_url":"https://api.github.com/users/tobegit3hub/followers","following_url":"https://api.github.com/users/tobegit3hub/following{/other_user}","gists_url":"https://api.github.com/users/tobegit3hub/gists{/gist_id}","starred_url":"https://api.github.com/users/tobegit3hub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobegit3hub/subscriptions","organizations_url":"https://api.github.com/users/tobegit3hub/orgs","repos_url":"https://api.github.com/users/tobegit3hub/repos","events_url":"https://api.github.com/users/tobegit3hub/events{/privacy}","received_events_url":"https://api.github.com/users/tobegit3hub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T10:09:47Z","updated_at":"2020-07-10T10:09:47Z","author_association":"CONTRIBUTOR","body":"It is a quick fix. Can @zyearn @jamesge @TousakaRin help to review and merge this?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656598021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656628488","html_url":"https://github.com/apache/brpc/issues/1154#issuecomment-656628488","issue_url":"https://api.github.com/repos/apache/brpc/issues/1154","id":656628488,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjYyODQ4OA==","user":{"login":"psylambda","id":36839348,"node_id":"MDQ6VXNlcjM2ODM5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/36839348?v=4","gravatar_id":"","url":"https://api.github.com/users/psylambda","html_url":"https://github.com/psylambda","followers_url":"https://api.github.com/users/psylambda/followers","following_url":"https://api.github.com/users/psylambda/following{/other_user}","gists_url":"https://api.github.com/users/psylambda/gists{/gist_id}","starred_url":"https://api.github.com/users/psylambda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psylambda/subscriptions","organizations_url":"https://api.github.com/users/psylambda/orgs","repos_url":"https://api.github.com/users/psylambda/repos","events_url":"https://api.github.com/users/psylambda/events{/privacy}","received_events_url":"https://api.github.com/users/psylambda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T11:33:01Z","updated_at":"2020-07-10T11:33:01Z","author_association":"NONE","body":"> 可以开启一下熔断功能，时间就变成可控的了\r\n\r\n熔断功能确实可以控制断开连接的时间, 但参数太多太复杂了。tcp_user_timeout相对而言容易理解很多。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656628488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656691854","html_url":"https://github.com/apache/brpc/issues/1154#issuecomment-656691854","issue_url":"https://api.github.com/repos/apache/brpc/issues/1154","id":656691854,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjY5MTg1NA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T14:00:04Z","updated_at":"2020-07-10T14:00:04Z","author_association":"MEMBER","body":"这里有两种情况：\r\n1. 对端出现异常断网/掉电，client端的tcp连接无法感知（可以通过加SO_KEEPALIVE解决），这时如果server不启动，client就会持续发流量，当server一恢复，client就会收到“Connection reset by peer”，然后下一次rpc会重新建tcp连接。\r\n2. 对端正常重启，client端会直接关闭掉当前的socket，下一次rpc也会重建连接。\r\n\r\n在上述两个情况下，都会新建tcp连接，所以你描述的“因tcp重传的backoff机制，导致server端恢复110秒后, client端才请求成功“听起来是一直在用同一个tcp连接，但这似乎不会发生，可以具体描述一下导致你下这一结论的数据/现象么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/656691854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657221387","html_url":"https://github.com/apache/brpc/issues/1071#issuecomment-657221387","issue_url":"https://api.github.com/repos/apache/brpc/issues/1071","id":657221387,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzIyMTM4Nw==","user":{"login":"TheFinalHydra","id":66103294,"node_id":"MDQ6VXNlcjY2MTAzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/66103294?v=4","gravatar_id":"","url":"https://api.github.com/users/TheFinalHydra","html_url":"https://github.com/TheFinalHydra","followers_url":"https://api.github.com/users/TheFinalHydra/followers","following_url":"https://api.github.com/users/TheFinalHydra/following{/other_user}","gists_url":"https://api.github.com/users/TheFinalHydra/gists{/gist_id}","starred_url":"https://api.github.com/users/TheFinalHydra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheFinalHydra/subscriptions","organizations_url":"https://api.github.com/users/TheFinalHydra/orgs","repos_url":"https://api.github.com/users/TheFinalHydra/repos","events_url":"https://api.github.com/users/TheFinalHydra/events{/privacy}","received_events_url":"https://api.github.com/users/TheFinalHydra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T13:23:40Z","updated_at":"2020-07-12T13:23:40Z","author_association":"NONE","body":"我也遇到了这个问题，而且实际上，通过promethus格式暴露出来的lateny_80/90/99/9999/cdf也同样没有值，只有count, ops, latency和max_latency有值。\r\n\r\n之前的旧版本是好的，更新到了今年6月份的某一个commit之后，就不可以了，请问是什么地方修改了吗？\r\n\r\n另外我看到[`latency_recorder.cpp的137行`](https://github.com/apache/incubator-brpc/blob/master/src/bvar/latency_recorder.cpp#L137)里面有这样一段话\r\n\r\n> // NOTE: We don't show 99.99% since it's often significantly larger than\r\n> // other values and make other curves on the plotted graph small and\r\n> // hard to read.\r\n\r\n这里不太明白，为什么这里要直接把99.99%去掉呢？如果用户觉得指标不需要，完全应该由用户在监控上直接不抓取这一项的值，或者读取`/brpc_metrics`的时候直接跳过这一项就好了，而不是由brpc这个框架级别的东西要这个值写死成一个假的值。这样bvar里面既暴露了9999，但却一直是一个假的值，会容易让人迷惑","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657221387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657225105","html_url":"https://github.com/apache/brpc/issues/1071#issuecomment-657225105","issue_url":"https://api.github.com/repos/apache/brpc/issues/1071","id":657225105,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzIyNTEwNQ==","user":{"login":"TheFinalHydra","id":66103294,"node_id":"MDQ6VXNlcjY2MTAzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/66103294?v=4","gravatar_id":"","url":"https://api.github.com/users/TheFinalHydra","html_url":"https://github.com/TheFinalHydra","followers_url":"https://api.github.com/users/TheFinalHydra/followers","following_url":"https://api.github.com/users/TheFinalHydra/following{/other_user}","gists_url":"https://api.github.com/users/TheFinalHydra/gists{/gist_id}","starred_url":"https://api.github.com/users/TheFinalHydra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheFinalHydra/subscriptions","organizations_url":"https://api.github.com/users/TheFinalHydra/orgs","repos_url":"https://api.github.com/users/TheFinalHydra/repos","events_url":"https://api.github.com/users/TheFinalHydra/events{/privacy}","received_events_url":"https://api.github.com/users/TheFinalHydra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T13:55:12Z","updated_at":"2020-07-12T13:55:12Z","author_association":"NONE","body":"我在`latency_percentil`里面手动获取`cb->get_number(0.9999)`有时候是可以获取到值的，基本是若干个0后，就有几个值\r\n\r\n下面是一部分数值\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 1\r\n> ratio = 0.9999, val = 1\r\n> ratio = 0.9999, val = 2\r\n> ratio = 0.9999, val = 1\r\n> ratio = 0.9999, val = 3\r\n> ratio = 0.9999, val = 20673\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 14836\r\n> .....\r\n> ratio = 0.9999, val = 0\r\n> ratio = 0.9999, val = 757\r\n> ratio = 0.9999, val = 15320\r\n> ratio = 0.9999, val = 61\r\n> ratio = 0.9999, val = 1152\r\n> ratio = 0.9999, val = 2687\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657225105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657433936","html_url":"https://github.com/apache/brpc/issues/1159#issuecomment-657433936","issue_url":"https://api.github.com/repos/apache/brpc/issues/1159","id":657433936,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzQzMzkzNg==","user":{"login":"ruoshui1314","id":18414978,"node_id":"MDQ6VXNlcjE4NDE0OTc4","avatar_url":"https://avatars.githubusercontent.com/u/18414978?v=4","gravatar_id":"","url":"https://api.github.com/users/ruoshui1314","html_url":"https://github.com/ruoshui1314","followers_url":"https://api.github.com/users/ruoshui1314/followers","following_url":"https://api.github.com/users/ruoshui1314/following{/other_user}","gists_url":"https://api.github.com/users/ruoshui1314/gists{/gist_id}","starred_url":"https://api.github.com/users/ruoshui1314/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruoshui1314/subscriptions","organizations_url":"https://api.github.com/users/ruoshui1314/orgs","repos_url":"https://api.github.com/users/ruoshui1314/repos","events_url":"https://api.github.com/users/ruoshui1314/events{/privacy}","received_events_url":"https://api.github.com/users/ruoshui1314/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T09:17:22Z","updated_at":"2020-07-15T02:43:43Z","author_association":"NONE","body":"update:\r\nIt could be builded successfully when using master branch.\r\nThe command is:\r\n\r\n```shell\r\nsh config_brpc.sh --headers=\"/xxx/local/include /usr/local/include\" --libs=\"/xxx/local/lib /usr/local/lib /xxx/local/bin\" --cc=clang --cxx=clang++\r\n\r\n```\r\nand building example is correct.\r\n\r\n\r\nbut fail to build 0.9.7 brpc library.\r\nThe detail errors :\r\n\r\n\r\nLinking protoc-gen-mcpack\r\nUndefined symbols for architecture x86_64:\r\n  \"fLI::FLAGS_v\", referenced from:\r\n      bthread::ContentionProfiler::flush_to_disk(bool) in libbrpc.a(mutex.o)\r\n      bthread::TaskControl::worker_thread(void*) in libbrpc.a(task_control.o)\r\n      bthread::TimerThread::run() in libbrpc.a(timer_thread.o)\r\n  \"google::LogMessage::stream()\", referenced from:\r\n      mcpack2pb::generate_serializing(google::protobuf::Descriptor const*, std::__1::set<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::less<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&, std::__1::set<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::less<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > >&, google::protobuf::io::Printer&) in generator.o\r\n      mcpack2pb::is_map_entry(google::protobuf::Descriptor const*) in generator.o\r\n      bthread::ContentionProfiler::flush_to_disk(bool) in libbrpc.a(mutex.o)\r\n      bthread::ContentionProfiler::init_if_needed() in libbrpc.a(mutex.o)\r\n      butil::FlatMap<bthread::SampledContention*, bthread::SampledContention*, bthread::ContentionHash, bthread::ContentionEqual, false>::init(unsigned long, unsigned int) in libbrpc.a(mutex.o)\r\n      bthread::ContentionProfilerStart(char const*) in libbrpc.a(mutex.o)\r\n      bthread::ContentionProfilerStop() in libbrpc.a(mutex.o)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657433936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657508033","html_url":"https://github.com/apache/brpc/pull/1160#issuecomment-657508033","issue_url":"https://api.github.com/repos/apache/brpc/issues/1160","id":657508033,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzUwODAzMw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T11:36:40Z","updated_at":"2020-07-13T11:36:40Z","author_association":"MEMBER","body":"要不要把release页面的release note都加上？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657508033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657513362","html_url":"https://github.com/apache/brpc/pull/1160#issuecomment-657513362","issue_url":"https://api.github.com/repos/apache/brpc/issues/1160","id":657513362,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzUxMzM2Mg==","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T11:47:54Z","updated_at":"2020-07-13T11:47:54Z","author_association":"MEMBER","body":"En, 你再更新下？\r\n\r\n发件人: Jiashun Zhu <notifications@github.com>\r\n答复: apache/incubator-brpc <reply@reply.github.com>\r\n日期: 2020年7月13日 星期一 下午7:37\r\n收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com>\r\n抄送: \"zhongyitan(谭中意)\" <zhongyitan@tencent.com>, Author <author@noreply.github.com>\r\n主题: Re: [apache/incubator-brpc] add release note file since 0.9.8-rc01 (#1160)(Internet mail)\r\n\r\n\r\n要不要把release页面的release note都加上？\r\n\r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub<https://github.com/apache/incubator-brpc/pull/1160#issuecomment-657508033>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AEZ6YDUQ2QOCPGFK3LSU2V3R3LWVNANCNFSM4OYJ5YFQ>.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657513362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657523593","html_url":"https://github.com/apache/brpc/pull/1160#issuecomment-657523593","issue_url":"https://api.github.com/repos/apache/brpc/issues/1160","id":657523593,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzUyMzU5Mw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T12:11:13Z","updated_at":"2020-07-13T12:11:13Z","author_association":"MEMBER","body":"> En, 你再更新下？ 发件人: Jiashun Zhu <notifications@github.com> 答复: apache/incubator-brpc <reply@reply.github.com> 日期: 2020年7月13日 星期一 下午7:37 收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com> 抄送: \"zhongyitan(谭中意)\" <zhongyitan@tencent.com>, Author <author@noreply.github.com> 主题: Re: [apache/incubator-brpc] add release note file since 0.9.8-rc01 (#1160)(Internet mail) 要不要把release页面的release note都加上？ — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub<[#1160 (comment)](https://github.com/apache/incubator-brpc/pull/1160#issuecomment-657508033)>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AEZ6YDUQ2QOCPGFK3LSU2V3R3LWVNANCNFSM4OYJ5YFQ>.\r\n\r\n我的意思是要不要把从0.9.0到0.9.8-rc01的release note都加上，这个在release页面可以查到","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657523593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657531100","html_url":"https://github.com/apache/brpc/pull/1160#issuecomment-657531100","issue_url":"https://api.github.com/repos/apache/brpc/issues/1160","id":657531100,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzUzMTEwMA==","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-13T12:27:17Z","updated_at":"2020-07-13T12:27:17Z","author_association":"MEMBER","body":"OK， I will update later， and make another patch","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657531100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657939889","html_url":"https://github.com/apache/brpc/issues/1162#issuecomment-657939889","issue_url":"https://api.github.com/repos/apache/brpc/issues/1162","id":657939889,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzkzOTg4OQ==","user":{"login":"feng-y","id":1547384,"node_id":"MDQ6VXNlcjE1NDczODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1547384?v=4","gravatar_id":"","url":"https://api.github.com/users/feng-y","html_url":"https://github.com/feng-y","followers_url":"https://api.github.com/users/feng-y/followers","following_url":"https://api.github.com/users/feng-y/following{/other_user}","gists_url":"https://api.github.com/users/feng-y/gists{/gist_id}","starred_url":"https://api.github.com/users/feng-y/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng-y/subscriptions","organizations_url":"https://api.github.com/users/feng-y/orgs","repos_url":"https://api.github.com/users/feng-y/repos","events_url":"https://api.github.com/users/feng-y/events{/privacy}","received_events_url":"https://api.github.com/users/feng-y/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T03:08:12Z","updated_at":"2020-07-14T03:08:12Z","author_association":"NONE","body":" E0714 10:17:41.036844 29512 http2_rpc_protocol.cpp:723, OnData] Fail to find stream_id=27791\r\n  E0714 10:17:41.036900 29512 http2_rpc_protocol.cpp:723, OnData] Fail to find stream_id=27791\r\n   E0714 10:17:41.036912 29512 http2_rpc_protocol.cpp:723, OnData] Fail to find stream_id=27791\r\n\r\n在报 connection-level 时报了这个错误","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657939889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657953745","html_url":"https://github.com/apache/brpc/issues/1162#issuecomment-657953745","issue_url":"https://api.github.com/repos/apache/brpc/issues/1162","id":657953745,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Nzk1Mzc0NQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-14T04:05:14Z","updated_at":"2020-07-14T04:05:14Z","author_association":"MEMBER","body":"可以看看client的connections内置界面找到对应的socket，然后看看h2的各个参数是不是都是正常的，特别是_remote_window_left，这个报错是因为_remote_window_left整型溢出了。如果_remote_window_left不正常的话，需要抓个包看看grpc有没有正常把h2 Setting包发给client了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/657953745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/658723892","html_url":"https://github.com/apache/brpc/pull/1160#issuecomment-658723892","issue_url":"https://api.github.com/repos/apache/brpc/issues/1160","id":658723892,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODcyMzg5Mg==","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T11:53:47Z","updated_at":"2020-07-15T11:53:47Z","author_association":"MEMBER","body":"好了，我把之前的release info都加上了，再看看。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/658723892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/658739499","html_url":"https://github.com/apache/brpc/issues/1164#issuecomment-658739499","issue_url":"https://api.github.com/repos/apache/brpc/issues/1164","id":658739499,"node_id":"MDEyOklzc3VlQ29tbWVudDY1ODczOTQ5OQ==","user":{"login":"rpbear88","id":61613299,"node_id":"MDQ6VXNlcjYxNjEzMjk5","avatar_url":"https://avatars.githubusercontent.com/u/61613299?v=4","gravatar_id":"","url":"https://api.github.com/users/rpbear88","html_url":"https://github.com/rpbear88","followers_url":"https://api.github.com/users/rpbear88/followers","following_url":"https://api.github.com/users/rpbear88/following{/other_user}","gists_url":"https://api.github.com/users/rpbear88/gists{/gist_id}","starred_url":"https://api.github.com/users/rpbear88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpbear88/subscriptions","organizations_url":"https://api.github.com/users/rpbear88/orgs","repos_url":"https://api.github.com/users/rpbear88/repos","events_url":"https://api.github.com/users/rpbear88/events{/privacy}","received_events_url":"https://api.github.com/users/rpbear88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-15T12:31:29Z","updated_at":"2020-07-15T12:33:21Z","author_association":"NONE","body":"ping @jamesge","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/658739499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659175838","html_url":"https://github.com/apache/brpc/issues/1170#issuecomment-659175838","issue_url":"https://api.github.com/repos/apache/brpc/issues/1170","id":659175838,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE3NTgzOA==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T05:53:45Z","updated_at":"2020-07-16T05:53:45Z","author_association":"MEMBER","body":"> /root/unit-dmkit/brpc/_build/idl_options.pb.h:12:2: 错误：#error This file was generated by a newer version of protoc which is\r\n#error This file was generated by a newer version of protoc which is\r\n\r\n``protoc`` 和 ``libprotobuf`` 版本不一致\r\n\r\n> -- Found PROTOBUF: /usr/local/lib/libprotobuf.so\r\n\r\n可以确认下 ``protoc`` 的路径及版本.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659175838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659177536","html_url":"https://github.com/apache/brpc/issues/1170#issuecomment-659177536","issue_url":"https://api.github.com/repos/apache/brpc/issues/1170","id":659177536,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE3NzUzNg==","user":{"login":"breaveSun","id":19924445,"node_id":"MDQ6VXNlcjE5OTI0NDQ1","avatar_url":"https://avatars.githubusercontent.com/u/19924445?v=4","gravatar_id":"","url":"https://api.github.com/users/breaveSun","html_url":"https://github.com/breaveSun","followers_url":"https://api.github.com/users/breaveSun/followers","following_url":"https://api.github.com/users/breaveSun/following{/other_user}","gists_url":"https://api.github.com/users/breaveSun/gists{/gist_id}","starred_url":"https://api.github.com/users/breaveSun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/breaveSun/subscriptions","organizations_url":"https://api.github.com/users/breaveSun/orgs","repos_url":"https://api.github.com/users/breaveSun/repos","events_url":"https://api.github.com/users/breaveSun/events{/privacy}","received_events_url":"https://api.github.com/users/breaveSun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T05:58:53Z","updated_at":"2020-07-16T05:58:53Z","author_association":"NONE","body":"> > /root/unit-dmkit/brpc/_build/idl_options.pb.h:12:2: 错误：#error This file was generated by a newer version of protoc which is\r\n> > #error This file was generated by a newer version of protoc which is\r\n> \r\n> `protoc` 和 `libprotobuf` 版本不一致\r\n> \r\n> > -- Found PROTOBUF: /usr/local/lib/libprotobuf.so\r\n> \r\n> 可以确认下 `protoc` 的路径及版本.\r\n\r\n[root@robot-release-1 _build]# protoc --version\r\nlibprotoc 2.5.0\r\n[root@robot-release-1 _build]# which protoc\r\n/usr/bin/protoc\r\n\r\n请问这样有什么问题么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659177536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659183489","html_url":"https://github.com/apache/brpc/issues/1170#issuecomment-659183489","issue_url":"https://api.github.com/repos/apache/brpc/issues/1170","id":659183489,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTE4MzQ4OQ==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T06:15:35Z","updated_at":"2020-07-16T06:17:37Z","author_association":"MEMBER","body":"> > `protoc` 和 `libprotobuf` 版本不一致\r\n> > > -- Found PROTOBUF: /usr/local/lib/libprotobuf.so\r\n\r\ncmake 找到的是你自己编译的 ``protobuf``(在 /usr/local 下)\r\n\r\n> [root@robot-release-1 _build]# protoc --version\r\n> libprotoc 2.5.0\r\n> [root@robot-release-1 _build]# which protoc\r\n> /usr/bin/protoc\r\n\r\n而 ``protoc`` 是系统自带的, 两个版本不一致.\r\n\r\n保持 ``protoc`` 和 ``libprotobuf.so`` 版本一致就可以, 要么都使用系统提供的, 要么都使用自己编译的.\r\n\r\n``/usr/local/bin`` 下应该也有自己编译的 ``protoc``, 可以考虑卸载掉系统自带的 ``protobuf`` 相关包:\r\n```\r\nyum remove -y  protobuf-compiler\r\n```\r\n或者修改 ``PATH`` 变量把 ``/usr/local/bin`` 放到前面, 如:\r\n```\r\nexport PATH=/usr/local/bin:$PPATH\r\n```\r\n然后再进行编译, 编译前可以把编译目录删掉, 重新执行编译步骤.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659183489/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659268863","html_url":"https://github.com/apache/brpc/issues/764#issuecomment-659268863","issue_url":"https://api.github.com/repos/apache/brpc/issues/764","id":659268863,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTI2ODg2Mw==","user":{"login":"lilithliu1","id":29496884,"node_id":"MDQ6VXNlcjI5NDk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/29496884?v=4","gravatar_id":"","url":"https://api.github.com/users/lilithliu1","html_url":"https://github.com/lilithliu1","followers_url":"https://api.github.com/users/lilithliu1/followers","following_url":"https://api.github.com/users/lilithliu1/following{/other_user}","gists_url":"https://api.github.com/users/lilithliu1/gists{/gist_id}","starred_url":"https://api.github.com/users/lilithliu1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lilithliu1/subscriptions","organizations_url":"https://api.github.com/users/lilithliu1/orgs","repos_url":"https://api.github.com/users/lilithliu1/repos","events_url":"https://api.github.com/users/lilithliu1/events{/privacy}","received_events_url":"https://api.github.com/users/lilithliu1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T09:03:22Z","updated_at":"2020-07-16T09:03:22Z","author_association":"NONE","body":"这个问题有计划修复么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/659268863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661605818","html_url":"https://github.com/apache/brpc/issues/1177#issuecomment-661605818","issue_url":"https://api.github.com/repos/apache/brpc/issues/1177","id":661605818,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTYwNTgxOA==","user":{"login":"ustccy","id":16217871,"node_id":"MDQ6VXNlcjE2MjE3ODcx","avatar_url":"https://avatars.githubusercontent.com/u/16217871?v=4","gravatar_id":"","url":"https://api.github.com/users/ustccy","html_url":"https://github.com/ustccy","followers_url":"https://api.github.com/users/ustccy/followers","following_url":"https://api.github.com/users/ustccy/following{/other_user}","gists_url":"https://api.github.com/users/ustccy/gists{/gist_id}","starred_url":"https://api.github.com/users/ustccy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ustccy/subscriptions","organizations_url":"https://api.github.com/users/ustccy/orgs","repos_url":"https://api.github.com/users/ustccy/repos","events_url":"https://api.github.com/users/ustccy/events{/privacy}","received_events_url":"https://api.github.com/users/ustccy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T03:20:33Z","updated_at":"2020-08-01T04:04:28Z","author_association":"NONE","body":"疑问1：about_to_quit大部分在一次rpc调用协程结束时设置，完成后该协程不是会立即退出么？\r\n疑问2：EPOLLOUT|EPOLLERR事件由epoll_wait协程同步处理，会执行到controller::IssueRPC，该函数的处理耗时直接影响了epoll_wait事件的处理时延，是否考虑过类似EPOLLIN的起协程并做好并发保护。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661605818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661936369","html_url":"https://github.com/apache/brpc/issues/1168#issuecomment-661936369","issue_url":"https://api.github.com/repos/apache/brpc/issues/1168","id":661936369,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTkzNjM2OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T15:38:34Z","updated_at":"2020-07-21T15:38:34Z","author_association":"CONTRIBUTOR","body":"\"日志中持续输出Not connected to 10.26.44.32:8060 yet\", 这是指Y还是其他（正常的）上游？Y所在的server并没有陷入死锁吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661936369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661938063","html_url":"https://github.com/apache/brpc/issues/1166#issuecomment-661938063","issue_url":"https://api.github.com/repos/apache/brpc/issues/1166","id":661938063,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTkzODA2Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T15:41:27Z","updated_at":"2020-07-21T15:41:27Z","author_association":"CONTRIBUTOR","body":"没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661938063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661939424","html_url":"https://github.com/apache/brpc/issues/1165#issuecomment-661939424","issue_url":"https://api.github.com/repos/apache/brpc/issues/1165","id":661939424,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTkzOTQyNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T15:43:54Z","updated_at":"2020-07-21T15:43:54Z","author_association":"CONTRIBUTOR","body":"interval具体是指哪个参数？LatencyRecorder的初始化参数是window_size，这是其支持的最大统计窗口，需要取的时候是可以更小的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661939424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661950226","html_url":"https://github.com/apache/brpc/issues/1164#issuecomment-661950226","issue_url":"https://api.github.com/repos/apache/brpc/issues/1164","id":661950226,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTk1MDIyNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T16:02:47Z","updated_at":"2020-07-21T16:02:47Z","author_association":"CONTRIBUTOR","body":"ExecutionQueue is designed for running tasks (with dependencies) **in order**, and different ExecutionQueues run in parallel to make good use of CPU cores.  The polling version does not make sense because we're not subscribing \"events\" that are not controlled by us: the submitted tasks are just created by users, who can perfectly run the tasks one-by-one with a for-loop, without any other code. However, if one of the tasks blocks, the calling thread blocks. If you don't need this behavior, you need ExecutionQueue.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661950226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661956917","html_url":"https://github.com/apache/brpc/pull/1161#issuecomment-661956917","issue_url":"https://api.github.com/repos/apache/brpc/issues/1161","id":661956917,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTk1NjkxNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T16:14:32Z","updated_at":"2020-07-21T16:14:32Z","author_association":"CONTRIBUTOR","body":"Thanks for the fix 👍 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661956917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661959534","html_url":"https://github.com/apache/brpc/pull/1157#issuecomment-661959534","issue_url":"https://api.github.com/repos/apache/brpc/issues/1157","id":661959534,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MTk1OTUzNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-21T16:19:19Z","updated_at":"2020-07-21T16:19:19Z","author_association":"CONTRIBUTOR","body":"hi，主要是指_numinflight这个计数不对么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/661959534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662570960","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-662570960","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":662570960,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjU3MDk2MA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-22T17:00:37Z","updated_at":"2020-07-23T01:46:49Z","author_association":"MEMBER","body":"如果先schedule一个task，再立即unschedule他（此时Bucket中的_task_head不会被置为nullptr），task被回收回pool。然后再schedule一个task，那么就有可能两次task的地址是相同的，第二次schedule时Bucket中残留的_task_head与新增的task是同一个地址，从而造成循环链表？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662570960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662777256","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-662777256","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":662777256,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mjc3NzI1Ng==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T01:26:48Z","updated_at":"2020-07-23T01:26:48Z","author_association":"CONTRIBUTOR","body":"这个TimerThread 是干啥用的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662777256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662781453","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-662781453","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":662781453,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mjc4MTQ1Mw==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T01:47:12Z","updated_at":"2020-07-23T01:47:12Z","author_association":"MEMBER","body":"> 这个TimerThread 是干啥用的？\r\n\r\n应当是用于检测一个rpc是否超时的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662781453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662815865","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-662815865","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":662815865,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjgxNTg2NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T04:44:27Z","updated_at":"2020-07-23T04:44:27Z","author_association":"CONTRIBUTOR","body":"> 立即unschedule他（此时Bucket中的_task_head不会被置为nullptr），task被回收回pool\r\n\r\nunschedule只是做个[标记](https://github.com/apache/incubator-brpc/blob/e5bd064b3aed62d35b8d1f6d2456522f9558e4ee/src/bthread/timer_thread.cpp#L254)，真正的删除是发生在TimerThread内\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662815865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662838478","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-662838478","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":662838478,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjgzODQ3OA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T06:21:56Z","updated_at":"2020-07-23T06:21:56Z","author_association":"MEMBER","body":"> > 立即unschedule他（此时Bucket中的_task_head不会被置为nullptr），task被回收回pool\r\n> \r\n> unschedule只是做个[标记](https://github.com/apache/incubator-brpc/blob/e5bd064b3aed62d35b8d1f6d2456522f9558e4ee/src/bthread/timer_thread.cpp#L254)，真正的删除是发生在TimerThread内\r\n\r\n那有没有什么情况，导致Bucket中的_task_head对应的task被schedule的时候重用了呢？感觉只有这种情况才能导致task的next指向自己","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662838478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662866767","html_url":"https://github.com/apache/brpc/issues/1165#issuecomment-662866767","issue_url":"https://api.github.com/repos/apache/brpc/issues/1165","id":662866767,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mjg2Njc2Nw==","user":{"login":"TheFinalHydra","id":66103294,"node_id":"MDQ6VXNlcjY2MTAzMjk0","avatar_url":"https://avatars.githubusercontent.com/u/66103294?v=4","gravatar_id":"","url":"https://api.github.com/users/TheFinalHydra","html_url":"https://github.com/TheFinalHydra","followers_url":"https://api.github.com/users/TheFinalHydra/followers","following_url":"https://api.github.com/users/TheFinalHydra/following{/other_user}","gists_url":"https://api.github.com/users/TheFinalHydra/gists{/gist_id}","starred_url":"https://api.github.com/users/TheFinalHydra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheFinalHydra/subscriptions","organizations_url":"https://api.github.com/users/TheFinalHydra/orgs","repos_url":"https://api.github.com/users/TheFinalHydra/repos","events_url":"https://api.github.com/users/TheFinalHydra/events{/privacy}","received_events_url":"https://api.github.com/users/TheFinalHydra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T07:48:03Z","updated_at":"2020-07-23T07:48:03Z","author_association":"NONE","body":"是的就是window_size, 但是设置成1s就是会发现`latency/max_latency`有值，但是`latency_90/90/99/9999`值为0\r\n\r\n所以它为0的原因会不会是因为采样线程周期为1s, 然后我这里window_size设置为1s的话，可能恰好取不到上一次采样线程采到的值？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662866767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662904071","html_url":"https://github.com/apache/brpc/issues/1181#issuecomment-662904071","issue_url":"https://api.github.com/repos/apache/brpc/issues/1181","id":662904071,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MjkwNDA3MQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T09:17:32Z","updated_at":"2020-07-23T09:17:32Z","author_association":"CONTRIBUTOR","body":"找到原因了。是echo例子里面没有引用指定glog的连接项","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/662904071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663036239","html_url":"https://github.com/apache/brpc/issues/1155#issuecomment-663036239","issue_url":"https://api.github.com/repos/apache/brpc/issues/1155","id":663036239,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzAzNjIzOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-23T14:22:36Z","updated_at":"2020-07-23T14:22:36Z","author_association":"MEMBER","body":"@liumh8 感谢反馈，已经在 https://github.com/apache/incubator-brpc/pull/1156 修复了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663036239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663308720","html_url":"https://github.com/apache/brpc/issues/1182#issuecomment-663308720","issue_url":"https://api.github.com/repos/apache/brpc/issues/1182","id":663308720,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzMwODcyMA==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T01:24:52Z","updated_at":"2020-07-24T01:24:52Z","author_association":"CONTRIBUTOR","body":"已解决。make clean之后再编译就好了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663308720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663328354","html_url":"https://github.com/apache/brpc/issues/1183#issuecomment-663328354","issue_url":"https://api.github.com/repos/apache/brpc/issues/1183","id":663328354,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzMyODM1NA==","user":{"login":"lzueclipse","id":4018691,"node_id":"MDQ6VXNlcjQwMTg2OTE=","avatar_url":"https://avatars.githubusercontent.com/u/4018691?v=4","gravatar_id":"","url":"https://api.github.com/users/lzueclipse","html_url":"https://github.com/lzueclipse","followers_url":"https://api.github.com/users/lzueclipse/followers","following_url":"https://api.github.com/users/lzueclipse/following{/other_user}","gists_url":"https://api.github.com/users/lzueclipse/gists{/gist_id}","starred_url":"https://api.github.com/users/lzueclipse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lzueclipse/subscriptions","organizations_url":"https://api.github.com/users/lzueclipse/orgs","repos_url":"https://api.github.com/users/lzueclipse/repos","events_url":"https://api.github.com/users/lzueclipse/events{/privacy}","received_events_url":"https://api.github.com/users/lzueclipse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T03:11:34Z","updated_at":"2020-07-24T03:11:34Z","author_association":"NONE","body":"更新了描述：\r\n发现--rdma_device=mlx5_3时，此处的cm_id->verbs->device一直是mlx5_1；而GetRdmaProtectionDomain()是基于--rdma-device=mlx5_3创建的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663328354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663330333","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-663330333","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":663330333,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzMzMDMzMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T03:21:58Z","updated_at":"2020-07-24T03:21:58Z","author_association":"CONTRIBUTOR","body":"@acelyc111 目前能在你的场景中复现么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663330333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663333595","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-663333595","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":663333595,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzMzMzU5NQ==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T03:40:23Z","updated_at":"2020-07-24T03:40:23Z","author_association":"MEMBER","body":"@jamesge 还不知道稳定复现的方法，但一个30个节点的集群(Doris集群)，一天会有8~10次这样的coredump。可能跟使用场景有关，其他有更多节点的集群倒是没有出这样的core。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663333595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663334021","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-663334021","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":663334021,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzMzNDAyMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T03:43:14Z","updated_at":"2020-07-24T03:43:14Z","author_association":"CONTRIBUTOR","body":"那你试试看在你们用到的brpc中删除[这段if分支](https://github.com/apache/incubator-brpc/blob/e5bd064b3aed62d35b8d1f6d2456522f9558e4ee/src/bthread/timer_thread.cpp#L370)，即如下这段\r\n```\r\n            if (task1->try_delete()) { // already unscheduled\r\n                std::pop_heap(tasks.begin(), tasks.end(), task_greater);\r\n                tasks.pop_back();\r\n                continue;\r\n            }\r\n```\r\n看看问题是否仍会重现。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663334021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663334359","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-663334359","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":663334359,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzMzNDM1OQ==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T03:45:19Z","updated_at":"2020-07-24T03:45:19Z","author_association":"MEMBER","body":"> 那你试试看在你们用到的brpc中删除[这段if分支](https://github.com/apache/incubator-brpc/blob/e5bd064b3aed62d35b8d1f6d2456522f9558e4ee/src/bthread/timer_thread.cpp#L370)，即如下这段\r\n> \r\n> ```\r\n>             if (task1->try_delete()) { // already unscheduled\r\n>                 std::pop_heap(tasks.begin(), tasks.end(), task_greater);\r\n>                 tasks.pop_back();\r\n>                 continue;\r\n>             }\r\n> ```\r\n> \r\n> 看看问题是否仍会重现。\r\n\r\n好的多谢，我试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663334359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663388665","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-663388665","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":663388665,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzM4ODY2NQ==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T07:37:19Z","updated_at":"2020-07-24T07:37:19Z","author_association":"MEMBER","body":"另外，还发现一些信息，希望对定位问题有帮助。日志中发现有：\r\n```\r\n[work@c3-bigdata-doris-be39 log]$ grep \"timer_thread\" be.INFO.log.20200723\r\nE0723 00:16:31.562367 100086 timer_thread.cpp:255] Invalid task_id=85899345922\r\nE0723 00:58:46.798079 100121 timer_thread.cpp:255] Invalid task_id=103079215106\r\nE0723 01:10:28.283030 100144 timer_thread.cpp:255] Invalid task_id=111669149698\r\nE0723 01:21:14.221813 100124 timer_thread.cpp:255] Invalid task_id=120259084290\r\nE0723 02:17:08.497958 100135 timer_thread.cpp:255] Invalid task_id=137438953474\r\nE0723 03:03:53.300819 100141 timer_thread.cpp:255] Invalid task_id=163208757250\r\nE0723 03:16:53.389494 100139 timer_thread.cpp:255] Invalid task_id=171798691842\r\nE0723 03:46:54.512308 100130 timer_thread.cpp:255] Invalid task_id=180388626434\r\nE0723 04:13:03.006063 100085 timer_thread.cpp:255] Invalid task_id=188978561026\r\nE0723 05:17:00.844795 100147 timer_thread.cpp:255] Invalid task_id=197568495618\r\nE0723 05:55:36.732831 100149 timer_thread.cpp:255] Invalid task_id=206158430210\r\nE0723 06:12:50.328419 100127 timer_thread.cpp:255] Invalid task_id=223338299394\r\nE0723 06:21:23.337307 100124 timer_thread.cpp:255] Invalid task_id=231928233986\r\nE0723 07:16:56.497378 100144 timer_thread.cpp:255] Invalid task_id=240518168578\r\nE0723 08:09:44.952257 100127 timer_thread.cpp:255] Invalid task_id=266287972354\r\nE0723 08:30:03.313336 100145 timer_thread.cpp:255] Invalid task_id=274877906946\r\nE0723 09:01:00.651458 100085 timer_thread.cpp:255] Invalid task_id=283467841538\r\nE0723 09:31:20.790068 100129 timer_thread.cpp:255] Invalid task_id=292057776130\r\nE0723 10:21:18.116811 100086 timer_thread.cpp:255] Invalid task_id=300647710722\r\nE0723 10:51:44.735030 100126 timer_thread.cpp:255] Invalid task_id=309237645314\r\nE0723 11:09:08.432152 100140 timer_thread.cpp:255] Invalid task_id=309237645314\r\nE0723 12:57:10.976786 100088 timer_thread.cpp:255] Invalid task_id=317827579906\r\nE0723 12:57:10.976857 100144 timer_thread.cpp:255] Invalid task_id=317827579906\r\nF0723 16:40:25.776798 141455 timer_thread.cpp:298] Check failed: version.load(butil::memory_order_relaxed) == id_version + 2 (1384 vs. 1380)\r\n```\r\ngdb此时产生的core：\r\n```\r\n(gdb) bt\r\n#0  0x00007f4aa27871d7 in raise () from /lib64/libc.so.6\r\n#1  0x00007f4aa27888c8 in abort () from /lib64/libc.so.6\r\n#2  0x0000000001a87636 in google::DumpStackTraceAndExit () at src/utilities.cc:147\r\n#3  0x0000000001a7e93d in google::LogMessage::Fail () at src/logging.cc:1599\r\n#4  0x0000000001a807c4 in google::LogMessage::SendToLog (this=0x7f498d7d4510) at src/logging.cc:1553\r\n#5  0x0000000001a7e464 in google::LogMessage::Flush (this=0x7f498d7d4510) at src/logging.cc:1422\r\n#6  0x0000000001a811f9 in google::LogMessageFatal::~LogMessageFatal (this=<optimized out>, __in_chrg=<optimized out>) at src/logging.cc:2125\r\n#7  0x0000000001d24088 in bthread::TimerThread::Task::try_delete (this=0x9c41ba40) at /root/doris/doris-dev/thirdparty/src/incubator-brpc-0.9.5/src/bthread/timer_thread.cpp:298\r\n#8  0x0000000001d24e4f in bthread::TimerThread::run (this=0xcd50cc0) at /root/doris/doris-dev/thirdparty/src/incubator-brpc-0.9.5/src/bthread/timer_thread.cpp:353\r\n#9  0x0000000001d25d09 in bthread::TimerThread::run_this (arg=<optimized out>) at /root/doris/doris-dev/thirdparty/src/incubator-brpc-0.9.5/src/bthread/timer_thread.cpp:117\r\n#10 0x00007f4aa253ddc5 in start_thread () from /lib64/libpthread.so.0\r\n#11 0x00007f4aa284973d in clone () from /lib64/libc.so.6\r\n(gdb) f 7\r\n#7  0x0000000001d24088 in bthread::TimerThread::Task::try_delete (this=0x9c41ba40) at /root/doris/doris-dev/thirdparty/src/incubator-brpc-0.9.5/src/bthread/timer_thread.cpp:298\r\n298\tin /root/doris/doris-dev/thirdparty/src/incubator-brpc-0.9.5/src/bthread/timer_thread.cpp\r\n(gdb) p this\r\n$12 = (bthread::TimerThread::Task * const) 0x9c41ba40\r\n(gdb) p *this\r\n$11 = {next = 0x9c41ba40, run_time = 1595495425823580, fn = 0x1b953c0 <brpc::HandleTimeout(void*)>, arg = 0x1389000017a1, task_id = 6064493992809, version = {<std::atomic<unsigned int>> = {<std::__atomic_base<unsigned int>> = {static _S_alignment = 4,\r\n        _M_i = 1414}, <No data fields>}, <No data fields>}}\r\n(gdb)\r\n```\r\nthis的next也是指向了自己；version为1414，与log中中的不一致","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663388665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663403982","html_url":"https://github.com/apache/brpc/issues/1180#issuecomment-663403982","issue_url":"https://api.github.com/repos/apache/brpc/issues/1180","id":663403982,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzQwMzk4Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T08:17:12Z","updated_at":"2020-07-24T08:19:38Z","author_association":"CONTRIBUTOR","body":"[已修复](https://github.com/apache/incubator-brpc/commit/2071a22c7f8ca4dfd47b1f0b607737082b66c865), 原因是返回的ProgressiveAttachment需传到另一个线程(SendLargeFile)后再用intrusive_ptr加上引用计数，但rpc可能在那之前就结束了，同时删除了pa，造成问题。目前改为创建时就直接返回intrusive_ptr<ProgressiveAttachment>以避免这一问题，感谢报告。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663403982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663933035","html_url":"https://github.com/apache/brpc/pull/1185#issuecomment-663933035","issue_url":"https://api.github.com/repos/apache/brpc/issues/1185","id":663933035,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzkzMzAzNQ==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-26T04:06:32Z","updated_at":"2020-07-26T04:06:32Z","author_association":"CONTRIBUTOR","body":"![image](https://user-images.githubusercontent.com/67617182/88471140-e0ce7880-cf37-11ea-90ea-193fbc91749f.png)\r\nload balancer ut没能通过，我的改动和load balancer应该没啥关系啊。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663933035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663940913","html_url":"https://github.com/apache/brpc/issues/1184#issuecomment-663940913","issue_url":"https://api.github.com/repos/apache/brpc/issues/1184","id":663940913,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mzk0MDkxMw==","user":{"login":"wangy11235","id":8665818,"node_id":"MDQ6VXNlcjg2NjU4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/8665818?v=4","gravatar_id":"","url":"https://api.github.com/users/wangy11235","html_url":"https://github.com/wangy11235","followers_url":"https://api.github.com/users/wangy11235/followers","following_url":"https://api.github.com/users/wangy11235/following{/other_user}","gists_url":"https://api.github.com/users/wangy11235/gists{/gist_id}","starred_url":"https://api.github.com/users/wangy11235/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangy11235/subscriptions","organizations_url":"https://api.github.com/users/wangy11235/orgs","repos_url":"https://api.github.com/users/wangy11235/repos","events_url":"https://api.github.com/users/wangy11235/events{/privacy}","received_events_url":"https://api.github.com/users/wangy11235/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-26T06:14:28Z","updated_at":"2020-07-26T06:14:28Z","author_association":"NONE","body":"看了源码知道怎么接入了，是继承NamingService来实现，关闭issue。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663940913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663941178","html_url":"https://github.com/apache/brpc/issues/1168#issuecomment-663941178","issue_url":"https://api.github.com/repos/apache/brpc/issues/1168","id":663941178,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Mzk0MTE3OA==","user":{"login":"gaodayue","id":1198446,"node_id":"MDQ6VXNlcjExOTg0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/1198446?v=4","gravatar_id":"","url":"https://api.github.com/users/gaodayue","html_url":"https://github.com/gaodayue","followers_url":"https://api.github.com/users/gaodayue/followers","following_url":"https://api.github.com/users/gaodayue/following{/other_user}","gists_url":"https://api.github.com/users/gaodayue/gists{/gist_id}","starred_url":"https://api.github.com/users/gaodayue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaodayue/subscriptions","organizations_url":"https://api.github.com/users/gaodayue/orgs","repos_url":"https://api.github.com/users/gaodayue/repos","events_url":"https://api.github.com/users/gaodayue/events{/privacy}","received_events_url":"https://api.github.com/users/gaodayue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-26T06:17:54Z","updated_at":"2020-07-26T06:17:54Z","author_association":"NONE","body":"> \"日志中持续输出Not connected to 10.26.44.32:8060 yet\", 这是指Y还是其他（正常的）上游？Y所在的server并没有陷入死锁吧？\r\n\r\n是指Y节点。应该是没有死锁，除了连不上X（没有触发心跳检查），其他功能都正常。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/663941178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664184102","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-664184102","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":664184102,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDE4NDEwMg==","user":{"login":"vagetablechicken","id":24697960,"node_id":"MDQ6VXNlcjI0Njk3OTYw","avatar_url":"https://avatars.githubusercontent.com/u/24697960?v=4","gravatar_id":"","url":"https://api.github.com/users/vagetablechicken","html_url":"https://github.com/vagetablechicken","followers_url":"https://api.github.com/users/vagetablechicken/followers","following_url":"https://api.github.com/users/vagetablechicken/following{/other_user}","gists_url":"https://api.github.com/users/vagetablechicken/gists{/gist_id}","starred_url":"https://api.github.com/users/vagetablechicken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vagetablechicken/subscriptions","organizations_url":"https://api.github.com/users/vagetablechicken/orgs","repos_url":"https://api.github.com/users/vagetablechicken/repos","events_url":"https://api.github.com/users/vagetablechicken/events{/privacy}","received_events_url":"https://api.github.com/users/vagetablechicken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T07:57:54Z","updated_at":"2020-07-27T07:59:43Z","author_association":"NONE","body":"不仅有consume task时出现循环链表push back OOM的问题，我们还发现了TimerThread::Task的resource pool内存增长过快导致OOM的问题。\r\n集群20台节点，仅有一台出现Task resource pool增长过快。下图为growth profile图\r\n![image](https://user-images.githubusercontent.com/24697960/88516211-801a6b00-d01f-11ea-965a-43e6dffbfe5d.png)\r\n虽然growth未考虑释放，但这个数值基本与rss和tcmalloc的`generic.current_allocated_bytes`相近。\r\n而且间隔35min再采一次growth，做一下diff，可以看出30min，resource pool就涨了22GB（与上图的链路相同，todo 图链接151508-144059.png）。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664184102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664285114","html_url":"https://github.com/apache/brpc/pull/1185#issuecomment-664285114","issue_url":"https://api.github.com/repos/apache/brpc/issues/1185","id":664285114,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDI4NTExNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T10:29:56Z","updated_at":"2020-07-27T10:29:56Z","author_association":"MEMBER","body":"是这个单测本身的问题，我重启测试了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664285114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664344637","html_url":"https://github.com/apache/brpc/pull/1185#issuecomment-664344637","issue_url":"https://api.github.com/repos/apache/brpc/issues/1185","id":664344637,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDM0NDYzNw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T11:37:02Z","updated_at":"2020-07-27T11:37:02Z","author_association":"MEMBER","body":"@heyuyi0906 现在挂在其它地方了，我看有一个是和http相关的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664344637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664366553","html_url":"https://github.com/apache/brpc/pull/1185#issuecomment-664366553","issue_url":"https://api.github.com/repos/apache/brpc/issues/1185","id":664366553,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDM2NjU1Mw==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T12:29:28Z","updated_at":"2020-07-27T12:29:28Z","author_association":"CONTRIBUTOR","body":"> @heyuyi0906 现在挂在其它地方了，我看有一个是和http相关的。\r\n\r\n好，我看下原因。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664366553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664405652","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-664405652","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":664405652,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDQwNTY1Mg==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T13:44:54Z","updated_at":"2020-07-27T13:44:54Z","author_association":"CONTRIBUTOR","body":"请问是什么系统，brpc是哪个版本","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664405652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664482626","html_url":"https://github.com/apache/brpc/pull/1185#issuecomment-664482626","issue_url":"https://api.github.com/repos/apache/brpc/issues/1185","id":664482626,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDQ4MjYyNg==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-27T15:57:28Z","updated_at":"2020-07-27T15:57:28Z","author_association":"CONTRIBUTOR","body":"似乎是brpc.baidu.com这个域名出问题了？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664482626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664754007","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-664754007","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":664754007,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDc1NDAwNw==","user":{"login":"JianyuLi","id":4198752,"node_id":"MDQ6VXNlcjQxOTg3NTI=","avatar_url":"https://avatars.githubusercontent.com/u/4198752?v=4","gravatar_id":"","url":"https://api.github.com/users/JianyuLi","html_url":"https://github.com/JianyuLi","followers_url":"https://api.github.com/users/JianyuLi/followers","following_url":"https://api.github.com/users/JianyuLi/following{/other_user}","gists_url":"https://api.github.com/users/JianyuLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JianyuLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JianyuLi/subscriptions","organizations_url":"https://api.github.com/users/JianyuLi/orgs","repos_url":"https://api.github.com/users/JianyuLi/repos","events_url":"https://api.github.com/users/JianyuLi/events{/privacy}","received_events_url":"https://api.github.com/users/JianyuLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-28T03:25:20Z","updated_at":"2020-07-28T03:25:20Z","author_association":"NONE","body":"os是centos7，内核版本3.10.0-693.5.2.el7.x86_64，brpc版本是incubator-brpc-0.9.7.tar.gz","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664754007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664810394","html_url":"https://github.com/apache/brpc/issues/1188#issuecomment-664810394","issue_url":"https://api.github.com/repos/apache/brpc/issues/1188","id":664810394,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDgxMDM5NA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-28T06:43:37Z","updated_at":"2020-07-28T06:43:37Z","author_association":"MEMBER","body":"跟 https://github.com/apache/incubator-brpc/issues/1179 相关联的地方是他们都是从资源池中获取资源，但拿到的资源似乎都有些问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664810394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664812173","html_url":"https://github.com/apache/brpc/issues/1188#issuecomment-664812173","issue_url":"https://api.github.com/repos/apache/brpc/issues/1188","id":664812173,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDgxMjE3Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-28T06:48:13Z","updated_at":"2020-07-28T06:48:13Z","author_association":"CONTRIBUTOR","body":"最好先排除TimerThread的问题 (主干已[更新](https://github.com/apache/incubator-brpc/commit/ea87ee715b04e30a4ee255953ac94cd0f6672b59)), c++的内存问题可能广泛关联。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664812173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664813306","html_url":"https://github.com/apache/brpc/issues/1183#issuecomment-664813306","issue_url":"https://api.github.com/repos/apache/brpc/issues/1183","id":664813306,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NDgxMzMwNg==","user":{"login":"lzueclipse","id":4018691,"node_id":"MDQ6VXNlcjQwMTg2OTE=","avatar_url":"https://avatars.githubusercontent.com/u/4018691?v=4","gravatar_id":"","url":"https://api.github.com/users/lzueclipse","html_url":"https://github.com/lzueclipse","followers_url":"https://api.github.com/users/lzueclipse/followers","following_url":"https://api.github.com/users/lzueclipse/following{/other_user}","gists_url":"https://api.github.com/users/lzueclipse/gists{/gist_id}","starred_url":"https://api.github.com/users/lzueclipse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lzueclipse/subscriptions","organizations_url":"https://api.github.com/users/lzueclipse/orgs","repos_url":"https://api.github.com/users/lzueclipse/repos","events_url":"https://api.github.com/users/lzueclipse/events{/privacy}","received_events_url":"https://api.github.com/users/lzueclipse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-28T06:51:12Z","updated_at":"2020-07-28T06:51:12Z","author_association":"NONE","body":"追了下代码，为了zero copy，RDMA的实现会托管iobuf的内存分配，目前这种方式，实现多网卡支持确实有难度。\r\n为了支持多网卡，我准备放弃zero copy，试图实现下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/664813306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/665379244","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-665379244","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":665379244,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTM3OTI0NA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-29T01:33:20Z","updated_at":"2020-07-29T01:33:20Z","author_association":"MEMBER","body":"cherry pick了master 对try_delete的[修改](https://github.com/apache/incubator-brpc/commit/ea87ee715b04e30a4ee255953ac94cd0f6672b59)，观测时间2小时后之前的coredump暂未出现，但是出现了另外的coredump：\r\n```\r\nCore was generated by `/home/work/app/doris/c3prc-bigbi/be/package/be/lib/palo_be'.\r\nProgram terminated with signal 11, Segmentation fault.\r\n#0  swap (other=..., this=<optimized out>) at /home/laiyingchun/xm_doris/thirdparty/src/incubator-brpc-0.9.5/src/butil/iobuf_inl.h:82\r\n82\t/home/laiyingchun/xm_doris/thirdparty/src/incubator-brpc-0.9.5/src/butil/iobuf_inl.h: 没有那个文件或目录.\r\nMissing separate debuginfos, use: debuginfo-install glibc-2.17-157.el7_3.1.x86_64 libgcc-4.8.5-28.el7_5.1.x86_64 zlib-1.2.7-17.el7.x86_64\r\n(gdb) bt\r\n#0  swap (other=..., this=<optimized out>) at /home/laiyingchun/xm_doris/thirdparty/src/incubator-brpc-0.9.5/src/butil/iobuf_inl.h:82\r\n#1  brpc::Socket::Write (this=0x14ffbe00, data=data@entry=0x7f01d9b540b0, options_in=options_in@entry=0x7f01d9b54090) at /home/laiyingchun/xm_doris/thirdparty/src/incubator-brpc-0.9.5/src/brpc/socket.cpp:1519\r\n#2  0x0000000001b9f88e in brpc::Controller::IssueRPC (this=this@entry=0x190f02508, start_realtime_us=start_realtime_us@entry=1595939753030853) at /home/laiyingchun/xm_doris/thirdparty/src/incubator-brpc-0.9.5/src/brpc/controller.cpp:1139\r\n#3  0x0000000001b96427 in brpc::Channel::CallMethod (this=0x1500c200, method=0x22d23400, controller_base=0x190f02508, request=0x1491b180, response=0x190f02758, done=0x190f02500) at /home/laiyingchun/xm_doris/thirdparty/src/incubator-brpc-0.9.5/src/brpc/channel.cpp:529\r\n#4  0x00000000013658bf in palo::PInternalService_Stub::transmit_data (this=<optimized out>, controller=0x190f02508, request=0x1491b180, response=0x190f02758, done=0x190f02500) at /home/laiyingchun/xm_doris/gensrc/build/gen_cpp/palo_internal_service.pb.cc:319\r\n#5  0x00000000015fb3a1 in doris::DataStreamSender::Channel::send_batch (this=this@entry=0x1491b080, batch=batch@entry=0x0, eos=eos@entry=true) at /home/laiyingchun/xm_doris/be/src/runtime/data_stream_sender.cpp:232\r\n#6  0x00000000015fbf3a in doris::DataStreamSender::Channel::close_internal (this=0x1491b080) at /home/laiyingchun/xm_doris/be/src/runtime/data_stream_sender.cpp:289\r\n#7  0x00000000015fc115 in close (state=0x12ca4c000, this=<optimized out>) at /home/laiyingchun/xm_doris/be/src/runtime/data_stream_sender.cpp:296\r\n#8  doris::DataStreamSender::close (this=0x9bde2d00, state=0x12ca4c000, exec_status=...) at /home/laiyingchun/xm_doris/be/src/runtime/data_stream_sender.cpp:607\r\n#9  0x00000000010207d3 in doris::PlanFragmentExecutor::open_internal (this=this@entry=0x91d02b70) at /home/laiyingchun/xm_doris/be/src/runtime/plan_fragment_executor.cpp:326\r\n#10 0x00000000010209cc in doris::PlanFragmentExecutor::open (this=this@entry=0x91d02b70) at /home/laiyingchun/xm_doris/be/src/runtime/plan_fragment_executor.cpp:259\r\n#11 0x0000000000fb1167 in doris::FragmentExecState::execute (this=0x91d02b00) at /home/laiyingchun/xm_doris/be/src/runtime/fragment_mgr.cpp:211\r\n#12 0x0000000000fb2c16 in doris::FragmentMgr::exec_actual(std::shared_ptr<doris::FragmentExecState>, std::function<void (doris::PlanFragmentExecutor*)>) (this=0x5fbbc00, exec_state=..., cb=...) at /home/laiyingchun/xm_doris/be/src/runtime/fragment_mgr.cpp:394\r\n#13 0x0000000000fb95b8 in __invoke_impl<void, void (doris::FragmentMgr::*&)(std::shared_ptr<doris::FragmentExecState>, std::function<void(doris::PlanFragmentExecutor*)>), doris::FragmentMgr*&, std::shared_ptr<doris::FragmentExecState>&, std::function<void(doris::PlanFragmentExecutor*)>&> (__t=@0xa48be540: 0x5fbbc00, __f=\r\n    @0xa48be500: (void (doris::FragmentMgr::*)(doris::FragmentMgr * const, std::shared_ptr<doris::FragmentExecState>, std::function<void(doris::PlanFragmentExecutor*)>)) 0xfb2bf0 <doris::FragmentMgr::exec_actual(std::shared_ptr<doris::FragmentExecState>, std::function<void (doris::PlanFragmentExecutor*)>)>) at /usr/include/c++/7.3.0/bits/invoke.h:73\r\n#14 __invoke<void (doris::FragmentMgr::*&)(std::shared_ptr<doris::FragmentExecState>, std::function<void(doris::PlanFragmentExecutor*)>), doris::FragmentMgr*&, std::shared_ptr<doris::FragmentExecState>&, std::function<void(doris::PlanFragmentExecutor*)>&> (__fn=\r\n    @0xa48be500: (void (doris::FragmentMgr::*)(doris::FragmentMgr * const, std::shared_ptr<doris::FragmentExecState>, std::function<void(doris::PlanFragmentExecutor*)>)) 0xfb2bf0 <doris::FragmentMgr::exec_actual(std::shared_ptr<doris::FragmentExecState>, std::function<void (doris::PlanFragmentExecutor*)>)>) at /usr/include/c++/7.3.0/bits/invoke.h:95\r\n#15 __call<void, 0, 1, 2> (__args=..., this=0xa48be500) at /usr/include/c++/7.3.0/functional:632\r\n#16 operator()<> (this=0xa48be500) at /usr/include/c++/7.3.0/functional:718\r\n#17 boost::detail::function::void_function_obj_invoker0<std::_Bind_result<void, void (doris::FragmentMgr::*(doris::FragmentMgr*, std::shared_ptr<doris::FragmentExecState>, std::function<void (doris::PlanFragmentExecutor*)>))(std::shared_ptr<doris::FragmentExecState>, std::function<void (doris::PlanFragmentExecutor*)>)>, void>::invoke(boost::detail::function::function_buffer&) (function_obj_ptr=...) at /home/laiyingchun/xm_doris/thirdparty/installed/include/boost/function/function_template.hpp:159\r\n#18 0x0000000000fb23d4 in operator() (this=0xf2f9400) at /home/laiyingchun/xm_doris/thirdparty/installed/include/boost/function/function_template.hpp:759\r\n#19 doris::fragment_executor (param=0xf2f9400) at /home/laiyingchun/xm_doris/be/src/runtime/fragment_mgr.cpp:419\r\n#20 0x00007f0393131dc5 in start_thread () from /lib64/libpthread.so.0\r\n#21 0x00007f039343d73d in clone () from /lib64/libc.so.6\r\n(gdb)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/665379244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/665598024","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-665598024","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":665598024,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NTU5ODAyNA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-29T11:02:42Z","updated_at":"2020-07-29T15:11:53Z","author_association":"MEMBER","body":"> 那你试试看在你们用到的brpc中删除[这段if分支](https://github.com/apache/incubator-brpc/blob/e5bd064b3aed62d35b8d1f6d2456522f9558e4ee/src/bthread/timer_thread.cpp#L370)，即如下这段\r\n> \r\n> ```\r\n>             if (task1->try_delete()) { // already unscheduled\r\n>                 std::pop_heap(tasks.begin(), tasks.end(), task_greater);\r\n>                 tasks.pop_back();\r\n>                 continue;\r\n>             }\r\n> ```\r\n> \r\n> 看看问题是否仍会重现。\r\n\r\n@jamesge cherry pick后长时间运行还是出现了循环链表的问题 :(","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/665598024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/666142658","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-666142658","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":666142658,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjE0MjY1OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-30T06:06:43Z","updated_at":"2020-07-30T06:06:43Z","author_association":"CONTRIBUTOR","body":"@acelyc111 那就比较难理解了，确认代码都clean过从头编译了吗？以及要运行下asan看看了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/666142658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/666489282","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-666489282","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":666489282,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NjQ4OTI4Mg==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-30T16:03:20Z","updated_at":"2020-07-30T16:03:20Z","author_association":"MEMBER","body":"可执行程序静态链接的brpc库，要检测brpc的内存问题，也要把brpc用asan编译吧？弱问下怎样编译asan版本呢，我这样编译报错 https://github.com/apache/incubator-brpc/issues/1186","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/666489282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667484313","html_url":"https://github.com/apache/brpc/pull/1193#issuecomment-667484313","issue_url":"https://api.github.com/repos/apache/brpc/issues/1193","id":667484313,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzQ4NDMxMw==","user":{"login":"ustccy","id":16217871,"node_id":"MDQ6VXNlcjE2MjE3ODcx","avatar_url":"https://avatars.githubusercontent.com/u/16217871?v=4","gravatar_id":"","url":"https://api.github.com/users/ustccy","html_url":"https://github.com/ustccy","followers_url":"https://api.github.com/users/ustccy/followers","following_url":"https://api.github.com/users/ustccy/following{/other_user}","gists_url":"https://api.github.com/users/ustccy/gists{/gist_id}","starred_url":"https://api.github.com/users/ustccy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ustccy/subscriptions","organizations_url":"https://api.github.com/users/ustccy/orgs","repos_url":"https://api.github.com/users/ustccy/repos","events_url":"https://api.github.com/users/ustccy/events{/privacy}","received_events_url":"https://api.github.com/users/ustccy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-01T06:53:28Z","updated_at":"2020-08-01T06:53:45Z","author_association":"NONE","body":"check失败应该和我的改动没关系 第一次ci通过了 第二次改了个注释没通过","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667484313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667684520","html_url":"https://github.com/apache/brpc/issues/677#issuecomment-667684520","issue_url":"https://api.github.com/repos/apache/brpc/issues/677","id":667684520,"node_id":"MDEyOklzc3VlQ29tbWVudDY2NzY4NDUyMA==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-02T14:58:18Z","updated_at":"2020-08-02T14:58:18Z","author_association":"NONE","body":"怎么解决呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667684520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667853024","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-667853024","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":667853024,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Nzg1MzAyNA==","user":{"login":"zhongleihe","id":43674493,"node_id":"MDQ6VXNlcjQzNjc0NDkz","avatar_url":"https://avatars.githubusercontent.com/u/43674493?v=4","gravatar_id":"","url":"https://api.github.com/users/zhongleihe","html_url":"https://github.com/zhongleihe","followers_url":"https://api.github.com/users/zhongleihe/followers","following_url":"https://api.github.com/users/zhongleihe/following{/other_user}","gists_url":"https://api.github.com/users/zhongleihe/gists{/gist_id}","starred_url":"https://api.github.com/users/zhongleihe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhongleihe/subscriptions","organizations_url":"https://api.github.com/users/zhongleihe/orgs","repos_url":"https://api.github.com/users/zhongleihe/repos","events_url":"https://api.github.com/users/zhongleihe/events{/privacy}","received_events_url":"https://api.github.com/users/zhongleihe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-03T07:20:09Z","updated_at":"2020-08-03T07:20:09Z","author_association":"NONE","body":"> 请问是什么系统，brpc是哪个版本\r\n\r\n我也碰到这个问题了，请问这个问题有结论了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667853024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667854975","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-667854975","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":667854975,"node_id":"MDEyOklzc3VlQ29tbWVudDY2Nzg1NDk3NQ==","user":{"login":"JianyuLi","id":4198752,"node_id":"MDQ6VXNlcjQxOTg3NTI=","avatar_url":"https://avatars.githubusercontent.com/u/4198752?v=4","gravatar_id":"","url":"https://api.github.com/users/JianyuLi","html_url":"https://github.com/JianyuLi","followers_url":"https://api.github.com/users/JianyuLi/followers","following_url":"https://api.github.com/users/JianyuLi/following{/other_user}","gists_url":"https://api.github.com/users/JianyuLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JianyuLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JianyuLi/subscriptions","organizations_url":"https://api.github.com/users/JianyuLi/orgs","repos_url":"https://api.github.com/users/JianyuLi/repos","events_url":"https://api.github.com/users/JianyuLi/events{/privacy}","received_events_url":"https://api.github.com/users/JianyuLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-03T07:24:12Z","updated_at":"2020-08-03T07:24:12Z","author_association":"NONE","body":"> > 请问是什么系统，brpc是哪个版本\r\n> \r\n> 我也碰到这个问题了，请问这个问题有结论了吗？\r\n\r\n目前还没有 :(","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/667854975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/668487357","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-668487357","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":668487357,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODQ4NzM1Nw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T09:23:29Z","updated_at":"2020-08-04T09:24:59Z","author_association":"CONTRIBUTOR","body":"@JianyuLi @zhongleihe 辛苦试下 #1195  这个看看，如果不行的话再提供一下gdb的版本吧，我这里没有复现出来，不过猜是上面这个PR的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/668487357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/668519660","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-668519660","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":668519660,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODUxOTY2MA==","user":{"login":"JianyuLi","id":4198752,"node_id":"MDQ6VXNlcjQxOTg3NTI=","avatar_url":"https://avatars.githubusercontent.com/u/4198752?v=4","gravatar_id":"","url":"https://api.github.com/users/JianyuLi","html_url":"https://github.com/JianyuLi","followers_url":"https://api.github.com/users/JianyuLi/followers","following_url":"https://api.github.com/users/JianyuLi/following{/other_user}","gists_url":"https://api.github.com/users/JianyuLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JianyuLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JianyuLi/subscriptions","organizations_url":"https://api.github.com/users/JianyuLi/orgs","repos_url":"https://api.github.com/users/JianyuLi/repos","events_url":"https://api.github.com/users/JianyuLi/events{/privacy}","received_events_url":"https://api.github.com/users/JianyuLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T10:35:53Z","updated_at":"2020-08-04T10:35:53Z","author_association":"NONE","body":"用#1195里的脚本，遇到新的问题\r\n![image](https://user-images.githubusercontent.com/4198752/89284310-2bab6700-d681-11ea-97f1-5bf54de60d86.png)\r\n\r\n![image](https://user-images.githubusercontent.com/4198752/89284356-3c5bdd00-d681-11ea-8e74-2289a7956207.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/668519660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669753710","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-669753710","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":669753710,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTc1MzcxMA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T07:17:24Z","updated_at":"2020-08-06T07:17:24Z","author_association":"MEMBER","body":"这里的问题是由于在consistent hash中，用的是socket->remote_side作为hash key，而不是所有情况下remote_side都是有意义的（在selective_chan下并不能正确设置），所以是不是应该把remote_side换成另一个能全局唯一标识socket的变量作为hash key，例如socket->id().","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669753710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669778629","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-669778629","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":669778629,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTc3ODYyOQ==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T08:05:21Z","updated_at":"2020-08-06T08:05:21Z","author_association":"CONTRIBUTOR","body":"同意。Socket的使用存在了多样性，确实需要一个更为合理的设计来计算hash key。\r\nsocket->id()似乎也不能让人满意，多机情况下id并不一定都一样的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669778629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669781839","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-669781839","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":669781839,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTc4MTgzOQ==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T08:11:57Z","updated_at":"2020-08-06T08:11:57Z","author_association":"CONTRIBUTOR","body":"考虑到多机情况下socket id可能不一致，我的实现虽然绕过了报错，但是与一致性hash的原理相违背，存在问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669781839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669807435","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-669807435","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":669807435,"node_id":"MDEyOklzc3VlQ29tbWVudDY2OTgwNzQzNQ==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-06T09:04:23Z","updated_at":"2020-08-06T09:04:23Z","author_association":"CONTRIBUTOR","body":"我用了centos7.4，gdb版本7.6.1-119.el7尝试复现，还是没有复现出来。如果方便的话能否提供一个可复现问题的Dockerfile呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/669807435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670299745","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-670299745","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":670299745,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDI5OTc0NQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T03:21:59Z","updated_at":"2020-08-07T03:21:59Z","author_association":"MEMBER","body":"另外一个思路是在selective_chan中调用AddServer的时候，把ServerId.tag也考虑进去，不同的channel有不同的tag，并在多机环境下用同一个server_addr/ns_url初始化的channel有相同的tag，一种实现是直接把server_addr（对应单机）or ns_url（对应集群）的字符串作为tag，这样的话可能需要增加一个ChannelBase的接口F来返回这个值。selective_chan本身可以加入另外一个selective_chan，所以组合channel的接口F实现也是调所有sub_chan的F来拼成结果。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670299745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670412448","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-670412448","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":670412448,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDQxMjQ0OA==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T08:59:22Z","updated_at":"2020-08-07T08:59:22Z","author_association":"CONTRIBUTOR","body":"我试着实现一下。\r\n\r\n另外还有个问题，需要对ns计算hash值，那ns必须是一个中心化的地址才比较合理吧？目前看好像只有dns、consul、remote file。\r\n对于不支持的ns，是不是应该在编译或者执行的时候明确说明不支持？避免以后不必要的困惑了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670412448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670433302","html_url":"https://github.com/apache/brpc/issues/1199#issuecomment-670433302","issue_url":"https://api.github.com/repos/apache/brpc/issues/1199","id":670433302,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDQzMzMwMg==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T09:48:11Z","updated_at":"2020-08-07T09:48:11Z","author_association":"NONE","body":"BRPC_VALIDATE_GFLAG这个地方会引用不可预知的引起动态库加载的退出，有啥办法给解决一下么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670433302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670493482","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-670493482","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":670493482,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDQ5MzQ4Mg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T12:31:58Z","updated_at":"2020-08-07T12:31:58Z","author_association":"MEMBER","body":"ns_url就是一个中心化的地址，这个是用户负责写在程序里的。任何ns都支持的，如果按上述方法来时间的话，F只需要返回ns_url而不需要管具体ns是什么吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670493482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670528397","html_url":"https://github.com/apache/brpc/issues/1186#issuecomment-670528397","issue_url":"https://api.github.com/repos/apache/brpc/issues/1186","id":670528397,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDUyODM5Nw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T13:54:13Z","updated_at":"2020-08-07T13:54:13Z","author_association":"CONTRIBUTOR","body":"\"undefined reference to `__asan_report_load8'\" reports a linking error, maybe you can try to add '-lasan'.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670528397/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670533068","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-670533068","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":670533068,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDUzMzA2OA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T14:03:58Z","updated_at":"2020-08-07T14:03:58Z","author_association":"CONTRIBUTOR","body":"@acelyc111 这个bug能在最新版本的brpc复现吗，我看 #638 修复了一个问题，和你贴的代码位置是相同的，描述也比较像","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670533068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670583042","html_url":"https://github.com/apache/brpc/issues/1179#issuecomment-670583042","issue_url":"https://api.github.com/repos/apache/brpc/issues/1179","id":670583042,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MDU4MzA0Mg==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-07T15:48:49Z","updated_at":"2020-08-07T15:48:49Z","author_association":"MEMBER","body":"@lorinlee 最新版的没试过，当时也看到这个修复了，不过看这个PR的代码貌似是防止`p`被delete掉，所以也没想尝试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/670583042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671002009","html_url":"https://github.com/apache/brpc/pull/1196#issuecomment-671002009","issue_url":"https://api.github.com/repos/apache/brpc/issues/1196","id":671002009,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTAwMjAwOQ==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-09T03:46:31Z","updated_at":"2020-08-09T03:46:31Z","author_association":"CONTRIBUTOR","body":"OK明白。我本来是这么考虑：\r\n对于file ns，ns只是一个本地文件路径，对文件内容完全无法掌控。\r\n对于list ns，list://AddrA,AddrB和list://AddrB,AddrA计算hash值是不一样的，但其实是一样的。\r\n反过来想，由用户来保证多机配置一致是一种更常用更合理的方式。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671002009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671147041","html_url":"https://github.com/apache/brpc/pull/1175#issuecomment-671147041","issue_url":"https://api.github.com/repos/apache/brpc/issues/1175","id":671147041,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTE0NzA0MQ==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-10T03:27:19Z","updated_at":"2020-08-10T03:27:19Z","author_association":"MEMBER","body":"赞，好奇有多少的性能提升？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671147041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671176220","html_url":"https://github.com/apache/brpc/issues/1186#issuecomment-671176220","issue_url":"https://api.github.com/repos/apache/brpc/issues/1186","id":671176220,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTE3NjIyMA==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-10T06:01:11Z","updated_at":"2020-08-10T06:01:11Z","author_association":"MEMBER","body":"> \"undefined reference to `__asan_report_load8'\" reports a linking error, maybe you can try to add '-lasan'.\r\n\r\n@lorinlee Thanks! After I adding '-lasan', another link error reported: \r\n```\r\n`.note.GNU-stack' referenced in section `.init_array.00099' of ../../output/lib/libbrpc.a(context.cpp.o): defined in discarded section `.note.GNU-stack' of ../../output/lib/libbrpc.a(context.cpp.o)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671176220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671292722","html_url":"https://github.com/apache/brpc/pull/1175#issuecomment-671292722","issue_url":"https://api.github.com/repos/apache/brpc/issues/1175","id":671292722,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTI5MjcyMg==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-10T11:07:40Z","updated_at":"2020-08-10T11:07:40Z","author_association":"CONTRIBUTOR","body":"在大包情况下，自测发现对于性能提升还是比较明显的。\r\nsupport_pb_arena分支测试结果：\r\n![image](https://user-images.githubusercontent.com/67617182/89775545-916f7700-daf7-11ea-91cf-0eeb8a941cbe.png)\r\nmaster分支测试结果：\r\n![image](https://user-images.githubusercontent.com/67617182/89775597-ad731880-daf7-11ea-979c-11ea4bc99907.png)\r\n\r\n测试条件：\r\n机器：8核 Intel(R) Xeon(R) Platinum 8255C CPU @ 2.50GHz\r\nprotobuf版本：v3.6.1\r\n压测工具：rpc_press thread_num=50\r\n协议：\r\n```\r\nsyntax=\"proto2\";\r\npackage example;\r\n\r\noption cc_generic_services = true;\r\n\r\nmessage Obj {\r\n    optional uint64 val = 1;\r\n};\r\n\r\nmessage EchoRequest {\r\n    required string message = 1;\r\n    repeated double array = 2;\r\n    repeated Obj objs = 3;\r\n};\r\n\r\nmessage EchoResponse {\r\n    required string message = 1;\r\n    repeated double array = 2;\r\n    repeated Obj objs = 3;\r\n};\r\n\r\nservice EchoService {\r\n      rpc Echo(EchoRequest) returns (EchoResponse);\r\n};\r\n```\r\nserver处理逻辑：\r\n```\r\n        response->set_message(request->message());\r\n\r\n        for (int i = 0; i < request->array_size(); ++i) {\r\n            response->add_array(request->array(i));\r\n        }\r\n\r\n        for (int i = 0; i < request->objs_size(); ++i) {\r\n            auto o = response->add_objs();\r\n            o->set_val(request->objs(i).val());\r\n        }\r\n```\r\n压测input：\r\n```\r\n{\r\n  \"message\":\"xxx......\", \r\n  \"array\":[2.9,2.9,......],\r\n  \"objs\":[{\"val\":10},......]\r\n}\r\n```\r\nmessage字符串长度16384\r\narray包含8192个double\r\nobjs包含8192个对象\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671292722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671364127","html_url":"https://github.com/apache/brpc/pull/1175#issuecomment-671364127","issue_url":"https://api.github.com/repos/apache/brpc/issues/1175","id":671364127,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTM2NDEyNw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-10T13:46:58Z","updated_at":"2020-08-10T13:46:58Z","author_association":"MEMBER","body":"大包看起来效果不错，方便看下不同包大小的场景下（比如16B，32B，64B，128B，256B，512B...）的性能差异么，这些包更典型些","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671364127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671861038","html_url":"https://github.com/apache/brpc/issues/644#issuecomment-671861038","issue_url":"https://api.github.com/repos/apache/brpc/issues/644","id":671861038,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTg2MTAzOA==","user":{"login":"zhangqiang4002","id":16186116,"node_id":"MDQ6VXNlcjE2MTg2MTE2","avatar_url":"https://avatars.githubusercontent.com/u/16186116?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangqiang4002","html_url":"https://github.com/zhangqiang4002","followers_url":"https://api.github.com/users/zhangqiang4002/followers","following_url":"https://api.github.com/users/zhangqiang4002/following{/other_user}","gists_url":"https://api.github.com/users/zhangqiang4002/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangqiang4002/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangqiang4002/subscriptions","organizations_url":"https://api.github.com/users/zhangqiang4002/orgs","repos_url":"https://api.github.com/users/zhangqiang4002/repos","events_url":"https://api.github.com/users/zhangqiang4002/events{/privacy}","received_events_url":"https://api.github.com/users/zhangqiang4002/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-11T10:17:33Z","updated_at":"2020-08-11T10:17:33Z","author_association":"NONE","body":"Thread 1647 (Thread 0x7f62e0316700 (LWP 226)):\r\n#0  0x00007f62e7c66c09 in syscall () from /lib64/libc.so.6\r\n#1  0x0000000000a34092 in futex_wait_private (timeout=0x0, expected=0, addr1=0x7f62e0314990) at ./src/bthread/sys_futex.h:41\r\n#2  bthread::wait_pthread (pw=..., ptimeout=ptimeout@entry=0x0) at src/bthread/butex.cpp:142\r\n#3  0x0000000000a35497 in butex_wait_from_pthread (abstime=0x0, expected_value=7981, b=0x11d06b40, g=<optimized out>) at src/bthread/butex.cpp:589\r\n#4  bthread::butex_wait (arg=arg@entry=0x11d06b40, expected_value=expected_value@entry=7981, abstime=abstime@entry=0x0) at src/bthread/butex.cpp:622\r\n#5  0x0000000000a420e8 in bthread_id_join (id=...) at src/bthread/id.cpp:530\r\n#6  0x0000000000903669 in brpc::Join(bthread_id_t) () at ./src/brpc/controller.h:365\r\n#7  0x000000000091f97f in brpc::Channel::CallMethod (this=0x7f62e0314f60, method=0x4fb7a08, controller_base=0x7f62e0315060, request=0x7f62e0314d00, response=0x7f62e0314be0, done=0x0) at src/brpc/channel.cpp:537\r\n#8  0x0000000000b0d493 in braft::rtb::refresh_leader (group=..., timeout_ms=5000) at /home/svn/joostzhang/elasticfaiss1.5/deps/braft-1.1.1/src/braft/route_table.cpp:194\r\n#9  0x00000000004e3ebe in elasticfaiss::WorkNodeServiceImpl::report_heartbeat (this=this@entry=0x3604780 <elasticfaiss::g_work_node>) at worker/node_service.cpp:293\r\n#10 0x00000000004e4267 in elasticfaiss::WorkNodeServiceImpl::Run (this=0x3604780 <elasticfaiss::g_work_node>) at worker/node_service.cpp:83\r\n#11 0x00000000008dc1d9 in butil::SimpleThread::ThreadMain (this=0x3604788 <elasticfaiss::g_work_node+8>) at src/butil/threading/simple_thread.cc:60\r\n#12 0x0000000000a08990 in butil::(anonymous namespace)::ThreadFunc (params=<optimized out>) at src/butil/threading/platform_thread_posix.cc:79\r\n#13 0x00007f62e94c8dc5 in start_thread () from /lib64/libpthread.so.0\r\n#14 0x00007f62e7c6c74d in clone () from /lib64/libc.so.6\r\n遇到同样的问题, 只要抛出这个异常, 必现:\r\nFail to mmap size=1052672 stack_count=30944, possibly limited by /proc/sys/vm/max_map_count: Cannot allocate memory","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671861038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671915132","html_url":"https://github.com/apache/brpc/pull/1175#issuecomment-671915132","issue_url":"https://api.github.com/repos/apache/brpc/issues/1175","id":671915132,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTkxNTEzMg==","user":{"login":"heyuyi0906","id":67617182,"node_id":"MDQ6VXNlcjY3NjE3MTgy","avatar_url":"https://avatars.githubusercontent.com/u/67617182?v=4","gravatar_id":"","url":"https://api.github.com/users/heyuyi0906","html_url":"https://github.com/heyuyi0906","followers_url":"https://api.github.com/users/heyuyi0906/followers","following_url":"https://api.github.com/users/heyuyi0906/following{/other_user}","gists_url":"https://api.github.com/users/heyuyi0906/gists{/gist_id}","starred_url":"https://api.github.com/users/heyuyi0906/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heyuyi0906/subscriptions","organizations_url":"https://api.github.com/users/heyuyi0906/orgs","repos_url":"https://api.github.com/users/heyuyi0906/repos","events_url":"https://api.github.com/users/heyuyi0906/events{/privacy}","received_events_url":"https://api.github.com/users/heyuyi0906/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-11T12:25:56Z","updated_at":"2020-08-11T12:25:56Z","author_association":"CONTRIBUTOR","body":"好，我补充下这块的数据","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671915132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671956726","html_url":"https://github.com/apache/brpc/issues/1059#issuecomment-671956726","issue_url":"https://api.github.com/repos/apache/brpc/issues/1059","id":671956726,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MTk1NjcyNg==","user":{"login":"sky91","id":4961291,"node_id":"MDQ6VXNlcjQ5NjEyOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4961291?v=4","gravatar_id":"","url":"https://api.github.com/users/sky91","html_url":"https://github.com/sky91","followers_url":"https://api.github.com/users/sky91/followers","following_url":"https://api.github.com/users/sky91/following{/other_user}","gists_url":"https://api.github.com/users/sky91/gists{/gist_id}","starred_url":"https://api.github.com/users/sky91/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sky91/subscriptions","organizations_url":"https://api.github.com/users/sky91/orgs","repos_url":"https://api.github.com/users/sky91/repos","events_url":"https://api.github.com/users/sky91/events{/privacy}","received_events_url":"https://api.github.com/users/sky91/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-11T13:46:21Z","updated_at":"2020-08-11T13:46:21Z","author_association":"NONE","body":"Same problem. Any solution?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/671956726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]