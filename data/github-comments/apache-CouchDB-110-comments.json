[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179064043","html_url":"https://github.com/apache/couchdb/pull/4033#issuecomment-1179064043","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4033","id":1179064043,"node_id":"IC_kwDOAAMmUc5GRxbr","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T14:39:02Z","updated_at":"2022-07-08T14:39:02Z","author_association":"CONTRIBUTOR","body":"> I also want to clarify the need for a print_report function on top of the existing print_table function. If the print_table function is used, the following is printed:\r\n\r\nI think `print_report` output is cleaner and shorter.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179064043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179065231","html_url":"https://github.com/apache/couchdb/pull/4033#issuecomment-1179065231","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4033","id":1179065231,"node_id":"IC_kwDOAAMmUc5GRxuP","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T14:40:15Z","updated_at":"2022-07-08T14:40:15Z","author_association":"CONTRIBUTOR","body":"Looks really good. Just a few small improvements left. Mostly in documentation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179065231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179086947","html_url":"https://github.com/apache/couchdb/pull/4094#issuecomment-1179086947","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4094","id":1179086947,"node_id":"IC_kwDOAAMmUc5GR3Bj","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T15:01:07Z","updated_at":"2022-07-08T15:01:07Z","author_association":"CONTRIBUTOR","body":"Good idea!\r\n\r\nNoticed there were some sha-1 references in the Elixir proxyauth tests, wonder if those should be switched as well.\r\n\r\n```\r\ntest/javascript/tests/proxyauth.js:      \"X-Auth-CouchDB-Token\": hex_hmac_sha1(secret, \"benoitc@apache.org\")\r\ntest/elixir/test/proxyauth_test.exs:  defp hex_hmac_sha1(secret, message) do\r\ntest/elixir/test/proxyauth_test.exs:      '20' -> :crypto.hmac(:sha, secret, message)\r\ntest/elixir/test/proxyauth_test.exs:      '21' -> :crypto.hmac(:sha, secret, message)\r\ntest/elixir/test/proxyauth_test.exs:      _ -> :crypto.mac(:hmac, :sha, secret, message)\r\ntest/elixir/test/proxyauth_test.exs:      \"X-Auth-CouchDB-Token\": hex_hmac_sha1(secret, \"couch@apache.org\")\r\n```\r\n\r\nThere is a chance those don't run though...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179086947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179166845","html_url":"https://github.com/apache/couchdb/pull/4094#issuecomment-1179166845","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4094","id":1179166845,"node_id":"IC_kwDOAAMmUc5GSKh9","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T16:24:20Z","updated_at":"2022-07-08T16:24:20Z","author_association":"CONTRIBUTOR","body":"Was the proxyauth_test a \"skipped\" test, locally it runs through `make check` without errors...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179166845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179168184","html_url":"https://github.com/apache/couchdb/pull/4094#issuecomment-1179168184","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4094","id":1179168184,"node_id":"IC_kwDOAAMmUc5GSK24","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T16:26:00Z","updated_at":"2022-07-08T16:26:00Z","author_association":"CONTRIBUTOR","body":"@big-r81 I seem to recall something to do with Elixir versions or it being flaky. We could try to re-enable (add it to the test suites list) and see if it runs","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179168184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179240131","html_url":"https://github.com/apache/couchdb/pull/4094#issuecomment-1179240131","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4094","id":1179240131,"node_id":"IC_kwDOAAMmUc5GScbD","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T18:01:49Z","updated_at":"2022-07-08T18:01:49Z","author_association":"CONTRIBUTOR","body":"@nickva Good catch! I steal Jan's PR #3989 and included it here... ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179240131/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179286344","html_url":"https://github.com/apache/couchdb/issues/4034#issuecomment-1179286344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4034","id":1179286344,"node_id":"IC_kwDOAAMmUc5GSntI","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-08T19:08:36Z","updated_at":"2022-07-08T19:08:36Z","author_association":"CONTRIBUTOR","body":"@tudordumitriu `winning_revs_only` was implemented in https://github.com/apache/couchdb/pull/4095 and should be part of the next Apache CouchDB release (likely 3.3)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179286344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179494493","html_url":"https://github.com/apache/couchdb/pull/4094#issuecomment-1179494493","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4094","id":1179494493,"node_id":"IC_kwDOAAMmUc5GTahd","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-09T07:15:04Z","updated_at":"2022-07-09T07:15:04Z","author_association":"CONTRIBUTOR","body":"@nickva @rnewson \r\nDoes the proxy auth tests run for you locally? I don’t get the errors (like the CI) if I run both tests on my machine on macOS 10.13 (OTP25/Elixir 1.13.4)…","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179494493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179663931","html_url":"https://github.com/apache/couchdb/pull/4094#issuecomment-1179663931","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4094","id":1179663931,"node_id":"IC_kwDOAAMmUc5GUD47","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-10T06:09:04Z","updated_at":"2022-07-10T06:09:04Z","author_association":"CONTRIBUTOR","body":"@big-r81 tried it individually and it passes, then tried it as part of the elixir-suite and it failed. Just a guess, it maybe some interaction with other tests. Something doesn't cleanup after itself so it messes up the test environment for the proxy test.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1179663931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1181760452","html_url":"https://github.com/apache/couchdb/issues/3955#issuecomment-1181760452","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3955","id":1181760452,"node_id":"IC_kwDOAAMmUc5GcDvE","user":{"login":"rizwan92","id":19162978,"node_id":"MDQ6VXNlcjE5MTYyOTc4","avatar_url":"https://avatars.githubusercontent.com/u/19162978?v=4","gravatar_id":"","url":"https://api.github.com/users/rizwan92","html_url":"https://github.com/rizwan92","followers_url":"https://api.github.com/users/rizwan92/followers","following_url":"https://api.github.com/users/rizwan92/following{/other_user}","gists_url":"https://api.github.com/users/rizwan92/gists{/gist_id}","starred_url":"https://api.github.com/users/rizwan92/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rizwan92/subscriptions","organizations_url":"https://api.github.com/users/rizwan92/orgs","repos_url":"https://api.github.com/users/rizwan92/repos","events_url":"https://api.github.com/users/rizwan92/events{/privacy}","received_events_url":"https://api.github.com/users/rizwan92/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-12T13:27:33Z","updated_at":"2022-07-12T13:27:33Z","author_association":"NONE","body":"Its very essential feature we need custom reducer in partition db , shifting from normal db to partitioneddb would break our few features from platform","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1181760452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1182551105","html_url":"https://github.com/apache/couchdb/pull/4099#issuecomment-1182551105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4099","id":1182551105,"node_id":"IC_kwDOAAMmUc5GfExB","user":{"login":"noahshaw11","id":47468872,"node_id":"MDQ6VXNlcjQ3NDY4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/47468872?v=4","gravatar_id":"","url":"https://api.github.com/users/noahshaw11","html_url":"https://github.com/noahshaw11","followers_url":"https://api.github.com/users/noahshaw11/followers","following_url":"https://api.github.com/users/noahshaw11/following{/other_user}","gists_url":"https://api.github.com/users/noahshaw11/gists{/gist_id}","starred_url":"https://api.github.com/users/noahshaw11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noahshaw11/subscriptions","organizations_url":"https://api.github.com/users/noahshaw11/orgs","repos_url":"https://api.github.com/users/noahshaw11/repos","events_url":"https://api.github.com/users/noahshaw11/events{/privacy}","received_events_url":"https://api.github.com/users/noahshaw11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-12T22:19:45Z","updated_at":"2022-07-12T22:19:45Z","author_association":"CONTRIBUTOR","body":"Closing this in favor of https://github.com/apache/couchdb/pull/4100 since the scope of the PR has changed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1182551105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183316162","html_url":"https://github.com/apache/couchdb/issues/4101#issuecomment-1183316162","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4101","id":1183316162,"node_id":"IC_kwDOAAMmUc5Gh_jC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T14:44:29Z","updated_at":"2022-07-13T14:44:29Z","author_association":"CONTRIBUTOR","body":"@chewbranca good idea to have better priority classes!\r\n\r\nReplicator db access from the replicator could be a `system` db access or a have its own `replicator` class. But I can see the user accessing db (user creating a replication doc) staying as an interactive request?\r\n\r\n>  the replicator still allowed for doing a direct couch_changes fetch of the local database\r\n\r\nI think that's just a left-over clause we didn't clean up when we removed the `local` access.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183316162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183578543","html_url":"https://github.com/apache/couchdb/pull/4103#issuecomment-1183578543","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4103","id":1183578543,"node_id":"IC_kwDOAAMmUc5Gi_mv","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T19:06:57Z","updated_at":"2022-07-13T19:06:57Z","author_association":"CONTRIBUTOR","body":"I did diff with dialyzer with and without the change. Not sure if ran to completion (seems to have crashed before finishing).\r\n\r\n```\r\nmake dialyze apps=couch_replicator | tee ~/tmp/dialize_with_cleanup.txt\r\n==> couch_replicator (build-plt)\r\nWARN:  ''build-plt'' command does not apply to directory /Users/nvatama/asf/rel\r\nWARN:  ''build-plt'' command does not apply to directory /Users/nvatama/asf\r\n==> couch_replicator (dialyze)\r\nsrc/couch_replicator_api_wrap.erl:209: Function open_doc_revs/6 has no local return\r\nsrc/couch_replicator_api_wrap.erl:901: The pattern\r\n         <Docs,\r\n          {'ok', Results},\r\n          'interactive_edit'> can never match the type\r\n         <[any()],\r\n          maybe_improper_list(),\r\n          'remote'>\r\nsrc/couch_replicator_api_wrap.erl:923: The pattern\r\n         <Docs,\r\n          {'ok', Results},\r\n          'replicated_changes'> can never match the type\r\n         <[any()],\r\n          maybe_improper_list(),\r\n          'remote'>\r\nsrc/couch_replicator_api_wrap.erl:925: The pattern\r\n         <_Docs,\r\n          {'aborted', Results},\r\n          'interactive_edit'> can never match the type\r\n         <[any()],\r\n          maybe_improper_list(),\r\n          'remote'>\r\nsrc/couch_replicator_auth_session.erl:101: The pattern\r\n          {'ok', HttpDb1, State} can never match the type\r\n          'ignore' |\r\n          {'error',\r\n           'cookie_format_invalid' | 'cookie_not_found' |\r\n           {'session_request_forbidden',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_request_unauthorized',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_requires_valid_user',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_request_failed',\r\n            string(),\r\n            'undefined' | string(),\r\n            _} |\r\n           {'session_unexpected_result',\r\n            string(),\r\n            string(),\r\n            'undefined' | string()}}\r\nsrc/couch_replicator_auth_session.erl:189: The pattern\r\n          {'ok', State1} can never match the type\r\n          {'error',\r\n           'cookie_format_invalid' | 'cookie_not_found' |\r\n           {'session_not_supported', string(), 'undefined' | string()} |\r\n           {'session_request_forbidden',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_request_unauthorized',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_requires_valid_user',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_request_failed',\r\n            string(),\r\n            'undefined' | string(),\r\n            _} |\r\n           {'session_unexpected_result',\r\n            string(),\r\n            string(),\r\n            'undefined' | string()}}\r\nsrc/couch_replicator_auth_session.erl:199: The pattern\r\n          {'ok', State1} can never match the type\r\n          {'error',\r\n           'cookie_format_invalid' | 'cookie_not_found' |\r\n           {'session_not_supported', string(), 'undefined' | string()} |\r\n           {'session_request_forbidden',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_request_unauthorized',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_requires_valid_user',\r\n            string(),\r\n            'undefined' | string()} |\r\n           {'session_request_failed',\r\n            string(),\r\n            'undefined' | string(),\r\n            _} |\r\n           {'session_unexpected_result',\r\n            string(),\r\n            string(),\r\n            'undefined' | string()}}\r\nsrc/couch_replicator_auth_session.erl:211: The pattern\r\n          {'error', Error} can never match since previous clauses completely covered the type\r\n          {'error', 'missing_credentials'} |\r\n          {'ok', [byte()], [byte()], #httpdb{}}\r\nsrc/couch_replicator_auth_session.erl:243: The pattern\r\n          {'ok', UpdatedState} can never match the type\r\n          {'error', 'cookie_format_invalid' | 'cookie_not_found'}\r\nsrc/couch_replicator_doc_processor_worker.erl:43: The created fun has no local return\r\nsrc/couch_replicator_docs.erl:399: Invalid type specification for function couch_replicator_docs:parse_rep_db/3. The success typing is\r\n          (<<_:56, _:_*8>> | {maybe_improper_list()},\r\n          binary() | [any()],\r\n          maybe_improper_list()) ->\r\n             #httpdb{}\r\nsrc/couch_replicator_httpc.erl:325: Function maybe_retry/4 has no local return\r\nsrc/couch_replicator_scheduler.erl:813: Function job_ejson/1 has no local return\r\nsrc/couch_replicator_scheduler.erl:846: The call couch_replicator_utils:ejson_state_info\r\n         ('_' | [{_, _}]) breaks the contract\r\n          (binary() | 'nil') -> binary() | 'null'\r\nsrc/couch_replicator_scheduler.erl:854: The created fun has no local return\r\nsrc/couch_replicator_utils.erl:201: Invalid type specification for function couch_replicator_utils:remove_basic_auth_creds/1. The success typing is\r\n          (#httpdb{auth_props :: maybe_improper_list()}) -> #httpdb{}\r\nsrc/couch_replicator_utils.erl:206: Invalid type specification for function couch_replicator_utils:set_basic_auth_creds/3. The success typing is\r\n          ('undefined' |\r\n          maybe_improper_list(binary() |\r\n                              maybe_improper_list(any(), binary() | []) |\r\n                              byte(),\r\n                              binary() | []),\r\n          'undefined' |\r\n          maybe_improper_list(binary() |\r\n                              maybe_improper_list(any(), binary() | []) |\r\n                              byte(),\r\n                              binary() | []),\r\n          #httpdb{}) ->\r\n             #httpdb{}\r\nsrc/couch_replicator_worker.erl:261: The created fun has no local return\r\nsrc/couch_replicator_worker.erl:267: Function fetch_doc/4 has no local return\r\nERROR: dialyze failed while processing /Users/nvatama/asf/src/couch_replicator: rebar_abort\r\nmake: *** [dialyze] Error 1\r\n```\r\n\r\nIt did find useful issues. Lots of stale dialyzer specs and missing non-local labels where we throw errors.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183578543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183606198","html_url":"https://github.com/apache/couchdb/issues/4101#issuecomment-1183606198","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4101","id":1183606198,"node_id":"IC_kwDOAAMmUc5GjGW2","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T19:40:08Z","updated_at":"2022-07-13T19:40:08Z","author_association":"CONTRIBUTOR","body":"> Replicator db access from the replicator could be a system db access or a have its own replicator class. But I can see the user accessing db (user creating a replication doc) staying as an interactive request?\r\n\r\nYeah I think `system` for the replicator db access would work fine.\r\n\r\nI do like the idea of being able to prioritize replicator traffic at a different priority level than `interactive`, I think that would be a useful addition allowing for replication traffic to be deprioritized a bit relative to normal interactive client requests. This would be a bigger change than just properly setting `io_priority` values in places where it's currently absent, as I believe for that to work we would need to do something like extrapolate from the http request user agent that it's `Couch-Replicator` and then propagate the `replication` io_priority from the coordinator node to all the rpc nodes.\r\n\r\n> I think that's just a left-over clause we didn't clean up when we removed the local access.\r\n\r\nMakes sense 👍 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183606198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183731212","html_url":"https://github.com/apache/couchdb/pull/4103#issuecomment-1183731212","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4103","id":1183731212,"node_id":"IC_kwDOAAMmUc5Gjk4M","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T22:11:19Z","updated_at":"2022-07-13T22:11:19Z","author_association":"CONTRIBUTOR","body":"> It did find useful issues. Lots of stale dialyzer specs and missing non-local labels where we throw errors.\r\n\r\nI wonder if that would make a decent beginner ticket?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183731212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183737065","html_url":"https://github.com/apache/couchdb/pull/4103#issuecomment-1183737065","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4103","id":1183737065,"node_id":"IC_kwDOAAMmUc5GjmTp","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T22:17:12Z","updated_at":"2022-07-13T22:17:12Z","author_association":"CONTRIBUTOR","body":"It would!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183737065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183792110","html_url":"https://github.com/apache/couchdb/issues/4101#issuecomment-1183792110","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4101","id":1183792110,"node_id":"IC_kwDOAAMmUc5Gjzvu","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-13T23:54:17Z","updated_at":"2022-07-13T23:54:17Z","author_association":"CONTRIBUTOR","body":"I've got two PRs out for this, one in the main CouchDB repo https://github.com/apache/couchdb/pull/4106 and a corresponding PR in the IOQ repo: https://github.com/apache/couchdb-ioq/pull/19","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1183792110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184591559","html_url":"https://github.com/apache/couchdb/pull/4109#issuecomment-1184591559","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4109","id":1184591559,"node_id":"IC_kwDOAAMmUc5Gm27H","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-14T15:34:56Z","updated_at":"2022-07-14T15:34:56Z","author_association":"CONTRIBUTOR","body":"From 19 warnings in https://github.com/apache/couchdb/pull/4103#issuecomment-1183578543 down to 2 only\r\n\r\n```\r\nmake dialyze apps=couch_replicator\r\nsrc/couch_replicator_doc_processor_worker.erl:43: The created fun has no local return\r\nsrc/couch_replicator_worker.erl:262: The created fun has no local return\r\n```\r\n\r\nNot sure how to remove those easily, without refactoring those anonymous functions into functions and then add specs to them.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184591559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184641308","html_url":"https://github.com/apache/couchdb/pull/4103#issuecomment-1184641308","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4103","id":1184641308,"node_id":"IC_kwDOAAMmUc5GnDEc","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-14T16:22:17Z","updated_at":"2022-07-14T16:22:17Z","author_association":"CONTRIBUTOR","body":"@chewbranca @jaydoane fixed most of those dialyzer issues in https://github.com/apache/couchdb/pull/4109","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184641308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184752330","html_url":"https://github.com/apache/couchdb/pull/4106#issuecomment-1184752330","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4106","id":1184752330,"node_id":"IC_kwDOAAMmUc5GneLK","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-14T18:11:14Z","updated_at":"2022-07-14T18:11:14Z","author_association":"CONTRIBUTOR","body":"Thanks @nickva, I forgot to push out the changes cleaning up those remaining pdict puts from the earlier commit.\r\n\r\nOne thing that occurred to me, setting pdict values is _always_ a valid thing in respect to dependency hierarchies, whereas using `ioq` module functions requires `ioq` to be declared as a dependency. We already do that for the `couch` app https://github.com/apache/couchdb/blob/main/src/couch/src/couch.app.src#L46 but I'll double check that the other places we're doing so also include the `ioq` app in their dependency hierarchy. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184752330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184769144","html_url":"https://github.com/apache/couchdb/issues/3911#issuecomment-1184769144","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3911","id":1184769144,"node_id":"IC_kwDOAAMmUc5GniR4","user":{"login":"wavded","id":26638,"node_id":"MDQ6VXNlcjI2NjM4","avatar_url":"https://avatars.githubusercontent.com/u/26638?v=4","gravatar_id":"","url":"https://api.github.com/users/wavded","html_url":"https://github.com/wavded","followers_url":"https://api.github.com/users/wavded/followers","following_url":"https://api.github.com/users/wavded/following{/other_user}","gists_url":"https://api.github.com/users/wavded/gists{/gist_id}","starred_url":"https://api.github.com/users/wavded/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wavded/subscriptions","organizations_url":"https://api.github.com/users/wavded/orgs","repos_url":"https://api.github.com/users/wavded/repos","events_url":"https://api.github.com/users/wavded/events{/privacy}","received_events_url":"https://api.github.com/users/wavded/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-14T18:30:17Z","updated_at":"2022-07-14T18:30:17Z","author_association":"NONE","body":"Was surprised by this when upgrade from v1 to v3. Docs indicate that view support is there:\r\n\r\n\r\n> Etag\r\n> The Etag HTTP header field is used to show the revision for a document, or a view.\r\n> ETags have been assigned to a map/reduce group (the collection of views in a single design document). Any change to any of the indexes for those views would generate a new ETag for all view URLs in a single design doc, even if that specific view’s results had not changed.\r\n> Each _view URL has its own ETag which only gets updated when changes are made to the database that effect that index. If the index for that specific view does not change, that view keeps the original ETag head (therefore sending back 304 - Not Modified more often).\r\n\r\nhttps://docs.couchdb.org/en/3.1.1/api/basics.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184769144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184804317","html_url":"https://github.com/apache/couchdb/pull/4106#issuecomment-1184804317","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4106","id":1184804317,"node_id":"IC_kwDOAAMmUc5Gnq3d","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-14T19:12:51Z","updated_at":"2022-07-14T19:12:51Z","author_association":"CONTRIBUTOR","body":"@chewbranca ooh good call about application dependencies. If you feel dependencies would be an issue we can switch back to plain gets and puts as long as it's fairly consistent throughout (say if we'd create some dependency loops or such) ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1184804317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1185498739","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-1185498739","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":1185498739,"node_id":"IC_kwDOAAMmUc5GqUZz","user":{"login":"tudordumitriu","id":4671554,"node_id":"MDQ6VXNlcjQ2NzE1NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4671554?v=4","gravatar_id":"","url":"https://api.github.com/users/tudordumitriu","html_url":"https://github.com/tudordumitriu","followers_url":"https://api.github.com/users/tudordumitriu/followers","following_url":"https://api.github.com/users/tudordumitriu/following{/other_user}","gists_url":"https://api.github.com/users/tudordumitriu/gists{/gist_id}","starred_url":"https://api.github.com/users/tudordumitriu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tudordumitriu/subscriptions","organizations_url":"https://api.github.com/users/tudordumitriu/orgs","repos_url":"https://api.github.com/users/tudordumitriu/repos","events_url":"https://api.github.com/users/tudordumitriu/events{/privacy}","received_events_url":"https://api.github.com/users/tudordumitriu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-15T12:30:26Z","updated_at":"2022-07-15T12:30:26Z","author_association":"NONE","body":"Hi guys and thanks for the reply!\r\nWhen do you think this will get released?\r\nWill there be a 3.2.3 soon?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1185498739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1185663418","html_url":"https://github.com/apache/couchdb/pull/4089#issuecomment-1185663418","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4089","id":1185663418,"node_id":"IC_kwDOAAMmUc5Gq8m6","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-15T15:38:24Z","updated_at":"2022-07-15T16:27:26Z","author_association":"CONTRIBUTOR","body":"@jiahuili430 quite impressive, well done!\r\n\r\nI wonder if it would make it easier to review if we could extract some the changes into a preliminary PR so to speak. Basically any fixups like whitespace changes, app dependencies, etc which could make sense even without switching to rebar3.\r\n\r\nSome examples could be:\r\n   * app dependency updates like adding the `couch_tests` / `config` dependencies to `*.app.src` files\r\n   * Updating descriptions in app.src files\r\n   * removing `crypto` from `couch_epi` app.src.script\r\n   * some whitespace changes to `httpd_global_handlers`\r\n   * `test_util:stop_applications([config, couch_log]).`\r\n   * `application:ensure_started(couch_epi).`\r\n\r\nSo then with those changes out of the way, and everything working as is, we'd have a second PR more focused on just switching from src to apps. What do you think?\r\n\r\nAlso, it might help to have a description of what the ic plugin does and why we need it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1185663418/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1185764808","html_url":"https://github.com/apache/couchdb/pull/4100#issuecomment-1185764808","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4100","id":1185764808,"node_id":"IC_kwDOAAMmUc5GrVXI","user":{"login":"noahshaw11","id":47468872,"node_id":"MDQ6VXNlcjQ3NDY4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/47468872?v=4","gravatar_id":"","url":"https://api.github.com/users/noahshaw11","html_url":"https://github.com/noahshaw11","followers_url":"https://api.github.com/users/noahshaw11/followers","following_url":"https://api.github.com/users/noahshaw11/following{/other_user}","gists_url":"https://api.github.com/users/noahshaw11/gists{/gist_id}","starred_url":"https://api.github.com/users/noahshaw11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noahshaw11/subscriptions","organizations_url":"https://api.github.com/users/noahshaw11/orgs","repos_url":"https://api.github.com/users/noahshaw11/repos","events_url":"https://api.github.com/users/noahshaw11/events{/privacy}","received_events_url":"https://api.github.com/users/noahshaw11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-15T17:45:23Z","updated_at":"2022-07-15T17:45:23Z","author_association":"CONTRIBUTOR","body":"Closing this PR since these commits were split into separate PRs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1185764808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1187063346","html_url":"https://github.com/apache/couchdb/pull/4114#issuecomment-1187063346","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4114","id":1187063346,"node_id":"IC_kwDOAAMmUc5GwSYy","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-18T10:55:36Z","updated_at":"2022-07-18T10:55:36Z","author_association":"MEMBER","body":"nice :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1187063346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188239617","html_url":"https://github.com/apache/couchdb/pull/4115#issuecomment-1188239617","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4115","id":1188239617,"node_id":"IC_kwDOAAMmUc5G0xkB","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-18T19:57:12Z","updated_at":"2022-07-18T19:57:12Z","author_association":"CONTRIBUTOR","body":"+1\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188239617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188407143","html_url":"https://github.com/apache/couchdb/pull/4117#issuecomment-1188407143","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4117","id":1188407143,"node_id":"IC_kwDOAAMmUc5G1adn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-18T22:52:19Z","updated_at":"2022-07-18T22:52:19Z","author_association":"CONTRIBUTOR","body":"@jiahuili430  Thanks for taking a look at the flaky test! This one failed quite a few time in CI before but I couldn't get it to fail locally.\r\n\r\nI wonder, if instead of adding the retry in the library function, to add somewhere in: \r\n\r\n```\r\n[2022-07-18T20:24:47.152Z]      test/elixir/test/design_docs_test.exs:443\r\n[2022-07-18T20:24:47.152Z]      Assertion with in failed\r\n[2022-07-18T20:24:47.152Z]      code:  assert resp.status_code in [201, 202]\r\n[2022-07-18T20:24:47.152Z]      left:  403\r\n[2022-07-18T20:24:47.152Z]      right: [201, 202]\r\n```\r\n\r\nTo make just that one single test run can do:\r\n\r\n```\r\nmake elixir tests=test/elixir/test/design_docs_test.exs:443\r\n```\r\n\r\n(443 being the line number, so it would run the test on that line number)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188407143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188936607","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1188936607","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1188936607,"node_id":"IC_kwDOAAMmUc5G3buf","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T11:28:10Z","updated_at":"2022-07-19T11:28:10Z","author_association":"MEMBER","body":"I don't believe we made any promises about the AuthSession cookie format. It's an opaque string generated by CouchDB that CouchDB can validate when it is presented again later.\r\n\r\nAn upgrade note seems sufficient to me.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188936607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188937171","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1188937171","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1188937171,"node_id":"IC_kwDOAAMmUc5G3b3T","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T11:28:50Z","updated_at":"2022-07-19T11:28:50Z","author_association":"MEMBER","body":"what about auth proxies?  the token is a part of our documented public API","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188937171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188942192","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1188942192","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1188942192,"node_id":"IC_kwDOAAMmUc5G3dFw","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T11:34:28Z","updated_at":"2022-07-19T11:52:40Z","author_association":"CONTRIBUTOR","body":"Can we do for proxy auth something like that:\r\n\r\n1. Calc TokenSHA256\r\n2. Test X-Auth-CouchDB-Token == TokenSHA256\r\n2.1 True -> continue\r\n2.2 False -> Calc TokenSHA1\r\n  2.2.1 Test X-Auth-CouchDB-Token == TokenSHA1\r\n  2.2.1.1 True -> continue\r\n  2.2.1.2 False -> Error","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1188942192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189019521","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189019521","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189019521,"node_id":"IC_kwDOAAMmUc5G3v-B","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T12:56:21Z","updated_at":"2022-07-19T12:56:21Z","author_association":"MEMBER","body":"that would be an option, but you’d want admins to disable the sha1 check completely still, so I’m not sure we can get around a config option","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189019521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189032044","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189032044","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189032044,"node_id":"IC_kwDOAAMmUc5G3zBs","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T13:08:05Z","updated_at":"2022-07-19T13:08:05Z","author_association":"MEMBER","body":"hrm, that is annoying, but fair point.\r\n\r\nI suggest that the digest function underneath the two uses of HMAC be a configuration item then, defaulting to `sha256` in the next release. We should allow any value that is supported by erlang.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189032044/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189352099","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189352099","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189352099,"node_id":"IC_kwDOAAMmUc5G5BKj","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T17:15:41Z","updated_at":"2022-07-19T17:15:41Z","author_association":"CONTRIBUTOR","body":"I think another issue with this change is that it breaks cookie auth for rolling upgrades since a cookie issued by a sha1 node won't be readable by a sha256 node and vice versa. It would be great if we could add some kind of backward compatibility so that rolling upgrades continue to work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189352099/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189565956","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189565956","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189565956,"node_id":"IC_kwDOAAMmUc5G51YE","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T21:24:54Z","updated_at":"2022-07-19T21:24:54Z","author_association":"MEMBER","body":"the config proposal would appear to achieve it? upgrade all the nodes first then config:set to the new algorithm on all nodes afterward.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189565956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189584824","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189584824","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189584824,"node_id":"IC_kwDOAAMmUc5G55-4","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T21:50:18Z","updated_at":"2022-07-19T21:50:18Z","author_association":"CONTRIBUTOR","body":"+1 for the config option","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189584824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189601792","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189601792","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189601792,"node_id":"IC_kwDOAAMmUc5G5-IA","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T22:11:20Z","updated_at":"2022-07-19T22:11:20Z","author_association":"CONTRIBUTOR","body":"> the config proposal would appear to achieve it? upgrade all the nodes first then config:set to the new algorithm on all nodes afterward.\r\n\r\nIn this scenario would not cookies encoded with e.g. sha1 fail on a newly reconfigured sha256 node?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189601792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189617898","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189617898","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189617898,"node_id":"IC_kwDOAAMmUc5G6CDq","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-19T22:36:46Z","updated_at":"2022-07-19T22:36:46Z","author_association":"CONTRIBUTOR","body":"In Cloudant's implementation of IAM auth (primarily written by Bob) exists an implementation of IAM session cookies, which are similar to regular session cookies, except that they use IAM access tokens to generate the payload.\r\n\r\nWhen the format of the cookie needed to change due to changed requirements for items being hashed, we wrote code that supported both the old payload (for existing cookies) and the new payload for cookies created henceforth.\r\n\r\nWould there be an objection to using a similar algorithm for upgrading between sha1 and sha256 here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189617898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189927416","html_url":"https://github.com/apache/couchdb/issues/4034#issuecomment-1189927416","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4034","id":1189927416,"node_id":"IC_kwDOAAMmUc5G7Nn4","user":{"login":"tudordumitriu","id":4671554,"node_id":"MDQ6VXNlcjQ2NzE1NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4671554?v=4","gravatar_id":"","url":"https://api.github.com/users/tudordumitriu","html_url":"https://github.com/tudordumitriu","followers_url":"https://api.github.com/users/tudordumitriu/followers","following_url":"https://api.github.com/users/tudordumitriu/following{/other_user}","gists_url":"https://api.github.com/users/tudordumitriu/gists{/gist_id}","starred_url":"https://api.github.com/users/tudordumitriu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tudordumitriu/subscriptions","organizations_url":"https://api.github.com/users/tudordumitriu/orgs","repos_url":"https://api.github.com/users/tudordumitriu/repos","events_url":"https://api.github.com/users/tudordumitriu/events{/privacy}","received_events_url":"https://api.github.com/users/tudordumitriu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T07:29:04Z","updated_at":"2022-07-20T07:29:04Z","author_association":"NONE","body":"Thank you so much for the great work and support @nickva \r\nLooking forward to it!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189927416/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189980552","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1189980552","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1189980552,"node_id":"IC_kwDOAAMmUc5G7amI","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T08:26:29Z","updated_at":"2022-07-20T08:26:29Z","author_association":"MEMBER","body":"> Would there be an objection to using a similar algorithm for upgrading between sha1 and sha256 here?\r\n\r\ngiven that the fallback for an invalid session is re-login, just like after a session timeout, I don’t see a huge benefit of falling back to sha1.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1189980552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190046903","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1190046903","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1190046903,"node_id":"IC_kwDOAAMmUc5G7qy3","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T09:30:18Z","updated_at":"2022-07-20T09:30:18Z","author_association":"MEMBER","body":"that's right, Jay, users would have to login again when the config item is flipped, but that seems right to me when enhancing security. otherwise we'd have to add some new code to only allow hmac-sha1 cookies for some period of time (as session cookies are auto-extended through active use). Having noted that I think it is past time we looked at the authn/authz layer. I'd much prefer session cookies not to extend and put the onus on the client to renew pre-emptively.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190046903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190108870","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1190108870","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1190108870,"node_id":"IC_kwDOAAMmUc5G757G","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T10:32:49Z","updated_at":"2022-07-20T10:32:49Z","author_association":"CONTRIBUTOR","body":"Maybe we should Perhaps we should make an explicit distinction here again. \r\n\r\nOriginally in my PR #4094 I wanted to change the hash algorithm for cookie authentication only. \r\nWhen I changed it, I also changed it for proxy authentication (rather unintentionally).\r\n\r\nFor cookie authentication, I agree with Jan & Robert, Logout, Login and Done! My suggestion from above was a way that a user doesn't have to do anything to keep proxy auth working, but as Robert mentioned, it's a security hole or in 5 years this code is still in the code base (it's my gut feeling). The following questions are swirling around in my head:\r\n\r\n1. Should we revert the has algorithm only for proxy auth to use sha1 and keep sha256 for cookie auth?\r\n2. Do we really want to add a config switch for this reason and for this case? There are already many setting options (which has pros and cons), not all of which have ended up in the documentation (TODO for a next PR) - but that's an other discussion (perhaps a new configuration system with automatic deprecation of config options in X + 2 versions and its successors).\r\n3. Is it important that a user can choose an internal hash algorithm? If we allow hash algorithms that Erlang offers us, we will eventually face the problem again that the old configured option is not available in the new version.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190108870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190435354","html_url":"https://github.com/apache/couchdb/pull/4033#issuecomment-1190435354","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4033","id":1190435354,"node_id":"IC_kwDOAAMmUc5G9Joa","user":{"login":"noahshaw11","id":47468872,"node_id":"MDQ6VXNlcjQ3NDY4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/47468872?v=4","gravatar_id":"","url":"https://api.github.com/users/noahshaw11","html_url":"https://github.com/noahshaw11","followers_url":"https://api.github.com/users/noahshaw11/followers","following_url":"https://api.github.com/users/noahshaw11/following{/other_user}","gists_url":"https://api.github.com/users/noahshaw11/gists{/gist_id}","starred_url":"https://api.github.com/users/noahshaw11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noahshaw11/subscriptions","organizations_url":"https://api.github.com/users/noahshaw11/orgs","repos_url":"https://api.github.com/users/noahshaw11/repos","events_url":"https://api.github.com/users/noahshaw11/events{/privacy}","received_events_url":"https://api.github.com/users/noahshaw11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T15:32:44Z","updated_at":"2022-07-20T15:32:44Z","author_association":"CONTRIBUTOR","body":"> +1, Good work.\r\n\r\nThanks, @iilyak!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190435354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190665375","html_url":"https://github.com/apache/couchdb/pull/4116#issuecomment-1190665375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4116","id":1190665375,"node_id":"IC_kwDOAAMmUc5G-Byf","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T19:23:40Z","updated_at":"2022-07-20T19:23:40Z","author_association":"MEMBER","body":"why is `couch_tests` being added to the couchdb release artifact?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190665375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190673367","html_url":"https://github.com/apache/couchdb/pull/4116#issuecomment-1190673367","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4116","id":1190673367,"node_id":"IC_kwDOAAMmUc5G-DvX","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T19:32:31Z","updated_at":"2022-07-20T19:32:31Z","author_association":"MEMBER","body":"the PR also includes unnecessary non-functional whitespace changes (I _think_)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190673367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190809078","html_url":"https://github.com/apache/couchdb/issues/4121#issuecomment-1190809078","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4121","id":1190809078,"node_id":"IC_kwDOAAMmUc5G-k32","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T22:06:15Z","updated_at":"2022-07-20T22:06:15Z","author_association":"CONTRIBUTOR","body":"Closed by accident with bad phrasing in #4124 \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1190809078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1191530894","html_url":"https://github.com/apache/couchdb/issues/4127#issuecomment-1191530894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4127","id":1191530894,"node_id":"IC_kwDOAAMmUc5HBVGO","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-21T14:07:19Z","updated_at":"2022-07-21T14:07:19Z","author_association":"CONTRIBUTOR","body":"Thanks for your report @billoty. It seems that section of the documentation hasn't been updated since we switched to requiring an admin password to be set up by default. Try to add `admin:password` for the source and target endpoint url and it should work.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1191530894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192609502","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1192609502","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1192609502,"node_id":"IC_kwDOAAMmUc5HFcbe","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-22T14:03:38Z","updated_at":"2022-07-22T14:03:38Z","author_association":"CONTRIBUTOR","body":"> otherwise we'd have to add some new code to only allow hmac-sha1 cookies for some period of time (as session cookies are auto-extended through active use).\r\n\r\nI was considering this a general enough problem (since I've encountered it twice in under a year) for a `cookie_upgrade` behavior to be written and then specific implementations used for various upgrade paths, to ensure a seamless end user experience.  However, I can also see the big benefit to _not_ adding complicated fallback code to security pathways in order to just to keep it simple (in much the same way we should probably remove the code that automatically extends cookie lifetimes).\r\n\r\nSo, given that there appears to be little stomach for the above feature, I'm fine with a config option, especially if it continues to default to `sha1` so that no incompatibilities are introduced. We could change that to `sha256` for a major release.\r\n\r\nMy preference would be to revert https://github.com/apache/couchdb/pull/4094 for now, until a configurable version can be reviewed, since I'm on the hook to create a release with this code, and would love to not have to use a fork.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192609502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192626908","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1192626908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1192626908,"node_id":"IC_kwDOAAMmUc5HFgrc","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-22T14:22:22Z","updated_at":"2022-07-22T14:22:22Z","author_association":"MEMBER","body":"How about this;\r\n\r\n1) when we receive an AuthSession cookie we try to confirm it with HMAC-SHA256. If that is successful, we continue as usual.\r\n2) if unsuccessful we try to confirm it with HMAC-SHA1. If that is successful, we consider it expired and send a new one (which is HMAC-SHA256)\r\n3) an administrator can disable the fallback option. it is enabled by default in the first release and disabled by default in the release after that.\r\n\r\nThat is, after we merge this work couchdb only issues new HMAC-SHA256 cookies but will accept (and upgrade) SHA1's if the administrator allows.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192626908/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192636518","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1192636518","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1192636518,"node_id":"IC_kwDOAAMmUc5HFjBm","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-22T14:32:18Z","updated_at":"2022-07-22T14:32:18Z","author_association":"CONTRIBUTOR","body":"That sounds pretty good, Bob. I would suggest making the code general enough so that it can also be used for upgrading to `sha512` (or whatever) in a few years.\r\n\r\nAnd can we pretty please revert https://github.com/apache/couchdb/pull/4094 while we work on your proposal?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192636518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192645380","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1192645380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1192645380,"node_id":"IC_kwDOAAMmUc5HFlME","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-22T14:41:51Z","updated_at":"2022-07-22T14:41:51Z","author_association":"MEMBER","body":"@big-r81 what do you think about reverting while we redo this with compatibility improvements?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192645380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192707330","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1192707330","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1192707330,"node_id":"IC_kwDOAAMmUc5HF0UC","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-22T15:45:23Z","updated_at":"2022-07-22T15:45:23Z","author_association":"CONTRIBUTOR","body":"@rnewson yes, let’s make it better! +1 for reverting!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192707330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192742795","html_url":"https://github.com/apache/couchdb/pull/4128#issuecomment-1192742795","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4128","id":1192742795,"node_id":"IC_kwDOAAMmUc5HF8-L","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-22T16:26:38Z","updated_at":"2022-07-22T16:26:38Z","author_association":"MEMBER","body":"I reverted the commit you presented, it's not my fault it has two unrelated changes in it. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1192742795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194392345","html_url":"https://github.com/apache/couchdb/pull/4130#issuecomment-1194392345","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4130","id":1194392345,"node_id":"IC_kwDOAAMmUc5HMPsZ","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-25T17:32:38Z","updated_at":"2022-07-25T17:32:38Z","author_association":"CONTRIBUTOR","body":"Oh yes, good idea!\r\n\r\nFixed this messages:\r\n```\r\nwarning: :compile_time_purge_level option for the :logger application is deprecated, use :compile_time_purge_matching instead\r\n```\r\n\r\nI didn't find a hint in the docs too about the deprecation. Maybe it's with version 1.13.x ...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194392345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194501435","html_url":"https://github.com/apache/couchdb/pull/4106#issuecomment-1194501435","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4106","id":1194501435,"node_id":"IC_kwDOAAMmUc5HMqU7","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-25T19:09:41Z","updated_at":"2022-07-25T19:09:41Z","author_association":"CONTRIBUTOR","body":"@nickva @jaydoane alright I've added two more commits, one adds IOQ as a dep to the various applications setting IO priority values. The other commit adds a `search` flag for the `io_class` labeling in IOQ utilized in `dreyfus`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194501435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194763429","html_url":"https://github.com/apache/couchdb/issues/3958#issuecomment-1194763429","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3958","id":1194763429,"node_id":"IC_kwDOAAMmUc5HNqSl","user":{"login":"digimbyte","id":6645396,"node_id":"MDQ6VXNlcjY2NDUzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/6645396?v=4","gravatar_id":"","url":"https://api.github.com/users/digimbyte","html_url":"https://github.com/digimbyte","followers_url":"https://api.github.com/users/digimbyte/followers","following_url":"https://api.github.com/users/digimbyte/following{/other_user}","gists_url":"https://api.github.com/users/digimbyte/gists{/gist_id}","starred_url":"https://api.github.com/users/digimbyte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/digimbyte/subscriptions","organizations_url":"https://api.github.com/users/digimbyte/orgs","repos_url":"https://api.github.com/users/digimbyte/repos","events_url":"https://api.github.com/users/digimbyte/events{/privacy}","received_events_url":"https://api.github.com/users/digimbyte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-25T23:25:05Z","updated_at":"2022-07-25T23:25:05Z","author_association":"NONE","body":"I had this issue on Debian Buster as well - in a production environment.\nwas catastrophic\n\nOn Tue, Jul 5, 2022 at 9:42 AM trames57 ***@***.***> wrote:\n\n> I put a bug post into arch linux but no one has responded to it yet. I\n> would say the epmd issue not using the environment variable as described is\n> not an arch issue. Given that it is 127.0.0.1, it should not be trying with\n> ::1\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/3958#issuecomment-1174461771>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ABSWNFEM7CNLAWH5P7KFTLLVSNZH3ANCNFSM5QS3OWRA>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194763429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194792520","html_url":"https://github.com/apache/couchdb/pull/3964#issuecomment-1194792520","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3964","id":1194792520,"node_id":"IC_kwDOAAMmUc5HNxZI","user":{"login":"noahshaw11","id":47468872,"node_id":"MDQ6VXNlcjQ3NDY4ODcy","avatar_url":"https://avatars.githubusercontent.com/u/47468872?v=4","gravatar_id":"","url":"https://api.github.com/users/noahshaw11","html_url":"https://github.com/noahshaw11","followers_url":"https://api.github.com/users/noahshaw11/followers","following_url":"https://api.github.com/users/noahshaw11/following{/other_user}","gists_url":"https://api.github.com/users/noahshaw11/gists{/gist_id}","starred_url":"https://api.github.com/users/noahshaw11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/noahshaw11/subscriptions","organizations_url":"https://api.github.com/users/noahshaw11/orgs","repos_url":"https://api.github.com/users/noahshaw11/repos","events_url":"https://api.github.com/users/noahshaw11/events{/privacy}","received_events_url":"https://api.github.com/users/noahshaw11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-25T23:59:17Z","updated_at":"2022-07-25T23:59:17Z","author_association":"CONTRIBUTOR","body":"Closing this for now, @chewbranca may pick this work up in the future.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1194792520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1198035989","html_url":"https://github.com/apache/couchdb/pull/4133#issuecomment-1198035989","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4133","id":1198035989,"node_id":"IC_kwDOAAMmUc5HaJQV","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-28T11:49:23Z","updated_at":"2022-07-28T11:49:23Z","author_association":"CONTRIBUTOR","body":"@noahshaw11 could you update the branch?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1198035989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1199131451","html_url":"https://github.com/apache/couchdb/issues/1333#issuecomment-1199131451","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1333","id":1199131451,"node_id":"IC_kwDOAAMmUc5HeUs7","user":{"login":"marcosbc","id":5102866,"node_id":"MDQ6VXNlcjUxMDI4NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5102866?v=4","gravatar_id":"","url":"https://api.github.com/users/marcosbc","html_url":"https://github.com/marcosbc","followers_url":"https://api.github.com/users/marcosbc/followers","following_url":"https://api.github.com/users/marcosbc/following{/other_user}","gists_url":"https://api.github.com/users/marcosbc/gists{/gist_id}","starred_url":"https://api.github.com/users/marcosbc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcosbc/subscriptions","organizations_url":"https://api.github.com/users/marcosbc/orgs","repos_url":"https://api.github.com/users/marcosbc/repos","events_url":"https://api.github.com/users/marcosbc/events{/privacy}","received_events_url":"https://api.github.com/users/marcosbc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-29T10:42:19Z","updated_at":"2022-07-29T10:42:57Z","author_association":"NONE","body":"It seems like this was fixed here: https://github.com/apache/couchdb/issues/1875 / https://github.com/apache/couchdb/pull/2345","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1199131451/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1199671853","html_url":"https://github.com/apache/couchdb/issues/1428#issuecomment-1199671853","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1428","id":1199671853,"node_id":"IC_kwDOAAMmUc5HgYot","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-29T16:24:32Z","updated_at":"2022-07-29T16:24:32Z","author_association":"CONTRIBUTOR","body":"Just wanted to provide update on this one\r\n\r\n@jiahuili430 tried to switch to rebar3 [here #4120](https://github.com/apache/couchdb/pull/4120) and [here #4089](https://github.com/apache/couchdb/pull/4089)\r\n\r\nI took @jiahuili430 work and tried to DRY the rebar.config.script and implement release generation [here](https://github.com/cloudant/couchdb/tree/switch-to-rebar3). The problem I faced is that rebar3 assumes every application either in the same repository (monorepo) or it is a dependency. In case when it is a dependency rebar3 fetches it into the `_build/<profile>/lib/<app>`. This means that if we create a source tarball and copy sources of dependencies into src we would need to update rebar.config. Which means two separate rebar configurations for development and building from a source archive.\r\n\r\nIn order to solve this issue I implemented [a plugin](https://github.com/cloudant/couchdb/blob/switch-to-rebar3/_checkouts/ic/src/ic_deps_resource.erl) which allows rebar3 to copy source files to `_build/<profile>/lib/<app>` from either `src/<app>` if it is present or fetch from git otherwise. The plugin is based on https://github.com/benoitc/rebar3_path_deps.\r\n\r\nAnother issue was the boot_script generation. Currently we use reltool [here](https://github.com/apache/couchdb/blob/main/dev/make_boot_script). Rebar3 don't use reltool and uses relx for release generation. To avoid maintaining two configurations I wrote [a plugin](https://github.com/cloudant/couchdb/blob/switch-to-rebar3/_checkouts/ic/src/ic_release.erl) to generate boot file.\r\n\r\n**dependency definition problem**: However the work not yet complete. Currently it complains about cyclic dependencies. \r\n\r\n```\r\n===> Verifying dependencies...\r\n===> Dependency cycle(s) detected:\r\napplications: b64url bear config ets_lru folsom hyper ibrowse jiffy khash meck mochiweb recon snappy depend on each other\r\n```\r\n\r\nThis is because the same dependencies defined twice. Once in applications' `rebar.config` files and once in the main `rebar.config.script`. I see two options to resolve it.\r\n\r\n1. define dependencies in each app directly. This would mean that dependencies would be in multiple places. Also I expect problems when we would want to build from released source archive.\r\n2. implement plugin which would take the dependencies from main repository and inject overrides into the applications which refer to them in their `<app>.app.src` files. Effectively, it would be the same as 1) but configuration would be maintained in one place.\r\n\r\nI also tried experimental vendoring mechanism in recent rebar3 versions. Unfortunately it doesn't do what we need. More experimentation is needed after the **dependencies definition problem** is sorted out. \r\n\r\nUnfortunately, I cannot allocate more time into it at the moment. So I decided to document my current results in a hope that it would be helpful to someone who would try to do this transition. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1199671853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1205768941","html_url":"https://github.com/apache/couchdb/issues/4137#issuecomment-1205768941","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4137","id":1205768941,"node_id":"IC_kwDOAAMmUc5H3pLt","user":{"login":"zamazan4ik","id":7355383,"node_id":"MDQ6VXNlcjczNTUzODM=","avatar_url":"https://avatars.githubusercontent.com/u/7355383?v=4","gravatar_id":"","url":"https://api.github.com/users/zamazan4ik","html_url":"https://github.com/zamazan4ik","followers_url":"https://api.github.com/users/zamazan4ik/followers","following_url":"https://api.github.com/users/zamazan4ik/following{/other_user}","gists_url":"https://api.github.com/users/zamazan4ik/gists{/gist_id}","starred_url":"https://api.github.com/users/zamazan4ik/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zamazan4ik/subscriptions","organizations_url":"https://api.github.com/users/zamazan4ik/orgs","repos_url":"https://api.github.com/users/zamazan4ik/repos","events_url":"https://api.github.com/users/zamazan4ik/events{/privacy}","received_events_url":"https://api.github.com/users/zamazan4ik/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-04T21:07:59Z","updated_at":"2022-10-17T09:48:27Z","author_association":"NONE","body":"Moved to https://github.com/apache/couchdb/issues/4214","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1205768941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206197700","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1206197700","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1206197700,"node_id":"IC_kwDOAAMmUc5H5R3E","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-05T08:40:28Z","updated_at":"2022-08-05T09:41:36Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\ni would like to continue the work on this topic. Some questions arise while thinking about this. I would like to do this:\r\n\r\n1. Introduce multiple config options in default.ini:\r\n```\r\n; Set the HMAC algorithm used by cookie and proxy authentication\r\n; Possible values: sha,sha224,sha256,sha384,sha512,sha3_224,sha3_256,sha3_384,sha3_512,\r\n;                  blake2b,blake2s,md4,md5,ripemd160\r\n; Default: sha256\r\n;hmac_algorithm = sha256\r\n; The following algorithms are blacklisted and can't be used for the hash\r\n; Default: [sha,md4,md5]\r\n;hmac_algorithm_blacklist = [sha,md4,md5]\r\n; If hmac_algorithm_use_legacy_sha = true then sha (sha1) is used for HMAC. It defaults to\r\n; true in 3.x for BC-compatability and gets removed in 4.x. Setting this will override the\r\n; used hash algorithm in hmac_algorithm and ignores the blacklisted sha value in\r\n; hmac_algorithm_blacklist. If set to false, then the hash algorithm set by hash_algorithm\r\n; is used.\r\nhmac_algorithm_use_legacy_sha = true\r\n```\r\nSo a user could switch explicitly to a new hash algorithm, but the default behavior remains as it is right now.\r\nIf we get consensus about this. I would open a PR.\r\n\r\nMy next question is, if we want to add code for internal upgrade of AuthSession to SHA256 like Bob suggest?\r\nA user can explicitly use new hash algorithms if `hmac_algorithm_use_legacy_sha` is set to false.\r\n> How about this;\r\n> \r\n>     1. when we receive an AuthSession cookie we try to confirm it with HMAC-SHA256. If that is successful, we continue as usual.\r\n>     2. if unsuccessful we try to confirm it with HMAC-SHA1. If that is successful, we consider it expired and send a new one (which is HMAC-SHA256)\r\n>     3. an administrator can disable the fallback option. it is enabled by default in the first release and disabled by default in the release after that.\r\n> \r\n> \r\n> That is, after we merge this work couchdb only issues new HMAC-SHA256 cookies but will accept (and upgrade) SHA1's if the administrator allows.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206197700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206373192","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1206373192","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1206373192,"node_id":"IC_kwDOAAMmUc5H58tI","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-05T12:07:43Z","updated_at":"2022-08-05T12:07:43Z","author_association":"MEMBER","body":"I suggest keeping it simple for the first version. You only need a 'legacy' toggle option, defaulting to true as you have it above. CouchDB, after upgrade, will use HMAC-SHA-256 for new cookies, but optionally accept HMAC-SHA-1 signed cookies (and return a new HMAC-SHA-256 cookie of original expiration). ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206373192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206542917","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1206542917","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1206542917,"node_id":"IC_kwDOAAMmUc5H6mJF","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-05T14:49:58Z","updated_at":"2022-08-05T14:49:58Z","author_association":"CONTRIBUTOR","body":"I was considering a list of acceptable cookie hash algorithms in a single config variable, where the first element of the list is the preferred hash, while the others are still acceptable. In our current situation, where we want to be backward compatible with `sha1`, but want to only create new cookies with `sha256`, the config option would look like this:\r\n```\r\n[chttpd_auth]\r\ncookie_hash_algorithms = sha256, sha1 ; new uses first element, others can be decoded\r\n```\r\nThis seems fairly simple, and extensible for the next time we need to upgrade, without any additional code changes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206542917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206609088","html_url":"https://github.com/apache/couchdb/issues/4138#issuecomment-1206609088","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4138","id":1206609088,"node_id":"IC_kwDOAAMmUc5H62TA","user":{"login":"mattpr","id":1196252,"node_id":"MDQ6VXNlcjExOTYyNTI=","avatar_url":"https://avatars.githubusercontent.com/u/1196252?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpr","html_url":"https://github.com/mattpr","followers_url":"https://api.github.com/users/mattpr/followers","following_url":"https://api.github.com/users/mattpr/following{/other_user}","gists_url":"https://api.github.com/users/mattpr/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpr/subscriptions","organizations_url":"https://api.github.com/users/mattpr/orgs","repos_url":"https://api.github.com/users/mattpr/repos","events_url":"https://api.github.com/users/mattpr/events{/privacy}","received_events_url":"https://api.github.com/users/mattpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-05T15:57:01Z","updated_at":"2022-08-05T15:57:01Z","author_association":"NONE","body":"Well I found at least one interesting thing.\r\n\r\nThis debconf...\r\n```\r\ncouchdb couchdb/bindaddress string  127.0.0.1\r\n```\r\n...results in...\r\n```\r\ncat /opt/couchdb/etc/default.d/10-bind-address.ini\r\n\r\n# Package-introduced bind address\r\n[chttpd]\r\nbind_address =  127.0.0.1\r\n```\r\n...which prevents couchdb from starting.  The error in the log is the following:\r\n```\r\nApplication chttpd exited with reason: {{shutdown,{failed_to_start_child,chttpd,invalid_bind_address}},{chttpd_app,start,[normal,[]]}}\r\n```\r\n\r\nThis is because there is 2 spaces between the `=` and the `127`.  Apparently couchdb doesn't trim whitespace when parsing config files (at least in 3.2.2).\r\n\r\nThe fix is that all excess whitespace needs to be removed from the debconf pre-populated values (single space separating each token only).\r\n\r\nThis doesn't resolve the admin user not getting created, but is a related debconf issue.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1206609088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207217242","html_url":"https://github.com/apache/couchdb/pull/3038#issuecomment-1207217242","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3038","id":1207217242,"node_id":"IC_kwDOAAMmUc5H9Kxa","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T13:42:01Z","updated_at":"2022-08-06T13:42:01Z","author_association":"MEMBER","body":"> another note. In some places you use a list comprehension, in others a lists:map. In both cases you're changing each item of a list to superset or subset of its original content, but using two different mechanisms to do so. It wasn't clear if this was intentional or not. The only difference is error handling, in that the list comprehension approach can silently drop items that fail, whereas lists:map would not. Is that why you chose lc vs map or were the choices arbitrary?\r\n\r\nI made no conscious decisions but rather picked the variant that was most prominent in the surrounding code. A cursory glance suggests this is fine where employed, but I’ll have another eye on it once the final PR goes up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207217242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207217505","html_url":"https://github.com/apache/couchdb/pull/3038#issuecomment-1207217505","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3038","id":1207217505,"node_id":"IC_kwDOAAMmUc5H9K1h","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T13:43:39Z","updated_at":"2022-08-06T13:43:39Z","author_association":"MEMBER","body":"I’m closing this PR in favour of a new cleaner one shortly since our master/main/3.x rejigger has made this one not show correctly here. I resolved all comments here that I have fixed in the future PR. The remaining ones will need to be looked at there again, I’ll add comments where appropriate, since code moved around quite a bit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207217505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207221807","html_url":"https://github.com/apache/couchdb/pull/4139#issuecomment-1207221807","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4139","id":1207221807,"node_id":"IC_kwDOAAMmUc5H9L4v","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T14:11:53Z","updated_at":"2022-08-06T14:11:53Z","author_association":"MEMBER","body":"Original comment\r\n\r\n> This is great, gratz!\r\n> \r\n> One question: it’s not clear to me how /_security response will look for buckets having access restrictions, is there a special field for those restrictions? I mean I want to explicitly mark buckets of the kind in Photon, so how can I detect _access restricted buckets reading /_security endpoint?\r\n> \r\n> RFC states admins can grant individual users and groups access to a database using the database’s _security object, no details.\r\n\r\nhttps://github.com/apache/couchdb/pull/3038#issuecomment-665578748","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207221807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207239502","html_url":"https://github.com/apache/couchdb/pull/2943#issuecomment-1207239502","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2943","id":1207239502,"node_id":"IC_kwDOAAMmUc5H9QNO","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-06T16:05:41Z","updated_at":"2022-08-06T16:05:41Z","author_association":"MEMBER","body":"closing in favour of https://github.com/apache/couchdb/pull/4139","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207239502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207630200","html_url":"https://github.com/apache/couchdb/issues/2380#issuecomment-1207630200","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2380","id":1207630200,"node_id":"IC_kwDOAAMmUc5H-vl4","user":{"login":"geeksilva97","id":15680379,"node_id":"MDQ6VXNlcjE1NjgwMzc5","avatar_url":"https://avatars.githubusercontent.com/u/15680379?v=4","gravatar_id":"","url":"https://api.github.com/users/geeksilva97","html_url":"https://github.com/geeksilva97","followers_url":"https://api.github.com/users/geeksilva97/followers","following_url":"https://api.github.com/users/geeksilva97/following{/other_user}","gists_url":"https://api.github.com/users/geeksilva97/gists{/gist_id}","starred_url":"https://api.github.com/users/geeksilva97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geeksilva97/subscriptions","organizations_url":"https://api.github.com/users/geeksilva97/orgs","repos_url":"https://api.github.com/users/geeksilva97/repos","events_url":"https://api.github.com/users/geeksilva97/events{/privacy}","received_events_url":"https://api.github.com/users/geeksilva97/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-08T03:48:27Z","updated_at":"2022-08-08T03:48:27Z","author_association":"NONE","body":"Hey, @janl. Does the `beginner-friendly` label mean this issue is good for new contributors?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1207630200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210501163","html_url":"https://github.com/apache/couchdb/issues/455#issuecomment-1210501163","issue_url":"https://api.github.com/repos/apache/couchdb/issues/455","id":1210501163,"node_id":"IC_kwDOAAMmUc5IJsgr","user":{"login":"abarbosa-godaddy","id":106174121,"node_id":"U_kgDOBlQWqQ","avatar_url":"https://avatars.githubusercontent.com/u/106174121?v=4","gravatar_id":"","url":"https://api.github.com/users/abarbosa-godaddy","html_url":"https://github.com/abarbosa-godaddy","followers_url":"https://api.github.com/users/abarbosa-godaddy/followers","following_url":"https://api.github.com/users/abarbosa-godaddy/following{/other_user}","gists_url":"https://api.github.com/users/abarbosa-godaddy/gists{/gist_id}","starred_url":"https://api.github.com/users/abarbosa-godaddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abarbosa-godaddy/subscriptions","organizations_url":"https://api.github.com/users/abarbosa-godaddy/orgs","repos_url":"https://api.github.com/users/abarbosa-godaddy/repos","events_url":"https://api.github.com/users/abarbosa-godaddy/events{/privacy}","received_events_url":"https://api.github.com/users/abarbosa-godaddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T10:48:31Z","updated_at":"2022-08-10T10:48:31Z","author_association":"NONE","body":"> In `Arch Linux` installing `js185` solves the issue.\r\n\r\nLike `sudo pacman -S js185`? It didn't work for me.\r\n\r\nI am using Manjaro.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210501163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210566533","html_url":"https://github.com/apache/couchdb/issues/455#issuecomment-1210566533","issue_url":"https://api.github.com/repos/apache/couchdb/issues/455","id":1210566533,"node_id":"IC_kwDOAAMmUc5IJ8eF","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T11:51:38Z","updated_at":"2022-08-10T11:51:38Z","author_association":"CONTRIBUTOR","body":"> > In `Arch Linux` installing `js185` solves the issue.\r\n> \r\n> Like `sudo pacman -S js185`? It didn't work for me.\r\n> \r\n> I am using Manjaro.\r\n\r\nHi, try to install the latest spidermonkey version with\r\n```\r\npamac install js91\r\n```\r\nand configure your CouchDB install with:\r\n```\r\n./configure --spidermonkey-version 91\r\nmake\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210566533/reactions","total_count":2,"+1":1,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210717367","html_url":"https://github.com/apache/couchdb/issues/3665#issuecomment-1210717367","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3665","id":1210717367,"node_id":"IC_kwDOAAMmUc5IKhS3","user":{"login":"fynnlyte","id":19202953,"node_id":"MDQ6VXNlcjE5MjAyOTUz","avatar_url":"https://avatars.githubusercontent.com/u/19202953?v=4","gravatar_id":"","url":"https://api.github.com/users/fynnlyte","html_url":"https://github.com/fynnlyte","followers_url":"https://api.github.com/users/fynnlyte/followers","following_url":"https://api.github.com/users/fynnlyte/following{/other_user}","gists_url":"https://api.github.com/users/fynnlyte/gists{/gist_id}","starred_url":"https://api.github.com/users/fynnlyte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fynnlyte/subscriptions","organizations_url":"https://api.github.com/users/fynnlyte/orgs","repos_url":"https://api.github.com/users/fynnlyte/repos","events_url":"https://api.github.com/users/fynnlyte/events{/privacy}","received_events_url":"https://api.github.com/users/fynnlyte/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T14:01:02Z","updated_at":"2022-08-10T14:01:02Z","author_association":"NONE","body":"> Does anyone have some other feasible workaround idea?\r\n\r\nI'm using the `_users` - DB to only store random session tokens with random passwords. The users' login credentials are managed in a separate DB. I'm using (and maintaining) [couch-auth](https://github.com/perfood/couch-auth) for that purpose. The config has an option (`security.iterations`) to control the number of `pbkdf2` iterations for passwords.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210717367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210739483","html_url":"https://github.com/apache/couchdb/issues/455#issuecomment-1210739483","issue_url":"https://api.github.com/repos/apache/couchdb/issues/455","id":1210739483,"node_id":"IC_kwDOAAMmUc5IKmsb","user":{"login":"abarbosa-godaddy","id":106174121,"node_id":"U_kgDOBlQWqQ","avatar_url":"https://avatars.githubusercontent.com/u/106174121?v=4","gravatar_id":"","url":"https://api.github.com/users/abarbosa-godaddy","html_url":"https://github.com/abarbosa-godaddy","followers_url":"https://api.github.com/users/abarbosa-godaddy/followers","following_url":"https://api.github.com/users/abarbosa-godaddy/following{/other_user}","gists_url":"https://api.github.com/users/abarbosa-godaddy/gists{/gist_id}","starred_url":"https://api.github.com/users/abarbosa-godaddy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abarbosa-godaddy/subscriptions","organizations_url":"https://api.github.com/users/abarbosa-godaddy/orgs","repos_url":"https://api.github.com/users/abarbosa-godaddy/repos","events_url":"https://api.github.com/users/abarbosa-godaddy/events{/privacy}","received_events_url":"https://api.github.com/users/abarbosa-godaddy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-10T14:18:11Z","updated_at":"2022-08-10T14:18:11Z","author_association":"NONE","body":"Nice, @big-r81 . It worked. Thank you,","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1210739483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1213096523","html_url":"https://github.com/apache/couchdb/issues/2496#issuecomment-1213096523","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2496","id":1213096523,"node_id":"IC_kwDOAAMmUc5ITmJL","user":{"login":"zachlankton","id":2927894,"node_id":"MDQ6VXNlcjI5Mjc4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2927894?v=4","gravatar_id":"","url":"https://api.github.com/users/zachlankton","html_url":"https://github.com/zachlankton","followers_url":"https://api.github.com/users/zachlankton/followers","following_url":"https://api.github.com/users/zachlankton/following{/other_user}","gists_url":"https://api.github.com/users/zachlankton/gists{/gist_id}","starred_url":"https://api.github.com/users/zachlankton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zachlankton/subscriptions","organizations_url":"https://api.github.com/users/zachlankton/orgs","repos_url":"https://api.github.com/users/zachlankton/repos","events_url":"https://api.github.com/users/zachlankton/events{/privacy}","received_events_url":"https://api.github.com/users/zachlankton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-12T13:12:50Z","updated_at":"2022-08-12T13:12:50Z","author_association":"CONTRIBUTOR","body":"Bumping this issue, still exists in 8/12/2022.  Any direction on where to start working on this issue? Maybe I can help?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1213096523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1214147399","html_url":"https://github.com/apache/couchdb/issues/2496#issuecomment-1214147399","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2496","id":1214147399,"node_id":"IC_kwDOAAMmUc5IXmtH","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-13T12:15:09Z","updated_at":"2022-08-13T12:15:25Z","author_association":"CONTRIBUTOR","body":"> Bumping this issue, still exists in 8/12/2022. Any direction on where to start working on this issue? Maybe I can help?\r\n\r\nHi, maybe you can start investigating the issue by following the [partition request](https://github.com/apache/couchdb/blob/96214780e891b173f1f8049d50206fcb097c26a5/src/chttpd/src/chttpd_db.erl#L315). ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1214147399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1214817155","html_url":"https://github.com/apache/couchdb/issues/4138#issuecomment-1214817155","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4138","id":1214817155,"node_id":"IC_kwDOAAMmUc5IaKOD","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-15T09:31:08Z","updated_at":"2022-08-15T09:31:08Z","author_association":"CONTRIBUTOR","body":"Hi, I suspect that the problems are entirely due to the leading/trailing white spaces. Did the admin-config value also have leading white-spaces in it?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1214817155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216261443","html_url":"https://github.com/apache/couchdb/issues/4147#issuecomment-1216261443","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4147","id":1216261443,"node_id":"IC_kwDOAAMmUc5Ifq1D","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T07:38:10Z","updated_at":"2022-08-16T07:38:10Z","author_association":"CONTRIBUTOR","body":"Thank you for the report. Closing this because of a similiar report. See #4047. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216261443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216594151","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1216594151","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1216594151,"node_id":"IC_kwDOAAMmUc5Ig8Dn","user":{"login":"dcappo","id":16294980,"node_id":"MDQ6VXNlcjE2Mjk0OTgw","avatar_url":"https://avatars.githubusercontent.com/u/16294980?v=4","gravatar_id":"","url":"https://api.github.com/users/dcappo","html_url":"https://github.com/dcappo","followers_url":"https://api.github.com/users/dcappo/followers","following_url":"https://api.github.com/users/dcappo/following{/other_user}","gists_url":"https://api.github.com/users/dcappo/gists{/gist_id}","starred_url":"https://api.github.com/users/dcappo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcappo/subscriptions","organizations_url":"https://api.github.com/users/dcappo/orgs","repos_url":"https://api.github.com/users/dcappo/repos","events_url":"https://api.github.com/users/dcappo/events{/privacy}","received_events_url":"https://api.github.com/users/dcappo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T12:51:02Z","updated_at":"2022-08-16T12:51:02Z","author_association":"NONE","body":"I submitted #4147.  \r\n\r\n- Does this mean I can expect correct behavior of CouchDB v3.2.2 on Ubuntu 8.x?  I develop on Mac but our servers are Ubuntu.\r\n- When can we expect resolution for the Mac installs?  Is there a recommended prior version of CouchDB I can install on our development Macs during the interim?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216594151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216607405","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1216607405","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1216607405,"node_id":"IC_kwDOAAMmUc5Ig_St","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T13:01:32Z","updated_at":"2022-08-16T13:01:32Z","author_association":"CONTRIBUTOR","body":"> I submitted #4147.\r\n> \r\n>     * Does this mean I can expect correct behavior of CouchDB v3.2.2 on Ubuntu 8.x?  I develop on Mac but our servers are Ubuntu.\r\nYou can compile CouchDB on a mac by yourself and it should work. For Ubuntu you can use our official installers (Btw. I don't know what you mean with Ubuntu 8.x)\r\n\r\n>     * When can we expect resolution for the Mac installs?  Is there a recommended prior version of CouchDB I can install on our development Macs during the interim?\r\nI think, the next released version of CouchDB has a fixed Mac-App. Btw, it's a couchdb release packaged as a mac app (with some UI). As I said, you can build CouchDB by yourself on a Mac or use homebrew.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216607405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216621157","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1216621157","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1216621157,"node_id":"IC_kwDOAAMmUc5IhCpl","user":{"login":"dcappo","id":16294980,"node_id":"MDQ6VXNlcjE2Mjk0OTgw","avatar_url":"https://avatars.githubusercontent.com/u/16294980?v=4","gravatar_id":"","url":"https://api.github.com/users/dcappo","html_url":"https://github.com/dcappo","followers_url":"https://api.github.com/users/dcappo/followers","following_url":"https://api.github.com/users/dcappo/following{/other_user}","gists_url":"https://api.github.com/users/dcappo/gists{/gist_id}","starred_url":"https://api.github.com/users/dcappo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcappo/subscriptions","organizations_url":"https://api.github.com/users/dcappo/orgs","repos_url":"https://api.github.com/users/dcappo/repos","events_url":"https://api.github.com/users/dcappo/events{/privacy}","received_events_url":"https://api.github.com/users/dcappo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T13:13:11Z","updated_at":"2022-08-16T13:13:11Z","author_association":"NONE","body":"Thanks for such a quick response!  Very helpful.  btw... I just meant Ubuntu 8 with some minor version I don't recall off the point of my head : )","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216621157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216888828","html_url":"https://github.com/apache/couchdb/pull/4150#issuecomment-1216888828","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4150","id":1216888828,"node_id":"IC_kwDOAAMmUc5IiD_8","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T16:43:45Z","updated_at":"2022-08-16T16:43:45Z","author_association":"CONTRIBUTOR","body":"I thought about it too, but then decided to separat the two things. Running both PR combined, the test will succeed. If we merge #4149, then I need to update this PR and then it should work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216888828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216960024","html_url":"https://github.com/apache/couchdb/pull/3989#issuecomment-1216960024","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3989","id":1216960024,"node_id":"IC_kwDOAAMmUc5IiVYY","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-16T17:49:44Z","updated_at":"2022-08-16T17:49:44Z","author_association":"CONTRIBUTOR","body":"Closing this, superseeded and fixed by #4129.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1216960024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1217850598","html_url":"https://github.com/apache/couchdb/pull/4150#issuecomment-1217850598","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4150","id":1217850598,"node_id":"IC_kwDOAAMmUc5Iluzm","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T10:51:24Z","updated_at":"2022-08-17T10:51:24Z","author_association":"CONTRIBUTOR","body":"Integrated into #4149, so I'm closing this pull request.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1217850598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1217873381","html_url":"https://github.com/apache/couchdb/pull/4149#issuecomment-1217873381","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4149","id":1217873381,"node_id":"IC_kwDOAAMmUc5Il0Xl","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-17T11:15:51Z","updated_at":"2022-08-17T11:16:07Z","author_association":"CONTRIBUTOR","body":"Integrated #4150 into this PR, to get a successful CI run.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1217873381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1221259044","html_url":"https://github.com/apache/couchdb/pull/4152#issuecomment-1221259044","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4152","id":1221259044,"node_id":"IC_kwDOAAMmUc5Iyu8k","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-20T08:34:35Z","updated_at":"2022-08-20T08:34:35Z","author_association":"MEMBER","body":"Thanks for this, this looks decent overall, especially for a first contribution :)\r\n\r\n I left a few minor notes on the code. I just have one question about the approach taken here.\r\n\r\nThe way I read it: passing keys to match into the query will return result rows we do not want. So this PR starts preventing those result rows from being returned.\r\n\r\nWould another option to solve this be making it so that we don’t read those rows in the first place? That would make this a performance improvement too.\r\n\r\nWe might even be able to do this at the request validation stage: if `keys` includes a partition that is not the partition of the URL being queried, we return a 400 error with a message that all keys must match the partition provided in the URL.\r\n\r\nJust spitballing here tho. Nice work!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1221259044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1222253568","html_url":"https://github.com/apache/couchdb/pull/4140#issuecomment-1222253568","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4140","id":1222253568,"node_id":"IC_kwDOAAMmUc5I2hwA","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T11:58:00Z","updated_at":"2022-08-22T11:58:14Z","author_association":"CONTRIBUTOR","body":"> This looks really great!\r\n> \r\n> I wonder if it might be useful to implements tests that:\r\n> \r\n>     * Demonstrate successfully decoding a cookie with a non-primary hash\r\n> \r\n>     * Demonstrate logging an unsupported hash algorithm\r\n> \r\n> \r\n> ?\r\n\r\nAdded some test cases.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1222253568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589757","html_url":"https://github.com/apache/couchdb/issues/4213#issuecomment-1280589757","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4213","id":1280589757,"node_id":"IC_kwDOAAMmUc5MVD-9","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T14:59:09Z","updated_at":"2022-08-22T14:59:09Z","author_association":"CONTRIBUTOR","body":"Hi, sounds like a good idea. Is this a manual process of writing and maintaining the docs for the endpoints?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280589757/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1222659654","html_url":"https://github.com/apache/couchdb/pull/4153#issuecomment-1222659654","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4153","id":1222659654,"node_id":"IC_kwDOAAMmUc5I4E5G","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-22T17:15:37Z","updated_at":"2022-08-22T17:15:37Z","author_association":"CONTRIBUTOR","body":"Good catch @nickva and thx for the good discussion!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1222659654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1223715805","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1223715805","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1223715805,"node_id":"IC_kwDOAAMmUc5I8Gvd","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T08:12:43Z","updated_at":"2022-08-23T08:12:43Z","author_association":"NONE","body":"Not sure if you are still the right contact for that matter, but tagging @wohali as you kindly helped me out last time as well (thanks for that :slightly_smiling_face:)\r\n(https://github.com/apache/couchdb/issues/2231)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1223715805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224009287","html_url":"https://github.com/apache/couchdb/issues/3840#issuecomment-1224009287","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3840","id":1224009287,"node_id":"IC_kwDOAAMmUc5I9OZH","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T12:35:36Z","updated_at":"2022-08-23T12:35:36Z","author_association":"CONTRIBUTOR","body":"Closing this, because it's fixed in main. I can't give you an date, where a new version is release. You can compile CouchDB,  if you need a version with a fix.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224009287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224135235","html_url":"https://github.com/apache/couchdb/pull/4152#issuecomment-1224135235","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4152","id":1224135235,"node_id":"IC_kwDOAAMmUc5I9tJD","user":{"login":"zachlankton","id":2927894,"node_id":"MDQ6VXNlcjI5Mjc4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2927894?v=4","gravatar_id":"","url":"https://api.github.com/users/zachlankton","html_url":"https://github.com/zachlankton","followers_url":"https://api.github.com/users/zachlankton/followers","following_url":"https://api.github.com/users/zachlankton/following{/other_user}","gists_url":"https://api.github.com/users/zachlankton/gists{/gist_id}","starred_url":"https://api.github.com/users/zachlankton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zachlankton/subscriptions","organizations_url":"https://api.github.com/users/zachlankton/orgs","repos_url":"https://api.github.com/users/zachlankton/repos","events_url":"https://api.github.com/users/zachlankton/events{/privacy}","received_events_url":"https://api.github.com/users/zachlankton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T14:12:15Z","updated_at":"2022-08-23T14:12:15Z","author_association":"CONTRIBUTOR","body":"Thanks Jan,\r\n\r\nI had considered something similar in the beginning and am  able to refactor if this is truly the desired result.\r\n\r\nHowever, this being a sort of bulk endpoint, I do believe it is consistent with the current behavior of the `_all_docs` endpoint on the root database (and on unpartitioned databases), where CouchDB returns a list of results that may include `\"error\":\"not found\"` results per key passed in. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224135235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224296568","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1224296568","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1224296568,"node_id":"IC_kwDOAAMmUc5I-Uh4","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T16:16:55Z","updated_at":"2022-08-23T16:16:55Z","author_association":"CONTRIBUTOR","body":"We use Rocky Linux for the RHEL 8 \"clone\" as we don't have access to RHEL paid licenses. It looks like there is a Rocky Linux 9 so we'll try to use that as the RHEL 9 \"clone\" base https://rockylinux.org/download.\r\n\r\nChances are it will happen for 3.3 only and not for 3.2.x series.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224296568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224755314","html_url":"https://github.com/apache/couchdb/issues/4154#issuecomment-1224755314","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4154","id":1224755314,"node_id":"IC_kwDOAAMmUc5JAEhy","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-23T19:54:12Z","updated_at":"2022-08-23T19:54:12Z","author_association":"NONE","body":"Thanks Nick,\r\nthat sounds good to me, having builds for CouchDB v3.x on a RHEL 9 compatible OS should be sufficient in order to package it up for ubi8-minimal. Is there an rough ETA for CouchDB v3.3 yet?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1224755314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225442738","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1225442738","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1225442738,"node_id":"IC_kwDOAAMmUc5JCsWy","user":{"login":"damienlibouton","id":22769410,"node_id":"MDQ6VXNlcjIyNzY5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/22769410?v=4","gravatar_id":"","url":"https://api.github.com/users/damienlibouton","html_url":"https://github.com/damienlibouton","followers_url":"https://api.github.com/users/damienlibouton/followers","following_url":"https://api.github.com/users/damienlibouton/following{/other_user}","gists_url":"https://api.github.com/users/damienlibouton/gists{/gist_id}","starred_url":"https://api.github.com/users/damienlibouton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damienlibouton/subscriptions","organizations_url":"https://api.github.com/users/damienlibouton/orgs","repos_url":"https://api.github.com/users/damienlibouton/repos","events_url":"https://api.github.com/users/damienlibouton/events{/privacy}","received_events_url":"https://api.github.com/users/damienlibouton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T09:05:19Z","updated_at":"2022-08-24T09:05:19Z","author_association":"NONE","body":"> > I submitted #4147.\r\n> > ```\r\n> > * Does this mean I can expect correct behavior of CouchDB v3.2.2 on Ubuntu 8.x?  I develop on Mac but our servers are Ubuntu.\r\n> > ```\r\n> \r\n> You can compile CouchDB on a mac by yourself and it should work. For Ubuntu you can use our official installers (Btw. I don't know what you mean with Ubuntu 8.x)\r\n> \r\n> > ```\r\n> > * When can we expect resolution for the Mac installs?  Is there a recommended prior version of CouchDB I can install on our development Macs during the interim?\r\n> > ```\r\n> \r\n> I think, the next released version of CouchDB has a fixed Mac-App. Btw, it's a couchdb release packaged as a mac app (with some UI). As I said, you can build CouchDB by yourself on a Mac or use homebrew.\r\n\r\nHello, because we need the fix of this security issue CVE-2022-24706, I tried to compile by my self on Mac OS 11.6.8 but I got this error: \r\n\r\n```\r\n./apache-couchdb-3.2.2/src/couch/priv/couch_js/1.8.5/main.c\r\n./apache-couchdb-3.2.2/src/couch/priv/couch_js/1.8.5/main.c:23:10: fatal error: 'jsapi.h' file not found\r\n#include <jsapi.h>\r\n         ^~~~~~~~~\r\n1 error generated.\r\nERROR: compile failed while processing ./apache-couchdb-3.2.2/src/couch: rebar_abort\r\nmake: *** [couch] Error 1\r\n```\r\n\r\nDo you know when this bug will be fixed or can you help me to compile couchdb on MacOS?\r\n\r\nThank you","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225442738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225481190","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1225481190","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1225481190,"node_id":"IC_kwDOAAMmUc5JC1vm","user":{"login":"damienlibouton","id":22769410,"node_id":"MDQ6VXNlcjIyNzY5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/22769410?v=4","gravatar_id":"","url":"https://api.github.com/users/damienlibouton","html_url":"https://github.com/damienlibouton","followers_url":"https://api.github.com/users/damienlibouton/followers","following_url":"https://api.github.com/users/damienlibouton/following{/other_user}","gists_url":"https://api.github.com/users/damienlibouton/gists{/gist_id}","starred_url":"https://api.github.com/users/damienlibouton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damienlibouton/subscriptions","organizations_url":"https://api.github.com/users/damienlibouton/orgs","repos_url":"https://api.github.com/users/damienlibouton/repos","events_url":"https://api.github.com/users/damienlibouton/events{/privacy}","received_events_url":"https://api.github.com/users/damienlibouton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T09:41:11Z","updated_at":"2022-08-24T09:41:11Z","author_association":"NONE","body":"FYI, I used also homebrew but the version shipped in, is also broken for MacOS version 10.5 and 11","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225481190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225481652","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1225481652","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1225481652,"node_id":"IC_kwDOAAMmUc5JC120","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T09:41:40Z","updated_at":"2022-08-24T09:41:40Z","author_association":"CONTRIBUTOR","body":"Hi, you need to specify a spidermonkey version.\r\n\r\n1. Install [spidermonkey](https://formulae.brew.sh/formula/spidermonkey) (e.g. 91) via `brew`.\r\n2. See [comment](https://github.com/apache/couchdb/issues/4057#issuecomment-1151044824).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225481652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225493977","html_url":"https://github.com/apache/couchdb/issues/4047#issuecomment-1225493977","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4047","id":1225493977,"node_id":"IC_kwDOAAMmUc5JC43Z","user":{"login":"damienlibouton","id":22769410,"node_id":"MDQ6VXNlcjIyNzY5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/22769410?v=4","gravatar_id":"","url":"https://api.github.com/users/damienlibouton","html_url":"https://github.com/damienlibouton","followers_url":"https://api.github.com/users/damienlibouton/followers","following_url":"https://api.github.com/users/damienlibouton/following{/other_user}","gists_url":"https://api.github.com/users/damienlibouton/gists{/gist_id}","starred_url":"https://api.github.com/users/damienlibouton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damienlibouton/subscriptions","organizations_url":"https://api.github.com/users/damienlibouton/orgs","repos_url":"https://api.github.com/users/damienlibouton/repos","events_url":"https://api.github.com/users/damienlibouton/events{/privacy}","received_events_url":"https://api.github.com/users/damienlibouton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T09:53:16Z","updated_at":"2022-08-24T09:53:16Z","author_association":"NONE","body":"Thank you ! \r\n\r\nWhat I had to do is: \r\n\r\n- `brew install spidermonkey@91`\r\n- in the file config.erl of the src folder, replace `{spidermonkey_version, \"1.8.5\"}.` by `{spidermonkey_version, \"91\"}.`\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225493977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225981194","html_url":"https://github.com/apache/couchdb/issues/4119#issuecomment-1225981194","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4119","id":1225981194,"node_id":"IC_kwDOAAMmUc5JEv0K","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T16:48:51Z","updated_at":"2022-08-24T16:48:51Z","author_association":"CONTRIBUTOR","body":"Closing this, implemented with #4140.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225981194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225985235","html_url":"https://github.com/apache/couchdb/issues/4138#issuecomment-1225985235","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4138","id":1225985235,"node_id":"IC_kwDOAAMmUc5JEwzT","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-08-24T16:52:18Z","updated_at":"2022-08-24T16:52:18Z","author_association":"CONTRIBUTOR","body":"@mattpr ^","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1225985235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]