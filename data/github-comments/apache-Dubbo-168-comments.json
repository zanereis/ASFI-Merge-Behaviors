[{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764555291","html_url":"https://github.com/apache/dubbo/issues/6866#issuecomment-764555291","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6866","id":764555291,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDU1NTI5MQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-21T11:00:27Z","updated_at":"2021-01-21T11:00:27Z","author_association":"CONTRIBUTOR","body":"@xishian 能提供一个 demo 稳定重现你这种场景不？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764555291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764561738","html_url":"https://github.com/apache/dubbo/issues/1784#issuecomment-764561738","issue_url":"https://api.github.com/repos/apache/dubbo/issues/1784","id":764561738,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDU2MTczOA==","user":{"login":"shihuncl","id":21328635,"node_id":"MDQ6VXNlcjIxMzI4NjM1","avatar_url":"https://avatars.githubusercontent.com/u/21328635?v=4","gravatar_id":"","url":"https://api.github.com/users/shihuncl","html_url":"https://github.com/shihuncl","followers_url":"https://api.github.com/users/shihuncl/followers","following_url":"https://api.github.com/users/shihuncl/following{/other_user}","gists_url":"https://api.github.com/users/shihuncl/gists{/gist_id}","starred_url":"https://api.github.com/users/shihuncl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shihuncl/subscriptions","organizations_url":"https://api.github.com/users/shihuncl/orgs","repos_url":"https://api.github.com/users/shihuncl/repos","events_url":"https://api.github.com/users/shihuncl/events{/privacy}","received_events_url":"https://api.github.com/users/shihuncl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-21T11:11:48Z","updated_at":"2021-01-21T11:11:48Z","author_association":"NONE","body":"我想问一下有没有人解决？我们生产也是偶尔的超时，链路监控没有上，希望有碰到过然后解决的出来解答一下。我们线上dubbo线程池满的报错会有，不是因为线程池满报的这个超时","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764561738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764633878","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-764633878","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":764633878,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDYzMzg3OA==","user":{"login":"ethanas","id":12426471,"node_id":"MDQ6VXNlcjEyNDI2NDcx","avatar_url":"https://avatars.githubusercontent.com/u/12426471?v=4","gravatar_id":"","url":"https://api.github.com/users/ethanas","html_url":"https://github.com/ethanas","followers_url":"https://api.github.com/users/ethanas/followers","following_url":"https://api.github.com/users/ethanas/following{/other_user}","gists_url":"https://api.github.com/users/ethanas/gists{/gist_id}","starred_url":"https://api.github.com/users/ethanas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ethanas/subscriptions","organizations_url":"https://api.github.com/users/ethanas/orgs","repos_url":"https://api.github.com/users/ethanas/repos","events_url":"https://api.github.com/users/ethanas/events{/privacy}","received_events_url":"https://api.github.com/users/ethanas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-21T13:13:02Z","updated_at":"2021-01-21T13:28:19Z","author_association":"NONE","body":"萌新初到，抛砖引玉，我debug过类似的情况\r\n\r\n场景：service可能会频繁上下线（同一个服务，所有参数都一样）\r\n\r\n问题定位：我们的服务调用失败的原因是服务没有下线彻底的情况又注册上来。失败的报错一样。为什么调用失败我就不细说了，大概的方位是生产者收到消息后，在serviceMap上没找到调用的key。此错误很容易被容错机制所掩盖。\r\n\r\n提供一个我们的修复思路（给服务上线加个锁），此方法需要用到API暴露服务：\r\n1. 建立支持并发访问的本地服务列表缓存\r\n2. 实现ExporterListener扩展 ，在上线的时候记录上线的host（因为不知道为什么，同一个服务unexported的时候会有多个host不同的unexported事件，其中有个127.0.0.1，为了防止暴露服务的时候选择的host不一样，所以在这个地方记录下用来在unexported的时候判断是否解除上线锁定）。同时给服务放到本地服务列表缓存上（key你可以根据自己的服务来定义一个extra key，同时暴露到url中）。\r\n\r\n3.在下线的时候unexported根据host筛选出已经上线的服务，在服务缓存列表中删除\r\n\r\n4.在服务上线的时候检查该服务是否在缓存中，在的话忽略等待下次处理（因为我们是循环检测，所以服务在下次循环还会被检测到未在缓存中），如果不存在就走正常上线。\r\n\r\nip变化也同理，监听ip的变化，如果变了了给原来的服务彻底下线，然后再上线，就会用最新的ip暴露服务","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764633878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764859766","html_url":"https://github.com/apache/dubbo/pull/7121#issuecomment-764859766","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7121","id":764859766,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NDg1OTc2Ng==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-21T18:48:24Z","updated_at":"2021-02-02T07:45:22Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=h1) Report\n> Merging [#7121](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=desc) (27571a0) into [master](https://codecov.io/gh/apache/dubbo/commit/66e8abc00effbf68c93b68dac04790aa1fd22ede?el=desc) (66e8abc) will **increase** coverage by `0.21%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7121/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7121      +/-   ##\n============================================\n+ Coverage     60.07%   60.29%   +0.21%     \n- Complexity      508      510       +2     \n============================================\n  Files          1028     1028              \n  Lines         41531    41531              \n  Branches       6038     6038              \n============================================\n+ Hits          24951    25040      +89     \n+ Misses        13813    13747      -66     \n+ Partials       2767     2744      -23     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...apache/dubbo/common/extension/ExtensionLoader.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vZXh0ZW5zaW9uL0V4dGVuc2lvbkxvYWRlci5qYXZh) | `75.78% <0.00%> (+0.22%)` | `0.00% <0.00%> (ø%)` | |\n| [...n/java/org/apache/dubbo/common/utils/NetUtils.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdXRpbHMvTmV0VXRpbHMuamF2YQ==) | `66.89% <0.00%> (+0.34%)` | `0.00% <0.00%> (ø%)` | |\n| [...ache/dubbo/config/utils/ConfigValidationUtils.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tY29uZmlnL2R1YmJvLWNvbmZpZy1hcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL2NvbmZpZy91dGlscy9Db25maWdWYWxpZGF0aW9uVXRpbHMuamF2YQ==) | `72.69% <0.00%> (+0.34%)` | `0.00% <0.00%> (ø%)` | |\n| [...figcenter/file/FileSystemDynamicConfiguration.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vY29uZmlnL2NvbmZpZ2NlbnRlci9maWxlL0ZpbGVTeXN0ZW1EeW5hbWljQ29uZmlndXJhdGlvbi5qYXZh) | `62.85% <0.00%> (+0.47%)` | `0.00% <0.00%> (ø%)` | |\n| [...rg/apache/dubbo/common/timer/HashedWheelTimer.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdGltZXIvSGFzaGVkV2hlZWxUaW1lci5qYXZh) | `79.72% <0.00%> (+0.68%)` | `0.00% <0.00%> (ø%)` | |\n| [.../dubbo/remoting/transport/netty4/NettyChannel.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHk0L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvbmV0dHk0L05ldHR5Q2hhbm5lbC5qYXZh) | `67.32% <0.00%> (+0.99%)` | `0.00% <0.00%> (ø%)` | |\n| [...a/org/apache/dubbo/rpc/filter/AccessLogFilter.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tcnBjL2R1YmJvLXJwYy1hcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JwYy9maWx0ZXIvQWNjZXNzTG9nRmlsdGVyLmphdmE=) | `81.33% <0.00%> (+1.33%)` | `0.00% <0.00%> (ø%)` | |\n| [...pache/dubbo/remoting/transport/AbstractClient.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvQWJzdHJhY3RDbGllbnQuamF2YQ==) | `64.38% <0.00%> (+1.36%)` | `0.00% <0.00%> (ø%)` | |\n| [...exchange/support/header/HeaderExchangeHandler.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy9leGNoYW5nZS9zdXBwb3J0L2hlYWRlci9IZWFkZXJFeGNoYW5nZUhhbmRsZXIuamF2YQ==) | `63.71% <0.00%> (+2.65%)` | `0.00% <0.00%> (ø%)` | |\n| [...pache/dubbo/registry/support/AbstractRegistry.java](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9zdXBwb3J0L0Fic3RyYWN0UmVnaXN0cnkuamF2YQ==) | `81.11% <0.00%> (+3.33%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [15 more](https://codecov.io/gh/apache/dubbo/pull/7121/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=footer). Last update [66e8abc...0f9df95](https://codecov.io/gh/apache/dubbo/pull/7121?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/764859766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765113932","html_url":"https://github.com/apache/dubbo/issues/6866#issuecomment-765113932","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6866","id":765113932,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTExMzkzMg==","user":{"login":"xishian","id":13712743,"node_id":"MDQ6VXNlcjEzNzEyNzQz","avatar_url":"https://avatars.githubusercontent.com/u/13712743?v=4","gravatar_id":"","url":"https://api.github.com/users/xishian","html_url":"https://github.com/xishian","followers_url":"https://api.github.com/users/xishian/followers","following_url":"https://api.github.com/users/xishian/following{/other_user}","gists_url":"https://api.github.com/users/xishian/gists{/gist_id}","starred_url":"https://api.github.com/users/xishian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xishian/subscriptions","organizations_url":"https://api.github.com/users/xishian/orgs","repos_url":"https://api.github.com/users/xishian/repos","events_url":"https://api.github.com/users/xishian/events{/privacy}","received_events_url":"https://api.github.com/users/xishian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T04:31:27Z","updated_at":"2021-01-22T04:31:27Z","author_association":"NONE","body":"https://github.com/apache/dubbo/issues/7100\r\n已经解决了","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765113932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765136671","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-765136671","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":765136671,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTEzNjY3MQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T05:35:38Z","updated_at":"2021-01-22T05:35:38Z","author_association":"CONTRIBUTOR","body":"没有下线彻底，又重现注册上来了，这种情况下，应该不会报 no provider 这个错吧？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765136671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765171017","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-765171017","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":765171017,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3MTAxNw==","user":{"login":"ethanas","id":12426471,"node_id":"MDQ6VXNlcjEyNDI2NDcx","avatar_url":"https://avatars.githubusercontent.com/u/12426471?v=4","gravatar_id":"","url":"https://api.github.com/users/ethanas","html_url":"https://github.com/ethanas","followers_url":"https://api.github.com/users/ethanas/followers","following_url":"https://api.github.com/users/ethanas/following{/other_user}","gists_url":"https://api.github.com/users/ethanas/gists{/gist_id}","starred_url":"https://api.github.com/users/ethanas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ethanas/subscriptions","organizations_url":"https://api.github.com/users/ethanas/orgs","repos_url":"https://api.github.com/users/ethanas/repos","events_url":"https://api.github.com/users/ethanas/events{/privacy}","received_events_url":"https://api.github.com/users/ethanas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:34:41Z","updated_at":"2021-01-22T06:37:03Z","author_association":"NONE","body":"> 没有下线彻底，又重现注册上来了，这种情况下，应该不会报 no provider 这个错吧？\r\n\r\n我尽量给您一个重现的例子，我是通过unexport方法实现服务下线，这个方法完全下线需要点时间，我重新new一个一样的ServiceConfig 然后export，交替几次就能重现。不管服务怎么上下线，serviceMap中的数量都保持不变（我debug的时候都是比实际的少），所以在provider端用url key在map中找服务的时候找不到。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765171017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765171425","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765171425","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765171425,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3MTQyNQ==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:35:50Z","updated_at":"2021-01-22T06:48:19Z","author_association":"NONE","body":"[4213](https://github.com/apache/dubbo/issues/4213 )   ， 这个并没有解决问题，或者说， 我理解错了","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765171425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765177016","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765177016","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765177016,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3NzAxNg==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:50:06Z","updated_at":"2021-01-22T06:50:06Z","author_association":"NONE","body":"4213, 问题回复：\r\n\r\n近期，关于升级到2.7.1版本后注册中心（多数是zookeeper）出现重复URL地址数据无法删除的情况，我们持续收到来自社区的issue报告。以下issue是几个典型的异常现象：#3785 #3770 #3920 #4013\r\n\r\n经过问题排查我们定位到了问题的原因：在2.7.1版本中URL地址在zookeeper中被注册为持久persistent节点(2.7.0及之前注册的是临时emperal节点)，这样当server进程异常终止无法进入正常优雅下线流程时，如进程崩溃、强行kill -9等，导致zookeeper已失效持久节点无法清空，最终导致脏数据的出现。\r\n\r\n解决及规避方法：\r\n\r\n上下线过程避免强行终止进程，保证让Dubbo进入优雅停机流程\r\n官方2.7.2版本将会修复此问题，预计在6月初发布\r\n对于已经产生的脏数据，考虑手动或ZK脚本予以清理，但此时要注意严格控制删选条件\r\n2.7.1版本增加配置：<dubbo:provider dynamic=\"true\"/> 或<dubbo:service dynamic=\"true\"/>\r\n\r\n\r\n到2.7.8了，依然没有解决？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765177016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765177515","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-765177515","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":765177515,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3NzUxNQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:51:12Z","updated_at":"2021-01-22T06:51:12Z","author_association":"CONTRIBUTOR","body":"> > 没有下线彻底，又重现注册上来了，这种情况下，应该不会报 no provider 这个错吧？\r\n> \r\n> 我尽量给您一个重现的例子，我是通过unexport方法实现服务下线，这个方法完全下线需要点时间，我重新new一个一样的ServiceConfig 然后export，交替几次就能重现。不管服务怎么上下线，serviceMap中的数量都保持不变（我debug的时候都是比实际的少），所以在provider端用url key在map中找服务的时候找不到。\r\n\r\n好的，感谢，提供一个demo，我这边试下。多试几次的也行，能大概率重现就好。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765177515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765178523","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765178523","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765178523,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3ODUyMw==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:53:14Z","updated_at":"2021-01-22T06:53:14Z","author_association":"NONE","body":"从zookeeper的官方临时节点生命周期，及官方文档来看[Nodes+and+ephemeral+nodes](https://zookeeper.apache.org/doc/r3.2.2/zookeeperOver.html#Nodes+and+ephemeral+nodes)  ，显然不止Dynamic的问题\r\n\r\n**ZooKeeper also has the notion of ephemeral nodes. These znodes exists as long as the session that created the znode is active. When the session ends the znode is deleted. Ephemeral nodes are useful when you want to implement [tbd].**\r\n\r\n\r\n会话结束后，临时节点应该删除呀。\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765178523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765179898","html_url":"https://github.com/apache/dubbo/issues/6324#issuecomment-765179898","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6324","id":765179898,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE3OTg5OA==","user":{"login":"RGaius","id":19511826,"node_id":"MDQ6VXNlcjE5NTExODI2","avatar_url":"https://avatars.githubusercontent.com/u/19511826?v=4","gravatar_id":"","url":"https://api.github.com/users/RGaius","html_url":"https://github.com/RGaius","followers_url":"https://api.github.com/users/RGaius/followers","following_url":"https://api.github.com/users/RGaius/following{/other_user}","gists_url":"https://api.github.com/users/RGaius/gists{/gist_id}","starred_url":"https://api.github.com/users/RGaius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RGaius/subscriptions","organizations_url":"https://api.github.com/users/RGaius/orgs","repos_url":"https://api.github.com/users/RGaius/repos","events_url":"https://api.github.com/users/RGaius/events{/privacy}","received_events_url":"https://api.github.com/users/RGaius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T06:56:46Z","updated_at":"2021-01-22T07:01:18Z","author_association":"NONE","body":"spring-cloud-alibaba ： 2.1.0.RELEASE\r\n\r\n当配置mock为true时，会使用上一次的mock类\r\n`MockInvoker`的`normalizeMock`方法会将mock参数转化为default\r\n![image](https://user-images.githubusercontent.com/19511826/105457295-86815b00-5cc1-11eb-96b7-966774e2060e.png)\r\n后继的getInvoker方法会根据mockService直接从MOCK_MAP中获取到默认mockService类\r\n![image](https://user-images.githubusercontent.com/19511826/105457473-dbbd6c80-5cc1-11eb-8ee2-94bfdce92cd5.png)\r\n\r\n为什么设置成true也会将mock置为默认而不是通过serviceName来获取","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765179898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765186235","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765186235","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765186235,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE4NjIzNQ==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T07:12:29Z","updated_at":"2021-01-22T07:12:29Z","author_association":"NONE","body":"测试临时节点没有问题\r\n```java\r\n@Slf4j\r\npublic class CuratorZookeeperClientTest {\r\n   private static CuratorZookeeperClient zookeeperClient = null;\r\n    /**\r\n     *\r\n     */\r\n    @BeforeClass\r\n    public static void initClient(){\r\n        URL url = new URL(\"zookeeper\",\"127.0.0.1\", 2181);\r\n        zookeeperClient = new CuratorZookeeperClient(url);\r\n        log.info(\"zookeeperClient init done\");\r\n\r\n    }\r\n    /**\r\n     *\r\n     */\r\n    @AfterClass\r\n    public static void closeClient(){\r\n        if(!ObjectUtils.isEmpty(zookeeperClient)){\r\n            zookeeperClient.close();\r\n            log.info(\"zookeeperClient close done\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * https://zookeeper.apache.org/doc/r3.2.2/zookeeperOver.html#Nodes+and+ephemeral+nodes\r\n     */\r\n    @Test\r\n    public void testEphemeral(){\r\n        zookeeperClient.createEphemeral(\"/cherry\");\r\n        log.info(\"zookeeperClient createEphemeral /cherry\");\r\n    }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765186235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765194646","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765194646","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765194646,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTE5NDY0Ng==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T07:25:29Z","updated_at":"2021-01-22T07:25:29Z","author_association":"NONE","body":"是不是没有优雅关机，我是在Idea启动服务，然后关闭。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765194646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765228681","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765228681","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765228681,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTIyODY4MQ==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T08:23:57Z","updated_at":"2021-01-22T08:23:57Z","author_association":"NONE","body":"damn！graceful shutdow， is ok， the problem is slove:\r\n\r\n```\r\n$ curl -X POST localhost:8888/actuator/shutdown\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n100    35    0    35    0     0     56      0 --:--:-- --:--:-- --:--:--    58{\"message\":\"Shutting down, bye...\"}\r\n ```\r\n\r\nhow grace shutodow refer to : https://www.baeldung.com/spring-boot-shutdown;\r\n\r\n\r\nbut use the dubbo-spring-boot-starter:0.1.0, not care the point. ","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765228681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765229703","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765229703","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765229703,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTIyOTcwMw==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T08:26:00Z","updated_at":"2021-01-22T08:26:00Z","author_association":"MEMBER","body":"@AlbumenJ ","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765229703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765231448","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765231448","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765231448,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTIzMTQ0OA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T08:28:52Z","updated_at":"2021-01-22T08:28:52Z","author_association":"NONE","body":"why use the dubbo-spring-boot-starter:0.1.0, not care the point.","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765231448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765243725","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-765243725","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":765243725,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTI0MzcyNQ==","user":{"login":"qiufang1314","id":10683318,"node_id":"MDQ6VXNlcjEwNjgzMzE4","avatar_url":"https://avatars.githubusercontent.com/u/10683318?v=4","gravatar_id":"","url":"https://api.github.com/users/qiufang1314","html_url":"https://github.com/qiufang1314","followers_url":"https://api.github.com/users/qiufang1314/followers","following_url":"https://api.github.com/users/qiufang1314/following{/other_user}","gists_url":"https://api.github.com/users/qiufang1314/gists{/gist_id}","starred_url":"https://api.github.com/users/qiufang1314/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qiufang1314/subscriptions","organizations_url":"https://api.github.com/users/qiufang1314/orgs","repos_url":"https://api.github.com/users/qiufang1314/repos","events_url":"https://api.github.com/users/qiufang1314/events{/privacy}","received_events_url":"https://api.github.com/users/qiufang1314/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T08:49:53Z","updated_at":"2021-01-22T08:49:53Z","author_association":"NONE","body":"> 萌新初到，抛砖引玉，我debug过类似的情况\r\n> \r\n> 场景：service可能会频繁上下线（同一个服务，所有参数都一样）\r\n> \r\n> 问题定位：我们的服务调用失败的原因是服务没有下线彻底的情况又注册上来。失败的报错一样。为什么调用失败我就不细说了，大概的方位是生产者收到消息后，在serviceMap上没找到调用的key。此错误很容易被容错机制所掩盖。\r\n> \r\n> 提供一个我们的修复思路（给服务上线加个锁），此方法需要用到API暴露服务：\r\n> \r\n> 1. 建立支持并发访问的本地服务列表缓存\r\n> 2. 实现ExporterListener扩展 ，在上线的时候记录上线的host（因为不知道为什么，同一个服务unexported的时候会有多个host不同的unexported事件，其中有个127.0.0.1，为了防止暴露服务的时候选择的host不一样，所以在这个地方记录下用来在unexported的时候判断是否解除上线锁定）。同时给服务放到本地服务列表缓存上（key你可以根据自己的服务来定义一个extra key，同时暴露到url中）。\r\n> \r\n> 3.在下线的时候unexported根据host筛选出已经上线的服务，在服务缓存列表中删除\r\n> \r\n> 4.在服务上线的时候检查该服务是否在缓存中，在的话忽略等待下次处理（因为我们是循环检测，所以服务在下次循环还会被检测到未在缓存中），如果不存在就走正常上线。\r\n> \r\n> ip变化也同理，监听ip的变化，如果变了了给原来的服务彻底下线，然后再上线，就会用最新的ip暴露服务\r\n\r\n我们这边也遇到同样的问题，能给下修复代码参考下不","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765243725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765260640","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765260640","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765260640,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTI2MDY0MA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T09:18:40Z","updated_at":"2021-01-22T09:21:27Z","author_association":"NONE","body":"> ### Environment\r\n> * Dubbo version: 2.7.8\r\n> * Operating System version:win10\r\n> * Java version: 1.8\r\n> \r\n> ### information\r\n> 服务重复注册，用的是dububo:2.7.8, spring-boot:2.3.0.RELEASE，我的pom\r\n> \r\n> ```\r\n>    <dependency>\r\n>              <groupId>org.apache.dubbo</groupId>\r\n>              <artifactId>dubbo-spring-boot-starter</artifactId>\r\n>              <version>${dubbo.version}</version>\r\n>          </dependency>\r\n>          <dependency>\r\n>              <groupId>org.apache.dubbo</groupId>\r\n>              <artifactId>dubbo-dependencies-zookeeper</artifactId>\r\n>              <version>${dubbo.version}</version>\r\n>              <type>pom</type>\r\n>              <exclusions>\r\n>                  <exclusion>\r\n>                      <groupId>org.slf4j</groupId>\r\n>                      <artifactId>slf4j-log4j12</artifactId>\r\n>                  </exclusion>\r\n>              </exclusions>\r\n>          </dependency>\r\n> ```\r\n> \r\n> dubbo服务\r\n> \r\n> ```java\r\n> @DubboService(version = \"1.0.0\", validation = \"true\", dynamic = true)\r\n> public class AccountRemoteServiceImpl implements AccountRemoteService {\r\n>     @Autowired\r\n>     AccountBizService accountBizService;\r\n> \r\n>     @Override\r\n>     public Boolean debit(String userId, BigDecimal money) {\r\n>         return  accountBizService.debit(userId, money);\r\n>     }\r\n> }\r\n> ```\r\n> \r\n> 查看zk服务的节点信息，\r\n> ![image](https://user-images.githubusercontent.com/13444558/105453003-4bc7f480-5cba-11eb-8419-c8039332ef19.png)\r\n> \r\n> ip地址一样；\r\n> \r\n> 从[4213](https://github.com/apache/dubbo/issues/4213)来看，同样存在这样的问题？说是dynamic的问题，默认false，则持久路径，true为临时路径，2.7.8为true还是没用。\r\n> DubboService\r\n> ···java\r\n> /**\r\n> * Whether the service is dynamic, default value is true\r\n> */\r\n> boolean dynamic() default true;\r\n> ···\r\n> \r\n> 调试结果：\r\n> \r\n> ![image](https://user-images.githubusercontent.com/13444558/105453852-e248e580-5cbb-11eb-97c6-499124e3da88.png)\r\n> \r\n> 临时节点，在连接断开后，zk会自动删除， 这不应该呀！\r\n> \r\n> 我们dubbo版本为2.6.9,dubbo-boot：0.2.1.RELEASE，spring-boot:2.1..RELEASE 存在同样的问题，重复注册？\r\n> pom\r\n> \r\n> ```\r\n> <!--0.2.1.RELEASE start-->\r\n>         <dependency>\r\n>             <groupId>com.alibaba.boot</groupId>\r\n>             <artifactId>dubbo-spring-boot-starter</artifactId>\r\n>             <version>${alibaba.boot.dubbo.springboot.starter}</version>\r\n>         </dependency>\r\n>         <dependency>\r\n>             <groupId>com.alibaba</groupId>\r\n>             <artifactId>dubbo</artifactId>\r\n>             <version>${dubbo.version}</version>\r\n>         </dependency>\r\n>         <dependency>\r\n>             <groupId>org.apache.curator</groupId>\r\n>             <artifactId>curator-framework</artifactId>\r\n>             <version>2.8.0</version>\r\n>             <exclusions>\r\n>                 <exclusion>\r\n>                     <groupId>com.google.guava</groupId>\r\n>                     <artifactId>guava</artifactId>\r\n>                 </exclusion>\r\n>             </exclusions>\r\n>         </dependency>\r\n>         <dependency>\r\n>             <groupId>org.apache.curator</groupId>\r\n>             <artifactId>curator-recipes</artifactId>\r\n>             <version>2.8.0</version>\r\n>         </dependency>\r\n>         <dependency>\r\n>             <groupId>io.netty</groupId>\r\n>             <artifactId>netty-all</artifactId>\r\n>             <version>4.1.15.Final</version>\r\n>         </dependency>\r\n>         <!--0.2.1.RELEASE end-->\r\n> ```\r\n> \r\n> dubbo 服务\r\n> \r\n> ```\r\n> @Service(version = \"1.0.0\", validation = \"true\", dynamic = true)\r\n> public class AccountRemoteServiceImpl implements AccountRemoteService {\r\n>     @Autowired\r\n>     AccountBizService accountBizService;\r\n> \r\n>     @Override\r\n>     public Boolean debit(String userId, BigDecimal money) {\r\n>         return  accountBizService.debit(userId, money);\r\n>     }\r\n> }\r\n> ```\r\n> \r\n> 然而注解service为false\r\n> \r\n> ```\r\n> public @interface Service {\r\n> ...\r\n>  boolean dynamic() default false;\r\n> ...\r\n> }\r\n> ```\r\n> \r\n> dynamic 为false还是有；\r\n> \r\n> 从这两个例子来看，跟dynamic 无关。\r\n> \r\n> 这是一个问题，另外我想问一下，服务节点路径的timestamp 是做什么用了\r\n> \r\n> ```\r\n> /dubbo/com.story.home.cherry.api.domain.account.service.AccountRemoteService/providers/dubbo%3A%2F%2F10.242.214.156%3A20880%2Fcom.story.home.cherry.api.domain.account.service.AccountRemoteService%3Fanyhost%3Dtrue%26application%3Dcomosus-cherry%26deprecated%3Dfalse%26dubbo%3D2.0.2%26dynamic%3Dtrue%26generic%3Dfalse%26interface%3Dcom.story.home.cherry.api.domain.account.service.AccountRemoteService%26metadata-type%3Dremote%26methods%3Ddebit%26pid%3D14688%26release%3D2.7.8%26retries%3D0%26revision%3D1.0.0%26service.filter%3DelapsedTimeFilter%26side%3Dprovider%26threads%3D400%26timeout%3D6000000%26timestamp%3D1611295886073%26version%3D1.0.0\r\n> ```\r\n> \r\n> 去掉timestamp，是不是，就保持一个节点了, 但这不是根本问题。\r\n\r\n\r\n加载注册器是会放入时间戳\r\n```java\r\nprotected List<URL> loadRegistries(boolean provider) {\r\n        checkRegistry();\r\n        List<URL> registryList = new ArrayList<URL>();\r\n        if (registries != null && !registries.isEmpty()) {\r\n            for (RegistryConfig config : registries) {\r\n                String address = config.getAddress();\r\n                if (address == null || address.length() == 0) {\r\n                    address = Constants.ANYHOST_VALUE;\r\n                }\r\n                String sysaddress = System.getProperty(\"dubbo.registry.address\");\r\n                if (sysaddress != null && sysaddress.length() > 0) {\r\n                    address = sysaddress;\r\n                }\r\n                if (address.length() > 0 && !RegistryConfig.NO_AVAILABLE.equalsIgnoreCase(address)) {\r\n                    Map<String, String> map = new HashMap<String, String>();\r\n                    appendParameters(map, application);\r\n                    appendParameters(map, config);\r\n                    map.put(\"path\", RegistryService.class.getName());\r\n                    map.put(\"dubbo\", Version.getProtocolVersion());\r\n                    map.put(Constants.TIMESTAMP_KEY, String.valueOf(System.currentTimeMillis()));\r\n...\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765260640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765261260","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765261260","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765261260,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTI2MTI2MA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T09:19:37Z","updated_at":"2021-01-22T09:19:37Z","author_association":"NONE","body":"> why use the dubbo-spring-boot-starter:0.1.0, not care the point.\r\n\r\nwait to solve?","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765261260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765301904","html_url":"https://github.com/apache/dubbo/issues/7117#issuecomment-765301904","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7117","id":765301904,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTMwMTkwNA==","user":{"login":"gfgfggf1988","id":16377180,"node_id":"MDQ6VXNlcjE2Mzc3MTgw","avatar_url":"https://avatars.githubusercontent.com/u/16377180?v=4","gravatar_id":"","url":"https://api.github.com/users/gfgfggf1988","html_url":"https://github.com/gfgfggf1988","followers_url":"https://api.github.com/users/gfgfggf1988/followers","following_url":"https://api.github.com/users/gfgfggf1988/following{/other_user}","gists_url":"https://api.github.com/users/gfgfggf1988/gists{/gist_id}","starred_url":"https://api.github.com/users/gfgfggf1988/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gfgfggf1988/subscriptions","organizations_url":"https://api.github.com/users/gfgfggf1988/orgs","repos_url":"https://api.github.com/users/gfgfggf1988/repos","events_url":"https://api.github.com/users/gfgfggf1988/events{/privacy}","received_events_url":"https://api.github.com/users/gfgfggf1988/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T10:18:25Z","updated_at":"2021-01-22T10:18:25Z","author_association":"NONE","body":"> 能否麻烦发一个可以复现的工程上来呢\r\n\r\n咋样  能用么？找到问题了么？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765301904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765379288","html_url":"https://github.com/apache/dubbo/pull/7126#issuecomment-765379288","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7126","id":765379288,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTM3OTI4OA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T12:56:28Z","updated_at":"2021-03-25T16:14:24Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=h1) Report\n> Merging [#7126](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=desc) (242e5b7) into [master](https://codecov.io/gh/apache/dubbo/commit/27571a094e668aa87797d11283ab9f0ba383b3c3?el=desc) (27571a0) will **decrease** coverage by `1.25%`.\n> The diff coverage is `78.94%`.\n\n> :exclamation: Current head 242e5b7 differs from pull request most recent head 24e3af0. Consider uploading reports for the commit 24e3af0 to get more accurate results\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7126/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7126      +/-   ##\n============================================\n- Coverage     60.32%   59.06%   -1.26%     \n+ Complexity      510      502       -8     \n============================================\n  Files          1028     1073      +45     \n  Lines         41531    43137    +1606     \n  Branches       6038     6287     +249     \n============================================\n+ Hits          25052    25481     +429     \n- Misses        13737    14823    +1086     \n- Partials       2742     2833      +91     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...he/dubbo/registry/zookeeper/ZookeeperRegistry.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktem9va2VlcGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS96b29rZWVwZXIvWm9va2VlcGVyUmVnaXN0cnkuamF2YQ==) | `59.87% <78.94%> (+2.05%)` | `0.00 <0.00> (ø)` | |\n| [...che/dubbo/rpc/cluster/support/FailfastCluster.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tY2x1c3Rlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vcnBjL2NsdXN0ZXIvc3VwcG9ydC9GYWlsZmFzdENsdXN0ZXIuamF2YQ==) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...java/org/apache/dubbo/remoting/etcd/Constants.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctZXRjZDMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL2V0Y2QvQ29uc3RhbnRzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...metadata/store/etcd/EtcdMetadataReportFactory.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtcmVwb3J0LWV0Y2Qvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL21ldGFkYXRhL3N0b3JlL2V0Y2QvRXRjZE1ldGFkYXRhUmVwb3J0RmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [.../apache/dubbo/registry/consul/ConsulParameter.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsUGFyYW1ldGVyLmphdmE=) | `0.00% <0.00%> (-88.89%)` | `0.00% <0.00%> (-6.00%)` | |\n| [.../apache/dubbo/remoting/etcd/jetcd/RetryNTimes.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctZXRjZDMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL2V0Y2QvamV0Y2QvUmV0cnlOVGltZXMuamF2YQ==) | `0.00% <0.00%> (-75.00%)` | `0.00% <0.00%> (ø%)` | |\n| [.../dubbo/metadata/store/etcd/EtcdMetadataReport.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtcmVwb3J0LWV0Y2Qvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL21ldGFkYXRhL3N0b3JlL2V0Y2QvRXRjZE1ldGFkYXRhUmVwb3J0LmphdmE=) | `0.00% <0.00%> (-65.79%)` | `0.00% <0.00%> (-13.00%)` | |\n| [.../dubbo/registry/consul/ConsulServiceDiscovery.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsU2VydmljZURpc2NvdmVyeS5qYXZh) | `0.00% <0.00%> (-62.19%)` | `0.00% <0.00%> (-25.00%)` | |\n| [.../identifier/BaseApplicationMetadataIdentifier.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9tZXRhZGF0YS9yZXBvcnQvaWRlbnRpZmllci9CYXNlQXBwbGljYXRpb25NZXRhZGF0YUlkZW50aWZpZXIuamF2YQ==) | `7.14% <0.00%> (-57.15%)` | `0.00% <0.00%> (ø%)` | |\n| [...a/org/apache/dubbo/rpc/filter/AccessLogFilter.java](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree#diff-ZHViYm8tcnBjL2R1YmJvLXJwYy1hcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JwYy9maWx0ZXIvQWNjZXNzTG9nRmlsdGVyLmphdmE=) | `26.86% <0.00%> (-54.47%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [249 more](https://codecov.io/gh/apache/dubbo/pull/7126/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=footer). Last update [27571a0...24e3af0](https://codecov.io/gh/apache/dubbo/pull/7126?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765379288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765421142","html_url":"https://github.com/apache/dubbo/issues/7117#issuecomment-765421142","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7117","id":765421142,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTQyMTE0Mg==","user":{"login":"kevinw66","id":31196226,"node_id":"MDQ6VXNlcjMxMTk2MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31196226?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinw66","html_url":"https://github.com/kevinw66","followers_url":"https://api.github.com/users/kevinw66/followers","following_url":"https://api.github.com/users/kevinw66/following{/other_user}","gists_url":"https://api.github.com/users/kevinw66/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinw66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinw66/subscriptions","organizations_url":"https://api.github.com/users/kevinw66/orgs","repos_url":"https://api.github.com/users/kevinw66/repos","events_url":"https://api.github.com/users/kevinw66/events{/privacy}","received_events_url":"https://api.github.com/users/kevinw66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T14:05:04Z","updated_at":"2021-01-22T14:05:04Z","author_association":"CONTRIBUTOR","body":"> > 能否麻烦发一个可以复现的工程上来呢\r\n> \r\n> 咋样 能用么？找到问题了么？\r\n\r\n我周末看看","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765421142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765633776","html_url":"https://github.com/apache/dubbo/issues/7127#issuecomment-765633776","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7127","id":765633776,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTYzMzc3Ng==","user":{"login":"nogeek-cn","id":37619525,"node_id":"MDQ6VXNlcjM3NjE5NTI1","avatar_url":"https://avatars.githubusercontent.com/u/37619525?v=4","gravatar_id":"","url":"https://api.github.com/users/nogeek-cn","html_url":"https://github.com/nogeek-cn","followers_url":"https://api.github.com/users/nogeek-cn/followers","following_url":"https://api.github.com/users/nogeek-cn/following{/other_user}","gists_url":"https://api.github.com/users/nogeek-cn/gists{/gist_id}","starred_url":"https://api.github.com/users/nogeek-cn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nogeek-cn/subscriptions","organizations_url":"https://api.github.com/users/nogeek-cn/orgs","repos_url":"https://api.github.com/users/nogeek-cn/repos","events_url":"https://api.github.com/users/nogeek-cn/events{/privacy}","received_events_url":"https://api.github.com/users/nogeek-cn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-22T19:24:40Z","updated_at":"2021-01-22T19:33:55Z","author_association":"NONE","body":"- Now I suddenly came up with a good idea。TO clean Clean up expired classes in the project\r\n\r\n## TODO\r\n\r\n- Added a new project name called `dubbo-adapter`\r\n  - the `dubbo-adapter` Provides support for expired classes ，example:\r\n    - `@Service` convert to `@DubboService` \r\n    - `@Reference` convert to `@DubboReference` \r\n    - `ServiceClassPostProcessor` support to `@Service` 、`@Reference` \r\n\r\n- These expired classes can be removed from the `dubbo` project\r\n  - if users want to upgrade the new version and don't want to change your code。must be add the `dubbo-adapter` GAV。\r\n  - `Dubbo` Engineering only provides the new class : `DubboServiceClassPostProcessor` \r\n\r\n- `dubbo` project  `project.version` ==  `dubbo-adapter` project `project.version` \r\n\r\n\r\n\r\n##  Feature\r\n\r\n- the `dubbo` project add new Feature and it does not contain expired classes\r\n- the `dubbo-adapter` project Provides adaptive functionality for `dubbo` users to upgrade the new version and don't want to change old code。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765633776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765814590","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-765814590","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":765814590,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTgxNDU5MA==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T01:52:32Z","updated_at":"2021-01-23T01:52:32Z","author_association":"CONTRIBUTOR","body":"能提供一个稳定重现的例子不？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765814590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765837357","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765837357","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765837357,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTgzNzM1Nw==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T02:57:19Z","updated_at":"2021-01-23T02:57:19Z","author_association":"CONTRIBUTOR","body":"@horizonzy Lock lock = notifyLocks.computeIfAbsent(url.getServiceInterface(), k -> new ReentrantLock());\r\n建议这里以 url 为维度进行加锁。存在这么两种场景：\r\n1.服务端提供不同版本的服务\r\n2.服务端多机部署\r\n这两种场景下，都将被阻塞。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765837357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765851811","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-765851811","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":765851811,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg1MTgxMQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T03:24:47Z","updated_at":"2021-01-23T05:56:02Z","author_association":"CONTRIBUTOR","body":"按照这个修复的看下：https://github.com/apache/dubbo/pull/7126/commits/d731a0c0c6362bcc8499727b3239f878a960d67b\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765851811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765852545","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765852545","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765852545,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg1MjU0NQ==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T03:30:20Z","updated_at":"2021-01-23T03:30:20Z","author_association":"MEMBER","body":"> @horizonzy Lock lock = notifyLocks.computeIfAbsent(url.getServiceInterface(), k -> new ReentrantLock());\r\n> 建议这里以 url 为维度进行加锁。存在这么两种场景：\r\n> 1.服务端提供不同版本的服务\r\n> 2.服务端多机部署\r\n> 这两种场景下，都将被阻塞。\r\n\r\n这个探讨一下呢。我的理解是去订阅时都是订阅的是某个service下的节点，至于版本，只是节点的一个属性值。服务端多机器部署，也只是多一些节点而已。这些应该是service之下的一个层面，加锁的目的应该是上面的一个层面，获取某个service下的`providers, router, configuators` 的节点去进行通知而已。所以我这里使用的是service级别","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765852545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765859334","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765859334","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765859334,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg1OTMzNA==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T03:51:11Z","updated_at":"2021-01-23T03:51:27Z","author_association":"CONTRIBUTOR","body":"> > @horizonzy Lock lock = notifyLocks.computeIfAbsent(url.getServiceInterface(), k -> new ReentrantLock());\r\n> > 建议这里以 url 为维度进行加锁。存在这么两种场景：\r\n> > 1.服务端提供不同版本的服务\r\n> > 2.服务端多机部署\r\n> > 这两种场景下，都将被阻塞。\r\n> \r\n> 这个探讨一下呢。我的理解是去订阅时都是订阅的是某个service下的节点，至于版本，只是节点的一个属性值。服务端多机器部署，也只是多一些节点而已。这些应该是service之下的一个层面，加锁的目的应该是上面的一个层面，获取某个service下的`providers, router, configuators` 的节点去进行通知而已。所以我这里使用的是service级别\r\n\r\n我理解的是订阅的 providers 节点，比如说现在 providers 下存在一个 ip 为 192.168.0.1 的节点，此时会调用 notify. 如果突然新增了一个 192.168.0.2 的节点，此时也会调用 notify 方法，这时候，我理解的这两个可以同时进行刷新，不需要基于 service 维度进行阻塞。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765859334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765861126","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765861126","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765861126,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg2MTEyNg==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T04:02:13Z","updated_at":"2021-01-23T05:12:22Z","author_association":"MEMBER","body":"我理解你的意思了。正常的通知通过org.apache.dubbo.remoting.zookeeper.curator.CuratorZookeeperClient.CuratorWatcherImpl#process进行通知，只会存在一个订阅者，线程都是同一个，这里的lock可以重入，不会进行阻塞。\r\n\r\n互斥的是FailedSubscribeTask的doSubscibe()和org.apache.dubbo.remoting.zookeeper.curator.CuratorZookeeperClient.CuratorWatcherImpl#process。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765861126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765868344","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765868344","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765868344,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg2ODM0NA==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T05:06:37Z","updated_at":"2021-01-23T05:06:37Z","author_association":"MEMBER","body":"> > > @horizonzy Lock lock = notifyLocks.computeIfAbsent(url.getServiceInterface(), k -> new ReentrantLock());\r\n> > > 建议这里以 url 为维度进行加锁。存在这么两种场景：\r\n> > > 1.服务端提供不同版本的服务\r\n> > > 2.服务端多机部署\r\n> > > 这两种场景下，都将被阻塞。\r\n> > \r\n> > \r\n> > 这个探讨一下呢。我的理解是去订阅时都是订阅的是某个service下的节点，至于版本，只是节点的一个属性值。服务端多机器部署，也只是多一些节点而已。这些应该是service之下的一个层面，加锁的目的应该是上面的一个层面，获取某个service下的`providers, router, configuators` 的节点去进行通知而已。所以我这里使用的是service级别\r\n> \r\n> 我理解的是订阅的 providers 节点，比如说现在 providers 下存在一个 ip 为 192.168.0.1 的节点，此时会调用 notify. 如果突然新增了一个 192.168.0.2 的节点，此时也会调用 notify 方法，这时候，我理解的这两个可以同时进行刷新，不需要基于 service 维度进行阻塞。\r\n\r\n重新确认了一下，process那里可能不是同一个线程，这块是Zookeeper的EventThread线程，会有你说的那个问题。同一个service的两次通知需要同步阻塞。\r\n不过现在对RegistryDirectory的notify那里已经是同步的了。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765868344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765869381","html_url":"https://github.com/apache/dubbo/issues/7117#issuecomment-765869381","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7117","id":765869381,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg2OTM4MQ==","user":{"login":"kevinw66","id":31196226,"node_id":"MDQ6VXNlcjMxMTk2MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31196226?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinw66","html_url":"https://github.com/kevinw66","followers_url":"https://api.github.com/users/kevinw66/followers","following_url":"https://api.github.com/users/kevinw66/following{/other_user}","gists_url":"https://api.github.com/users/kevinw66/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinw66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinw66/subscriptions","organizations_url":"https://api.github.com/users/kevinw66/orgs","repos_url":"https://api.github.com/users/kevinw66/repos","events_url":"https://api.github.com/users/kevinw66/events{/privacy}","received_events_url":"https://api.github.com/users/kevinw66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T05:16:29Z","updated_at":"2021-01-23T05:16:29Z","author_association":"CONTRIBUTOR","body":"Spring Cloud工程的话建议直接使用spring-cloud-starter-dubbo\r\n文档参考这里[《Spring Cloud Alibaba 分布式服务调用》](https://start.aliyun.com/article/sca7lesson/rpc)\r\npom文件参考这个\r\n```xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n  <modelVersion>4.0.0</modelVersion>\r\n  <groupId>com.example</groupId>\r\n  <artifactId>demo4</artifactId>\r\n  <version>0.0.1-SNAPSHOT</version>\r\n  <name>demo4</name>\r\n  <description>Demo project for Spring Boot</description>\r\n  <properties>\r\n    <java.version>1.8</java.version>\r\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\r\n    <spring-boot.version>2.3.7.RELEASE</spring-boot.version>\r\n    <spring-cloud-alibaba.version>2.2.4.RELEASE</spring-cloud-alibaba.version>\r\n    <spring-cloud.version>Hoxton.SR9</spring-cloud.version>\r\n  </properties>\r\n\r\n  <dependencyManagement>\r\n    <dependencies>\r\n      <dependency>\r\n        <groupId>org.springframework.cloud</groupId>\r\n        <artifactId>spring-cloud-dependencies</artifactId>\r\n        <version>${spring-cloud.version}</version>\r\n        <type>pom</type>\r\n        <scope>import</scope>\r\n      </dependency>\r\n      <dependency>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-dependencies</artifactId>\r\n        <version>${spring-boot.version}</version>\r\n        <type>pom</type>\r\n        <scope>import</scope>\r\n      </dependency>\r\n      <dependency>\r\n        <groupId>com.alibaba.cloud</groupId>\r\n        <artifactId>spring-cloud-alibaba-dependencies</artifactId>\r\n        <version>${spring-cloud-alibaba.version}</version>\r\n        <type>pom</type>\r\n        <scope>import</scope>\r\n      </dependency>\r\n    </dependencies>\r\n  </dependencyManagement>\r\n\r\n  <dependencies>\r\n    <dependency>\r\n      <groupId>org.springframework.boot</groupId>\r\n      <artifactId>spring-boot-starter-web</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>org.springframework.boot</groupId>\r\n      <artifactId>spring-boot-configuration-processor</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>org.apache.commons</groupId>\r\n      <artifactId>commons-lang3</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>org.springframework.boot</groupId>\r\n      <artifactId>spring-boot-starter-test</artifactId>\r\n      <scope>test</scope>\r\n    </dependency>\r\n\r\n    <dependency>\r\n      <groupId>com.alibaba.cloud</groupId>\r\n      <artifactId>spring-cloud-starter-dubbo</artifactId>\r\n    </dependency>\r\n\r\n    <dependency>\r\n      <groupId>com.alibaba.cloud</groupId>\r\n      <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\r\n    </dependency>\r\n    <dependency>\r\n      <groupId>com.alibaba.cloud</groupId>\r\n      <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\r\n    </dependency>\r\n\r\n    <dependency>\r\n      <groupId>org.springframework.cloud</groupId>\r\n      <artifactId>spring-cloud-starter-zipkin</artifactId>\r\n    </dependency>\r\n  </dependencies>\r\n\r\n  <build>\r\n    <finalName>gf-test</finalName>\r\n    <resources>\r\n      <resource>\r\n        <directory>src/main/resources</directory>\r\n        <filtering>true</filtering>\r\n        <includes>\r\n          <include>**/*.yml</include>\r\n          <include>**/*.xml</include>\r\n        </includes>\r\n      </resource>\r\n    </resources>\r\n    <plugins>\r\n      <plugin>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-maven-plugin</artifactId>\r\n      </plugin>\r\n    </plugins>\r\n  </build>\r\n\r\n</project>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765869381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765873531","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765873531","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765873531,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg3MzUzMQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T05:55:22Z","updated_at":"2021-01-23T05:55:22Z","author_association":"CONTRIBUTOR","body":"> > > > @horizonzy Lock lock = notifyLocks.computeIfAbsent(url.getServiceInterface(), k -> new ReentrantLock());\r\n> > > > 建议这里以 url 为维度进行加锁。存在这么两种场景：\r\n> > > > 1.服务端提供不同版本的服务\r\n> > > > 2.服务端多机部署\r\n> > > > 这两种场景下，都将被阻塞。\r\n> > > \r\n> > > \r\n> > > 这个探讨一下呢。我的理解是去订阅时都是订阅的是某个service下的节点，至于版本，只是节点的一个属性值。服务端多机器部署，也只是多一些节点而已。这些应该是service之下的一个层面，加锁的目的应该是上面的一个层面，获取某个service下的`providers, router, configuators` 的节点去进行通知而已。所以我这里使用的是service级别\r\n> > \r\n> > \r\n> > 我理解的是订阅的 providers 节点，比如说现在 providers 下存在一个 ip 为 192.168.0.1 的节点，此时会调用 notify. 如果突然新增了一个 192.168.0.2 的节点，此时也会调用 notify 方法，这时候，我理解的这两个可以同时进行刷新，不需要基于 service 维度进行阻塞。\r\n> \r\n> 重新确认了一下，process那里可能不是同一个线程，这块是Zookeeper的EventThread线程，会有你说的那个问题。同一个service的两次通知需要同步阻塞。\r\n> 不过现在对RegistryDirectory的notify那里已经是同步的了。\r\n\r\n嗯嗯，我刚看了下，确实是，那就没啥问题了。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765873531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765874463","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765874463","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765874463,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg3NDQ2Mw==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T06:03:50Z","updated_at":"2021-01-23T06:04:13Z","author_association":"CONTRIBUTOR","body":"顺便在提一个，zk 的通知顺序 dubbo 中有保证吗？比如我先创建了一个节点，会触发一次通知，再创建一个节点，又会触发一次通知，此时如何保证第一次的通知先于第二次的通知？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765874463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765875045","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765875045","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765875045,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg3NTA0NQ==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T06:08:18Z","updated_at":"2021-01-23T06:08:18Z","author_association":"MEMBER","body":"> 顺便在提一个，zk 的通知顺序 dubbo 中有保证吗？比如我先创建了一个节点，会触发一次通知，再创建一个节点，又会触发一次通知，此时如何保证第一次的通知先于第二次的通知？\r\n\r\n先通知变更，再查询。再拿查询的结果进行通知。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765875045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765876077","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-765876077","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":765876077,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg3NjA3Nw==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T06:17:58Z","updated_at":"2021-01-23T06:17:58Z","author_association":"CONTRIBUTOR","body":"明白了，感谢。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765876077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765881865","html_url":"https://github.com/apache/dubbo/issues/6714#issuecomment-765881865","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6714","id":765881865,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NTg4MTg2NQ==","user":{"login":"pipiguai11","id":53388677,"node_id":"MDQ6VXNlcjUzMzg4Njc3","avatar_url":"https://avatars.githubusercontent.com/u/53388677?v=4","gravatar_id":"","url":"https://api.github.com/users/pipiguai11","html_url":"https://github.com/pipiguai11","followers_url":"https://api.github.com/users/pipiguai11/followers","following_url":"https://api.github.com/users/pipiguai11/following{/other_user}","gists_url":"https://api.github.com/users/pipiguai11/gists{/gist_id}","starred_url":"https://api.github.com/users/pipiguai11/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pipiguai11/subscriptions","organizations_url":"https://api.github.com/users/pipiguai11/orgs","repos_url":"https://api.github.com/users/pipiguai11/repos","events_url":"https://api.github.com/users/pipiguai11/events{/privacy}","received_events_url":"https://api.github.com/users/pipiguai11/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-23T07:19:33Z","updated_at":"2021-01-23T07:19:33Z","author_association":"NONE","body":"你是debug启动的吗？看看你是不是在方法名上打了个断点","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/765881865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766296420","html_url":"https://github.com/apache/dubbo/issues/7128#issuecomment-766296420","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7128","id":766296420,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjI5NjQyMA==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T05:44:44Z","updated_at":"2021-01-24T05:44:44Z","author_association":"CONTRIBUTOR","body":"我理解的是这个和 dubbo 没有关系，这个和最终的对象结果输出有关。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766296420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766303659","html_url":"https://github.com/apache/dubbo/pull/6511#issuecomment-766303659","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6511","id":766303659,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjMwMzY1OQ==","user":{"login":"MentosL","id":33775732,"node_id":"MDQ6VXNlcjMzNzc1NzMy","avatar_url":"https://avatars.githubusercontent.com/u/33775732?v=4","gravatar_id":"","url":"https://api.github.com/users/MentosL","html_url":"https://github.com/MentosL","followers_url":"https://api.github.com/users/MentosL/followers","following_url":"https://api.github.com/users/MentosL/following{/other_user}","gists_url":"https://api.github.com/users/MentosL/gists{/gist_id}","starred_url":"https://api.github.com/users/MentosL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MentosL/subscriptions","organizations_url":"https://api.github.com/users/MentosL/orgs","repos_url":"https://api.github.com/users/MentosL/repos","events_url":"https://api.github.com/users/MentosL/events{/privacy}","received_events_url":"https://api.github.com/users/MentosL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T07:11:15Z","updated_at":"2021-01-24T07:11:15Z","author_association":"CONTRIBUTOR","body":"我有个疑问：在2.7.8版本中，为何自动配置注入方法registerCommonBeans 需要执行两次，我也看到之前的issue中说重复注入的问题，目前虽说启动是没有问题的。但是不理解为何需要执行两次的registerCommonBeans。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766303659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766359059","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-766359059","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":766359059,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjM1OTA1OQ==","user":{"login":"kevinw66","id":31196226,"node_id":"MDQ6VXNlcjMxMTk2MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31196226?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinw66","html_url":"https://github.com/kevinw66","followers_url":"https://api.github.com/users/kevinw66/followers","following_url":"https://api.github.com/users/kevinw66/following{/other_user}","gists_url":"https://api.github.com/users/kevinw66/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinw66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinw66/subscriptions","organizations_url":"https://api.github.com/users/kevinw66/orgs","repos_url":"https://api.github.com/users/kevinw66/repos","events_url":"https://api.github.com/users/kevinw66/events{/privacy}","received_events_url":"https://api.github.com/users/kevinw66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T14:42:38Z","updated_at":"2021-01-24T14:47:45Z","author_association":"CONTRIBUTOR","body":"不是很理解这块改动，既然RegistryDirectory的notify已经是同步了，还需要这锁吗？并且Zookeeper的通知是会被client的watcher阻塞的，如果你在notify里加个Thread.sleep(60*1000)，你会发现zookeeper的第二个通知会等到第一个执行完成后才到来，这个ReentrantLock还需要吗？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766359059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766359766","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-766359766","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":766359766,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjM1OTc2Ng==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T14:47:23Z","updated_at":"2021-01-24T14:47:23Z","author_association":"MEMBER","body":"RegistryDirectory的同步是refreshinvokers流程中比较靠后的了。这里的同步是为了同步FailedSubscribeTask中的doSubscribe和CuratorWatcher的process。 \r\n\r\nFailedSubscribeTask主动去拉的zk时，还没有节点。 CuratorWatcher通知到来去拉的时候，有zk节点。但是CuratorWatcher的notify先于FailedSubscribeTask的notify执行了。导致最终的invokers被清空。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766359766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766360021","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-766360021","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":766360021,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjM2MDAyMQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T14:49:21Z","updated_at":"2021-01-24T14:49:21Z","author_association":"CONTRIBUTOR","body":"我的理解是要保证在多线程环境下，获取变化集合和通知是原子操作。\r\n比如现在 zk 挂掉了，那么会有定时任务重新注册和订阅。假设注册还没有完成，获取到的集合为空，在执行 notify 之前，记为A，provider 注册到了zk，这时候也会获取到变化的集合，然后执行通知(有节点信息)，这时候会创建 invoker。再回到A，接着执行 notify，会将创建 invoker 销毁掉。\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766360021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766371279","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-766371279","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":766371279,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjM3MTI3OQ==","user":{"login":"kevinw66","id":31196226,"node_id":"MDQ6VXNlcjMxMTk2MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31196226?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinw66","html_url":"https://github.com/kevinw66","followers_url":"https://api.github.com/users/kevinw66/followers","following_url":"https://api.github.com/users/kevinw66/following{/other_user}","gists_url":"https://api.github.com/users/kevinw66/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinw66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinw66/subscriptions","organizations_url":"https://api.github.com/users/kevinw66/orgs","repos_url":"https://api.github.com/users/kevinw66/repos","events_url":"https://api.github.com/users/kevinw66/events{/privacy}","received_events_url":"https://api.github.com/users/kevinw66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T15:50:03Z","updated_at":"2021-01-24T15:50:03Z","author_association":"CONTRIBUTOR","body":"我测了一下zk挂掉重启，并没有走ZookeeperRegistry的notify，只走了FailedSubscribeTask的doSubscribe唉？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766371279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766372709","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-766372709","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":766372709,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjM3MjcwOQ==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T15:59:51Z","updated_at":"2021-01-24T15:59:51Z","author_association":"MEMBER","body":"多试几次呢。provivder节点在zk重新连接后，会重新注册的，这个时候在consumer的zk重连订阅后，会收到通知","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766372709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766373202","html_url":"https://github.com/apache/dubbo/issues/7125#issuecomment-766373202","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7125","id":766373202,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjM3MzIwMg==","user":{"login":"kevinw66","id":31196226,"node_id":"MDQ6VXNlcjMxMTk2MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31196226?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinw66","html_url":"https://github.com/kevinw66","followers_url":"https://api.github.com/users/kevinw66/followers","following_url":"https://api.github.com/users/kevinw66/following{/other_user}","gists_url":"https://api.github.com/users/kevinw66/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinw66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinw66/subscriptions","organizations_url":"https://api.github.com/users/kevinw66/orgs","repos_url":"https://api.github.com/users/kevinw66/repos","events_url":"https://api.github.com/users/kevinw66/events{/privacy}","received_events_url":"https://api.github.com/users/kevinw66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-24T16:02:41Z","updated_at":"2021-01-24T16:02:41Z","author_association":"CONTRIBUTOR","body":"好的 感谢，我仔细看看","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766373202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766485069","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-766485069","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":766485069,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ4NTA2OQ==","user":{"login":"qiufang1314","id":10683318,"node_id":"MDQ6VXNlcjEwNjgzMzE4","avatar_url":"https://avatars.githubusercontent.com/u/10683318?v=4","gravatar_id":"","url":"https://api.github.com/users/qiufang1314","html_url":"https://github.com/qiufang1314","followers_url":"https://api.github.com/users/qiufang1314/followers","following_url":"https://api.github.com/users/qiufang1314/following{/other_user}","gists_url":"https://api.github.com/users/qiufang1314/gists{/gist_id}","starred_url":"https://api.github.com/users/qiufang1314/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qiufang1314/subscriptions","organizations_url":"https://api.github.com/users/qiufang1314/orgs","repos_url":"https://api.github.com/users/qiufang1314/repos","events_url":"https://api.github.com/users/qiufang1314/events{/privacy}","received_events_url":"https://api.github.com/users/qiufang1314/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T01:34:15Z","updated_at":"2021-01-25T01:34:15Z","author_association":"NONE","body":"> 按照这个修复的看下：[d731a0c](https://github.com/apache/dubbo/commit/d731a0c0c6362bcc8499727b3239f878a960d67b)\r\n\r\n您好，请问下这个有合并到发布的分支不~","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766485069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766486019","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-766486019","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":766486019,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ4NjAxOQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T01:38:21Z","updated_at":"2021-01-25T01:38:21Z","author_association":"CONTRIBUTOR","body":"> > 按照这个修复的看下：[d731a0c](https://github.com/apache/dubbo/commit/d731a0c0c6362bcc8499727b3239f878a960d67b)\r\n> \r\n> 您好，请问下这个有合并到发布的分支不~\r\n\r\n现在还没有合并到发布分支","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766486019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766486709","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-766486709","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":766486709,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ4NjcwOQ==","user":{"login":"qiufang1314","id":10683318,"node_id":"MDQ6VXNlcjEwNjgzMzE4","avatar_url":"https://avatars.githubusercontent.com/u/10683318?v=4","gravatar_id":"","url":"https://api.github.com/users/qiufang1314","html_url":"https://github.com/qiufang1314","followers_url":"https://api.github.com/users/qiufang1314/followers","following_url":"https://api.github.com/users/qiufang1314/following{/other_user}","gists_url":"https://api.github.com/users/qiufang1314/gists{/gist_id}","starred_url":"https://api.github.com/users/qiufang1314/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qiufang1314/subscriptions","organizations_url":"https://api.github.com/users/qiufang1314/orgs","repos_url":"https://api.github.com/users/qiufang1314/repos","events_url":"https://api.github.com/users/qiufang1314/events{/privacy}","received_events_url":"https://api.github.com/users/qiufang1314/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T01:41:32Z","updated_at":"2021-01-25T01:41:32Z","author_association":"NONE","body":"> > > 按照这个修复的看下：[d731a0c](https://github.com/apache/dubbo/commit/d731a0c0c6362bcc8499727b3239f878a960d67b)\r\n> > \r\n> > \r\n> > 您好，请问下这个有合并到发布的分支不~\r\n> \r\n> 现在还没有合并到发布分支\r\n\r\n您好，能多说点，这个问题发生的原因不，还是有点不明白什么样的case会发生这样的问题，十分感谢~~\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766486709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766487196","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-766487196","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":766487196,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjQ4NzE5Ng==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T01:43:21Z","updated_at":"2021-01-25T01:43:21Z","author_association":"CONTRIBUTOR","body":"> > > > 按照这个修复的看下：[d731a0c](https://github.com/apache/dubbo/commit/d731a0c0c6362bcc8499727b3239f878a960d67b)\r\n> > > \r\n> > > \r\n> > > 您好，请问下这个有合并到发布的分支不~\r\n> > \r\n> > \r\n> > 现在还没有合并到发布分支\r\n> \r\n> 您好，能多说点，这个问题发生的原因不，还是有点不明白什么样的case会发生这样的问题，十分感谢~~\r\n\r\n看下这个问题 https://github.com/apache/dubbo/issues/7125","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766487196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766502778","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766502778","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766502778,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUwMjc3OA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T02:41:08Z","updated_at":"2021-01-25T02:41:08Z","author_association":"NONE","body":"> 能提供一个稳定重现的例子不？\r\n\r\n现在有3个版本的，你需要哪一个版本？ 2.7.8， 2.6.9， 2.5.x， 2.5.x没有问题，其他两个版本要优雅方式关闭，方可避免同ip重复注册","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766502778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766503811","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766503811","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766503811,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUwMzgxMQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T02:44:45Z","updated_at":"2021-01-25T02:44:45Z","author_association":"CONTRIBUTOR","body":"麻烦提供一个 2.7.8 的 demo","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766503811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766509661","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766509661","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766509661,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUwOTY2MQ==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T03:05:10Z","updated_at":"2021-01-25T03:05:10Z","author_association":"NONE","body":"springboot 版本：2.3.0.RELEASE\r\n\r\n属性配置\r\n\r\n```\r\n<properties>\r\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n        <spring.boot.version>2.3.0.RELEASE</spring.boot.version>\r\n        <dubbo.version>2.7.8</dubbo.version>\r\n</properties>\r\n```\r\n\r\npom\r\n\r\n```xml\r\n <!-- dubbo 2.7.8 start-->\r\n\r\n         <dependency>\r\n             <groupId>org.apache.dubbo</groupId>\r\n             <artifactId>dubbo-spring-boot-starter</artifactId>\r\n             <version>${dubbo.version}</version>\r\n         </dependency>\r\n         <dependency>\r\n             <groupId>org.apache.dubbo</groupId>\r\n             <artifactId>dubbo-dependencies-zookeeper</artifactId>\r\n             <version>${dubbo.version}</version>\r\n             <type>pom</type>\r\n             <exclusions>\r\n                 <exclusion>\r\n                     <groupId>org.slf4j</groupId>\r\n                     <artifactId>slf4j-log4j12</artifactId>\r\n                 </exclusion>\r\n             </exclusions>\r\n         </dependency>\r\n        <!--   dubbo 2.7.8 end -->\r\n```\r\n\r\ndubbo 服务\r\n```\r\npublic interface AccountRemoteService {\r\n    /**\r\n     * 从用户账户中借出\r\n     */\r\n    Boolean debit(String userId, BigDecimal money);\r\n}\r\n\r\n@Slf4j\r\n@DubboService(version = \"1.0.0\", validation = \"true\", dynamic = true)\r\npublic class AccountRemoteServiceImpl implements AccountRemoteService {\r\n    @Autowired\r\n    AccountBizService accountBizService;\r\n\r\n    @Override\r\n    public Boolean debit(String userId, BigDecimal money) {\r\n        return  accountBizService.debit(userId, money);\r\n    }\r\n}\r\n```\r\n\r\nApplication\r\n\r\n```\r\n@SpringBootApplication\r\npublic class Application\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n\r\n        @Bean\r\n    public RegistryConfig dubboRegistry() {\r\n        RegistryConfig registry = new RegistryConfig();\r\n        registry.setAddress(\"zookeeper://127.0.0.1:2181\");\r\n        return registry;\r\n    }\r\n}\r\n```\r\n\r\ndubbo config\r\n```\r\ndubbo.config.multiple=false\r\ndubbo.application.id=home-cherry\r\ndubbo.application.name=home-cherry\r\ndubbo.scan.basePackages=com.home.cherry.dubbo.provider\r\n# ProtocolConfig\r\ndubbo.protocol.id=home-cherry-protocol\r\ndubbo.protocol.name=dubbo\r\ndubbo.protocol.port=20880\r\ndubbo.protocol.threads=400\r\ndubbo.service.shutdown.wait=10000\r\ndubbo.provider.timeout=6000000\r\ndubbo.provider.retries=0\r\ndubbo.protocol.dynamic=true\r\n# ConsumerConfig\r\ndubbo.consumer.client=netty\r\ndubbo.consumer.filter=elapsedTimeFilter\r\ndubbo.consumer.timeout=60000000\r\ndubbo.consumer.retries=0\r\n```\r\n\r\n服务AccountRemoteServiceImpl实现这一块，你可以置空，试一下","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766509661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766509795","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766509795","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766509795,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUwOTc5NQ==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T03:05:40Z","updated_at":"2021-01-25T03:05:40Z","author_association":"NONE","body":"@xiaoheng1 ","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766509795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766510694","html_url":"https://github.com/apache/dubbo/pull/5348#issuecomment-766510694","issue_url":"https://api.github.com/repos/apache/dubbo/issues/5348","id":766510694,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUxMDY5NA==","user":{"login":"bobopan","id":49967075,"node_id":"MDQ6VXNlcjQ5OTY3MDc1","avatar_url":"https://avatars.githubusercontent.com/u/49967075?v=4","gravatar_id":"","url":"https://api.github.com/users/bobopan","html_url":"https://github.com/bobopan","followers_url":"https://api.github.com/users/bobopan/followers","following_url":"https://api.github.com/users/bobopan/following{/other_user}","gists_url":"https://api.github.com/users/bobopan/gists{/gist_id}","starred_url":"https://api.github.com/users/bobopan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobopan/subscriptions","organizations_url":"https://api.github.com/users/bobopan/orgs","repos_url":"https://api.github.com/users/bobopan/repos","events_url":"https://api.github.com/users/bobopan/events{/privacy}","received_events_url":"https://api.github.com/users/bobopan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T03:08:58Z","updated_at":"2021-01-25T03:08:58Z","author_association":"NONE","body":"> 使用dubbo2.7.5的多注册中心路由策略\r\n\r\n有详细一点的参考配置信息吗","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766510694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766517769","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766517769","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766517769,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjUxNzc2OQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T03:34:39Z","updated_at":"2021-01-25T03:34:39Z","author_association":"CONTRIBUTOR","body":"好的，我这边看下","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766517769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766562118","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766562118","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766562118,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjU2MjExOA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T05:54:32Z","updated_at":"2021-01-25T05:54:32Z","author_association":"NONE","body":"TK\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766562118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766596210","html_url":"https://github.com/apache/dubbo/pull/6773#issuecomment-766596210","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6773","id":766596210,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjU5NjIxMA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T07:03:38Z","updated_at":"2021-01-25T07:03:38Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=h1) Report\n> Merging [#6773](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=desc) (e05844b) into [master](https://codecov.io/gh/apache/dubbo/commit/a5685180f619dcb409d49787ef813ac22339dee2?el=desc) (a568518) will **increase** coverage by `0.67%`.\n> The diff coverage is `31.43%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/6773/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #6773      +/-   ##\n============================================\n+ Coverage     58.88%   59.55%   +0.67%     \n+ Complexity      508      286     -222     \n============================================\n  Files          1026     1001      -25     \n  Lines         41383    39957    -1426     \n  Branches       6028     5921     -107     \n============================================\n- Hits          24369    23797     -572     \n+ Misses        14257    13443     -814     \n+ Partials       2757     2717      -40     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...dubbo/rpc/cluster/directory/AbstractDirectory.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tY2x1c3Rlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vcnBjL2NsdXN0ZXIvZGlyZWN0b3J5L0Fic3RyYWN0RGlyZWN0b3J5LmphdmE=) | `71.87% <0.00%> (-24.90%)` | `0.00 <0.00> (ø)` | |\n| [...ster/support/registry/ZoneAwareClusterInvoker.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tY2x1c3Rlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vcnBjL2NsdXN0ZXIvc3VwcG9ydC9yZWdpc3RyeS9ab25lQXdhcmVDbHVzdGVySW52b2tlci5qYXZh) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...he/dubbo/common/config/CompositeConfiguration.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vY29uZmlnL0NvbXBvc2l0ZUNvbmZpZ3VyYXRpb24uamF2YQ==) | `65.21% <0.00%> (-4.56%)` | `0.00 <0.00> (ø)` | |\n| [...apache/dubbo/common/config/ConfigurationUtils.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vY29uZmlnL0NvbmZpZ3VyYXRpb25VdGlscy5qYXZh) | `59.37% <0.00%> (+0.75%)` | `0.00 <0.00> (ø)` | |\n| [.../apache/dubbo/config/bootstrap/DubboBootstrap.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tY29uZmlnL2R1YmJvLWNvbmZpZy1hcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL2NvbmZpZy9ib290c3RyYXAvRHViYm9Cb290c3RyYXAuamF2YQ==) | `41.69% <0.00%> (-1.00%)` | `0.00 <0.00> (ø)` | |\n| [...pport/zookeeper/ZookeeperDynamicConfiguration.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tY29uZmlnY2VudGVyL2R1YmJvLWNvbmZpZ2NlbnRlci16b29rZWVwZXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL2NvbmZpZ2NlbnRlci9zdXBwb3J0L3pvb2tlZXBlci9ab29rZWVwZXJEeW5hbWljQ29uZmlndXJhdGlvbi5qYXZh) | `62.06% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...n/java/org/apache/dubbo/metadata/MetadataInfo.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9tZXRhZGF0YS9NZXRhZGF0YUluZm8uamF2YQ==) | `35.32% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...adata/store/zookeeper/ZookeeperMetadataReport.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtcmVwb3J0LXpvb2tlZXBlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vbWV0YWRhdGEvc3RvcmUvem9va2VlcGVyL1pvb2tlZXBlck1ldGFkYXRhUmVwb3J0LmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [.../dubbo/registry/client/DefaultServiceInstance.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jbGllbnQvRGVmYXVsdFNlcnZpY2VJbnN0YW5jZS5qYXZh) | `57.14% <0.00%> (-5.72%)` | `0.00 <0.00> (ø)` | |\n| [...ache/dubbo/registry/client/InstanceAddressURL.java](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jbGllbnQvSW5zdGFuY2VBZGRyZXNzVVJMLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| ... and [246 more](https://codecov.io/gh/apache/dubbo/pull/6773/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=footer). Last update [a568518...e05844b](https://codecov.io/gh/apache/dubbo/pull/6773?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766596210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766681380","html_url":"https://github.com/apache/dubbo/pull/7131#issuecomment-766681380","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7131","id":766681380,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NjY4MTM4MA==","user":{"login":"AlbumenJ","id":9292748,"node_id":"MDQ6VXNlcjkyOTI3NDg=","avatar_url":"https://avatars.githubusercontent.com/u/9292748?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbumenJ","html_url":"https://github.com/AlbumenJ","followers_url":"https://api.github.com/users/AlbumenJ/followers","following_url":"https://api.github.com/users/AlbumenJ/following{/other_user}","gists_url":"https://api.github.com/users/AlbumenJ/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbumenJ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbumenJ/subscriptions","organizations_url":"https://api.github.com/users/AlbumenJ/orgs","repos_url":"https://api.github.com/users/AlbumenJ/repos","events_url":"https://api.github.com/users/AlbumenJ/events{/privacy}","received_events_url":"https://api.github.com/users/AlbumenJ/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T09:31:19Z","updated_at":"2021-01-25T09:31:19Z","author_association":"MEMBER","body":"please fix ut\r\n\r\nhttps://github.com/apache/dubbo/pull/7131/checks?check_run_id=1760798506","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766681380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766758572","html_url":"https://github.com/apache/dubbo/issues/7115#issuecomment-766758572","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7115","id":766758572,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njc1ODU3Mg==","user":{"login":"vantis-zh","id":6478721,"node_id":"MDQ6VXNlcjY0Nzg3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/6478721?v=4","gravatar_id":"","url":"https://api.github.com/users/vantis-zh","html_url":"https://github.com/vantis-zh","followers_url":"https://api.github.com/users/vantis-zh/followers","following_url":"https://api.github.com/users/vantis-zh/following{/other_user}","gists_url":"https://api.github.com/users/vantis-zh/gists{/gist_id}","starred_url":"https://api.github.com/users/vantis-zh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vantis-zh/subscriptions","organizations_url":"https://api.github.com/users/vantis-zh/orgs","repos_url":"https://api.github.com/users/vantis-zh/repos","events_url":"https://api.github.com/users/vantis-zh/events{/privacy}","received_events_url":"https://api.github.com/users/vantis-zh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T11:43:17Z","updated_at":"2021-01-25T11:43:17Z","author_association":"NONE","body":"I've got the same error.","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766758572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766784344","html_url":"https://github.com/apache/dubbo/issues/6294#issuecomment-766784344","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6294","id":766784344,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njc4NDM0NA==","user":{"login":"Congzer","id":54236846,"node_id":"MDQ6VXNlcjU0MjM2ODQ2","avatar_url":"https://avatars.githubusercontent.com/u/54236846?v=4","gravatar_id":"","url":"https://api.github.com/users/Congzer","html_url":"https://github.com/Congzer","followers_url":"https://api.github.com/users/Congzer/followers","following_url":"https://api.github.com/users/Congzer/following{/other_user}","gists_url":"https://api.github.com/users/Congzer/gists{/gist_id}","starred_url":"https://api.github.com/users/Congzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Congzer/subscriptions","organizations_url":"https://api.github.com/users/Congzer/orgs","repos_url":"https://api.github.com/users/Congzer/repos","events_url":"https://api.github.com/users/Congzer/events{/privacy}","received_events_url":"https://api.github.com/users/Congzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T12:31:40Z","updated_at":"2021-01-25T12:31:40Z","author_association":"NONE","body":"dubbo.registry.address=zookeeper://ip:port,你看下是不是没有zookeeper://这个注册中心的前缀","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766784344/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766791345","html_url":"https://github.com/apache/dubbo/pull/7131#issuecomment-766791345","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7131","id":766791345,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njc5MTM0NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T12:45:24Z","updated_at":"2021-01-25T12:45:24Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=h1) Report\n> Merging [#7131](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=desc) (17a0c2f) into [master](https://codecov.io/gh/apache/dubbo/commit/27571a094e668aa87797d11283ab9f0ba383b3c3?el=desc) (27571a0) will **decrease** coverage by `0.33%`.\n> The diff coverage is `82.35%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7131/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7131      +/-   ##\n============================================\n- Coverage     60.28%   59.94%   -0.34%     \n+ Complexity      509      506       -3     \n============================================\n  Files          1028     1028              \n  Lines         41531    41488      -43     \n  Branches       6038     6009      -29     \n============================================\n- Hits          25036    24872     -164     \n- Misses        13750    13848      +98     \n- Partials       2745     2768      +23     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...apache/dubbo/common/extension/ExtensionLoader.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vZXh0ZW5zaW9uL0V4dGVuc2lvbkxvYWRlci5qYXZh) | `77.85% <82.35%> (+2.06%)` | `0.00 <0.00> (ø)` | |\n| [...va/org/apache/dubbo/remoting/TimeoutException.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy9UaW1lb3V0RXhjZXB0aW9uLmphdmE=) | `0.00% <0.00%> (-33.34%)` | `0.00% <0.00%> (ø%)` | |\n| [...ng/transport/dispatcher/all/AllChannelHandler.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvZGlzcGF0Y2hlci9hbGwvQWxsQ2hhbm5lbEhhbmRsZXIuamF2YQ==) | `62.06% <0.00%> (-27.59%)` | `0.00% <0.00%> (ø%)` | |\n| [...bo/config/event/listener/LoggingEventListener.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tY29uZmlnL2R1YmJvLWNvbmZpZy1hcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL2NvbmZpZy9ldmVudC9saXN0ZW5lci9Mb2dnaW5nRXZlbnRMaXN0ZW5lci5qYXZh) | `37.50% <0.00%> (-25.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...dubbo/remoting/exchange/support/DefaultFuture.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy9leGNoYW5nZS9zdXBwb3J0L0RlZmF1bHRGdXR1cmUuamF2YQ==) | `70.79% <0.00%> (-17.24%)` | `0.00% <0.00%> (ø%)` | |\n| [...bbo/common/bytecode/CustomizedLoaderClassPath.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vYnl0ZWNvZGUvQ3VzdG9taXplZExvYWRlckNsYXNzUGF0aC5qYXZh) | `28.00% <0.00%> (-16.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...rg/apache/dubbo/remoting/utils/PayloadDropper.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy91dGlscy9QYXlsb2FkRHJvcHBlci5qYXZh) | `76.92% <0.00%> (-15.39%)` | `0.00% <0.00%> (ø%)` | |\n| [...ng/transport/dispatcher/WrappedChannelHandler.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvZGlzcGF0Y2hlci9XcmFwcGVkQ2hhbm5lbEhhbmRsZXIuamF2YQ==) | `47.82% <0.00%> (-15.22%)` | `0.00% <0.00%> (ø%)` | |\n| [.../remoting/transport/netty4/NettyServerHandler.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHk0L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvbmV0dHk0L05ldHR5U2VydmVySGFuZGxlci5qYXZh) | `56.81% <0.00%> (-13.64%)` | `0.00% <0.00%> (ø%)` | |\n| [...mmon/threadpool/support/AbortPolicyWithReport.java](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdGhyZWFkcG9vbC9zdXBwb3J0L0Fib3J0UG9saWN5V2l0aFJlcG9ydC5qYXZh) | `85.00% <0.00%> (-12.50%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [50 more](https://codecov.io/gh/apache/dubbo/pull/7131/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=footer). Last update [27571a0...17a0c2f](https://codecov.io/gh/apache/dubbo/pull/7131?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766791345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766845149","html_url":"https://github.com/apache/dubbo/issues/7127#issuecomment-766845149","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7127","id":766845149,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg0NTE0OQ==","user":{"login":"AlbumenJ","id":9292748,"node_id":"MDQ6VXNlcjkyOTI3NDg=","avatar_url":"https://avatars.githubusercontent.com/u/9292748?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbumenJ","html_url":"https://github.com/AlbumenJ","followers_url":"https://api.github.com/users/AlbumenJ/followers","following_url":"https://api.github.com/users/AlbumenJ/following{/other_user}","gists_url":"https://api.github.com/users/AlbumenJ/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbumenJ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbumenJ/subscriptions","organizations_url":"https://api.github.com/users/AlbumenJ/orgs","repos_url":"https://api.github.com/users/AlbumenJ/repos","events_url":"https://api.github.com/users/AlbumenJ/events{/privacy}","received_events_url":"https://api.github.com/users/AlbumenJ/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T14:15:37Z","updated_at":"2021-01-25T14:15:37Z","author_association":"MEMBER","body":"Hi, @Darian1996 \r\n\r\nThanks for your suggestion.\r\n\r\nThe reason why moving `@Reference` and `@Service` to `@DubboReference` and `@DubboService` is to make it more recognizable between Dubbo and Spring.\r\n\r\n`Service` is a differenct concept both in Spring and Dubbo ( also in RPC ).\r\n\r\nMaybe you can try to understand `Service` separately from Spring, and then `Service` is a clear concept for RPC. Also, `ServiceConfig` is reasonable for Dubbo.","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766845149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766847214","html_url":"https://github.com/apache/dubbo/issues/7128#issuecomment-766847214","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7128","id":766847214,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg0NzIxNA==","user":{"login":"AlbumenJ","id":9292748,"node_id":"MDQ6VXNlcjkyOTI3NDg=","avatar_url":"https://avatars.githubusercontent.com/u/9292748?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbumenJ","html_url":"https://github.com/AlbumenJ","followers_url":"https://api.github.com/users/AlbumenJ/followers","following_url":"https://api.github.com/users/AlbumenJ/following{/other_user}","gists_url":"https://api.github.com/users/AlbumenJ/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbumenJ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbumenJ/subscriptions","organizations_url":"https://api.github.com/users/AlbumenJ/orgs","repos_url":"https://api.github.com/users/AlbumenJ/repos","events_url":"https://api.github.com/users/AlbumenJ/events{/privacy}","received_events_url":"https://api.github.com/users/AlbumenJ/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T14:18:53Z","updated_at":"2021-01-25T14:18:53Z","author_association":"MEMBER","body":"麻烦可以提供一个具体示例吗","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766847214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766849263","html_url":"https://github.com/apache/dubbo/issues/7117#issuecomment-766849263","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7117","id":766849263,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg0OTI2Mw==","user":{"login":"AlbumenJ","id":9292748,"node_id":"MDQ6VXNlcjkyOTI3NDg=","avatar_url":"https://avatars.githubusercontent.com/u/9292748?v=4","gravatar_id":"","url":"https://api.github.com/users/AlbumenJ","html_url":"https://github.com/AlbumenJ","followers_url":"https://api.github.com/users/AlbumenJ/followers","following_url":"https://api.github.com/users/AlbumenJ/following{/other_user}","gists_url":"https://api.github.com/users/AlbumenJ/gists{/gist_id}","starred_url":"https://api.github.com/users/AlbumenJ/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlbumenJ/subscriptions","organizations_url":"https://api.github.com/users/AlbumenJ/orgs","repos_url":"https://api.github.com/users/AlbumenJ/repos","events_url":"https://api.github.com/users/AlbumenJ/events{/privacy}","received_events_url":"https://api.github.com/users/AlbumenJ/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T14:22:19Z","updated_at":"2021-01-25T14:22:19Z","author_association":"MEMBER","body":"从报错日志看应该是配置项没有正确注入到 Dubbo 导致的查找不到注册中心信息导致的","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766849263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766851935","html_url":"https://github.com/apache/dubbo/issues/7128#issuecomment-766851935","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7128","id":766851935,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg1MTkzNQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T14:26:15Z","updated_at":"2021-01-25T14:26:15Z","author_association":"CONTRIBUTOR","body":"就以你这个例子，定义 javabean\r\n@Setter\r\nprivate List result;\r\nprivate Integer pageNum;\r\n现在输出为\r\n{\r\nresult:\"\",\r\npageNum:\"\",\r\nclass:\"\",\r\nsuccess:\"\"\r\n}\r\n\r\n然后用 json 将 javabean 装成字符串输出","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766851935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766881941","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766881941","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766881941,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg4MTk0MQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T15:08:19Z","updated_at":"2021-01-25T15:08:19Z","author_association":"CONTRIBUTOR","body":"请教下，你这边启动后还做了啥操作没？我这边测试是一个节点。\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766881941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766882110","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-766882110","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":766882110,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg4MjExMA==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T15:08:34Z","updated_at":"2021-01-25T15:08:34Z","author_association":"CONTRIBUTOR","body":"@Donaldhan","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766882110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766892600","html_url":"https://github.com/apache/dubbo/pull/7090#issuecomment-766892600","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7090","id":766892600,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg5MjYwMA==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T15:23:40Z","updated_at":"2021-01-25T15:23:40Z","author_association":"MEMBER","body":"@AlbumenJ PTAL","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766892600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766894593","html_url":"https://github.com/apache/dubbo/pull/7082#issuecomment-766894593","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7082","id":766894593,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Njg5NDU5Mw==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T15:26:28Z","updated_at":"2021-01-25T15:26:28Z","author_association":"MEMBER","body":"@AlbumenJ This pr also fix concurency bug, PTAL.","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/766894593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767216974","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767216974","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767216974,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIxNjk3NA==","user":{"login":"dkisser","id":24600271,"node_id":"MDQ6VXNlcjI0NjAwMjcx","avatar_url":"https://avatars.githubusercontent.com/u/24600271?v=4","gravatar_id":"","url":"https://api.github.com/users/dkisser","html_url":"https://github.com/dkisser","followers_url":"https://api.github.com/users/dkisser/followers","following_url":"https://api.github.com/users/dkisser/following{/other_user}","gists_url":"https://api.github.com/users/dkisser/gists{/gist_id}","starred_url":"https://api.github.com/users/dkisser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkisser/subscriptions","organizations_url":"https://api.github.com/users/dkisser/orgs","repos_url":"https://api.github.com/users/dkisser/repos","events_url":"https://api.github.com/users/dkisser/events{/privacy}","received_events_url":"https://api.github.com/users/dkisser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T01:18:00Z","updated_at":"2021-01-26T01:18:00Z","author_association":"NONE","body":"服务非优雅停机临时节点不会马上删除，要等zookeeper心跳超时才会删除这个节点。在zookeeper删除无效节点之前你再去注册就会有两个一模一样的节点（timestamp会不一样），这个不影响服务调用的。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767216974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767225034","html_url":"https://github.com/apache/dubbo/pull/7073#issuecomment-767225034","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7073","id":767225034,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIyNTAzNA==","user":{"login":"dkisser","id":24600271,"node_id":"MDQ6VXNlcjI0NjAwMjcx","avatar_url":"https://avatars.githubusercontent.com/u/24600271?v=4","gravatar_id":"","url":"https://api.github.com/users/dkisser","html_url":"https://github.com/dkisser","followers_url":"https://api.github.com/users/dkisser/followers","following_url":"https://api.github.com/users/dkisser/following{/other_user}","gists_url":"https://api.github.com/users/dkisser/gists{/gist_id}","starred_url":"https://api.github.com/users/dkisser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkisser/subscriptions","organizations_url":"https://api.github.com/users/dkisser/orgs","repos_url":"https://api.github.com/users/dkisser/repos","events_url":"https://api.github.com/users/dkisser/events{/privacy}","received_events_url":"https://api.github.com/users/dkisser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T01:37:13Z","updated_at":"2021-01-26T01:37:13Z","author_association":"NONE","body":"this pr seems unused","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767225034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767225691","html_url":"https://github.com/apache/dubbo/issues/7117#issuecomment-767225691","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7117","id":767225691,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIyNTY5MQ==","user":{"login":"kevinw66","id":31196226,"node_id":"MDQ6VXNlcjMxMTk2MjI2","avatar_url":"https://avatars.githubusercontent.com/u/31196226?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinw66","html_url":"https://github.com/kevinw66","followers_url":"https://api.github.com/users/kevinw66/followers","following_url":"https://api.github.com/users/kevinw66/following{/other_user}","gists_url":"https://api.github.com/users/kevinw66/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinw66/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinw66/subscriptions","organizations_url":"https://api.github.com/users/kevinw66/orgs","repos_url":"https://api.github.com/users/kevinw66/repos","events_url":"https://api.github.com/users/kevinw66/events{/privacy}","received_events_url":"https://api.github.com/users/kevinw66/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T01:39:26Z","updated_at":"2021-01-26T01:39:26Z","author_association":"CONTRIBUTOR","body":"> 从报错日志看应该是配置项没有正确注入到 Dubbo 导致的查找不到注册中心信息导致的\r\n\r\n是的，我调试的时候发现dubbo-spring-boot-autoconfigure 2.7.3是手动设置的RegistryConfig，但是2.7.8版本是通过BeanPostProcessor设置的，如果不加zipkin依赖一切正常，加了zipkin依赖会导致BeanPostProcessor设置RegistryConfig之前就尝试注入registry，所以获取到的配置都为空。暂时没发现是什么原因，推测可能也是版本的问题，所以推荐直接使用spring-cloud-starter-dubbo","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767225691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767234854","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767234854","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767234854,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIzNDg1NA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T02:07:36Z","updated_at":"2021-01-26T02:07:36Z","author_association":"NONE","body":"> 请教下，你这边启动后还做了啥操作没？我这边测试是一个节点。\r\n\r\n一个节点启动即可，启动，观察zk的服务注册节点，什么也不做，然后使用idea stop 关闭应用，再重启，观察zk的服务注册节点","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767234854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767235014","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767235014","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767235014,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIzNTAxNA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T02:08:01Z","updated_at":"2021-01-26T02:08:01Z","author_association":"NONE","body":"结果重复注册","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767235014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767238165","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767238165","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767238165,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIzODE2NQ==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T02:15:20Z","updated_at":"2021-01-26T02:15:20Z","author_association":"NONE","body":"> 服务非优雅停机临时节点不会马上删除，要等zookeeper心跳超时才会删除这个节点。在zookeeper删除无效节点之前你再去注册就会有两个一模一样的节点（timestamp会不一样），这个不影响服务调用的。\r\n\r\n1. 可以尝试一下，第一天启动应用关闭，第二天在此启动，你发现zk服务节点，并未删除，可以尝试一下；\r\n2. timestamp是不同的；\r\n重新注册timestamp, 是不一样, 那就是不同给的节点，肯定不会覆盖的\r\n```\r\n public static void appendRuntimeParameters(Map<String, String> map) {\r\n        map.put(DUBBO_VERSION_KEY, Version.getProtocolVersion());\r\n        map.put(RELEASE_KEY, Version.getVersion());\r\n        map.put(TIMESTAMP_KEY, String.valueOf(System.currentTimeMillis()));\r\n        if (ConfigUtils.getPid() > 0) {\r\n            map.put(PID_KEY, String.valueOf(ConfigUtils.getPid()));\r\n        }\r\n    }\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767238165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767239207","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767239207","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767239207,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzIzOTIwNw==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T02:18:00Z","updated_at":"2021-01-26T02:18:00Z","author_association":"CONTRIBUTOR","body":"好的","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767239207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767243073","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767243073","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767243073,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI0MzA3Mw==","user":{"login":"dkisser","id":24600271,"node_id":"MDQ6VXNlcjI0NjAwMjcx","avatar_url":"https://avatars.githubusercontent.com/u/24600271?v=4","gravatar_id":"","url":"https://api.github.com/users/dkisser","html_url":"https://github.com/dkisser","followers_url":"https://api.github.com/users/dkisser/followers","following_url":"https://api.github.com/users/dkisser/following{/other_user}","gists_url":"https://api.github.com/users/dkisser/gists{/gist_id}","starred_url":"https://api.github.com/users/dkisser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkisser/subscriptions","organizations_url":"https://api.github.com/users/dkisser/orgs","repos_url":"https://api.github.com/users/dkisser/repos","events_url":"https://api.github.com/users/dkisser/events{/privacy}","received_events_url":"https://api.github.com/users/dkisser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T02:27:51Z","updated_at":"2021-01-26T02:27:51Z","author_association":"NONE","body":"https://github.com/apache/dubbo/issues/7124#issuecomment-767238165\r\n那就是你会话超时时间设太久了，你debug都到了创建临时节点那里，说明过期节点删除机制出问题了，这个需要看看zookeeper配置了","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767243073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262623","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767262623","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767262623,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI2MjYyMw==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T03:20:57Z","updated_at":"2021-01-26T03:20:57Z","author_association":"NONE","body":"默认60s：\r\n\r\n```java\r\nprotected int DEFAULT_SESSION_TIMEOUT_MS = 60 * 1000;\r\npublic CuratorZookeeperClient(URL url) {\r\n        super(url);\r\n        try {\r\n            int timeout = url.getParameter(TIMEOUT_KEY, DEFAULT_CONNECTION_TIMEOUT_MS);\r\n            int sessionExpireMs = url.getParameter(ZK_SESSION_EXPIRE_KEY, DEFAULT_SESSION_TIMEOUT_MS);\r\n            CuratorFrameworkFactory.Builder builder = CuratorFrameworkFactory.builder()\r\n                    .connectString(url.getBackupAddress())\r\n                    .retryPolicy(new RetryNTimes(1, 1000))\r\n                    .connectionTimeoutMs(timeout)\r\n                    .sessionTimeoutMs(sessionExpireMs);\r\n            String authority = url.getAuthority();\r\n            if (authority != null && authority.length() > 0) {\r\n                builder = builder.authorization(\"digest\", authority.getBytes());\r\n            }\r\n            client = builder.build();\r\n            client.getConnectionStateListenable().addListener(new CuratorConnectionStateListener(url));\r\n            client.start();\r\n            boolean connected = client.blockUntilConnected(timeout, TimeUnit.MILLISECONDS);\r\n            if (!connected) {\r\n                throw new IllegalStateException(\"zookeeper not connected\");\r\n            }\r\n        } catch (Exception e) {\r\n            throw new IllegalStateException(e.getMessage(), e);\r\n        }\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262667","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767262667","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767262667,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI2MjY2Nw==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T03:21:09Z","updated_at":"2021-01-26T03:21:09Z","author_association":"NONE","body":"@dkisser ","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262734","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767262734","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767262734,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI2MjczNA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T03:21:27Z","updated_at":"2021-01-26T03:21:27Z","author_association":"NONE","body":"没有额外的配置","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262828","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767262828","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767262828,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI2MjgyOA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T03:21:51Z","updated_at":"2021-01-26T03:21:51Z","author_association":"NONE","body":"你会话超时时间设太久了， 这点看来，不太可能","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767262828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767277108","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767277108","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767277108,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI3NzEwOA==","user":{"login":"dkisser","id":24600271,"node_id":"MDQ6VXNlcjI0NjAwMjcx","avatar_url":"https://avatars.githubusercontent.com/u/24600271?v=4","gravatar_id":"","url":"https://api.github.com/users/dkisser","html_url":"https://github.com/dkisser","followers_url":"https://api.github.com/users/dkisser/followers","following_url":"https://api.github.com/users/dkisser/following{/other_user}","gists_url":"https://api.github.com/users/dkisser/gists{/gist_id}","starred_url":"https://api.github.com/users/dkisser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkisser/subscriptions","organizations_url":"https://api.github.com/users/dkisser/orgs","repos_url":"https://api.github.com/users/dkisser/repos","events_url":"https://api.github.com/users/dkisser/events{/privacy}","received_events_url":"https://api.github.com/users/dkisser/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T03:46:37Z","updated_at":"2021-01-26T03:46:37Z","author_association":"NONE","body":"看zookeeper配置，清理过期节点是zookeeper的功能，和你客户端没关系哦","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767277108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767283943","html_url":"https://github.com/apache/dubbo/pull/7133#issuecomment-767283943","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7133","id":767283943,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzI4Mzk0Mw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T04:10:19Z","updated_at":"2021-01-26T06:47:18Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=h1) Report\n> Merging [#7133](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=desc) (3da3f33) into [master](https://codecov.io/gh/apache/dubbo/commit/27571a094e668aa87797d11283ab9f0ba383b3c3?el=desc) (27571a0) will **decrease** coverage by `0.05%`.\n> The diff coverage is `25.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7133/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7133      +/-   ##\n============================================\n- Coverage     60.28%   60.22%   -0.06%     \n+ Complexity      510      505       -5     \n============================================\n  Files          1028     1028              \n  Lines         41531    41535       +4     \n  Branches       6038     6040       +2     \n============================================\n- Hits          25037    25016      -21     \n- Misses        13750    13764      +14     \n- Partials       2744     2755      +11     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...tegration/InterfaceCompatibleRegistryProtocol.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9pbnRlZ3JhdGlvbi9JbnRlcmZhY2VDb21wYXRpYmxlUmVnaXN0cnlQcm90b2NvbC5qYXZh) | `42.18% <25.00%> (-1.15%)` | `0.00 <0.00> (ø)` | |\n| [.../remoting/transport/netty4/NettyServerHandler.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHk0L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvbmV0dHk0L05ldHR5U2VydmVySGFuZGxlci5qYXZh) | `61.36% <0.00%> (-9.10%)` | `0.00% <0.00%> (ø%)` | |\n| [...e/dubbo/remoting/transport/netty/NettyChannel.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL3RyYW5zcG9ydC9uZXR0eS9OZXR0eUNoYW5uZWwuamF2YQ==) | `52.27% <0.00%> (-7.96%)` | `19.00% <0.00%> (-2.00%)` | |\n| [...in/java/org/apache/dubbo/common/utils/JVMUtil.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdXRpbHMvSlZNVXRpbC5qYXZh) | `81.13% <0.00%> (-5.67%)` | `0.00% <0.00%> (ø%)` | |\n| [.../apache/dubbo/remoting/transport/AbstractPeer.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvQWJzdHJhY3RQZWVyLmphdmE=) | `63.04% <0.00%> (-4.35%)` | `0.00% <0.00%> (ø%)` | |\n| [...he/dubbo/remoting/transport/netty/NettyServer.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL3RyYW5zcG9ydC9uZXR0eS9OZXR0eVNlcnZlci5qYXZh) | `70.17% <0.00%> (-3.51%)` | `8.00% <0.00%> (-1.00%)` | |\n| [...pache/dubbo/registry/support/AbstractRegistry.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9zdXBwb3J0L0Fic3RyYWN0UmVnaXN0cnkuamF2YQ==) | `79.25% <0.00%> (-1.86%)` | `0.00% <0.00%> (ø%)` | |\n| [...a/org/apache/dubbo/monitor/dubbo/DubboMonitor.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tbW9uaXRvci9kdWJiby1tb25pdG9yLWRlZmF1bHQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL21vbml0b3IvZHViYm8vRHViYm9Nb25pdG9yLmphdmE=) | `88.57% <0.00%> (-0.96%)` | `16.00% <0.00%> (-1.00%)` | |\n| [...g/apache/dubbo/registry/consul/ConsulRegistry.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsUmVnaXN0cnkuamF2YQ==) | `60.00% <0.00%> (-0.59%)` | `31.00% <0.00%> (ø%)` | |\n| [...figcenter/file/FileSystemDynamicConfiguration.java](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vY29uZmlnL2NvbmZpZ2NlbnRlci9maWxlL0ZpbGVTeXN0ZW1EeW5hbWljQ29uZmlndXJhdGlvbi5qYXZh) | `62.38% <0.00%> (-0.48%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [5 more](https://codecov.io/gh/apache/dubbo/pull/7133/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=footer). Last update [27571a0...3da3f33](https://codecov.io/gh/apache/dubbo/pull/7133?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767283943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767311100","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767311100","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767311100,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzMxMTEwMA==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T05:45:28Z","updated_at":"2021-01-26T05:45:28Z","author_association":"CONTRIBUTOR","body":"zk 清理临时节点的时间是 sessionTimeout, 在 dubbo 中默认是 60s. \r\n比如我先注册了一个服务，然后 kill 掉，zk 不会立刻进行清除，而是要等 sessionTimeout 时间.\r\n如果再进行注册，可能会出现 ip 相同的节点。\r\n\r\n这种情况下，是否能否调下 sessionTimeout 的时间？\r\n\r\n如果不行的话，那么有如下两种方案供参考下：\r\n1.在创建临时节点的时候，先将 url 写日志，然后在创建节点的时候，会先判断是否存在。\r\n2.在 service 下新增一个节点，name 为 instances，保存 address 信息。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767311100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767312261","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767312261","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767312261,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzMxMjI2MQ==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T05:49:08Z","updated_at":"2021-01-26T05:49:08Z","author_association":"CONTRIBUTOR","body":"@AlbumenJ @Donaldhan @dkisser 各位看下上面的方案有问题没？或者有更好的建议一起探讨下。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767312261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767318026","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767318026","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767318026,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzMxODAyNg==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T06:05:59Z","updated_at":"2021-01-26T06:05:59Z","author_association":"NONE","body":"> zk 清理临时节点的时间是 sessionTimeout, 在 dubbo 中默认是 60s.\r\n> 比如我先注册了一个服务，然后 kill 掉，zk 不会立刻进行清除，而是要等 sessionTimeout 时间.\r\n> 如果再进行注册，可能会出现 ip 相同的节点。\r\n> \r\n> 这种情况下，是否能否调下 sessionTimeout 的时间？\r\n> \r\n> 如果不行的话，那么有如下两种方案供参考下：\r\n> 1.在创建临时节点的时候，先将 url 写日志，然后在创建节点的时候，会先判断是否存在。\r\n> 2.在 service 下新增一个节点，name 为 instances，保存 address 信息。\r\n\r\n方案1，本地存储url信息可行，个人认为方案2好一点，所有的注册信息有Zk统一维护，在service下创建一个instance节点，同时区分消费者和提供者，注册是如果存在相同的ip，则认为重复注册，删除旧的节点，创建新的服务节点；或者在服务的提供者或服务者节点下，使用ip去管理\r\n![image](https://user-images.githubusercontent.com/13444558/105806395-dff9ca80-5fde-11eb-8984-48d4f7a4a6fa.png)\r\n\r\n比如：server/ip/serviceUrl;\r\n\r\n\r\n@xiaoheng1 @AlbumenJ @dkisser ","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767318026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767332352","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767332352","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767332352,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzMzMjM1Mg==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T06:33:29Z","updated_at":"2021-01-26T06:37:22Z","author_association":"NONE","body":"> 看zookeeper配置，清理过期节点是zookeeper的功能，和你客户端没关系哦\r\n\r\n zk会话追踪器SessionTrackerImpl，检查客户端会话超时时，会关闭会话, 同时清理会话临时节点（不可能两天都没有清掉），会话的超时时间，是客户端设置的60s.\r\n\r\n//org.apache.zookeeper.server.DataTree#killSession\r\n```java\r\n    /**\r\n     * 清除会话临时节点\r\n     * @param session\r\n     * @param zxid\r\n     */\r\n    void killSession(long session, long zxid) {\r\n        // the list is already removed from the ephemerals\r\n        // so we do not have to worry about synchronizing on\r\n        // the list. This is only called from FinalRequestProcessor\r\n        // so there is no need for synchronization. The list is not\r\n        // changed here. Only create and delete change the list which\r\n        // are again called from FinalRequestProcessor in sequence.\r\n        Set<String> list = ephemerals.remove(session);\r\n        if (list != null) {\r\n            for (String path : list) {\r\n                try {\r\n                    deleteNode(path, zxid);\r\n                    if (LOG.isDebugEnabled()) {\r\n                        LOG\r\n                                .debug(\"Deleting ephemeral node \" + path\r\n                                        + \" for session 0x\"\r\n                                        + Long.toHexString(session));\r\n                    }\r\n                } catch (NoNodeException e) {\r\n                    LOG.warn(\"Ignoring NoNodeException for path \" + path\r\n                            + \" while removing ephemeral for dead session 0x\"\r\n                            + Long.toHexString(session));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767332352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767347596","html_url":"https://github.com/apache/dubbo/issues/6540#issuecomment-767347596","issue_url":"https://api.github.com/repos/apache/dubbo/issues/6540","id":767347596,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzM0NzU5Ng==","user":{"login":"caichy","id":1921076,"node_id":"MDQ6VXNlcjE5MjEwNzY=","avatar_url":"https://avatars.githubusercontent.com/u/1921076?v=4","gravatar_id":"","url":"https://api.github.com/users/caichy","html_url":"https://github.com/caichy","followers_url":"https://api.github.com/users/caichy/followers","following_url":"https://api.github.com/users/caichy/following{/other_user}","gists_url":"https://api.github.com/users/caichy/gists{/gist_id}","starred_url":"https://api.github.com/users/caichy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caichy/subscriptions","organizations_url":"https://api.github.com/users/caichy/orgs","repos_url":"https://api.github.com/users/caichy/repos","events_url":"https://api.github.com/users/caichy/events{/privacy}","received_events_url":"https://api.github.com/users/caichy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T07:04:07Z","updated_at":"2021-01-26T07:04:07Z","author_association":"NONE","body":"> 1. ServiceConfig 可能不存在，所以 consumer 侧的日志不能直接依赖 ServiceConfig 里面计算的 IP。\r\n> 2. 计算 bind  IP 时  /etc/hosts 的优先级最高。\r\n\r\n抱歉抱歉,，没有跟踪反馈细节，这个问题是要怎么解决呢？之前是发现logger里打印的IP是对的，而ServiceConfig获取的IP不对，机器有双网卡的时候，Provider端可能出现取的IP不对，注册之后无法提供服务。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767347596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767348247","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767348247","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767348247,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzM0ODI0Nw==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T07:05:38Z","updated_at":"2021-01-26T07:05:51Z","author_association":"NONE","body":"调试来看超时未3秒：\r\n![image](https://user-images.githubusercontent.com/13444558/105811530-bee9a780-5fe7-11eb-8a13-184e8a112b56.png)\r\n\r\n但从zk节点看，会话都是同一个\r\n![image](https://user-images.githubusercontent.com/13444558/105811640-e6407480-5fe7-11eb-9de4-7277cebdf4c3.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13444558/105811654-eb052880-5fe7-11eb-9851-66601bbe6ee5.png)\r\n\r\n![image](https://user-images.githubusercontent.com/13444558/105811659-ed678280-5fe7-11eb-92bb-52ee40563be0.png)\r\n\r\namazing！","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767348247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767393740","html_url":"https://github.com/apache/dubbo/pull/7082#issuecomment-767393740","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7082","id":767393740,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzM5Mzc0MA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T08:45:40Z","updated_at":"2021-03-23T06:09:14Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=h1) Report\n> Merging [#7082](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=desc) (b9e6526) into [master](https://codecov.io/gh/apache/dubbo/commit/eef6b450fc69f6670d19c050719a6766343a1729?el=desc) (eef6b45) will **increase** coverage by `0.06%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7082/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7082      +/-   ##\n============================================\n+ Coverage     59.06%   59.12%   +0.06%     \n+ Complexity      462      456       -6     \n============================================\n  Files          1044     1043       -1     \n  Lines         42480    42516      +36     \n  Branches       6229     6226       -3     \n============================================\n+ Hits          25090    25138      +48     \n  Misses        14591    14591              \n+ Partials       2799     2787      -12     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../dubbo/registry/integration/RegistryDirectory.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9pbnRlZ3JhdGlvbi9SZWdpc3RyeURpcmVjdG9yeS5qYXZh) | `75.66% <ø> (-0.85%)` | `0.00 <0.00> (ø)` | |\n| [.../java/org/apache/dubbo/qos/command/impl/Ready.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcGx1Z2luL2R1YmJvLXFvcy9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vcW9zL2NvbW1hbmQvaW1wbC9SZWFkeS5qYXZh) | `3.33% <0.00%> (-46.67%)` | `0.00% <0.00%> (ø%)` | |\n| [...in/java/org/apache/dubbo/common/utils/IOUtils.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdXRpbHMvSU9VdGlscy5qYXZh) | `65.45% <0.00%> (-22.36%)` | `0.00% <0.00%> (ø%)` | |\n| [...che/dubbo/remoting/transport/mina/MinaChannel.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbWluYS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vcmVtb3RpbmcvdHJhbnNwb3J0L21pbmEvTWluYUNoYW5uZWwuamF2YQ==) | `35.52% <0.00%> (-14.48%)` | `14.00% <0.00%> (-2.00%)` | |\n| [...in/java/org/apache/dubbo/common/utils/JVMUtil.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdXRpbHMvSlZNVXRpbC5qYXZh) | `81.13% <0.00%> (-11.33%)` | `0.00% <0.00%> (ø%)` | |\n| [...ache/dubbo/remoting/transport/mina/MinaServer.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbWluYS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvZHViYm8vcmVtb3RpbmcvdHJhbnNwb3J0L21pbmEvTWluYVNlcnZlci5qYXZh) | `53.33% <0.00%> (-10.00%)` | `5.00% <0.00%> (-1.00%)` | |\n| [...dubbo/remoting/exchange/support/DefaultFuture.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy9leGNoYW5nZS9zdXBwb3J0L0RlZmF1bHRGdXR1cmUuamF2YQ==) | `80.34% <0.00%> (-7.70%)` | `0.00% <0.00%> (ø%)` | |\n| [.../dubbo/remoting/transport/netty4/NettyChannel.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHk0L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvbmV0dHk0L05ldHR5Q2hhbm5lbC5qYXZh) | `62.37% <0.00%> (-4.96%)` | `0.00% <0.00%> (ø%)` | |\n| [.../threadpool/manager/DefaultExecutorRepository.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdGhyZWFkcG9vbC9tYW5hZ2VyL0RlZmF1bHRFeGVjdXRvclJlcG9zaXRvcnkuamF2YQ==) | `79.03% <0.00%> (-4.84%)` | `0.00% <0.00%> (ø%)` | |\n| [...e/dubbo/remoting/transport/netty/NettyChannel.java](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL3RyYW5zcG9ydC9uZXR0eS9OZXR0eUNoYW5uZWwuamF2YQ==) | `55.68% <0.00%> (-4.55%)` | `20.00% <0.00%> (-1.00%)` | |\n| ... and [95 more](https://codecov.io/gh/apache/dubbo/pull/7082/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=footer). Last update [eef6b45...b9e6526](https://codecov.io/gh/apache/dubbo/pull/7082?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767393740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767439848","html_url":"https://github.com/apache/dubbo/issues/1784#issuecomment-767439848","issue_url":"https://api.github.com/repos/apache/dubbo/issues/1784","id":767439848,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzQzOTg0OA==","user":{"login":"shihuncl","id":21328635,"node_id":"MDQ6VXNlcjIxMzI4NjM1","avatar_url":"https://avatars.githubusercontent.com/u/21328635?v=4","gravatar_id":"","url":"https://api.github.com/users/shihuncl","html_url":"https://github.com/shihuncl","followers_url":"https://api.github.com/users/shihuncl/followers","following_url":"https://api.github.com/users/shihuncl/following{/other_user}","gists_url":"https://api.github.com/users/shihuncl/gists{/gist_id}","starred_url":"https://api.github.com/users/shihuncl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shihuncl/subscriptions","organizations_url":"https://api.github.com/users/shihuncl/orgs","repos_url":"https://api.github.com/users/shihuncl/repos","events_url":"https://api.github.com/users/shihuncl/events{/privacy}","received_events_url":"https://api.github.com/users/shihuncl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T10:08:41Z","updated_at":"2021-01-26T10:08:41Z","author_association":"NONE","body":"线上的问题已经定位到是因为5分钟执行一次的定时任务操作大对象，导致过一段时间那个服务节点要执行GC。这个时候请求过来只能等GC结束导致dubbo请求超时。","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767439848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767472875","html_url":"https://github.com/apache/dubbo/issues/7096#issuecomment-767472875","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7096","id":767472875,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzQ3Mjg3NQ==","user":{"login":"gcdd1993","id":26523525,"node_id":"MDQ6VXNlcjI2NTIzNTI1","avatar_url":"https://avatars.githubusercontent.com/u/26523525?v=4","gravatar_id":"","url":"https://api.github.com/users/gcdd1993","html_url":"https://github.com/gcdd1993","followers_url":"https://api.github.com/users/gcdd1993/followers","following_url":"https://api.github.com/users/gcdd1993/following{/other_user}","gists_url":"https://api.github.com/users/gcdd1993/gists{/gist_id}","starred_url":"https://api.github.com/users/gcdd1993/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gcdd1993/subscriptions","organizations_url":"https://api.github.com/users/gcdd1993/orgs","repos_url":"https://api.github.com/users/gcdd1993/repos","events_url":"https://api.github.com/users/gcdd1993/events{/privacy}","received_events_url":"https://api.github.com/users/gcdd1993/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T11:09:46Z","updated_at":"2021-01-26T11:09:46Z","author_association":"NONE","body":"@dkisser ，使用Dubbo的注册中心，例如`Redis Registry`，是否也是**只有在连接断开才会重新建立连接**？","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767472875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767494637","html_url":"https://github.com/apache/dubbo/pull/7135#issuecomment-767494637","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7135","id":767494637,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzQ5NDYzNw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T11:55:12Z","updated_at":"2021-01-26T16:02:35Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=h1) Report\n> Merging [#7135](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=desc) (238fd8c) into [master](https://codecov.io/gh/apache/dubbo/commit/27571a094e668aa87797d11283ab9f0ba383b3c3?el=desc) (27571a0) will **decrease** coverage by `0.22%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7135/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7135      +/-   ##\n============================================\n- Coverage     60.28%   60.05%   -0.23%     \n+ Complexity      510      506       -4     \n============================================\n  Files          1028     1028              \n  Lines         41531    41531              \n  Branches       6038     6038              \n============================================\n- Hits          25037    24943      -94     \n- Misses        13750    13817      +67     \n- Partials       2744     2771      +27     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...ng/transport/dispatcher/all/AllChannelHandler.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvZGlzcGF0Y2hlci9hbGwvQWxsQ2hhbm5lbEhhbmRsZXIuamF2YQ==) | `62.06% <0.00%> (-27.59%)` | `0.00% <0.00%> (ø%)` | |\n| [...bo/config/event/listener/LoggingEventListener.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tY29uZmlnL2R1YmJvLWNvbmZpZy1hcGkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL2NvbmZpZy9ldmVudC9saXN0ZW5lci9Mb2dnaW5nRXZlbnRMaXN0ZW5lci5qYXZh) | `37.50% <0.00%> (-25.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...dubbo/common/status/support/LoadStatusChecker.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vc3RhdHVzL3N1cHBvcnQvTG9hZFN0YXR1c0NoZWNrZXIuamF2YQ==) | `46.15% <0.00%> (-15.39%)` | `0.00% <0.00%> (ø%)` | |\n| [...ng/transport/dispatcher/WrappedChannelHandler.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvZGlzcGF0Y2hlci9XcmFwcGVkQ2hhbm5lbEhhbmRsZXIuamF2YQ==) | `47.82% <0.00%> (-15.22%)` | `0.00% <0.00%> (ø%)` | |\n| [.../remoting/transport/netty4/NettyServerHandler.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHk0L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvbmV0dHk0L05ldHR5U2VydmVySGFuZGxlci5qYXZh) | `56.81% <0.00%> (-13.64%)` | `0.00% <0.00%> (ø%)` | |\n| [...mmon/threadpool/support/AbortPolicyWithReport.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9jb21tb24vdGhyZWFkcG9vbC9zdXBwb3J0L0Fib3J0UG9saWN5V2l0aFJlcG9ydC5qYXZh) | `85.00% <0.00%> (-12.50%)` | `0.00% <0.00%> (ø%)` | |\n| [...va/org/apache/dubbo/remoting/TimeoutException.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy9UaW1lb3V0RXhjZXB0aW9uLmphdmE=) | `22.22% <0.00%> (-11.12%)` | `0.00% <0.00%> (ø%)` | |\n| [.../remoting/transport/netty4/NettyClientHandler.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctbmV0dHk0L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvbmV0dHk0L05ldHR5Q2xpZW50SGFuZGxlci5qYXZh) | `57.62% <0.00%> (-10.17%)` | `0.00% <0.00%> (ø%)` | |\n| [...dubbo/remoting/exchange/support/DefaultFuture.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy9leGNoYW5nZS9zdXBwb3J0L0RlZmF1bHRGdXR1cmUuamF2YQ==) | `78.63% <0.00%> (-9.41%)` | `0.00% <0.00%> (ø%)` | |\n| [.../apache/dubbo/remoting/transport/AbstractPeer.java](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZW1vdGluZy90cmFuc3BvcnQvQWJzdHJhY3RQZWVyLmphdmE=) | `58.69% <0.00%> (-8.70%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [19 more](https://codecov.io/gh/apache/dubbo/pull/7135/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=footer). Last update [27571a0...238fd8c](https://codecov.io/gh/apache/dubbo/pull/7135?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767494637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767543591","html_url":"https://github.com/apache/dubbo/issues/7074#issuecomment-767543591","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7074","id":767543591,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzU0MzU5MQ==","user":{"login":"ethanas","id":12426471,"node_id":"MDQ6VXNlcjEyNDI2NDcx","avatar_url":"https://avatars.githubusercontent.com/u/12426471?v=4","gravatar_id":"","url":"https://api.github.com/users/ethanas","html_url":"https://github.com/ethanas","followers_url":"https://api.github.com/users/ethanas/followers","following_url":"https://api.github.com/users/ethanas/following{/other_user}","gists_url":"https://api.github.com/users/ethanas/gists{/gist_id}","starred_url":"https://api.github.com/users/ethanas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ethanas/subscriptions","organizations_url":"https://api.github.com/users/ethanas/orgs","repos_url":"https://api.github.com/users/ethanas/repos","events_url":"https://api.github.com/users/ethanas/events{/privacy}","received_events_url":"https://api.github.com/users/ethanas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T13:33:48Z","updated_at":"2021-01-26T13:33:48Z","author_association":"NONE","body":"重新还原了重现的代码,使用https://github.com/apache/dubbo/commit/d731a0c0c6362bcc8499727b3239f878a960d67b  此修复方案，发现还是会存在，我重现的代码是同一个服务在一个spring容器中会多次上线的情况，service唯一的区别就是extrakey以及protocol的端口号。复现代码的话可以email我(codeops#163#com)，或者留个邮箱，我打包发下\r\n\r\nhttps://github.com/apache/dubbo/commit/d731a0c0c6362bcc8499727b3239f878a960d67b 还有个问题\r\n\r\nZookeeperRegistry 194行 ChildListener zkListener = listeners.putIfAbsent(listener, childListener);第一put会有null\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767543591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767677225","html_url":"https://github.com/apache/dubbo/pull/7126#issuecomment-767677225","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7126","id":767677225,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzY3NzIyNQ==","user":{"login":"horizonzy","id":22524871,"node_id":"MDQ6VXNlcjIyNTI0ODcx","avatar_url":"https://avatars.githubusercontent.com/u/22524871?v=4","gravatar_id":"","url":"https://api.github.com/users/horizonzy","html_url":"https://github.com/horizonzy","followers_url":"https://api.github.com/users/horizonzy/followers","following_url":"https://api.github.com/users/horizonzy/following{/other_user}","gists_url":"https://api.github.com/users/horizonzy/gists{/gist_id}","starred_url":"https://api.github.com/users/horizonzy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/horizonzy/subscriptions","organizations_url":"https://api.github.com/users/horizonzy/orgs","repos_url":"https://api.github.com/users/horizonzy/repos","events_url":"https://api.github.com/users/horizonzy/events{/privacy}","received_events_url":"https://api.github.com/users/horizonzy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-26T16:51:13Z","updated_at":"2021-01-26T16:51:13Z","author_association":"MEMBER","body":"> first put will cause Null Point Exception?\r\n\r\nI remember I modify it. Please view file changes. The second commit already fix it.","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767677225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767965162","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767965162","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767965162,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzk2NTE2Mg==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T02:17:44Z","updated_at":"2021-01-27T02:25:59Z","author_association":"NONE","body":"1.26号的，1.27还在\r\n![image](https://user-images.githubusercontent.com/13444558/105933799-09236500-608a-11eb-9f3d-115402769543.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767965162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767968358","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767968358","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767968358,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzk2ODM1OA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T02:26:04Z","updated_at":"2021-01-27T02:26:04Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/13444558/105933782-032d8400-608a-11eb-9b40-286d575da2c3.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767968358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767978363","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767978363","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767978363,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzk3ODM2Mw==","user":{"login":"xiaoheng1","id":12539730,"node_id":"MDQ6VXNlcjEyNTM5NzMw","avatar_url":"https://avatars.githubusercontent.com/u/12539730?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoheng1","html_url":"https://github.com/xiaoheng1","followers_url":"https://api.github.com/users/xiaoheng1/followers","following_url":"https://api.github.com/users/xiaoheng1/following{/other_user}","gists_url":"https://api.github.com/users/xiaoheng1/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoheng1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoheng1/subscriptions","organizations_url":"https://api.github.com/users/xiaoheng1/orgs","repos_url":"https://api.github.com/users/xiaoheng1/repos","events_url":"https://api.github.com/users/xiaoheng1/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoheng1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T02:51:57Z","updated_at":"2021-01-27T02:51:57Z","author_association":"CONTRIBUTOR","body":"你把你的 zk 的配置文件贴出来看下","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767978363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767979524","html_url":"https://github.com/apache/dubbo/pull/7139#issuecomment-767979524","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7139","id":767979524,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzk3OTUyNA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T02:54:59Z","updated_at":"2021-01-27T02:57:38Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=h1) Report\n> Merging [#7139](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=desc) (54aa7af) into [master](https://codecov.io/gh/apache/dubbo/commit/27571a094e668aa87797d11283ab9f0ba383b3c3?el=desc) (27571a0) will **decrease** coverage by `1.42%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/dubbo/pull/7139/graphs/tree.svg?width=650&height=150&src=pr&token=VnEIkiFQT0)](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #7139      +/-   ##\n============================================\n- Coverage     60.28%   58.85%   -1.43%     \n+ Complexity      510      424      -86     \n============================================\n  Files          1028     1028              \n  Lines         41531    41531              \n  Branches       6038     6038              \n============================================\n- Hits          25037    24444     -593     \n- Misses        13750    14386     +636     \n+ Partials       2744     2701      -43     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...java/org/apache/dubbo/remoting/etcd/Constants.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctZXRjZDMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL2V0Y2QvQ29uc3RhbnRzLmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...e/dubbo/registry/consul/ConsulRegistryFactory.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsUmVnaXN0cnlGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [...metadata/store/etcd/EtcdMetadataReportFactory.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtcmVwb3J0LWV0Y2Qvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL21ldGFkYXRhL3N0b3JlL2V0Y2QvRXRjZE1ldGFkYXRhUmVwb3J0RmFjdG9yeS5qYXZh) | `0.00% <0.00%> (-100.00%)` | `0.00% <0.00%> (-2.00%)` | |\n| [.../apache/dubbo/registry/consul/ConsulParameter.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsUGFyYW1ldGVyLmphdmE=) | `0.00% <0.00%> (-88.89%)` | `0.00% <0.00%> (-6.00%)` | |\n| [.../apache/dubbo/remoting/etcd/jetcd/RetryNTimes.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctZXRjZDMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL2V0Y2QvamV0Y2QvUmV0cnlOVGltZXMuamF2YQ==) | `0.00% <0.00%> (-75.00%)` | `0.00% <0.00%> (ø%)` | |\n| [.../dubbo/metadata/store/etcd/EtcdMetadataReport.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtcmVwb3J0LWV0Y2Qvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL21ldGFkYXRhL3N0b3JlL2V0Y2QvRXRjZE1ldGFkYXRhUmVwb3J0LmphdmE=) | `0.00% <0.00%> (-65.79%)` | `0.00% <0.00%> (-13.00%)` | |\n| [.../identifier/BaseApplicationMetadataIdentifier.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tbWV0YWRhdGEvZHViYm8tbWV0YWRhdGEtYXBpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9tZXRhZGF0YS9yZXBvcnQvaWRlbnRpZmllci9CYXNlQXBwbGljYXRpb25NZXRhZGF0YUlkZW50aWZpZXIuamF2YQ==) | `0.00% <0.00%> (-64.29%)` | `0.00% <0.00%> (ø%)` | |\n| [.../dubbo/registry/consul/ConsulServiceDiscovery.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsU2VydmljZURpc2NvdmVyeS5qYXZh) | `0.00% <0.00%> (-62.19%)` | `0.00% <0.00%> (-25.00%)` | |\n| [...g/apache/dubbo/registry/consul/ConsulRegistry.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVnaXN0cnkvZHViYm8tcmVnaXN0cnktY29uc3VsL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9kdWJiby9yZWdpc3RyeS9jb25zdWwvQ29uc3VsUmVnaXN0cnkuamF2YQ==) | `0.00% <0.00%> (-60.59%)` | `0.00% <0.00%> (-31.00%)` | |\n| [...g/apache/dubbo/remoting/etcd/jetcd/RetryLoops.java](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree#diff-ZHViYm8tcmVtb3RpbmcvZHViYm8tcmVtb3RpbmctZXRjZDMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2R1YmJvL3JlbW90aW5nL2V0Y2QvamV0Y2QvUmV0cnlMb29wcy5qYXZh) | `0.00% <0.00%> (-50.00%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [49 more](https://codecov.io/gh/apache/dubbo/pull/7139/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=footer). Last update [27571a0...54aa7af](https://codecov.io/gh/apache/dubbo/pull/7139?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767979524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767988210","html_url":"https://github.com/apache/dubbo/issues/7124#issuecomment-767988210","issue_url":"https://api.github.com/repos/apache/dubbo/issues/7124","id":767988210,"node_id":"MDEyOklzc3VlQ29tbWVudDc2Nzk4ODIxMA==","user":{"login":"Donaldhan","id":13444558,"node_id":"MDQ6VXNlcjEzNDQ0NTU4","avatar_url":"https://avatars.githubusercontent.com/u/13444558?v=4","gravatar_id":"","url":"https://api.github.com/users/Donaldhan","html_url":"https://github.com/Donaldhan","followers_url":"https://api.github.com/users/Donaldhan/followers","following_url":"https://api.github.com/users/Donaldhan/following{/other_user}","gists_url":"https://api.github.com/users/Donaldhan/gists{/gist_id}","starred_url":"https://api.github.com/users/Donaldhan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Donaldhan/subscriptions","organizations_url":"https://api.github.com/users/Donaldhan/orgs","repos_url":"https://api.github.com/users/Donaldhan/repos","events_url":"https://api.github.com/users/Donaldhan/events{/privacy}","received_events_url":"https://api.github.com/users/Donaldhan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-27T03:17:58Z","updated_at":"2021-01-27T03:17:58Z","author_association":"NONE","body":"今天突然发现Zk启动的最大和最小超时会话id为-1：想看一下是不是这个问题：\r\n![image](https://user-images.githubusercontent.com/13444558/105937318-4559c400-6090-11eb-83a2-1bad186f552e.png)\r\n\r\nzk超时会话设置\r\n```java\r\n int sessionTimeout = connReq.getTimeOut();\r\n        byte passwd[] = connReq.getPasswd();\r\n        int minSessionTimeout = getMinSessionTimeout();\r\n        if (sessionTimeout < minSessionTimeout) {\r\n            sessionTimeout = minSessionTimeout;\r\n        }\r\n        int maxSessionTimeout = getMaxSessionTimeout();\r\n        if (sessionTimeout > maxSessionTimeout) {\r\n            sessionTimeout = maxSessionTimeout;\r\n        }\r\n        cnxn.setSessionTimeout(sessionTimeout);\r\n```\r\n\r\n根据配置和连接会话的超时时间，取客户端的sessionTimeout ，zk配置的minSessionTimeout，maxSessionTimeout， 那我就吧zk配置minSessionTimeout，maxSessionTimeout设置为60s；\r\n```\r\n# The number of milliseconds of each tick\r\ntickTime=20000000\r\n# The number of ticks that the initial \r\n# synchronization phase can take\r\ninitLimit=10\r\n# The number of ticks that can pass between \r\n# sending a request and getting an acknowledgement\r\nsyncLimit=5\r\n# the directory where the snapshot is stored.\r\n# do not use /tmp for storage, /tmp here is just \r\n# example sakes.\r\ndataDir=/tmp/zookeeper\r\n# the port at which the clients will connect\r\nclientPort=2181\r\n# the maximum number of client connections.\r\n# increase this if you need to handle more clients\r\n#maxClientCnxns=60\r\nminSessionTimeout=60000\r\nmaxSessionTimeout=60000\r\n#\r\n# Be sure to read the maintenance section of the \r\n# administrator guide before turning on autopurge.\r\n#\r\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\r\n#\r\n# The number of snapshots to retain in dataDir\r\n#autopurge.snapRetainCount=3\r\n# Purge task interval in hours\r\n# Set to \"0\" to disable auto purge feature\r\n#autopurge.purgeInterval=1\r\n```\r\n\r\n再次重启：\r\n![image](https://user-images.githubusercontent.com/13444558/105937500-a4b7d400-6090-11eb-8866-9bda32810ab3.png)\r\n\r\n服务注册\r\n![image](https://user-images.githubusercontent.com/13444558/105937518-af726900-6090-11eb-8010-ca609fe7cdfa.png)\r\n\r\n关闭服务\r\n![image](https://user-images.githubusercontent.com/13444558/105937532-b8633a80-6090-11eb-8103-7bb0493f4fe3.png)\r\n\r\n再次查看zk节点\r\n![image](https://user-images.githubusercontent.com/13444558/105937543-c1eca280-6090-11eb-8f1b-61e580a978e7.png)\r\n\r\n客户端关闭应该超过60s了还没有关闭\r\n\r\n查看zk的关于会话超时的说明\r\nhttps://zookeeper.apache.org/doc/r3.4.5/zookeeperProgrammers.html#ch_zkSessions\r\n![image](https://user-images.githubusercontent.com/13444558/105937810-43dccb80-6091-11eb-8a61-e83993f1f230.png)\r\n\r\n跟zk无关。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/dubbo/issues/comments/767988210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]