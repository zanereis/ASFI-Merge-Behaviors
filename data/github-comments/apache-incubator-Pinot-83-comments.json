[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771083123","html_url":"https://github.com/apache/pinot/pull/6479#issuecomment-771083123","issue_url":"https://api.github.com/repos/apache/pinot/issues/6479","id":771083123,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTA4MzEyMw==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T19:02:03Z","updated_at":"2021-02-01T19:02:03Z","author_association":"MEMBER","body":"> > Thanks for the details @jackjlli, could you also is IntermediateSegment better than existing MutableSegment? For example, you could stream input data to MutableSegment and flush it as needed. This also solves multiple problems:\r\n> > \r\n> > * Common code base for offline and RT segment generation (at least for the streaming part).\r\n> > * Sorting can now be done for offline within SegmentGeneration, instead of having users to explicitly do so.\r\n> > * Auto segment sizing that happens in RT will can also be done with offline now.\r\n> > \r\n> > Thoughts @jackjlli @Jackie-Jiang?\r\n> \r\n> I think this is a good idea to explore, but I suspect memory utilization on the offline side may go up significantly.\r\n> \r\n> Also, the auto-segment sizing in realtime is implemented (in the controller) by learning the history of segments already completed. For offline generation, if we can keep a history or some learning mechanism, then it may be possible to implement approximate segment sizing algorithms -- whether we use MutableSegment to build segments or not.\r\n\r\n1. Yes, memory utilization will go up significantly, that's why I didn't directly use `MutableSegment` but `IntermediateSegment` as the intermediate container here.  In fact, both `IntermediateSegment` and `MutableSegment` share the common minimal piece of logic, which is that both have forwarded index. The slight difference is that `MutableSegment` will have all the indices (if applicable) like inverted index, text index, etc, for querying purposes. `IntermediateSegment` just keep the minimal component like dictionary.\r\n2. Plus, if we want partitioning/ sorting, these steps can be done in the platform (like mapreduce, spark) before converting the raw data. In fact, we've already had that logic in LinkedIn. Once this PR is committed, we can consider open sourcing that spark code as well.\r\n3. Auto-segment size is a good idea that historical data can be used to predict the cardinality or buffer size. While offline segment generation is not always done on the same machine, the historical data would be meaningless if they cannot be reused. If historical data is from controller, then all the worker machines have to query pinot controller simultaneously in order to get the historical data, which could bring huge amount of queries to controller. That's why I didn't bring it here in this PR. We can always add it to `IntermediateSegment` in the future, since the structure between `IntermediateSegment` and `MutableSegment` are pretty much the same.\r\n\r\nAll 3 points above are really good features, but it'd be too much to be in a single PR. It'd be good if we can leave room for those features and pick them up in the following PRs if applicable. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771083123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771096497","html_url":"https://github.com/apache/pinot/pull/6513#issuecomment-771096497","issue_url":"https://api.github.com/repos/apache/pinot/issues/6513","id":771096497,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTA5NjQ5Nw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T19:22:16Z","updated_at":"2021-02-01T19:22:16Z","author_association":"CONTRIBUTOR","body":"Replaced by #6515 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771096497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771145481","html_url":"https://github.com/apache/pinot/issues/6516#issuecomment-771145481","issue_url":"https://api.github.com/repos/apache/pinot/issues/6516","id":771145481,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTE0NTQ4MQ==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T20:44:22Z","updated_at":"2021-02-01T20:44:22Z","author_association":"MEMBER","body":"can you please elaborate \"set error messages in helix\"","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771145481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771178201","html_url":"https://github.com/apache/pinot/issues/6516#issuecomment-771178201","issue_url":"https://api.github.com/repos/apache/pinot/issues/6516","id":771178201,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTE3ODIwMQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T21:41:13Z","updated_at":"2021-02-01T21:41:13Z","author_association":"CONTRIBUTOR","body":"If I understand what @fx19880617  is saying, it is to provide an API in the controller to retrieve Helix state transition error messages and perhaps history as well. I concur that it is a useful feature to have. Once we have the servers and the error messages, we can look into the server for a specific cause.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771178201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771204637","html_url":"https://github.com/apache/pinot/pull/6515#issuecomment-771204637","issue_url":"https://api.github.com/repos/apache/pinot/issues/6515","id":771204637,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTIwNDYzNw==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T22:28:50Z","updated_at":"2021-02-01T22:46:21Z","author_association":"CONTRIBUTOR","body":"re high-level question:\r\nPinot mingles two aspects - naming and discovery - and the helix InstanceConfig only supports a single port per instance. I worked around this restriction by decoupling naming (i.e. `inferPort()`) and using separate helix properties to represent and discover ports (e.g. `NETTYTLS_PORT_KEY`, `ADMIN_HTTPS_PORT_KEY`, ...)\r\nIn other words, with the addition of listener specs, pinot's code doesn't rely on (or provides overrides for) Helix InstanceConfig ports in every place.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771204637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771206290","html_url":"https://github.com/apache/pinot/issues/6516#issuecomment-771206290","issue_url":"https://api.github.com/repos/apache/pinot/issues/6516","id":771206290,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTIwNjI5MA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T22:32:06Z","updated_at":"2021-02-01T22:32:06Z","author_association":"CONTRIBUTOR","body":"Yes, right now we only know that segment in error state from external view. The goal is to also set the stacktrace for segment loading and easy for users to retrieve it. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771206290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771222590","html_url":"https://github.com/apache/pinot/issues/6509#issuecomment-771222590","issue_url":"https://api.github.com/repos/apache/pinot/issues/6509","id":771222590,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTIyMjU5MA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T23:04:16Z","updated_at":"2021-02-01T23:04:16Z","author_association":"CONTRIBUTOR","body":"hmm, does it work with java 11?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771222590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771241792","html_url":"https://github.com/apache/pinot/pull/6515#issuecomment-771241792","issue_url":"https://api.github.com/repos/apache/pinot/issues/6515","id":771241792,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTI0MTc5Mg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-01T23:50:37Z","updated_at":"2021-02-02T00:49:30Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=h1) Report\n> Merging [#6515](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=desc) (96bc4b7) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.53%`.\n> The diff coverage is `41.98%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6515/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6515       +/-   ##\n===========================================\n- Coverage   66.44%   43.91%   -22.54%     \n===========================================\n  Files        1075     1334      +259     \n  Lines       54773    65796    +11023     \n  Branches     8168     9607     +1439     \n===========================================\n- Hits        36396    28892     -7504     \n- Misses      15700    34466    +18766     \n+ Partials     2677     2438      -239     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.91% <41.98%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1337 more](https://codecov.io/gh/apache/incubator-pinot/pull/6515/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=footer). Last update [0f398a7...96bc4b7](https://codecov.io/gh/apache/incubator-pinot/pull/6515?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771241792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771281912","html_url":"https://github.com/apache/pinot/issues/6517#issuecomment-771281912","issue_url":"https://api.github.com/repos/apache/pinot/issues/6517","id":771281912,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTI4MTkxMg==","user":{"login":"subourbonite","id":10916802,"node_id":"MDQ6VXNlcjEwOTE2ODAy","avatar_url":"https://avatars.githubusercontent.com/u/10916802?v=4","gravatar_id":"","url":"https://api.github.com/users/subourbonite","html_url":"https://github.com/subourbonite","followers_url":"https://api.github.com/users/subourbonite/followers","following_url":"https://api.github.com/users/subourbonite/following{/other_user}","gists_url":"https://api.github.com/users/subourbonite/gists{/gist_id}","starred_url":"https://api.github.com/users/subourbonite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/subourbonite/subscriptions","organizations_url":"https://api.github.com/users/subourbonite/orgs","repos_url":"https://api.github.com/users/subourbonite/repos","events_url":"https://api.github.com/users/subourbonite/events{/privacy}","received_events_url":"https://api.github.com/users/subourbonite/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T01:33:55Z","updated_at":"2021-02-02T01:35:20Z","author_association":"CONTRIBUTOR","body":"I actually think that having the same column name spread around multiple systems with a different grain / format / definition can become a serious data usability problem over time - especially if queries expecting the original grain or format still run successfully against the 'new' format, but return different (or unexpected) results. I always try to adhere to the principle of least surprise when designing data models for consumption.\r\n\r\nDoes it make sense to possibly make a column replacement fail by default, and require an explicit override to enable?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771281912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771365730","html_url":"https://github.com/apache/pinot/issues/6519#issuecomment-771365730","issue_url":"https://api.github.com/repos/apache/pinot/issues/6519","id":771365730,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTM2NTczMA==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T05:09:25Z","updated_at":"2021-02-02T05:09:25Z","author_association":"MEMBER","body":"@KKcorps ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771365730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771387950","html_url":"https://github.com/apache/pinot/issues/6516#issuecomment-771387950","issue_url":"https://api.github.com/repos/apache/pinot/issues/6516","id":771387950,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTM4Nzk1MA==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T06:04:03Z","updated_at":"2021-02-02T06:04:03Z","author_association":"MEMBER","body":"Got it. One thing to keep in mind is that state transition error messages get cleaned up automatically by Helix. we should probably do something like this\r\n- each server stores the error message/segment status in segmentDataManager\r\n- exposes an api to get the status along with message\r\n- controller can invoke the server api on demand\r\n\r\nPlease don't save the error stacktrace in Helix","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771387950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771462472","html_url":"https://github.com/apache/pinot/issues/5598#issuecomment-771462472","issue_url":"https://api.github.com/repos/apache/pinot/issues/5598","id":771462472,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTQ2MjQ3Mg==","user":{"login":"tannghia025","id":55869601,"node_id":"MDQ6VXNlcjU1ODY5NjAx","avatar_url":"https://avatars.githubusercontent.com/u/55869601?v=4","gravatar_id":"","url":"https://api.github.com/users/tannghia025","html_url":"https://github.com/tannghia025","followers_url":"https://api.github.com/users/tannghia025/followers","following_url":"https://api.github.com/users/tannghia025/following{/other_user}","gists_url":"https://api.github.com/users/tannghia025/gists{/gist_id}","starred_url":"https://api.github.com/users/tannghia025/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tannghia025/subscriptions","organizations_url":"https://api.github.com/users/tannghia025/orgs","repos_url":"https://api.github.com/users/tannghia025/repos","events_url":"https://api.github.com/users/tannghia025/events{/privacy}","received_events_url":"https://api.github.com/users/tannghia025/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T08:31:20Z","updated_at":"2021-02-02T08:32:01Z","author_association":"NONE","body":"có ví dụ write xuống pinot đâu nói như thiệt cay vl","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771462472/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771605142","html_url":"https://github.com/apache/pinot/issues/6519#issuecomment-771605142","issue_url":"https://api.github.com/repos/apache/pinot/issues/6519","id":771605142,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTYwNTE0Mg==","user":{"login":"KKcorps","id":5559703,"node_id":"MDQ6VXNlcjU1NTk3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5559703?v=4","gravatar_id":"","url":"https://api.github.com/users/KKcorps","html_url":"https://github.com/KKcorps","followers_url":"https://api.github.com/users/KKcorps/followers","following_url":"https://api.github.com/users/KKcorps/following{/other_user}","gists_url":"https://api.github.com/users/KKcorps/gists{/gist_id}","starred_url":"https://api.github.com/users/KKcorps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KKcorps/subscriptions","organizations_url":"https://api.github.com/users/KKcorps/orgs","repos_url":"https://api.github.com/users/KKcorps/repos","events_url":"https://api.github.com/users/KKcorps/events{/privacy}","received_events_url":"https://api.github.com/users/KKcorps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T12:35:30Z","updated_at":"2021-02-02T12:35:30Z","author_association":"CONTRIBUTOR","body":"Hi @HyunjoonCho Thanks for pointing out the issue. Fixing it in the docs now.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771605142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771628362","html_url":"https://github.com/apache/pinot/issues/6519#issuecomment-771628362","issue_url":"https://api.github.com/repos/apache/pinot/issues/6519","id":771628362,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTYyODM2Mg==","user":{"login":"KKcorps","id":5559703,"node_id":"MDQ6VXNlcjU1NTk3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5559703?v=4","gravatar_id":"","url":"https://api.github.com/users/KKcorps","html_url":"https://github.com/KKcorps","followers_url":"https://api.github.com/users/KKcorps/followers","following_url":"https://api.github.com/users/KKcorps/following{/other_user}","gists_url":"https://api.github.com/users/KKcorps/gists{/gist_id}","starred_url":"https://api.github.com/users/KKcorps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KKcorps/subscriptions","organizations_url":"https://api.github.com/users/KKcorps/orgs","repos_url":"https://api.github.com/users/KKcorps/repos","events_url":"https://api.github.com/users/KKcorps/events{/privacy}","received_events_url":"https://api.github.com/users/KKcorps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T13:18:33Z","updated_at":"2021-02-02T13:18:33Z","author_association":"CONTRIBUTOR","body":"Hi @HyunjoonCho I can see it mentions controller URL only in the page you mentioned. Can you point me to the exact location where you found WIP and old config.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771628362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771631182","html_url":"https://github.com/apache/pinot/issues/6519#issuecomment-771631182","issue_url":"https://api.github.com/repos/apache/pinot/issues/6519","id":771631182,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTYzMTE4Mg==","user":{"login":"HyunjoonCho","id":59246310,"node_id":"MDQ6VXNlcjU5MjQ2MzEw","avatar_url":"https://avatars.githubusercontent.com/u/59246310?v=4","gravatar_id":"","url":"https://api.github.com/users/HyunjoonCho","html_url":"https://github.com/HyunjoonCho","followers_url":"https://api.github.com/users/HyunjoonCho/followers","following_url":"https://api.github.com/users/HyunjoonCho/following{/other_user}","gists_url":"https://api.github.com/users/HyunjoonCho/gists{/gist_id}","starred_url":"https://api.github.com/users/HyunjoonCho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HyunjoonCho/subscriptions","organizations_url":"https://api.github.com/users/HyunjoonCho/orgs","repos_url":"https://api.github.com/users/HyunjoonCho/repos","events_url":"https://api.github.com/users/HyunjoonCho/events{/privacy}","received_events_url":"https://api.github.com/users/HyunjoonCho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T13:23:13Z","updated_at":"2021-02-02T13:27:31Z","author_association":"NONE","body":"Hi, the page I mentioned said WIP 8 hours ago but seems someone fixed it today! Thanks\r\n![image](https://user-images.githubusercontent.com/59246310/106606701-c7bd1900-65a5-11eb-9359-a93720ed66a6.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771631182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771689647","html_url":"https://github.com/apache/pinot/issues/6522#issuecomment-771689647","issue_url":"https://api.github.com/repos/apache/pinot/issues/6522","id":771689647,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTY4OTY0Nw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T14:52:34Z","updated_at":"2021-02-02T14:52:34Z","author_association":"NONE","body":"After restart I can see different error also , seems like something not correct with segements. This happened when I accessed the table via controller UI.\r\n\r\n```\r\nmy-pinot-controller-0 controller 2021/02/02 14:48:42.466 WARN [MultiGetRequest] [restapi-multiget-thread-1] Caught 'java.net.SocketTimeoutException: Read timed out' while executing GET on URL: http://my-pinot-server-2.my-pinot-server-headless.logging.svc.cluster.local:8097/table/mylog_REALTIME/size\r\nmy-pinot-controller-0 controller 2021/02/02 14:48:42.467 ERROR [CompletionServiceHelper] [grizzly-http-server-2] Connection error\r\nmy-pinot-controller-0 controller java.util.concurrent.ExecutionException: java.net.SocketTimeoutException: Read timed out\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.FutureTask.get(FutureTask.java:192) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat org.apache.pinot.controller.util.CompletionServiceHelper.doMultiGetRequest(CompletionServiceHelper.java:65) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.pinot.controller.api.resources.ServerTableSizeReader.getSegmentSizeInfoFromServers(ServerTableSizeReader.java:69) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.pinot.controller.util.TableSizeReader.getTableSubtypeSize(TableSizeReader.java:156) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.pinot.controller.util.TableSizeReader.getTableSizeDetails(TableSizeReader.java:100) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.pinot.controller.api.resources.TableSize.getTableSize(TableSize.java:75) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:124) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:167) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$TypeOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:219) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:79) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:469) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:391) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:80) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:253) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.internal.Errors.process(Errors.java:292) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.internal.Errors.process(Errors.java:274) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.internal.Errors.process(Errors.java:244) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:232) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:679) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.service(GrizzlyHttpContainer.java:353) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.grizzly.http.server.HttpHandler$1.run(HttpHandler.java:200) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:569) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:549) [pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_282]\r\nmy-pinot-controller-0 controller Caused by: java.net.SocketTimeoutException: Read timed out\r\nmy-pinot-controller-0 controller \tat java.net.SocketInputStream.socketRead0(Native Method) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.net.SocketInputStream.socketRead(SocketInputStream.java:116) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.net.SocketInputStream.read(SocketInputStream.java:171) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.net.SocketInputStream.read(SocketInputStream.java:141) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.io.BufferedInputStream.fill(BufferedInputStream.java:246) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.io.BufferedInputStream.read(BufferedInputStream.java:265) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat org.apache.pinot.common.http.MultiGetRequest.lambda$execute$0(MultiGetRequest.java:106) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_282]\r\nmy-pinot-controller-0 controller \t... 1 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771689647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771818395","html_url":"https://github.com/apache/pinot/issues/6516#issuecomment-771818395","issue_url":"https://api.github.com/repos/apache/pinot/issues/6516","id":771818395,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTgxODM5NQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T17:29:05Z","updated_at":"2021-02-02T17:29:05Z","author_association":"CONTRIBUTOR","body":"I think Helix preserves the error stack/messages for a few days? State stored in segmentDataManager can go away on restart. I think there is value in retrieving helix messages (if they exist) as well.\r\nOn a recent issue in Linkedin, it turned out that the state transitions did not succeed and caused a performance hit on pinot servers. The errors went away upon restart. I can totally imagine an admin restarting the servers to get the system up & running.\r\n\r\nIt may make sense to have an API gather all debug information available and output it as a a blob of text. We can enhance this as we feel like, without regarding to backward compat, etc.\r\n\r\ncurl controller:port/tables/{tableName}/debugState 1> saved 2>&1\r\n\r\ncan be done before any restart is attempted. This can also retrieve states from each of the servers that have segments for the table.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771818395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771880500","html_url":"https://github.com/apache/pinot/issues/6522#issuecomment-771880500","issue_url":"https://api.github.com/repos/apache/pinot/issues/6522","id":771880500,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTg4MDUwMA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T18:43:32Z","updated_at":"2021-02-02T18:43:32Z","author_association":"NONE","body":"closing this issue as I can already see similar one on \r\nhttps://github.com/apache/incubator-pinot/issues/6277","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771880500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771881448","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-771881448","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":771881448,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTg4MTQ0OA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T18:44:40Z","updated_at":"2021-02-02T18:44:40Z","author_association":"NONE","body":"@fx19880617 Any way whether I can restrict the segment size not to go beyond 8GB , I tried setting \r\n\"realtime.segment.flush.desired.size\":\"400M\", but still getting the error","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771881448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771916100","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-771916100","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":771916100,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTkxNjEwMA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T19:30:35Z","updated_at":"2021-02-02T19:30:35Z","author_association":"CONTRIBUTOR","body":"> @fx19880617 Any way whether I can restrict the segment size not to go beyond 8GB , I tried setting\r\n> \"realtime.segment.flush.desired.size\":\"400M\", but still getting the error\r\n\r\ndo you have the stacktrace ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771916100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771973867","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-771973867","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":771973867,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTk3Mzg2Nw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T20:49:34Z","updated_at":"2021-02-02T20:49:48Z","author_association":"NONE","body":"@fx19880617  Here is the stack trace ,  \r\n\r\nI tried these \r\n```\r\n          # realtime.segment.flush.desired.size=\"400M\" -- not sure this is working\r\n          # \"realtime.segment.flush.threshold.size\": \"400M\" - asper docs this should work but still get below error\r\n```\r\nOnly thing working for me is rows as follows, But my individual row size changes drastically so I want to fix it based on a fixed size to avoid the GZIP error\r\n\r\n          \"realtime.segment.flush.threshold.rows\": \"100000\",\r\n          \"realtime.segment.flush.autotune.initialRows\": \"100000\"\r\n\r\n\r\n```\r\nmy-pinot-server-1 server 2021/02/02 19:11:26.153 ERROR [SegmentBuildTimeLeaseExtender] [pool-8-thread-1] Failed to send lease extension for mylog__0__0__20210202T1908Z\r\nmy-pinot-server-1 server 2021/02/02 19:12:40.537 ERROR [LLRealtimeSegmentDataManager_mylog__0__0__20210202T1908Z] [mylog__0__0__20210202T1908Z] Exception while in work\r\nmy-pinot-server-1 server java.lang.RuntimeException: entry size '19675344496' is too big ( > 8589934591 ).\r\nmy-pinot-server-1 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumber(TarArchiveOutputStream.java:636) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-1 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumber(TarArchiveOutputStream.java:624) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-1 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumbers(TarArchiveOutputStream.java:610) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-1 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.putArchiveEntry(TarArchiveOutputStream.java:369) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-1 server \tat org.apache.pinot.common.utils.TarGzCompressionUtils.addFileToTarGz(TarGzCompressionUtils.java:78) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-1 server \tat org.apache.pinot.common.utils.TarGzCompressionUtils.addFileToTarGz(TarGzCompressionUtils.java:91) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771973867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771975222","html_url":"https://github.com/apache/pinot/pull/6525#issuecomment-771975222","issue_url":"https://api.github.com/repos/apache/pinot/issues/6525","id":771975222,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTk3NTIyMg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T20:51:25Z","updated_at":"2021-02-02T20:51:25Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=h1) Report\n> Merging [#6525](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=desc) (5a7f950) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `1.67%`.\n> The diff coverage is `60.09%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6525/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6525      +/-   ##\n==========================================\n- Coverage   66.44%   64.77%   -1.68%     \n==========================================\n  Files        1075     1338     +263     \n  Lines       54773    66023   +11250     \n  Branches     8168     9651    +1483     \n==========================================\n+ Hits        36396    42768    +6372     \n- Misses      15700    20184    +4484     \n- Partials     2677     3071     +394     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `64.77% <60.09%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `10.90% <ø> (-51.10%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| ... and [1194 more](https://codecov.io/gh/apache/incubator-pinot/pull/6525/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=footer). Last update [0f398a7...5a7f950](https://codecov.io/gh/apache/incubator-pinot/pull/6525?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771975222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771994796","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-771994796","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":771994796,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MTk5NDc5Ng==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T21:18:36Z","updated_at":"2021-02-02T21:18:36Z","author_association":"NONE","body":"So my config at the moment is this , however in the segment folder I can see massively huge segments i.e. > 4G . why this is happening. I am trying to control it to 500M .\r\n\r\n```\r\n          \"realtime.segment.flush.threshold.rows\": \"100000\",\r\n          \"realtime.segment.flush.autotune.initialRows\": \"100000\",\r\n          \"realtime.segment.flush.threshold.size\": \"500M\",\r\n```\r\n\r\n```\r\nroot@my-pinot-server-0:/var/pinot/server/data/index/mylog_REALTIME# du -sh *\r\n0\tconsumers\r\n520M\tmylog__0__13__20210202T2001Z\r\n4.0G\tmylog__0__15__20210202T2002Z\r\n522M\tmylog__0__26__20210202T2009Z\r\n523M\tmylog__0__28__20210202T2010Z\r\n4.5G\tmylog__0__2__20210202T1952Z\r\n518M\tmylog__0__31__20210202T2012Z\r\n746M\tmylog__0__39__20210202T2017Z\r\n492M\tmylog__0__40__20210202T2017Z\r\n521M\tmylog__0__42__20210202T2018Z\r\n4.5G\tmylog__0__44__20210202T2019Z\r\n523M\tmylog__0__46__20210202T2021Z\r\n4.6G\tmylog__0__53__20210202T2024Z\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/771994796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772059592","html_url":"https://github.com/apache/pinot/issues/6520#issuecomment-772059592","issue_url":"https://api.github.com/repos/apache/pinot/issues/6520","id":772059592,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjA1OTU5Mg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T22:36:55Z","updated_at":"2021-02-02T22:36:55Z","author_association":"CONTRIBUTOR","body":"I feel it might be too much overhead to expose segment level status.\r\nBut possible to provide aggregated metrics at table level and maybe table/column level.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772059592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772061131","html_url":"https://github.com/apache/pinot/issues/6520#issuecomment-772061131","issue_url":"https://api.github.com/repos/apache/pinot/issues/6520","id":772061131,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjA2MTEzMQ==","user":{"login":"daniellavoie","id":4403970,"node_id":"MDQ6VXNlcjQ0MDM5NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4403970?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellavoie","html_url":"https://github.com/daniellavoie","followers_url":"https://api.github.com/users/daniellavoie/followers","following_url":"https://api.github.com/users/daniellavoie/following{/other_user}","gists_url":"https://api.github.com/users/daniellavoie/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellavoie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellavoie/subscriptions","organizations_url":"https://api.github.com/users/daniellavoie/orgs","repos_url":"https://api.github.com/users/daniellavoie/repos","events_url":"https://api.github.com/users/daniellavoie/events{/privacy}","received_events_url":"https://api.github.com/users/daniellavoie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T22:39:15Z","updated_at":"2021-02-02T22:39:22Z","author_association":"CONTRIBUTOR","body":"Yes aggregated would be fine. Mostly, this metric is to answer `Is it done yet?`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772061131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772069028","html_url":"https://github.com/apache/pinot/issues/6520#issuecomment-772069028","issue_url":"https://api.github.com/repos/apache/pinot/issues/6520","id":772069028,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjA2OTAyOA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T22:51:48Z","updated_at":"2021-02-02T22:52:13Z","author_association":"CONTRIBUTOR","body":"Got it, then I  think we can add a gauge value in pinot server per <table, column, index-type>.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772069028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772084940","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-772084940","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":772084940,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjA4NDk0MA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T23:24:56Z","updated_at":"2021-02-02T23:24:56Z","author_association":"NONE","body":"@fx19880617 further analysis it is clear that the size is coming from columns.psf\r\n\r\n```\r\nroot@my-pinot-server-0:/var/pinot/server/data/index/mylog_REALTIME/mylog__0__110__20210202T2151Z/v3# du -sh *\r\n588K\tcluster_name.lucene.index\r\n392K\tcluster_name.lucene.mapping\r\n4.6G\tcolumns.psf\r\n580K\tcontainer_name.lucene.index\r\n392K\tcontainer_name.lucene.mapping\r\n4.0K\tcreation.meta\r\n512K\thost.lucene.index\r\n392K\thost.lucene.mapping\r\n4.0K\tindex_map\r\n2.7M\tlog.lucene.index\r\n392K\tlog.lucene.mapping\r\n8.0K\tmetadata.properties\r\n540K\tnamespace_name.lucene.index\r\n392K\tnamespace_name.lucene.mapping\r\n640K\tpod_name.lucene.index\r\n392K\tpod_name.lucene.mapping\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772084940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772093618","html_url":"https://github.com/apache/pinot/pull/6518#issuecomment-772093618","issue_url":"https://api.github.com/repos/apache/pinot/issues/6518","id":772093618,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjA5MzYxOA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T23:45:53Z","updated_at":"2021-02-02T23:45:53Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=h1) Report\n> Merging [#6518](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=desc) (ec9bf5b) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `6.66%`.\n> The diff coverage is `78.93%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6518/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6518      +/-   ##\n==========================================\n+ Coverage   66.44%   73.11%   +6.66%     \n==========================================\n  Files        1075     1336     +261     \n  Lines       54773    65878   +11105     \n  Branches     8168     9617    +1449     \n==========================================\n+ Hits        36396    48167   +11771     \n+ Misses      15700    14536    -1164     \n- Partials     2677     3175     +498     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.84% <41.95%> (?)` | |\n| unittests | `64.85% <59.98%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `73.33% <ø> (+16.19%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <ø> (-4.40%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `28.00% <ø> (-6.29%)` | :arrow_down: |\n| ... and [1150 more](https://codecov.io/gh/apache/incubator-pinot/pull/6518/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=footer). Last update [209f57c...91552c1](https://codecov.io/gh/apache/incubator-pinot/pull/6518?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772093618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772095947","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-772095947","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":772095947,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjA5NTk0Nw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-02T23:52:03Z","updated_at":"2021-02-02T23:52:03Z","author_association":"CONTRIBUTOR","body":"We have a metric that is set to 1 if a stream partition is consuming correctly, 0 otherwise. In LinkedIn, we set an alert if the consumption falls to 0 for more than some period of time.\r\n\r\nNote that if the consumption fails for some stream partitions, the Realtime segment checker in the controller automatically attempts to restart consumption on the partitions. You can set the frequency of the automatic check, and set the alerts to fire after that time interval (if it is still not fixed).\r\n\r\nhttps://github.com/apache/incubator-pinot/blob/master/pinot-common/src/main/java/org/apache/pinot/common/metrics/ServerGauge.java#L31:3","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772095947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772100661","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-772100661","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":772100661,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjEwMDY2MQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T00:03:16Z","updated_at":"2021-02-03T00:03:16Z","author_association":"CONTRIBUTOR","body":"Right, `column.psf` is the single file that merges all the columns' data. Do you have the index_map file or segment metadata file, which will tell the size for each column? It should give a relative ratio for the number of rows and segment size.\r\n\r\nFrom the table config, you can set the flush size to a limit number, which will flush based on a hard row limit.\r\n\r\n@npawar I think the size-based flush mechanism doesn't count index right?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772100661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772100779","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-772100779","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":772100779,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjEwMDc3OQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T00:03:32Z","updated_at":"2021-02-03T00:03:32Z","author_association":"CONTRIBUTOR","body":"Meanwhile we will fix the tar gz issue","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772100779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772102874","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-772102874","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":772102874,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjEwMjg3NA==","user":{"login":"daniellavoie","id":4403970,"node_id":"MDQ6VXNlcjQ0MDM5NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4403970?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellavoie","html_url":"https://github.com/daniellavoie","followers_url":"https://api.github.com/users/daniellavoie/followers","following_url":"https://api.github.com/users/daniellavoie/following{/other_user}","gists_url":"https://api.github.com/users/daniellavoie/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellavoie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellavoie/subscriptions","organizations_url":"https://api.github.com/users/daniellavoie/orgs","repos_url":"https://api.github.com/users/daniellavoie/repos","events_url":"https://api.github.com/users/daniellavoie/events{/privacy}","received_events_url":"https://api.github.com/users/daniellavoie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T00:08:08Z","updated_at":"2021-02-03T00:08:08Z","author_association":"CONTRIBUTOR","body":"Thanks for these details @mcvsubbu. My use case is more about providing feedback to the user who created the table config from the rest API. Metrics are intended to monitored by SRE, but if I don't have access to logs, there is no way for me to understand what is wrong with the table config without calling the SRE running the cluster.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772102874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772105123","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-772105123","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":772105123,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjEwNTEyMw==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T00:13:36Z","updated_at":"2021-02-03T00:13:36Z","author_association":"CONTRIBUTOR","body":"The segment size threshold config will kick in only when rows threshold is set to 0. Prolly not working for you because the flush.threshold.rows is set to something in your examples.\r\n\r\nIt should be like this\r\n```\r\n\"realtime.segment.flush.threshold.rows\": \"0\",\r\n  \"realtime.segment.flush.threshold.time\": \"6h\",\r\n  \"realtime.segment.flush.threshold.segment.size\": \"400M\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772105123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772127633","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-772127633","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":772127633,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjEyNzYzMw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T01:03:24Z","updated_at":"2021-02-03T01:03:24Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-pinot/pull/6533","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772127633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772146836","html_url":"https://github.com/apache/pinot/pull/6533#issuecomment-772146836","issue_url":"https://api.github.com/repos/apache/pinot/issues/6533","id":772146836,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE0NjgzNg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T01:49:11Z","updated_at":"2021-02-03T01:49:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=h1) Report\n> Merging [#6533](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=desc) (9fa79be) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `1.57%`.\n> The diff coverage is `59.94%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6533/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6533      +/-   ##\n==========================================\n- Coverage   66.44%   64.86%   -1.58%     \n==========================================\n  Files        1075     1334     +259     \n  Lines       54773    65797   +11024     \n  Branches     8168     9607    +1439     \n==========================================\n+ Hits        36396    42682    +6286     \n- Misses      15700    20058    +4358     \n- Partials     2677     3057     +380     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `64.86% <59.94%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `10.90% <ø> (-51.10%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| ... and [1190 more](https://codecov.io/gh/apache/incubator-pinot/pull/6533/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=footer). Last update [d1a0688...9fa79be](https://codecov.io/gh/apache/incubator-pinot/pull/6533?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772146836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772158231","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-772158231","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":772158231,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE1ODIzMQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:14:33Z","updated_at":"2021-02-03T02:14:33Z","author_association":"CONTRIBUTOR","body":"We also return metadata to the broker as to the newest timestamp we have consumed. It is set in the BrokerNativeResponse as the minConsumingFreshnessTimeMs, indicating the lowest timestamp amongst the most recent record consumed in each segment. (i.e. if segments g1 and g2 are queried, and the timestamp of most recent record in these are t1 and t2 respectively, then we will return min(t1, t2)).\r\n\r\nThe client can monitor the freshness and realize if the min is too far off from current time.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772158231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772159802","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-772159802","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":772159802,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE1OTgwMg==","user":{"login":"daniellavoie","id":4403970,"node_id":"MDQ6VXNlcjQ0MDM5NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4403970?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellavoie","html_url":"https://github.com/daniellavoie","followers_url":"https://api.github.com/users/daniellavoie/followers","following_url":"https://api.github.com/users/daniellavoie/following{/other_user}","gists_url":"https://api.github.com/users/daniellavoie/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellavoie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellavoie/subscriptions","organizations_url":"https://api.github.com/users/daniellavoie/orgs","repos_url":"https://api.github.com/users/daniellavoie/repos","events_url":"https://api.github.com/users/daniellavoie/events{/privacy}","received_events_url":"https://api.github.com/users/daniellavoie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:18:19Z","updated_at":"2021-02-03T02:18:19Z","author_association":"CONTRIBUTOR","body":"Counters, metrics and gages does not tell the story of what is wrong. Health check observability is not the problem I am trying to solve here. Client needs to understand the error message related to the bad configuration, not if their config is good or bad.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772159802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772160570","html_url":"https://github.com/apache/pinot/issues/6512#issuecomment-772160570","issue_url":"https://api.github.com/repos/apache/pinot/issues/6512","id":772160570,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE2MDU3MA==","user":{"login":"rkanumul","id":78345053,"node_id":"MDQ6VXNlcjc4MzQ1MDUz","avatar_url":"https://avatars.githubusercontent.com/u/78345053?v=4","gravatar_id":"","url":"https://api.github.com/users/rkanumul","html_url":"https://github.com/rkanumul","followers_url":"https://api.github.com/users/rkanumul/followers","following_url":"https://api.github.com/users/rkanumul/following{/other_user}","gists_url":"https://api.github.com/users/rkanumul/gists{/gist_id}","starred_url":"https://api.github.com/users/rkanumul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkanumul/subscriptions","organizations_url":"https://api.github.com/users/rkanumul/orgs","repos_url":"https://api.github.com/users/rkanumul/repos","events_url":"https://api.github.com/users/rkanumul/events{/privacy}","received_events_url":"https://api.github.com/users/rkanumul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:20:16Z","updated_at":"2021-02-03T02:21:13Z","author_association":"CONTRIBUTOR","body":"Pull request at :\r\nhttps://github.com/apache/incubator-pinot/pull/6531","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772160570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772160605","html_url":"https://github.com/apache/pinot/issues/6511#issuecomment-772160605","issue_url":"https://api.github.com/repos/apache/pinot/issues/6511","id":772160605,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE2MDYwNQ==","user":{"login":"rkanumul","id":78345053,"node_id":"MDQ6VXNlcjc4MzQ1MDUz","avatar_url":"https://avatars.githubusercontent.com/u/78345053?v=4","gravatar_id":"","url":"https://api.github.com/users/rkanumul","html_url":"https://github.com/rkanumul","followers_url":"https://api.github.com/users/rkanumul/followers","following_url":"https://api.github.com/users/rkanumul/following{/other_user}","gists_url":"https://api.github.com/users/rkanumul/gists{/gist_id}","starred_url":"https://api.github.com/users/rkanumul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkanumul/subscriptions","organizations_url":"https://api.github.com/users/rkanumul/orgs","repos_url":"https://api.github.com/users/rkanumul/repos","events_url":"https://api.github.com/users/rkanumul/events{/privacy}","received_events_url":"https://api.github.com/users/rkanumul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:20:22Z","updated_at":"2021-02-03T02:21:02Z","author_association":"CONTRIBUTOR","body":"Pull request at :\r\nhttps://github.com/apache/incubator-pinot/pull/6531","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772160605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772160672","html_url":"https://github.com/apache/pinot/issues/6510#issuecomment-772160672","issue_url":"https://api.github.com/repos/apache/pinot/issues/6510","id":772160672,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE2MDY3Mg==","user":{"login":"rkanumul","id":78345053,"node_id":"MDQ6VXNlcjc4MzQ1MDUz","avatar_url":"https://avatars.githubusercontent.com/u/78345053?v=4","gravatar_id":"","url":"https://api.github.com/users/rkanumul","html_url":"https://github.com/rkanumul","followers_url":"https://api.github.com/users/rkanumul/followers","following_url":"https://api.github.com/users/rkanumul/following{/other_user}","gists_url":"https://api.github.com/users/rkanumul/gists{/gist_id}","starred_url":"https://api.github.com/users/rkanumul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkanumul/subscriptions","organizations_url":"https://api.github.com/users/rkanumul/orgs","repos_url":"https://api.github.com/users/rkanumul/repos","events_url":"https://api.github.com/users/rkanumul/events{/privacy}","received_events_url":"https://api.github.com/users/rkanumul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:20:31Z","updated_at":"2021-02-03T02:20:56Z","author_association":"CONTRIBUTOR","body":"Pull request at :\r\nhttps://github.com/apache/incubator-pinot/pull/6531","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772160672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772170902","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772170902","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772170902,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE3MDkwMg==","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:30:54Z","updated_at":"2021-02-03T02:30:54Z","author_association":"CONTRIBUTOR","body":"> LGTM.\r\n> (Not related to this PR) For easier management of the cluster, I would recommend having a separate tenant for the dimension table so that dimension table can be shared by multiple tenants. You can configure the server with multiple tags, and the server can belong to multiple tenants.\r\n\r\nSince this is the first time we have queries across tables, I think it's a good time to discuss the policy. There are two options: join tables within the tenant, and join tables across tenants. Personally I prefer a default constraint that the tables to join are within the same tenant for better isolation. But given the broadcast join nature, the dimension table is in fact copied to all tenants. Nevertheless, I feel it's good to have this high-level consideration.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772170902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772177566","html_url":"https://github.com/apache/pinot/pull/6534#issuecomment-772177566","issue_url":"https://api.github.com/repos/apache/pinot/issues/6534","id":772177566,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE3NzU2Ng==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T02:50:11Z","updated_at":"2021-02-03T03:02:29Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=h1) Report\n> Merging [#6534](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=desc) (d90968e) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `6.67%`.\n> The diff coverage is `79.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6534/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6534      +/-   ##\n==========================================\n+ Coverage   66.44%   73.12%   +6.67%     \n==========================================\n  Files        1075     1334     +259     \n  Lines       54773    65796   +11023     \n  Branches     8168     9607    +1439     \n==========================================\n+ Hits        36396    48115   +11719     \n+ Misses      15700    14513    -1187     \n- Partials     2677     3168     +491     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.83% <41.98%> (?)` | |\n| unittests | `64.82% <59.94%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `73.33% <ø> (+16.19%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <ø> (-4.40%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| [.../org/apache/pinot/client/ResultTableResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFRhYmxlUmVzdWx0U2V0LmphdmE=) | `28.00% <ø> (-6.29%)` | :arrow_down: |\n| ... and [1147 more](https://codecov.io/gh/apache/incubator-pinot/pull/6534/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=footer). Last update [d1a0688...d90968e](https://codecov.io/gh/apache/incubator-pinot/pull/6534?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772177566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772196569","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772196569","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772196569,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjE5NjU2OQ==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T03:35:15Z","updated_at":"2021-02-03T03:35:15Z","author_association":"CONTRIBUTOR","body":"> > LGTM.\r\n> > (Not related to this PR) For easier management of the cluster, I would recommend having a separate tenant for the dimension table so that dimension table can be shared by multiple tenants. You can configure the server with multiple tags, and the server can belong to multiple tenants.\r\n> \r\n> Since this is the first time we have queries across tables, I think it's a good time to discuss the policy. There are two options: join tables within the tenant, and join tables across tenants. Personally I prefer a default constraint that the tables to join are within the same tenant for better isolation. But given the broadcast join nature, the dimension table is in fact copied to all tenants. Nevertheless, I feel it's good to have this high-level consideration.\r\n\r\nCurrently there is no broadcast happening right?\r\n\r\nI thought the design was to have full dimension table colocated with fact table servers so that each server does a local join with part of fact table and full dimension table.\r\n\r\nFor the eventual implementation of fact-dimension using broadcast, I don't think we should have cross tenant joins since the data movement will take longer. We can probably allow it but the recommendation should probably be joins within the same tenant. Joins across tenant essentially become a cross cluster join which is likely to be expensive (but depends on the topology I guess)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772196569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772211536","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772211536","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772211536,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjIxMTUzNg==","user":{"login":"cbalci","id":212284,"node_id":"MDQ6VXNlcjIxMjI4NA==","avatar_url":"https://avatars.githubusercontent.com/u/212284?v=4","gravatar_id":"","url":"https://api.github.com/users/cbalci","html_url":"https://github.com/cbalci","followers_url":"https://api.github.com/users/cbalci/followers","following_url":"https://api.github.com/users/cbalci/following{/other_user}","gists_url":"https://api.github.com/users/cbalci/gists{/gist_id}","starred_url":"https://api.github.com/users/cbalci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cbalci/subscriptions","organizations_url":"https://api.github.com/users/cbalci/orgs","repos_url":"https://api.github.com/users/cbalci/repos","events_url":"https://api.github.com/users/cbalci/events{/privacy}","received_events_url":"https://api.github.com/users/cbalci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T04:14:08Z","updated_at":"2021-02-03T04:14:08Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews @Jackie-Jiang , @yupeng9 .\r\n\r\n>  Since this is the first time we have queries across tables, I think it's a good time to discuss the policy. There are two options: join tables within the tenant, and join tables across tenants. Personally I prefer a default constraint that the tables to join are within the same tenant for better isolation. But given the broadcast join nature, the dimension table is in fact copied to all tenants. Nevertheless, I feel it's good to have this high-level consideration.\r\n\r\n@yupeng9, small correction on the last part, currently dimension tables are not copied to all tenants, but all servers in a single tenant. \r\n\r\nI also agree with your opinion here to default to restricting joins to in-tenant only. Otherwise, besides isolation, unnecessary memory usage will be another issue since dim tables are loaded into heap directly. I think @Jackie-Jiang's tag based cross-tenant solution could be useful for cases where folks have set up different tenants for REALTIME and OFFLINE servers of the same table and would like to share a dimension table.\r\n\r\n@siddharthteotia \r\n> Currently there is no broadcast happening right?\r\n\r\nYou're right, there is no data movement at query time. Dimension tables are distributed only at segment placement time,  according to the segment assignment policy as updated in this PR.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772211536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772224451","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772224451","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772224451,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjIyNDQ1MQ==","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T04:47:11Z","updated_at":"2021-02-03T04:47:11Z","author_association":"CONTRIBUTOR","body":"> Thanks for the reviews @Jackie-Jiang , @yupeng9 .\r\n> \r\n> > Since this is the first time we have queries across tables, I think it's a good time to discuss the policy. There are two options: join tables within the tenant, and join tables across tenants. Personally I prefer a default constraint that the tables to join are within the same tenant for better isolation. But given the broadcast join nature, the dimension table is in fact copied to all tenants. Nevertheless, I feel it's good to have this high-level consideration.\r\n> \r\n> @yupeng9, small correction on the last part, currently dimension tables are not copied to all tenants, but all servers in a single tenant.\r\n> \r\n\r\nYes, that's right: all servers of the same tenant.\r\n\r\n> I also agree with your opinion here to default to restricting joins to in-tenant only. Otherwise, besides isolation, unnecessary memory usage will be another issue since dim tables are loaded into heap directly. I think @Jackie-Jiang's tag based cross-tenant solution could be useful for cases where folks have set up different tenants for REALTIME and OFFLINE servers of the same table and would like to share a dimension table.\r\n> \r\n> @siddharthteotia\r\n> \r\n> > Currently there is no broadcast happening right?\r\n> \r\n> You're right, there is no data movement at query time. Dimension tables are distributed only at segment placement time, according to the segment assignment policy as updated in this PR.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772224451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772225363","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772225363","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772225363,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjIyNTM2Mw==","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T04:49:28Z","updated_at":"2021-02-03T04:49:28Z","author_association":"CONTRIBUTOR","body":"> > > LGTM.\r\n> > > (Not related to this PR) For easier management of the cluster, I would recommend having a separate tenant for the dimension table so that dimension table can be shared by multiple tenants. You can configure the server with multiple tags, and the server can belong to multiple tenants.\r\n> > \r\n> > \r\n> > Since this is the first time we have queries across tables, I think it's a good time to discuss the policy. There are two options: join tables within the tenant, and join tables across tenants. Personally I prefer a default constraint that the tables to join are within the same tenant for better isolation. But given the broadcast join nature, the dimension table is in fact copied to all tenants. Nevertheless, I feel it's good to have this high-level consideration.\r\n> \r\n> Currently there is no broadcast happening right?\r\n\r\nI think we are on the same page: the dimension table is distributed (i.e. broadcasted) to all servers, though not at the query time.\r\n\r\n> \r\n> I thought the design was to have full dimension table colocated with fact table servers so that each server does a local join with part of fact table and full dimension table.\r\n> \r\n> For the eventual implementation of fact-dimension using broadcast, I don't think we should have cross tenant joins since the data movement will take longer. We can probably allow it but the recommendation should probably be joins within the same tenant. Joins across tenant essentially become a cross cluster join which is likely to be expensive (but depends on the topology I guess)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772225363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772237440","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772237440","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772237440,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjIzNzQ0MA==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T05:19:50Z","updated_at":"2021-02-03T05:19:50Z","author_association":"CONTRIBUTOR","body":"> LGTM.\r\n> (Not related to this PR) For easier management of the cluster, I would recommend having a separate tenant for the dimension table so that dimension table can be shared by multiple tenants. You can configure the server with multiple tags, and the server can belong to multiple tenants.\r\n\r\n@Jackie-Jiang , the current design is based on pre placement of dimension table with fact table servers so there is no broadcast at query time. With this setup, how can we have dimension table in a separate tenant?\r\n\r\nOn a related note, we can possibly have dimension table assigned to multiple tags/tenants. So for joining a hybrid fact table with offline dimension table, the dim table will be present in both offline tenant and realtime tenant servers of the fact table. So, there will be one tenant local join on the offline side and one tenant local join on the realtime side. I believe this is what you mean by saying _dimension table can be shared by multiple tenants_ ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772237440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772300880","html_url":"https://github.com/apache/pinot/pull/6506#issuecomment-772300880","issue_url":"https://api.github.com/repos/apache/pinot/issues/6506","id":772300880,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjMwMDg4MA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T07:33:27Z","updated_at":"2021-02-03T07:33:27Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this!","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772300880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772309634","html_url":"https://github.com/apache/pinot/pull/6536#issuecomment-772309634","issue_url":"https://api.github.com/repos/apache/pinot/issues/6536","id":772309634,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjMwOTYzNA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T07:51:58Z","updated_at":"2021-02-03T07:51:58Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=h1) Report\n> Merging [#6536](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=desc) (df06165) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.49%`.\n> The diff coverage is `41.98%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6536/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6536       +/-   ##\n===========================================\n- Coverage   66.44%   43.95%   -22.50%     \n===========================================\n  Files        1075     1334      +259     \n  Lines       54773    65796    +11023     \n  Branches     8168     9607     +1439     \n===========================================\n- Hits        36396    28923     -7473     \n- Misses      15700    34436    +18736     \n+ Partials     2677     2437      -240     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.95% <41.98%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1339 more](https://codecov.io/gh/apache/incubator-pinot/pull/6536/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=footer). Last update [a2f0dbd...df06165](https://codecov.io/gh/apache/incubator-pinot/pull/6536?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772309634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772392418","html_url":"https://github.com/apache/pinot/pull/6525#issuecomment-772392418","issue_url":"https://api.github.com/repos/apache/pinot/issues/6525","id":772392418,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjM5MjQxOA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T10:10:29Z","updated_at":"2021-02-03T10:10:29Z","author_association":"CONTRIBUTOR","body":"Adding many test parquet files.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772392418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772513157","html_url":"https://github.com/apache/pinot/issues/6277#issuecomment-772513157","issue_url":"https://api.github.com/repos/apache/pinot/issues/6277","id":772513157,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjUxMzE1Nw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T13:39:47Z","updated_at":"2021-02-03T13:40:15Z","author_association":"NONE","body":"@npawar , I tried the configs you provided it is not working I still get the following error , is this a bug. I have to revert to row count.\r\n\r\n```\r\nmy-pinot-server-2 server 2021/02/03 13:21:34.725 ERROR [LLRealtimeSegmentDataManager_mylog__0__298__20210203T1319Z] [mylog__0__298__20210203T1319Z] Exception while in work\r\nmy-pinot-server-2 server java.lang.RuntimeException: entry size '12728757704' is too big ( > 8589934591 ).\r\nmy-pinot-server-2 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumber(TarArchiveOutputStream.java:636) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-2 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumber(TarArchiveOutputStream.java:624) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-2 server \tat org.apache.commons.compress.archivers.tar.TarArchiveOutputStream.failForBigNumbers(TarArchiveOutputStream.java:610) ~[pinot-all-0.7.0-SNAPSHOT-jar-with-dependencies.jar:0.7.0-SNAPSHOT-b4be817b1f078a4644995ad2be9ccb0eccbf6b29]\r\nmy-pinot-server-2 server \tat org.apache.commons.compress.archivers.tar.Tar\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772513157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772587595","html_url":"https://github.com/apache/pinot/issues/5837#issuecomment-772587595","issue_url":"https://api.github.com/repos/apache/pinot/issues/5837","id":772587595,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjU4NzU5NQ==","user":{"login":"HansOspina","id":6139474,"node_id":"MDQ6VXNlcjYxMzk0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6139474?v=4","gravatar_id":"","url":"https://api.github.com/users/HansOspina","html_url":"https://github.com/HansOspina","followers_url":"https://api.github.com/users/HansOspina/followers","following_url":"https://api.github.com/users/HansOspina/following{/other_user}","gists_url":"https://api.github.com/users/HansOspina/gists{/gist_id}","starred_url":"https://api.github.com/users/HansOspina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansOspina/subscriptions","organizations_url":"https://api.github.com/users/HansOspina/orgs","repos_url":"https://api.github.com/users/HansOspina/repos","events_url":"https://api.github.com/users/HansOspina/events{/privacy}","received_events_url":"https://api.github.com/users/HansOspina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T15:19:35Z","updated_at":"2021-02-03T15:19:35Z","author_association":"NONE","body":" @SandishKumarHN let me know if I can help with this one.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772587595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772669608","html_url":"https://github.com/apache/pinot/pull/6525#issuecomment-772669608","issue_url":"https://api.github.com/repos/apache/pinot/issues/6525","id":772669608,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjY2OTYwOA==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T17:08:33Z","updated_at":"2021-02-03T17:08:33Z","author_association":"CONTRIBUTOR","body":"@fx19880617 , I will do another pass later today. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772669608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772691484","html_url":"https://github.com/apache/pinot/issues/5837#issuecomment-772691484","issue_url":"https://api.github.com/repos/apache/pinot/issues/5837","id":772691484,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjY5MTQ4NA==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T17:39:43Z","updated_at":"2021-02-03T17:39:43Z","author_association":"CONTRIBUTOR","body":"@HansOspina you take up this one if you like, currently occupied with different tasks. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772691484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772724098","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772724098","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772724098,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjcyNDA5OA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T18:29:35Z","updated_at":"2021-02-03T18:29:35Z","author_association":"CONTRIBUTOR","body":"@siddharthteotia if we have 5 tables on different tenant, all of them need to join with the same dimension table. If we always colocate them using the same tenant, we need to have 5 copies of the dimension table stored in the deep store. If we use a separate tenant for the dimension table, we only need to store one copy. Each server can be configured with multiple tenants, so that both the fact table and dimension table are still colocated.\r\nThis is out of the scope of this PR, just how to manage the cluster.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772724098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772743670","html_url":"https://github.com/apache/pinot/pull/6530#issuecomment-772743670","issue_url":"https://api.github.com/repos/apache/pinot/issues/6530","id":772743670,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjc0MzY3MA==","user":{"login":"yupeng9","id":13425258,"node_id":"MDQ6VXNlcjEzNDI1MjU4","avatar_url":"https://avatars.githubusercontent.com/u/13425258?v=4","gravatar_id":"","url":"https://api.github.com/users/yupeng9","html_url":"https://github.com/yupeng9","followers_url":"https://api.github.com/users/yupeng9/followers","following_url":"https://api.github.com/users/yupeng9/following{/other_user}","gists_url":"https://api.github.com/users/yupeng9/gists{/gist_id}","starred_url":"https://api.github.com/users/yupeng9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupeng9/subscriptions","organizations_url":"https://api.github.com/users/yupeng9/orgs","repos_url":"https://api.github.com/users/yupeng9/repos","events_url":"https://api.github.com/users/yupeng9/events{/privacy}","received_events_url":"https://api.github.com/users/yupeng9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T19:01:15Z","updated_at":"2021-02-03T19:01:15Z","author_association":"CONTRIBUTOR","body":"> @siddharthteotia if we have 5 tables on different tenant, all of them need to join with the same dimension table. If we always colocate them using the same tenant, we need to have 5 copies of the dimension table stored in the deep store. If we use a separate tenant for the dimension table, we only need to store one copy. Each server can be configured with multiple tenants, so that both the fact table and dimension table are still colocated.\r\n> This is out of the scope of this PR, just how to manage the cluster.\r\n\r\nAgreed that it's outside the scope of this PR. But for better cluster management, I suggest we make 5 copies (though can be soft copies) for better isolation. In particular, I suggest we consider using `tenant.table` to resolve a table in the future, so that we can support tables with the same name in different namespaces (i.e. tenants).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772743670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772752328","html_url":"https://github.com/apache/pinot/issues/5837#issuecomment-772752328","issue_url":"https://api.github.com/repos/apache/pinot/issues/5837","id":772752328,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjc1MjMyOA==","user":{"login":"HansOspina","id":6139474,"node_id":"MDQ6VXNlcjYxMzk0NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6139474?v=4","gravatar_id":"","url":"https://api.github.com/users/HansOspina","html_url":"https://github.com/HansOspina","followers_url":"https://api.github.com/users/HansOspina/followers","following_url":"https://api.github.com/users/HansOspina/following{/other_user}","gists_url":"https://api.github.com/users/HansOspina/gists{/gist_id}","starred_url":"https://api.github.com/users/HansOspina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HansOspina/subscriptions","organizations_url":"https://api.github.com/users/HansOspina/orgs","repos_url":"https://api.github.com/users/HansOspina/repos","events_url":"https://api.github.com/users/HansOspina/events{/privacy}","received_events_url":"https://api.github.com/users/HansOspina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T19:15:21Z","updated_at":"2021-02-03T19:15:21Z","author_association":"NONE","body":"@SandishKumarHN can we at least tackle it together? not sure I have the pinot experience to actually do it all by myself.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772752328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772753370","html_url":"https://github.com/apache/pinot/issues/5837#issuecomment-772753370","issue_url":"https://api.github.com/repos/apache/pinot/issues/5837","id":772753370,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjc1MzM3MA==","user":{"login":"SandishKumarHN","id":3078999,"node_id":"MDQ6VXNlcjMwNzg5OTk=","avatar_url":"https://avatars.githubusercontent.com/u/3078999?v=4","gravatar_id":"","url":"https://api.github.com/users/SandishKumarHN","html_url":"https://github.com/SandishKumarHN","followers_url":"https://api.github.com/users/SandishKumarHN/followers","following_url":"https://api.github.com/users/SandishKumarHN/following{/other_user}","gists_url":"https://api.github.com/users/SandishKumarHN/gists{/gist_id}","starred_url":"https://api.github.com/users/SandishKumarHN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SandishKumarHN/subscriptions","organizations_url":"https://api.github.com/users/SandishKumarHN/orgs","repos_url":"https://api.github.com/users/SandishKumarHN/repos","events_url":"https://api.github.com/users/SandishKumarHN/events{/privacy}","received_events_url":"https://api.github.com/users/SandishKumarHN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T19:16:55Z","updated_at":"2021-02-03T19:16:55Z","author_association":"CONTRIBUTOR","body":"@HansOspina let's connect over pinot slack. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772753370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772816083","html_url":"https://github.com/apache/pinot/pull/6467#issuecomment-772816083","issue_url":"https://api.github.com/repos/apache/pinot/issues/6467","id":772816083,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjgxNjA4Mw==","user":{"login":"cyrilou242","id":27781189,"node_id":"MDQ6VXNlcjI3NzgxMTg5","avatar_url":"https://avatars.githubusercontent.com/u/27781189?v=4","gravatar_id":"","url":"https://api.github.com/users/cyrilou242","html_url":"https://github.com/cyrilou242","followers_url":"https://api.github.com/users/cyrilou242/followers","following_url":"https://api.github.com/users/cyrilou242/following{/other_user}","gists_url":"https://api.github.com/users/cyrilou242/gists{/gist_id}","starred_url":"https://api.github.com/users/cyrilou242/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cyrilou242/subscriptions","organizations_url":"https://api.github.com/users/cyrilou242/orgs","repos_url":"https://api.github.com/users/cyrilou242/repos","events_url":"https://api.github.com/users/cyrilou242/events{/privacy}","received_events_url":"https://api.github.com/users/cyrilou242/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T20:54:15Z","updated_at":"2021-02-03T20:54:15Z","author_association":"CONTRIBUTOR","body":"> The dimensionPlaceHolderId is a dom identifier which is just a name. From the naming conversion, it has already used kebab-case. Why not replace '\\' to '-'?\r\n\r\nThanks for reviewing.\r\nI'm not sure to understand your point so I'll give more details about my MR.\r\n\r\nThe div name is defined here: \r\nhttps://github.com/apache/incubator-pinot/blob/2be1520d99206f1c606a9062544f88f958ff1da0/thirdeye/thirdeye-frontend/app/pods/components/heatmap-chart/template.hbs#L9\r\n\r\n`dimName` can contain some dots. \r\nI'm not trying to change the div name, and an id value containing a dot is _in theory_  perfectly fine.\r\n\r\nThe fact is that in the js logic, an id value containing a dot is a problem at the following lines: \r\n\r\nhttps://github.com/apache/incubator-pinot/blob/b6c7a971032b1da51a05b78531d5bf4ea9f048b4/thirdeye/thirdeye-frontend/app/pods/components/heatmap-chart/component.js#L109\r\njquery requires proper dot escaping, ref: https://stackoverflow.com/questions/9930577/jquery-dot-in-id-selector\r\n\r\nhttps://github.com/apache/incubator-pinot/blob/b6c7a971032b1da51a05b78531d5bf4ea9f048b4/thirdeye/thirdeye-frontend/app/pods/components/heatmap-chart/component.js#L121\r\nD3 requires proper dot escaping, ref: https://stackoverflow.com/questions/33502614/d3-how-to-select-element-by-id-when-there-is-a-dot-in-id\r\n\r\nSo my idea was to implement the escaping in the js logic, not to change the dom identifier.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772816083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772833854","html_url":"https://github.com/apache/pinot/issues/6493#issuecomment-772833854","issue_url":"https://api.github.com/repos/apache/pinot/issues/6493","id":772833854,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjgzMzg1NA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T21:23:55Z","updated_at":"2021-02-03T21:23:55Z","author_association":"NONE","body":"@Jackie-Jiang Thanks I will verify this and confirm . ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772833854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772864820","html_url":"https://github.com/apache/pinot/pull/6518#issuecomment-772864820","issue_url":"https://api.github.com/repos/apache/pinot/issues/6518","id":772864820,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjg2NDgyMA==","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T22:18:16Z","updated_at":"2021-02-03T22:18:16Z","author_association":"CONTRIBUTOR","body":"@npawar Can you add the design doc to this commit message? I remember that there was a doc for interfaces.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772864820/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772872275","html_url":"https://github.com/apache/pinot/issues/6539#issuecomment-772872275","issue_url":"https://api.github.com/repos/apache/pinot/issues/6539","id":772872275,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjg3MjI3NQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-03T22:32:42Z","updated_at":"2021-02-03T22:33:06Z","author_association":"CONTRIBUTOR","body":"You mean Pinot doesn't assign 4 consuming segments to all 3 servers? If not, it's a problem, we should fix it. Can you share the idealstate/externalview for that? We should expect Pinot to assign 4 partitions from `mylog__0_...` to `mylog__3_...`\r\n\r\nAlso, shrinking Kafka partitions is not supported, only increase the partition. Need to delete the table and recreate it.\r\n\r\nMaybe you can try to increase Kafka partitions from 4 to 6?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772872275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772939032","html_url":"https://github.com/apache/pinot/pull/6540#issuecomment-772939032","issue_url":"https://api.github.com/repos/apache/pinot/issues/6540","id":772939032,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MjkzOTAzMg==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T00:48:47Z","updated_at":"2021-02-04T00:48:47Z","author_association":"MEMBER","body":"It seems the issue's been fixed in this PR (https://github.com/apache/incubator-pinot/pull/6515) where it fixes not only for pinot-controller, pinot-broker but also for pinot-server as well.\r\nWe can close this PR now since it's duplicate.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772939032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772942895","html_url":"https://github.com/apache/pinot/issues/6539#issuecomment-772942895","issue_url":"https://api.github.com/repos/apache/pinot/issues/6539","id":772942895,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjk0Mjg5NQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T00:59:12Z","updated_at":"2021-02-04T00:59:12Z","author_association":"NONE","body":"Thanks @fx19880617 for the suggestions. I tried Ideal state and can see all the 4 partitions are getting consumed as shown below which is good. However there is an issue when you shrink Kafka partition i.e delete and recreate a topic with less number of partition than before.  When that happens Pinot server keeps on ERROR-ing. Even though everything works the error is cluttering the console also not sure whether this have any other performance impact.\r\n\r\n```\r\n    \"mylog__0__314__20210203T1856Z\" : {\r\n      \"Server_my-pinot-server-2.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n    },\r\n    \"mylog__1__7__20210204T0043Z\" : {\r\n      \"Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n    },\r\n    \"mylog__2__7__20210204T0043Z\" : {\r\n      \"Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n    },\r\n    \"mylog__3__0__20210203T1927Z\" : {\r\n      \"Server_my-pinot-server-2.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772942895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772943287","html_url":"https://github.com/apache/pinot/pull/6533#issuecomment-772943287","issue_url":"https://api.github.com/repos/apache/pinot/issues/6533","id":772943287,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjk0MzI4Nw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T01:00:11Z","updated_at":"2021-02-04T01:00:11Z","author_association":"NONE","body":"Thanks @fx19880617 , appreciate your fix on this. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772943287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772961312","html_url":"https://github.com/apache/pinot/issues/6539#issuecomment-772961312","issue_url":"https://api.github.com/repos/apache/pinot/issues/6539","id":772961312,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjk2MTMxMg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T01:45:27Z","updated_at":"2021-02-04T01:45:27Z","author_association":"CONTRIBUTOR","body":"> Thanks @fx19880617 for the suggestions. I tried Ideal state and can see all the 4 partitions are getting consumed as shown below which is good. However there is an issue when you shrink Kafka partition i.e delete and recreate a topic with less number of partition than before. When that happens Pinot server keeps on ERROR-ing. Even though everything works the error is cluttering the console also not sure whether this have any other performance impact.\r\n> \r\n> ```\r\n>     \"mylog__0__314__20210203T1856Z\" : {\r\n>       \"Server_my-pinot-server-2.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n>     },\r\n>     \"mylog__1__7__20210204T0043Z\" : {\r\n>       \"Server_my-pinot-server-0.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n>     },\r\n>     \"mylog__2__7__20210204T0043Z\" : {\r\n>       \"Server_my-pinot-server-1.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n>     },\r\n>     \"mylog__3__0__20210203T1927Z\" : {\r\n>       \"Server_my-pinot-server-2.my-pinot-server-headless.logging.svc.cluster.local_8098\" : \"CONSUMING\"\r\n>     }\r\n> ```\r\n\r\nBy design, Pinot is not handling the shrinking case. I think you need to manually delete the consuming segment `mylog__3__0__20210203T1927Z`. Also delete topic and recreate may mess up the consumer offset, @npawar may have more saying about this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772961312/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772962402","html_url":"https://github.com/apache/pinot/pull/6537#issuecomment-772962402","issue_url":"https://api.github.com/repos/apache/pinot/issues/6537","id":772962402,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjk2MjQwMg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T01:48:22Z","updated_at":"2021-02-04T01:48:22Z","author_association":"CONTRIBUTOR","body":"> It seems `getFileURI` method is defined in both `SegmentGenerationUtils` and `SegmentGenerationAndPushTaskGenerator` classes. Is it possible to unify them in one place?\r\n\r\nGood point, this utils is on pinot-core and pinot-ingestion-common modules right now.\r\nI think we can move it to pinot-common module ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772962402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772968419","html_url":"https://github.com/apache/pinot/issues/6539#issuecomment-772968419","issue_url":"https://api.github.com/repos/apache/pinot/issues/6539","id":772968419,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mjk2ODQxOQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T02:04:13Z","updated_at":"2021-02-04T02:04:13Z","author_association":"CONTRIBUTOR","body":"If you change the topic (or recreate it with diffreent partitions) then you need to drop and recreate the table. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/772968419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773058892","html_url":"https://github.com/apache/pinot/pull/6467#issuecomment-773058892","issue_url":"https://api.github.com/repos/apache/pinot/issues/6467","id":773058892,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzA1ODg5Mg==","user":{"login":"zhangloo333","id":8716697,"node_id":"MDQ6VXNlcjg3MTY2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/8716697?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangloo333","html_url":"https://github.com/zhangloo333","followers_url":"https://api.github.com/users/zhangloo333/followers","following_url":"https://api.github.com/users/zhangloo333/following{/other_user}","gists_url":"https://api.github.com/users/zhangloo333/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangloo333/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangloo333/subscriptions","organizations_url":"https://api.github.com/users/zhangloo333/orgs","repos_url":"https://api.github.com/users/zhangloo333/repos","events_url":"https://api.github.com/users/zhangloo333/events{/privacy}","received_events_url":"https://api.github.com/users/zhangloo333/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T06:13:03Z","updated_at":"2021-02-04T06:13:03Z","author_association":"CONTRIBUTOR","body":"> > The dimensionPlaceHolderId is a dom identifier which is just a name. From the naming conversion, it has already used kebab-case. Why not replace '' to '-'?\r\n> \r\n> Thanks for reviewing.\r\n> I'm not sure to understand your point so I'll give more details about my MR.\r\n> \r\n> The div name is defined here:\r\n> https://github.com/apache/incubator-pinot/blob/2be1520d99206f1c606a9062544f88f958ff1da0/thirdeye/thirdeye-frontend/app/pods/components/heatmap-chart/template.hbs#L9\r\n> \r\n> `dimName` can contain some dots.\r\n> I'm not trying to change the div name, and an id value containing a dot is _in theory_ perfectly fine.\r\n> \r\n> The fact is that in the js logic, an id value containing a dot is a problem at the following lines:\r\n> \r\n> https://github.com/apache/incubator-pinot/blob/b6c7a971032b1da51a05b78531d5bf4ea9f048b4/thirdeye/thirdeye-frontend/app/pods/components/heatmap-chart/component.js#L109\r\n> \r\n> \r\n> jquery requires proper dot escaping, ref: https://stackoverflow.com/questions/9930577/jquery-dot-in-id-selector\r\n> https://github.com/apache/incubator-pinot/blob/b6c7a971032b1da51a05b78531d5bf4ea9f048b4/thirdeye/thirdeye-frontend/app/pods/components/heatmap-chart/component.js#L121\r\n> \r\n> \r\n> D3 requires proper dot escaping, ref: https://stackoverflow.com/questions/33502614/d3-how-to-select-element-by-id-when-there-is-a-dot-in-id\r\n> So my idea was to implement the escaping in the js logic, not to change the dom identifier.\r\n\r\nThank you for your explanation. It looks good when the purpose is escaping in the js logic. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773058892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773079737","html_url":"https://github.com/apache/pinot/pull/6535#issuecomment-773079737","issue_url":"https://api.github.com/repos/apache/pinot/issues/6535","id":773079737,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzA3OTczNw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T06:57:15Z","updated_at":"2021-02-04T06:57:15Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=h1) Report\n> Merging [#6535](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=desc) (9952e9a) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.54%`.\n> The diff coverage is `42.11%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6535/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6535       +/-   ##\n===========================================\n- Coverage   66.44%   43.90%   -22.55%     \n===========================================\n  Files        1075     1334      +259     \n  Lines       54773    65809    +11036     \n  Branches     8168     9608     +1440     \n===========================================\n- Hits        36396    28893     -7503     \n- Misses      15700    34479    +18779     \n+ Partials     2677     2437      -240     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.90% <42.11%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1335 more](https://codecov.io/gh/apache/incubator-pinot/pull/6535/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=footer). Last update [6c30c76...9952e9a](https://codecov.io/gh/apache/incubator-pinot/pull/6535?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773079737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773109022","html_url":"https://github.com/apache/pinot/pull/6531#issuecomment-773109022","issue_url":"https://api.github.com/repos/apache/pinot/issues/6531","id":773109022,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzEwOTAyMg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T07:55:11Z","updated_at":"2021-02-07T03:59:19Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=h1) Report\n> Merging [#6531](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=desc) (7124378) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.56%`.\n> The diff coverage is `41.98%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6531/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6531       +/-   ##\n===========================================\n- Coverage   66.44%   43.87%   -22.57%     \n===========================================\n  Files        1075     1339      +264     \n  Lines       54773    65865    +11092     \n  Branches     8168     9611     +1443     \n===========================================\n- Hits        36396    28901     -7495     \n- Misses      15700    34534    +18834     \n+ Partials     2677     2430      -247     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.87% <41.98%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1347 more](https://codecov.io/gh/apache/incubator-pinot/pull/6531/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=footer). Last update [12ee45c...7124378](https://codecov.io/gh/apache/incubator-pinot/pull/6531?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773109022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773149504","html_url":"https://github.com/apache/pinot/pull/6538#issuecomment-773149504","issue_url":"https://api.github.com/repos/apache/pinot/issues/6538","id":773149504,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzE0OTUwNA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T09:06:12Z","updated_at":"2021-02-04T09:06:12Z","author_association":"CONTRIBUTOR","body":"Maybe also change the PR title to mention that we move date_trunc to scalar function.\r\nSomething like: Add date_trunc to scalar functions to support date_trunc during ingestion","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773149504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773353878","html_url":"https://github.com/apache/pinot/issues/6539#issuecomment-773353878","issue_url":"https://api.github.com/repos/apache/pinot/issues/6539","id":773353878,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzM1Mzg3OA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T14:32:04Z","updated_at":"2021-02-04T14:32:04Z","author_association":"NONE","body":"@mcvsubbu , Just want to check . So that means we can only scale up. And no ways to scale down atm as per design. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773353878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773544063","html_url":"https://github.com/apache/pinot/pull/6518#issuecomment-773544063","issue_url":"https://api.github.com/repos/apache/pinot/issues/6518","id":773544063,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzU0NDA2Mw==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T19:17:05Z","updated_at":"2021-02-04T19:17:05Z","author_association":"CONTRIBUTOR","body":"> @npawar Can you add the design doc to this commit message? I remember that there was a doc for interfaces.\r\n\r\nlinked to the Kinesis Issue, which has the design doc","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773544063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773627030","html_url":"https://github.com/apache/pinot/pull/6543#issuecomment-773627030","issue_url":"https://api.github.com/repos/apache/pinot/issues/6543","id":773627030,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzYyNzAzMA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T21:51:38Z","updated_at":"2021-02-04T21:51:38Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=h1) Report\n> Merging [#6543](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=desc) (ead52b4) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `1.40%`.\n> The diff coverage is `59.94%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6543/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6543      +/-   ##\n==========================================\n- Coverage   66.44%   65.04%   -1.41%     \n==========================================\n  Files        1075     1336     +261     \n  Lines       54773    65843   +11070     \n  Branches     8168     9611    +1443     \n==========================================\n+ Hits        36396    42825    +6429     \n- Misses      15700    19956    +4256     \n- Partials     2677     3062     +385     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `65.04% <59.94%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `15.55% <ø> (ø)` | |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `10.90% <ø> (-51.10%)` | :arrow_down: |\n| [...n/java/org/apache/pinot/client/ResultSetGroup.java](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L1Jlc3VsdFNldEdyb3VwLmphdmE=) | `65.38% <ø> (+0.16%)` | :arrow_up: |\n| ... and [1197 more](https://codecov.io/gh/apache/incubator-pinot/pull/6543/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=footer). Last update [421828d...ead52b4](https://codecov.io/gh/apache/incubator-pinot/pull/6543?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773627030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773667720","html_url":"https://github.com/apache/pinot/issues/6526#issuecomment-773667720","issue_url":"https://api.github.com/repos/apache/pinot/issues/6526","id":773667720,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzY2NzcyMA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-04T23:20:07Z","updated_at":"2021-02-04T23:20:07Z","author_association":"CONTRIBUTOR","body":"#6543 Pinot code change on cleaning up dead minion instances from helix.\r\nK8s changes will follow once this PR is checked in. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773667720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773695184","html_url":"https://github.com/apache/pinot/pull/6545#issuecomment-773695184","issue_url":"https://api.github.com/repos/apache/pinot/issues/6545","id":773695184,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzY5NTE4NA==","user":{"login":"bryantachen","id":229030,"node_id":"MDQ6VXNlcjIyOTAzMA==","avatar_url":"https://avatars.githubusercontent.com/u/229030?v=4","gravatar_id":"","url":"https://api.github.com/users/bryantachen","html_url":"https://github.com/bryantachen","followers_url":"https://api.github.com/users/bryantachen/followers","following_url":"https://api.github.com/users/bryantachen/following{/other_user}","gists_url":"https://api.github.com/users/bryantachen/gists{/gist_id}","starred_url":"https://api.github.com/users/bryantachen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bryantachen/subscriptions","organizations_url":"https://api.github.com/users/bryantachen/orgs","repos_url":"https://api.github.com/users/bryantachen/repos","events_url":"https://api.github.com/users/bryantachen/events{/privacy}","received_events_url":"https://api.github.com/users/bryantachen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T00:30:01Z","updated_at":"2021-02-05T00:30:01Z","author_association":"CONTRIBUTOR","body":"So right now we just list the entire list of metrics without the +# where it could be expanded right?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773695184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773721572","html_url":"https://github.com/apache/pinot/issues/6539#issuecomment-773721572","issue_url":"https://api.github.com/repos/apache/pinot/issues/6539","id":773721572,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzcyMTU3Mg==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T01:39:52Z","updated_at":"2021-02-05T01:39:52Z","author_association":"NONE","body":"Closing ticket as this is not supported feature.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773721572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773724255","html_url":"https://github.com/apache/pinot/pull/6507#issuecomment-773724255","issue_url":"https://api.github.com/repos/apache/pinot/issues/6507","id":773724255,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzcyNDI1NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T01:48:13Z","updated_at":"2021-02-05T02:58:19Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=h1) Report\n> Merging [#6507](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=desc) (9f5f20d) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.56%`.\n> The diff coverage is `42.11%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6507/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6507       +/-   ##\n===========================================\n- Coverage   66.44%   43.88%   -22.57%     \n===========================================\n  Files        1075     1339      +264     \n  Lines       54773    65865    +11092     \n  Branches     8168     9611     +1443     \n===========================================\n- Hits        36396    28904     -7492     \n- Misses      15700    34531    +18831     \n+ Partials     2677     2430      -247     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.88% <42.11%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1346 more](https://codecov.io/gh/apache/incubator-pinot/pull/6507/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=footer). Last update [1ae53fe...9f5f20d](https://codecov.io/gh/apache/incubator-pinot/pull/6507?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773724255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773727645","html_url":"https://github.com/apache/pinot/pull/6546#issuecomment-773727645","issue_url":"https://api.github.com/repos/apache/pinot/issues/6546","id":773727645,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzcyNzY0NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T01:58:26Z","updated_at":"2021-02-18T03:59:51Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=h1) Report\n> Merging [#6546](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=desc) (c59c821) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.57%`.\n> The diff coverage is `41.68%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6546/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6546       +/-   ##\n===========================================\n- Coverage   66.44%   43.87%   -22.58%     \n===========================================\n  Files        1075     1347      +272     \n  Lines       54773    66151    +11378     \n  Branches     8168     9643     +1475     \n===========================================\n- Hits        36396    29022     -7374     \n- Misses      15700    34680    +18980     \n+ Partials     2677     2449      -228     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.87% <41.68%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1360 more](https://codecov.io/gh/apache/incubator-pinot/pull/6546/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=footer). Last update [21b83d9...c59c821](https://codecov.io/gh/apache/incubator-pinot/pull/6546?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773727645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773783026","html_url":"https://github.com/apache/pinot/pull/6545#issuecomment-773783026","issue_url":"https://api.github.com/repos/apache/pinot/issues/6545","id":773783026,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mzc4MzAyNg==","user":{"login":"tejasajmera","id":33937650,"node_id":"MDQ6VXNlcjMzOTM3NjUw","avatar_url":"https://avatars.githubusercontent.com/u/33937650?v=4","gravatar_id":"","url":"https://api.github.com/users/tejasajmera","html_url":"https://github.com/tejasajmera","followers_url":"https://api.github.com/users/tejasajmera/followers","following_url":"https://api.github.com/users/tejasajmera/following{/other_user}","gists_url":"https://api.github.com/users/tejasajmera/gists{/gist_id}","starred_url":"https://api.github.com/users/tejasajmera/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tejasajmera/subscriptions","organizations_url":"https://api.github.com/users/tejasajmera/orgs","repos_url":"https://api.github.com/users/tejasajmera/repos","events_url":"https://api.github.com/users/tejasajmera/events{/privacy}","received_events_url":"https://api.github.com/users/tejasajmera/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T04:40:49Z","updated_at":"2021-02-05T04:40:49Z","author_association":"CONTRIBUTOR","body":"@bryantachen Currently behavior -  Display entire list.\r\nNew behavior - Display just the first metric and the count of remaining metrics. The count is not clickable, per mocks it does not have to expand. I agree with this behavior because I sort of struggle to see the utility of having the user see the entire list of potentially hundreds of metrics present in the yaml.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773783026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773814223","html_url":"https://github.com/apache/pinot/issues/6548#issuecomment-773814223","issue_url":"https://api.github.com/repos/apache/pinot/issues/6548","id":773814223,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzgxNDIyMw==","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T06:07:03Z","updated_at":"2021-02-05T06:07:03Z","author_association":"CONTRIBUTOR","body":"@snleee @Jackie-Jiang ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773814223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773823499","html_url":"https://github.com/apache/pinot/issues/6189#issuecomment-773823499","issue_url":"https://api.github.com/repos/apache/pinot/issues/6189","id":773823499,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzgyMzQ5OQ==","user":{"login":"jtao15","id":50065407,"node_id":"MDQ6VXNlcjUwMDY1NDA3","avatar_url":"https://avatars.githubusercontent.com/u/50065407?v=4","gravatar_id":"","url":"https://api.github.com/users/jtao15","html_url":"https://github.com/jtao15","followers_url":"https://api.github.com/users/jtao15/followers","following_url":"https://api.github.com/users/jtao15/following{/other_user}","gists_url":"https://api.github.com/users/jtao15/gists{/gist_id}","starred_url":"https://api.github.com/users/jtao15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jtao15/subscriptions","organizations_url":"https://api.github.com/users/jtao15/orgs","repos_url":"https://api.github.com/users/jtao15/repos","events_url":"https://api.github.com/users/jtao15/events{/privacy}","received_events_url":"https://api.github.com/users/jtao15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T06:28:45Z","updated_at":"2021-02-05T06:28:45Z","author_association":"CONTRIBUTOR","body":"@Jackie-Jiang Yes, the feature is done and tested. \r\nIt can be enabled by specifying time pruner in routing config: \r\n```\r\n\"routing\": {\r\n    \"segmentPrunerTypes\": [\"Time\"]\r\n  }\r\n```\r\nThe supported query operators are `RANGE`, `=`, `<`, `<=`, `>`, `>=`, `IN`, `AND`,`OR`. \r\nE.g. `Select * FROM table WHERE timeColumn BETWEEN 20 AND 30 OR timeColumn >= 40`. Time pruner will filter out segments which don't have records in [20, 30] or [40, *).\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773823499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773849731","html_url":"https://github.com/apache/pinot/issues/5694#issuecomment-773849731","issue_url":"https://api.github.com/repos/apache/pinot/issues/5694","id":773849731,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mzg0OTczMQ==","user":{"login":"ayush-bajaj","id":29439021,"node_id":"MDQ6VXNlcjI5NDM5MDIx","avatar_url":"https://avatars.githubusercontent.com/u/29439021?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-bajaj","html_url":"https://github.com/ayush-bajaj","followers_url":"https://api.github.com/users/ayush-bajaj/followers","following_url":"https://api.github.com/users/ayush-bajaj/following{/other_user}","gists_url":"https://api.github.com/users/ayush-bajaj/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-bajaj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-bajaj/subscriptions","organizations_url":"https://api.github.com/users/ayush-bajaj/orgs","repos_url":"https://api.github.com/users/ayush-bajaj/repos","events_url":"https://api.github.com/users/ayush-bajaj/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-bajaj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T07:25:57Z","updated_at":"2021-02-05T07:25:57Z","author_association":"CONTRIBUTOR","body":"Hey, made the suggested changes and all the tests have passed. can you please take a look at it again.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773849731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773933979","html_url":"https://github.com/apache/pinot/issues/6527#issuecomment-773933979","issue_url":"https://api.github.com/repos/apache/pinot/issues/6527","id":773933979,"node_id":"MDEyOklzc3VlQ29tbWVudDc3MzkzMzk3OQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T10:08:59Z","updated_at":"2021-02-05T10:08:59Z","author_association":"CONTRIBUTOR","body":"Adding minion tasks metrics for task type and status: \r\nhttps://github.com/apache/incubator-pinot/pull/6549\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773933979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773954706","html_url":"https://github.com/apache/pinot/pull/6549#issuecomment-773954706","issue_url":"https://api.github.com/repos/apache/pinot/issues/6549","id":773954706,"node_id":"MDEyOklzc3VlQ29tbWVudDc3Mzk1NDcwNg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T10:46:33Z","updated_at":"2021-02-05T10:53:46Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=h1) Report\n> Merging [#6549](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=desc) (56c7925) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.46%`.\n> The diff coverage is `42.08%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6549/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6549       +/-   ##\n===========================================\n- Coverage   66.44%   43.98%   -22.47%     \n===========================================\n  Files        1075     1336      +261     \n  Lines       54773    65849    +11076     \n  Branches     8168     9609     +1441     \n===========================================\n- Hits        36396    28965     -7431     \n- Misses      15700    34440    +18740     \n+ Partials     2677     2444      -233     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.98% <42.08%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...r/routing/segmentpruner/interval/IntervalTree.java](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsVHJlZS5qYXZh) | `0.00% <0.00%> (ø)` | |\n| ... and [1346 more](https://codecov.io/gh/apache/incubator-pinot/pull/6549/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=footer). Last update [9708292...56c7925](https://codecov.io/gh/apache/incubator-pinot/pull/6549?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/773954706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774043129","html_url":"https://github.com/apache/pinot/pull/6450#issuecomment-774043129","issue_url":"https://api.github.com/repos/apache/pinot/issues/6450","id":774043129,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDA0MzEyOQ==","user":{"login":"vmarchaud","id":2820968,"node_id":"MDQ6VXNlcjI4MjA5Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2820968?v=4","gravatar_id":"","url":"https://api.github.com/users/vmarchaud","html_url":"https://github.com/vmarchaud","followers_url":"https://api.github.com/users/vmarchaud/followers","following_url":"https://api.github.com/users/vmarchaud/following{/other_user}","gists_url":"https://api.github.com/users/vmarchaud/gists{/gist_id}","starred_url":"https://api.github.com/users/vmarchaud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmarchaud/subscriptions","organizations_url":"https://api.github.com/users/vmarchaud/orgs","repos_url":"https://api.github.com/users/vmarchaud/repos","events_url":"https://api.github.com/users/vmarchaud/events{/privacy}","received_events_url":"https://api.github.com/users/vmarchaud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-05T13:47:58Z","updated_at":"2021-02-05T13:48:10Z","author_association":"NONE","body":"I'm closing this since its currently implement high level stream but those are broken in their current state.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774043129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774356250","html_url":"https://github.com/apache/pinot/pull/6551#issuecomment-774356250","issue_url":"https://api.github.com/repos/apache/pinot/issues/6551","id":774356250,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDM1NjI1MA==","user":{"login":"JoeFuentes-WebDev","id":66155672,"node_id":"MDQ6VXNlcjY2MTU1Njcy","avatar_url":"https://avatars.githubusercontent.com/u/66155672?v=4","gravatar_id":"","url":"https://api.github.com/users/JoeFuentes-WebDev","html_url":"https://github.com/JoeFuentes-WebDev","followers_url":"https://api.github.com/users/JoeFuentes-WebDev/followers","following_url":"https://api.github.com/users/JoeFuentes-WebDev/following{/other_user}","gists_url":"https://api.github.com/users/JoeFuentes-WebDev/gists{/gist_id}","starred_url":"https://api.github.com/users/JoeFuentes-WebDev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JoeFuentes-WebDev/subscriptions","organizations_url":"https://api.github.com/users/JoeFuentes-WebDev/orgs","repos_url":"https://api.github.com/users/JoeFuentes-WebDev/repos","events_url":"https://api.github.com/users/JoeFuentes-WebDev/events{/privacy}","received_events_url":"https://api.github.com/users/JoeFuentes-WebDev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-06T00:17:24Z","updated_at":"2021-02-06T00:17:24Z","author_association":"CONTRIBUTOR","body":"Looks good to me","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774356250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774367851","html_url":"https://github.com/apache/pinot/pull/6552#issuecomment-774367851","issue_url":"https://api.github.com/repos/apache/pinot/issues/6552","id":774367851,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDM2Nzg1MQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-06T01:08:42Z","updated_at":"2021-02-09T04:51:54Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=h1) Report\n> Merging [#6552](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=desc) (d217688) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.45%`.\n> The diff coverage is `40.74%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6552/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6552       +/-   ##\n===========================================\n- Coverage   66.44%   43.99%   -22.46%     \n===========================================\n  Files        1075     1341      +266     \n  Lines       54773    65930    +11157     \n  Branches     8168     9616     +1448     \n===========================================\n- Hits        36396    29006     -7390     \n- Misses      15700    34484    +18784     \n+ Partials     2677     2440      -237     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.99% <40.74%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1352 more](https://codecov.io/gh/apache/incubator-pinot/pull/6552/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=footer). Last update [e62addb...d217688](https://codecov.io/gh/apache/incubator-pinot/pull/6552?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774367851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774635665","html_url":"https://github.com/apache/pinot/issues/6505#issuecomment-774635665","issue_url":"https://api.github.com/repos/apache/pinot/issues/6505","id":774635665,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDYzNTY2NQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-07T08:40:34Z","updated_at":"2021-02-07T08:40:34Z","author_association":"CONTRIBUTOR","body":"Yes, we should fix this to mapper jobs.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774635665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774636253","html_url":"https://github.com/apache/pinot/issues/5387#issuecomment-774636253","issue_url":"https://api.github.com/repos/apache/pinot/issues/5387","id":774636253,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDYzNjI1Mw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-07T08:45:04Z","updated_at":"2021-02-07T08:45:04Z","author_association":"CONTRIBUTOR","body":"Thanks for putting this! Closed this issue.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774636253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774638070","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-774638070","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":774638070,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDYzODA3MA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-07T08:59:34Z","updated_at":"2021-02-07T08:59:34Z","author_association":"CONTRIBUTOR","body":"So in this case, we need to set server instances metadata and use it for segment assignment.\r\nI feel the complication is that we need to handle rack metadata change which involves the segment assignment reblance.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774638070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774642690","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-774642690","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":774642690,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDY0MjY5MA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-07T09:34:42Z","updated_at":"2021-02-07T09:34:42Z","author_association":"CONTRIBUTOR","body":"hmm, in this case, shall we actually provide an API `/logs` in each pinot component to fetch the log file?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774642690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774816316","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-774816316","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":774816316,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDgxNjMxNg==","user":{"login":"daniellavoie","id":4403970,"node_id":"MDQ6VXNlcjQ0MDM5NzA=","avatar_url":"https://avatars.githubusercontent.com/u/4403970?v=4","gravatar_id":"","url":"https://api.github.com/users/daniellavoie","html_url":"https://github.com/daniellavoie","followers_url":"https://api.github.com/users/daniellavoie/followers","following_url":"https://api.github.com/users/daniellavoie/following{/other_user}","gists_url":"https://api.github.com/users/daniellavoie/gists{/gist_id}","starred_url":"https://api.github.com/users/daniellavoie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daniellavoie/subscriptions","organizations_url":"https://api.github.com/users/daniellavoie/orgs","repos_url":"https://api.github.com/users/daniellavoie/repos","events_url":"https://api.github.com/users/daniellavoie/events{/privacy}","received_events_url":"https://api.github.com/users/daniellavoie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T01:51:04Z","updated_at":"2021-02-08T01:52:20Z","author_association":"CONTRIBUTOR","body":"> hmm, in this case, shall we actually provide an API `/logs` in each pinot component to fetch the log file?\r\n\r\nThis will not solve the problem I'm trying to frame. First of all, a `/logs` endpoint will expose everything and still only means something to an operator. My persona is not an SRE but an actual data administrator. To some extend, it could even be a webapp that manages table configs on top of Pinot. If each table maintains state of their ingestion status and any error report (e.g.: the kafka bootstrap server is unavailable), this will greatly improve the ability of pinot users (again not SRE) to self troubleshoot configuration errors or connectivity error (Kafka not available). Different tables may face different ingestion status, and error root cause. One table may have an S3 credential error while the second is failing to communicate with Kafka. This status could actually be a nested `status` field within `/table/{tableName}` output. Or even maybe a `/table/{tableName}/ingestion-status` endpoint. \r\n\r\nMy last comment regarding a log file approach: exposing a `/logs` endpoint is not very possible since logs are independently configured with log4j, the app is not really aware where the logs are actually spitted. Keep in mind that best practices instruct to output logs to stdout and not a specific log file. Anyways, the log approach should not be considered.\r\n\r\ncc @kishoreg ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774816316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774823322","html_url":"https://github.com/apache/pinot/issues/6509#issuecomment-774823322","issue_url":"https://api.github.com/repos/apache/pinot/issues/6509","id":774823322,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NDgyMzMyMg==","user":{"login":"dongxiaoman","id":11821736,"node_id":"MDQ6VXNlcjExODIxNzM2","avatar_url":"https://avatars.githubusercontent.com/u/11821736?v=4","gravatar_id":"","url":"https://api.github.com/users/dongxiaoman","html_url":"https://github.com/dongxiaoman","followers_url":"https://api.github.com/users/dongxiaoman/followers","following_url":"https://api.github.com/users/dongxiaoman/following{/other_user}","gists_url":"https://api.github.com/users/dongxiaoman/gists{/gist_id}","starred_url":"https://api.github.com/users/dongxiaoman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongxiaoman/subscriptions","organizations_url":"https://api.github.com/users/dongxiaoman/orgs","repos_url":"https://api.github.com/users/dongxiaoman/repos","events_url":"https://api.github.com/users/dongxiaoman/events{/privacy}","received_events_url":"https://api.github.com/users/dongxiaoman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T02:19:09Z","updated_at":"2021-02-08T02:19:09Z","author_association":"CONTRIBUTOR","body":"@fx19880617 Just verified, still the same error with java 11\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/774823322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775047051","html_url":"https://github.com/apache/pinot/pull/6525#issuecomment-775047051","issue_url":"https://api.github.com/repos/apache/pinot/issues/6525","id":775047051,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTA0NzA1MQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T10:37:15Z","updated_at":"2021-02-08T10:37:15Z","author_association":"CONTRIBUTOR","body":"> @fx19880617 , I will do another pass later today.\r\n\r\nCan you do another pass?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775047051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775330365","html_url":"https://github.com/apache/pinot/issues/6555#issuecomment-775330365","issue_url":"https://api.github.com/repos/apache/pinot/issues/6555","id":775330365,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTMzMDM2NQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T17:57:11Z","updated_at":"2021-02-08T17:57:11Z","author_association":"CONTRIBUTOR","body":"In general, offsets will not match across clusters.  Assuming that the new cluster/topic is a replica of the old one, it is not reasonable to assume that the two clusters are exactly in sync either. So, if such an API exists,  pinot could receive either duplicate rows, or miss rows altogether. Is that acceptable?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775330365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775346288","html_url":"https://github.com/apache/pinot/issues/6556#issuecomment-775346288","issue_url":"https://api.github.com/repos/apache/pinot/issues/6556","id":775346288,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTM0NjI4OA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T18:21:47Z","updated_at":"2021-02-08T18:21:47Z","author_association":"CONTRIBUTOR","body":"Thanks, @vmarchaud . Does pubsub  partition the stream, or is it all in one partition? If there is only one partition, then that is another reason why it may not work in some production use cases with very high ingestion rate. We will be limited by the consumption capacity of a single server to consume the complete stream (this is another reason we moved away from HLC). On the other hand, a partitioned stream allows us to spread the consumption across multiple servers, thus allowing us to scale horizontally as ingestion rate increases.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775346288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775415113","html_url":"https://github.com/apache/pinot/issues/6554#issuecomment-775415113","issue_url":"https://api.github.com/repos/apache/pinot/issues/6554","id":775415113,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTQxNTExMw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T20:14:21Z","updated_at":"2021-02-08T20:14:28Z","author_association":"CONTRIBUTOR","body":"I think we can upgrade zk version to 3.4.13\r\n\r\nfyi @mayankshriv @kishoreg ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775415113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775439544","html_url":"https://github.com/apache/pinot/issues/6556#issuecomment-775439544","issue_url":"https://api.github.com/repos/apache/pinot/issues/6556","id":775439544,"node_id":"MDEyOklzc3VlQ29tbWVudDc3NTQzOTU0NA==","user":{"login":"vmarchaud","id":2820968,"node_id":"MDQ6VXNlcjI4MjA5Njg=","avatar_url":"https://avatars.githubusercontent.com/u/2820968?v=4","gravatar_id":"","url":"https://api.github.com/users/vmarchaud","html_url":"https://github.com/vmarchaud","followers_url":"https://api.github.com/users/vmarchaud/followers","following_url":"https://api.github.com/users/vmarchaud/following{/other_user}","gists_url":"https://api.github.com/users/vmarchaud/gists{/gist_id}","starred_url":"https://api.github.com/users/vmarchaud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vmarchaud/subscriptions","organizations_url":"https://api.github.com/users/vmarchaud/orgs","repos_url":"https://api.github.com/users/vmarchaud/repos","events_url":"https://api.github.com/users/vmarchaud/events{/privacy}","received_events_url":"https://api.github.com/users/vmarchaud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-08T20:37:14Z","updated_at":"2021-02-08T20:37:14Z","author_association":"NONE","body":"> Does pubsub partition the stream, or is it all in one partition\r\n\r\nYeah it's pretty much only one partition, at least from all the doc i read about it. However you can totally throw multiple workers on the same \"partition\" because the system will only allow to pull messages on one worker that hasn't picked pulled by another (of course it might re-deliver if a worker miss what they call a \"ack deadline\" which is around ~15s). \r\n\r\nI guess the model is fondamentaly different, kafka and generally other pubsub will expose more logic to the consumer side where as GCP's pubsub will handle pretty much everything itself.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/775439544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]