[{"url":"https://api.github.com/repos/apache/systemds/issues/comments/277896282","html_url":"https://github.com/apache/systemds/pull/373#issuecomment-277896282","issue_url":"https://api.github.com/repos/apache/systemds/issues/373","id":277896282,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg5NjI4Mg==","user":{"login":"bertholdreinwald","id":10200727,"node_id":"MDQ6VXNlcjEwMjAwNzI3","avatar_url":"https://avatars.githubusercontent.com/u/10200727?v=4","gravatar_id":"","url":"https://api.github.com/users/bertholdreinwald","html_url":"https://github.com/bertholdreinwald","followers_url":"https://api.github.com/users/bertholdreinwald/followers","following_url":"https://api.github.com/users/bertholdreinwald/following{/other_user}","gists_url":"https://api.github.com/users/bertholdreinwald/gists{/gist_id}","starred_url":"https://api.github.com/users/bertholdreinwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertholdreinwald/subscriptions","organizations_url":"https://api.github.com/users/bertholdreinwald/orgs","repos_url":"https://api.github.com/users/bertholdreinwald/repos","events_url":"https://api.github.com/users/bertholdreinwald/events{/privacy}","received_events_url":"https://api.github.com/users/bertholdreinwald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T04:09:25Z","updated_at":"2017-02-07T04:09:25Z","author_association":"CONTRIBUTOR","body":"sorry for the late response. My opinion would be to have dmlFromResource, because\r\n1. provides easy access to DML script in JAR, where ever the JAR is in a cloud environment.\r\n2. consistency with Scala API.\r\n3. having variety of where your DML comes from.\r\n4. dmlFromUrl requires another hop.\r\n\r\nI look at it as a progression of DML usage ... people may start with (1) DML as strings, (2) that will become wildly soon as the size of the script grows ... then it goes in a file. Where do i put it if i am in a hosted env. If I put it in git, then it will 1st go in staging area, and I can use it. (3) Once blessed, then a wrapper needs to be developed. \r\n\r\nAll that takes time, and blocks experimentation with the script. ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/277896282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/277896300","html_url":"https://github.com/apache/systemds/pull/373#issuecomment-277896300","issue_url":"https://api.github.com/repos/apache/systemds/issues/373","id":277896300,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg5NjMwMA==","user":{"login":"bertholdreinwald","id":10200727,"node_id":"MDQ6VXNlcjEwMjAwNzI3","avatar_url":"https://avatars.githubusercontent.com/u/10200727?v=4","gravatar_id":"","url":"https://api.github.com/users/bertholdreinwald","html_url":"https://github.com/bertholdreinwald","followers_url":"https://api.github.com/users/bertholdreinwald/followers","following_url":"https://api.github.com/users/bertholdreinwald/following{/other_user}","gists_url":"https://api.github.com/users/bertholdreinwald/gists{/gist_id}","starred_url":"https://api.github.com/users/bertholdreinwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertholdreinwald/subscriptions","organizations_url":"https://api.github.com/users/bertholdreinwald/orgs","repos_url":"https://api.github.com/users/bertholdreinwald/repos","events_url":"https://api.github.com/users/bertholdreinwald/events{/privacy}","received_events_url":"https://api.github.com/users/bertholdreinwald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T04:09:36Z","updated_at":"2017-02-07T04:09:36Z","author_association":"CONTRIBUTOR","body":"LGTM.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/277896300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/277901007","html_url":"https://github.com/apache/systemds/pull/373#issuecomment-277901007","issue_url":"https://api.github.com/repos/apache/systemds/issues/373","id":277901007,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzkwMTAwNw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T04:50:01Z","updated_at":"2017-02-07T04:50:01Z","author_association":"MEMBER","body":"Thank you @bertholdreinwald. I agree.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/277901007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278087369","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-278087369","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":278087369,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODA4NzM2OQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:05:28Z","updated_at":"2017-02-07T18:05:28Z","author_association":"MEMBER","body":"The re-run of Jenkins reported the issues with DataFrameRowFrameConversionTest.\r\n```\r\n19:59:18 Results :\r\n19:59:18 \r\n19:59:18 Failed tests: \r\n19:59:18   FullReblockTest.testCSVMultipleMSparseMR:407->runReblockTest:467 26 values are not in equal\r\n19:59:18 \r\n19:59:18 Tests in error: \r\n19:59:18   DataFrameRowFrameConversionTest.testRowLongConversionMultiDenseUnknown:173->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowDoubleConversionMultiDense:88->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowLongConversionMultiDense:168->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowDoubleConversionMultiDenseUnknown:93->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowLongConversionMultiSparseUnknown:183->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowLongConversionMultiSparse:178->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowDoubleConversionMultiSparse:98->testDataFrameConversion:237 Runtime\r\n19:59:18   DataFrameRowFrameConversionTest.testRowDoubleConversionMultiSparseUnknown:103->testDataFrameConversion:237 Runtime\r\n19:59:18 \r\n19:59:18 Tests run: 6543, Failures: 1, Errors: 8, Skipped: 0\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278087369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278126184","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278126184","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278126184,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEyNjE4NA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T20:14:29Z","updated_at":"2017-02-07T20:14:29Z","author_association":"MEMBER","body":"All tests passed: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1081/console\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278126184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278129914","html_url":"https://github.com/apache/systemds/pull/378#issuecomment-278129914","issue_url":"https://api.github.com/repos/apache/systemds/issues/378","id":278129914,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEyOTkxNA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T20:28:56Z","updated_at":"2017-02-07T20:28:56Z","author_association":"MEMBER","body":"Thank you for reviewing @fschueler !\r\n\r\nBTW, all tests pass except random unrelated FullReblockTest. https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1080/\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278129914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278133809","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278133809","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278133809,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEzMzgwOQ==","user":{"login":"frreiss","id":12436991,"node_id":"MDQ6VXNlcjEyNDM2OTkx","avatar_url":"https://avatars.githubusercontent.com/u/12436991?v=4","gravatar_id":"","url":"https://api.github.com/users/frreiss","html_url":"https://github.com/frreiss","followers_url":"https://api.github.com/users/frreiss/followers","following_url":"https://api.github.com/users/frreiss/following{/other_user}","gists_url":"https://api.github.com/users/frreiss/gists{/gist_id}","starred_url":"https://api.github.com/users/frreiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/frreiss/subscriptions","organizations_url":"https://api.github.com/users/frreiss/orgs","repos_url":"https://api.github.com/users/frreiss/repos","events_url":"https://api.github.com/users/frreiss/events{/privacy}","received_events_url":"https://api.github.com/users/frreiss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T20:43:52Z","updated_at":"2017-02-07T20:43:52Z","author_association":"CONTRIBUTOR","body":"@deroneriksson can you please add a unit test for this method? We need to prevent future breakage of code in other projects that calls `stringDataFrameToVectorDataFrame()`.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278133809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278136072","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278136072","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278136072,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEzNjA3Mg==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T20:51:55Z","updated_at":"2017-02-07T20:55:44Z","author_association":"MEMBER","body":"@frreiss \r\nSure, I can add a basic unit test based on that example I included in this PR.\r\n\r\nSince RDDConverterUtilsExt javadocs describe it as \"NOTE: These are experimental converter utils. Once thoroughly tested, they can be moved to RDDConverterUtils\", I really hope users will not directly reference RDDConverterUtilsExt. However, some of our older documentation did point to this non-API class so it is understandable that it may be used.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278136072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278136889","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278136889","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278136889,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEzNjg4OQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T20:55:00Z","updated_at":"2017-02-07T20:55:00Z","author_association":"MEMBER","body":"@frreiss For the new MLContext API, the org.apache.sysml.api.mlcontext.MLContextConversionUtil class was created to hopefully serve to buffer users from SystemML internal conversion functionality.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278136889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278143898","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278143898","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278143898,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE0Mzg5OA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T21:21:20Z","updated_at":"2017-02-07T21:21:20Z","author_association":"MEMBER","body":"Here is the original method:\r\n```\r\n\tpublic static Dataset<Row> stringDataFrameToVectorDataFrame(SQLContext sqlContext, Dataset<Row> inputDF)\r\n\t\t\tthrows DMLRuntimeException {\r\n\r\n\t\tStructField[] oldSchema = inputDF.schema().fields();\r\n\t\t//create the new schema\r\n\t\tStructField[] newSchema = new StructField[oldSchema.length];\r\n\t\tfor(int i = 0; i < oldSchema.length; i++) {\r\n\t\t\tString colName = oldSchema[i].name();\r\n\t\t\tnewSchema[i] = DataTypes.createStructField(colName, new VectorUDT(), true);\r\n\t\t}\r\n\r\n\t\t//converter\r\n\t\tclass StringToVector implements Function<Tuple2<Row, Long>, Row> {\r\n\t\t\tprivate static final long serialVersionUID = -4733816995375745659L;\r\n\t\t\t@Override\r\n\t\t\tpublic Row call(Tuple2<Row, Long> arg0) throws Exception {\r\n\t\t\t\tRow oldRow = arg0._1;\r\n\t\t\t\tint oldNumCols = oldRow.length();\r\n\t\t\t\tif (oldNumCols > 1) {\r\n\t\t\t\t\tthrow new DMLRuntimeException(\"The row must have at most one column\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// parse the various strings. i.e\r\n\t\t\t\t// ((1.2,4.3, 3.4))  or (1.2, 3.4, 2.2) or (1.2 3.4)\r\n\t\t\t\t// [[1.2,34.3, 1.2, 1.2]] or [1.2, 3.4] or [1.3 1.2]\r\n\t\t\t\tObject [] fields = new Object[oldNumCols];\r\n\t\t\t\tArrayList<Object> fieldsArr = new ArrayList<Object>();\r\n\t\t\t\tfor (int i = 0; i < oldRow.length(); i++) {\r\n\t\t\t\t\tObject ci=oldRow.get(i);\r\n\t\t\t\t\tif (ci instanceof String) {\r\n\t\t\t\t\t\tString cis = (String)ci;\r\n\t\t\t\t\t\tStringBuffer sb = new StringBuffer(cis.trim());\r\n\t\t\t\t\t\tfor (int nid=0; i < 2; i++) { //remove two level nesting\r\n\t\t\t\t\t\t\tif ((sb.charAt(0) == '(' && sb.charAt(sb.length() - 1) == ')') ||\r\n\t\t\t\t\t\t\t\t\t(sb.charAt(0) == '[' && sb.charAt(sb.length() - 1) == ']')\r\n\t\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tsb.deleteCharAt(0);\r\n\t\t\t\t\t\t\t\tsb.setLength(sb.length() - 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//have the replace code\r\n\t\t\t\t\t\tString ncis = \"[\" + sb.toString().replaceAll(\" *, *\", \",\") + \"]\";\r\n\t\t\t\t\t\tVector v = Vectors.parse(ncis);\r\n\t\t\t\t\t\tfieldsArr.add(v);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new DMLRuntimeException(\"Only String is supported\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tRow row = RowFactory.create(fieldsArr.toArray());\r\n\t\t\t\treturn row;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//output DF\r\n\t\tJavaRDD<Row> newRows = inputDF.rdd().toJavaRDD().zipWithIndex().map(new StringToVector());\r\n\t\t// DataFrame outDF = sqlContext.createDataFrame(newRows, new StructType(newSchema)); //TODO investigate why it doesn't work\r\n\t\tDataset<Row> outDF = sqlContext.createDataFrame(newRows.rdd(),\r\n\t\t\t\tDataTypes.createStructType(newSchema));\r\n\r\n\t\treturn outDF;\r\n\t}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278143898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278144461","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278144461","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278144461,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE0NDQ2MQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T21:23:19Z","updated_at":"2017-02-07T21:23:19Z","author_association":"MEMBER","body":"The extent of my changes were converting:\r\n```\r\nVector v = Vectors.parse(ncis);\r\nfieldsArr.add(v);\r\n```\r\nto\r\n```\r\n// [ ] will always result in double array\r\ndouble[] doubles = (double[]) NumericParser.parse(ncis);\r\nVector dense = Vectors.dense(doubles);\r\nfieldsArr.add(dense);\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278144461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278145940","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-278145940","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":278145940,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE0NTk0MA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T21:28:46Z","updated_at":"2017-02-07T21:28:46Z","author_association":"MEMBER","body":"My goal here was not to improve the method but to restore the original behavior but using the ml.linalg.Vector import rather than mllib.linalg.Vector. I purposefully was avoiding additional changes to this method since I wanted to minimize potential impact to any user using this functionality.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278145940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278186409","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-278186409","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":278186409,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE4NjQwOQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:07:57Z","updated_at":"2017-02-08T00:07:57Z","author_association":"CONTRIBUTOR","body":"The error is related to OOM caused by code generation in Spark SQL:\r\n```bash\r\n12:45:10 testRowLongConversionMultiDenseUnknown(org.apache.sysml.test.integration.functions.mlcontext.DataFrameRowFrameConversionTest)  Time elapsed: 13.378 sec  <<< ERROR!\r\n12:45:10 java.lang.RuntimeException: org.apache.spark.SparkException: Job aborted due to stage failure: Task 7 in stage 0.0 failed 1 times, most recent failure: Lost task 7.0 in stage 0.0 (TID 7, localhost, executor driver): org.spark_project.guava.util.concurrent.ExecutionError: java.lang.OutOfMemoryError: Java heap space\r\n12:45:10 \tat org.spark_project.guava.cache.LocalCache$Segment.get(LocalCache.java:2261)\r\n12:45:10 \tat org.spark_project.guava.cache.LocalCache.get(LocalCache.java:4000)\r\n12:45:10 \tat org.spark_project.guava.cache.LocalCache.getOrLoad(LocalCache.java:4004)\r\n12:45:10 \tat org.spark_project.guava.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4874)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.CodeGenerator$.compile(CodeGenerator.scala:890)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.GenerateUnsafeProjection$.create(GenerateUnsafeProjection.scala:405)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.GenerateUnsafeProjection$.create(GenerateUnsafeProjection.scala:359)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.GenerateUnsafeProjection$.create(GenerateUnsafeProjection.scala:32)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.CodeGenerator.generate(CodeGenerator.scala:874)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.encoders.ExpressionEncoder.extractProjection$lzycompute(ExpressionEncoder.scala:266)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.encoders.ExpressionEncoder.extractProjection(ExpressionEncoder.scala:266)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.encoders.ExpressionEncoder.toRow(ExpressionEncoder.scala:290)\r\n12:45:10 \tat org.apache.spark.sql.SparkSession$$anonfun$3.apply(SparkSession.scala:547)\r\n12:45:10 \tat org.apache.spark.sql.SparkSession$$anonfun$3.apply(SparkSession.scala:547)\r\n12:45:10 \tat scala.collection.Iterator$$anon$11.next(Iterator.scala:409)\r\n12:45:10 \tat scala.collection.Iterator$$anon$11.next(Iterator.scala:409)\r\n12:45:10 \tat scala.collection.Iterator$$anon$11.next(Iterator.scala:409)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIterator.agg_doAggregateWithoutKey$(Unknown Source)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIterator.processNext(Unknown Source)\r\n12:45:10 \tat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\r\n12:45:10 \tat org.apache.spark.sql.execution.WholeStageCodegenExec$$anonfun$8$$anon$1.hasNext(WholeStageCodegenExec.scala:377)\r\n12:45:10 \tat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:408)\r\n12:45:10 \tat org.apache.spark.shuffle.sort.BypassMergeSortShuffleWriter.write(BypassMergeSortShuffleWriter.java:126)\r\n12:45:10 \tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:96)\r\n12:45:10 \tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:53)\r\n12:45:10 \tat org.apache.spark.scheduler.Task.run(Task.scala:99)\r\n12:45:10 \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:282)\r\n12:45:10 \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n12:45:10 \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n12:45:10 \tat java.lang.Thread.run(Thread.java:745)\r\n12:45:10 Caused by: java.lang.OutOfMemoryError: Java heap space\r\n12:45:10 \tat org.codehaus.janino.util.ClassFile.loadAttribute(ClassFile.java:1508)\r\n12:45:10 \tat org.codehaus.janino.util.ClassFile.loadAttributes(ClassFile.java:644)\r\n12:45:10 \tat org.codehaus.janino.util.ClassFile.loadFields(ClassFile.java:623)\r\n12:45:10 \tat org.codehaus.janino.util.ClassFile.<init>(ClassFile.java:280)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.CodeGenerator$$anonfun$recordCompilationStats$1.apply(CodeGenerator.scala:967)\r\n12:45:10 \tat org.apache.spark.sql.catalyst.expressions.codegen.CodeGenerator$$anonfun$recordCompilationStats$1.apply(CodeGenerator.scala:964)\r\n12:45:10 \tat scala.collection.Iterator$class.foreach(Iterator.scala:893)\r\n12:45:10 \tat scala.collection.AbstractIterator.foreach(Iterator.scala:1336)\r\n12:45:10 \tat scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\r\n12:45:10 \tat scala.collection.AbstractIterable.foreach(Iterable.scala:54)\r\n```\r\n\r\nSetting the configuration [spark.sql.codegen.wholeStage to false](https://github.com/apache/incubator-systemml/pull/376/commits/3be3553a25dac040c03a775d123105f786556dec#diff-ca6fceb83dfd9c92c83c9bf8de937cdaR219) didnot help.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278186409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278188585","html_url":"https://github.com/apache/systemds/pull/382#issuecomment-278188585","issue_url":"https://api.github.com/repos/apache/systemds/issues/382","id":278188585,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE4ODU4NQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:19:22Z","updated_at":"2017-02-08T00:19:22Z","author_association":"CONTRIBUTOR","body":"LGTM :+1: ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278188585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278188712","html_url":"https://github.com/apache/systemds/pull/381#issuecomment-278188712","issue_url":"https://api.github.com/repos/apache/systemds/issues/381","id":278188712,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE4ODcxMg==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:20:00Z","updated_at":"2017-02-08T00:20:00Z","author_association":"CONTRIBUTOR","body":"LGTM when the tests are passed :+1: ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278188712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278190513","html_url":"https://github.com/apache/systemds/pull/381#issuecomment-278190513","issue_url":"https://api.github.com/repos/apache/systemds/issues/381","id":278190513,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE5MDUxMw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:29:53Z","updated_at":"2017-02-08T00:29:53Z","author_association":"MEMBER","body":"Thank you for reviewing @niketanpansare ! All tests passed here: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1083/","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278190513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278193571","html_url":"https://github.com/apache/systemds/pull/382#issuecomment-278193571","issue_url":"https://api.github.com/repos/apache/systemds/issues/382","id":278193571,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE5MzU3MQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:47:22Z","updated_at":"2017-02-08T00:47:22Z","author_association":"MEMBER","body":"Thanks for reviewing @niketanpansare!\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278193571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278193784","html_url":"https://github.com/apache/systemds/pull/382#issuecomment-278193784","issue_url":"https://api.github.com/repos/apache/systemds/issues/382","id":278193784,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE5Mzc4NA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:48:40Z","updated_at":"2017-02-08T00:48:40Z","author_association":"MEMBER","body":"All tests passed here: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1084/","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278193784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278246902","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-278246902","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":278246902,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI0NjkwMg==","user":{"login":"asurve","id":13441665,"node_id":"MDQ6VXNlcjEzNDQxNjY1","avatar_url":"https://avatars.githubusercontent.com/u/13441665?v=4","gravatar_id":"","url":"https://api.github.com/users/asurve","html_url":"https://github.com/asurve","followers_url":"https://api.github.com/users/asurve/followers","following_url":"https://api.github.com/users/asurve/following{/other_user}","gists_url":"https://api.github.com/users/asurve/gists{/gist_id}","starred_url":"https://api.github.com/users/asurve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asurve/subscriptions","organizations_url":"https://api.github.com/users/asurve/orgs","repos_url":"https://api.github.com/users/asurve/repos","events_url":"https://api.github.com/users/asurve/events{/privacy}","received_events_url":"https://api.github.com/users/asurve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T07:09:44Z","updated_at":"2017-02-08T07:09:44Z","author_association":"MEMBER","body":"@niketanpansare Can you do explain on data frame involved in the test case to get explain statement?\r\ne.g. df.explain(true)\r\nThis will generate explain output which will have multiple sections. Please get those sections and we can request Spark SQL team to look at it.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278246902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278427983","html_url":"https://github.com/apache/systemds/pull/344#issuecomment-278427983","issue_url":"https://api.github.com/repos/apache/systemds/issues/344","id":278427983,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQyNzk4Mw==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:03:02Z","updated_at":"2017-02-08T19:08:25Z","author_association":"CONTRIBUTOR","body":"A. Microbenchmarks.\r\n\r\n```bash\r\ngit clone https://github.com/niketanpansare/incubator-systemml.git\r\ngit checkout switch_blas_experiment  \r\nmvn package -P standalone-jar\r\ncp target/systemml*standalone.jar SystemML.jar\r\n# Dense experiments\r\nfor i in 1 2 5 7 8 9\r\ndo\r\n        java -Xmx40G -server -cp SystemML.jar:commons-io-2.4.jar org.apache.sysml.api.DMLScript -exp $i\r\ndone\r\n```\r\n\r\nSetup 1: java -Xmx40G ...\r\nSetup 2: java -Xmx20G ...\r\n\r\nBoth setup 1 and 2 are run of the following machine:\r\n\r\n```bash\r\nIntel(R) Xeon(R) CPU E5-2620 v3 @ 2.40GHz\r\nCPU(s):                24\r\nThread(s) per core:    2\r\nCore(s) per socket:    6\r\nSocket(s):             2\r\nNUMA node(s):          2\r\nL1d cache:             32K\r\nL1i cache:             32K\r\nL2 cache:              256K\r\nL3 cache:              15360K\r\n```\r\n\r\nWe ignore first 5 iterations and then run 20 iterations. We drop the best and the worst run and average the time of the remaining 8 runs.\r\n\r\nThe time is reported in milliseconds.\r\n\r\n|                                                |  Setup  | LibMatrix (single) |   MKL (single)    | LibMatrix (multi) |    MKL (multi)  |\r\n|------------------------------------------------|---------|--------------------|-------------------|-------------------|-----------------|\r\n| Matrix-vector 1M x 1K, dense                   |    1    |     953.1612       |    552.7734       |    188.5189       |     466.4393    |\r\n| Matrix-matrix 1M x 1K x 20, dense              |    1    |     15131.62       |    2392.395       |    1231.446       |     1052.258    |\r\n| Squared matrix 3K x 3K, dense                  |    1    |     11682.76       |    1389.884       |    1062.401       |     218.4674    |\r\n| 64 rows x 196,608 columns %*% 196,608 x 512    |    1    |     3047.32        |    484.3707       |    498.5716       |     149.428     |\r\n| 1024 rows x 196,608 columns %*% 196,608 x 512  |    1    |     49041.85       |    5820.965       |    4006.641       |     903.6708    |\r\n\r\n\r\nSparse Data: Waiting for help from @mboehm7 or @nakul02 for bug described above\r\n\r\n\r\nB. End-to-End\r\n\r\n\r\n|                                                |   MKL Total (dist)  | LibMatrixMult (dist) |\r\n|------------------------------------------------|---------------------|----------------------|\r\n| Squared matmult: 50000 dense                   | 3067.811 (cpmm)     | 3023.844 (cpmm)      |\r\n| Squared matmult: 80000 dense                   | failed with OOM     | failed with OOM      |\r\n\r\n\r\nThe setup is exactly same as our VLDB paper except the Spark version used is 2.0.1\r\n\r\n|                                 | MKL Total (1Mx1K) | MKL Total (10Mx1K) | LibMatrixMult (1Mx1K) | LibMatrixMult (10Mx1K) |\r\n|---------------------------------|-------------------|--------------------|-----------------------|------------------------|\r\n| L2SVM                           | 31.93             | 190.050            | 29.2576               | 147.763                |\r\n| MultiLogReg                     | 147.381           | 1241.498           | 129.23                | 945.18                 |\r\n| MSVM                            | 85.289            | 439.477            | 68.845                | 426.852                |\r\n| Naive Bayes                     | 23.603            | 155.74             | 22.554                | 173.986                |\r\n| Linear Regression Direct Solve  | 65.127            | 197.672            | 67.82                 | 202.265                |\r\n| Linear Regression CG            | 22.903            | 161.807            | 20.05                 | 157.191                |\r\n| GLM                             | 52.152            | 324.045            | 53.568                | 283.870                |\r\n\r\nThe experiments uses MKL even for memory bound cases such as matrix-vector. TSMM is not supported via BLAS yet.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278427983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278430381","html_url":"https://github.com/apache/systemds/pull/383#issuecomment-278430381","issue_url":"https://api.github.com/repos/apache/systemds/issues/383","id":278430381,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQzMDM4MQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:11:24Z","updated_at":"2017-02-08T19:11:24Z","author_association":"CONTRIBUTOR","body":"LGTM. I will merge :+1: ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278430381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278430558","html_url":"https://github.com/apache/systemds/pull/383#issuecomment-278430558","issue_url":"https://api.github.com/repos/apache/systemds/issues/383","id":278430558,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQzMDU1OA==","user":{"login":"nakul02","id":5394361,"node_id":"MDQ6VXNlcjUzOTQzNjE=","avatar_url":"https://avatars.githubusercontent.com/u/5394361?v=4","gravatar_id":"","url":"https://api.github.com/users/nakul02","html_url":"https://github.com/nakul02","followers_url":"https://api.github.com/users/nakul02/followers","following_url":"https://api.github.com/users/nakul02/following{/other_user}","gists_url":"https://api.github.com/users/nakul02/gists{/gist_id}","starred_url":"https://api.github.com/users/nakul02/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nakul02/subscriptions","organizations_url":"https://api.github.com/users/nakul02/orgs","repos_url":"https://api.github.com/users/nakul02/repos","events_url":"https://api.github.com/users/nakul02/events{/privacy}","received_events_url":"https://api.github.com/users/nakul02/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:12:03Z","updated_at":"2017-02-08T19:12:03Z","author_association":"MEMBER","body":"Thanks @niketanpansare ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278430558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278433001","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-278433001","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":278433001,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQzMzAwMQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T19:21:00Z","updated_at":"2017-02-08T19:21:00Z","author_association":"CONTRIBUTOR","body":"Here is the output of `df.explain(true)` which as inserted at [DataFrameRowFrameConversionTest](https://github.com/niketanpansare/incubator-systemml/blob/fb99746a63e2a66b95474e1df4342c5de4f6c6e3/src/test/java/org/apache/sysml/test/integration/functions/mlcontext/DataFrameRowFrameConversionTest.java#L226):\r\n```bash\r\n== Parsed Logical Plan ==\r\nLogicalRDD [__INDEX#1265, C1#1266L, C2#1267L, C3#1268L, C4#1269L, C5#1270L, C6#1271L, C7#1272L, C8#1273L, C9#1274L, C10#1275L, C11#1276L, C12#1277L, C13#1278L, C14#1279L, C15#1280L, C16#1281L, C17#1282L, C18#1283L, C19#1284L, C20#1285L, C21#1286L, C22#1287L, C23#1288L, ... 1241 more fields]\r\n\r\n== Analyzed Logical Plan ==\r\n__INDEX: double, C1: bigint, C2: bigint, C3: bigint, C4: bigint, C5: bigint, C6: bigint, C7: bigint, C8: bigint, C9: bigint, C10: bigint, C11: bigint, C12: bigint, C13: bigint, C14: bigint, C15: bigint, C16: bigint, C17: bigint, C18: bigint, C19: bigint, C20: bigint, C21: bigint, C22: bigint, C23: bigint, ... 1241 more fields\r\nLogicalRDD [__INDEX#1265, C1#1266L, C2#1267L, C3#1268L, C4#1269L, C5#1270L, C6#1271L, C7#1272L, C8#1273L, C9#1274L, C10#1275L, C11#1276L, C12#1277L, C13#1278L, C14#1279L, C15#1280L, C16#1281L, C17#1282L, C18#1283L, C19#1284L, C20#1285L, C21#1286L, C22#1287L, C23#1288L, ... 1241 more fields]\r\n\r\n== Optimized Logical Plan ==\r\nLogicalRDD [__INDEX#1265, C1#1266L, C2#1267L, C3#1268L, C4#1269L, C5#1270L, C6#1271L, C7#1272L, C8#1273L, C9#1274L, C10#1275L, C11#1276L, C12#1277L, C13#1278L, C14#1279L, C15#1280L, C16#1281L, C17#1282L, C18#1283L, C19#1284L, C20#1285L, C21#1286L, C22#1287L, C23#1288L, ... 1241 more fields]\r\n\r\n== Physical Plan ==\r\nScan ExistingRDD[__INDEX#1265,C1#1266L,C2#1267L,C3#1268L,C4#1269L,C5#1270L,C6#1271L,C7#1272L,C8#1273L,C9#1274L,C10#1275L,C11#1276L,C12#1277L,C13#1278L,C14#1279L,C15#1280L,C16#1281L,C17#1282L,C18#1283L,C19#1284L,C20#1285L,C21#1286L,C22#1287L,C23#1288L,... 1241 more fields]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278433001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278547759","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-278547759","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":278547759,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU0Nzc1OQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T04:59:55Z","updated_at":"2017-02-09T04:59:55Z","author_association":"CONTRIBUTOR","body":"@mboehm7 @asurve Setting [spark.sql.codegen.wholeStage and spark.memory.offHeap.enabled](https://github.com/apache/incubator-systemml/pull/376/files#diff-ca6fceb83dfd9c92c83c9bf8de937cdaR219) to false didn't work. Still getting the same error.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278547759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278575655","html_url":"https://github.com/apache/systemds/pull/344#issuecomment-278575655","issue_url":"https://api.github.com/repos/apache/systemds/issues/344","id":278575655,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU3NTY1NQ==","user":{"login":"bertholdreinwald","id":10200727,"node_id":"MDQ6VXNlcjEwMjAwNzI3","avatar_url":"https://avatars.githubusercontent.com/u/10200727?v=4","gravatar_id":"","url":"https://api.github.com/users/bertholdreinwald","html_url":"https://github.com/bertholdreinwald","followers_url":"https://api.github.com/users/bertholdreinwald/followers","following_url":"https://api.github.com/users/bertholdreinwald/following{/other_user}","gists_url":"https://api.github.com/users/bertholdreinwald/gists{/gist_id}","starred_url":"https://api.github.com/users/bertholdreinwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertholdreinwald/subscriptions","organizations_url":"https://api.github.com/users/bertholdreinwald/orgs","repos_url":"https://api.github.com/users/bertholdreinwald/repos","events_url":"https://api.github.com/users/bertholdreinwald/events{/privacy}","received_events_url":"https://api.github.com/users/bertholdreinwald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T08:19:18Z","updated_at":"2017-02-09T08:19:18Z","author_association":"CONTRIBUTOR","body":"Thanks, Niketan. Very good. Couple of questions/clarifications:\r\n\r\n1. For the Microbenchmarks, does **dense** mean 100% ? \r\n\r\n1. For the End-to-End, I assume that you had a block size of 1k x 1k, and\r\n\r\n1. in that case, in the executors, did mmult run single or multithreaded?\r\nEither way, MKL should be 5-6 faster. But as it does not show any improvement, it says that it is not the bottleneck, and the bottleneck is somewhere else. Just to verify, good you take a look at the stats?\r\n\r\n1. Also, choosing a larger blocksize would shift the bottlenecks, and MKL could show some benefits.\r\n\r\n1. For the end-to-end algs, I assume that those were single node runs for both data sizes.\r\n\r\n1. Given the micro benchmarks, I'd suggest to rerun the numbers, and not use MKL for matrix-vector. \r\n\r\n1. And may be add 1 DL alg to see numbers with matrix-matrix mult in the loop.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278575655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278672067","html_url":"https://github.com/apache/systemds/pull/344#issuecomment-278672067","issue_url":"https://api.github.com/repos/apache/systemds/issues/344","id":278672067,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODY3MjA2Nw==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T15:17:41Z","updated_at":"2017-02-09T15:17:41Z","author_association":"CONTRIBUTOR","body":"for distributed squared multiply, please use pmapmm instead of cpmm; otherwise you're bound by shuffling. ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278672067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278719920","html_url":"https://github.com/apache/systemds/pull/380#issuecomment-278719920","issue_url":"https://api.github.com/repos/apache/systemds/issues/380","id":278719920,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcxOTkyMA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:54:27Z","updated_at":"2017-02-09T17:54:27Z","author_association":"MEMBER","body":"All tests passed: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1082/","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278719920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278721915","html_url":"https://github.com/apache/systemds/pull/380#issuecomment-278721915","issue_url":"https://api.github.com/repos/apache/systemds/issues/380","id":278721915,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcyMTkxNQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T18:01:12Z","updated_at":"2017-02-09T18:01:12Z","author_association":"MEMBER","body":"Thank you @deroneriksson for updating the test!\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278721915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278722465","html_url":"https://github.com/apache/systemds/pull/380#issuecomment-278722465","issue_url":"https://api.github.com/repos/apache/systemds/issues/380","id":278722465,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcyMjQ2NQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T18:03:07Z","updated_at":"2017-02-09T18:03:07Z","author_association":"MEMBER","body":"Thank you for reviewing @gweidner!\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278722465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278753402","html_url":"https://github.com/apache/systemds/pull/384#issuecomment-278753402","issue_url":"https://api.github.com/repos/apache/systemds/issues/384","id":278753402,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODc1MzQwMg==","user":{"login":"prithvirajsen","id":13860460,"node_id":"MDQ6VXNlcjEzODYwNDYw","avatar_url":"https://avatars.githubusercontent.com/u/13860460?v=4","gravatar_id":"","url":"https://api.github.com/users/prithvirajsen","html_url":"https://github.com/prithvirajsen","followers_url":"https://api.github.com/users/prithvirajsen/followers","following_url":"https://api.github.com/users/prithvirajsen/following{/other_user}","gists_url":"https://api.github.com/users/prithvirajsen/gists{/gist_id}","starred_url":"https://api.github.com/users/prithvirajsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prithvirajsen/subscriptions","organizations_url":"https://api.github.com/users/prithvirajsen/orgs","repos_url":"https://api.github.com/users/prithvirajsen/repos","events_url":"https://api.github.com/users/prithvirajsen/events{/privacy}","received_events_url":"https://api.github.com/users/prithvirajsen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T19:54:18Z","updated_at":"2017-02-09T19:54:18Z","author_association":"CONTRIBUTOR","body":"@bertholdreinwald can you please review this PR ?","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278753402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278809109","html_url":"https://github.com/apache/systemds/pull/344#issuecomment-278809109","issue_url":"https://api.github.com/repos/apache/systemds/issues/344","id":278809109,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgwOTEwOQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T23:27:30Z","updated_at":"2017-02-09T23:27:30Z","author_association":"CONTRIBUTOR","body":"\r\n>> For the Microbenchmarks, does dense mean 100% ?\r\n\r\nNo sparsity = 0.9\r\n\r\n>> For the End-to-End, I assume that you had a block size of 1k x 1k, and in that case, in the executors, did mmult run single or multithreaded?\r\n\r\nSingle-threaded calls to MKL by many tasks in parallel.\r\n\r\n>> Either way, MKL should be 5-6 faster. But as it does not show any improvement, it says that it is not the bottleneck, and the bottleneck is somewhere else. Just to verify, good you take a look at the stats?\r\n>> Given the micro benchmarks, I'd suggest to rerun the numbers, and not use MKL for matrix-vector.\r\n\r\nPlease see below chart that shows the performance of MKL without matrix-vector vs LibMatrixMult\r\n\r\n|                                 | MKL Total (1Mx1K) | MKL Total (10Mx1K) | LibMatrixMult (1Mx1K) | LibMatrixMult (10Mx1K) |\r\n|---------------------------------|-------------------|--------------------|-----------------------|------------------------|\r\n| L2SVM                           |   27.22           | 159.753            | 29.2576               | 147.763                |\r\n| MultiLogReg                     |   142.31          | 1317.388           | 129.23                | 945.18                 |\r\n| MSVM                            |   78.333          | 286.65             | 68.845                | 426.852                |\r\n| Naive Bayes                     |   22.779          | 154.291            | 22.554                | 173.986                |\r\n| Linear Regression Direct Solve  |   64.602          | 198.84             | 67.82                 | 202.265                |\r\n| Linear Regression CG            |   29.02           | 198.936            | 20.05                 | 157.191                |\r\n| GLM                             |   55.998          | 293.102            | 53.568                | 283.870                |\r\n\r\n\r\n>> Also, choosing a larger blocksize would shift the bottlenecks, and MKL could show some benefits.\r\n\r\nPossible but that might introduce unintended side-effects. So, for now, we should not change the block size.\r\n\r\n>> For the end-to-end algs, I assume that those were single node runs for both data sizes.\r\n\r\nThe 1Mx1K refers to the bar pointed by the black arrow and 10Mx1K refers to the bar pointed to by the red arrow. The cases when SystemML cp+spark backend does not create a SparkContext are annotated with \"X\". The cases when the input data fits into aggregated cluster memory but not a single node and where perform automatic checkpoint injection are annotated with \"Y\".\r\n\r\n![vldb_experiments](https://cloud.githubusercontent.com/assets/11686380/22807507/37ba376e-eedc-11e6-83a8-fe71574c8f58.PNG)\r\n\r\n\r\n>> And may be add 1 DL alg to see numbers with matrix-matrix mult in the loop.\r\n\r\nFor Lenet with MNIST dataset,\r\n\r\nStatistics for training 800 iterations without MKL\r\n\r\n```bash\r\nTotal elapsed time:             317.491 sec.\r\nTotal compilation time:         2.160 sec.\r\nTotal execution time:           315.331 sec.\r\nNumber of compiled Spark inst:  147.\r\nNumber of executed Spark inst:  4.\r\nNative  calls (Mult/DNN/Fails): 0/0/0.\r\nCache hits (Mem, WB, FS, HDFS): 109700/0/0/2.\r\nCache writes (WB, FS, HDFS):    60440/15/8.\r\nCache times (ACQr/m, RLS, EXP): 3.726/0.046/37.985/1.265 sec.\r\nHOP DAGs recompiled (PRED, SB): 0/15493.\r\nHOP DAGs recompile time:        3.330 sec.\r\nFunctions recompiled:           1.\r\nFunctions recompile time:       0.026 sec.\r\nSpark ctx create time (lazy):   1.004 sec.\r\nSpark trans counts (par,bc,col):0/0/2.\r\nSpark trans times (par,bc,col): 0.000/0.000/3.689 secs.\r\nTotal JIT compile time:         35.829 sec.\r\nTotal JVM GC count:             802.\r\nTotal JVM GC time:              18.559 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   train   293.140 sec     1\r\n-- 2)   conv2d_bias_add         95.102 sec      1738\r\n-- 3)   conv2d_backward_filter  41.770 sec      1720\r\n-- 4)   ba+*    28.307 sec      5178\r\n-- 5)   sel+    23.699 sec      2589\r\n-- 6)   update  22.783 sec      6880\r\n-- 7)   update_nesterov         22.438 sec      6880\r\n-- 8)   relu_backward   15.957 sec      3440\r\n-- 9)   +*      14.756 sec      3440\r\n-- 10)  maxpooling_backward     13.787 sec      1720\r\n-- 11)  conv2d_backward_data    12.612 sec      860\r\n-- 12)  relu_maxpooling         11.469 sec      1738\r\n-- 13)  uack+   9.090 sec       3440\r\n-- 14)  r'      7.501 sec       4300\r\n-- 15)  rangeReIndex    4.705 sec       1728\r\n```\r\n\r\nStatistics for training 800 iterations with MKL\r\n\r\n```bash\r\nTotal elapsed time:             232.714 sec.\r\nTotal compilation time:         2.131 sec.\r\nTotal execution time:           230.583 sec.\r\nNumber of compiled Spark inst:  147.\r\nNumber of executed Spark inst:  4.\r\nNative mkl calls (Mult/DNN/Fails):      2598/6898/0.\r\nCache hits (Mem, WB, FS, HDFS): 109700/0/0/2.\r\nCache writes (WB, FS, HDFS):    60440/15/8.\r\nCache times (ACQr/m, RLS, EXP): 3.517/0.041/39.695/1.245 sec.\r\nHOP DAGs recompiled (PRED, SB): 0/15493.\r\nHOP DAGs recompile time:        3.369 sec.\r\nFunctions recompiled:           1.\r\nFunctions recompile time:       0.028 sec.\r\nSpark ctx create time (lazy):   0.985 sec.\r\nSpark trans counts (par,bc,col):0/0/2.\r\nSpark trans times (par,bc,col): 0.000/0.000/3.481 secs.\r\nTotal JIT compile time:         35.505 sec.\r\nTotal JVM GC count:             517.\r\nTotal JVM GC time:              12.043 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   train   213.405 sec     1\r\n-- 2)   conv2d_bias_add         36.098 sec      1738\r\n-- 3)   ba+*    27.529 sec      5178\r\n-- 4)   sel+    23.906 sec      2589\r\n-- 5)   update  22.837 sec      6880\r\n-- 6)   update_nesterov         22.447 sec      6880\r\n-- 7)   conv2d_backward_filter  16.667 sec      1720\r\n-- 8)   relu_backward   15.685 sec      3440\r\n-- 9)   +*      13.963 sec      3440\r\n-- 10)  maxpooling_backward     13.397 sec      1720\r\n-- 11)  relu_maxpooling         12.507 sec      1738\r\n-- 12)  conv2d_backward_data    12.254 sec      860\r\n-- 13)  uack+   9.077 sec       3440\r\n-- 14)  r'      7.937 sec       4300\r\n-- 15)  rangeReIndex    4.846 sec       1728\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278809109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278831743","html_url":"https://github.com/apache/systemds/pull/386#issuecomment-278831743","issue_url":"https://api.github.com/repos/apache/systemds/issues/386","id":278831743,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgzMTc0Mw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T01:30:23Z","updated_at":"2017-02-10T01:30:23Z","author_association":"MEMBER","body":"Can test with (MLContext-style test):\r\n```\r\n@Test\r\npublic void testScalarWrite() {\r\n\tString s = \"A = 2.0; write(A,\\\"scalar.txt\\\")\";\r\n\tScript script = dml(s);\r\n\tml.execute(script);\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278831743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278876454","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-278876454","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":278876454,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg3NjQ1NA==","user":{"login":"bertholdreinwald","id":10200727,"node_id":"MDQ6VXNlcjEwMjAwNzI3","avatar_url":"https://avatars.githubusercontent.com/u/10200727?v=4","gravatar_id":"","url":"https://api.github.com/users/bertholdreinwald","html_url":"https://github.com/bertholdreinwald","followers_url":"https://api.github.com/users/bertholdreinwald/followers","following_url":"https://api.github.com/users/bertholdreinwald/following{/other_user}","gists_url":"https://api.github.com/users/bertholdreinwald/gists{/gist_id}","starred_url":"https://api.github.com/users/bertholdreinwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertholdreinwald/subscriptions","organizations_url":"https://api.github.com/users/bertholdreinwald/orgs","repos_url":"https://api.github.com/users/bertholdreinwald/repos","events_url":"https://api.github.com/users/bertholdreinwald/events{/privacy}","received_events_url":"https://api.github.com/users/bertholdreinwald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T07:29:25Z","updated_at":"2017-02-10T07:29:25Z","author_association":"CONTRIBUTOR","body":"To move forward with this PR, I'd suggest to modify the test case, and put a note in the Release Notes suggesting a different memory configuration as a work around.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/278876454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279033445","html_url":"https://github.com/apache/systemds/pull/344#issuecomment-279033445","issue_url":"https://api.github.com/repos/apache/systemds/issues/344","id":279033445,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTAzMzQ0NQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T18:56:15Z","updated_at":"2017-02-10T18:56:15Z","author_association":"CONTRIBUTOR","body":"@bertholdreinwald Here are the Statistics for MSVM 10Mx1K:\r\n\r\nWith MKL (without Matrix-Vector multiplication):\r\n```bash\r\nTotal elapsed time:             284.776 sec.\r\nTotal compilation time:         2.145 sec.\r\nTotal execution time:           282.631 sec.\r\nNumber of compiled Spark inst:  16.\r\nNumber of executed Spark inst:  74.\r\nNative mkl calls (Mult/DNN/Fails):      0/0/0.\r\nCache hits (Mem, WB, FS, HDFS): 1900/0/0/43.\r\nCache writes (WB, FS, HDFS):    672/2/1.\r\nCache times (ACQr/m, RLS, EXP): 307.222/0.095/1.285/0.164 sec.\r\nHOP DAGs recompiled (PRED, SB): 1/181.\r\nHOP DAGs recompile time:        0.411 sec.\r\nSpark ctx create time (lazy):   31.268 sec.\r\nSpark trans counts (par,bc,col):0/68/42.\r\nSpark trans times (par,bc,col): 0.000/17.052/306.578 secs.\r\nParFor loops optimized:         1.\r\nParFor optimize time:           0.549 sec.\r\nParFor initialize time:         0.033 sec.\r\nParFor result merge time:       0.008 sec.\r\nParFor total update in-place:   0/26/29\r\nTotal JIT compile time:         64.062 sec.\r\nTotal JVM GC count:             142.\r\nTotal JVM GC time:              20.393 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   sp_mapmm        216.800 sec     68\r\n-- 2)   +*      194.874 sec     140\r\n-- 3)   *       142.629 sec     348\r\n-- 4)   sp_chkpoint     31.906 sec      6\r\n-- 5)   sel+    28.835 sec      98\r\n-- 6)   >       21.710 sec      77\r\n-- 7)   1-*     16.732 sec      98\r\n-- 8)   tak+*   11.350 sec      154\r\n-- 9)   >=      6.235 sec       42\r\n-- 10)  rmvar   3.890 sec       3107\r\n```\r\n\r\nWith LibMatrixMult:\r\n```bash\r\nTotal elapsed time:             424.994 sec.\r\nTotal compilation time:         2.015 sec.\r\nTotal execution time:           422.979 sec.\r\nNumber of compiled Spark inst:  16.\r\nNumber of executed Spark inst:  74.\r\nCache hits (Mem, WB, FS, HDFS): 1900/0/0/43.\r\nCache writes (WB, FS, HDFS):    672/1/1.\r\nCache times (ACQr/m, RLS, EXP): 471.759/0.006/0.268/0.194 sec.\r\nHOP DAGs recompiled (PRED, SB): 1/181.\r\nHOP DAGs recompile time:        0.362 sec.\r\nSpark ctx create time (lazy):   31.668 sec.\r\nSpark trans counts (par,bc,col):0/68/42.\r\nSpark trans times (par,bc,col): 0.000/14.155/471.240 secs.\r\nParFor loops optimized:         1.\r\nParFor optimize time:           0.541 sec.\r\nParFor initialize time:         0.034 sec.\r\nParFor result merge time:       0.007 sec.\r\nParFor total update in-place:   0/26/29\r\nTotal JIT compile time:         55.369 sec.\r\nTotal JVM GC count:             136.\r\nTotal JVM GC time:              19.416 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   sp_mapmm        561.430 sec     68\r\n-- 2)   +*      263.128 sec     140\r\n-- 3)   *       235.146 sec     348\r\n-- 4)   sp_chkpoint     32.300 sec      6\r\n-- 5)   sel+    25.936 sec      98\r\n-- 6)   >       18.506 sec      77\r\n-- 7)   1-*     10.323 sec      98\r\n-- 8)   tak+*   7.302 sec       154\r\n-- 9)   rmvar   6.078 sec       3107\r\n-- 10)  >=      3.896 sec       42\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279033445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279078549","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-279078549","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":279078549,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTA3ODU0OQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T22:02:45Z","updated_at":"2017-02-10T22:02:45Z","author_association":"MEMBER","body":"Added javadocs, null check, test cases, catch parse exception, etc. I'm going to merge this. Please let me know if any other modification are needed. Also feel free to submit PRs for any modifications needed.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279078549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279078917","html_url":"https://github.com/apache/systemds/pull/379#issuecomment-279078917","issue_url":"https://api.github.com/repos/apache/systemds/issues/379","id":279078917,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTA3ODkxNw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T22:04:29Z","updated_at":"2017-02-10T22:04:29Z","author_association":"MEMBER","body":"BTW all tests passed here: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1101/","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279078917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279104323","html_url":"https://github.com/apache/systemds/pull/376#issuecomment-279104323","issue_url":"https://api.github.com/repos/apache/systemds/issues/376","id":279104323,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTEwNDMyMw==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-11T00:39:34Z","updated_at":"2017-02-11T00:39:34Z","author_association":"CONTRIBUTOR","body":"Modified the test to use smaller data and [all tests passed](https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1103/).","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279104323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279165994","html_url":"https://github.com/apache/systemds/pull/344#issuecomment-279165994","issue_url":"https://api.github.com/repos/apache/systemds/issues/344","id":279165994,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTE2NTk5NA==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-11T18:32:15Z","updated_at":"2017-02-11T18:32:15Z","author_association":"CONTRIBUTOR","body":"To get below results, I forced the matrix multiplication operator to pmapmm and used the below given DML script:\r\n```bash\r\nX = rand(rows=$1, cols=$2)\r\nY = rand(rows=$2, cols=$3)\r\nZ = X %*% Y\r\nif(1 == 1) {\r\n        print(sum(Z))\r\n}\r\n```\r\n\r\nWith $1 = $2 = $3 = 50K,\r\n\r\nStatistics with MKL enabled (no error):\r\n```bash\r\n17/02/10 14:37:04 INFO api.DMLScript: SystemML Statistics:\r\nTotal elapsed time:             1076.101 sec.\r\nTotal compilation time:         0.599 sec.\r\nTotal execution time:           1075.502 sec.\r\nNumber of compiled Spark inst:  4.\r\nNumber of executed Spark inst:  4.\r\nNative mkl calls (Mult/DNN/Fails):      0/0/0.\r\nCache hits (Mem, WB, FS, HDFS): 1/0/0/0.\r\nCache writes (WB, FS, HDFS):    0/0/0.\r\nCache times (ACQr/m, RLS, EXP): 0.000/0.001/0.000/0.000 sec.\r\nHOP DAGs recompiled (PRED, SB): 0/2.\r\nHOP DAGs recompile time:        0.007 sec.\r\nSpark ctx create time (lazy):   32.085 sec.\r\nSpark trans counts (par,bc,col):0/0/13.\r\nSpark trans times (par,bc,col): 0.000/0.000/122.305 secs.\r\nTotal JIT compile time:         51.14 sec.\r\nTotal JVM GC count:             213.\r\nTotal JVM GC time:              74.344 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   sp_pmapmm       1037.506 sec    1\r\n-- 2)   sp_rand         32.421 sec      2\r\n-- 3)   sp_uak+         0.648 sec       1\r\n-- 4)   rmvar   0.044 sec       7\r\n-- 5)   print   0.000 sec       1\r\n-- 6)   createvar       0.000 sec       4\r\n-- 7)   castdts         0.000 sec       1\r\n-- 8)   cpvar   0.000 sec       1\r\n```\r\n\r\nWith LibMatrix, I get following error:\r\n```bash\r\n17/02/10 15:52:56 WARN cluster.YarnSchedulerBackend$YarnSchedulerEndpoint: Executor for container container_1485300997081_0427_01_000005 exited because of a YARN event (e.g., pre-emption) and not because of an error in the running job.\r\n17/02/10 15:52:56 ERROR cluster.YarnSchedulerBackend$YarnSchedulerEndpoint: Error requesting driver to remove executor 4 for reason Executor for container container_1485300997081_0427_01_000005 exited because of a YARN event (e.g., pre-emption) and not because of an error in the running job.\r\norg.apache.spark.SparkException: Could not find CoarseGrainedScheduler.\r\n        at org.apache.spark.rpc.netty.Dispatcher.postMessage(Dispatcher.scala:154)\r\n        at org.apache.spark.rpc.netty.Dispatcher.postLocalMessage(Dispatcher.scala:129)\r\n        at org.apache.spark.rpc.netty.NettyRpcEnv.ask(NettyRpcEnv.scala:225)\r\n        at org.apache.spark.rpc.netty.NettyRpcEndpointRef.ask(NettyRpcEnv.scala:508)\r\n        at org.apache.spark.rpc.RpcEndpointRef.ask(RpcEndpointRef.scala:63)\r\n        at org.apache.spark.scheduler.cluster.YarnSchedulerBackend$YarnSchedulerEndpoint$$anonfun$receive$1.applyOrElse(YarnSchedulerBackend.scala:263)\r\n        at org.apache.spark.rpc.netty.Inbox$$anonfun$process$1.apply$mcV$sp(Inbox.scala:117)\r\n        at org.apache.spark.rpc.netty.Inbox.safelyCall(Inbox.scala:205)\r\n        at org.apache.spark.rpc.netty.Inbox.process(Inbox.scala:101)\r\n        at org.apache.spark.rpc.netty.Dispatcher$MessageLoop.run(Dispatcher.scala:213)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n17/02/10 15:52:57 INFO memory.MemoryStore: MemoryStore cleared\r\n17/02/10 15:52:57 INFO storage.BlockManager: BlockManager stopped\r\n17/02/10 15:52:57 INFO storage.BlockManagerMaster: BlockManagerMaster stopped\r\n17/02/10 15:52:57 INFO scheduler.OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n17/02/10 15:52:57 INFO spark.SparkContext: Successfully stopped SparkContext\r\n17/02/10 15:52:57 INFO api.DMLScript: SystemML Statistics:\r\nTotal elapsed time:             4546.056 sec.\r\nTotal compilation time:         0.577 sec.\r\nTotal execution time:           4545.478 sec.\r\nNumber of compiled Spark inst:  4.\r\nNumber of executed Spark inst:  4.\r\nCache hits (Mem, WB, FS, HDFS): 1/0/0/0.\r\nCache writes (WB, FS, HDFS):    0/0/0.\r\nCache times (ACQr/m, RLS, EXP): 0.000/0.001/0.000/0.000 sec.\r\nHOP DAGs recompiled (PRED, SB): 0/2.\r\nHOP DAGs recompile time:        0.006 sec.\r\nSpark ctx create time (lazy):   36.146 sec.\r\nSpark trans counts (par,bc,col):0/0/13.\r\nSpark trans times (par,bc,col): 0.000/0.000/117.186 secs.\r\nTotal JIT compile time:         48.357 sec.\r\nTotal JVM GC count:             210.\r\nTotal JVM GC time:              64.583 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   sp_pmapmm       4500.858 sec    1\r\n-- 2)   sp_rand         36.491 sec      2\r\n-- 3)   sp_uak+         2.842 sec       1\r\n-- 4)   rmvar   0.061 sec       7\r\n-- 5)   print   0.000 sec       1\r\n-- 6)   createvar       0.000 sec       4\r\n-- 7)   castdts         0.000 sec       1\r\n-- 8)   cpvar   0.000 sec       1\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279165994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279196773","html_url":"https://github.com/apache/systemds/pull/353#issuecomment-279196773","issue_url":"https://api.github.com/repos/apache/systemds/issues/353","id":279196773,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTE5Njc3Mw==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-12T04:49:57Z","updated_at":"2017-02-12T04:49:57Z","author_association":"MEMBER","body":"Yes, the error was also observed in latest round of performance testing (but can be worked-around).\r\n\r\nInstead added probabilities argument in runNaiveBayes.sh for executing naive-bayes-predict.dml to prevent error when running parent runAllMultinomial.sh of performance test suite.  Reverted naive-bayes-predict.dml to previous version without ifdef that was removed in [SYSTEMML-234][SYSTEMML-208].  Also removed \"Note this is an optional argument\" from naive bayes predict description in algorithms reference.\r\nVerified error no longer occurred, naive-bayes-predict ran successfully from runNaiveBayes.sh using local small private cluster, and probabilities files created in hdfs.\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279196773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279460621","html_url":"https://github.com/apache/systemds/pull/385#issuecomment-279460621","issue_url":"https://api.github.com/repos/apache/systemds/issues/385","id":279460621,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTQ2MDYyMQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T17:25:19Z","updated_at":"2017-02-13T17:25:19Z","author_association":"MEMBER","body":"Thank you @deroneriksson for the update!\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279460621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279516771","html_url":"https://github.com/apache/systemds/pull/374#issuecomment-279516771","issue_url":"https://api.github.com/repos/apache/systemds/issues/374","id":279516771,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTUxNjc3MQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T20:46:16Z","updated_at":"2017-02-13T20:46:16Z","author_association":"CONTRIBUTOR","body":"Closing this PR for now. We can revisit this after discussion on https://github.com/apache/incubator-systemml/pull/389 and after experiments with rectangular blocks","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279516771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279547819","html_url":"https://github.com/apache/systemds/pull/353#issuecomment-279547819","issue_url":"https://api.github.com/repos/apache/systemds/issues/353","id":279547819,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU0NzgxOQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T22:43:12Z","updated_at":"2017-02-13T22:43:12Z","author_association":"MEMBER","body":"LGTM. Thanks for the additional updates @gweidner!\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279547819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279548700","html_url":"https://github.com/apache/systemds/pull/386#issuecomment-279548700","issue_url":"https://api.github.com/repos/apache/systemds/issues/386","id":279548700,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU0ODcwMA==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T22:47:10Z","updated_at":"2017-02-13T22:47:10Z","author_association":"MEMBER","body":"Thank you @deroneriksson for making scalar crc file cleanup consistent with matrix crc file cleanup.\r\nLGTM","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279548700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279549022","html_url":"https://github.com/apache/systemds/pull/386#issuecomment-279549022","issue_url":"https://api.github.com/repos/apache/systemds/issues/386","id":279549022,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU0OTAyMg==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-13T22:48:29Z","updated_at":"2017-02-13T22:48:29Z","author_association":"MEMBER","body":"Thank you for reviewing @gweidner!\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279549022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279564205","html_url":"https://github.com/apache/systemds/pull/360#issuecomment-279564205","issue_url":"https://api.github.com/repos/apache/systemds/issues/360","id":279564205,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU2NDIwNQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T00:02:54Z","updated_at":"2017-02-14T00:02:54Z","author_association":"MEMBER","body":"All main tests passed here: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1108/\r\n\r\nPython tests had the same results as the code on master:\r\n```\r\ntest_matrix_agg_fn.py 15 ran\r\ntest_matrix_binary_op.py 29 ran, 2 failed (convertMBtoPy4JDenseArr - Sparse to dense conversion is not yet implemented)\r\ntest_mlcontext.py 9 ran\r\ntest_mllearn_df.py 3 ran, 1 failed (score test_linear_regression_sk2)\r\ntest_mllearn_numpy.py 5 ran, 1 failed (score test_linear_regression)\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279564205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279575543","html_url":"https://github.com/apache/systemds/pull/389#issuecomment-279575543","issue_url":"https://api.github.com/repos/apache/systemds/issues/389","id":279575543,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTU3NTU0Mw==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T01:08:50Z","updated_at":"2017-02-14T01:08:50Z","author_association":"CONTRIBUTOR","body":"I will run few more experiments and update this PR soon :)","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279575543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279823440","html_url":"https://github.com/apache/systemds/pull/391#issuecomment-279823440","issue_url":"https://api.github.com/repos/apache/systemds/issues/391","id":279823440,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTgyMzQ0MA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T20:18:44Z","updated_at":"2017-02-14T20:18:44Z","author_association":"MEMBER","body":"I think we should remove it from the matrix documentation. It can be used with strings, so it should be kept in that section of the documentation.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279823440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279858929","html_url":"https://github.com/apache/systemds/pull/386#issuecomment-279858929","issue_url":"https://api.github.com/repos/apache/systemds/issues/386","id":279858929,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg1ODkyOQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-14T22:37:14Z","updated_at":"2017-02-14T22:37:14Z","author_association":"MEMBER","body":"BTW all tests passed: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1100/\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279858929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279877020","html_url":"https://github.com/apache/systemds/pull/391#issuecomment-279877020","issue_url":"https://api.github.com/repos/apache/systemds/issues/391","id":279877020,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg3NzAyMA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-15T00:06:33Z","updated_at":"2017-02-15T00:06:33Z","author_association":"MEMBER","body":"All tests passed: https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1113/\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279877020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279878219","html_url":"https://github.com/apache/systemds/pull/391#issuecomment-279878219","issue_url":"https://api.github.com/repos/apache/systemds/issues/391","id":279878219,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg3ODIxOQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-15T00:13:26Z","updated_at":"2017-02-15T00:13:26Z","author_association":"MEMBER","body":"I removed append() from the matrix docs. I'll merge.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279878219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279880406","html_url":"https://github.com/apache/systemds/pull/384#issuecomment-279880406","issue_url":"https://api.github.com/repos/apache/systemds/issues/384","id":279880406,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTg4MDQwNg==","user":{"login":"bertholdreinwald","id":10200727,"node_id":"MDQ6VXNlcjEwMjAwNzI3","avatar_url":"https://avatars.githubusercontent.com/u/10200727?v=4","gravatar_id":"","url":"https://api.github.com/users/bertholdreinwald","html_url":"https://github.com/bertholdreinwald","followers_url":"https://api.github.com/users/bertholdreinwald/followers","following_url":"https://api.github.com/users/bertholdreinwald/following{/other_user}","gists_url":"https://api.github.com/users/bertholdreinwald/gists{/gist_id}","starred_url":"https://api.github.com/users/bertholdreinwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertholdreinwald/subscriptions","organizations_url":"https://api.github.com/users/bertholdreinwald/orgs","repos_url":"https://api.github.com/users/bertholdreinwald/repos","events_url":"https://api.github.com/users/bertholdreinwald/events{/privacy}","received_events_url":"https://api.github.com/users/bertholdreinwald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-15T00:26:01Z","updated_at":"2017-02-15T00:26:01Z","author_association":"CONTRIBUTOR","body":"Thanks, @prithvirajsen . Couple of minor comments.\r\n* expand on the alg description a little more, pretty much the stuff that you put under “OTHER DETAILS”.\r\n* formatting of input/output parameter description (use table format as in PCA.dml), show default values.\r\n* document parameter “HIDDEN”\r\n* formatting of DML\r\n* please consider using approach scripts/utils/shuffle.dml for randomization.\r\n* can you print out current epoch# in loop","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279880406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279917324","html_url":"https://github.com/apache/systemds/pull/360#issuecomment-279917324","issue_url":"https://api.github.com/repos/apache/systemds/issues/360","id":279917324,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTkxNzMyNA==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-15T04:58:23Z","updated_at":"2017-02-15T04:58:23Z","author_association":"CONTRIBUTOR","body":"LGTM - as a nice to have, you might want to create a util method for SparkSession creation as it's used in quite a number of places.\r\n\r\nFurthermore, while looking over the changes, I've seen two orthogonal issues:\r\n* The call sc.getConf().set(\"spark.memory.offHeap.enabled\", \"false\"); seems ineffective because usually all configurations need to be set before the spark context is created.\r\n* There are a number of misleading method names that refer to DataFrames but return DataSets","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/279917324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280112589","html_url":"https://github.com/apache/systemds/pull/360#issuecomment-280112589","issue_url":"https://api.github.com/repos/apache/systemds/issues/360","id":280112589,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDExMjU4OQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-15T19:27:31Z","updated_at":"2017-02-15T19:27:31Z","author_association":"MEMBER","body":"Thank you for reviewing @mboehm7! I'm going to go ahead and merge as it is for now.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280112589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280126373","html_url":"https://github.com/apache/systemds/pull/392#issuecomment-280126373","issue_url":"https://api.github.com/repos/apache/systemds/issues/392","id":280126373,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDEyNjM3Mw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-15T20:17:54Z","updated_at":"2017-02-15T20:17:54Z","author_association":"MEMBER","body":"In Spark 2.0.2 shell:\r\n```\r\nWelcome to\r\n      ____              __\r\n     / __/__  ___ _____/ /__\r\n    _\\ \\/ _ \\/ _ `/ __/  '_/\r\n   /___/ .__/\\_,_/_/ /_/\\_\\   version 2.0.2\r\n      /_/\r\n         \r\nUsing Scala version 2.11.8 (Java HotSpot(TM) 64-Bit Server VM, Java 1.8.0_60)\r\nType in expressions to have them evaluated.\r\nType :help for more information.\r\n\r\nscala> import org.apache.sysml.api.mlcontext._\r\nimport org.apache.sysml.api.mlcontext._\r\n\r\nscala> val ml = new MLContext(sc)\r\norg.apache.sysml.api.mlcontext.MLContextException: This version of SystemML requires Spark 2.1.0 or greater.\r\n  at org.apache.sysml.api.mlcontext.MLContextUtil.verifySparkVersionSupported(MLContextUtil.java:171)\r\n  at org.apache.sysml.api.mlcontext.MLContext.initMLContext(MLContext.java:214)\r\n  at org.apache.sysml.api.mlcontext.MLContext.<init>(MLContext.java:198)\r\n  at org.apache.sysml.api.mlcontext.MLContext.<init>(MLContext.java:173)\r\n  ... 50 elided\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280126373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280370287","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280370287","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280370287,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDM3MDI4Nw==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T15:54:25Z","updated_at":"2017-02-16T15:54:25Z","author_association":"MEMBER","body":"All tests passed at [OnDemand Build 260](https://sparktc.ibmcloud.com/jenkins/job/SystemML-OnDemand/260/).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280370287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280372875","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280372875","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280372875,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDM3Mjg3NQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T16:02:13Z","updated_at":"2017-02-16T16:02:13Z","author_association":"MEMBER","body":"Examples of exception stack traces for ConfigurationManager and YarnClusterAnalyzer that this patch resolves are included in the JIRA.  I included DMLYarnClient and DMLAppMaster since they also create YarnConfiguration.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280372875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280382855","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280382855","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280382855,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDM4Mjg1NQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T16:33:18Z","updated_at":"2017-02-16T16:33:18Z","author_association":"MEMBER","body":"Note tried including the jersey 1.9 jars with spark.  Although that resolved the class not found issues, it caused problem with spark's history server.  Modifying spark's yarn Client.scala class to disable ATS in its YarnConfiguration did not resolve the issue for SystemML.  During performance testing it was worked-around by changing YARN config but that applies to whole cluster.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280382855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280413679","html_url":"https://github.com/apache/systemds/pull/384#issuecomment-280413679","issue_url":"https://api.github.com/repos/apache/systemds/issues/384","id":280413679,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQxMzY3OQ==","user":{"login":"prithvirajsen","id":13860460,"node_id":"MDQ6VXNlcjEzODYwNDYw","avatar_url":"https://avatars.githubusercontent.com/u/13860460?v=4","gravatar_id":"","url":"https://api.github.com/users/prithvirajsen","html_url":"https://github.com/prithvirajsen","followers_url":"https://api.github.com/users/prithvirajsen/followers","following_url":"https://api.github.com/users/prithvirajsen/following{/other_user}","gists_url":"https://api.github.com/users/prithvirajsen/gists{/gist_id}","starred_url":"https://api.github.com/users/prithvirajsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prithvirajsen/subscriptions","organizations_url":"https://api.github.com/users/prithvirajsen/orgs","repos_url":"https://api.github.com/users/prithvirajsen/repos","events_url":"https://api.github.com/users/prithvirajsen/events{/privacy}","received_events_url":"https://api.github.com/users/prithvirajsen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T18:19:30Z","updated_at":"2017-02-16T18:19:30Z","author_association":"CONTRIBUTOR","body":"@bertholdreinwald:\r\n\r\nImplemented most of your comments (HIDDEN is an output param and was documented).\r\n\r\nI didn't implement the resuffling mechanism from shuffle.dml because this script (possibly) reshuffles 2 times. The first time is to reshuffle the input. The second time is to reshuffle the hidden layer representations (if the user asks for it). The second reshuffle is to get back the original order of rows. Essentially, the script ensures that the ith input's hidden representation is produced at the ith row of HIDDEN. If this is not the case then the output will be less useful.\r\n\r\nCurrently, the script generates a permutation matrix to shuffle the input and then uses the transpose of the same permutation matrix to get back the original order. This requires 1 transpose and 1 mat-mult. The same can be achieved by using the ops in shuffle.dml (store the rand col of numbers, append it, and the order in 'DESCENDING' order I guess) but I'm not sure it guarantees the reverse shuffling. Specifically, I'm worried about randomly generating the same numbers and then trying to reverse the order given these random numbers. The current reshuffling in the script guarantees the shuffling and re-shuffling.\r\n\r\nPlease take a look when you get a chance.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280413679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280458281","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280458281","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280458281,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ1ODI4MQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T20:58:34Z","updated_at":"2017-02-16T20:58:34Z","author_association":"MEMBER","body":"Performed very basic check with:\r\n```\r\n# verify main jar works\r\ncd target\r\njava -cp ./lib/*:systemml-0.13.0-incubating-SNAPSHOT.jar org.apache.sysml.api.DMLScript -s \"print('hello world');\"\r\n\r\n# verify SystemML.jar works\r\njava -cp ./lib/*:SystemML.jar org.apache.sysml.api.DMLScript -s \"print('hello world');\"\r\n\r\n# verify src works\r\ntar -xvzf systemml-0.13.0-incubating-SNAPSHOT-src.tgz\r\ncd systemml-0.13.0-incubating-SNAPSHOT-src\r\nmvn clean package -P distribution\r\ncd target/\r\njava -cp ./lib/*:systemml-0.13.0-incubating-SNAPSHOT.jar org.apache.sysml.api.DMLScript -s \"print('hello world');\"\r\njava -cp ./lib/*:SystemML.jar org.apache.sysml.api.DMLScript -s \"print('hello world');\"\r\ncd ..\r\ncd ..\r\n\r\n# verify bin tgz works\r\ntar -xvzf systemml-0.13.0-incubating-SNAPSHOT-bin.tgz\r\ncd systemml-0.13.0-incubating-SNAPSHOT-bin\r\necho \"print('hello world');\" > hello.dml\r\n./runStandaloneSystemML.sh hello.dml\r\ncd ..\r\n\r\n# verify distrib tgz works\r\ntar -xvzf systemml-0.13.0-incubating-SNAPSHOT.tgz\r\ncd systemml-0.13.0-incubating-SNAPSHOT\r\njava -cp ../lib/*:SystemML.jar org.apache.sysml.api.DMLScript -s \"print('hello world');\"\r\n\r\n# verify spark batch mode\r\nexport SPARK_HOME=/Users/deroneriksson/spark-2.1.0-bin-hadoop2.7\r\n$SPARK_HOME/bin/spark-submit SystemML.jar -s \"print('hello world');\" -exec hybrid_spark\r\n\r\n# verify hadoop batch mode (hadoop 2.7)\r\nhadoop jar SystemML.jar -s \"print('hello world');\"\r\ncd ..\r\n\r\n# bin uni stats\r\ncd systemml-0.13.0-incubating-SNAPSHOT-bin\r\nwget -P data/ http://archive.ics.uci.edu/ml/machine-learning-databases/haberman/haberman.data\r\necho '{\"rows\": 306, \"cols\": 4, \"format\": \"csv\"}' > data/haberman.data.mtd\r\necho '1,1,1,2' > data/types.csv\r\necho '{\"rows\": 1, \"cols\": 4, \"format\": \"csv\"}' > data/types.csv.mtd\r\n./runStandaloneSystemML.sh scripts/algorithms/Univar-Stats.dml -nvargs X=data/haberman.data TYPES=data/types.csv STATS=data/univarOut.mtx CONSOLE_OUTPUT=TRUE\r\ncd ..\r\n\r\n# spark uni stats\r\nexport SPARK_HOME=/Users/deroneriksson/spark-2.1.0-bin-hadoop2.7\r\n$SPARK_HOME/bin/spark-submit SystemML.jar -f ../scripts/datagen/genRandData4Univariate.dml -exec hybrid_spark -args 1000000 100 10 1 2 3 4 uni.mtx\r\necho '1' > uni-types.csv\r\necho '{\"rows\": 1, \"cols\": 1, \"format\": \"csv\"}' > uni-types.csv.mtd\r\n$SPARK_HOME/bin/spark-submit SystemML.jar -f ../scripts/algorithms/Univar-Stats.dml -exec hybrid_spark -nvargs X=uni.mtx TYPES=uni-types.csv STATS=uni-stats.txt CONSOLE_OUTPUT=TRUE\r\n\r\n# hadoop uni stats\r\nhadoop jar SystemML.jar -f ../scripts/algorithms/Univar-Stats.dml -nvargs X=uni.mtx TYPES=uni-types.csv STATS=uni-stats.txt CONSOLE_OUTPUT=TRUE\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280458281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280459102","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280459102","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280459102,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ1OTEwMg==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T21:01:28Z","updated_at":"2017-02-16T21:01:28Z","author_association":"MEMBER","body":"NOTE: in-memory and uberjar artifacts not checked. Also, a thorough analysis of the license files has not been performed yet.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280459102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280486702","html_url":"https://github.com/apache/systemds/pull/396#issuecomment-280486702","issue_url":"https://api.github.com/repos/apache/systemds/issues/396","id":280486702,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ4NjcwMg==","user":{"login":"bdwyer2","id":19673623,"node_id":"MDQ6VXNlcjE5NjczNjIz","avatar_url":"https://avatars.githubusercontent.com/u/19673623?v=4","gravatar_id":"","url":"https://api.github.com/users/bdwyer2","html_url":"https://github.com/bdwyer2","followers_url":"https://api.github.com/users/bdwyer2/followers","following_url":"https://api.github.com/users/bdwyer2/following{/other_user}","gists_url":"https://api.github.com/users/bdwyer2/gists{/gist_id}","starred_url":"https://api.github.com/users/bdwyer2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bdwyer2/subscriptions","organizations_url":"https://api.github.com/users/bdwyer2/orgs","repos_url":"https://api.github.com/users/bdwyer2/repos","events_url":"https://api.github.com/users/bdwyer2/events{/privacy}","received_events_url":"https://api.github.com/users/bdwyer2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T22:41:25Z","updated_at":"2017-02-16T22:41:25Z","author_association":"NONE","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280486702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280488639","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280488639","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280488639,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ4ODYzOQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T22:48:59Z","updated_at":"2017-02-16T22:48:59Z","author_association":"MEMBER","body":"All tests passed in [PR build 1123](https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1123/).","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280488639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280497917","html_url":"https://github.com/apache/systemds/pull/395#issuecomment-280497917","issue_url":"https://api.github.com/repos/apache/systemds/issues/395","id":280497917,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ5NzkxNw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T23:27:16Z","updated_at":"2017-02-16T23:27:16Z","author_association":"MEMBER","body":"LGTM. The underlying issue isn't resolved but this does prevent the current warning which can be disconcerting to a new user. Thanks @fschueler!","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280497917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280498411","html_url":"https://github.com/apache/systemds/pull/395#issuecomment-280498411","issue_url":"https://api.github.com/repos/apache/systemds/issues/395","id":280498411,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ5ODQxMQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T23:29:23Z","updated_at":"2017-02-16T23:29:23Z","author_association":"MEMBER","body":"Would you might updating line 127 (For demonstration purposes, we’ll use Spark to create a DataFrame called df of random doubles from 0 to 1 consisting of 10,000 rows and 1,000 columns.)?","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280498411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280498498","html_url":"https://github.com/apache/systemds/pull/395#issuecomment-280498498","issue_url":"https://api.github.com/repos/apache/systemds/issues/395","id":280498498,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDQ5ODQ5OA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T23:29:44Z","updated_at":"2017-02-16T23:29:44Z","author_association":"MEMBER","body":"And \"For performance, we’ll specify metadata indicating that the matrix has 10,000 rows and 1,000 columns.\"","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280498498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280501917","html_url":"https://github.com/apache/systemds/pull/395#issuecomment-280501917","issue_url":"https://api.github.com/repos/apache/systemds/issues/395","id":280501917,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUwMTkxNw==","user":{"login":"fschueler","id":4837217,"node_id":"MDQ6VXNlcjQ4MzcyMTc=","avatar_url":"https://avatars.githubusercontent.com/u/4837217?v=4","gravatar_id":"","url":"https://api.github.com/users/fschueler","html_url":"https://github.com/fschueler","followers_url":"https://api.github.com/users/fschueler/followers","following_url":"https://api.github.com/users/fschueler/following{/other_user}","gists_url":"https://api.github.com/users/fschueler/gists{/gist_id}","starred_url":"https://api.github.com/users/fschueler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fschueler/subscriptions","organizations_url":"https://api.github.com/users/fschueler/orgs","repos_url":"https://api.github.com/users/fschueler/repos","events_url":"https://api.github.com/users/fschueler/events{/privacy}","received_events_url":"https://api.github.com/users/fschueler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-16T23:44:59Z","updated_at":"2017-02-16T23:44:59Z","author_association":"NONE","body":"I updated the two lines - they didn't fit my previous search pattern ;)","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280501917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280508755","html_url":"https://github.com/apache/systemds/pull/395#issuecomment-280508755","issue_url":"https://api.github.com/repos/apache/systemds/issues/395","id":280508755,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUwODc1NQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T00:16:19Z","updated_at":"2017-02-17T00:16:19Z","author_association":"MEMBER","body":"Thanks @fschueler!","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280508755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280516633","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280516633","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280516633,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUxNjYzMw==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T01:00:12Z","updated_at":"2017-02-17T01:00:12Z","author_association":"MEMBER","body":"As an additional smoke test, I executed the Linear Regression example using the following commands on Spark 2.1/Hadoop 2.7.3 cluster against SystemML.jar from this PR:\r\n\r\nhadoop jar ./SystemML.jar -f ./scripts/datagen/genLinearRegressionData.dml -nvargs numSamples=1000 numFeatures=50 maxFeatureValue=5 maxWeight=5 addNoise=FALSE b=0 sparsity=0.7 output=linRegData.csv format=csv perc=0.5\r\n\r\nhadoop jar ./SystemML.jar -f ./scripts/utils/sample.dml -nvargs X=linRegData.csv sv=perc.csv O=linRegDataParts ofmt=csv\r\n\r\nhadoop jar ./SystemML.jar -f ./scripts/utils/splitXY.dml -nvargs X=linRegDataParts/1 y=51 OX=linRegData.train.data.csv OY=linRegData.train.labels.csv ofmt=csv\r\n\r\nhadoop jar ./SystemML.jar -f ./scripts/utils/splitXY.dml -nvargs X=linRegDataParts/2 y=51 OX=linRegData.test.data.csv OY=linRegData.test.labels.csv ofmt=csv\r\n\r\nhadoop jar ./SystemML.jar -f ./scripts/algorithms/LinearRegDS.dml -nvargs X=linRegData.train.data.csv Y=linRegData.train.labels.csv B=betas.csv fmt=csv\r\n\r\nhadoop jar ./SystemML.jar -f ./scripts/algorithms/GLM-predict.dml -nvargs X=linRegData.test.data.csv Y=linRegData.test.labels.csv B=betas.csv fmt=csv\r\n\r\nspark-submit --master yarn --deploy-mode client --class org.apache.sysml.api.DMLScript ./SystemML.jar -f ./scripts/datagen/genLinearRegressionData.dml -exec hybrid_spark -nvargs numSamples=1000 numFeatures=50 maxFeatureValue=5 maxWeight=5 addNoise=FALSE b=0 sparsity=0.7 output=linRegData.csv format=csv perc=0.5\r\n\r\nspark-submit --master yarn --deploy-mode client --class org.apache.sysml.api.DMLScript ./SystemML.jar -f ./scripts/utils/sample.dml -exec hybrid_spark -nvargs X=linRegData.csv sv=perc.csv O=linRegDataParts ofmt=csv\r\n\r\nspark-submit --master yarn --deploy-mode client --class org.apache.sysml.api.DMLScript ./SystemML.jar -f ./scripts/utils/splitXY.dml -exec hybrid_spark -nvargs X=linRegDataParts/1 y=51 OX=linRegData.train.data.csv OY=linRegData.train.labels.csv ofmt=csv\r\n\r\nspark-submit --master yarn --deploy-mode client --class org.apache.sysml.api.DMLScript ./SystemML.jar -f ./scripts/utils/splitXY.dml -exec hybrid_spark -nvargs X=linRegDataParts/2 y=51 OX=linRegData.test.data.csv OY=linRegData.test.labels.csv ofmt=csv\r\n\r\nspark-submit --master yarn --deploy-mode client --class org.apache.sysml.api.DMLScript ./SystemML.jar -f ./scripts/algorithms/LinearRegDS.dml -exec hybrid_spark -nvargs X=linRegData.train.data.csv Y=linRegData.train.labels.csv B=betas.csv fmt=csv\r\n\r\nspark-submit --master yarn --deploy-mode client --class org.apache.sysml.api.DMLScript ./SystemML.jar -f ./scripts/algorithms/GLM-predict.dml -exec hybrid_spark -nvargs X=linRegData.test.data.csv Y=linRegData.test.labels.csv B=betas.csv fmt=csv\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280516633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280523415","html_url":"https://github.com/apache/systemds/pull/397#issuecomment-280523415","issue_url":"https://api.github.com/repos/apache/systemds/issues/397","id":280523415,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUyMzQxNQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T01:39:28Z","updated_at":"2017-02-17T01:39:28Z","author_association":"MEMBER","body":"cc @dusenberrymw ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280523415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280524485","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280524485","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280524485,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUyNDQ4NQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T01:45:54Z","updated_at":"2017-02-17T01:45:54Z","author_association":"MEMBER","body":"cc @dusenberrymw @mboehm7 @deroneriksson ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280524485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280526465","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280526465","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280526465,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUyNjQ2NQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T01:57:55Z","updated_at":"2017-02-17T01:57:55Z","author_association":"MEMBER","body":"@mboehm7 Would you mind seeing if you can find any dependency issues with this pom configuration (see if you can see anything blow up for standalone, hadoop cluster, spark cluster, etc)? The jump from Spark 1.6 to Spark 2.1 is quite significant and since the dependency hierarchy is so different, it is quite possible that issues can occur for different artifacts that can only be found at runtime (NoClassDefFoundError, wrong version of class files, etc).\r\n\r\nSince the in-memory artifact and uberjar aren't build by the distribution profile, I haven't looked at those yet. I need to check things like the licenses for the other artifacts first.\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280526465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280526897","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280526897","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280526897,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUyNjg5Nw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T02:00:50Z","updated_at":"2017-02-17T02:00:50Z","author_association":"MEMBER","body":"BTW all tests pass (https://sparktc.ibmcloud.com/jenkins/job/SystemML-PullRequestBuilder/1126/).\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280526897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280529070","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280529070","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280529070,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDUyOTA3MA==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T02:14:31Z","updated_at":"2017-02-17T02:14:31Z","author_association":"CONTRIBUTOR","body":"@deroneriksson yes indeed, this is tough to test - I'd recommend to bring this in as soon as possible to include it into all ongoing tests against master (on different platforms and backends). ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280529070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280551587","html_url":"https://github.com/apache/systemds/pull/394#issuecomment-280551587","issue_url":"https://api.github.com/repos/apache/systemds/issues/394","id":280551587,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDU1MTU4Nw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T04:50:04Z","updated_at":"2017-02-17T04:50:04Z","author_association":"MEMBER","body":"Thank you for looking at this @mboehm7 and @dusenberrymw. Checking into master sounds good, since the only real way to find any kind of dependency issues is very thorough testing of the generated artifacts.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280551587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280552982","html_url":"https://github.com/apache/systemds/pull/392#issuecomment-280552982","issue_url":"https://api.github.com/repos/apache/systemds/issues/392","id":280552982,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDU1Mjk4Mg==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T05:00:05Z","updated_at":"2017-02-17T05:00:05Z","author_association":"MEMBER","body":"Thank you for reviewing @dusenberrymw.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280552982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280554344","html_url":"https://github.com/apache/systemds/pull/397#issuecomment-280554344","issue_url":"https://api.github.com/repos/apache/systemds/issues/397","id":280554344,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDU1NDM0NA==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T05:10:16Z","updated_at":"2017-02-17T05:10:16Z","author_association":"MEMBER","body":"Great. Thanks for reviewing @dusenberrymw. Hopefully it works as well on the real-world data.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280554344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280564934","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280564934","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280564934,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDU2NDkzNA==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T06:24:27Z","updated_at":"2017-02-17T06:24:27Z","author_association":"CONTRIBUTOR","body":"@gweidner this is great - could you please also modify the setup of our JavaSparkContext in SparkExecutionContext (via _spctx.hadoopConfiguration()) - I just ran into an issue where is was failing on context init.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280564934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280576327","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280576327","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280576327,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDU3NjMyNw==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T07:34:29Z","updated_at":"2017-02-17T07:34:29Z","author_association":"CONTRIBUTOR","body":"just to correct myself: we can't set it through _spctx.hadoopConfiguration() as the creation of the SparkContext already fails; furthermore, there is no way to pass an existing Configuration into the creation of this SparkContext. So, non-conclusive yet.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280576327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280607929","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280607929","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280607929,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDYwNzkyOQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T10:00:57Z","updated_at":"2017-02-17T10:00:57Z","author_association":"MEMBER","body":"Thank you @mboehm7 and @dusenberrymw for reviewing and providing feedback - much appreciated.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280607929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280748019","html_url":"https://github.com/apache/systemds/pull/393#issuecomment-280748019","issue_url":"https://api.github.com/repos/apache/systemds/issues/393","id":280748019,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc0ODAxOQ==","user":{"login":"asurve","id":13441665,"node_id":"MDQ6VXNlcjEzNDQxNjY1","avatar_url":"https://avatars.githubusercontent.com/u/13441665?v=4","gravatar_id":"","url":"https://api.github.com/users/asurve","html_url":"https://github.com/asurve","followers_url":"https://api.github.com/users/asurve/followers","following_url":"https://api.github.com/users/asurve/following{/other_user}","gists_url":"https://api.github.com/users/asurve/gists{/gist_id}","starred_url":"https://api.github.com/users/asurve/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asurve/subscriptions","organizations_url":"https://api.github.com/users/asurve/orgs","repos_url":"https://api.github.com/users/asurve/repos","events_url":"https://api.github.com/users/asurve/events{/privacy}","received_events_url":"https://api.github.com/users/asurve/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T19:45:33Z","updated_at":"2017-02-17T19:45:33Z","author_association":"MEMBER","body":"@mboehm7 Please provide detailed recreation scenario of this failure so @gweidner can investigate.\r\n\r\nWe need to understand consequences due to this fix before getting in this PR.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280748019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280752537","html_url":"https://github.com/apache/systemds/pull/398#issuecomment-280752537","issue_url":"https://api.github.com/repos/apache/systemds/issues/398","id":280752537,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc1MjUzNw==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T20:04:36Z","updated_at":"2017-02-17T20:04:36Z","author_association":"CONTRIBUTOR","body":"@iyounus  @bertholdreinwald  @mboehm7 This PR and the below code shows that LinRegDS has much less accuracy than scikit-learn, which implies bug in algorithm, default hyperparameters or something else:\r\n\r\n```python\r\nWelcome to\r\n      ____              __\r\n     / __/__  ___ _____/ /__\r\n    _\\ \\/ _ \\/ _ `/ __/  '_/\r\n   /__ / .__/\\_,_/_/ /_/\\_\\   version 2.1.0\r\n      /_/\r\n\r\nUsing Python version 2.7.12 (default, Jul  2 2016 17:42:40)\r\nSparkSession available as 'spark'.\r\n>>> import numpy as np\r\n>>> from pyspark.context import SparkContext\r\n>>> from pyspark.ml import Pipeline\r\nfrom pyspark.ml.feature import HashingTF, Tokenizer\r\n>>> from pyspark.ml.feature import HashingTF, Tokenizer\r\nfrom pyspark.sql import SparkSession\r\nfrom sklearn import datasets, metrics, neighbors\r\n>>> from pyspark.sql import SparkSession\r\n>>> from sklearn import datasets, metrics, neighbors\r\nfrom sklearn.datasets import fetch_20newsgroups\r\nfrom sklearn.feature_extraction.text import TfidfVectorizer\r\n\r\nfrom systemml.mllearn import LinearRegression, LogisticRegression, NaiveBayes, SVM\r\ndiabetes = datasets.load_diabetes()\r\ndiabetes_X = diabetes.data[:, np.newaxis, 2]\r\ndiabetes_X_train = diabetes_X[:-20]\r\ndiabetes_X_test = diabetes_X[-20:]\r\ndiabetes_y_train = diabetes.target[:-20]\r\ndiabetes_y_test = diabetes.target[-20:]\r\nsparkSession = SparkSession.builder.getOrCreate()\r\nregr = LinearRegression(sparkSession, solver=\"direct-solve\")\r\nregr.fit(diabetes_X_train, diabetes_y_train)\r\nmllearn_y_predicted = regr.predict(diabetes_X_test).ravel()>>> from sklearn.datasets import fetch_20newsgroups\r\n>>> from sklearn.feature_extraction.text import TfidfVectorizer\r\n>>>\r\n>>> from systemml.mllearn import LinearRegression, LogisticRegression, NaiveBayes, SVM\r\n>>> diabetes = datasets.load_diabetes()\r\n>>> diabetes_X = diabetes.data[:, np.newaxis, 2]\r\n>>> diabetes_X_train = diabetes_X[:-20]\r\n>>> diabetes_X_test = diabetes_X[-20:]\r\n>>> diabetes_y_train = diabetes.target[:-20]\r\n>>> diabetes_y_test = diabetes.target[-20:]\r\n>>> sparkSession = SparkSession.builder.getOrCreate()\r\n>>> regr = LinearRegression(sparkSession, solver=\"direct-solve\")\r\n>>> regr.fit(diabetes_X_train, diabetes_y_train)\r\n\r\nWelcome to Apache SystemML!\r\n\r\n17/02/17 13:56:52 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'X' (line 87).\r\n17/02/17 13:56:52 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'y' (line 88).\r\nBEGIN LINEAR REGRESSION SCRIPT\r\nReading X and Y...\r\nCalling the Direct Solver...\r\nComputing the statistics...\r\nAVG_TOT_Y,153.36255924170615\r\nSTDEV_TOT_Y,77.21853383600028\r\nAVG_RES_Y,4.8020565933360324E-14\r\nSTDEV_RES_Y,67.06389890324985\r\nDISPERSION,4497.566536105316\r\nPLAIN_R2,0.24750834362605834\r\nADJUSTED_R2,0.24571669682516795\r\nPLAIN_R2_NOBIAS,0.24750834362605834\r\nADJUSTED_R2_NOBIAS,0.24571669682516795\r\nWriting the output matrix...\r\nEND LINEAR REGRESSION SCRIPT\r\nlr\r\n>>> mllearn_y_predicted = regr.predict(diabetes_X_test).ravel()\r\n17/02/17 13:56:54 WARN Expression: WARNING: null -- line 149, column 4 -- Read input file does not exist on FS (local mode):\r\n17/02/17 13:56:54 WARN Expression: Metadata file:  .mtd not provided\r\n>>>\r\n... import numpy as np\r\n>>> from sklearn import datasets\r\n>>> diabetes = datasets.load_diabetes()\r\ndiabetes_X = diabetes.data[:, np.newaxis, 2]\r\n>>> diabetes_X = diabetes.data[:, np.newaxis, 2]\r\n>>> diabetes_X_train = diabetes_X[:-20]\r\n>>> diabetes_X_test = diabetes_X[-20:]\r\n>>> diabetes_y_train = diabetes.target[:-20]\r\n>>> diabetes_y_test = diabetes.target[-20:]\r\n>>> def writeColVector(X, fileName):\r\n...     fileName = os.path.join(os.getcwd(), fileName)\r\n...     X.tofile(fileName, sep='\\n')\r\n...     metaDataFileContent = '{ \"data_type\": \"matrix\", \"value_type\": \"double\", \"rows\":' + str(len(X)) + ', \"cols\": 1, \"nnz\": -1, \"format\": \"csv\", \"author\": \"systemml-tests\", \"created\": \"0000-00-00 00:00:00 PST\" }'\r\n...     with open(fileName+'.mtd', 'w') as text_file:\r\n...             text_file.write(metaDataFileContent)\r\n...\r\n>>> writeColVector(diabetes_X_test, 'lingreg_X_test.csv')\r\n>>> writeColVector(diabetes_X, 'lingreg_X.csv')\r\n>>> writeColVector(diabetes.target, 'lingreg_y.csv')\r\n>>> from systemml import MLContext, dmlFromResource\r\n>>> ml = MLContext(sc)\r\nml.execute(script)\r\n>>> script = dmlFromResource('/scripts/algorithms/LinearRegDS.dml').input('$X',os.path.join(os.getcwd(),'lingreg_X.csv')).input('$Y', os.path.join(os.getcwd(),'lingreg_y.csv')).input('$B', os.path.join(os.getcwd(),'lingreg_B.csv')).input('$fmt', 'csv').input('$icpt', '1').input('$tol', '0.000001').input('$reg','1')\r\n>>> ml.execute(script)\r\ncommandline_y_predicted = genfromtxt(os.path.join(os.getcwd(),'lingreg_predicted.csv'), delimiter=',').ravel()\r\n17/02/17 13:57:54 WARN RewriteRemovePersistentReadWrite: Non-registered persistent read of variable 'X' (line 82).\r\n17/02/17 13:57:54 WARN RewriteRemovePersistentReadWrite: Non-registered persistent read of variable 'y' (line 83).\r\n17/02/17 13:57:54 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'X' (line 85).\r\n17/02/17 13:57:54 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'y' (line 86).\r\n17/02/17 13:57:54 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'beta_out' (line 226).\r\nBEGIN LINEAR REGRESSION SCRIPT\r\nReading X and Y...\r\nCalling the Direct Solver...\r\nComputing the statistics...\r\nAVG_TOT_Y,152.13348416289594\r\nSTDEV_TOT_Y,77.09300453299106\r\nAVG_RES_Y,-2.935409582574532E-14\r\nSTDEV_RES_Y,66.48545020578437\r\nDISPERSION,4420.315089065834\r\nPLAIN_R2,0.2579428201690507\r\nADJUSTED_R2,0.2562563265785258\r\nPLAIN_R2_NOBIAS,0.2579428201690507\r\nADJUSTED_R2_NOBIAS,0.2562563265785258\r\nWriting the output matrix...\r\nEND LINEAR REGRESSION SCRIPT\r\nMLResults\r\n>>> script = dmlFromResource('/scripts/algorithms/GLM-predict.dml').input('$X',os.path.join(os.getcwd(),'lingreg_X_test.csv')).input('$M', os.path.join(os.getcwd(),'lingreg_predicted.csv')).input('$B', os.path.join(os.getcwd(),'lingreg_B.csv')).input('$fmt', 'csv').input('$icpt', '1').input('$tol', '0.000001').input('$reg','1')\r\n>>> ml.execute(script)\r\n17/02/17 13:57:55 WARN Expression: WARNING: null -- line 147, column 4 -- Read input file does not exist on FS (local mode):\r\n17/02/17 13:57:55 WARN Expression: Metadata file:  .mtd not provided\r\n17/02/17 13:57:55 WARN RewriteRemovePersistentReadWrite: Non-registered persistent read of variable 'X' (line 116).\r\n17/02/17 13:57:55 WARN RewriteRemovePersistentReadWrite: Non-registered persistent read of variable 'B_full' (line 120).\r\n17/02/17 13:57:55 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'means' (line 142).\r\nMLResults\r\n>>> from numpy import genfromtxt\r\n>>> commandline_y_predicted = genfromtxt(os.path.join(os.getcwd(),'lingreg_predicted.csv'), delimiter=',').ravel()\r\n>>> commandline_y_predicted\r\narray([ 189.09660702,  133.32606012,  157.37391062,  132.81440373,\r\n        135.88434209,  154.81562865,  194.21317095,  136.39599848,\r\n        125.13955783,  137.41931127,  178.35182275,  123.60458865,\r\n        152.76900308,  141.00090603,  116.95305553,  161.46716177,\r\n        144.58250078,  144.58250078,  170.67697685,  117.46471193])\r\n>>> mllearn_y_predicted\r\narray([ 188.84521284,  134.98127765,  158.20701117,  134.4871131 ,\r\n        137.45210036,  155.73618846,  193.78685827,  137.94626491,\r\n        127.07464496,  138.93459399,  178.46775744,  125.59215133,\r\n        153.75953028,  142.39374579,  119.16801227,  162.16032752,\r\n        145.8528976 ,  145.8528976 ,  171.05528929,  119.66217681])\r\n>>> diabetes_y_test\r\narray([ 233.,   91.,  111.,  152.,  120.,   67.,  310.,   94.,  183.,\r\n         66.,  173.,   72.,   49.,   64.,   48.,  178.,  104.,  132.,\r\n        220.,   57.])\r\n>>> from sklearn.metrics import accuracy_score, r2_score\r\n>>> r2_score(diabetes_y_test, mllearn_y_predicted, multioutput='variance_weighted')\r\n0.25395357789376738\r\n>>> r2_score(diabetes_y_test, commandline_y_predicted, multioutput='variance_weighted')\r\n0.27383106129322909\r\n>>> from sklearn import datasets, linear_model\r\n>>> sklearn_regr = linear_model.LinearRegression()\r\n>>> sklearn_regr.fit(diabetes_X_train, diabetes_y_train)\r\nLinearRegression(copy_X=True, fit_intercept=True, n_jobs=1, normalize=False)\r\n>>> r2_score(diabetes_y_test, sklearn_regr.predict(diabetes_X_test), multioutput='variance_weighted')\r\n0.47257544798227141\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280752537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280768061","html_url":"https://github.com/apache/systemds/pull/398#issuecomment-280768061","issue_url":"https://api.github.com/repos/apache/systemds/issues/398","id":280768061,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc2ODA2MQ==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T21:13:56Z","updated_at":"2017-02-17T21:13:56Z","author_association":"CONTRIBUTOR","body":"It seems like regularization was the issue. After setting it to 0, we get same prediction as scikit-learn:\r\n```python\r\n>>> diabetes = datasets.load_diabetes()\r\n>>> diabetes_X = diabetes.data[:, np.newaxis, 2]\r\n>>> diabetes_X_train = diabetes_X[:-20]\r\n>>> diabetes_X_test = diabetes_X[-20:]\r\n>>> diabetes_y_train = diabetes.target[:-20]\r\n>>> diabetes_y_test = diabetes.target[-20:]\r\n>>> sparkSession = SparkSession.builder.getOrCreate()\r\n>>> regr = LinearRegression(sparkSession, solver=\"direct-solve\")\r\n>>> regr.fit(diabetes_X_train, diabetes_y_train)\r\n\r\nWelcome to Apache SystemML!\r\n\r\n17/02/17 15:10:53 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'X' (line 87).\r\n17/02/17 15:10:53 WARN RewriteRemovePersistentReadWrite: Non-registered persistent write of variable 'y' (line 88).\r\nBEGIN LINEAR REGRESSION SCRIPT\r\nReading X and Y...\r\nCalling the Direct Solver...\r\nComputing the statistics...\r\nAVG_TOT_Y,153.36255924170615\r\nSTDEV_TOT_Y,77.21853383600028\r\nAVG_RES_Y,1.3705729547600037E-14\r\nSTDEV_RES_Y,63.03850633759284\r\nDISPERSION,3973.853281274733\r\nPLAIN_R2,0.33513125068675453\r\nADJUSTED_R2,0.3335482298550564\r\nPLAIN_R2_NOBIAS,0.33513125068675453\r\nADJUSTED_R2_NOBIAS,0.3335482298550564\r\nWriting the output matrix...\r\nEND LINEAR REGRESSION SCRIPT\r\nlr\r\n>>> mllearn_y_predicted = regr.predict(diabetes_X_test).ravel()\r\n17/02/17 15:10:56 WARN Expression: WARNING: null -- line 149, column 4 -- Read input file does not exist on FS (local mode):\r\n17/02/17 15:10:56 WARN Expression: Metadata file:  .mtd not provided\r\n>>> mllearn_y_predicted\r\narray([ 225.9732401 ,  115.74763374,  163.27610621,  114.73638965,\r\n        120.80385422,  158.21988574,  236.08568105,  121.81509832,\r\n         99.56772822,  123.83758651,  204.73711411,   96.53399594,\r\n        154.17490936,  130.91629517,   83.3878227 ,  171.36605897,\r\n        137.99500384,  137.99500384,  189.56845268,   84.3990668 ])\r\n>>> from sklearn.metrics import accuracy_score, r2_score\r\n>>> from sklearn import datasets, linear_model\r\n>>> sklearn_regr = linear_model.LinearRegression()\r\n>>> sklearn_regr.fit(diabetes_X_train, diabetes_y_train)\r\nLinearRegression(copy_X=True, fit_intercept=True, n_jobs=1, normalize=False)\r\n>>> sklearn_regr.predict(diabetes_X_test)\r\narray([ 225.9732401 ,  115.74763374,  163.27610621,  114.73638965,\r\n        120.80385422,  158.21988574,  236.08568105,  121.81509832,\r\n         99.56772822,  123.83758651,  204.73711411,   96.53399594,\r\n        154.17490936,  130.91629517,   83.3878227 ,  171.36605897,\r\n        137.99500384,  137.99500384,  189.56845268,   84.3990668 ])\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280768061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280774381","html_url":"https://github.com/apache/systemds/pull/399#issuecomment-280774381","issue_url":"https://api.github.com/repos/apache/systemds/issues/399","id":280774381,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc3NDM4MQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T21:42:14Z","updated_at":"2017-02-17T21:42:14Z","author_association":"MEMBER","body":"Before this patch, the sparkDML.sh inside -bin referenced SystemML.jar.  For other artifacts where sparkDML.sh is bundled, e.g., SystemML.jar and systemml-0.13.0-incubating-SNAPSHOT.zip|tgz which includes SystemML.jar, the existing reference was correct and unchanged.  Note before this patch the systemml-0.13.0-incubating-SNAPSHOT.jar also contained the same sparkDML.sh as SystemML.jar so that value remains inconsistent but will need to be investigated in a separate JIRA.  This PR is targeted for the primary binary artifact referenced in download page.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280774381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280783824","html_url":"https://github.com/apache/systemds/pull/398#issuecomment-280783824","issue_url":"https://api.github.com/repos/apache/systemds/issues/398","id":280783824,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc4MzgyNA==","user":{"login":"iyounus","id":8313847,"node_id":"MDQ6VXNlcjgzMTM4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/8313847?v=4","gravatar_id":"","url":"https://api.github.com/users/iyounus","html_url":"https://github.com/iyounus","followers_url":"https://api.github.com/users/iyounus/followers","following_url":"https://api.github.com/users/iyounus/following{/other_user}","gists_url":"https://api.github.com/users/iyounus/gists{/gist_id}","starred_url":"https://api.github.com/users/iyounus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iyounus/subscriptions","organizations_url":"https://api.github.com/users/iyounus/orgs","repos_url":"https://api.github.com/users/iyounus/repos","events_url":"https://api.github.com/users/iyounus/events{/privacy}","received_events_url":"https://api.github.com/users/iyounus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T22:27:06Z","updated_at":"2017-02-17T22:27:06Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280783824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280784828","html_url":"https://github.com/apache/systemds/pull/389#issuecomment-280784828","issue_url":"https://api.github.com/repos/apache/systemds/issues/389","id":280784828,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc4NDgyOA==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T22:32:17Z","updated_at":"2017-02-18T00:22:51Z","author_association":"CONTRIBUTOR","body":"Approach 1: With Prefetching\r\n\r\nThe below statistics show that for convnet on 200K column dataset with batchsize of 50, we only wait for fetching of the first batch (~41 seconds). For remaining batches, there is almost zero-wait time. I also did sanity testing using `System.out.prints` and double-checked that Spark job was executed in parallel as conv2d was executing.\r\n\r\n```bash\r\nml.setConfigProperty(\"prefetch.budget.mb\", \"300\"); // 300 mb prefetch memory\r\n\r\nfor (e in 1:epochs) {\r\n        i = 0\r\n        for(X_batch in X, nrow=batch_size) {\r\n\t\t\ti = i + 1\r\n\t\t\tif(i == 100) {\r\n\t\t\t   stop (\"Early stopping for benchmarks\")\r\n\t\t\t}\r\n\r\n\t\t  # Get next batch\r\n\t\t  beg = ((i-1) * batch_size) %% N + 1\r\n\t\t  end = min(N, beg + batch_size - 1)\r\n\t\t  y_batch = Y[beg:end,]\r\n\t  ....\r\n\t}\r\n}\r\n\r\ntime: 1384233.345149ms\r\nSystemML Statistics:\r\nTotal elapsed time:             0.000 sec.\r\nTotal compilation time:         0.000 sec.\r\nTotal execution time:           0.000 sec.\r\nNumber of compiled Spark inst:  76.\r\nNumber of executed Spark inst:  3.\r\nBatch-Fetch (next,indx,wait,first):     41.586/355.839/41.585/41.583 sec.\r\nCache hits (Mem, WB, FS, HDFS): 19796/0/0/1.\r\nCache writes (WB, FS, HDFS):    4767/139/0.\r\nCache times (ACQr/m, RLS, EXP): 0.090/0.018/30.515/0.000 sec.\r\nHOP DAGs recompiled (PRED, SB): 0/595.\r\nHOP DAGs recompile time:        1.699 sec.\r\nFunctions recompiled:           1.\r\nFunctions recompile time:       0.164 sec.\r\nSpark ctx create time (lazy):   0.017 sec.\r\nSpark trans counts (par,bc,col):0/0/102.\r\nSpark trans times (par,bc,col): 0.000/0.000/355.286 secs.\r\nTotal JIT compile time:         172.599 sec.\r\nTotal JVM GC count:             773.\r\nTotal JVM GC time:              123.818 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   conv2d_bias_add         817.763 sec     297\r\n-- 2)   sel+    196.118 sec     396\r\n-- 3)   -       45.240 sec      2178\r\n-- 4)   conv2d_backward_filter  44.979 sec      297\r\n-- 5)   relu_maxpooling         44.417 sec      297\r\n-- 6)   +*      41.579 sec      1485\r\n-- 7)   r'      28.868 sec      495\r\n-- 8)   conv2d_backward_data    28.579 sec      198\r\n-- 9)   maxpooling_backward     21.912 sec      297\r\n-- 10)  *       19.874 sec      2880\r\n```\r\n\r\nApproach 2: Maxi-batch\r\n\r\n```bash\r\nfor (e in 1:epochs) {\r\n      maxi_batch_Size = 20*batch_size\r\n      maxi_iters = ceil(N / maxi_batch_Size)\r\n      stopping_i = 0\r\n      for(maxi in 1:maxi_iters) {\r\n          # Get next batch\r\n          maxi_beg = ((maxi-1) * maxi_batch_Size) %% N + 1\r\n          maxi_end = min(N, maxi_beg + maxi_batch_Size - 1)\r\n          X_maxibatch = X[maxi_beg:maxi_end,]\r\n          y_maxibatch = Y[maxi_beg:maxi_end,]\r\n          maxi_N = nrow(y_maxibatch)\r\n          iters = ceil(maxi_N / batch_size)\r\n          for(i in 1:iters) {\r\n            stopping_i = stopping_i + 1\r\n            if(stopping_i == 100) {\r\n              stop (\"Early stopping for benchmarks\")\r\n            }\r\n            # Get next batch\r\n            beg = ((i-1) * batch_size) %% maxi_N + 1\r\n            end = min(maxi_N, beg + batch_size - 1)\r\n            X_batch = X_maxibatch[beg:end,]\r\n            y_batch = y_maxibatch[beg:end,]\r\n\t\t\t....\r\n\t\t}\r\n\t}\r\n}\r\n\r\ntime: 2334624.686333ms\r\nSystemML Statistics:\r\nTotal elapsed time:             0.000 sec.\r\nTotal compilation time:         0.000 sec.\r\nTotal execution time:           0.000 sec.\r\nNumber of compiled Spark inst:  81.\r\nNumber of executed Spark inst:  8.\r\nCache hits (Mem, WB, FS, HDFS): 19895/0/0/6.\r\nCache writes (WB, FS, HDFS):    7403/64/0.\r\nCache times (ACQr/m, RLS, EXP): 80.049/0.025/33.767/0.000 sec.\r\nHOP DAGs recompiled (PRED, SB): 0/605.\r\nHOP DAGs recompile time:        1.907 sec.\r\nFunctions recompiled:           1.\r\nFunctions recompile time:       0.303 sec.\r\nSpark ctx create time (lazy):   0.026 sec.\r\nSpark trans counts (par,bc,col):0/0/5.\r\nSpark trans times (par,bc,col): 0.000/0.000/79.953 secs.\r\nTotal JIT compile time:         83.437 sec.\r\nTotal JVM GC count:             1441.\r\nTotal JVM GC time:              254.973 sec.\r\nHeavy hitter instructions (name, time, count):\r\n-- 1)   conv2d_bias_add         780.249 sec     297\r\n-- 2)   conv2d_backward_filter  442.185 sec     297\r\n-- 3)   conv2d_backward_data    304.401 sec     198\r\n-- 4)   sel+    200.346 sec     396\r\n-- 5)   uack+   115.980 sec     495\r\n-- 6)   maxpooling_backward     107.120 sec     297\r\n-- 7)   rangeReIndex    85.561 sec      203\r\n-- 8)   relu_backward   61.133 sec      495\r\n-- 9)   ba+*    43.830 sec      594\r\n-- 10)  relu_maxpooling         42.892 sec      297\r\n```\r\n\r\nI used the same cluster and same configuration as our VLDB experiments.\r\n\r\n@bertholdreinwald @mboehm7 @dusenberrymw ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280784828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280785595","html_url":"https://github.com/apache/systemds/pull/399#issuecomment-280785595","issue_url":"https://api.github.com/repos/apache/systemds/issues/399","id":280785595,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc4NTU5NQ==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T22:36:23Z","updated_at":"2017-02-17T22:36:23Z","author_association":"MEMBER","body":"LGTM. I built the distribution profile and verified systemml-0.13.0-incubating-SNAPSHOT-bin/scripts/sparkDML.sh contains the updated values for DEFAULT_SPARK_HOME.\r\n\r\nIn the future when there is more time, we might want to use maven to perform filtering (replacement) of substitution variables when copying the resources (search pom for \"copy-project-info-for-python\" and inspect \"project_info.py\" file) so that the values are dynamically pulled and substituted from the pom.xml file so that these sparkDML.sh version values will automatically be updated when the artifacts are built.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280785595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280787354","html_url":"https://github.com/apache/systemds/pull/399#issuecomment-280787354","issue_url":"https://api.github.com/repos/apache/systemds/issues/399","id":280787354,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDc4NzM1NA==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-17T22:45:54Z","updated_at":"2017-02-17T22:45:54Z","author_association":"MEMBER","body":"Thank you @deroneriksson for reviewing!  I will merge.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280787354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280808757","html_url":"https://github.com/apache/systemds/pull/400#issuecomment-280808757","issue_url":"https://api.github.com/repos/apache/systemds/issues/400","id":280808757,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgwODc1Nw==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T01:16:25Z","updated_at":"2017-02-18T01:16:25Z","author_association":"MEMBER","body":"cc @mboehm7 ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280808757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280808782","html_url":"https://github.com/apache/systemds/pull/400#issuecomment-280808782","issue_url":"https://api.github.com/repos/apache/systemds/issues/400","id":280808782,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgwODc4Mg==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T01:16:37Z","updated_at":"2017-02-18T01:16:37Z","author_association":"MEMBER","body":"Tested from console with functions.data test suite (minus RandRuntimePlatformTest):\r\n\r\n-------------------------------------------------------\r\n T E S T S\r\n-------------------------------------------------------\r\nAutomatedTestBase has detected a Windows OS and is overriding\r\nhadoop.home.dir and java.library.path.\r\nRunning org.apache.sysml.test.integration.functions.data.FullReblockTest\r\nTests run: 54, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 167.086 sec - in org.apache.sysml.test.integration.functions.data.FullReblockTest\r\nRunning org.apache.sysml.test.integration.functions.data.FullStringInitializeTest\r\nTests run: 39, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 5.32 sec - in org.apache.sysml.test.integration.functions.data.FullStringInitializeTest\r\nRunning org.apache.sysml.test.integration.functions.data.RandTest1\r\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.14 sec - in org.apache.sysml.test.integration.functions.data.RandTest1\r\nRunning org.apache.sysml.test.integration.functions.data.RandTest2\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.09 sec - in org.apache.sysml.test.integration.functions.data.RandTest2\r\nRunning org.apache.sysml.test.integration.functions.data.RandTest3\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.05 sec - in org.apache.sysml.test.integration.functions.data.RandTest3\r\nRunning org.apache.sysml.test.integration.functions.data.RandTest4\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.14 sec - in org.apache.sysml.test.integration.functions.data.RandTest4\r\nRunning org.apache.sysml.test.integration.functions.data.RandTest5\r\nTests run: 18, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 39.6 sec - in org.apache.sysml.test.integration.functions.data.RandTest5\r\nRunning org.apache.sysml.test.integration.functions.data.RandVarMinMaxTest\r\nTests run: 9, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 41.98 sec - in org.apache.sysml.test.integration.functions.data.RandVarMinMaxTest\r\nRunning org.apache.sysml.test.integration.functions.data.RandVarSeedTest\r\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.44 sec - in org.apache.sysml.test.integration.functions.data.RandVarSeedTest\r\nRunning org.apache.sysml.test.integration.functions.data.ReadMMTest\r\nTests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.81 sec - in org.apache.sysml.test.integration.functions.data.ReadMMTest\r\nRunning org.apache.sysml.test.integration.functions.data.ReblockTest\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.11 sec - in org.apache.sysml.test.integration.functions.data.ReblockTest\r\nRunning org.apache.sysml.test.integration.functions.data.VariableTest\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.13 sec - in org.apache.sysml.test.integration.functions.data.VariableTest\r\nRunning org.apache.sysml.test.integration.functions.data.WriteMMTest\r\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 9.282 sec - in org.apache.sysml.test.integration.functions.data.WriteMMTest\r\nRunning org.apache.sysml.test.integration.functions.data.SequenceTest\r\nTests run: 24, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 55.786 sec - in org.apache.sysml.test.integration.functions.data.SequenceTest\r\nRunning org.apache.sysml.test.integration.functions.data.WriteTest\r\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.37 sec - in org.apache.sysml.test.integration.functions.data.WriteTest\r\nRunning org.apache.sysml.test.integration.functions.data.SampleTest\r\nTests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.75 sec - in org.apache.sysml.test.integration.functions.data.SampleTest\r\ngetting access token\r\n  [getToken] got user access token\r\ngetting user info\r\n  [getUser] Got TokenUser info\r\n  [getUser] userName: gweidner, domainName = SVL-GWEIDNER\r\n  [getUser] userSid: S-1-5-21-733788388-244427222-2762894592-1000\r\n  [getUser] domainSid: S-1-5-21-733788388-244427222-2762894592\r\ngetting primary group\r\n  [getPrimaryGroup] Got TokenPrimaryGroup info\r\n  [getPrimaryGroup] primaryGroup: S-1-5-21-733788388-244427222-2762894592-513\r\ngetting supplementary groups\r\n  [getGroups] Got TokenGroups info\r\n  [getGroups] group 0: S-1-5-21-733788388-244427222-2762894592-513\r\n  [getGroups] group 1: S-1-1-0\r\n  [getGroups] group 2: S-1-5-114\r\n  [getGroups] group 3: S-1-5-21-733788388-244427222-2762894592-1002\r\n  [getGroups] group 4: S-1-5-32-544\r\n  [getGroups] group 5: S-1-5-32-545\r\n  [getGroups] group 6: S-1-5-4\r\n  [getGroups] group 7: S-1-2-1\r\n  [getGroups] group 8: S-1-5-11\r\n  [getGroups] group 9: S-1-5-15\r\n  [getGroups] group 10: S-1-5-113\r\n  [getGroups] group 11: S-1-5-5-0-1047349\r\n  [getGroups] group 12: S-1-2-0\r\n  [getGroups] group 13: S-1-5-64-10\r\n  [getGroups] group 14: S-1-16-12288\r\ngetting impersonation token\r\n  [getImpersonationToken] token = 2336\r\n\r\nResults :\r\n\r\nTests run: 183, Failures: 0, Errors: 0, Skipped: 0\r\n\r\n[INFO]\r\n[INFO] --- maven-failsafe-plugin:2.17:verify (default) @ systemml ---\r\n[INFO] Failsafe report directory: C:\\git\\incubator-systemml\\target\\failsafe-reports\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time: 06:48 min\r\n[INFO] Finished at: 2017-02-17T17:05:37-08:00\r\n[INFO] Final Memory: 100M/499M\r\n[INFO] ------------------------------------------------------------------------","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280808782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280809373","html_url":"https://github.com/apache/systemds/pull/400#issuecomment-280809373","issue_url":"https://api.github.com/repos/apache/systemds/issues/400","id":280809373,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgwOTM3Mw==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T01:22:50Z","updated_at":"2017-02-18T01:22:50Z","author_association":"CONTRIBUTOR","body":"LGTM - works like a charm; thanks @gweidner ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280809373/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280809574","html_url":"https://github.com/apache/systemds/pull/400#issuecomment-280809574","issue_url":"https://api.github.com/repos/apache/systemds/issues/400","id":280809574,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgwOTU3NA==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T01:24:46Z","updated_at":"2017-02-18T01:24:46Z","author_association":"MEMBER","body":"Great! I will merge.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280809574/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280811685","html_url":"https://github.com/apache/systemds/pull/389#issuecomment-280811685","issue_url":"https://api.github.com/repos/apache/systemds/issues/389","id":280811685,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgxMTY4NQ==","user":{"login":"dusenberrymw","id":5431337,"node_id":"MDQ6VXNlcjU0MzEzMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5431337?v=4","gravatar_id":"","url":"https://api.github.com/users/dusenberrymw","html_url":"https://github.com/dusenberrymw","followers_url":"https://api.github.com/users/dusenberrymw/followers","following_url":"https://api.github.com/users/dusenberrymw/following{/other_user}","gists_url":"https://api.github.com/users/dusenberrymw/gists{/gist_id}","starred_url":"https://api.github.com/users/dusenberrymw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dusenberrymw/subscriptions","organizations_url":"https://api.github.com/users/dusenberrymw/orgs","repos_url":"https://api.github.com/users/dusenberrymw/repos","events_url":"https://api.github.com/users/dusenberrymw/events{/privacy}","received_events_url":"https://api.github.com/users/dusenberrymw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T01:47:30Z","updated_at":"2017-02-18T01:47:30Z","author_association":"CONTRIBUTOR","body":"@niketanpansare Thanks for running this experiment.  A 1.7x speedup certainly shows that our current methods are leaving a large amount of performance on the table.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280811685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280811987","html_url":"https://github.com/apache/systemds/pull/390#issuecomment-280811987","issue_url":"https://api.github.com/repos/apache/systemds/issues/390","id":280811987,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgxMTk4Nw==","user":{"login":"dusenberrymw","id":5431337,"node_id":"MDQ6VXNlcjU0MzEzMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5431337?v=4","gravatar_id":"","url":"https://api.github.com/users/dusenberrymw","html_url":"https://github.com/dusenberrymw","followers_url":"https://api.github.com/users/dusenberrymw/followers","following_url":"https://api.github.com/users/dusenberrymw/following{/other_user}","gists_url":"https://api.github.com/users/dusenberrymw/gists{/gist_id}","starred_url":"https://api.github.com/users/dusenberrymw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dusenberrymw/subscriptions","organizations_url":"https://api.github.com/users/dusenberrymw/orgs","repos_url":"https://api.github.com/users/dusenberrymw/repos","events_url":"https://api.github.com/users/dusenberrymw/events{/privacy}","received_events_url":"https://api.github.com/users/dusenberrymw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T01:51:10Z","updated_at":"2017-02-18T01:51:10Z","author_association":"CONTRIBUTOR","body":"@niketanpansare Thanks for creating this layer, and for following the formatting of the `nn` library!  I haven't had a chance to try it yet, but it will be great to have batch norm in the library.  In terms of correctness tests, the best way would be to create a gradient check test in [grad_check.dml](https://github.com/apache/incubator-systemml/blob/master/scripts/staging/SystemML-NN/nn/test/grad_check.dml).  Then we'll easily know whether or not the backward function is mathematically correct w.r.t. the forward function.","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280811987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280817236","html_url":"https://github.com/apache/systemds/pull/389#issuecomment-280817236","issue_url":"https://api.github.com/repos/apache/systemds/issues/389","id":280817236,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgxNzIzNg==","user":{"login":"mboehm7","id":13721609,"node_id":"MDQ6VXNlcjEzNzIxNjA5","avatar_url":"https://avatars.githubusercontent.com/u/13721609?v=4","gravatar_id":"","url":"https://api.github.com/users/mboehm7","html_url":"https://github.com/mboehm7","followers_url":"https://api.github.com/users/mboehm7/followers","following_url":"https://api.github.com/users/mboehm7/following{/other_user}","gists_url":"https://api.github.com/users/mboehm7/gists{/gist_id}","starred_url":"https://api.github.com/users/mboehm7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mboehm7/subscriptions","organizations_url":"https://api.github.com/users/mboehm7/orgs","repos_url":"https://api.github.com/users/mboehm7/repos","events_url":"https://api.github.com/users/mboehm7/events{/privacy}","received_events_url":"https://api.github.com/users/mboehm7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T03:09:39Z","updated_at":"2017-02-18T03:09:39Z","author_association":"CONTRIBUTOR","body":"These numbers are a bit puzzling. If there is a 1000s difference, how come that rangeReIndex (which also covers the lazy spark indexing) only requires 85s (from which the 80s for ACQ give us an upper bound on the time for collecting the indexed data)? ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280817236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280819516","html_url":"https://github.com/apache/systemds/pull/389#issuecomment-280819516","issue_url":"https://api.github.com/repos/apache/systemds/issues/389","id":280819516,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDgxOTUxNg==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T03:53:17Z","updated_at":"2017-02-18T03:53:17Z","author_association":"CONTRIBUTOR","body":"I noticed backwards instructions are also taking more time. \n\n\n> On Feb 17, 2017, at 7:09 PM, Matthias Boehm <notifications@github.com> wrote:\n> \n> These numbers are a bit puzzling. If there is a 1000s difference, how come that rangeReIndex (which also covers the lazy spark indexing) only requires 85s (from which the 80s for ACQ give us an upper bound on the time for collecting the indexed data)?\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280819516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280864602","html_url":"https://github.com/apache/systemds/pull/390#issuecomment-280864602","issue_url":"https://api.github.com/repos/apache/systemds/issues/390","id":280864602,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDg2NDYwMg==","user":{"login":"niketanpansare","id":11686380,"node_id":"MDQ6VXNlcjExNjg2Mzgw","avatar_url":"https://avatars.githubusercontent.com/u/11686380?v=4","gravatar_id":"","url":"https://api.github.com/users/niketanpansare","html_url":"https://github.com/niketanpansare","followers_url":"https://api.github.com/users/niketanpansare/followers","following_url":"https://api.github.com/users/niketanpansare/following{/other_user}","gists_url":"https://api.github.com/users/niketanpansare/gists{/gist_id}","starred_url":"https://api.github.com/users/niketanpansare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niketanpansare/subscriptions","organizations_url":"https://api.github.com/users/niketanpansare/orgs","repos_url":"https://api.github.com/users/niketanpansare/repos","events_url":"https://api.github.com/users/niketanpansare/events{/privacy}","received_events_url":"https://api.github.com/users/niketanpansare/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-18T18:20:18Z","updated_at":"2017-02-18T18:20:18Z","author_association":"CONTRIBUTOR","body":"@dusenberrymw @prithvirajsen   I added gradient check tests, but they are failing. If you get a chance, can you please look at the layer again ?","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280864602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280987887","html_url":"https://github.com/apache/systemds/pull/384#issuecomment-280987887","issue_url":"https://api.github.com/repos/apache/systemds/issues/384","id":280987887,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MDk4Nzg4Nw==","user":{"login":"bertholdreinwald","id":10200727,"node_id":"MDQ6VXNlcjEwMjAwNzI3","avatar_url":"https://avatars.githubusercontent.com/u/10200727?v=4","gravatar_id":"","url":"https://api.github.com/users/bertholdreinwald","html_url":"https://github.com/bertholdreinwald","followers_url":"https://api.github.com/users/bertholdreinwald/followers","following_url":"https://api.github.com/users/bertholdreinwald/following{/other_user}","gists_url":"https://api.github.com/users/bertholdreinwald/gists{/gist_id}","starred_url":"https://api.github.com/users/bertholdreinwald/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bertholdreinwald/subscriptions","organizations_url":"https://api.github.com/users/bertholdreinwald/orgs","repos_url":"https://api.github.com/users/bertholdreinwald/repos","events_url":"https://api.github.com/users/bertholdreinwald/events{/privacy}","received_events_url":"https://api.github.com/users/bertholdreinwald/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-20T04:54:35Z","updated_at":"2017-02-20T04:54:35Z","author_association":"CONTRIBUTOR","body":"LGTM, but for epochs please output (as.integer(floor(iter / num_iters_per_epoch))+1), other we get funny output.\r\n\r\nepochs=0.0 BATCH beg=1 end=36 obj=315.2793607485832\r\nepochs=0.3333333333333333 BATCH beg=37 end=72 obj=416.8550718408468\r\nepochs=0.6666666666666666 BATCH beg=73 end=100 obj=234.10341156641397\r\nepochs=1.0 BATCH beg=1 end=36 obj=315.0943812440362\r\nepochs=1.3333333333333333 BATCH beg=37 end=72 obj=416.508133010481\r\nepochs=1.6666666666666667 BATCH beg=73 end=100 obj=233.85472614907434\r\n...","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/280987887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/281141006","html_url":"https://github.com/apache/systemds/pull/384#issuecomment-281141006","issue_url":"https://api.github.com/repos/apache/systemds/issues/384","id":281141006,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MTE0MTAwNg==","user":{"login":"deroneriksson","id":12634533,"node_id":"MDQ6VXNlcjEyNjM0NTMz","avatar_url":"https://avatars.githubusercontent.com/u/12634533?v=4","gravatar_id":"","url":"https://api.github.com/users/deroneriksson","html_url":"https://github.com/deroneriksson","followers_url":"https://api.github.com/users/deroneriksson/followers","following_url":"https://api.github.com/users/deroneriksson/following{/other_user}","gists_url":"https://api.github.com/users/deroneriksson/gists{/gist_id}","starred_url":"https://api.github.com/users/deroneriksson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deroneriksson/subscriptions","organizations_url":"https://api.github.com/users/deroneriksson/orgs","repos_url":"https://api.github.com/users/deroneriksson/repos","events_url":"https://api.github.com/users/deroneriksson/events{/privacy}","received_events_url":"https://api.github.com/users/deroneriksson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-20T17:40:43Z","updated_at":"2017-02-20T17:40:43Z","author_association":"MEMBER","body":"Not sure if it's useful here, but `print` can do printf-style formatting now, such as:\r\n```\r\na=0.3333333333333333;b=37;c=72;d=416.8550718408468;\r\nprint(\"epochs=%5.2f BATCH beg=%d end=%d obj=%f\",a,b,c,d);\r\n```\r\n```\r\nepochs= 0.33 BATCH beg=37 end=72 obj=416.855072\r\n```","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/281141006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/281147618","html_url":"https://github.com/apache/systemds/pull/384#issuecomment-281147618","issue_url":"https://api.github.com/repos/apache/systemds/issues/384","id":281147618,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MTE0NzYxOA==","user":{"login":"prithvirajsen","id":13860460,"node_id":"MDQ6VXNlcjEzODYwNDYw","avatar_url":"https://avatars.githubusercontent.com/u/13860460?v=4","gravatar_id":"","url":"https://api.github.com/users/prithvirajsen","html_url":"https://github.com/prithvirajsen","followers_url":"https://api.github.com/users/prithvirajsen/followers","following_url":"https://api.github.com/users/prithvirajsen/following{/other_user}","gists_url":"https://api.github.com/users/prithvirajsen/gists{/gist_id}","starred_url":"https://api.github.com/users/prithvirajsen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prithvirajsen/subscriptions","organizations_url":"https://api.github.com/users/prithvirajsen/orgs","repos_url":"https://api.github.com/users/prithvirajsen/repos","events_url":"https://api.github.com/users/prithvirajsen/events{/privacy}","received_events_url":"https://api.github.com/users/prithvirajsen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-20T18:11:08Z","updated_at":"2017-02-20T18:11:08Z","author_association":"CONTRIBUTOR","body":"Thanks @deroneriksson.\r\n\r\nPrints now look like this:\r\n\r\nepochs=0.3550 BATCH beg=3395585 end=3395840 obj=1115.490457\r\nepochs=0.3550 BATCH beg=3395841 end=3396096 obj=4688.646200\r\nepochs=0.3550 BATCH beg=3396097 end=3396352 obj=876.882540\r\nepochs=0.3550 BATCH beg=3396353 end=3396608 obj=2600.199443\r\nepochs=0.3551 BATCH beg=3396609 end=3396864 obj=1901.713796\r\nepochs=0.3551 BATCH beg=3396865 end=3397120 obj=1131.922849\r\nepochs=0.3551 BATCH beg=3397121 end=3397376 obj=965.788354\r\nepochs=0.3552 BATCH beg=3397377 end=3397632 obj=1038.282066\r\nepochs=0.3552 BATCH beg=3397633 end=3397888 obj=928.889698\r\nepochs=0.3552 BATCH beg=3397889 end=3398144 obj=863.360051\r\nepochs=0.3552 BATCH beg=3398145 end=3398400 obj=997.383946\r\nepochs=0.3553 BATCH beg=3398401 end=3398656 obj=1071.794773\r\nepochs=0.3553 BATCH beg=3398657 end=3398912 obj=938.326127\r\nepochs=0.3553 BATCH beg=3398913 end=3399168 obj=3162.734174\r\nepochs=0.3553 BATCH beg=3399169 end=3399424 obj=1408.637403\r\nepochs=0.3554 BATCH beg=3399425 end=3399680 obj=1779.825666\r\n","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/281147618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/systemds/issues/comments/281148219","html_url":"https://github.com/apache/systemds/pull/401#issuecomment-281148219","issue_url":"https://api.github.com/repos/apache/systemds/issues/401","id":281148219,"node_id":"MDEyOklzc3VlQ29tbWVudDI4MTE0ODIxOQ==","user":{"login":"gweidner","id":12058879,"node_id":"MDQ6VXNlcjEyMDU4ODc5","avatar_url":"https://avatars.githubusercontent.com/u/12058879?v=4","gravatar_id":"","url":"https://api.github.com/users/gweidner","html_url":"https://github.com/gweidner","followers_url":"https://api.github.com/users/gweidner/followers","following_url":"https://api.github.com/users/gweidner/following{/other_user}","gists_url":"https://api.github.com/users/gweidner/gists{/gist_id}","starred_url":"https://api.github.com/users/gweidner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gweidner/subscriptions","organizations_url":"https://api.github.com/users/gweidner/orgs","repos_url":"https://api.github.com/users/gweidner/repos","events_url":"https://api.github.com/users/gweidner/events{/privacy}","received_events_url":"https://api.github.com/users/gweidner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-20T18:14:16Z","updated_at":"2017-02-20T18:14:16Z","author_association":"MEMBER","body":"@asurve ","reactions":{"url":"https://api.github.com/repos/apache/systemds/issues/comments/281148219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]