[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807591294","html_url":"https://github.com/apache/couchdb/issues/2172#issuecomment-1807591294","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2172","id":1807591294,"node_id":"IC_kwDOAAMmUc5rvad-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T07:24:19Z","updated_at":"2023-11-13T07:24:19Z","author_association":"CONTRIBUTOR","body":"_bulk_get is optimized and now now quite a bit faster: https://github.com/apache/couchdb/pull/4238\r\n\r\nClosing as complete.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807591294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807594443","html_url":"https://github.com/apache/couchdb/issues/2188#issuecomment-1807594443","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2188","id":1807594443,"node_id":"IC_kwDOAAMmUc5rvbPL","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T07:27:19Z","updated_at":"2023-11-13T07:27:19Z","author_association":"CONTRIBUTOR","body":"This is now fixed\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807594443/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807602854","html_url":"https://github.com/apache/couchdb/issues/2222#issuecomment-1807602854","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2222","id":1807602854,"node_id":"IC_kwDOAAMmUc5rvdSm","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T07:35:30Z","updated_at":"2023-11-13T07:35:39Z","author_association":"CONTRIBUTOR","body":"Sorry, we had completely missed this issue somehow. @CoHageluken do you happen to have any logs from the replication jobs. They might indicate why the replication is stalling. Also try to upgrade your CouchDB instance if possible as we've made some replicator improvements since 2.x series.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807602854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807605794","html_url":"https://github.com/apache/couchdb/issues/2232#issuecomment-1807605794","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2232","id":1807605794,"node_id":"IC_kwDOAAMmUc5rveAi","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T07:38:17Z","updated_at":"2023-11-13T07:38:17Z","author_association":"CONTRIBUTOR","body":"Closing the issue as stale. @AlexanderKaraberov if you still observe the issue and would like to contribute a patch, please feel free to re-open it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1807605794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808328744","html_url":"https://github.com/apache/couchdb/issues/2188#issuecomment-1808328744","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2188","id":1808328744,"node_id":"IC_kwDOAAMmUc5ryOgo","user":{"login":"Kenzku","id":1387249,"node_id":"MDQ6VXNlcjEzODcyNDk=","avatar_url":"https://avatars.githubusercontent.com/u/1387249?v=4","gravatar_id":"","url":"https://api.github.com/users/Kenzku","html_url":"https://github.com/Kenzku","followers_url":"https://api.github.com/users/Kenzku/followers","following_url":"https://api.github.com/users/Kenzku/following{/other_user}","gists_url":"https://api.github.com/users/Kenzku/gists{/gist_id}","starred_url":"https://api.github.com/users/Kenzku/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kenzku/subscriptions","organizations_url":"https://api.github.com/users/Kenzku/orgs","repos_url":"https://api.github.com/users/Kenzku/repos","events_url":"https://api.github.com/users/Kenzku/events{/privacy}","received_events_url":"https://api.github.com/users/Kenzku/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T15:01:09Z","updated_at":"2023-11-13T15:01:09Z","author_association":"NONE","body":"thank you a million","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808328744/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808478967","html_url":"https://github.com/apache/couchdb/issues/4844#issuecomment-1808478967","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4844","id":1808478967,"node_id":"IC_kwDOAAMmUc5ryzL3","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T16:13:51Z","updated_at":"2023-11-13T16:13:51Z","author_association":"CONTRIBUTOR","body":"Thanks for reaching out @Bolebo.\r\n\r\nThe issue I think is that the internal replicator had already checkpointed that it has synchronized the shards and so won't re-apply the changes.\r\n\r\nOne way to force it to go through all changes could be to delete the internal replicator checkpoints and then force a resync. Your database is quite large so may take a while to resync. Before attempting, try it on a small db if you have any with the same issue and perhaps make a backup. At least,  make sure the db is not accessed or serving traffic during the time resyncing take place (most changes except purge will be there, so it's mostly just the time it take so run through the changes feed and perform calls to the target to compute revision differences).\r\n\r\nSome details on how to do it:\r\n\r\n * Internal replication checkpoints are saved on each shard as it's replicating that shard to it's other (usually 2) copies.\r\n\r\n* Access individual db shards via the node local API: `/_node/$node` or (`/_node/_local` which just accesses it on the node which serves the request):\r\n\r\nExample:\r\n```\r\n% http $DB/_node/_local/_all_dbs\r\nHTTP/1.1 200 OK\r\n\r\n[\r\n    \"_dbs\",\r\n    \"_nodes\",\r\n    \"_users\",\r\n    \"shards/00000000-7fffffff/_replicator.1699890258\",\r\n    \"shards/00000000-7fffffff/_users.1699890258\",\r\n    \"shards/00000000-7fffffff/mydb.1699890412\",\r\n    \"shards/80000000-ffffffff/_replicator.1699890258\",\r\n    \"shards/80000000-ffffffff/_users.1699890258\",\r\n    \"shards/80000000-ffffffff/mydb.1699890412\"\r\n]\r\n```\r\n\r\nThis shows `mydb` is a Q=2 db and has 2 shards on this node. There are 3 total nodes, each with 2 shards, for a total of 6. Your database hopefully has a large Q value and may have other N value.\r\n\r\n* Internal replicator checkpoints are `_local` documents in each individual shard:\r\n\r\nFor instance:\r\n```\r\n % http $DB/_node/_local/shards%2f00000000-7fffffff%2fmydb.1699890412/_local_docs\r\nHTTP/1.1 200 OK\r\n\r\n{\r\n    \"offset\": null,\r\n    \"rows\": [\r\n        {\r\n            \"id\": \"_local/shard-sync-NLHBA2jfFMselm5Rg2Pw-g-eyIod-CGU1zju2fkN_sj9g\",\r\n            \"key\": \"_local/shard-sync-NLHBA2jfFMselm5Rg2Pw-g-eyIod-CGU1zju2fkN_sj9g\",\r\n            \"value\": {\r\n                \"rev\": \"0-1\"\r\n            }\r\n        },\r\n        {\r\n            \"id\": \"_local/shard-sync-NLHBA2jfFMselm5Rg2Pw-g-scr4eZmJPaM_c5S5WoCs0w\",\r\n            \"key\": \"_local/shard-sync-NLHBA2jfFMselm5Rg2Pw-g-scr4eZmJPaM_c5S5WoCs0w\",\r\n            \"value\": {\r\n                \"rev\": \"0-1\"\r\n            }\r\n        },\r\n        {\r\n            \"id\": \"_local/shard-sync-eyIod-CGU1zju2fkN_sj9g-NLHBA2jfFMselm5Rg2Pw-g\",\r\n            \"key\": \"_local/shard-sync-eyIod-CGU1zju2fkN_sj9g-NLHBA2jfFMselm5Rg2Pw-g\",\r\n            \"value\": {\r\n                \"rev\": \"0-1\"\r\n            }\r\n        },\r\n        {\r\n            \"id\": \"_local/shard-sync-scr4eZmJPaM_c5S5WoCs0w-NLHBA2jfFMselm5Rg2Pw-g\",\r\n            \"key\": \"_local/shard-sync-scr4eZmJPaM_c5S5WoCs0w-NLHBA2jfFMselm5Rg2Pw-g\",\r\n            \"value\": {\r\n                \"rev\": \"0-1\"\r\n            }\r\n        }\r\n    ],\r\n    \"total_rows\": null\r\n}\r\n```\r\n\r\nIt's a Q=2, N=3 db. So this shard has 2 copies on other nodes. There is a checkpoint for replication to and from each copy for a total of 4 checkpoints in this shard. Each shard copy should have 4 checkpoint local docs. Note: these local checkpoint docs can only be reliably accessed via the node local API and are accessible via the regular clustered API (mydb/_local_docs).\r\n\r\n * To delete the local document issue a doc delete request. \r\n```\r\n% http delete $DB/_node/_local/shards%2f00000000-7fffffff%2fmydb.1699890412/_local/shard-sync-scr4eZmJPaM_c5S5WoCs0w-NLHBA2jfFMselm5Rg2Pw-g\r\nHTTP/1.1 200 OK\r\n\r\n{\r\n    \"id\": \"_local/shard-sync-scr4eZmJPaM_c5S5WoCs0w-NLHBA2jfFMselm5Rg2Pw-g\",\r\n    \"ok\": true,\r\n    \"rev\": \"0-0\"\r\n}\r\n```\r\n\r\nNote: I had to url escape `/` as `%2f` in the db name and since these are `_local` docs no need to specify a revision.\r\n\r\nYou'd do this on every node, on every shard copy. Also, ensure there aren't any requests or writes that time to the database.\r\n\r\n* When done, force the db shards to resync with a POST request to `mydb/_sync_shards`:\r\n\r\nExample:\r\n```\r\nhttp post $DB/mydb/_sync_shards\r\nHTTP/1.1 202 Accepted\r\n\r\n{\r\n    \"ok\": true\r\n}\r\n```\r\n\r\n\r\nThis should hopefully force all your purges to replicate between your nodes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808478967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808508711","html_url":"https://github.com/apache/couchdb/issues/2281#issuecomment-1808508711","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2281","id":1808508711,"node_id":"IC_kwDOAAMmUc5ry6cn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T16:29:46Z","updated_at":"2023-11-13T16:29:46Z","author_association":"CONTRIBUTOR","body":"`_purged_infos` API is now implemented by @jiahuili430!\r\n\r\nClosing as completed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808508711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808527119","html_url":"https://github.com/apache/couchdb/issues/2241#issuecomment-1808527119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2241","id":1808527119,"node_id":"IC_kwDOAAMmUc5ry-8P","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T16:40:32Z","updated_at":"2023-11-13T17:12:09Z","author_association":"CONTRIBUTOR","body":"400 is more correct, however 403 has been traditionally used by CouchDB as a response from validate doc update (VDU) functions. At some point `_replicator` docs were also validated by an auto-injected design doc. Now they are re-written as an Erlang function, however the validation response was preserved for backwards compatibility.\r\n\r\nAnother aspect here is that a 403 is also a signal to a replicator to skip over a rejected document on the target. That might be in the odd case or replicating `_replicator` dbs themselves. At some point we used to skip over any 4xx error, but that's not the case [any longer](https://github.com/apache/couchdb/commit/d4d49077d3ecca7d5122f4ba0961fa38f6fa597a). That sort of argues that we should just preserve the 403 response.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808527119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808542601","html_url":"https://github.com/apache/couchdb/issues/2246#issuecomment-1808542601","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2246","id":1808542601,"node_id":"IC_kwDOAAMmUc5rzCuJ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T16:45:26Z","updated_at":"2023-11-13T16:45:26Z","author_association":"CONTRIBUTOR","body":"The invalid data when greated results in a proper response:\r\n\r\n```\r\n% http put http://adm:pass@localhost:15984/'00-this-[is]-{an}-inv@lid-name'\r\n\r\nHTTP/1.1 400 Bad Request\r\n{\r\n    \"error\": \"illegal_database_name\",\r\n    \"reason\": \"Name: '00-this-[is]-{an}-inv@lid-name'. Only lowercase characters (a-z), digits (0-9), and any of the characters _, $, (, ), +, -, and / are allowed. Must begin with a letter.\"\r\n}\r\n```\r\n\r\nWhen accessed it also returned 400 as the db is not there:\r\n```\r\n% http get http://adm:pass@localhost:15984/'00-this-[is]-{an}-inv@lid-name'\r\n\r\nHTTP/1.1 404 Object Not Found\r\n```\r\n\r\nThat's as expected.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808542601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808596088","html_url":"https://github.com/apache/couchdb/issues/2241#issuecomment-1808596088","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2241","id":1808596088,"node_id":"IC_kwDOAAMmUc5rzPx4","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:04:35Z","updated_at":"2023-11-13T17:04:35Z","author_association":"MEMBER","body":"https://datatracker.ietf.org/doc/html/rfc9110#name-403-forbidden\r\n\r\n```The 403 (Forbidden) status code indicates that **the server understood the request but refuses to fulfill it**. A server that wishes to make public why the request has been forbidden can describe that reason in the response content (if any). If authentication credentials were provided in the request, the server considers them insufficient to grant access. The client SHOULD NOT automatically repeat the request with the same credentials. The client MAY repeat the request with new or different credentials. **However, a request might be forbidden for reasons unrelated to the credentials.**```\r\n\r\nWe send 403 as it is more descriptive of _why_ the request was rejected. 400 is there for when a more specific code does not apply, but that's not the case here.\r\n\r\nThe request was understood but rejected, and the user should not retry. This is clearly the intended meaning of 403.\r\n\r\nA 400 would also be correct, but not \"more\" correct.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808596088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808622333","html_url":"https://github.com/apache/couchdb/issues/2241#issuecomment-1808622333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2241","id":1808622333,"node_id":"IC_kwDOAAMmUc5rzWL9","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:16:58Z","updated_at":"2023-11-13T17:16:58Z","author_association":"CONTRIBUTOR","body":"@rnewson Thanks for explaining. That makes sense. I erroneously thought 403 was used mostly in the context of authentication/authorization and we just repurposed it for VDU validation, but that's not the case.\r\n\r\nIn light of that I think we can close it as \"works as expected\".\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808622333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808630209","html_url":"https://github.com/apache/couchdb/issues/3259#issuecomment-1808630209","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3259","id":1808630209,"node_id":"IC_kwDOAAMmUc5rzYHB","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:21:58Z","updated_at":"2023-11-13T17:21:58Z","author_association":"CONTRIBUTOR","body":"This is now fixed in https://github.com/apache/couchdb/pull/4287. We simplified the parsing logic and one of the transformation steps there is to use `string:trim/1` on the value after removing the comments.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808630209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808634054","html_url":"https://github.com/apache/couchdb/issues/2758#issuecomment-1808634054","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2758","id":1808634054,"node_id":"IC_kwDOAAMmUc5rzZDG","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:24:23Z","updated_at":"2023-11-13T17:24:23Z","author_association":"CONTRIBUTOR","body":"Closing the issue as `undefined` incref was fixed as mentioned above.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808634054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808636424","html_url":"https://github.com/apache/couchdb/issues/4228#issuecomment-1808636424","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4228","id":1808636424,"node_id":"IC_kwDOAAMmUc5rzZoI","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:25:55Z","updated_at":"2023-11-13T17:25:55Z","author_association":"CONTRIBUTOR","body":"This is documented now https://docs.couchdb.org/en/stable/api/server/authn.html#jwt-authentication\r\n\r\nClosing as completed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808636424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808639802","html_url":"https://github.com/apache/couchdb/issues/3086#issuecomment-1808639802","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3086","id":1808639802,"node_id":"IC_kwDOAAMmUc5rzac6","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:28:05Z","updated_at":"2023-11-13T17:28:05Z","author_association":"CONTRIBUTOR","body":"This is fixed by @eiri in https://github.com/apache/couchdb/pull/3373\r\n\r\nClose as completed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808639802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808651409","html_url":"https://github.com/apache/couchdb/issues/3293#issuecomment-1808651409","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3293","id":1808651409,"node_id":"IC_kwDOAAMmUc5rzdSR","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:35:17Z","updated_at":"2023-11-13T17:35:17Z","author_association":"CONTRIBUTOR","body":"Perhaps if it's still an issue contact the developers couchdb-operator.v1.4.2 on Openshift. We do not support Openshift and/or couchdb-operator.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808651409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808653937","html_url":"https://github.com/apache/couchdb/issues/3369#issuecomment-1808653937","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3369","id":1808653937,"node_id":"IC_kwDOAAMmUc5rzd5x","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:36:54Z","updated_at":"2023-11-13T17:36:54Z","author_association":"CONTRIBUTOR","body":"This was implemented by @willholley in https://github.com/apache/couchdb/pull/4810!\r\n\r\nClosing as completed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808653937/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808656982","html_url":"https://github.com/apache/couchdb/issues/3381#issuecomment-1808656982","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3381","id":1808656982,"node_id":"IC_kwDOAAMmUc5rzepW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:38:25Z","updated_at":"2023-11-13T17:38:25Z","author_association":"CONTRIBUTOR","body":"This is a fdbmain-only issue. As for now fdbmain development is stalled closing the issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808656982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808685271","html_url":"https://github.com/apache/couchdb/issues/3410#issuecomment-1808685271","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3410","id":1808685271,"node_id":"IC_kwDOAAMmUc5rzljX","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T17:52:31Z","updated_at":"2023-11-13T17:52:31Z","author_association":"CONTRIBUTOR","body":"This should be fixed with https://github.com/apache/couchdb/pull/4264. There we fixed an bug where the active db size calculation was mistakenly calculated using non-leaf nodes + leaf node, while it should be leaf nodes only.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808685271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808718392","html_url":"https://github.com/apache/couchdb/issues/3308#issuecomment-1808718392","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3308","id":1808718392,"node_id":"IC_kwDOAAMmUc5rzto4","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T18:00:31Z","updated_at":"2023-11-13T18:00:31Z","author_association":"CONTRIBUTOR","body":"At some point we might have another API or implement HTTP/2, HTTP/3, websockets, etc, but it probably won't be in the contexts of this issue. There are already issues on the roadmap with those ideas.\r\n\r\nFor now connection pooling as described in https://github.com/apache/couchdb/issues/3308#issuecomment-860778557 will avoid making new TCP/TLS connection.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808718392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808748891","html_url":"https://github.com/apache/couchdb/issues/3576#issuecomment-1808748891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3576","id":1808748891,"node_id":"IC_kwDOAAMmUc5rz1Fb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T18:21:35Z","updated_at":"2023-11-13T18:21:35Z","author_association":"CONTRIBUTOR","body":"We have implemented optional countermeasures when the disks are getting full in https://github.com/apache/couchdb/pull/4681\r\n\r\nIt may still be worth adding periodic clear warnings to the logs for `{error,enospc}`. We now support Erlang 24+ so we have access to persistent terms and atomics to possibly implement per-module log rate limiting.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808748891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808754144","html_url":"https://github.com/apache/couchdb/issues/3665#issuecomment-1808754144","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3665","id":1808754144,"node_id":"IC_kwDOAAMmUc5rz2Xg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T18:24:26Z","updated_at":"2023-11-13T18:24:26Z","author_association":"CONTRIBUTOR","body":"We have implemented PBKDF2 with SHA-256 with a cache mitigating the larger iteration counts in https://github.com/apache/couchdb/pull/4814\r\n\r\nClosing as completed. This should be in the next 3.4 release.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808754144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808757585","html_url":"https://github.com/apache/couchdb/issues/4223#issuecomment-1808757585","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4223","id":1808757585,"node_id":"IC_kwDOAAMmUc5rz3NR","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T18:26:33Z","updated_at":"2023-11-13T18:26:33Z","author_association":"CONTRIBUTOR","body":"Closing as fixed by @jiahuili430 \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808757585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808771171","html_url":"https://github.com/apache/couchdb/issues/3824#issuecomment-1808771171","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3824","id":1808771171,"node_id":"IC_kwDOAAMmUc5rz6hj","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T18:32:49Z","updated_at":"2023-11-13T18:32:49Z","author_association":"CONTRIBUTOR","body":"We settled on `make elixir` by renaming `elixir-suite` -> `elixir`. ExUnit never took off and the target doesn't actually run any  tests we should clean that up. But otherwise, we're down to a single working target in makefile so closing as completed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808771171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808912813","html_url":"https://github.com/apache/couchdb/pull/4845#issuecomment-1808912813","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4845","id":1808912813,"node_id":"IC_kwDOAAMmUc5r0dGt","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T19:40:04Z","updated_at":"2023-11-13T19:40:04Z","author_association":"CONTRIBUTOR","body":"@big-r81 the pr has it removed already :-)  https://github.com/apache/couchdb/pull/4845/files#diff-10ed172a506448a217903c4ff9ddc9e6044d176b8d3ff409a59602494cf2397dL143-L175","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808912813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808929952","html_url":"https://github.com/apache/couchdb/pull/4845#issuecomment-1808929952","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4845","id":1808929952,"node_id":"IC_kwDOAAMmUc5r0hSg","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T19:49:46Z","updated_at":"2023-11-13T19:49:46Z","author_association":"CONTRIBUTOR","body":"🫣","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1808929952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1810334684","html_url":"https://github.com/apache/couchdb/issues/4844#issuecomment-1810334684","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4844","id":1810334684,"node_id":"IC_kwDOAAMmUc5r54Pc","user":{"login":"Bolebo","id":45532784,"node_id":"MDQ6VXNlcjQ1NTMyNzg0","avatar_url":"https://avatars.githubusercontent.com/u/45532784?v=4","gravatar_id":"","url":"https://api.github.com/users/Bolebo","html_url":"https://github.com/Bolebo","followers_url":"https://api.github.com/users/Bolebo/followers","following_url":"https://api.github.com/users/Bolebo/following{/other_user}","gists_url":"https://api.github.com/users/Bolebo/gists{/gist_id}","starred_url":"https://api.github.com/users/Bolebo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bolebo/subscriptions","organizations_url":"https://api.github.com/users/Bolebo/orgs","repos_url":"https://api.github.com/users/Bolebo/repos","events_url":"https://api.github.com/users/Bolebo/events{/privacy}","received_events_url":"https://api.github.com/users/Bolebo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T14:31:29Z","updated_at":"2023-11-14T14:45:15Z","author_association":"NONE","body":"First of all, thank you for your quick answer. As it is a production issue, it is very appreciated !\r\n\r\nI tried your solution on a test environment, but it doesn't work as expected.\r\nI managed to identify corrupted shards and I worked on only one to save some time (my database is q=128 with 220M docs).\r\nHere was the state (number of documents in each shard) before taking action:\r\n\r\n```\r\nShard shards%2Fdc000000-ddffffff%2Factivity-logs-v2.1696865462 is corrupted:\r\n\r\n{\r\n  \"couchdb@Vm-TIS-Pxp-couchdb0\": 1804869,\r\n  \"couchdb@Vm-TIS-Pxp-couchdb1\": 1804869,\r\n  \"couchdb@Vm-TIS-Pxp-couchdb5\": 1807865\r\n}\r\n```\r\nClearly, the node couchdb5 was the one that \"missed\" 2996 purges during maintenance mode.\r\n\r\nAfter applying your method I came with this:\r\n```\r\n\"shards%2Fdc000000-ddffffff%2Factivity-logs-v2.1696865462\": {\r\n    \"couchdb@Vm-TIS-Pxp-couchdb0\": 1807865,\r\n    \"couchdb@Vm-TIS-Pxp-couchdb1\": 1807865,\r\n    \"couchdb@Vm-TIS-Pxp-couchdb5\": 1807865\r\n  }\r\n```\r\nThe node is coherent but purged documents have been reintegrated into the database (I expected 1804869 docs in each node).\r\n\r\nPerhaps I did something wrong.\r\nFor example, I've notived that I have other local docs on shards such as:\r\n- _local/purge-mem3-* documents\r\n- _local/purge-mrview-* documents\r\nShould I remove them too ?\r\n\r\nIf you have another nice idea, it is very welcomed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1810334684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1810752871","html_url":"https://github.com/apache/couchdb/issues/4843#issuecomment-1810752871","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4843","id":1810752871,"node_id":"IC_kwDOAAMmUc5r7eVn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T17:25:47Z","updated_at":"2023-11-14T17:25:47Z","author_association":"CONTRIBUTOR","body":"@nicknaychov if that shows up when couchdb is shutting down it's benign.  The error message is saying that a few Erlang processes were forcibly killed while they were running index compaction. On restart they should resume just fine. \r\n\r\nIn general, when the Erlang VM is shutting down it stops its applications, each one of those will stop its supervisors, and each supervisor may wait for its worker processes to stop. But there is also a timeout to avoid the shutdown being blocked, so then if the system was busy, it may trigger the timeout and so the application will then forcibly kill the remaining processes. When that happens a log like that is emitted, which is kind of noisy and messy. What OS are you using and how are you stopping CouchDB, maybe it's something we can fix (increase the timeout?).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1810752871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1811548656","html_url":"https://github.com/apache/couchdb/issues/4747#issuecomment-1811548656","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4747","id":1811548656,"node_id":"IC_kwDOAAMmUc5r-gnw","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T23:21:44Z","updated_at":"2023-11-15T16:13:49Z","author_association":"CONTRIBUTOR","body":"`D` state from what I remember is un-interruptable sleep waiting on a disk operation. If it's true that it was in that state for 120 seconds, that indicates a problem with disk IO.  Check perhaps that you have enough disk bandwidth? Is this running in a cloud provider's host or directly on plain hardware?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1811548656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1811595262","html_url":"https://github.com/apache/couchdb/issues/4844#issuecomment-1811595262","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4844","id":1811595262,"node_id":"IC_kwDOAAMmUc5r-r_-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T00:13:58Z","updated_at":"2023-11-15T00:13:58Z","author_association":"CONTRIBUTOR","body":"Thanks for trying @Bolebo. Sorry it didn't work.\r\n\r\nLooking at the difference in the number of docs and that there are more than 1000 and I wonder if the purges have been already been removed by compaction. We only keep up to `purged_infos_limit = 1000` purge requests https://docs.couchdb.org/en/stable/api/database/misc.html#put--db-_purged_infos_limit purges on a node. If at some point we didn't replicate them, when the nodes were in maintenance, compaction would have run on nodes and would have removed those most of purge requests leaving only 1000 of them.\r\n\r\nIn `main` (pending 3.4 release) we'll have a new API endpoint `_purged_infos` to fetch and inspect current purge infos on a cluster, but it's not there in any release yet. https://github.com/apache/couchdb/pull/4703\r\n\r\n> For example, I've noticed that I have other local docs on shards such as: `_local/purge-mem3-* documents`\r\n\r\nThat could be worth trying! Perhaps try it on a test instance. So, delete the `_local/purge-mem3-*` documents on all copies of a particular shard range, and then force another shard sync with with a POST to `_sync_shards`. But if the theory about purged_infos_limit is correct, that may purge only the last 1000 docs only.\r\n\r\nIf this doesn't work, the simplest approach may just be to re-purge all the docs which should be deleted. It's safe to create purges for doc revisions which are already purged, they'll just be processed by all the views and then during compaction only the last 1000 will remain.\r\n\r\nYou probably already know this but if you re-purge all the missed docs pay attention to `max_document_id_number = 100` and `max_revision_number =1000` config values. Those would restrict the max number of documents and max number of revisions per document: https://docs.couchdb.org/en/stable/config/misc.html#purge. So  you can raise those value or create a script to post small enough batches.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1811595262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812488941","html_url":"https://github.com/apache/couchdb/issues/4844#issuecomment-1812488941","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4844","id":1812488941,"node_id":"IC_kwDOAAMmUc5sCGLt","user":{"login":"Bolebo","id":45532784,"node_id":"MDQ6VXNlcjQ1NTMyNzg0","avatar_url":"https://avatars.githubusercontent.com/u/45532784?v=4","gravatar_id":"","url":"https://api.github.com/users/Bolebo","html_url":"https://github.com/Bolebo","followers_url":"https://api.github.com/users/Bolebo/followers","following_url":"https://api.github.com/users/Bolebo/following{/other_user}","gists_url":"https://api.github.com/users/Bolebo/gists{/gist_id}","starred_url":"https://api.github.com/users/Bolebo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bolebo/subscriptions","organizations_url":"https://api.github.com/users/Bolebo/orgs","repos_url":"https://api.github.com/users/Bolebo/repos","events_url":"https://api.github.com/users/Bolebo/events{/privacy}","received_events_url":"https://api.github.com/users/Bolebo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T12:55:40Z","updated_at":"2023-11-15T12:55:40Z","author_association":"NONE","body":"Thank you for your answer.\r\nDespite all tries, all purge instructions seem to be lost.\r\n\r\nI have a final try to do:\r\n- As I know that the problem comes from purge instructions\r\n- As I know in which shard my problem is (in my example in shard in node 5)\r\n\r\nIs there any risk or side effect you know about if I simply physically delete the shard file on node 5 ? I expect it will synchronize with the 2 left nodes, without documents already purged in those 2 remaining nodes.\r\n\r\nThanks in advance for your (final) answer.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812488941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812673535","html_url":"https://github.com/apache/couchdb/issues/4850#issuecomment-1812673535","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4850","id":1812673535,"node_id":"IC_kwDOAAMmUc5sCzP_","user":{"login":"benel","id":597307,"node_id":"MDQ6VXNlcjU5NzMwNw==","avatar_url":"https://avatars.githubusercontent.com/u/597307?v=4","gravatar_id":"","url":"https://api.github.com/users/benel","html_url":"https://github.com/benel","followers_url":"https://api.github.com/users/benel/followers","following_url":"https://api.github.com/users/benel/following{/other_user}","gists_url":"https://api.github.com/users/benel/gists{/gist_id}","starred_url":"https://api.github.com/users/benel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benel/subscriptions","organizations_url":"https://api.github.com/users/benel/orgs","repos_url":"https://api.github.com/users/benel/repos","events_url":"https://api.github.com/users/benel/events{/privacy}","received_events_url":"https://api.github.com/users/benel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T14:46:59Z","updated_at":"2023-11-15T14:46:59Z","author_association":"NONE","body":"Really weird. The problem disappeared after restarting the OS. \r\n\r\nCould this problem be related to a sort of system resource leak? \r\nHowever I did not found any (memory, open files...).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812673535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812764631","html_url":"https://github.com/apache/couchdb/issues/4850#issuecomment-1812764631","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4850","id":1812764631,"node_id":"IC_kwDOAAMmUc5sDJfX","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T15:37:16Z","updated_at":"2023-11-15T15:37:16Z","author_association":"MEMBER","body":"It certainly didn't sound like couchdb or erlang behaviour I've ever seen. resource exhaustion would be a good bet.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812764631/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812849372","html_url":"https://github.com/apache/couchdb/issues/4844#issuecomment-1812849372","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4844","id":1812849372,"node_id":"IC_kwDOAAMmUc5sDeLc","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T16:20:43Z","updated_at":"2023-11-15T16:20:43Z","author_association":"CONTRIBUTOR","body":"> Despite all tries, all purge instructions seem to be lost.\r\n\r\nJust curious did you try re-purging them. It seems that should have worked? But I can understand that it be tricky to also figure out which ones to re-purge. Internally purge requests get a uuid assigned to them so the new ones even if for the same doc_id and rev will be processed as new requests. But I can see if you know the exact shard with the issue, then your resyncing idea is much easier.\r\n\r\n> Is there any risk or side effect you know about if I simply physically delete the shard file on node 5 ? I expect it will synchronize with the 2 left nodes, without documents already purged in those 2 remaining nodes.\r\n\r\nThat should work. To practice try it on a test instance first, just in case. But that's the standard recovery path if a shard copy is lost or corrupted - it should be resynced.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812849372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812927706","html_url":"https://github.com/apache/couchdb/pull/4833#issuecomment-1812927706","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4833","id":1812927706,"node_id":"IC_kwDOAAMmUc5sDxTa","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T17:06:23Z","updated_at":"2023-11-15T17:06:23Z","author_association":"CONTRIBUTOR","body":"@rnewson Can this be closed?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1812927706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814029449","html_url":"https://github.com/apache/couchdb/issues/4844#issuecomment-1814029449","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4844","id":1814029449,"node_id":"IC_kwDOAAMmUc5sH-SJ","user":{"login":"Bolebo","id":45532784,"node_id":"MDQ6VXNlcjQ1NTMyNzg0","avatar_url":"https://avatars.githubusercontent.com/u/45532784?v=4","gravatar_id":"","url":"https://api.github.com/users/Bolebo","html_url":"https://github.com/Bolebo","followers_url":"https://api.github.com/users/Bolebo/followers","following_url":"https://api.github.com/users/Bolebo/following{/other_user}","gists_url":"https://api.github.com/users/Bolebo/gists{/gist_id}","starred_url":"https://api.github.com/users/Bolebo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bolebo/subscriptions","organizations_url":"https://api.github.com/users/Bolebo/orgs","repos_url":"https://api.github.com/users/Bolebo/repos","events_url":"https://api.github.com/users/Bolebo/events{/privacy}","received_events_url":"https://api.github.com/users/Bolebo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T08:55:50Z","updated_at":"2023-11-16T08:55:50Z","author_association":"NONE","body":"Unfortunatelly, I can't re-purge them because I basically don't know which documents are purged (this is triggered by endusers).\r\nI will then remove \"corrupted\" shards, even if it's not obvious for each database concerned.\r\n\r\nThank you for your support. It was very usefull to have a way to consult individual shards properties/documents on each node ! To my knowledge, it is not documented but essential for such analysis.\r\n\r\nBest regards,\r\nBoris","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814029449/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814266006","html_url":"https://github.com/apache/couchdb/issues/4851#issuecomment-1814266006","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4851","id":1814266006,"node_id":"IC_kwDOAAMmUc5sI4CW","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T11:31:25Z","updated_at":"2023-11-16T11:31:25Z","author_association":"MEMBER","body":"Can you fetch the document with `?conflicts=true` query parameter? perhaps you have introduced conflicts and the attachment is stored with a \"losing\" revision. \r\n\r\nWe've not seen a 201 response for an attachment PUT that didn't mean the attachment was correctly stored. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814266006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814614474","html_url":"https://github.com/apache/couchdb/issues/4851#issuecomment-1814614474","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4851","id":1814614474,"node_id":"IC_kwDOAAMmUc5sKNHK","user":{"login":"avarf","id":14043737,"node_id":"MDQ6VXNlcjE0MDQzNzM3","avatar_url":"https://avatars.githubusercontent.com/u/14043737?v=4","gravatar_id":"","url":"https://api.github.com/users/avarf","html_url":"https://github.com/avarf","followers_url":"https://api.github.com/users/avarf/followers","following_url":"https://api.github.com/users/avarf/following{/other_user}","gists_url":"https://api.github.com/users/avarf/gists{/gist_id}","starred_url":"https://api.github.com/users/avarf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avarf/subscriptions","organizations_url":"https://api.github.com/users/avarf/orgs","repos_url":"https://api.github.com/users/avarf/repos","events_url":"https://api.github.com/users/avarf/events{/privacy}","received_events_url":"https://api.github.com/users/avarf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T14:54:33Z","updated_at":"2023-11-16T14:54:33Z","author_association":"NONE","body":"The issue is I have a PUT call to update the document later down the flow and it is updating the document with up-to-date information BUT it is not aware of `_attachments` and overwrites it and because of that CouchDB doesn't show the attachment.\r\n\r\nI was thinking that attachments are some how independent from the content of the document but it seems that it is not true.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814614474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814618423","html_url":"https://github.com/apache/couchdb/issues/4851#issuecomment-1814618423","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4851","id":1814618423,"node_id":"IC_kwDOAAMmUc5sKOE3","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T14:56:48Z","updated_at":"2023-11-16T14:56:48Z","author_association":"MEMBER","body":"aaah!\r\n\r\nAre you wiping out the _attachments meta object when updating the document?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814618423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814620175","html_url":"https://github.com/apache/couchdb/issues/4851#issuecomment-1814620175","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4851","id":1814620175,"node_id":"IC_kwDOAAMmUc5sKOgP","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T14:57:42Z","updated_at":"2023-11-16T14:57:42Z","author_association":"MEMBER","body":"attachments are \"attached\" to the documents, indeed. you can delete documents by removing the _attachments object (or items within it).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814620175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814686475","html_url":"https://github.com/apache/couchdb/issues/4851#issuecomment-1814686475","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4851","id":1814686475,"node_id":"IC_kwDOAAMmUc5sKesL","user":{"login":"avarf","id":14043737,"node_id":"MDQ6VXNlcjE0MDQzNzM3","avatar_url":"https://avatars.githubusercontent.com/u/14043737?v=4","gravatar_id":"","url":"https://api.github.com/users/avarf","html_url":"https://github.com/avarf","followers_url":"https://api.github.com/users/avarf/followers","following_url":"https://api.github.com/users/avarf/following{/other_user}","gists_url":"https://api.github.com/users/avarf/gists{/gist_id}","starred_url":"https://api.github.com/users/avarf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/avarf/subscriptions","organizations_url":"https://api.github.com/users/avarf/orgs","repos_url":"https://api.github.com/users/avarf/repos","events_url":"https://api.github.com/users/avarf/events{/privacy}","received_events_url":"https://api.github.com/users/avarf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T15:30:11Z","updated_at":"2023-11-16T15:30:11Z","author_association":"NONE","body":"Yes, I was deleting the _attachments meta while updating the document.\r\n\r\nWhat other meta do I need to be careful about? :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814686475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814765361","html_url":"https://github.com/apache/couchdb/issues/4851#issuecomment-1814765361","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4851","id":1814765361,"node_id":"IC_kwDOAAMmUc5sKx8x","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T16:09:47Z","updated_at":"2023-11-16T16:09:47Z","author_association":"MEMBER","body":"all the `_` prefixed attributes have a meaning to couchdb (the rest are user data), so _id, _rev, _deleted and _attachments all matter.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1814765361/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1815262120","html_url":"https://github.com/apache/couchdb/pull/4852#issuecomment-1815262120","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4852","id":1815262120,"node_id":"IC_kwDOAAMmUc5sMrOo","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T20:26:41Z","updated_at":"2023-11-16T20:26:41Z","author_association":"CONTRIBUTOR","body":"@rnewson makes sense. Thanks for nudge to keep the concerns in separate in PRs. The vsn PR merged in main. Thanks for the review.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1815262120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1815704318","html_url":"https://github.com/apache/couchdb/pull/4852#issuecomment-1815704318","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4852","id":1815704318,"node_id":"IC_kwDOAAMmUc5sOXL-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-17T03:46:53Z","updated_at":"2023-11-17T03:46:53Z","author_association":"CONTRIBUTOR","body":"> Did you happen to run any performance benchmarks to demonstrate a performance improvement or a \"widening\" of the bottleneck?\r\n\r\nGood idea. I had setup a custom snippet to create a bunch of active tasks on a node:\r\n\r\n```erlang\r\nf(RandProps), RandProps = fun() ->\r\n    [\r\n        {type, indexer},\r\n        {database, <<\"foodatabase\">>},\r\n        {progress, rand:uniform(100)}\r\n    ]\r\nend.\r\n\r\nf(RandTaskProc), RandTaskProc = fun F() ->\r\n    After = 500 + rand:uniform(1000),\r\n    receive\r\n        {add_task, From} ->\r\n            couch_task_status:add_task(RandProps()),\r\n            From ! task_added,\r\n            timer:sleep(1000),\r\n            F()\r\n    after After ->\r\n            couch_task_status:update([{progress, rand:uniform(100)}]),\r\n            F()\r\n    end\r\nend.\r\n\r\nf(Spawn), Spawn = fun(N) ->\r\n    Pids = [spawn_link(RandTaskProc) || _ <- lists:seq(1, N)],\r\n    [begin Pid ! {add_task, self()}, receive task_added -> ok end end || Pid <- Pids],\r\n    Pids\r\nend.\r\n\r\nf(Pids), Pids = Spawn(400), ok.\r\n```\r\n\r\nThen used [vegeta](https://github.com/tsenart/vegeta) to send various rates of requests.\r\n\r\nOn main:\r\n\r\n```\r\n % echo \"GET http://127.0.0.1:15984/_active_tasks\" | ./vegeta attack -header \"Authorization: Basic YWRtOnBhc3M=\" -rate=2000 -duration=30s | ./vegeta report\r\nRequests      [total, rate, throughput]         39178, 1302.25, 791.40\r\nDuration      [total, attack, wait]             42.18s, 30.085s, 12.095s\r\nLatencies     [min, mean, 50, 90, 95, 99, max]  5.734ms, 10.295s, 5.632s, 23.773s, 24.022s, 24.6s, 30.003s\r\nBytes In      [total, mean]                     2356237741, 60141.86\r\nBytes Out     [total, mean]                     0, 0.00\r\nSuccess       [ratio]                           85.20%\r\nStatus Codes  [code:count]                      0:5797  200:33381\r\nError Set:\r\nGet \"http://127.0.0.1:15984/_active_tasks\": dial tcp 0.0.0.0:0->127.0.0.1:15984: bind: can't assign requested address\r\nGet \"http://127.0.0.1:15984/_active_tasks\": context deadline exceeded (Client.Timeout exceeded while awaiting headers)\r\n```\r\n\r\nRequests started to pile up quickly and some were failing.\r\n\r\nWith the PR:\r\n\r\n```\r\n% echo \"GET http://127.0.0.1:15984/_active_tasks\" | ./vegeta attack -header \"Authorization: Basic YWRtOnBhc3M=\" -rate=2000 -duration=30s | ./vegeta report\r\nRequests      [total, rate, throughput]         60000, 2000.03, 1999.80\r\nDuration      [total, attack, wait]             30.003s, 29.999s, 3.551ms\r\nLatencies     [min, mean, 50, 90, 95, 99, max]  2.329ms, 17.76ms, 5.732ms, 43.533ms, 75.153ms, 163.1ms, 442.432ms\r\nBytes In      [total, mean]                     4246174911, 70769.58\r\nBytes Out     [total, mean]                     0, 0.00\r\nSuccess       [ratio]                           100.00%\r\nStatus Codes  [code:count]                      200:60000\r\nError Set:\r\n```\r\n\r\nIt had no difficulty making 2000 request per second without errors.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1815704318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1816329777","html_url":"https://github.com/apache/couchdb/issues/4754#issuecomment-1816329777","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4754","id":1816329777,"node_id":"IC_kwDOAAMmUc5sQv4x","user":{"login":"VladimirCores","id":442111,"node_id":"MDQ6VXNlcjQ0MjExMQ==","avatar_url":"https://avatars.githubusercontent.com/u/442111?v=4","gravatar_id":"","url":"https://api.github.com/users/VladimirCores","html_url":"https://github.com/VladimirCores","followers_url":"https://api.github.com/users/VladimirCores/followers","following_url":"https://api.github.com/users/VladimirCores/following{/other_user}","gists_url":"https://api.github.com/users/VladimirCores/gists{/gist_id}","starred_url":"https://api.github.com/users/VladimirCores/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VladimirCores/subscriptions","organizations_url":"https://api.github.com/users/VladimirCores/orgs","repos_url":"https://api.github.com/users/VladimirCores/repos","events_url":"https://api.github.com/users/VladimirCores/events{/privacy}","received_events_url":"https://api.github.com/users/VladimirCores/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-17T12:30:05Z","updated_at":"2023-11-17T12:30:05Z","author_association":"NONE","body":"Actually what I would try for this case is to use Prometheus to catch and filter specific event and translate it to alert which will be trigger the function.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1816329777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817040300","html_url":"https://github.com/apache/couchdb/pull/4858#issuecomment-1817040300","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4858","id":1817040300,"node_id":"IC_kwDOAAMmUc5sTdWs","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-17T20:12:56Z","updated_at":"2023-11-17T20:12:56Z","author_association":"CONTRIBUTOR","body":"+1 if CI passes","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817040300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817474654","html_url":"https://github.com/apache/couchdb/pull/4856#issuecomment-1817474654","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4856","id":1817474654,"node_id":"IC_kwDOAAMmUc5sVHZe","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-18T10:49:35Z","updated_at":"2023-11-18T10:49:35Z","author_association":"CONTRIBUTOR","body":"This is not needed any more.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817474654/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817474702","html_url":"https://github.com/apache/couchdb/pull/4855#issuecomment-1817474702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4855","id":1817474702,"node_id":"IC_kwDOAAMmUc5sVHaO","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-18T10:49:50Z","updated_at":"2023-11-18T10:49:50Z","author_association":"CONTRIBUTOR","body":"This is not needed any more.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817474702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817859937","html_url":"https://github.com/apache/couchdb/issues/4859#issuecomment-1817859937","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4859","id":1817859937,"node_id":"IC_kwDOAAMmUc5sWldh","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T13:43:25Z","updated_at":"2023-11-19T13:43:25Z","author_association":"CONTRIBUTOR","body":"Adding questions for Windows:\r\n\r\n1. Package nouveau jars with the [installer](https://github.com/apache/couchdb-glazier/blob/main/bin/build_installer.ps1).\r\n2. is a JRE available for running nouveau? Maybe which env-Vars?\r\n3. Include some service start / stop scripts to start it and stop Nouveau.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817859937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817915458","html_url":"https://github.com/apache/couchdb/pull/4860#issuecomment-1817915458","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4860","id":1817915458,"node_id":"IC_kwDOAAMmUc5sWzBC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T16:57:13Z","updated_at":"2023-11-19T16:57:13Z","author_association":"CONTRIBUTOR","body":"@big-r81 good call, but I thought we already bumped node in CI images https://github.com/apache/couchdb-ci/pull/63 at least as much as we could bump it. It won't work on centos-7 and bionic","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817915458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817916747","html_url":"https://github.com/apache/couchdb/pull/4860#issuecomment-1817916747","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4860","id":1817916747,"node_id":"IC_kwDOAAMmUc5sWzVL","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T17:02:12Z","updated_at":"2023-11-19T17:02:12Z","author_association":"CONTRIBUTOR","body":"Does that mean that Fauxton will not technically work on CentOS 7 and Ubuntu Bionic and this is acceptable?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817916747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817917434","html_url":"https://github.com/apache/couchdb/pull/4860#issuecomment-1817917434","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4860","id":1817917434,"node_id":"IC_kwDOAAMmUc5sWzf6","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T17:04:28Z","updated_at":"2023-11-19T17:04:28Z","author_association":"CONTRIBUTOR","body":"@pgj nodejs is just for building (assembling) the js site bits together. We don't rely on it at runtime. So it probably means we may not be able to build a dist release tarball on centos-7 and bionic.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817917434/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817937340","html_url":"https://github.com/apache/couchdb/pull/4860#issuecomment-1817937340","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4860","id":1817937340,"node_id":"IC_kwDOAAMmUc5sW4W8","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T18:21:03Z","updated_at":"2023-11-19T18:21:03Z","author_association":"CONTRIBUTOR","body":"> @big-r81 good call, but I thought we already bumped node in CI images https://github.com/apache/couchdb-ci/pull/63 at least as much as we could bump it. It won't work on centos-7 and bionic\n\n@nickva oh, you are completely right! Maybe too many good changes at different parts in the last weeks 😉","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817937340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817955278","html_url":"https://github.com/apache/couchdb/pull/4861#issuecomment-1817955278","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4861","id":1817955278,"node_id":"IC_kwDOAAMmUc5sW8vO","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T19:32:45Z","updated_at":"2023-11-19T19:32:45Z","author_association":"CONTRIBUTOR","body":"Cool, thanks @nickva !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1817955278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1818074237","html_url":"https://github.com/apache/couchdb/issues/4747#issuecomment-1818074237","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4747","id":1818074237,"node_id":"IC_kwDOAAMmUc5sXZx9","user":{"login":"fr2lancer","id":6251051,"node_id":"MDQ6VXNlcjYyNTEwNTE=","avatar_url":"https://avatars.githubusercontent.com/u/6251051?v=4","gravatar_id":"","url":"https://api.github.com/users/fr2lancer","html_url":"https://github.com/fr2lancer","followers_url":"https://api.github.com/users/fr2lancer/followers","following_url":"https://api.github.com/users/fr2lancer/following{/other_user}","gists_url":"https://api.github.com/users/fr2lancer/gists{/gist_id}","starred_url":"https://api.github.com/users/fr2lancer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fr2lancer/subscriptions","organizations_url":"https://api.github.com/users/fr2lancer/orgs","repos_url":"https://api.github.com/users/fr2lancer/repos","events_url":"https://api.github.com/users/fr2lancer/events{/privacy}","received_events_url":"https://api.github.com/users/fr2lancer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T01:30:25Z","updated_at":"2023-11-20T01:30:25Z","author_association":"NONE","body":"Hi.\r\n\r\nIt seems like kernel issue https://access.redhat.com/solutions/7014646\r\nonce it has been patched, I didn't see such log in dmesg.\r\n\r\nI just wonder why it happens only in couchdb ?\r\n\r\nbtw, you can close this ticket. I will reopen this if I found similar symptoms\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1818074237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1818228617","html_url":"https://github.com/apache/couchdb/issues/4747#issuecomment-1818228617","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4747","id":1818228617,"node_id":"IC_kwDOAAMmUc5sX_eJ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T04:56:14Z","updated_at":"2023-11-20T04:56:14Z","author_association":"CONTRIBUTOR","body":"@fr2lancer that's great news that they fixed it.\r\n\r\n> I just wonder why it happens only in couchdb ?\r\n\r\nIt's hard to say. Unlike other software, but not unlike other databases, CouchDB performs a lot of concurrent writes mixed with fsyncs. If the kernel is also trying to read/write swap pages it could trigger some specific corner case?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1818228617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1819515085","html_url":"https://github.com/apache/couchdb/pull/4862#issuecomment-1819515085","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4862","id":1819515085,"node_id":"IC_kwDOAAMmUc5sc5jN","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T17:32:38Z","updated_at":"2023-11-20T17:32:38Z","author_association":"MEMBER","body":"```When filered _changes is triggered, open_rev() will increment stats. If query has include_docs=true, then doc_member() will also increase stats.```\r\n\r\nIn that code path it sounds like the document _is_ being read twice, so incrementing database_reads twice sounds correct. Of course if we could avoid the second read that would be great.\r\n\r\nDid I misunderstand the problem?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1819515085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1819524851","html_url":"https://github.com/apache/couchdb/pull/4862#issuecomment-1819524851","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4862","id":1819524851,"node_id":"IC_kwDOAAMmUc5sc77z","user":{"login":"jiahuili430","id":54631519,"node_id":"MDQ6VXNlcjU0NjMxNTE5","avatar_url":"https://avatars.githubusercontent.com/u/54631519?v=4","gravatar_id":"","url":"https://api.github.com/users/jiahuili430","html_url":"https://github.com/jiahuili430","followers_url":"https://api.github.com/users/jiahuili430/followers","following_url":"https://api.github.com/users/jiahuili430/following{/other_user}","gists_url":"https://api.github.com/users/jiahuili430/gists{/gist_id}","starred_url":"https://api.github.com/users/jiahuili430/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiahuili430/subscriptions","organizations_url":"https://api.github.com/users/jiahuili430/orgs","repos_url":"https://api.github.com/users/jiahuili430/repos","events_url":"https://api.github.com/users/jiahuili430/events{/privacy}","received_events_url":"https://api.github.com/users/jiahuili430/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T17:39:14Z","updated_at":"2023-11-20T17:39:14Z","author_association":"CONTRIBUTOR","body":"> In that code path it sounds like the document is being read twice, so incrementing database_reads twice sounds correct. Of course if we could avoid the second read that would be great.\r\n\r\nI'll try to avoid the second read, thanks for the review.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1819524851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820473136","html_url":"https://github.com/apache/couchdb/issues/4864#issuecomment-1820473136","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4864","id":1820473136,"node_id":"IC_kwDOAAMmUc5sgjcw","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T08:45:36Z","updated_at":"2023-11-21T08:45:36Z","author_association":"MEMBER","body":"This is not configurable (https://github.com/apache/couchdb/blob/main/src/couch_log/src/couch_log_util.erl#L40-L44)\r\n\r\ncouchdb will log timestamps as UTC (technically Posix Time which is close but not identical to UTC).\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820473136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820845733","html_url":"https://github.com/apache/couchdb/issues/4864#issuecomment-1820845733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4864","id":1820845733,"node_id":"IC_kwDOAAMmUc5sh-al","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T12:37:01Z","updated_at":"2023-11-21T12:37:01Z","author_association":"CONTRIBUTOR","body":"@rnewson do you think it would make sense to make it configurable or to respect `/etc/localtime` as the submitter expects?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820845733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820851299","html_url":"https://github.com/apache/couchdb/issues/4864#issuecomment-1820851299","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4864","id":1820851299,"node_id":"IC_kwDOAAMmUc5sh_xj","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T12:40:43Z","updated_at":"2023-11-21T12:40:43Z","author_association":"MEMBER","body":"Not in my opinion. The log is unambiguous (the ISO 8601 format includes the timezone indicator). Logs produced by couchdb installed anywhere are comparable without worrying about timezone differences.\r\n\r\nWe log as UTC (or close enough). Time zones are a rendering time issue. Users can, if they wish, translate these timestamps to their local time zone for display.\r\n\r\nI'm strongly of the view that all servers (running couchdb or otherwise) should have their system time set to UTC regardless of location and timestamps should remain in UTC, but that's perhaps my bias working in an environment where I regularly interact with CouchDB's installed around the world. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820851299/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820872353","html_url":"https://github.com/apache/couchdb/issues/4864#issuecomment-1820872353","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4864","id":1820872353,"node_id":"IC_kwDOAAMmUc5siE6h","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T12:54:18Z","updated_at":"2023-11-21T12:54:18Z","author_association":"CONTRIBUTOR","body":"Okay, thanks.  Differences in time zones for the timestamps should not cause problems as they indicate the time zone (as you highlighted) therefore logs would remain easily comparable, at least for machines.\r\n\r\nI fully agree with you about running servers on UTC time — that is what I usually do myself whenever possible.  I do not know how other applications handle or expected to handle this, but this issue gives me the feeling that CouchDB operates in a non-standard way in that regard and it should rely on the system time zone settings for the easier integration, even if that might not be practical.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820872353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820888109","html_url":"https://github.com/apache/couchdb/issues/4864#issuecomment-1820888109","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4864","id":1820888109,"node_id":"IC_kwDOAAMmUc5siIwt","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T13:04:18Z","updated_at":"2023-11-21T13:04:18Z","author_association":"MEMBER","body":"I've been doing this (couchdb) for too long so my horizon is narrowed, but I think it's at least not uncommon for application servers to log in UTC rather than local time. Of course other folks can provide their own opinions here. I wouldn't block a pull request that made this configurable, as long as the default remained UTC (/Posix Time). In ASF terms I'd be a -0. would prefer we didn't add this, but wouldn't block it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820888109/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820932734","html_url":"https://github.com/apache/couchdb/issues/4864#issuecomment-1820932734","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4864","id":1820932734,"node_id":"IC_kwDOAAMmUc5siTp-","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T13:31:26Z","updated_at":"2023-11-21T13:31:26Z","author_association":"MEMBER","body":"I’m not in favour of changing this unless a good reason is stated. I can imagine a scenario or two where this would be nice to have, but they are very uncommon. What Bob said.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1820932734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1821599891","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1821599891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1821599891,"node_id":"IC_kwDOAAMmUc5sk2iT","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T20:03:20Z","updated_at":"2023-11-21T20:03:48Z","author_association":"CONTRIBUTOR","body":"These conflicts shards typically are benign. They result from concurrent updates to `_dbs`. When the same database gets created concurrently and they maybe some network or temporary partition delay. After the _`dbs` db gets replicated (it replicates in a ring `0 -> 1 ... -> N-1 -> N -> 0`). The cluster will use the winning revision of the database.\r\n\r\nTo mitigate or stop the issue you can find the conflicted dbs and delete the conflicted revision. So if 2-abc... and 2-def are conflicted and 2-def is the actively used shard map, you can delete 2-abc by getting its rev and then issue a delete with rev =  `2-abc`\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1821599891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1821600652","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1821600652","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1821600652,"node_id":"IC_kwDOAAMmUc5sk2uM","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T20:03:59Z","updated_at":"2023-11-21T20:03:59Z","author_association":"CONTRIBUTOR","body":"(sorry closed by accident)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1821600652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1822263233","html_url":"https://github.com/apache/couchdb/issues/4866#issuecomment-1822263233","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4866","id":1822263233,"node_id":"IC_kwDOAAMmUc5snYfB","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T07:47:34Z","updated_at":"2023-11-22T07:47:34Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/couchdb/pull/4867\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1822263233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1822407208","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1822407208","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1822407208,"node_id":"IC_kwDOAAMmUc5sn7oo","user":{"login":"sblaisot","id":2768193,"node_id":"MDQ6VXNlcjI3NjgxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/2768193?v=4","gravatar_id":"","url":"https://api.github.com/users/sblaisot","html_url":"https://github.com/sblaisot","followers_url":"https://api.github.com/users/sblaisot/followers","following_url":"https://api.github.com/users/sblaisot/following{/other_user}","gists_url":"https://api.github.com/users/sblaisot/gists{/gist_id}","starred_url":"https://api.github.com/users/sblaisot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sblaisot/subscriptions","organizations_url":"https://api.github.com/users/sblaisot/orgs","repos_url":"https://api.github.com/users/sblaisot/repos","events_url":"https://api.github.com/users/sblaisot/events{/privacy}","received_events_url":"https://api.github.com/users/sblaisot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T09:32:32Z","updated_at":"2023-11-22T09:32:51Z","author_association":"CONTRIBUTOR","body":"Thanks for your response @nickva \r\n\r\nFinding the conflicted DB seems like a hard task in a million-db cluster with a medium db creation/deletion rate.\r\n\r\nMaybe you have some hints on how to find them?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1822407208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1822430083","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1822430083","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1822430083,"node_id":"IC_kwDOAAMmUc5soBOD","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T09:47:06Z","updated_at":"2023-11-22T09:47:06Z","author_association":"MEMBER","body":"in a remote shell to any node in the cluster run: `custodian:report().` and you'll get a list of database names with their conflicted shard count.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1822430083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1823024836","html_url":"https://github.com/apache/couchdb/issues/4868#issuecomment-1823024836","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4868","id":1823024836,"node_id":"IC_kwDOAAMmUc5sqSbE","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T15:49:34Z","updated_at":"2023-11-22T15:49:34Z","author_association":"CONTRIBUTOR","body":"Thank you for your bug report. \r\n\r\nThe stack trace `{couch_db,incref,[undefined],[{file,\"src/couch_db.erl\"},{line,190}]},{couch_server,open_int,2,[{file,\"src/couch_server.erl\"},{line,106}]}` indicates this might be this issue https://github.com/apache/couchdb/pull/4199 which was fixed in 3.3.0. Would you be able to upgrade to 3.3.2 and see if it happens there as well?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1823024836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1823393245","html_url":"https://github.com/apache/couchdb/issues/4868#issuecomment-1823393245","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4868","id":1823393245,"node_id":"IC_kwDOAAMmUc5srsXd","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T19:30:21Z","updated_at":"2023-11-22T19:30:21Z","author_association":"NONE","body":"For us version updates may take a long time, maybe one month.\r\nSo I will close this issue, and then update the CouchDB version.\r\nIf the issue happens again, then open a new ticket with logs from 3.3.2 version.\r\n\r\nIf the issue does not happen, then after 3-4 mouth will provide feedback in this ticket.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1823393245/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1826215299","html_url":"https://github.com/apache/couchdb/issues/4870#issuecomment-1826215299","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4870","id":1826215299,"node_id":"IC_kwDOAAMmUc5s2dWD","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T04:54:07Z","updated_at":"2023-11-25T07:06:50Z","author_association":"CONTRIBUTOR","body":"Thanks for your report @jcoglan!\r\n\r\nI think in this case the first step might be to show that it's still happening in the latest release. 2.3.1 is a few years old (4?) and we've had a number of fixes in the ibrowse / replicator since then.\r\n\r\nSo perhaps try to set up a mirrored test cluster with the same data, access patterns, and settings, but with 3.3.2. Or, construct a reproducer script to generate a similar scenario synthetically. See if in the original environment tweaking timeouts, worker processes, batch sizes or other settings makes the problem more pronounced,  and crank those up in the test script, to make it more likely for the problem to show up. For instance, say shortening fabric request timeouts to 10 sec, makes the issue more likely to happen, then shorten it to 1 sec in the reproducer script.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1826215299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827641819","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1827641819","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1827641819,"node_id":"IC_kwDOAAMmUc5s75nb","user":{"login":"nono","id":2767,"node_id":"MDQ6VXNlcjI3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2767?v=4","gravatar_id":"","url":"https://api.github.com/users/nono","html_url":"https://github.com/nono","followers_url":"https://api.github.com/users/nono/followers","following_url":"https://api.github.com/users/nono/following{/other_user}","gists_url":"https://api.github.com/users/nono/gists{/gist_id}","starred_url":"https://api.github.com/users/nono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nono/subscriptions","organizations_url":"https://api.github.com/users/nono/orgs","repos_url":"https://api.github.com/users/nono/repos","events_url":"https://api.github.com/users/nono/events{/privacy}","received_events_url":"https://api.github.com/users/nono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T11:22:12Z","updated_at":"2023-11-27T11:22:12Z","author_association":"NONE","body":"We have used https://docs.couchdb.org/en/stable/replication/conflicts.html#finding-conflicted-documents-with-mango to find the conflicted databases. One interesting things is that we have conflicts for `_replicator` and `_users`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827641819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827671331","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1827671331","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1827671331,"node_id":"IC_kwDOAAMmUc5s8A0j","user":{"login":"nono","id":2767,"node_id":"MDQ6VXNlcjI3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2767?v=4","gravatar_id":"","url":"https://api.github.com/users/nono","html_url":"https://github.com/nono","followers_url":"https://api.github.com/users/nono/followers","following_url":"https://api.github.com/users/nono/following{/other_user}","gists_url":"https://api.github.com/users/nono/gists{/gist_id}","starred_url":"https://api.github.com/users/nono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nono/subscriptions","organizations_url":"https://api.github.com/users/nono/orgs","repos_url":"https://api.github.com/users/nono/repos","events_url":"https://api.github.com/users/nono/events{/privacy}","received_events_url":"https://api.github.com/users/nono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T11:43:15Z","updated_at":"2023-11-27T11:43:15Z","author_association":"NONE","body":"> To mitigate or stop the issue you can find the conflicted dbs and delete the conflicted revision. So if 2-abc... and 2-def are conflicted and 2-def is the actively used shard map, you can delete 2-abc by getting its rev and then issue a delete with rev = 2-abc\r\n\r\nHow can we do that?\r\n\r\n`_dbs` is not a normal database and most requests fail with `{\"error\":\"not_found\",\"reason\":\"Database does not exist.\"}`. For example, `curl -s \"$COUCH_URL/_dbs/_replicator?meta=true&open_revs=all\"`. Idem for `_bulk_docs`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827671331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827702436","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1827702436","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1827702436,"node_id":"IC_kwDOAAMmUc5s8Iak","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T12:03:41Z","updated_at":"2023-11-27T12:03:41Z","author_association":"MEMBER","body":"The \"4 conflicted shards in cluster\" is referring to conflicts within the meta _dbs documents that define where the shards of databases should be, it is not reporting on the conflicted documents within your regular databases.\r\n\r\nthe `custodian:report().` output will tell you which, and you can then use the `/_node/_local/_dbs/dbname` endpoint to examine the conflicts and decide which branches to delete and which to keep.\r\n\r\nThese are most likely by concurrent requests to create the same database, which is quite unusual.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827702436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827740972","html_url":"https://github.com/apache/couchdb/issues/4843#issuecomment-1827740972","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4843","id":1827740972,"node_id":"IC_kwDOAAMmUc5s8R0s","user":{"login":"nicknaychov","id":1932847,"node_id":"MDQ6VXNlcjE5MzI4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1932847?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknaychov","html_url":"https://github.com/nicknaychov","followers_url":"https://api.github.com/users/nicknaychov/followers","following_url":"https://api.github.com/users/nicknaychov/following{/other_user}","gists_url":"https://api.github.com/users/nicknaychov/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknaychov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknaychov/subscriptions","organizations_url":"https://api.github.com/users/nicknaychov/orgs","repos_url":"https://api.github.com/users/nicknaychov/repos","events_url":"https://api.github.com/users/nicknaychov/events{/privacy}","received_events_url":"https://api.github.com/users/nicknaychov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T12:27:09Z","updated_at":"2023-11-27T12:27:09Z","author_association":"NONE","body":"Hi\r\nI am doing \"systemctl stop couchdb\" on CentOS Linux release 7.9.2009 (Core)\r\nThank you for the explanation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827740972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827744720","html_url":"https://github.com/apache/couchdb/issues/4849#issuecomment-1827744720","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4849","id":1827744720,"node_id":"IC_kwDOAAMmUc5s8SvQ","user":{"login":"nono","id":2767,"node_id":"MDQ6VXNlcjI3Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2767?v=4","gravatar_id":"","url":"https://api.github.com/users/nono","html_url":"https://github.com/nono","followers_url":"https://api.github.com/users/nono/followers","following_url":"https://api.github.com/users/nono/following{/other_user}","gists_url":"https://api.github.com/users/nono/gists{/gist_id}","starred_url":"https://api.github.com/users/nono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nono/subscriptions","organizations_url":"https://api.github.com/users/nono/orgs","repos_url":"https://api.github.com/users/nono/repos","events_url":"https://api.github.com/users/nono/events{/privacy}","received_events_url":"https://api.github.com/users/nono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T12:29:50Z","updated_at":"2023-11-27T12:29:50Z","author_association":"NONE","body":"> The \"4 conflicted shards in cluster\" is referring to conflicts within the meta _dbs documents that define where the shards of databases should be, it is not reporting on the conflicted documents within your regular databases.\r\n\r\nYes, but `curl -v -X POST $COUCH_URL/_dbs/_find -d '{\"selector\": {\"_conflicts\": { \"$exists\": true}}, \"conflicts\": true}' -H \"Content-Type: application/json\"` has found the 4 conflicted meta documents.\r\n\r\n> you can then use the /_node/_local/_dbs/dbname endpoint to examine the conflicts and decide which branches to delete and which to keep.\r\n\r\nThanks, by using `/_node/_local/_dbs/:dbname` instead of just `/_dbs/:dbname`, it works! And same for `_bulk_docs`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827744720/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827864176","html_url":"https://github.com/apache/couchdb/issues/4825#issuecomment-1827864176","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4825","id":1827864176,"node_id":"IC_kwDOAAMmUc5s8v5w","user":{"login":"githubowl","id":14837590,"node_id":"MDQ6VXNlcjE0ODM3NTkw","avatar_url":"https://avatars.githubusercontent.com/u/14837590?v=4","gravatar_id":"","url":"https://api.github.com/users/githubowl","html_url":"https://github.com/githubowl","followers_url":"https://api.github.com/users/githubowl/followers","following_url":"https://api.github.com/users/githubowl/following{/other_user}","gists_url":"https://api.github.com/users/githubowl/gists{/gist_id}","starred_url":"https://api.github.com/users/githubowl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/githubowl/subscriptions","organizations_url":"https://api.github.com/users/githubowl/orgs","repos_url":"https://api.github.com/users/githubowl/repos","events_url":"https://api.github.com/users/githubowl/events{/privacy}","received_events_url":"https://api.github.com/users/githubowl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T13:46:12Z","updated_at":"2023-11-27T13:46:12Z","author_association":"NONE","body":"Hello,\r\n\r\nCan you tell me what we do about this please? I have tried to update from Ubuntu 22.10 to 23.04 and my couchdb now fails because of this. Spidermonkey is not in 23.04. I can no longer build couchdb because it says Spidermonkey does not exist?\r\n\r\nThanks a lo for any help","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1827864176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828462789","html_url":"https://github.com/apache/couchdb/pull/4872#issuecomment-1828462789","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4872","id":1828462789,"node_id":"IC_kwDOAAMmUc5s_CDF","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T19:15:11Z","updated_at":"2023-11-27T19:16:25Z","author_association":"MEMBER","body":"If it's a useful reference, [couchdb-helm](https://github.com/apache/couchdb-helm) uses GH actions to test/publish. It attempts to follow the ASF guidance at https://cwiki.apache.org/confluence/display/BUILDS/GitHub+Actions+status which requires any external actions to be included via Git submodules. I expect we need to do that for the `gradle` action here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828462789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828494055","html_url":"https://github.com/apache/couchdb/pull/4875#issuecomment-1828494055","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4875","id":1828494055,"node_id":"IC_kwDOAAMmUc5s_Jrn","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T19:44:33Z","updated_at":"2023-11-27T19:44:33Z","author_association":"CONTRIBUTOR","body":"Is the backwards compatible?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828494055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828498554","html_url":"https://github.com/apache/couchdb/pull/4875#issuecomment-1828498554","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4875","id":1828498554,"node_id":"IC_kwDOAAMmUc5s_Kx6","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T19:50:46Z","updated_at":"2023-11-27T19:50:46Z","author_association":"CONTRIBUTOR","body":"@big-r81 it should be safe as long we're not dealing with any escape sequences https://docs.python.org/3/reference/lexical_analysis.html#escape-sequences\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828498554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828499834","html_url":"https://github.com/apache/couchdb/pull/4875#issuecomment-1828499834","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4875","id":1828499834,"node_id":"IC_kwDOAAMmUc5s_LF6","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T19:52:40Z","updated_at":"2023-11-27T19:52:40Z","author_association":"CONTRIBUTOR","body":"> Is the backwards compatible?\r\n\r\nI tested it successfully with `3.9.13`, but don't have a version older than that handy.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828499834/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828503140","html_url":"https://github.com/apache/couchdb/pull/4872#issuecomment-1828503140","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4872","id":1828503140,"node_id":"IC_kwDOAAMmUc5s_L5k","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T19:57:30Z","updated_at":"2023-11-27T19:57:30Z","author_association":"MEMBER","body":"hm, ouch. will try some other time. not important.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828503140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828503375","html_url":"https://github.com/apache/couchdb/issues/4825#issuecomment-1828503375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4825","id":1828503375,"node_id":"IC_kwDOAAMmUc5s_L9P","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T19:57:50Z","updated_at":"2023-11-27T19:57:50Z","author_association":"CONTRIBUTOR","body":"[There seems to be](https://packages.ubuntu.com/lunar/libmozjs-78-0) a `libmozjs-78-0` package still for Ubuntu 23.04 and SpiderMonkey 78 is supported by CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828503375/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828517929","html_url":"https://github.com/apache/couchdb/issues/4825#issuecomment-1828517929","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4825","id":1828517929,"node_id":"IC_kwDOAAMmUc5s_Pgp","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T20:16:21Z","updated_at":"2023-11-29T13:04:09Z","author_association":"CONTRIBUTOR","body":"We usually support only Ubuntu LTS releases, the last one being Jammy (22.04.3).\r\n\r\nSome OSes like RHEL had stopped including Spidermonkey in their base packages but as @pgj found (thanks!) newer Ubuntu still provides version 78. So you may have some luck building and running CouchDB on it. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1828517929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830071927","html_url":"https://github.com/apache/couchdb/issues/4866#issuecomment-1830071927","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4866","id":1830071927,"node_id":"IC_kwDOAAMmUc5tFK53","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T15:26:23Z","updated_at":"2023-11-28T15:26:23Z","author_association":"CONTRIBUTOR","body":"This is complete","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830071927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830195737","html_url":"https://github.com/apache/couchdb/pull/4879#issuecomment-1830195737","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4879","id":1830195737,"node_id":"IC_kwDOAAMmUc5tFpIZ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T16:15:26Z","updated_at":"2023-11-28T16:15:26Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews! I also reversed the list to fit with our usual pattern of release notes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830195737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830331846","html_url":"https://github.com/apache/couchdb/pull/4813#issuecomment-1830331846","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4813","id":1830331846,"node_id":"IC_kwDOAAMmUc5tGKXG","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T17:17:44Z","updated_at":"2023-11-28T17:17:44Z","author_association":"CONTRIBUTOR","body":"> bit concerned about some unrelated changes (the is_sensitive commit particularly) but they all seem fine. suggest updating the PR text/title to clarify this does more than currently stated, to help us in the future.\r\n\r\nThere are actually many \"unrelated\" changes to clean up the code, and generally make it easier to understand. The handling of sensitive values in particular took up a lot of room, and IMO obscured the core logic. I did make sure that all those changes are covered by tests.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830331846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830429118","html_url":"https://github.com/apache/couchdb/pull/4853#issuecomment-1830429118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4853","id":1830429118,"node_id":"IC_kwDOAAMmUc5tGiG-","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T18:19:45Z","updated_at":"2023-11-28T18:19:45Z","author_association":"MEMBER","body":"It would be great to explain why this was removed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830429118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830634855","html_url":"https://github.com/apache/couchdb/pull/4853#issuecomment-1830634855","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4853","id":1830634855,"node_id":"IC_kwDOAAMmUc5tHUVn","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T20:03:11Z","updated_at":"2023-11-28T20:03:11Z","author_association":"CONTRIBUTOR","body":"@janl sorry, good call that it should be explained better.\r\n\r\n`vsn` attribute allows tagging modules with a custom version numbers. When omitted, the hash of the module contents becomes its `version`. The `vsn` argument is useful when performing hot code release upgrade. It helps keep track of gen_server states to allow custom upgrade / downgrade clauses.\r\n\r\nWe do not support hot code release upgrades (Cloudant did once) so these custom tags are outdated and just noise at this point, that's why it made sense to clean them up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1830634855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831334943","html_url":"https://github.com/apache/couchdb/issues/4825#issuecomment-1831334943","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4825","id":1831334943,"node_id":"IC_kwDOAAMmUc5tJ_Qf","user":{"login":"githubowl","id":14837590,"node_id":"MDQ6VXNlcjE0ODM3NTkw","avatar_url":"https://avatars.githubusercontent.com/u/14837590?v=4","gravatar_id":"","url":"https://api.github.com/users/githubowl","html_url":"https://github.com/githubowl","followers_url":"https://api.github.com/users/githubowl/followers","following_url":"https://api.github.com/users/githubowl/following{/other_user}","gists_url":"https://api.github.com/users/githubowl/gists{/gist_id}","starred_url":"https://api.github.com/users/githubowl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/githubowl/subscriptions","organizations_url":"https://api.github.com/users/githubowl/orgs","repos_url":"https://api.github.com/users/githubowl/repos","events_url":"https://api.github.com/users/githubowl/events{/privacy}","received_events_url":"https://api.github.com/users/githubowl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T07:12:18Z","updated_at":"2023-11-29T07:12:18Z","author_association":"NONE","body":"Ok, I'll have to check thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831334943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831530434","html_url":"https://github.com/apache/couchdb/issues/4882#issuecomment-1831530434","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4882","id":1831530434,"node_id":"IC_kwDOAAMmUc5tKu_C","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T09:30:39Z","updated_at":"2023-11-29T09:30:39Z","author_association":"MEMBER","body":"Never heard of it. it's not part of couchdb.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831530434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831665573","html_url":"https://github.com/apache/couchdb/issues/4882#issuecomment-1831665573","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4882","id":1831665573,"node_id":"IC_kwDOAAMmUc5tLP-l","user":{"login":"fr2lancer","id":6251051,"node_id":"MDQ6VXNlcjYyNTEwNTE=","avatar_url":"https://avatars.githubusercontent.com/u/6251051?v=4","gravatar_id":"","url":"https://api.github.com/users/fr2lancer","html_url":"https://github.com/fr2lancer","followers_url":"https://api.github.com/users/fr2lancer/followers","following_url":"https://api.github.com/users/fr2lancer/following{/other_user}","gists_url":"https://api.github.com/users/fr2lancer/gists{/gist_id}","starred_url":"https://api.github.com/users/fr2lancer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fr2lancer/subscriptions","organizations_url":"https://api.github.com/users/fr2lancer/orgs","repos_url":"https://api.github.com/users/fr2lancer/repos","events_url":"https://api.github.com/users/fr2lancer/events{/privacy}","received_events_url":"https://api.github.com/users/fr2lancer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T10:55:03Z","updated_at":"2023-11-29T10:55:03Z","author_association":"NONE","body":"thanks for the reply. \r\n\r\njust I want to include this by googling it\r\n\r\nhttps://lists.apache.org/api/plain?thread=dgfs5jyjt2v7zrqh4ctcg1o3pottw66h\r\n\r\nthere is 'old' source code which uses that rest api.\r\nif it is not gonna used by any logic, I can happily delete it.\r\n\r\notherwise we need to consider about this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831665573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831773045","html_url":"https://github.com/apache/couchdb/issues/1532#issuecomment-1831773045","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1532","id":1831773045,"node_id":"IC_kwDOAAMmUc5tLqN1","user":{"login":"ngspinu","id":35466661,"node_id":"MDQ6VXNlcjM1NDY2NjYx","avatar_url":"https://avatars.githubusercontent.com/u/35466661?v=4","gravatar_id":"","url":"https://api.github.com/users/ngspinu","html_url":"https://github.com/ngspinu","followers_url":"https://api.github.com/users/ngspinu/followers","following_url":"https://api.github.com/users/ngspinu/following{/other_user}","gists_url":"https://api.github.com/users/ngspinu/gists{/gist_id}","starred_url":"https://api.github.com/users/ngspinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngspinu/subscriptions","organizations_url":"https://api.github.com/users/ngspinu/orgs","repos_url":"https://api.github.com/users/ngspinu/repos","events_url":"https://api.github.com/users/ngspinu/events{/privacy}","received_events_url":"https://api.github.com/users/ngspinu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T12:08:09Z","updated_at":"2023-11-29T12:08:09Z","author_association":"NONE","body":"https://github.com/cliffano/couchtato - we use this to iterate through all the docs. But, definitely, a built in solution would be highly appreciated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831773045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831864367","html_url":"https://github.com/apache/couchdb/pull/4871#issuecomment-1831864367","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4871","id":1831864367,"node_id":"IC_kwDOAAMmUc5tMAgv","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T13:07:24Z","updated_at":"2023-11-29T13:07:24Z","author_association":"CONTRIBUTOR","body":"> I created a `~/repos/clouseau/log4j.properties` based on the one that the `configure` script creates, and this time it worked!\r\n\r\n@jaydoane did you feel it inconvenient that you had to create those files yourself?  I am asking because I have been pondering about having the `clouseau.ini` and `log4j.properties` files automatically created by `./dev/run` when they are missing.  My motivation is that users should not peek into the sources to figure out what kind of files are needed.  But provide them with sane defaults that they can tune further.  I am a bit unsure though if that is over-engineering here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831864367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831899208","html_url":"https://github.com/apache/couchdb/issues/4882#issuecomment-1831899208","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4882","id":1831899208,"node_id":"IC_kwDOAAMmUc5tMJBI","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T13:29:18Z","updated_at":"2023-11-29T13:29:18Z","author_association":"MEMBER","body":"Aha, thanks, that helps. I can confirm it was removed;\r\n\r\n```\r\ncommit 102bcf4e07de54616fc44529792db58f482d736b\r\nAuthor: Jan Lehnardt <jan@apache.org>\r\nDate:   Wed Jan 8 01:01:42 2020 +0100\r\n\r\n    feat: remove couchup (#2399)\r\n\r\n    Co-authored-by: Joan Touzet <wohali@users.noreply.github.com>\r\n```\r\n\r\nso it is safe to delete that design document now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1831899208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832198382","html_url":"https://github.com/apache/couchdb/pull/4880#issuecomment-1832198382","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4880","id":1832198382,"node_id":"IC_kwDOAAMmUc5tNSDu","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T16:02:17Z","updated_at":"2023-11-29T16:02:17Z","author_association":"MEMBER","body":"closing as this work will be done in couchdb-pkg instead.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832198382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832361201","html_url":"https://github.com/apache/couchdb/pull/4871#issuecomment-1832361201","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4871","id":1832361201,"node_id":"IC_kwDOAAMmUc5tN5zx","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T17:13:05Z","updated_at":"2023-11-29T17:13:05Z","author_association":"CONTRIBUTOR","body":"> > I created a `~/repos/clouseau/log4j.properties` based on the one that the `configure` script creates, and this time it worked!\r\n> \r\n> @jaydoane did you feel it inconvenient that you had to create those files yourself? I am asking because I have been pondering about having the `clouseau.ini` and `log4j.properties` files automatically created by `./dev/run` when they are missing. My motivation is that users should not peek into the sources to figure out what kind of files are needed. But provide them with sane defaults that they can tune further. I am a bit unsure though if that is over-engineering here.\r\n\r\nIt was moderately inconvenient, _but_ the error messages were clear enough to make progress. I don't think it's necessarily over-engineering to generate those files, however. Maybe output some text that they are being generated if they are missing?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832361201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832374174","html_url":"https://github.com/apache/couchdb/pull/4871#issuecomment-1832374174","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4871","id":1832374174,"node_id":"IC_kwDOAAMmUc5tN8-e","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T17:19:33Z","updated_at":"2023-11-29T17:19:33Z","author_association":"CONTRIBUTOR","body":"> the error messages were clear enough to make progress\r\n\r\nIn my experience, the format of these files could be tricky to get right without some external help therefore it might be a nuisance for the first-time user.\r\n\r\n> I don't think it's necessarily over-engineering to generate those files, however. Maybe output some text that they are being generated if they are missing?\r\n\r\nYes, that is a good idea.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832374174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832380272","html_url":"https://github.com/apache/couchdb/issues/4213#issuecomment-1832380272","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4213","id":1832380272,"node_id":"IC_kwDOAAMmUc5tN-dw","user":{"login":"dragos-constantin-stoica","id":3727922,"node_id":"MDQ6VXNlcjM3Mjc5MjI=","avatar_url":"https://avatars.githubusercontent.com/u/3727922?v=4","gravatar_id":"","url":"https://api.github.com/users/dragos-constantin-stoica","html_url":"https://github.com/dragos-constantin-stoica","followers_url":"https://api.github.com/users/dragos-constantin-stoica/followers","following_url":"https://api.github.com/users/dragos-constantin-stoica/following{/other_user}","gists_url":"https://api.github.com/users/dragos-constantin-stoica/gists{/gist_id}","starred_url":"https://api.github.com/users/dragos-constantin-stoica/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dragos-constantin-stoica/subscriptions","organizations_url":"https://api.github.com/users/dragos-constantin-stoica/orgs","repos_url":"https://api.github.com/users/dragos-constantin-stoica/repos","events_url":"https://api.github.com/users/dragos-constantin-stoica/events{/privacy}","received_events_url":"https://api.github.com/users/dragos-constantin-stoica/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T17:23:29Z","updated_at":"2023-11-29T17:23:29Z","author_association":"NONE","body":"@RafaelFigueiredo can you post the link to the project where you have the swagger for CouchDB API? I am trying to do the same thing: swagger documentation for CouchDB API and I am more then happy to contribute if you have something ongoing. Otherwise, I will start a new project to document:\n- swagger CouchDB API\n- JSON schema for JSON objects (requests and responses)\n\nThere is a Postman collection here: https://www.postman.com/galactic-comet-36406/workspace/couchdb/collection/15985155-f511300e-848e-4ab2-a0a2-da13cb2e1065","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1832380272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]