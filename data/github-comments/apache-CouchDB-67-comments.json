[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467136415","html_url":"https://github.com/apache/couchdb/pull/1940#issuecomment-467136415","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1940","id":467136415,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzEzNjQxNQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T18:59:51Z","updated_at":"2019-02-25T18:59:51Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467136415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467142928","html_url":"https://github.com/apache/couchdb/pull/1934#issuecomment-467142928","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1934","id":467142928,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzE0MjkyOA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T19:15:36Z","updated_at":"2019-02-25T19:15:36Z","author_association":"MEMBER","body":"will reopen against force-pushed one","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467142928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467152354","html_url":"https://github.com/apache/couchdb/issues/1810#issuecomment-467152354","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1810","id":467152354,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzE1MjM1NA==","user":{"login":"arnediekmann","id":42675403,"node_id":"MDQ6VXNlcjQyNjc1NDAz","avatar_url":"https://avatars.githubusercontent.com/u/42675403?v=4","gravatar_id":"","url":"https://api.github.com/users/arnediekmann","html_url":"https://github.com/arnediekmann","followers_url":"https://api.github.com/users/arnediekmann/followers","following_url":"https://api.github.com/users/arnediekmann/following{/other_user}","gists_url":"https://api.github.com/users/arnediekmann/gists{/gist_id}","starred_url":"https://api.github.com/users/arnediekmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arnediekmann/subscriptions","organizations_url":"https://api.github.com/users/arnediekmann/orgs","repos_url":"https://api.github.com/users/arnediekmann/repos","events_url":"https://api.github.com/users/arnediekmann/events{/privacy}","received_events_url":"https://api.github.com/users/arnediekmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-25T19:38:15Z","updated_at":"2019-02-25T19:38:15Z","author_association":"NONE","body":"@wohali Awesome! For now we implemented a workaround. Thanks for the prompt reply and keep up the good work! ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467152354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467397197","html_url":"https://github.com/apache/couchdb/pull/1940#issuecomment-467397197","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1940","id":467397197,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzM5NzE5Nw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T11:07:49Z","updated_at":"2019-02-26T11:07:49Z","author_association":"CONTRIBUTOR","body":"I think this one is no longer needed (see https://github.com/apache/couchdb/pull/1941). ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467397197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467564606","html_url":"https://github.com/apache/couchdb/pull/1944#issuecomment-467564606","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1944","id":467564606,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzU2NDYwNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T18:52:13Z","updated_at":"2019-02-26T18:52:13Z","author_association":"MEMBER","body":"Interesting, will look at this in more detail later","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467564606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467726058","html_url":"https://github.com/apache/couchdb/issues/1945#issuecomment-467726058","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1945","id":467726058,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzcyNjA1OA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T05:07:34Z","updated_at":"2019-02-27T05:07:34Z","author_association":"CONTRIBUTOR","body":"Looks that you are using OTP 18. Please use 19 or later.\r\n\r\nFor details, please see https://github.com/apache/couchdb/pull/1833","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467726058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467732921","html_url":"https://github.com/apache/couchdb/issues/1945#issuecomment-467732921","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1945","id":467732921,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzczMjkyMQ==","user":{"login":"shinningball","id":28528909,"node_id":"MDQ6VXNlcjI4NTI4OTA5","avatar_url":"https://avatars.githubusercontent.com/u/28528909?v=4","gravatar_id":"","url":"https://api.github.com/users/shinningball","html_url":"https://github.com/shinningball","followers_url":"https://api.github.com/users/shinningball/followers","following_url":"https://api.github.com/users/shinningball/following{/other_user}","gists_url":"https://api.github.com/users/shinningball/gists{/gist_id}","starred_url":"https://api.github.com/users/shinningball/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shinningball/subscriptions","organizations_url":"https://api.github.com/users/shinningball/orgs","repos_url":"https://api.github.com/users/shinningball/repos","events_url":"https://api.github.com/users/shinningball/events{/privacy}","received_events_url":"https://api.github.com/users/shinningball/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T05:47:33Z","updated_at":"2019-02-27T05:47:33Z","author_association":"NONE","body":"@jiangphcn After code comparison, the source code are the same with those modified files, but I still get the error described above. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467732921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467735433","html_url":"https://github.com/apache/couchdb/issues/1945#issuecomment-467735433","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1945","id":467735433,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzczNTQzMw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T06:00:54Z","updated_at":"2019-02-27T06:00:54Z","author_association":"CONTRIBUTOR","body":"what is your OTP version?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467735433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467751759","html_url":"https://github.com/apache/couchdb/issues/1946#issuecomment-467751759","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1946","id":467751759,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc1MTc1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T07:18:48Z","updated_at":"2019-02-27T07:18:48Z","author_association":"MEMBER","body":"Views must be manually accessed once to trigger view building.\r\n\r\nThis will change with CouchDB 2.4.0 which will include an auto-view-builder called `smoosh`, but it will still take time to build a view.\r\n\r\nIf you join the nodes into a _cluster_, following the documentation, all views will update at once and all databases are internally synchronized. But this is not \"master/slave\" configuration.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467751759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467752233","html_url":"https://github.com/apache/couchdb/issues/1945#issuecomment-467752233","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1945","id":467752233,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc1MjIzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T07:20:36Z","updated_at":"2019-02-27T07:20:36Z","author_association":"MEMBER","body":"CouchDB no longer builds with Erlang 18. You need 19 or later.\r\n\r\nThis line says you are building with Erlang 18:\r\n\r\n```\r\n ERROR: OTP release 18 does not match required regex 19|20|21\r\n```\r\n\r\nYou can install newer versions of Erlang from http://packages.erlang-solutions.com/ or by compiling from source via http://erlang.org/ .\r\n\r\nSorry about that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467752233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467781038","html_url":"https://github.com/apache/couchdb/issues/1929#issuecomment-467781038","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1929","id":467781038,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzc4MTAzOA==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T09:03:30Z","updated_at":"2019-02-27T09:03:30Z","author_association":"NONE","body":"I ran couchdb 2.3.0 on redhat 7. \r\nI downloaded the RPM package and unzip it, execute the binary and also got this error. But I could not access /var/run. I found an option in default.ini there is default value (by official document)\r\n\r\n[couchdb]\r\nuri_file = /var/run/couchdb/couchdb.uri\r\n\r\nI change the value, use another folder to place the file, but I still got the error while running couchdb.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467781038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467816453","html_url":"https://github.com/apache/couchdb/issues/1929#issuecomment-467816453","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1929","id":467816453,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzgxNjQ1Mw==","user":{"login":"ceremcem","id":6639874,"node_id":"MDQ6VXNlcjY2Mzk4NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6639874?v=4","gravatar_id":"","url":"https://api.github.com/users/ceremcem","html_url":"https://github.com/ceremcem","followers_url":"https://api.github.com/users/ceremcem/followers","following_url":"https://api.github.com/users/ceremcem/following{/other_user}","gists_url":"https://api.github.com/users/ceremcem/gists{/gist_id}","starred_url":"https://api.github.com/users/ceremcem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ceremcem/subscriptions","organizations_url":"https://api.github.com/users/ceremcem/orgs","repos_url":"https://api.github.com/users/ceremcem/repos","events_url":"https://api.github.com/users/ceremcem/events{/privacy}","received_events_url":"https://api.github.com/users/ceremcem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T10:51:36Z","updated_at":"2019-02-27T10:51:36Z","author_association":"CONTRIBUTOR","body":"@raoyitao Does this SO answer help you: https://stackoverflow.com/a/18416985/1952991","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467816453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467922376","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-467922376","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":467922376,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzkyMjM3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T16:06:37Z","updated_at":"2019-02-27T16:06:37Z","author_association":"MEMBER","body":"How would you get the cookie in the first place?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467922376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467987119","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-467987119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":467987119,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2Nzk4NzExOQ==","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T18:59:03Z","updated_at":"2019-02-27T18:59:03Z","author_association":"CONTRIBUTOR","body":"> How would you get the cookie in the first place?\r\n\r\nSorry, but I don't know.\r\n\r\nAs I understand, the meaning of `require_valid_user` is to protect all request by default. So you can't access `/`, `_all_dbs`, etc. without Basic-Auth. Why is this not the default behavior for Cookie-Auth? Restrict all access and if you do a POST request to `/_session` with the correct credentials, you will get the cookie and are allowed to access these \"global\" endpoints.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/467987119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468024509","html_url":"https://github.com/apache/couchdb/issues/1948#issuecomment-468024509","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1948","id":468024509,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAyNDUwOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T20:49:17Z","updated_at":"2019-02-27T20:49:17Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)\r\n\r\nSorry, and thanks for being an interested CouchDB user! :D ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468024509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468025224","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-468025224","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":468025224,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAyNTIyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T20:51:26Z","updated_at":"2019-02-27T20:51:26Z","author_association":"MEMBER","body":"Is it correct to summarise your enhancement request as wanting a new mode in which:\r\n\r\n* Access to /_session can be performed with Basic authentication to obtain a cookie, and\r\n* Cookie access is mandatory for all other access\r\n\r\nIs this right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468025224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468026882","html_url":"https://github.com/apache/couchdb/issues/1949#issuecomment-468026882","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1949","id":468026882,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAyNjg4Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T20:55:57Z","updated_at":"2019-02-27T20:55:57Z","author_association":"MEMBER","body":"Agree that the message is ugly, and something should be done about that. Perhaps it should point to:\r\n\r\nhttp://docs.couchdb.org/en/stable/setup/index.html\r\n\r\nand that portion of the documentation enhanced to give a bit more context.\r\n\r\nAs you note we can't resolve the core problem because we don't know on startup if the node is going to be single node, joined to a new cluster, or joined to an existing cluster, all of which would affect the intended message and outcome. Suppressing the error completely after a single warning isn't useful either, since it could be ignored.\r\n\r\n/cc @rnewson @janl any strong feelings on this one?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468026882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468031244","html_url":"https://github.com/apache/couchdb/issues/1949#issuecomment-468031244","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1949","id":468031244,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODAzMTI0NA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T21:08:43Z","updated_at":"2019-02-27T21:08:43Z","author_association":"CONTRIBUTOR","body":"Another possible approach I worked on a while ago is to not start the change listener unless the auth db exists. While it's currently a [WIP](https://github.com/apache/couchdb/pull/1950) I could probably get it in shape pretty quickly if there was a strong enough desire by others to see it land.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468031244/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468044667","html_url":"https://github.com/apache/couchdb/pull/1951#issuecomment-468044667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1951","id":468044667,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODA0NDY2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-27T21:49:58Z","updated_at":"2019-02-27T21:49:58Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468044667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468161245","html_url":"https://github.com/apache/couchdb/issues/1929#issuecomment-468161245","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1929","id":468161245,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODE2MTI0NQ==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T07:02:18Z","updated_at":"2019-02-28T07:02:18Z","author_association":"NONE","body":"@ceremcem  this answer helps, I'm not an unprivileged user so I have to make changes to config files and change directories which CouchDB can writes to. for example, uri_file is no longer placed in /var/run, but I cannot get a full list of them,  I don't know which option specify the log path, or when /var/lib will be accessed, the official document does not include all of them. Unfortunately the page is missing: http://www.pastbedti.me/2009/04/running-couchdb-under-an-unprivileged-user-account/\r\n\r\nBTW how to specify which config file will be used for couchDB? For example, as I decompressed the RPM package, I found ./bin/couchdb under ./opt/couchdb and I guess in this folder ./etc/default.ini and ./etc/local.ini are accessed by couchdb.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468161245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468260007","html_url":"https://github.com/apache/couchdb/pull/1952#issuecomment-468260007","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1952","id":468260007,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODI2MDAwNw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T12:47:26Z","updated_at":"2019-02-28T12:47:26Z","author_association":"CONTRIBUTOR","body":"Should we try adding an automated check into either of the files?:\r\n- .travis.yml\r\n- Jenkinsfile\r\n\r\nSomething which checks the output of the following command to make sure it is either 0 or 2:\r\n```\r\ngit diff --name-only `git merge-base master HEAD` | grep Makefile | wc -l\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468260007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468368738","html_url":"https://github.com/apache/couchdb/issues/1954#issuecomment-468368738","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1954","id":468368738,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODM2ODczOA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T17:46:56Z","updated_at":"2019-02-28T17:46:56Z","author_association":"MEMBER","body":"Hi @bcyinc there's no web hook or push notification, but there are endpoints you can poll. See http://docs.couchdb.org/en/stable/replication/intro.html#triggering-stopping-and-monitoring-replications","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468368738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468370111","html_url":"https://github.com/apache/couchdb/issues/1929#issuecomment-468370111","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1929","id":468370111,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODM3MDExMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T17:50:36Z","updated_at":"2019-02-28T17:50:36Z","author_association":"MEMBER","body":"@raoyitao Our documentation is pretty comprehensive on this stuff:\r\n\r\nhttp://docs.couchdb.org/en/latest/config/intro.html\r\n\r\n@ceremcem THe error is indeed in what CouchDB is saying:\r\n\r\n`{{badmatch,{error,eacces}}` is in your error output. That's a UNIX error, EACCESS, which means a permission problem.\r\n\r\nThis is also in our documentation:\r\n\r\nhttps://docs.couchdb.org/en/latest/install/troubleshooting.html?highlight=eacces","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468370111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468420119","html_url":"https://github.com/apache/couchdb/pull/1952#issuecomment-468420119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1952","id":468420119,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQyMDExOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T20:11:31Z","updated_at":"2019-02-28T20:11:31Z","author_association":"MEMBER","body":"@iilyak hard to do since we don't know the target branch will always be `master`. but, a decent idea.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468420119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468444548","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-468444548","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":468444548,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQ0NDU0OA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T21:25:53Z","updated_at":"2019-02-28T21:25:53Z","author_association":"MEMBER","body":"If one were inclined to save a byte it would be easy to combine `NotDeleted` and `RevFormat` into a single byte that still sorts optimally.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468444548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468465597","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-468465597","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":468465597,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQ2NTU5Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T22:31:45Z","updated_at":"2019-02-28T22:31:45Z","author_association":"MEMBER","body":"a) I love it. b) do we really need to let revs limit go above 1000? In fact, should we allow this to be edited at all?\r\n\r\nI note that we didn't finish the RFC thread but the last comment was to add a \"security considerations\" section, so if you would add that it's appreciated. I suspect it will be short.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468465597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468468610","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-468468610","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":468468610,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODQ2ODYxMA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-28T22:42:02Z","updated_at":"2019-02-28T22:42:02Z","author_association":"MEMBER","body":"Thanks! I added the Security Considerations section, and tweaked the Advantages section to replace a redundant description of the write path behavior with a description of the read path.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468468610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468536573","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-468536573","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":468536573,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODUzNjU3Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T04:16:46Z","updated_at":"2019-03-01T04:16:46Z","author_association":"MEMBER","body":"Sorry about that - the RFC PR is going to be merged shortly: https://github.com/apache/couchdb/pull/1914","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468536573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468624138","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-468624138","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":468624138,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODYyNDEzOA==","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T10:46:04Z","updated_at":"2019-03-01T10:49:49Z","author_association":"CONTRIBUTOR","body":"No, not really.\r\n\r\n- `required_valid_user=true` to protect all endpoints\r\n- don't need a basic auth for the first request. Start with the first request against `/_session` (with cookie auth) to obtain the cookie and then access all allowed endpoints.\r\n\r\nIs that understandable what I mean?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468624138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468644825","html_url":"https://github.com/apache/couchdb/pull/1952#issuecomment-468644825","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1952","id":468644825,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODY0NDgyNQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T12:08:55Z","updated_at":"2019-03-01T12:08:55Z","author_association":"CONTRIBUTOR","body":"> @iilyak hard to do since we don't know the target branch will always be master. but, a decent idea.\r\n\r\nI think it could be solved by using `TRAVIS_BRANCH` env which would be set to target branch.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468644825/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468793784","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-468793784","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":468793784,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODc5Mzc4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T20:02:58Z","updated_at":"2019-03-01T20:02:58Z","author_association":"MEMBER","body":"No, because you can't get the cookie from `/_session` if you require a cookie to access it in the first place. That's a Catch-22.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468793784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468802517","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-468802517","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":468802517,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODgwMjUxNw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T20:33:56Z","updated_at":"2019-03-01T20:33:56Z","author_association":"MEMBER","body":"@davisp pointed out something quite important in a discussion on IRC that I want to capture here. The `_changes` feed has the property that each document shows up exactly once regardless of the number of edit branches. The current design in the RFC isn’t quite compatible with that requirement, because we’re saying each edit branch can be extended independently without paying attention to the others.\r\n\r\nWe talked about a way to address this, which I’ll leave first in the comment here. We use the fact that a new edit branch can only be created by a `new_edits=false` write, where we anticipate retrieving the entire set of branch KVs. The writer in that case should store `VersionStampForCurrentRev` **only** in the “winning” edit branch and set the other ones to null.\r\n\r\nIf a writer comes in and tries to extend a losing edit branch, it will find the `VersionstampForCurrentRev` to be null and will do an additional edit branch read to retrieve the winning branch. It can then compare both branches to see which one will be the winner following that edit, and can assign `VersionStampForCurrentRev` accordingly.\r\n\r\nA writer attempting to delete the winning branch (i.e., setting `NotDeleted` to 0) will need to read two contiguous KVs, the one for the winner and the one right before it. If the branch before it will be the winner following the deletion then we move the `VersionstampForCurrentRev` to it accordingly. If the tombstones branch remains the winner for this document then we only update that branch.\r\n\r\nA writer extending the winning branch with an updated document (the common case) will proceed as before with no loss in efficiency.\r\n\r\nI’ve tried to think through all possible concurrency issues here but I think that FoundationDB’s transaction isolation model delivers the goods in every case.\r\n\r\nAs far as the data model is concerned, the only change is that the Versionstamp is stored exclusively in the winning edit branch KV at all times, with all other branches having a null byte there instead. Also we should rename the field as it’s really `VersionstampOfLatestEdit`, regardless of whether that corresponds to the revision in the same KV.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468802517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468804555","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-468804555","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":468804555,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODgwNDU1NQ==","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T20:41:23Z","updated_at":"2019-03-01T20:41:23Z","author_association":"CONTRIBUTOR","body":"Ok, maybe i didn't explain it good enough.\r\n\r\nWhat is the actual behavior (`require_valid_user=true`):\r\n\r\n0. All endpoints are protected.\r\n1. (1st request) Send a `POST` request to `/_session` **WITH** an Authorization Header (Basic Auth).\r\n2. You get an Auth-Cookie.\r\n3. For the next requests, send the Auth-Cookie in the request to access the endpoints.\r\n\r\nA desirable behavior (`require_valid_user=true`):\r\n\r\n0. All endpoints are protected.\r\n1. (1st request) Send a `POST` request to `/_session` **WITHOUT** the need of an Authorization Header (Basic Auth).\r\n2. You get an Auth-Cookie.\r\n3. For the next requests, send the Auth-Cookie in the request to access the endpoints.\r\n\r\nIs this technically possible in principle or do I overlook technical details that prevent this behavior?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468804555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468806933","html_url":"https://github.com/apache/couchdb/issues/1947#issuecomment-468806933","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1947","id":468806933,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODgwNjkzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-01T20:50:06Z","updated_at":"2019-03-01T20:50:06Z","author_association":"MEMBER","body":"Got it - this is an enhancement request.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468806933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468916002","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-468916002","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":468916002,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODkxNjAwMg==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T12:25:09Z","updated_at":"2019-03-02T12:25:09Z","author_association":"MEMBER","body":"@garrensmith experiments with this kind of steps can be done only by people with push access to the repo right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468916002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468950128","html_url":"https://github.com/apache/couchdb/issues/1949#issuecomment-468950128","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1949","id":468950128,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODk1MDEyOA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T19:05:06Z","updated_at":"2019-03-02T19:05:06Z","author_association":"CONTRIBUTOR","body":"[Ready for review](https://github.com/apache/couchdb/pull/1950)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468950128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468950668","html_url":"https://github.com/apache/couchdb/pull/1950#issuecomment-468950668","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1950","id":468950668,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2ODk1MDY2OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-02T19:11:35Z","updated_at":"2019-03-02T19:11:35Z","author_association":"MEMBER","body":"@jaydoane One unintended side effect of this is that there is *no* logged warning that the system databases are missing anymore. We should log an error once at least.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/468950668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469075131","html_url":"https://github.com/apache/couchdb/issues/1959#issuecomment-469075131","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1959","id":469075131,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTA3NTEzMQ==","user":{"login":"popojargo","id":9197078,"node_id":"MDQ6VXNlcjkxOTcwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9197078?v=4","gravatar_id":"","url":"https://api.github.com/users/popojargo","html_url":"https://github.com/popojargo","followers_url":"https://api.github.com/users/popojargo/followers","following_url":"https://api.github.com/users/popojargo/following{/other_user}","gists_url":"https://api.github.com/users/popojargo/gists{/gist_id}","starred_url":"https://api.github.com/users/popojargo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/popojargo/subscriptions","organizations_url":"https://api.github.com/users/popojargo/orgs","repos_url":"https://api.github.com/users/popojargo/repos","events_url":"https://api.github.com/users/popojargo/events{/privacy}","received_events_url":"https://api.github.com/users/popojargo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-03T23:07:41Z","updated_at":"2019-03-03T23:07:41Z","author_association":"MEMBER","body":"CouchDB is \"secure by default\" since it's binded to your loopback address. If you change that address and make CouchDB public, you have to and some securities (eg: create an admin?)\r\n\r\nAlso, the *rootbakseven* is not a user created by CouchDB. It must have been created by a bot or crawler.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469075131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469081383","html_url":"https://github.com/apache/couchdb/pull/1961#issuecomment-469081383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1961","id":469081383,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTA4MTM4Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T00:16:34Z","updated_at":"2019-03-04T00:16:34Z","author_association":"MEMBER","body":"Still failing sadly, we're working through it together on IRC asynchronously.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469081383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469141390","html_url":"https://github.com/apache/couchdb/issues/1959#issuecomment-469141390","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1959","id":469141390,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE0MTM5MA==","user":{"login":"i5heu","id":22565269,"node_id":"MDQ6VXNlcjIyNTY1MjY5","avatar_url":"https://avatars.githubusercontent.com/u/22565269?v=4","gravatar_id":"","url":"https://api.github.com/users/i5heu","html_url":"https://github.com/i5heu","followers_url":"https://api.github.com/users/i5heu/followers","following_url":"https://api.github.com/users/i5heu/following{/other_user}","gists_url":"https://api.github.com/users/i5heu/gists{/gist_id}","starred_url":"https://api.github.com/users/i5heu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i5heu/subscriptions","organizations_url":"https://api.github.com/users/i5heu/orgs","repos_url":"https://api.github.com/users/i5heu/repos","events_url":"https://api.github.com/users/i5heu/events{/privacy}","received_events_url":"https://api.github.com/users/i5heu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T07:05:19Z","updated_at":"2019-03-04T07:40:28Z","author_association":"NONE","body":"Okay thank you for the information.\r\n\r\nWhy is the creation of the user not shown in the _users or in _global_chages?\r\n\r\n\r\nsecurity Docs: https://docs.couchdb.org/en/master/intro/security.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469141390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469154377","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-469154377","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":469154377,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE1NDM3Nw==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T08:01:35Z","updated_at":"2019-03-04T08:01:35Z","author_association":"NONE","body":"Start couchdb with the following strace command, then I got continuous output.\r\n----------------------------------------------------------\r\n$ strace -f -e open ./bin/couchdb 2>&1 | grep RDWR\r\n\r\n[pid 13110] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13111] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13110] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13111] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13114] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13115] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13114] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n[pid 13115] open(\"/dev/tty\", O_RDWR|O_NONBLOCK) = -1 ENXIO (No such device or address)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469154377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469160273","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-469160273","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":469160273,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE2MDI3Mw==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T08:23:30Z","updated_at":"2019-03-04T08:23:30Z","author_association":"MEMBER","body":"@dottorblaster ah that is frustrating. I think then rather work on converting the across js tests and then I can run them on jenkins and look for flaky tests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469160273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469161944","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-469161944","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":469161944,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE2MTk0NA==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T08:29:27Z","updated_at":"2019-03-04T08:29:27Z","author_association":"MEMBER","body":"@garrensmith copy that 👍 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469161944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469190664","html_url":"https://github.com/apache/couchdb/pull/1958#issuecomment-469190664","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1958","id":469190664,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE5MDY2NA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T09:57:57Z","updated_at":"2019-03-04T09:57:57Z","author_association":"MEMBER","body":"```\r\nThe following files were not formatted:\r\n\r\n  * test/multiple_rows_test.exs\r\n```\r\nCan you run mix format that is causing issues.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469190664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469192033","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-469192033","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":469192033,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE5MjAzMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T10:01:41Z","updated_at":"2019-03-04T10:01:41Z","author_association":"MEMBER","body":"this is an installation issue, your CouchDB installation can’t find or start the couchjs process, reasons for not being able to start it can be many, including bindings to libmozjs.\r\n\r\nstart by checking the path of the javascript view server and whether it points to the right place.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469192033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469192432","html_url":"https://github.com/apache/couchdb/issues/1959#issuecomment-469192432","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1959","id":469192432,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE5MjQzMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T10:02:49Z","updated_at":"2019-03-04T10:02:49Z","author_association":"MEMBER","body":"_global_changes only includes the list of databases sorted by the last time they were updated. New users are not recorded there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469192432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469196979","html_url":"https://github.com/apache/couchdb/pull/1950#issuecomment-469196979","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1950","id":469196979,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTE5Njk3OQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T10:15:35Z","updated_at":"2019-03-04T10:15:35Z","author_association":"MEMBER","body":"+1 for at least one log","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469196979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469214009","html_url":"https://github.com/apache/couchdb/pull/1958#issuecomment-469214009","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1958","id":469214009,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTIxNDAwOQ==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T11:09:20Z","updated_at":"2019-03-04T11:09:20Z","author_association":"MEMBER","body":"@garrensmith \r\n\r\n```\r\n﻿λ Alessio-Biancalana elixir → λ git port-multiple-rows-test-to-elixir → mix format --check-formatted\r\nλ Alessio-Biancalana elixir → λ git port-multiple-rows-test-to-elixir → git status\r\nSul branch port-multiple-rows-test-to-elixir\r\nYour branch is up to date with 'origin/port-multiple-rows-test-to-elixir'.\r\n\r\nnothing to commit, working tree clean\r\nλ Alessio-Biancalana elixir → λ git port-multiple-rows-test-to-elixir →\r\n```\r\n\r\nApparently mix format is not working on my end, I'll give updates once I figure that out.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469214009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469216266","html_url":"https://github.com/apache/couchdb/issues/1959#issuecomment-469216266","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1959","id":469216266,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTIxNjI2Ng==","user":{"login":"i5heu","id":22565269,"node_id":"MDQ6VXNlcjIyNTY1MjY5","avatar_url":"https://avatars.githubusercontent.com/u/22565269?v=4","gravatar_id":"","url":"https://api.github.com/users/i5heu","html_url":"https://github.com/i5heu","followers_url":"https://api.github.com/users/i5heu/followers","following_url":"https://api.github.com/users/i5heu/following{/other_user}","gists_url":"https://api.github.com/users/i5heu/gists{/gist_id}","starred_url":"https://api.github.com/users/i5heu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/i5heu/subscriptions","organizations_url":"https://api.github.com/users/i5heu/orgs","repos_url":"https://api.github.com/users/i5heu/repos","events_url":"https://api.github.com/users/i5heu/events{/privacy}","received_events_url":"https://api.github.com/users/i5heu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T11:17:35Z","updated_at":"2019-03-04T11:17:35Z","author_association":"NONE","body":"Thanks for your help!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469216266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469228342","html_url":"https://github.com/apache/couchdb/pull/1958#issuecomment-469228342","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1958","id":469228342,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTIyODM0Mg==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T12:02:23Z","updated_at":"2019-03-04T12:02:23Z","author_association":"MEMBER","body":"@garrensmith looks like I found the problem, newer versions of Elixir don't check for line length anymore, do you think we should discuss this in an separate issue?\r\n\r\nAnyway, up for a review :shipit: 👍 \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469228342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469236277","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-469236277","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":469236277,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTIzNjI3Nw==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T12:32:36Z","updated_at":"2019-03-04T12:32:36Z","author_association":"NONE","body":"> this is an installation issue, your CouchDB installation can’t find or start the couchjs process, reasons for not being able to start it can be many, including bindings to libmozjs.\r\n> \r\n> start by checking the path of the javascript view server and whether it points to the right place.\r\n\r\nI'm new to couchDB, I 'm not clear what is javascript view server, do you mean that couchjs execuable? I think it's couchjs that caused the problem.\r\n\r\nI found a similar issue: https://github.com/apache/couchdb/issues/1832\r\nIt was on archLinux due to ABI compatibility issue and has been fixed.\r\n\r\nI tried the steps described in the post:\r\n_$ ./bin/couchjs ./share/server/main.js\r\n[\"reset\"]\r\nSegmentation fault (core dumped)_\r\n\r\nI got a segment fault. And I traced it I got the following output:\r\n_read(0, [\"reset\"]\r\n\"[\\\"reset\\\"]\\n\", 1024)          = 10\r\n--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_MAPERR, si_addr=0x98} ---\r\n+++ killed by SIGSEGV (core dumped) +++\r\nSegmentation fault_\r\n\r\nby \"ldd -v./bin/couchjs\" I saw that libmozjs and other library files can be found in my redhat. I don't know why couchjs cannot work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469236277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469237567","html_url":"https://github.com/apache/couchdb/pull/1958#issuecomment-469237567","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1958","id":469237567,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTIzNzU2Nw==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T12:37:01Z","updated_at":"2019-03-04T12:37:01Z","author_association":"MEMBER","body":"> newer versions of Elixir don't check for line length anymore, do you think we should discuss this in an separate issue?\r\n\r\nYes lets do that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469237567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469239857","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-469239857","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":469239857,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTIzOTg1Nw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T12:44:47Z","updated_at":"2019-03-04T12:44:47Z","author_association":"MEMBER","body":"The segfault is the problem here, but I can’t help with debugging that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469239857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469258319","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-469258319","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":469258319,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTI1ODMxOQ==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T13:47:27Z","updated_at":"2019-03-04T19:50:51Z","author_association":"NONE","body":"> The segfault is the problem here, but I can’t help with debugging that.\r\n\r\nI found another issue, I'm not sure if it causes that segfault.\r\nI found something here: http://docs.couchdb.org/en/stable/install/troubleshooting.html\r\n\r\nUse this to start up Erlang with the CouchDB libraries in its path:\r\n**erl -env ERL_LIBS $ERL_LIBS:/path/to/couchdb/lib -couch_ini -s crypto**\r\n\r\nIn that Erlang shell, let’s check that the key libraries are running. \r\n**crypto:md5_init().\r\nsnappy:compress(\"gogogogogogogogogogogogogogo\").\r\njiffy:decode(jiffy:encode(<<\"[1,2,3,4,5]\">>)).\r\nq().**\r\n\r\nIt is OK for \"**crypto:md5_init()**\", but failed for the second **snappy** command. This means I did not successfully install couchdb. Sure, I did not install it, I unzip an RPM package and directly execute the binary **./bin/couchdb** (before this I added LD_LIBRARY_PATH, changed *.ini config). I guess the CouchDB libraries were not found. So I append erlang library path and couchdb library path to **ERL_LIBS**, like the below, where **path/to/couchdb/lib** is absolute path of **./opt/couchdb/lib** under decompressed RPM package.\r\n\r\n**> erl -env ERL_LIBS $ERL_LIBS:/path/to/erlang/lib:path/to/couchdb/lib -couch_ini -s crypto**\r\n\r\nErlang/OTP 18 [erts-7.0] [source] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]\r\n\r\nEshell V7.0  (abort with ^G)\r\n1> crypto:md5_init().\r\n<<1,35,69,103,137,171,205,239,254,220,186,152,118,84,50,\r\n  16,0,0,0,0,0,0,0,0,0,0,0,0,0,...>>\r\n2> snappy:compress(\"gogogogogogogogogogogogogogo\").\r\n** exception exit: snappy_nif_not_loaded\r\n     in function  snappy:compress/1 (src/snappy.erl, line 44)\r\n3> jiffy:decode(jiffy:encode(<<\"[1,2,3,4,5]\">>)).\r\n** exception error: undefined function jiffy:encode/1\r\n4> \r\n=WARNING REPORT==== 5-Mar-2019::01:43:36 ===\r\nThe on_load function for module jiffy returned {error,\r\n                                                {bad_lib,\r\n                                                 \"Library version (2.11) not compatible (with 2.8).\"}}\r\n\r\nAs you can see, snappy and jiffy did not work properly. How can I fix this issue?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469258319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469272067","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469272067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469272067,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTI3MjA2Nw==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T14:29:28Z","updated_at":"2019-03-04T14:29:28Z","author_association":"MEMBER","body":"@AlexanderKaraberov Hey, sorry I somehow completely missed the notification for your comment and only found in because I'm thinking of reviving this PR.\r\n\r\nSo, yes db `sizes` is a confusing topic, I'll try to guess here to best of my knowledge.\r\n\r\nThe issue itself is two folded. First, `file` represents the complete disk space a database's shards are taking on a single node, i.e. the value deduplicated by shard, but summed up for all the shards. So if say I have a single shard empty db my `file` is going to be ~8kB (2 headers with `0` padding to 4kB, as you already found out), but for the same empty db with 8 shards the value is going to be ~66kB. But this shouldn't matter much in your case, as you are updating a single shard.\r\n\r\nSecond, append-only approach is kind of wasteful by design. When a doc got added to the db we are writing attachment body (if presented), doc body, doc info, IDs b+tree node, update seqs b+tree node and the commit's header, some of those augmented with md5 hashes and zero padding. Updating the same doc effectively makes all of this \"inactive\" and the whole thing got appended again, there are no some smart deduplication or anything. A side note - adding a new doc is a bit different, as we don't need to update _whole_ b+trees, only the changed path, but that again is not your case.\r\n\r\nSaid all of that 30Mb does seems excessive indeed, I'm going to run some tests to see if I can reproduce and analyze this. Btw, do you happened to have a size of this db after compression?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469272067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469350894","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469350894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469350894,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTM1MDg5NA==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T17:55:55Z","updated_at":"2019-03-04T17:57:11Z","author_association":"CONTRIBUTOR","body":"Hi @eiri \r\n\r\n> I somehow completely missed the notification for your comment and only found in because I'm thinking of reviving this PR.\r\n\r\nThat's ok. I appreciate your detailed answer.\r\n\r\n> Btw, do you happened to have a size of this db after compression?\r\n\r\nI assume you meant a size of the db file on the file system after `snappy` compression? In my test case it was almost matching the one reported by the `sizes.file` (~30KB less). \r\n\r\nI've just repeated exactly the same test case as I described above on a new database (with 537Kb attachment) and I see that `sizes.file` shows `file: 31266020` and the actual `db1.1551713236.couch` shard file on the FS is `31236291` bytes. Looks like this ~26 MB of unknown space occupied are pretty consistent. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469350894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469360878","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469360878","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469360878,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTM2MDg3OA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T18:24:55Z","updated_at":"2019-03-04T18:24:55Z","author_association":"MEMBER","body":"@AlexanderKaraberov Ah, no, slip of the tongue, sorry. I meant did you try to compare pre- and post-compaction sizes of that database?\r\n\r\nFor compression, iirc in production snappy shown itself to be noticeable worse that deflate_6 size-wise and didn't gave _that_ much advantage perf-wise to worth a switch over.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469360878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469385131","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469385131","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469385131,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTM4NTEzMQ==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T19:19:07Z","updated_at":"2019-03-04T19:22:38Z","author_association":"CONTRIBUTOR","body":"@eiri \r\n\r\n> I meant did you try to compare pre- and post-compaction sizes of that database?\r\n\r\nSo I've just run the compaction for the mentioned db. FS size became `49347` bytes and almost matches reported `active` (`39092`) size, even though `sizes.file` report is not as accurate:\r\n```\r\nsizes: {\r\nfile: 165113,\r\nexternal: 60,\r\nactive: 39092\r\n}\r\n```\r\nAs expected compaction effectively \"fixes\" this file bloat. But what is concerning for me is a pre-compaction size. Even considering a wasteful append-only which you've described those 30MB of space for nothing seems excessive. Unfortunately I'm not aware of any approach to analyse the actual content of the `.couch` shard file to understand what is the main culprit of this bloat.\r\n\r\nP.S. Thanks for compression algorithm note. I'll try to test `deflate` later.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469385131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469391866","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469391866","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469391866,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTM5MTg2Ng==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T19:38:35Z","updated_at":"2019-03-04T19:39:00Z","author_association":"MEMBER","body":"I'm struggling to reproduce that result, though we should note that compaction is an essential maintenance task and it clearly solves the problem.\r\n\r\nMy attempt to isolate this was as follows;\r\n\r\n1) I created a single shard database;\r\ncurl 'foo:bar@localhost:15984/db1?n=1&q=1' -XPUT\r\n\r\n2) \"sizes\" is\r\n\r\ncurl 'foo:bar@localhost:15984/db1' -s | jq .sizes\r\n{\r\n  \"file\": 8348,\r\n  \"external\": 0,\r\n  \"active\": 0\r\n}\r\n\r\nwhich looks like two couch file headers and an empty b+tree.\r\n\r\n2) I made a file exactly 10MB long\r\ndd if=/dev/zero of=zeroes bs=1m count=10\r\n\r\n3) sizes after inserting this with\r\ncurl 'foo:bar@localhost:15984/db1/doc1/att1' -XPUT -T zeroes\r\n\r\n{\r\n  \"file\": 10522824,\r\n  \"external\": 10485764,\r\n  \"active\": 10505529\r\n}\r\n\r\n4) I then updated the document, preserving the attachment\r\n\r\n{\r\n  \"file\": 10547400,\r\n  \"external\": 10485791,\r\n  \"active\": 10513692\r\n}\r\n\r\nThis confirms we do _not_ write an additional copy of the attachment, we're simply pointing at the original chunks from rev 1.\r\n\r\n5) I compact the db and sizes are;\r\n\r\n{\r\n  \"file\": 10526923,\r\n  \"external\": 10485786,\r\n  \"active\": 10505598\r\n}\r\n\r\n---\r\n\r\nConclusion: There's no unexpected size bloat at any stage. \r\n\r\nOver time, as databases open/close and when couchdb is restarted, couch will add a new 4k 'header' at the end of the file, but you'd need a lot of those to reach 30mb. Other changes to the database would lead to old versions of b+tree nodes being littered in the file, superseded by later writes.\r\n\r\nCan you do this test and tell us if you get a different result? Or perhaps there are other things going on in your situation that explain it.\r\n\r\nAgain, compaction is a required maintenance step and it fixes the problem. We are concerned if there's excessive (and unexplained) write magnification so please let us know if you can reproduce this in isolation.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469391866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469392217","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469392217","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469392217,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTM5MjIxNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T19:39:34Z","updated_at":"2019-03-04T19:39:34Z","author_association":"MEMBER","body":"(and noting that this is not the right place for this as it's a pull request for something completely unrelated)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469392217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469399254","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469399254","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469399254,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTM5OTI1NA==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T19:58:06Z","updated_at":"2019-03-04T20:01:50Z","author_association":"CONTRIBUTOR","body":"@rnewson Thank you for a detailed response and sorry for the noise I've created in this PR. I didn't want to create an issue for this as I'm still not sure whether this is a bug. I can create a separate issue so that not to pollute a discussion here. \r\n\r\nWith your test case I get the same result. But behaviour which I've described is steadily reproducible with a different test case (I mentioned it above) which has something to do with creating a lot of revisions (I can't say for sure that adding and deleting attachment is related to be honest). So here are exact steps which can be used to reproduce my scenario (perhaps some of them are redundant but I'll mention all of them):\r\n1. Create a db (?n=1&q=8').\r\n2. Create an empty document `doc1` (rev=1)\r\n3.  Add attachment (in my tests it was a 500Kb png image or a random 600Kb pdf file) (rev=2)\r\n4. Update document (rev=3)\r\n5. Delete an attachment (rev=4)\r\n6. Generate 996 revisions (`revs_limit`=1000 in my case). I used a simple script to `PUT` a doc with a new rev each time.\r\n7. Observe `files.size` and actual FS size is around 30 Mb.\r\n\r\nExpected size (according to my estimates): 1000 * doc_size(59 bytes) + 500Kb + 4096 block * 1000.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469399254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469401329","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469401329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469401329,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQwMTMyOQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T20:03:18Z","updated_at":"2019-03-04T20:03:18Z","author_association":"MEMBER","body":"the 996 revisions will generate trash as the btree is updated plus a 4k header for each write (assuming you did them sequentially). You can confirm that by seeing the file size increasing by something in excess of 4k for each revision in step 6 of your routine.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469401329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469405191","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469405191","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469405191,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQwNTE5MQ==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T20:15:31Z","updated_at":"2019-03-04T20:15:31Z","author_association":"CONTRIBUTOR","body":"@rnewson Looks like this \"trash\"/leftovers from the B+-tree updates are a culprit. But what's interesting this is not predictable. I created a doc and updated it 3 times and size growth was constant `previous_size` + 4096*3. But after I ran a script with 995 revisions the size became 51Mb. So at some point this size growth ceases to be constant. Attachments indeed have nothing to do with this as in this case I was not using them and size for a 999 revision is even 20Mb bigger.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469405191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469407663","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469407663","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469407663,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQwNzY2Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T20:23:08Z","updated_at":"2019-03-04T20:23:08Z","author_association":"MEMBER","body":"think the mystery is solved then, will stop misusing this PR. If you want to go further, start a new issue or hit us up on the couchdb-user mailing list.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469407663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469410514","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469410514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469410514,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQxMDUxNA==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T20:32:22Z","updated_at":"2019-03-04T20:32:22Z","author_association":"CONTRIBUTOR","body":"@rnewson @eiri  Thank you for pointing me into a right direction and I again apologise for creating an unrelated noise in this PR. When I have more free time I'll try to investigate myself first why B+-tree updates generate so much garbage and bloat a file size, and if in the dead end I'll get back in the couchdb-user mailing list or create an issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469410514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469421102","html_url":"https://github.com/apache/couchdb/pull/1470#issuecomment-469421102","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1470","id":469421102,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQyMTEwMg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T21:04:42Z","updated_at":"2019-03-04T21:04:42Z","author_association":"MEMBER","body":"because they're appended to the file. we expect this behaviour and its why compaction exists (to create a new file without the old btree nodes).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469421102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469426072","html_url":"https://github.com/apache/couchdb/issues/1965#issuecomment-469426072","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1965","id":469426072,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQyNjA3Mg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T21:20:08Z","updated_at":"2019-03-04T21:20:08Z","author_association":"MEMBER","body":"please show steps to reproduce and/or some verbatim error response from couchdb. I can't reproduce this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469426072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469435445","html_url":"https://github.com/apache/couchdb/issues/1965#issuecomment-469435445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1965","id":469435445,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQzNTQ0NQ==","user":{"login":"dholth","id":208018,"node_id":"MDQ6VXNlcjIwODAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/208018?v=4","gravatar_id":"","url":"https://api.github.com/users/dholth","html_url":"https://github.com/dholth","followers_url":"https://api.github.com/users/dholth/followers","following_url":"https://api.github.com/users/dholth/following{/other_user}","gists_url":"https://api.github.com/users/dholth/gists{/gist_id}","starred_url":"https://api.github.com/users/dholth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dholth/subscriptions","organizations_url":"https://api.github.com/users/dholth/orgs","repos_url":"https://api.github.com/users/dholth/repos","events_url":"https://api.github.com/users/dholth/events{/privacy}","received_events_url":"https://api.github.com/users/dholth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-04T21:49:43Z","updated_at":"2019-03-04T21:49:43Z","author_association":"NONE","body":"Will attempt. CouchDB appears to produce no log message for these dropped requests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469435445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469480985","html_url":"https://github.com/apache/couchdb/pull/1961#issuecomment-469480985","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1961","id":469480985,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQ4MDk4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T00:16:41Z","updated_at":"2019-03-05T00:16:41Z","author_association":"MEMBER","body":"@nickva https://gist.github.com/wohali/1b5e7c40e79a30303b1d6676b88b75b6 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469480985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469481950","html_url":"https://github.com/apache/couchdb/issues/1965#issuecomment-469481950","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1965","id":469481950,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTQ4MTk1MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T00:21:18Z","updated_at":"2019-03-05T00:21:18Z","author_association":"MEMBER","body":"@dholth this is probably a duplicate of #1810, can you try the remediation listed there? 2.3.1 will fix the problem if that's what it is.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469481950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469544885","html_url":"https://github.com/apache/couchdb/pull/1961#issuecomment-469544885","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1961","id":469544885,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTU0NDg4NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T05:35:06Z","updated_at":"2019-03-05T05:35:06Z","author_association":"CONTRIBUTOR","body":"Thanks, @wohali. You've been very patient with remote debugging. This seem related to restarting the chttpd listener on Windows. Let's try another approach where we update the configuration before starting the server so avoid having to \"restart\" it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469544885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469549982","html_url":"https://github.com/apache/couchdb/pull/1961#issuecomment-469549982","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1961","id":469549982,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTU0OTk4Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T05:59:16Z","updated_at":"2019-03-05T05:59:16Z","author_association":"MEMBER","body":"@nickva Poke me tomorrow on IRC to remind me, and I'll try the new force-pushed branch here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469549982/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469604044","html_url":"https://github.com/apache/couchdb/pull/1963#issuecomment-469604044","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1963","id":469604044,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTYwNDA0NA==","user":{"login":"pszczypka","id":1786770,"node_id":"MDQ6VXNlcjE3ODY3NzA=","avatar_url":"https://avatars.githubusercontent.com/u/1786770?v=4","gravatar_id":"","url":"https://api.github.com/users/pszczypka","html_url":"https://github.com/pszczypka","followers_url":"https://api.github.com/users/pszczypka/followers","following_url":"https://api.github.com/users/pszczypka/following{/other_user}","gists_url":"https://api.github.com/users/pszczypka/gists{/gist_id}","starred_url":"https://api.github.com/users/pszczypka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pszczypka/subscriptions","organizations_url":"https://api.github.com/users/pszczypka/orgs","repos_url":"https://api.github.com/users/pszczypka/repos","events_url":"https://api.github.com/users/pszczypka/events{/privacy}","received_events_url":"https://api.github.com/users/pszczypka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T09:21:37Z","updated_at":"2019-03-05T09:21:37Z","author_association":"NONE","body":"Looks ok for metrics.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469604044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469609754","html_url":"https://github.com/apache/couchdb/pull/1953#issuecomment-469609754","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1953","id":469609754,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTYwOTc1NA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T09:38:02Z","updated_at":"2019-03-05T09:38:02Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\n```\r\njiangphs-mbp-2:elixir jiangph$  mix test --trace test/attachments.exs\r\nExcluding tags: [pending: true]\r\n\r\n\r\nAttachmentsTest\r\n  * test implicit doc creation allows creating docs with a reserved id. COUCHDB-565 (654.5ms)\r\n  * test saves attachment successfully (1446.9ms)\r\n  * test saves binary (1741.9ms)\r\n  * test attachment via multipart/form-data (1144.4ms)\r\n  * test delete attachment (1532.5ms)\r\n  * test COUCHDB-809 - stubs should only require the 'stub' field (1511.5ms)\r\n  * test reads attachment successfully (1048.5ms)\r\n  * test etags for attachments (1107.1ms)\r\n  * test test COUCHDB-497 - empty attachments (1116.0ms)\r\n  * test large attachments COUCHDB-366 (1252.0ms)\r\n  * test empty attachments (1380.7ms)\r\n  * test md5 header for attachments (1095.8ms)\r\n  * test update attachment (1420.9ms)\r\n  * test errors for bad attachment (1341.6ms)\r\n\r\nPartitionHelpers\r\n\r\n\r\nFinished in 20.5 seconds\r\n14 tests, 0 failures\r\n\r\nRandomized with seed 429965\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469609754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469649186","html_url":"https://github.com/apache/couchdb/issues/1183#issuecomment-469649186","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1183","id":469649186,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTY0OTE4Ng==","user":{"login":"nbari","id":364199,"node_id":"MDQ6VXNlcjM2NDE5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/364199?v=4","gravatar_id":"","url":"https://api.github.com/users/nbari","html_url":"https://github.com/nbari","followers_url":"https://api.github.com/users/nbari/followers","following_url":"https://api.github.com/users/nbari/following{/other_user}","gists_url":"https://api.github.com/users/nbari/gists{/gist_id}","starred_url":"https://api.github.com/users/nbari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nbari/subscriptions","organizations_url":"https://api.github.com/users/nbari/orgs","repos_url":"https://api.github.com/users/nbari/repos","events_url":"https://api.github.com/users/nbari/events{/privacy}","received_events_url":"https://api.github.com/users/nbari/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T11:40:42Z","updated_at":"2019-03-05T11:40:42Z","author_association":"NONE","body":"Just in case this is how you could create the token via command line using OpenSSL:\r\n\r\n    $ echo -n \"username\" | openssl sha1 -hmac \"mysecret\"\r\n    (stdin)= 7bdfca0f0926fe4255440da35417cd2dc79507e0\r\n\r\nThen use it like:\r\n\r\n```\r\ncurl \"http://localhost:5984/_session\" \\\r\n     -H 'X-Auth-CouchDB-Token: 7bdfca0f0926fe4255440da35417cd2dc79507e0' \\\r\n     -H 'X-Auth-CouchDB-UserName: username' \\\r\n     -H 'Content-Type: application/json; charset=utf-8' \\\r\n     -H 'Accept: application/json'\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469649186/reactions","total_count":4,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":4,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469675715","html_url":"https://github.com/apache/couchdb/issues/1965#issuecomment-469675715","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1965","id":469675715,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTY3NTcxNQ==","user":{"login":"dholth","id":208018,"node_id":"MDQ6VXNlcjIwODAxOA==","avatar_url":"https://avatars.githubusercontent.com/u/208018?v=4","gravatar_id":"","url":"https://api.github.com/users/dholth","html_url":"https://github.com/dholth","followers_url":"https://api.github.com/users/dholth/followers","following_url":"https://api.github.com/users/dholth/following{/other_user}","gists_url":"https://api.github.com/users/dholth/gists{/gist_id}","starred_url":"https://api.github.com/users/dholth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dholth/subscriptions","organizations_url":"https://api.github.com/users/dholth/orgs","repos_url":"https://api.github.com/users/dholth/repos","events_url":"https://api.github.com/users/dholth/events{/privacy}","received_events_url":"https://api.github.com/users/dholth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T13:16:50Z","updated_at":"2019-03-05T13:16:50Z","author_association":"NONE","body":"Thank you very much. That fixes the problem.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469675715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469745498","html_url":"https://github.com/apache/couchdb/issues/1966#issuecomment-469745498","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1966","id":469745498,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc0NTQ5OA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T16:22:43Z","updated_at":"2019-03-05T16:22:43Z","author_association":"MEMBER","body":"Thou shalt read the release notes: https://docs.couchdb.org/en/stable/whatsnew/2.3.html#upgrade-notes\n\n:)\n\nB.\n\n-- \n Robert Samuel Newson\n rnewson@apache.org\n\n\nOn Tue, 5 Mar 2019, at 16:09, Alessandro Ogier wrote:\n> Description\n\n> Hello, I'm trying to install a query server on a local instance but so far no luck.\n\n> I've dropped an inifile in `local.d`:\n\n> [query_servers]\n> python = /usr/bin/python3 /usr/local/bin/couchpy\n> and running couchdb seems to give me a positive feedback about this:\n\n> curl -sH 'Content-Type: application/json' \\\n  http://localhost:9999/_node/nonode@nohost/_config \\\n  | jq .query_servers\n\n{\n  \"python\": \"/usr/bin/python3 /usr/local/bin/couchpy\"\n}\n> but when I hit a view whose ddoc is:\n\n> {\n  \"_id\": \"_design/dd\",\n  \"_rev\": \"4-46dba025cd653009291b774ae5926444\",\n  \"views\": {\n    \"vv\": {\n      \"map\": \"def map(doc):\\n    yield(doc['_id'], 'pp')\"\n    }\n  },\n  \"language\": \"python\"\n}\n> server logs this:\n\n> `[info] <0.16030.0> -------- Starting index update for db: shards/40000000-5fffffff/ciao.1551798662 idx: _design/dd\n[error] emulator -------- Error in process <0.16035.0> with exit value: {{nocatch,{unknown_query_language,<<\"python\">>}},[{couch_query_servers,get_os_process,1,[{file,\"src/couch_query_servers.erl\"},{line,575}]},{couch_query_servers,start_doc_map,3,[{file,\"src/couch_query_servers.erl\"},{line,55}]},{couch_mrview_updater,start_query_server,1,[{file,\"src/couch_mrview_updater.erl\"},{line,235}]},{couch_mrview_updater,map_docs,2,[{file,\"src/couch_mrview_updater.erl\"},{line,188}]}]}\n[error] <0.15987.0> 5cfdafc411 rexi_server: from: nonode@nohost(<0.15593.0>) mfa: fabric_rpc:map_view/5 throw:{unknown_query_language,<<\"python\">>}[{couch_mrview_util,get_view_index_state,5,[{file,\"src/couch_mrview_util.erl\"},{line,137}]},{couch_mrview_util,get_view,4,[{file,\"src/couch_mrview_util.erl\"},{line,81}]},{couch_mrview,query_view,6,[{file,\"src/couch_mrview.erl\"},{line,247}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,140}]}]\n[error] <0.15593.0> 5cfdafc411 req_err(4089041121) unknown_query_language : python\n    [<<\"couch_mrview_util:get_view_index_state/5 L137\">>,<<\"couch_mrview_util:get_view/4 L81\">>,<<\"couch_mrview:query_view/6 L247\">>,<<\"rexi_server:init_p/3 L140\">>]\n[notice] <0.15593.0> 5cfdafc411 localhost:9999 172.17.0.1 undefined GET /ciao/_design/dd/_view/vv?reduce=false&skip=0&limit=21 500 ok 6\n\n`\n> Can't get any clue from documentation (which is very little, in fact I've copied inifile snippet from vanilla local.ini) nor online, but that `unknown_query_language` let me think something is still wrong.\n\n> Can you please give me a pointer I can't find by myself?\n\n> Your Environment\n\n> couchdb 2.3.0 dockerhub's image\n\n> curl -sH 'Content-Type: application/json' \\\n  http://localhost:9999/ \\\n  | jq\n\n{\n  \"couchdb\": \"Welcome\",\n  \"version\": \"2.3.0\",\n  \"git_sha\": \"07ea0c7\",\n  \"uuid\": \"36f4f3fa844df0434a60b28a6fd3704d\",\n  \"features\": [\n    \"pluggable-storage-engines\",\n    \"scheduler\"\n  ],\n  \"vendor\": {\n    \"name\": \"The Apache Software Foundation\"\n  }\n}\n> entire configuration: https://gist.github.com/aogier/72b7fc522f5df03a94a30e6d67b74f36\n\n> Thank you for everything, regards\n\n> ale\n\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/apache/couchdb/issues/1966>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAC4dxC8y3lEyroFnh1ws9ZkElPyhaVGks5vTpQtgaJpZM4be7RJ>.\n\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469745498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469749082","html_url":"https://github.com/apache/couchdb/issues/1966#issuecomment-469749082","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1966","id":469749082,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc0OTA4Mg==","user":{"login":"aogier","id":321364,"node_id":"MDQ6VXNlcjMyMTM2NA==","avatar_url":"https://avatars.githubusercontent.com/u/321364?v=4","gravatar_id":"","url":"https://api.github.com/users/aogier","html_url":"https://github.com/aogier","followers_url":"https://api.github.com/users/aogier/followers","following_url":"https://api.github.com/users/aogier/following{/other_user}","gists_url":"https://api.github.com/users/aogier/gists{/gist_id}","starred_url":"https://api.github.com/users/aogier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aogier/subscriptions","organizations_url":"https://api.github.com/users/aogier/orgs","repos_url":"https://api.github.com/users/aogier/repos","events_url":"https://api.github.com/users/aogier/events{/privacy}","received_events_url":"https://api.github.com/users/aogier/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T16:30:41Z","updated_at":"2019-03-05T16:30:41Z","author_association":"CONTRIBUTOR","body":"you're right, my bad, I started with this one so I just read the manual. Sorry for the noise, ciao!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469749082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469752632","html_url":"https://github.com/apache/couchdb/pull/1961#issuecomment-469752632","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1961","id":469752632,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc1MjYzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T16:38:16Z","updated_at":"2019-03-05T16:38:16Z","author_association":"MEMBER","body":"@nickva Closer:\r\n\r\n```\r\n    chttpd_socket_buffer_size_test:53: small_recbuf...*timed out*\r\n    undefined\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469752632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469761915","html_url":"https://github.com/apache/couchdb/issues/1966#issuecomment-469761915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1966","id":469761915,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTc2MTkxNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T16:58:43Z","updated_at":"2019-03-05T16:58:43Z","author_association":"MEMBER","body":"@aogier We're very much accepting pull requests for the docs over at https://github.com/apache/couchdb-documentation if you'd like to help out! :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469761915/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469815896","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-469815896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":469815896,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTgxNTg5Ng==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T19:02:27Z","updated_at":"2019-03-05T19:05:10Z","author_association":"MEMBER","body":"I updated the text of the proposal to incorporate the details from my last comment.\r\n\r\nSeparately, @wohali pointed me to an old bug report in #1418 which has some bearing here. It seems that we are currently rather inconsistent in how we handle attempts to extend a tombstoned edit branch. If *every* branch in the document is tombstoned, we reject edit attempts that specify an explicit `_rev` with a conflict. But if at least one branch is `deleted=false`, we will allow other tombstoned branches to be extended. This is inconsistent and seemingly unintentional behavior.\r\n\r\nThe proposed data model is most efficient if we block all explicit updates to tombstoned edit branches (i.e., updates that supply the `_rev` of the tombstone as a base). If we do need to support the current CouchDB behavior, it will require attempting to read 3 KVs for every edit that gets rejected with a conflict: the `deleted=false` KV for that revision, the `deleted=true` KV for that revision, and the last KV for the document (to see if all branches are `deleted=true`). We would likely do this in 2 roundtrips to avoid paying the extra cost on every edit. It's doable, but I think we may want to take this opportunity to make our API more consistent. I've updated the proposal to point us in that direction.\r\n\r\nDigging even deeper, folks should be aware that when users create a new document (with no `_rev`) over top of a document where all branches are tombstoned, current CouchDB will internally extend the \"winning\" tombstoned branch with the new edit. I believe this was intended solely as a performance optimization, to avoid creating a too-wide revision tree, but as #1418 makes clear this optimization has real user-visible implications in the API. The data model in this RFC naturally supports the same optimization. We can have a detailed discussion of what we think the right behavior ought to be going forward, but I don't think it should hold up the decision on the data model.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469815896/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469851178","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-469851178","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":469851178,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTg1MTE3OA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T20:48:10Z","updated_at":"2019-03-05T20:48:10Z","author_association":"NONE","body":"Looks as this related to disk speed and request rate.\r\nAfter disk data is cached into disk memory, issue `\"chttpd:handle_req_after_auth/2 L322\"`  goes away.\r\n\r\nWill make same test on SSD disk","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469851178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469868889","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-469868889","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":469868889,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTg2ODg4OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T21:41:58Z","updated_at":"2019-03-05T21:41:58Z","author_association":"MEMBER","body":"Some discussion of whether it makes more sense to model RFCs as PRs against the documentation repo. Merits to both options. I filed the PR version of this issue at apache/couchdb-documentation#397","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469868889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469872601","html_url":"https://github.com/apache/couchdb/issues/1957#issuecomment-469872601","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1957","id":469872601,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTg3MjYwMQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T21:52:58Z","updated_at":"2019-03-05T21:52:58Z","author_association":"MEMBER","body":"general agreement on couchdb-dev (IRC) to use the PR approach as it allows clarifying commits, reviews and a trail of approval.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469872601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469876889","html_url":"https://github.com/apache/couchdb/issues/1418#issuecomment-469876889","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1418","id":469876889,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTg3Njg4OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T22:05:30Z","updated_at":"2019-03-05T22:45:15Z","author_association":"MEMBER","body":"So I know this was filed a long time ago, but - what a fascinating bug report!\r\n\r\nI understand what's happening in @ondra-novak 's initial report, but it's not clear to me that @bravier is experiencing the same issue. In Ondra's case the validation failure happens because the replicator skips over the deletion, which means the target sees the old version (before the deletion) and the new version, and their `owner` fields don't match.\r\n\r\nIn @bravier 's case there's a replication after every edit, so it's definitely a different situation. I'm wondering if in that situation `oldDoc` really _is_ present in the replicated edit path, and because the deletion did not keep the `name` property in the tombstone it fails to validate when the re-created doc shows up as an extension of the edit path. It's almost the converse of @ondra-novak 's report. Worth double-checking.\r\n\r\nAt a higher level ... I'm concerned a bit about the reliance on the presence of `oldDoc` in the VDU when a document was created without specifying any revision. Yes, in that case CouchDB will look to extend an existing edit branch, but I always thought of this as a performance optimization that was not intended to have user-facing consequences. Clearly it does, and folks are relying on it for reasonable use cases.\r\n\r\nSeparately, at some point we blocked the ability to supply the `_rev` of a deleted leaf edit when *every* leaf of the document is deleted. It's possible that this happened in 39df1d5e78a3ffd. Oddly enough if some other branch of the document is not deleted we will let the operation against the deleted leaf go through. That seems like an unintentional inconsistency.\r\n\r\nI don't have a great answer about how to proceed here, but figured I should write down a few details that I picked up because I happened to be looking at this part of the codebase for #1957 and @wohali pointed me to this ticket as an interesting edge case.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469876889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469877076","html_url":"https://github.com/apache/couchdb/pull/1961#issuecomment-469877076","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1961","id":469877076,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTg3NzA3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T22:06:09Z","updated_at":"2019-03-05T22:06:09Z","author_association":"MEMBER","body":"With the latest force-push, we now have all green tests.\r\n\r\nBasically, on Windows, when the buffer is set too small, mochiweb aborts the connection rather than returning a 400. ibrowse takes 5s by default for this timeout to register, which is too long for our default timeout, so the tests were timing out. Extending the timeout to 15s exposed the `{error,request_failed}` return code, so the test was adapted to expect this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469877076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469904067","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-469904067","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":469904067,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTkwNDA2Nw==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-05T23:38:14Z","updated_at":"2019-03-05T23:38:14Z","author_association":"NONE","body":"On SSD disk i not have more error like\r\n```\r\nchttpd:handle_req_after_auth/2 L322\r\n```\r\nLooks as issue related to disk performance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469904067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469989248","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-469989248","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":469989248,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2OTk4OTI0OA==","user":{"login":"vincnetas","id":472357,"node_id":"MDQ6VXNlcjQ3MjM1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/472357?v=4","gravatar_id":"","url":"https://api.github.com/users/vincnetas","html_url":"https://github.com/vincnetas","followers_url":"https://api.github.com/users/vincnetas/followers","following_url":"https://api.github.com/users/vincnetas/following{/other_user}","gists_url":"https://api.github.com/users/vincnetas/gists{/gist_id}","starred_url":"https://api.github.com/users/vincnetas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vincnetas/subscriptions","organizations_url":"https://api.github.com/users/vincnetas/orgs","repos_url":"https://api.github.com/users/vincnetas/repos","events_url":"https://api.github.com/users/vincnetas/events{/privacy}","received_events_url":"https://api.github.com/users/vincnetas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T06:44:39Z","updated_at":"2019-03-06T06:44:39Z","author_association":"NONE","body":"We have this issue on SSD's (as mentioned in comment 20 days ago)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/469989248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/470146756","html_url":"https://github.com/apache/couchdb/issues/1559#issuecomment-470146756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1559","id":470146756,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDE0Njc1Ng==","user":{"login":"andyward","id":923699,"node_id":"MDQ6VXNlcjkyMzY5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/923699?v=4","gravatar_id":"","url":"https://api.github.com/users/andyward","html_url":"https://github.com/andyward","followers_url":"https://api.github.com/users/andyward/followers","following_url":"https://api.github.com/users/andyward/following{/other_user}","gists_url":"https://api.github.com/users/andyward/gists{/gist_id}","starred_url":"https://api.github.com/users/andyward/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andyward/subscriptions","organizations_url":"https://api.github.com/users/andyward/orgs","repos_url":"https://api.github.com/users/andyward/repos","events_url":"https://api.github.com/users/andyward/events{/privacy}","received_events_url":"https://api.github.com/users/andyward/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-06T15:19:11Z","updated_at":"2019-03-06T15:19:11Z","author_association":"NONE","body":"This looks really useful if it could be implemented. Has any thought been given to how you might add/update an item to an array in the documents. Given the original example with a _doc_ with _tags_, am I right in thinking it might look like this:\r\n\r\n**Add new tag \"three\"**\r\n```\r\nPUT /db/doc?rev=$rev/_/tags\r\n\"three\"\r\n```\r\n**Update tag \"two\"**\r\n```\r\nPUT /db/doc?rev=$rev/_/tags/2\r\n\"two-updated\"\r\n```\r\n\r\n**Delete tag \"two\"**\r\n```\r\nDELETE/db/doc?rev=$rev/_/tags/2\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/470146756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/470384778","html_url":"https://github.com/apache/couchdb/pull/1921#issuecomment-470384778","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1921","id":470384778,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MDM4NDc3OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-07T04:56:33Z","updated_at":"2019-03-07T04:56:33Z","author_association":"CONTRIBUTOR","body":"Closing this RPa nd","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/470384778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471474124","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-471474124","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":471474124,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTQ3NDEyNA==","user":{"login":"cmaas","id":6094364,"node_id":"MDQ6VXNlcjYwOTQzNjQ=","avatar_url":"https://avatars.githubusercontent.com/u/6094364?v=4","gravatar_id":"","url":"https://api.github.com/users/cmaas","html_url":"https://github.com/cmaas","followers_url":"https://api.github.com/users/cmaas/followers","following_url":"https://api.github.com/users/cmaas/following{/other_user}","gists_url":"https://api.github.com/users/cmaas/gists{/gist_id}","starred_url":"https://api.github.com/users/cmaas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmaas/subscriptions","organizations_url":"https://api.github.com/users/cmaas/orgs","repos_url":"https://api.github.com/users/cmaas/repos","events_url":"https://api.github.com/users/cmaas/events{/privacy}","received_events_url":"https://api.github.com/users/cmaas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-11T09:55:08Z","updated_at":"2019-03-11T11:01:10Z","author_association":"NONE","body":"Same issue here, also an SSD on a VPS. Version 2.2.0. Started yesterday morning, never had this error message before.\r\n\r\n@sergey-safarov How did you measure disk speed and request rate exactly?\r\n\r\nEdit: Upgraded to 2.3.0, problem still exists.\r\n\r\nEdit2: Disabling or enabling cookie auth makes no difference.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471474124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471690866","html_url":"https://github.com/apache/couchdb/issues/1973#issuecomment-471690866","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1973","id":471690866,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTY5MDg2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-11T19:36:34Z","updated_at":"2019-03-11T19:36:34Z","author_association":"MEMBER","body":"2.3.1 is not officially released - please wait another 24-48 hours and watch the mailing lists for the announcements.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471690866/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471903577","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-471903577","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":471903577,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTkwMzU3Nw==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T08:30:36Z","updated_at":"2019-03-12T09:30:00Z","author_association":"NONE","body":"I got the solution. because the spidermonkey 1.8.5 library was built on old versioned linux, I download the latest couch-js binary for redhat 7 the modify LD_LIBRARY_PATH to include it, then the couchjs could run. After solving this, my couchdb could work..\r\n\r\nBut I still cannot verify my couchdb as I run \"**erl -env ERL_LIBS $ERL_LIBS:/path/to/erlang/lib:path/to/couchdb/lib -couch_ini -s crypto**\",  **snappy:compress** and **jiffy:decode** does not work. I just tried setting ERL_LIBS to the crypto library extracted from RPM package, like this:\r\n**erl -env ERL_LIBS $ERL_LIBS:my_home_dir/rpm/couchdb_el7/opt/couchdb/lib/crypto-3.7.4 -couch_ini -s crypto**\r\n\r\nThen I got this:\r\nErlang/OTP 18 [erts-7.0] [source] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false]\r\n\r\n{\"init terminating in do_boot\",{undef,[{crypto,start,[],[]},{init,start_it,1,[]},{init,start_em,1,[]}]}}\r\n\r\nCrash dump is being written to: erl_crash.dump...done\r\ninit terminating in do_boot ()\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471903577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471906177","html_url":"https://github.com/apache/couchdb/issues/1323#issuecomment-471906177","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1323","id":471906177,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTkwNjE3Nw==","user":{"login":"skycult","id":1329697,"node_id":"MDQ6VXNlcjEzMjk2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1329697?v=4","gravatar_id":"","url":"https://api.github.com/users/skycult","html_url":"https://github.com/skycult","followers_url":"https://api.github.com/users/skycult/followers","following_url":"https://api.github.com/users/skycult/following{/other_user}","gists_url":"https://api.github.com/users/skycult/gists{/gist_id}","starred_url":"https://api.github.com/users/skycult/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skycult/subscriptions","organizations_url":"https://api.github.com/users/skycult/orgs","repos_url":"https://api.github.com/users/skycult/repos","events_url":"https://api.github.com/users/skycult/events{/privacy}","received_events_url":"https://api.github.com/users/skycult/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T08:38:57Z","updated_at":"2019-03-12T08:38:57Z","author_association":"NONE","body":"Hi there nothing about this question?\r\nAny suggestion is appreciated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471906177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471921317","html_url":"https://github.com/apache/couchdb/issues/1323#issuecomment-471921317","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1323","id":471921317,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MTkyMTMxNw==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T09:26:46Z","updated_at":"2019-03-12T09:26:46Z","author_association":"MEMBER","body":"At this point its not really possible to work out the `total_rows` for a mango query. A mango query could use the _all_docs index for a query so then `total_rows` would be all the documents in your database. Or it could use a specific index which is then a different number of `total_rows`. Even if mango uses a specific index it will do some in memory processing of the query to reduce the number of documents that are returned so again `total_rows` would be different. Ideally we need to add in aggregation support to mango that it would be possible to run a count for a specific query and know how many docs would be returned for a query. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/471921317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472091783","html_url":"https://github.com/apache/couchdb/issues/1975#issuecomment-472091783","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1975","id":472091783,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjA5MTc4Mw==","user":{"login":"paulbert","id":9203229,"node_id":"MDQ6VXNlcjkyMDMyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/9203229?v=4","gravatar_id":"","url":"https://api.github.com/users/paulbert","html_url":"https://github.com/paulbert","followers_url":"https://api.github.com/users/paulbert/followers","following_url":"https://api.github.com/users/paulbert/following{/other_user}","gists_url":"https://api.github.com/users/paulbert/gists{/gist_id}","starred_url":"https://api.github.com/users/paulbert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulbert/subscriptions","organizations_url":"https://api.github.com/users/paulbert/orgs","repos_url":"https://api.github.com/users/paulbert/repos","events_url":"https://api.github.com/users/paulbert/events{/privacy}","received_events_url":"https://api.github.com/users/paulbert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T17:05:23Z","updated_at":"2019-03-12T17:05:23Z","author_association":"NONE","body":"We're experiencing the same issue. We are using the same version of CouchDB in addition to Docker and nginx\r\n\r\n* Docker: https://hub.docker.com/r/apache/couchdb & https://hub.docker.com/r/treehouses/couchdb (based off official Apache container for use with ARM or x86)\r\n* Nginx: 1.13 & 1.14\r\n\r\nWe also dug a little into the logs to see the CouchDB is failing with an auth error:\r\n```\r\n{\"timestamp\":\"2019-03-07T05:18:13Z\",\"type\":\"crashed\",\"reason\":\"{replication_auth_error,\\n {session_unexpected_result,\\\"405\\\",\\n \\\"https://<serverurl>/_session\\\",\\\"<admin>\\\"}}\"}\r\n```\r\nThe <serverurl> section does not include the proxy address (in the above example `/couch`)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472091783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472102957","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-472102957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":472102957,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjEwMjk1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T17:32:11Z","updated_at":"2019-03-12T17:32:11Z","author_association":"MEMBER","body":"Likely your openssl version does not match the compiled version.\r\n\r\nWhy are you not just compiling from source? This installation method you are using is not supported.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472102957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472103232","html_url":"https://github.com/apache/couchdb/issues/1962#issuecomment-472103232","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1962","id":472103232,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjEwMzIzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T17:32:48Z","updated_at":"2019-03-12T17:32:48Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472103232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472104795","html_url":"https://github.com/apache/couchdb/issues/1975#issuecomment-472104795","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1975","id":472104795,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjEwNDc5NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T17:36:35Z","updated_at":"2019-03-12T17:36:35Z","author_association":"MEMBER","body":"We've solved this as a documentation issue:\r\n\r\nhttps://github.com/apache/couchdb-documentation/pull/399","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472104795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472106258","html_url":"https://github.com/apache/couchdb/issues/1882#issuecomment-472106258","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1882","id":472106258,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3MjEwNjI1OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-03-12T17:39:56Z","updated_at":"2019-03-12T17:39:56Z","author_association":"MEMBER","body":"A similar request was made  to allow access to `/_up` via a pinhole, but [the PR was rejected](https://github.com/apache/couchdb/pull/856). I am afraid that we'll have to mark this as WONTFIX for now, but we'll consider coming back to it when the CouchDB security system is rewritten (#1504).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/472106258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]