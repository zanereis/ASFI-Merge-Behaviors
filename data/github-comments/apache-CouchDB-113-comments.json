[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339202375","html_url":"https://github.com/apache/couchdb/pull/4291#issuecomment-1339202375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4291","id":1339202375,"node_id":"IC_kwDOAAMmUc5P0ptH","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T11:49:23Z","updated_at":"2022-12-06T11:49:23Z","author_association":"MEMBER","body":"@rnewson this is great, thanks a lot:\r\n\r\nfor sake of easier consumption, it might be useful if you could pull out examples for what index definition and querying looks like in Search2 and Nouveau, so we can compare those easily (both JS and Mango).\r\n\r\nI think I will prefer the version field (absence means Search2) variant, but I’m not 100% if this maps cleanly to the same _search /_find URL endpoints.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339202375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339219475","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1339219475","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1339219475,"node_id":"IC_kwDOAAMmUc5P0t4T","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T12:04:51Z","updated_at":"2022-12-06T12:04:51Z","author_association":"MEMBER","body":"@konrad-ohms @AltenTMAOrion — I put up a new super-simple PR that I’d love for you to try: https://github.com/apache/couchdb/pull/4292","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339219475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339319235","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1339319235","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1339319235,"node_id":"IC_kwDOAAMmUc5P1GPD","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T13:07:17Z","updated_at":"2022-12-06T13:07:17Z","author_association":"NONE","body":"Hey @janl, thanks for picking the issue up again.\r\nI tried to rebuild but hit a dependency problem in the docker build, I guess I might have missed overwriting certain dependency versions somewhere...\r\n\r\nBy any chance, did your CI system put out a docker image I could just use for running the validation?\r\n\r\nThis is what I tried:\r\n\r\n```bash\r\n$ git clone https://github.com/apache/couchdb-ci.git\r\n$ cd couchdb-ci/\r\n$ ./build.sh platform debian-buster\r\n...\r\n==> Downloading Elixir from https://repo.hex.pm/builds/elixir/v1.13.4-otp-23.zip\r\n--> dbab54520ba\r\nSTEP 12/14: RUN echo \"jenkins ALL=(ALL) NOPASSWD: ALL\" > /etc/sudoers.d/jenkins\r\n--> c59f6b6aca0\r\nSTEP 13/14: USER jenkins\r\n--> 39e19399d38\r\nSTEP 14/14: CMD [\"/bin/bash\"]\r\nCOMMIT apache/couchdbci-debian:buster-erlang-23.3.4.15\r\n--> 617bc6f2f04\r\nSuccessfully tagged localhost/apache/couchdbci-debian:buster-erlang-23.3.4.15\r\n617bc6f2f04e049eb6ab418828de3239b06ce1a74b756a031dd5f33ea342c05b\r\n\r\n$ podman run --name couchdb-fix-3517 -it localhost/apache/couchdbci-debian:buster-erlang-23.3.4.15\r\njenkins@b730dc2b6711:/$ cd ~\r\njenkins@b730dc2b6711:~$ whoami\r\njenkins\r\njenkins@b730dc2b6711:~$ pwd\r\n/home/jenkins\r\njenkins@b730dc2b6711:~$ git clone --depth=1 -b fix/3517-part7 https://github.com/apache/couchdb.git\r\nCloning into 'couchdb'...\r\nremote: Enumerating objects: 1508, done.\r\nremote: Counting objects: 100% (1508/1508), done.\r\nremote: Compressing objects: 100% (1309/1309), done.\r\nremote: Total 1508 (delta 290), reused 625 (delta 138), pack-reused 0\r\nReceiving objects: 100% (1508/1508), 4.95 MiB | 1.64 MiB/s, done.\r\nResolving deltas: 100% (290/290), done.\r\njenkins@b730dc2b6711:~$ cd couchdb/\r\njenkins@b730dc2b6711:~/couchdb$ git log\r\ncommit 05628e891b5145c09e429eb79a21631cddf63c43 (grafted\r\n, HEAD -> fix/3517-part7, origin/fix/3517-part7\r\n)\r\nAuthor: Jan Lehnardt <jan@apache.org>\r\nDate:   Tue Dec 6 12:50:15 2022 +0100\r\n\r\n    fix(3517): super-simplistic fix to avoid costly AST transforms when they are\r\n not needed\r\njenkins@b730dc2b6711:~/couchdb$ ./configure\r\n...\r\njenkins@b730dc2b6711:~/couchdb$ make release\r\n...\r\nWARN:  Missing plugins: [covertool]\r\nWARN:  Missing plugins: [pc]\r\n==> rel (generate)\r\nWARN:  'generate' command does not apply to directory /home/jenkins/couchdb\r\n... done\r\n\r\n    You can now copy the rel/couchdb directory anywhere on your system.\r\n    Start CouchDB with ./bin/couchdb from within that directory.\r\n\r\njenkins@b730dc2b6711:~/couchdb$ echo $?\r\n0\r\njenkins@b730dc2b6711:~/couchdb$ make dist\r\n...\r\nDone: apache-couchdb-3.2.2-05628e8.tar.gz\r\n```\r\n\r\nI copied back the build results and packaged them up:\r\n\r\n```bash\r\n$ podman cp couchdb-fix-3517:/home/jenkins/couchdb/apache-couchdb-3.2.2-05628e8.tar.gz .\r\n$ git clone https://github.com/apache/couchdb-pkg.git\r\nCloning into 'couchdb-pkg'...\r\nremote: Enumerating objects: 860, done.\r\nremote: Counting objects: 100% (234/234), done.\r\nremote: Compressing objects: 100% (143/143), done.\r\nremote: Total 860 (delta 103), reused 173 (delta 75), pack-reused 626\r\nReceiving objects: 100% (860/860), 25.34 MiB | 10.53 MiB/s, done.\r\nResolving deltas: 100% (397/397), done.\r\n$ cd couchdb-pkg/\r\n$ podman tag apache/couchdbci-debian:buster-erlang-23.3.4.15 docker.io/couchdbdev/debian-buster-erlang-23.3.4.15\r\n$ ERLANGVERSION=23.3.4.15 ./build.sh couch debian-buster /home/ohmsk/Downloads/couchdb-test/apache-couchdb-3.2.2-05628e8.tar.gz\r\n...\r\n$ ls -lah pkgs/couch/debian-buster/\r\ntotal 35M\r\ndrwxrwxrwx. 2 ohmsk ohmsk  207 Dec  6 13:48 .\r\ndrwxrwxrwx. 3 ohmsk ohmsk   45 Dec  6 13:48 ..\r\n-rwxr-xr-x. 1 ohmsk ohmsk 7.6K Dec  6 13:48 couchdb_3.2.2-05628e8~buster_amd64.buildinfo\r\n-rwxr-xr-x. 1 ohmsk ohmsk 1.5K Dec  6 13:48 couchdb_3.2.2-05628e8~buster_amd64.changes\r\n-rwxr-xr-x. 1 ohmsk ohmsk  27M Dec  6 13:48 couchdb_3.2.2-05628e8~buster_amd64.deb\r\n-rwxr-xr-x. 1 ohmsk ohmsk 8.6M Dec  6 13:48 couchdb-dbgsym_3.2.2-05628e8~buster_amd64.deb\r\n```\r\n\r\nAnd include the binaries in the image:\r\n\r\n```bash\r\n$ git clone https://github.com/apache/couchdb-docker.git\r\nCloning into 'couchdb-docker'...\r\nremote: Enumerating objects: 1093, done.\r\nremote: Counting objects: 100% (201/201), done.\r\nremote: Compressing objects: 100% (97/97), done.\r\nremote: Total 1093 (delta 124), reused 164 (delta 100), pack-reused 892\r\nReceiving objects: 100% (1093/1093), 265.20 KiB | 498.00 KiB/s, done.\r\nResolving deltas: 100% (550/550), done.\r\n\r\n$ cd couchdb-docker/\r\n$ ls\r\n2.3.1      3.1.2-ubi           3.2.0-ubi-clouseau  build.sh     LICENSE\r\n2.3.1-ubi  3.1.2-ubi-clouseau  3.2.1               dev          README.md\r\n3.1.2      3.2.0               3.2.2               dev-cluster\r\n\r\n$ cd 3.2.2/\r\n$ cp -r ~/Downloads/couchdb-test/couchdb-pkg/pkgs/couch/debian-buster/ .\r\n\r\n$ ls debian-buster/\r\ncouchdb_3.2.2-05628e8~buster_amd64.buildinfo\r\ncouchdb_3.2.2-05628e8~buster_amd64.changes\r\ncouchdb_3.2.2-05628e8~buster_amd64.deb\r\ncouchdb-dbgsym_3.2.2-05628e8~buster_amd64.deb\r\n```\r\n\r\nI adjusted the Dockerfile again to just copy deb packages into the image to validate the patch:\r\n\r\n```bash\r\n$ git diff Dockerfile\r\ndiff --git a/3.2.2/Dockerfile b/3.2.2/Dockerfile\r\nindex 62177b5..ec8e679 100644\r\n--- a/3.2.2/Dockerfile\r\n+++ b/3.2.2/Dockerfile\r\n@@ -60,6 +60,9 @@ RUN . /etc/os-release; \\\r\n     echo \"deb [signed-by=/usr/share/keyrings/couchdb-archive-keyring.gpg] https://apache.jfrog.io/artifactory/couchdb-deb/ ${VERSION_CODENAME} main\" | \\\r\n         tee /etc/apt/sources.list.d/couchdb.list >/dev/null\r\n \r\n+COPY debian-buster/couchdb_3.2.2-05628e8~buster_amd64.deb /tmp/packages/\r\n+COPY debian-buster/couchdb-dbgsym_3.2.2-05628e8~buster_amd64.deb /tmp/packages/\r\n+\r\n # https://github.com/apache/couchdb-pkg/blob/master/debian/README.Debian\r\n RUN set -eux; \\\r\n     apt-get update; \\\r\n@@ -67,7 +70,7 @@ RUN set -eux; \\\r\n     echo \"couchdb couchdb/mode select none\" | debconf-set-selections; \\\r\n # we DO want recommends this time\r\n     DEBIAN_FRONTEND=noninteractive apt-get install -y --allow-downgrades --allow-remove-essential --allow-change-held-packages \\\r\n-            couchdb=\"$COUCHDB_VERSION\"~bullseye \\\r\n+        /tmp/packages/* \\\r\n     ; \\\r\n # Undo symlinks to /var/log and /var/lib\r\n     rmdir /var/lib/couchdb /var/log/couchdb; \\\r\n\r\n$ podman build -t \"couchdb:3.2.2-patch-jan-fix-3517\" .\r\nSTEP 1/20: FROM debian:bullseye-slim\r\nSTEP 2/20: LABEL maintainer=\"CouchDB Developers dev@couchdb.apache.org\"\r\n--> Using cache 09f4784df121998589bdcab66be2643748d0e2db2f49a87c19b52c0a771837f3\r\n--> 09f4784df12\r\nSTEP 3/20: RUN groupadd -g 5984 -r couchdb && useradd -u 5984 -d /opt/couchdb -g couchdb couchdb\r\n--> Using cache 081f8b18791f9a3459ad1f40641f7eb4590a3da68e42a46a636d61f58aff0e4d\r\n--> 081f8b18791\r\nSTEP 4/20: RUN set -ex;     apt-get update;     apt-get install -y --no-install-recommends         apt-transport-https         ca-certificates         dirmngr         gnupg      ;     rm -rf /var/lib/apt/lists/*\r\n--> Using cache e683e09e78629b6bff7b85d7f8fd2835c840a299ecbf16d848ca71b69e628edd\r\n--> e683e09e786\r\nSTEP 5/20: RUN set -eux;     apt-get update;     apt-get install -y --no-install-recommends gosu tini;     rm -rf /var/lib/apt/lists/*;     gosu nobody true;     tini --version\r\n--> Using cache b0c10606eae929b003afec60212eef33809a96f5acd81bb037f304c1dc0bd7b7\r\n--> b0c10606eae\r\nSTEP 6/20: ENV GPG_COUCH_KEY     390EF70BB1EA12B2773962950EE62FB37A00258D\r\n--> Using cache ad3a2134d39a73a793dea21fcd2d178cc4a9fc80d35e7fc952871db417c91c52\r\n--> ad3a2134d39\r\nSTEP 7/20: RUN set -eux;     apt-get update;     apt-get install -y curl;     export GNUPGHOME=\"$(mktemp -d)\";     curl -fL -o keys.asc https://couchdb.apache.org/repo/keys.asc;     gpg --batch --import keys.asc;     gpg --batch --export \"${GPG_COUCH_KEY}\" > /usr/share/keyrings/couchdb-archive-keyring.gpg;     command -v gpgconf && gpgconf --kill all || :;     rm -rf \"$GNUPGHOME\";     apt-key list;     apt purge -y --autoremove curl;     rm -rf /var/lib/apt/lists/*\r\n--> Using cache b6575178b4ca6bb472eab38e3b517993a5010c8fb367c1ac5cb9884ae4828412\r\n--> b6575178b4c\r\nSTEP 8/20: ENV COUCHDB_VERSION 3.2.2-1\r\n--> Using cache 7177e466f1a1164eaf7f381a033978e5ec1fdb8ca3da819c30a2af691d35305c\r\n--> 7177e466f1a\r\nSTEP 9/20: RUN . /etc/os-release;     echo \"deb [signed-by=/usr/share/keyrings/couchdb-archive-keyring.gpg] https://apache.jfrog.io/artifactory/couchdb-deb/ ${VERSION_CODENAME} main\" |         tee /etc/apt/sources.list.d/couchdb.list >/dev/null\r\n--> Using cache 3f504a04eb8d62bd2b1e81dec865b5ccd22cec5f2f2f8793f21a468fa18ee0a9\r\n--> 3f504a04eb8\r\nSTEP 10/20: COPY debian-buster/couchdb_3.2.2-05628e8~buster_amd64.deb /tmp/packages/\r\n--> Using cache 58f61fe809b5da2a974b71d729203dc269713c9297e01ab2f70a354bb946ad06\r\n--> 58f61fe809b\r\nSTEP 11/20: COPY debian-buster/couchdb-dbgsym_3.2.2-05628e8~buster_amd64.deb /tmp/packages/\r\n--> Using cache 756d9ecfccba323e98d6781562881f596af0590801896f59deb2b3f4d9f3790e\r\n--> 756d9ecfccb\r\nSTEP 12/20: RUN set -eux;     apt-get update;         echo \"couchdb couchdb/mode select none\" | debconf-set-selections;     DEBIAN_FRONTEND=noninteractive apt-get install -y --allow-downgrades --allow-remove-essential --allow-change-held-packages         /tmp/packages/*     ;     rmdir /var/lib/couchdb /var/log/couchdb;     rm /opt/couchdb/data /opt/couchdb/var/log;     mkdir -p /opt/couchdb/data /opt/couchdb/var/log;     chown couchdb:couchdb /opt/couchdb/data /opt/couchdb/var/log;     chmod 777 /opt/couchdb/data /opt/couchdb/var/log;     rm /opt/couchdb/etc/default.d/10-filelog.ini;     find /opt/couchdb \\! \\( -user couchdb -group couchdb \\) -exec chown -f couchdb:couchdb '{}' +;     find /opt/couchdb/etc -type d ! -perm 0755 -exec chmod -f 0755 '{}' +;     find /opt/couchdb/etc -type f ! -perm 0644 -exec chmod -f 0644 '{}' +;     chmod -f 0777 /opt/couchdb/etc/local.d;     rm -rf /var/lib/apt/lists/*;\r\n+ apt-get update\r\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\r\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\r\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\r\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8184 kB]\r\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [208 kB]\r\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\r\nGet:7 https://apache.jfrog.io/artifactory/couchdb-deb bullseye InRelease [5155 B]\r\nGet:8 https://apache.jfrog.io/artifactory/couchdb-deb bullseye/main amd64 Packages [5242 B]\r\nFetched 8625 kB in 1s (6869 kB/s)\r\nReading package lists...\r\n+ echo couchdb couchdb/mode select none\r\n+ debconf-set-selections\r\n+ DEBIAN_FRONTEND=noninteractive apt-get install -y --allow-downgrades --allow-remove-essential --allow-change-held-packages /tmp/packages/couchdb-dbgsym_3.2.2-05628e8~buster_amd64.deb /tmp/packages/couchdb_3.2.2-05628e8~buster_amd64.deb\r\nReading package lists...\r\nBuilding dependency tree...\r\nReading state information...\r\nSome packages could not be installed. This may mean that you have\r\nrequested an impossible situation or if you are using the unstable\r\ndistribution that some required packages have not yet been created\r\nor been moved out of Incoming.\r\nThe following information may help to resolve the situation:\r\n\r\nThe following packages have unmet dependencies:\r\n couchdb : Depends: libmozjs-60-0 but it is not installable\r\n           Depends: libicu63 (>= 63.1-1~) but it is not installable\r\nE: Unable to correct problems, you have held broken packages.\r\nError: error building at STEP \"RUN set -eux;     apt-get update;         echo \"couchdb couchdb/mode select none\" | debconf-set-selections;     DEBIAN_FRONTEND=noninteractive apt-get install -y --allow-downgrades --allow-remove-essential --allow-change-held-packages         /tmp/packages/*     ;     rmdir /var/lib/couchdb /var/log/couchdb;     rm /opt/couchdb/data /opt/couchdb/var/log;     mkdir -p /opt/couchdb/data /opt/couchdb/var/log;     chown couchdb:couchdb /opt/couchdb/data /opt/couchdb/var/log;     chmod 777 /opt/couchdb/data /opt/couchdb/var/log;     rm /opt/couchdb/etc/default.d/10-filelog.ini;     find /opt/couchdb \\! \\( -user couchdb -group couchdb \\) -exec chown -f couchdb:couchdb '{}' +;     find /opt/couchdb/etc -type d ! -perm 0755 -exec chmod -f 0755 '{}' +;     find /opt/couchdb/etc -type f ! -perm 0644 -exec chmod -f 0644 '{}' +;     chmod -f 0777 /opt/couchdb/etc/local.d;     rm -rf /var/lib/apt/lists/*;\": error while running runtime: exit status 100\r\n...\r\n\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339319235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339405256","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1339405256","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1339405256,"node_id":"IC_kwDOAAMmUc5P1bPI","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T13:40:54Z","updated_at":"2022-12-06T13:40:54Z","author_association":"MEMBER","body":"we don't have images for PRs, sorry","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339405256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339463733","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1339463733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1339463733,"node_id":"IC_kwDOAAMmUc5P1pg1","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T14:22:34Z","updated_at":"2022-12-06T14:22:34Z","author_association":"MEMBER","body":"feel free to try a newer spidermonkey, 60, 68, 78, 86, 91 all work: https://github.com/apache/couchdb/blob/main/src/couch/rebar.config.script#L62-L71 build CouchDB with `./configure --spidermonkey-version 91`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339463733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339915587","html_url":"https://github.com/apache/couchdb/pull/4294#issuecomment-1339915587","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4294","id":1339915587,"node_id":"IC_kwDOAAMmUc5P3X1D","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-06T19:42:18Z","updated_at":"2022-12-06T19:42:18Z","author_association":"CONTRIBUTOR","body":"> Did you want to leave the remaining `?debugHere` statements in case this doesn't fix it?\r\n> \r\n> ```\r\n>   smoosh_tests:27: -smoosh_test_/0-fun-10- (t_checkpointing_works)...test/smoosh_tests.erl:262:<0.1776.0>: <-\r\n> test/smoosh_tests.erl:264:<0.1776.0>: <-\r\n> test/smoosh_tests.erl:267:<0.1776.0>: <-\r\n> test/smoosh_tests.erl:269:<0.1776.0>: <-\r\n> [0.024 s] ok\r\n> ```\r\n\r\nYeah, I figured we'd leave some logging in there for now. If a few months pass and these don't fail we can remove them.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1339915587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1340884592","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1340884592","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1340884592,"node_id":"IC_kwDOAAMmUc5P7EZw","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T12:17:20Z","updated_at":"2022-12-07T12:17:20Z","author_association":"MEMBER","body":"update, I updated the PR with a patch that actually works :D","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1340884592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1340924188","html_url":"https://github.com/apache/couchdb/pull/4291#issuecomment-1340924188","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4291","id":1340924188,"node_id":"IC_kwDOAAMmUc5P7OEc","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T12:53:43Z","updated_at":"2022-12-07T12:53:43Z","author_association":"CONTRIBUTOR","body":"Are the GH workflows working/necessary, if they are not in the root directory after the merge?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1340924188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1341144819","html_url":"https://github.com/apache/couchdb/pull/4291#issuecomment-1341144819","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4291","id":1341144819,"node_id":"IC_kwDOAAMmUc5P8D7z","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T15:34:46Z","updated_at":"2022-12-07T15:34:46Z","author_association":"MEMBER","body":"@big-r81 they worked in the original repo when they are at the root. good call, though. we either need to adjust them so they work here or remove them. haven't thought much about it.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1341144819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1341152139","html_url":"https://github.com/apache/couchdb/pull/4291#issuecomment-1341152139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4291","id":1341152139,"node_id":"IC_kwDOAAMmUc5P8FuL","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T15:39:58Z","updated_at":"2022-12-07T15:39:58Z","author_association":"MEMBER","body":"API choices.\r\n\r\nCurrently you can define a nouveau index almost identically to clouseau, the `index()` function behaves the same way, you just need to use \"nouveau\" as a top-level key instead of \"indexes\";\r\n\r\nclouseau;\r\n\r\n```\r\n{\r\n  \"indexes\": {\r\n    \"bar\": {\r\n      \"default_analyzer\": \"standard\",\r\n      \"field_analyzers\": {\r\n        \"foo\": \"english\"\r\n      },\r\n      \"index\": \"function(doc) { index(\\\"foo\\\", \\\"bar\\\", {\\\"store\\\":true}); index(\\\"bar\\\", doc.bar, {\\\"store\\\":true,\\\"facet\\\":true}); }\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nnouveau\r\n```\r\n{\r\n  \"nouveau\": {\r\n    \"bar\": {\r\n      \"default_analyzer\": \"standard\",\r\n      \"field_analyzers\": {\r\n        \"foo\": \"english\"\r\n      },\r\n      \"index\": \"function(doc) { index(\\\"foo\\\", \\\"bar\\\", {\\\"store\\\":true}); index(\\\"bar\\\", doc.bar, {\\\"store\\\":true,\\\"facet\\\":true}); }\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nthe index() function is enhanced for nouveau (https://github.com/rnewson/nouveau#index-function) giving the user better control over the indexing process but the basic shape for clouseau works the same.\r\n\r\nThe alternative proposal is to use a version attribute\r\n\r\n```\r\n  \"indexes\": {\r\n    \"bar\": {\r\n      \"version\": 2,\r\n      \"default_analyzer\": \"standard\",\r\n      \"field_analyzers\": {\r\n        \"foo\": \"english\"\r\n      },\r\n      \"index\": \"function(doc) { index(\\\"foo\\\", \\\"bar\\\", {\\\"store\\\":true}); index(\\\"bar\\\", doc.bar, {\\\"store\\\":true,\\\"facet\\\":true}); }\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis could either be a `\"version\": 2` or perhaps a `\"engine\": \"nouveau\"`\r\n\r\ndreyfus and erlang-side nouveau would be adjusted to take the appropriate subset from the \"indexes\" object if we went this way.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1341152139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1341268042","html_url":"https://github.com/apache/couchdb/pull/4292#issuecomment-1341268042","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4292","id":1341268042,"node_id":"IC_kwDOAAMmUc5P8iBK","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-07T16:52:04Z","updated_at":"2022-12-07T19:41:51Z","author_association":"CONTRIBUTOR","body":"I had tried a quick test with a 500k docs view from https://gist.github.com/nickva/f4177e581a5ba275b854b9a5af875d84 and don't seem to recover the speedup yet. (Ignore the sizes the dtavg is the time to query the view in seconds, the script has `\"autoupdate\": False` ddoc flag to avoid ken auto-indexing, so all the time should be spent building it from scratch\r\n\r\nMain\r\n====\r\n\r\njs-1.8.5\r\n```\r\nfile      active    external  dtavg\r\n18616696  17671120  14988273  29.380\r\n18620792  17677145  14988244  28.480\r\n18628984  17676934  14988360  29.301\r\n```\r\n\r\njs-78\r\n```\r\nfile      active    external  dtavg\r\n18076024  17612956  14984735  46.296\r\n18088312  17614972  14984619  46.416\r\n18092408  17605353  14984677  44.620\r\n```\r\n\r\njs-91\r\n```\r\nfile      active    external  dtavg\r\n18354552  17638764  14986272  36.837\r\n18436472  17653248  14986968  34.450\r\n18428280  17654448  14986852  33.743\r\n```\r\n\r\n\r\nWith fix/3517-part7 PR\r\n====\r\n\r\njs-1.8.5\r\n```\r\n18620792  17669797  14988215  28.369\r\n18624888  17677835  14988389  28.598\r\n18665848  17673626  14988853  28.989\r\n```\r\n\r\njs-78 + fix/3517-part7\r\n```\r\nfile      active    external  dtavg\r\n18628984  17684599  14988186  34.203\r\n18620792  17676887  14988186  33.917\r\n18624888  17670314  14988215  33.268\r\n```\r\n\r\njs-91 + fix/3517-part7\r\n```\r\nfile      active    external  dtavg\r\n18628984  17673652  14988244  30.974\r\n18633080  17683572  14988215  30.859\r\n18628984  17680489  14988331  30.344\r\n```\r\n\r\nEDIT: Previously I didn't see the performance improvement and as @janl mentioned in couchdb-dev on Slack it's due to my script using here-docs for the reduce function which has an extra `\\n` in front. Updated the comment with the fixed string. Although we could probably try to strip to \\n and other whitespace around it to avoid users falling into the same trap.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1341268042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342125074","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1342125074","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1342125074,"node_id":"IC_kwDOAAMmUc5P_zQS","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T06:20:37Z","updated_at":"2022-12-08T06:21:38Z","author_association":"NONE","body":"Okay, thanks, looks like I need to go with libmozjs-78, if I want to use debian bullseye repos:\r\n\r\n```bash\r\n$ podman run --rm -it debian:bullseye-slim\r\nroot@e0167e5dead8:/# apt-get update\r\nGet:1 http://deb.debian.org/debian bullseye InRelease [116 kB]\r\nGet:2 http://deb.debian.org/debian-security bullseye-security InRelease [48.4 kB]\r\nGet:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]\r\nGet:4 http://deb.debian.org/debian bullseye/main amd64 Packages [8184 kB]\r\nGet:5 http://deb.debian.org/debian-security bullseye-security/main amd64 Packages [209 kB]\r\nGet:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]\r\nFetched 8615 kB in 1s (7371 kB/s)                           \r\nReading package lists... Done\r\nroot@e0167e5dead8:/# apt-cache search libmozjs\r\nlibmozjs-78-0 - SpiderMonkey JavaScript library\r\nlibmozjs-78-dev - SpiderMonkey JavaScript library - development headers\r\n```\r\n\r\nTherefore, I recompiled by doing the following steps (reusing the build container images, just recompile CouchDB), unfortunatly, `make release` fails in that case (please find the logs below). I tried again with defaults `./configure && make release` which seem to work (not attaching those logs again to keep the output a bit more readable).\r\n\r\n```bash\r\n$ podman run --name couchdb-fix-3517 -it localhost/apache/couchdbci-debian:buster-erlang-23.3.4.15\r\njenkins@401db7b11852:/$ git clone --depth=1 -b fix/3517-part7 https://github.com/apache/couchdb.git\r\nfatal: could not create work tree dir 'couchdb': Permission denied\r\njenkins@401db7b11852:/$ cd ~\r\njenkins@401db7b11852:~$ git clone --depth=1 -b fix/3517-part7 https://github.com/apache/couchdb.git\r\nCloning into 'couchdb'...\r\nremote: Enumerating objects: 1508, done.\r\nremote: Counting objects: 100% (1508/1508), done.\r\nremote: Compressing objects: 100% (1309/1309), done.\r\nremote: Total 1508 (delta 289), reused 625 (delta 138), pack-reused 0\r\nReceiving objects: 100% (1508/1508), 4.95 MiB | 18.51 MiB/s, done.\r\nResolving deltas: 100% (289/289), done.\r\njenkins@401db7b11852:~$ cd couchdb/\r\njenkins@401db7b11852:~/couchdb$ git log\r\ncommit f6d262aa2bfe5d060cc8798f7d8d00b71f61cfe7 (grafted, HEAD -> fix/3517-part7, origin/fix/3517-part7)\r\nAuthor: Jan Lehnardt <jan@apache.org>\r\nDate:   Tue Dec 6 12:50:15 2022 +0100\r\n\r\n    fix(3517): super-simplistic fix to avoid costly AST transforms when they are not needed\r\njenkins@401db7b11852:~/couchdb$ ./configure --spidermonkey-version 78\r\n==> configuring couchdb in rel/couchdb.config\r\nCloning into '/home/jenkins/couchdb/src/rebar'...\r\nremote: Enumerating objects: 8885, done.\r\nremote: Counting objects: 100% (10/10), done.\r\nremote: Compressing objects: 100% (6/6), done.\r\nremote: Total 8885 (delta 4), reused 9 (delta 4), pack-reused 8875\r\nReceiving objects: 100% (8885/8885), 2.16 MiB | 19.44 MiB/s, done.\r\nResolving deltas: 100% (5705/5705), done.\r\nmake: Entering directory '/home/jenkins/couchdb/src/rebar'\r\n./bootstrap\r\nNo beam files found.\r\nRecompile: src/rebar\r\nRecompile: src/rebar_abnfc_compiler\r\nRecompile: src/rebar_app_utils\r\nRecompile: src/rebar_appups\r\nRecompile: src/rebar_asn1_compiler\r\nRecompile: src/rebar_base_compiler\r\nRecompile: src/rebar_cleaner\r\nRecompile: src/rebar_config\r\nRecompile: src/rebar_core\r\nRecompile: src/rebar_cover_utils\r\nRecompile: src/rebar_ct\r\nsrc/rebar_ct.erl:291: Warning: crypto:rand_uniform/2 is deprecated; use rand:uniform/1 instead\r\nRecompile: src/rebar_deps\r\nRecompile: src/rebar_dia_compiler\r\nRecompile: src/rebar_dialyzer\r\nRecompile: src/rebar_edoc\r\nRecompile: src/rebar_erlc_compiler\r\nRecompile: src/rebar_erlydtl_compiler\r\nRecompile: src/rebar_escripter\r\nRecompile: src/rebar_eunit\r\nsrc/rebar_eunit.erl:282: Warning: crypto:rand_uniform/2 is deprecated; use rand:uniform/1 instead\r\nRecompile: src/rebar_file_utils\r\nRecompile: src/rebar_getopt\r\nRecompile: src/rebar_lfe_compiler\r\nRecompile: src/rebar_log\r\nRecompile: src/rebar_metacmds\r\nRecompile: src/rebar_mustache\r\nRecompile: src/rebar_neotoma_compiler\r\nRecompile: src/rebar_otp_app\r\nRecompile: src/rebar_otp_appup\r\nRecompile: src/rebar_port_compiler\r\nRecompile: src/rebar_proto_compiler\r\nRecompile: src/rebar_proto_gpb_compiler\r\nRecompile: src/rebar_protobuffs_compiler\r\nRecompile: src/rebar_qc\r\nRecompile: src/rebar_rand_compat\r\nRecompile: src/rebar_rel_utils\r\nRecompile: src/rebar_reltool\r\nRecompile: src/rebar_require_vsn\r\nRecompile: src/rebar_shell\r\nRecompile: src/rebar_subdirs\r\nRecompile: src/rebar_templater\r\nRecompile: src/rebar_upgrade\r\nRecompile: src/rebar_utils\r\nRecompile: src/rebar_xref\r\nRecompile: src/rmemo\r\n==> rebar (compile)\r\n==> rebar (escriptize)\r\nCongratulations! You now have a self-contained script called \"rebar\" in\r\nyour current working directory. Place this script anywhere in your path\r\nand you can use rebar to build OTP-compliant apps.\r\nmake: Leaving directory '/home/jenkins/couchdb/src/rebar'\r\nmake: Entering directory '/home/jenkins/couchdb/src/rebar'\r\nmake: Leaving directory '/home/jenkins/couchdb/src/rebar'\r\nCloning into '/home/jenkins/couchdb/src/rebar3'...\r\nremote: Enumerating objects: 515, done.\r\nremote: Counting objects: 100% (515/515), done.\r\nremote: Compressing objects: 100% (445/445), done.\r\nremote: Total 515 (delta 73), reused 300 (delta 38), pack-reused 0\r\nReceiving objects: 100% (515/515), 862.32 KiB | 8.89 MiB/s, done.\r\nResolving deltas: 100% (73/73), done.\r\nEvaluating config script \"/home/jenkins/couchdb/src/rebar3/_build/default/lib/rebar/src/rebar.app.src.script\"\r\n===> Verifying dependencies...\r\n===> Analyzing applications...\r\n===> Compiling getopt\r\n===> Compiling providers\r\n===> Compiling cf\r\n===> Compiling erlware_commons\r\n===> Compiling bbmustache\r\n===> Compiling relx\r\n===> Compiling eunit_formatters\r\n===> Compiling cth_readable\r\n===> Compiling certifi\r\n===> Compiling ssl_verify_fun\r\n===> Compiling rebar\r\n===> Verifying dependencies...\r\n===> Cleaning out certifi...\r\n===> Cleaning out cf...\r\n===> Cleaning out erlware_commons...\r\n===> Cleaning out getopt...\r\n===> Cleaning out providers...\r\n===> Cleaning out rebar...\r\n===> Verifying dependencies...\r\n===> Analyzing applications...\r\n===> Compiling getopt\r\n===> Compiling providers\r\n===> Compiling cf\r\n===> Compiling erlware_commons\r\n===> Compiling bbmustache\r\n===> Compiling relx\r\n===> Compiling eunit_formatters\r\n===> Compiling cth_readable\r\n===> Compiling certifi\r\n===> Compiling ssl_verify_fun\r\n===> Compiling rebar\r\n===> Building escript for rebar...\r\nCloning into '/home/jenkins/couchdb/src/erlfmt'...\r\nremote: Enumerating objects: 91, done.\r\nremote: Counting objects: 100% (91/91), done.\r\nremote: Compressing objects: 100% (83/83), done.\r\nremote: Total 91 (delta 6), reused 38 (delta 2), pack-reused 0\r\nUnpacking objects: 100% (91/91), done.\r\n===> Verifying dependencies...\r\n===> Fetching getopt v1.0.2\r\n===> Analyzing applications...\r\n===> Compiling getopt\r\n===> Analyzing applications...\r\n^Z\r\n[1]+  Stopped                 ./configure --spidermonkey-version 78\r\njenkins@401db7b11852:~/couchdb$ fg\r\n./configure --spidermonkey-version 78\r\n===> Compiling erlfmt\r\n===> Building escript for erlfmt...\r\n===> Verifying dependencies...\r\n===> Cleaning out erlfmt...\r\n==> updating dependencies\r\nWARN:  Expected /home/jenkins/couchdb/src/fauxton to be a raw dependency directory, but no directory found.\r\n==> couch_epi (get-deps)\r\n==> config (get-deps)\r\n==> couch_log (get-deps)\r\n==> khash (get-deps)\r\nWARN:  Missing plugins: [pc]\r\n==> b64url (get-deps)\r\n==> ets_lru (get-deps)\r\n==> chttpd (get-deps)\r\n==> couch (get-deps)\r\n==> couch_event (get-deps)\r\n==> mem3 (get-deps)\r\n==> couch_index (get-deps)\r\n==> couch_mrview (get-deps)\r\n==> couch_replicator (get-deps)\r\n==> couch_plugins (get-deps)\r\n==> couch_pse_tests (get-deps)\r\n==> couch_stats (get-deps)\r\n==> couch_peruser (get-deps)\r\n==> couch_tests (get-deps)\r\n==> couch_dist (get-deps)\r\n==> custodian (get-deps)\r\n==> ddoc_cache (get-deps)\r\n==> dreyfus (get-deps)\r\n==> fabric (get-deps)\r\n==> global_changes (get-deps)\r\n==> ioq (get-deps)\r\n==> jwtf (get-deps)\r\n==> ken (get-deps)\r\n==> mango (get-deps)\r\n==> rexi (get-deps)\r\n==> setup (get-deps)\r\n==> smoosh (get-deps)\r\n==> weatherreport (get-deps)\r\n==> couch_prometheus (get-deps)\r\n==> rel (get-deps)\r\n==> couchdb (get-deps)\r\nWARN:  Expected /home/jenkins/couchdb/src/fauxton to be a raw dependency directory, but no directory found.\r\nPulling snappy from {git,\"https://github.com/apache/couchdb-snappy.git\",\r\n                         {tag,\"CouchDB-1.0.8\"}}\r\nCloning into 'snappy'...\r\nPulling fauxton from {git,\"https://github.com/apache/couchdb-fauxton\",\r\n                          {tag,\"v1.2.8\"}}\r\nCloning into 'fauxton'...\r\nPulling folsom from {git,\"https://github.com/apache/couchdb-folsom.git\",\r\n                         {tag,\"CouchDB-0.8.4\"}}\r\nCloning into 'folsom'...\r\nPulling hyper from {git,\"https://github.com/apache/couchdb-hyper.git\",\r\n                        {tag,\"CouchDB-2.2.0-7\"}}\r\nCloning into 'hyper'...\r\nPulling ibrowse from {git,\"https://github.com/apache/couchdb-ibrowse.git\",\r\n                          {tag,\"CouchDB-4.4.2-5\"}}\r\nCloning into 'ibrowse'...\r\nPulling jiffy from {git,\"https://github.com/apache/couchdb-jiffy.git\",\r\n                        {tag,\"1.1.1\"}}\r\nCloning into 'jiffy'...\r\nPulling mochiweb from {git,\"https://github.com/apache/couchdb-mochiweb.git\",\r\n                           {tag,\"v3.1.1\"}}\r\nCloning into 'mochiweb'...\r\nPulling meck from {git,\"https://github.com/apache/couchdb-meck.git\",\r\n                       {tag,\"0.9.2\"}}\r\nCloning into 'meck'...\r\nPulling recon from {git,\"https://github.com/apache/couchdb-recon.git\",\r\n                        {tag,\"2.5.2\"}}\r\nCloning into 'recon'...\r\nPulling proper from {git,\"https://github.com/proper-testing/proper\",\r\n                         {tag,\"v1.4\"}}\r\nCloning into 'proper'...\r\n==> snappy (get-deps)\r\n==> fauxton (get-deps)\r\n==> meck (get-deps)\r\n==> folsom (get-deps)\r\nPulling bear from {git,\"https://github.com/apache/couchdb-bear.git\",\r\n                       \"008f48aff819126e281d5ccae80a258bf9bf9c30\"}\r\nCloning into 'bear'...\r\n==> bear (get-deps)\r\n==> hyper (get-deps)\r\n==> ibrowse (get-deps)\r\n==> jiffy (get-deps)\r\n==> mochiweb (get-deps)\r\n==> recon (get-deps)\r\nWARN:  Missing plugins: [covertool]\r\n==> proper (get-deps)\r\n==> couchdb (update-deps)\r\nUpdating snappy from {git,\"https://github.com/apache/couchdb-snappy.git\",\r\n                          {tag,\"CouchDB-1.0.8\"}}\r\nUpdating fauxton from {git,\"https://github.com/apache/couchdb-fauxton\",\r\n                           {tag,\"v1.2.8\"}}\r\nUpdating folsom from {git,\"https://github.com/apache/couchdb-folsom.git\",\r\n                          {tag,\"CouchDB-0.8.4\"}}\r\nUpdating hyper from {git,\"https://github.com/apache/couchdb-hyper.git\",\r\n                         {tag,\"CouchDB-2.2.0-7\"}}\r\nUpdating ibrowse from {git,\"https://github.com/apache/couchdb-ibrowse.git\",\r\n                           {tag,\"CouchDB-4.4.2-5\"}}\r\nUpdating jiffy from {git,\"https://github.com/apache/couchdb-jiffy.git\",\r\n                         {tag,\"1.1.1\"}}\r\nUpdating mochiweb from {git,\"https://github.com/apache/couchdb-mochiweb.git\",\r\n                            {tag,\"v3.1.1\"}}\r\nUpdating meck from {git,\"https://github.com/apache/couchdb-meck.git\",\r\n                        {tag,\"0.9.2\"}}\r\nUpdating recon from {git,\"https://github.com/apache/couchdb-recon.git\",\r\n                         {tag,\"2.5.2\"}}\r\nUpdating proper from {git,\"https://github.com/proper-testing/proper\",\r\n                          {tag,\"v1.4\"}}\r\nUpdating bear from {git,\"https://github.com/apache/couchdb-bear.git\",\r\n                        \"008f48aff819126e281d5ccae80a258bf9bf9c30\"}\r\nWARN:  Missing plugins: [covertool]\r\nYou have configured Apache CouchDB, time to relax. Relax.\r\njenkins@401db7b11852:~/couchdb$ \r\njenkins@401db7b11852:~/couchdb$ \r\njenkins@401db7b11852:~/couchdb$ \r\njenkins@401db7b11852:~/couchdb$ \r\njenkins@401db7b11852:~/couchdb$ \r\njenkins@401db7b11852:~/couchdb$ make release\r\nfatal: No names found, cannot describe anything.\r\n==> snappy (compile)\r\nCompiled src/snappy.erl\r\nCompiling c_src/snappy_nif.cc\r\nc_src/snappy_nif.cc: In function 'ERL_NIF_TERM snappy_compress(ErlNifEnv*, int, const ERL_NIF_TERM*)':\r\nc_src/snappy_nif.cc:156:28: warning: catching polymorphic type 'class std::bad_alloc' by value [-Wcatch-value=]\r\n     } catch(std::bad_alloc e) {\r\n                            ^\r\nCompiling c_src/snappy/snappy-sinksource.cc\r\nCompiling c_src/snappy/snappy-stubs-internal.cc\r\nCompiling c_src/snappy/snappy.cc\r\nc_src/snappy/snappy.cc: In instantiation of 'bool snappy::SnappyScatteredWriter<Allocator>::AppendFromSelf(size_t, size_t) [with Allocator = snappy::SnappySinkAllocator; size_t = long unsigned int]':\r\nc_src/snappy/snappy.cc:779:13:   required from 'void snappy::SnappyDecompressor::DecompressAllTags(Writer*) [with Writer = snappy::SnappyScatteredWriter<snappy::SnappySinkAllocator>]'\r\nc_src/snappy/snappy.cc:865:3:   required from 'bool snappy::InternalUncompressAllTags(snappy::SnappyDecompressor*, Writer*, snappy::uint32) [with Writer = snappy::SnappyScatteredWriter<snappy::SnappySinkAllocator>; snappy::uint32 = unsigned int]'\r\nc_src/snappy/snappy.cc:1549:78:   required from here\r\nc_src/snappy/snappy.cc:1401:21: warning: comparison of integer expressions of different signedness: 'size_t' {aka 'long unsigned int'} and 'long int' [-Wsign-compare]\r\n     if (offset - 1u < op_ptr_ - op_base_) {\r\n         ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~\r\n==> bear (compile)\r\n/home/jenkins/couchdb/src/bear/src/bear.erl:28: Warning: export_all flag enabled - all functions will be exported\r\nCompiled src/bear.erl\r\n==> meck (compile)\r\nCompiled src/meck_util.erl\r\nCompiled src/meck_matcher.erl\r\nCompiled src/meck_ret_spec.erl\r\nCompiled src/meck_history.erl\r\nCompiled src/meck_expect.erl\r\nCompiled src/meck_cover.erl\r\nCompiled src/meck_code.erl\r\nCompiled src/meck_code_gen.erl\r\nCompiled src/meck_args_matcher.erl\r\nCompiled src/meck.erl\r\nCompiled src/meck_proc.erl\r\n==> folsom (compile)\r\nCompiled src/folsom_sup.erl\r\nCompiled src/folsom_utils.erl\r\nCompiled src/folsom_sample_uniform.erl\r\nCompiled src/folsom_sample_slide_sup.erl\r\nCompiled src/folsom_sample_slide_uniform.erl\r\nCompiled src/folsom_sample_slide_sorted.erl\r\nCompiled src/folsom_sample_slide_server.erl\r\nCompiled src/folsom_sample_slide.erl\r\nCompiled src/folsom_sample_none.erl\r\nCompiled src/folsom_sample.erl\r\nCompiled src/folsom_metrics_spiral.erl\r\nCompiled src/folsom_sample_exdec.erl\r\nCompiled src/folsom_vm_metrics.erl\r\nCompiled src/folsom_metrics_meter_reader.erl\r\nCompiled src/folsom_metrics_histogram_ets.erl\r\nCompiled src/folsom_metrics_history.erl\r\nCompiled src/folsom_metrics_meter.erl\r\nCompiled src/folsom_metrics_gauge.erl\r\nCompiled src/folsom_metrics_histogram.erl\r\nCompiled src/folsom_metrics_duration.erl\r\nCompiled src/folsom_metrics_counter.erl\r\nCompiled src/folsom_meter_timer_server.erl\r\nCompiled src/folsom_ewma.erl\r\nCompiled src/folsom_metrics.erl\r\nCompiled src/folsom.erl\r\nCompiled src/folsom_ets.erl\r\n==> hyper (compile)\r\nCompiled src/hyper_register.erl\r\nCompiled src/hyper_carray.erl\r\nCompiled src/hyper_const.erl\r\nCompiled src/hyper_gb.erl\r\nCompiled src/hyper_array.erl\r\nCompiled src/hyper_binary.erl\r\nCompiled src/hyper_binary_rle.erl\r\nCompiled src/hyper.erl\r\nCompiling c_src/hyper_carray.c\r\n==> ibrowse (compile)\r\nCompiled src/ibrowse_lib.erl\r\nCompiled src/ibrowse_sup.erl\r\nCompiled src/ibrowse_socks5.erl\r\nCompiled src/ibrowse_app.erl\r\nCompiled src/ibrowse_lb.erl\r\nCompiled src/ibrowse.erl\r\nCompiled src/ibrowse_http_client.erl\r\n==> jiffy (compile)\r\nCompiled src/jiffy_utf8.erl\r\nCompiled src/jiffy.erl\r\nCompiling c_src/decoder.c\r\nCompiling c_src/encoder.c\r\nCompiling c_src/jiffy.c\r\nCompiling c_src/termstack.c\r\nCompiling c_src/utf8.c\r\nCompiling c_src/util.c\r\nCompiling c_src/doubles.cc\r\nCompiling c_src/objects.cc\r\nCompiling c_src/double-conversion/bignum-dtoa.cc\r\nCompiling c_src/double-conversion/bignum.cc\r\nCompiling c_src/double-conversion/cached-powers.cc\r\nCompiling c_src/double-conversion/diy-fp.cc\r\nCompiling c_src/double-conversion/double-conversion.cc\r\nCompiling c_src/double-conversion/fast-dtoa.cc\r\nCompiling c_src/double-conversion/fixed-dtoa.cc\r\nCompiling c_src/double-conversion/strtod.cc\r\n==> mochiweb (compile)\r\nCompiled src/reloader.erl\r\nCompiled src/mochiweb_websocket.erl\r\nCompiled src/mochiweb_util.erl\r\nCompiled src/mochiweb_socket.erl\r\nCompiled src/mochiweb_socket_server.erl\r\nCompiled src/mochiweb_session.erl\r\nCompiled src/mochiweb_response.erl\r\nCompiled src/mochiweb_mime.erl\r\nCompiled src/mochiweb_io.erl\r\nCompiled src/mochiweb_multipart.erl\r\nCompiled src/mochiweb_http.erl\r\nCompiled src/mochiweb_headers.erl\r\nCompiled src/mochiweb_echo.erl\r\nCompiled src/mochiweb_cover.erl\r\nCompiled src/mochiweb_cookies.erl\r\nCompiled src/mochiweb_clock.erl\r\nCompiled src/mochiweb_request.erl\r\nCompiled src/mochiweb_base64url.erl\r\nCompiled src/mochiweb_acceptor.erl\r\nCompiled src/mochiweb.erl\r\nCompiled src/mochiutf8.erl\r\nCompiled src/mochitemp.erl\r\nCompiled src/mochinum.erl\r\nCompiled src/mochilogfile2.erl\r\nCompiled src/mochilists.erl\r\nCompiled src/mochiweb_html.erl\r\nCompiled src/mochijson.erl\r\nCompiled src/mochihex.erl\r\nCompiled src/mochijson2.erl\r\nCompiled src/mochiglobal.erl\r\nCompiled src/mochifmt_std.erl\r\nCompiled src/mochifmt_records.erl\r\nCompiled src/mochifmt.erl\r\nCompiled src/mochiweb_charref.erl\r\n==> recon (compile)\r\nCompiled src/recon_map.erl\r\nCompiled src/recon_rec.erl\r\nCompiled src/recon_trace.erl\r\nCompiled src/recon_lib.erl\r\nCompiled src/recon_alloc.erl\r\nCompiled src/recon.erl\r\nWARN:  Missing plugins: [covertool]\r\n==> proper (compile)\r\nCompiled src/vararg.erl\r\nCompiled src/proper_target.erl\r\nCompiled src/proper_unicode.erl\r\nCompiled src/proper_unused_imports_remover.erl\r\nCompiled src/proper_transformer.erl\r\nCompiled src/proper_symb.erl\r\nCompiled src/proper_types.erl\r\nCompiled src/proper_statem.erl\r\nCompiled src/proper_sets.erl\r\nCompiled src/proper_sa.erl\r\nCompiled src/proper_queue.erl\r\nCompiled src/proper_shrink.erl\r\nCompiled src/proper_ordsets.erl\r\nCompiled src/proper_prop_remover.erl\r\nCompiled src/proper_orddict.erl\r\nCompiled src/proper_gen.erl\r\nCompiled src/proper_gb_trees.erl\r\nCompiled src/proper_gb_sets.erl\r\nCompiled src/proper_gen_next.erl\r\nCompiled src/proper_fsm.erl\r\nCompiled src/proper_dict.erl\r\nCompiled src/proper_array.erl\r\nCompiled src/proper_typeserver.erl\r\nCompiled src/proper_arith.erl\r\nCompiled src/proper.erl\r\nCompiled src/proper_erlang_abstract_code.erl\r\n==> couch_epi (compile)\r\nCompiled src/couch_epi_util.erl\r\nCompiled src/couch_epi_sup.erl\r\nCompiled src/couch_epi_module_keeper.erl\r\nCompiled src/couch_epi_plugin.erl\r\nCompiled src/couch_epi_functions.erl\r\nCompiled src/couch_epi_data_gen.erl\r\nCompiled src/couch_epi_data.erl\r\nCompiled src/couch_epi_codechange_monitor.erl\r\nCompiled src/couch_epi_app.erl\r\nCompiled src/couch_epi_codegen.erl\r\nCompiled src/couch_epi_functions_gen.erl\r\nCompiled src/couch_epi.erl\r\n==> config (compile)\r\nCompiled src/config_sup.erl\r\nCompiled src/config_util.erl\r\nCompiled src/config_notifier.erl\r\nCompiled src/config_writer.erl\r\nCompiled src/config_listener.erl\r\nCompiled src/config_listener_mon.erl\r\nCompiled src/config_app.erl\r\nCompiled src/config.erl\r\n==> couch_log (compile)\r\nCompiled src/couch_log_writer.erl\r\nCompiled src/couch_log_writer_stderr.erl\r\nCompiled src/couch_log_writer_journald.erl\r\nCompiled src/couch_log_writer_syslog.erl\r\nCompiled src/couch_log_writer_file.erl\r\nCompiled src/couch_log_util.erl\r\nCompiled src/couch_log_sup.erl\r\nCompiled src/couch_log_server.erl\r\nCompiled src/couch_log_monitor.erl\r\nCompiled src/couch_log_trunc_io_fmt.erl\r\nCompiled src/couch_log_error_logger_h.erl\r\nCompiled src/couch_log_config_dyn.erl\r\nCompiled src/couch_log_config.erl\r\nCompiled src/couch_log_app.erl\r\nCompiled src/couch_log.erl\r\nCompiled src/couch_log_formatter.erl\r\nCompiled src/couch_log_trunc_io.erl\r\n==> khash (compile)\r\nCompiled src/khash.erl\r\nCompiling c_src/hash.c\r\nCompiling c_src/khash.c\r\nWARN:  Missing plugins: [pc]\r\n==> b64url (compile)\r\nCompiled src/b64url.erl\r\nCompiling c_src/b64url.c\r\n==> ets_lru (compile)\r\nCompiled src/ets_lru.erl\r\n==> chttpd (compile)\r\nCompiled src/chttpd.erl\r\nCompiled src/chttpd_util.erl\r\nCompiled src/chttpd_xframe_options.erl\r\nCompiled src/chttpd_test_util.erl\r\nCompiled src/chttpd_stats.erl\r\nCompiled src/chttpd_view.erl\r\nCompiled src/chttpd_sup.erl\r\nCompiled src/chttpd_prefer_header.erl\r\nCompiled src/chttpd_plugin.erl\r\nCompiled src/chttpd_show.erl\r\nCompiled src/chttpd_rewrite.erl\r\nCompiled src/chttpd_httpd_handlers.erl\r\nCompiled src/chttpd_handlers.erl\r\nCompiled src/chttpd_misc.erl\r\nCompiled src/chttpd_node.erl\r\nCompiled src/chttpd_epi.erl\r\nCompiled src/chttpd_cors.erl\r\nCompiled src/chttpd_external.erl\r\nCompiled src/chttpd_auth_request.erl\r\nCompiled src/chttpd_auth.erl\r\nCompiled src/chttpd_app.erl\r\nCompiled src/chttpd_auth_cache.erl\r\nCompiled src/chttpd_db.erl\r\n==> couch (compile)\r\nCompiled src/couch_httpd.erl\r\nCompiled src/test_request.erl\r\nCompiled src/couch_uuids.erl\r\nCompiled src/couch_work_queue.erl\r\nCompiled src/couch_users_db.erl\r\nCompiled src/couch_totp.erl\r\nCompiled src/test_util.erl\r\nCompiled src/couch_task_status.erl\r\nCompiled src/couch_sup.erl\r\nCompiled src/couch_stream.erl\r\nCompiled src/couch_secondary_sup.erl\r\nCompiled src/couch_rand.erl\r\nCompiled src/couch_util.erl\r\nCompiled src/couch_proc_manager.erl\r\nCompiled src/couch_query_servers.erl\r\nCompiled src/couch_server.erl\r\nCompiled src/couch_primary_sup.erl\r\nCompiled src/couch_password_hasher.erl\r\nCompiled src/couch_partition.erl\r\nCompiled src/couch_passwords.erl\r\nCompiled src/couch_os_process.erl\r\nCompiled src/couch_lru.erl\r\nCompiled src/couch_multidb_changes.erl\r\nCompiled src/couch_io_logger.erl\r\nCompiled src/couch_native_process.erl\r\nCompiled src/couch_httpd_vhost.erl\r\nCompiled src/couch_key_tree.erl\r\nCompiled src/couch_httpd_rewrite.erl\r\nCompiled src/couch_httpd_handlers.erl\r\nCompiled src/couch_httpd_misc_handlers.erl\r\nCompiled src/couch_httpd_multipart.erl\r\nCompiled src/couch_hotp.erl\r\nCompiled src/couch_hash.erl\r\nCompiled src/couch_flags_config.erl\r\nCompiled src/couch_flags.erl\r\nCompiled src/couch_httpd_auth.erl\r\nCompiled src/couch_event_sup.erl\r\nCompiled src/couch_emsort.erl\r\nCompiled src/couch_ejson_size.erl\r\nCompiled src/couch_ejson_compare.erl\r\nCompiled src/couch_file.erl\r\nCompiled src/couch_httpd_db.erl\r\nCompiled src/couch_doc.erl\r\nCompiled src/couch_debug.erl\r\nCompiled src/couch_db_plugin.erl\r\nCompiled src/couch_db_header.erl\r\nCompiled src/couch_db_epi.erl\r\nCompiled src/couch_db_split.erl\r\nCompiled src/couch_db_engine.erl\r\nCompiled src/couch_db_updater.erl\r\nCompiled src/couch_compress.erl\r\nCompiled src/couch_changes.erl\r\nCompiled src/couch_bt_engine_stream.erl\r\nCompiled src/couch_bt_engine_header.erl\r\nCompiled src/couch_btree.erl\r\nCompiled src/couch_bt_engine_compactor.erl\r\nCompiled src/couch_db.erl\r\nCompiled src/couch_base32.erl\r\nCompiled src/couch_auth_cache.erl\r\nCompiled src/couch_app.erl\r\nCompiled src/couch.erl\r\nCompiled src/couch_bt_engine.erl\r\nCompiled src/couch_att.erl\r\nCompiling /home/jenkins/couchdb/src/couch/priv/couch_js/86/main.cpp\r\n/home/jenkins/couchdb/src/couch/priv/couch_js/86/main.cpp:24:10: fatal error: jsapi.h: No such file or directory\r\n #include <jsapi.h>\r\n          ^~~~~~~~~\r\ncompilation terminated.\r\nERROR: compile failed while processing /home/jenkins/couchdb/src/couch: rebar_abort\r\nmake: *** [Makefile:123: couch] Error 1\r\njenkins@401db7b11852:~/couchdb$ echo $?\r\n2\r\n```\r\n\r\nI could try rocky-8/ubi8 instead, not sure if it works there or has maybe a different default spidermonkey version available.\r\nBut `--spidermonkey-version 78` seem to be not working on bullseye.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342125074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342810711","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342810711","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342810711,"node_id":"IC_kwDOAAMmUc5QCapX","user":{"login":"benel","id":597307,"node_id":"MDQ6VXNlcjU5NzMwNw==","avatar_url":"https://avatars.githubusercontent.com/u/597307?v=4","gravatar_id":"","url":"https://api.github.com/users/benel","html_url":"https://github.com/benel","followers_url":"https://api.github.com/users/benel/followers","following_url":"https://api.github.com/users/benel/following{/other_user}","gists_url":"https://api.github.com/users/benel/gists{/gist_id}","starred_url":"https://api.github.com/users/benel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benel/subscriptions","organizations_url":"https://api.github.com/users/benel/orgs","repos_url":"https://api.github.com/users/benel/repos","events_url":"https://api.github.com/users/benel/events{/privacy}","received_events_url":"https://api.github.com/users/benel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T14:20:27Z","updated_at":"2022-12-08T14:20:27Z","author_association":"NONE","body":"Just to help you describe the problem:\r\n\r\n- Is this with the UI or with `curl`? or both?\r\n- Did you create the `_users` database first?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342810711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342815775","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342815775","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342815775,"node_id":"IC_kwDOAAMmUc5QCb4f","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T14:24:00Z","updated_at":"2022-12-08T14:24:00Z","author_association":"NONE","body":"   - I can't create a user with both UI and curl\n   - Yes. I created the _users database first\n\n\nOn Thu, Dec 8, 2022 at 3:20 PM Aurélien Bénel ***@***.***>\nwrote:\n\n> Just to help you describe the problem:\n>\n>    - Is this with the UI or with curl? or both?\n>    - Did you create the _users database first?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342810711>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJSY7B6LJQRYCGN6H6JHPBTWMHVDNANCNFSM6AAAAAASYGED6Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342815775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342832491","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342832491","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342832491,"node_id":"IC_kwDOAAMmUc5QCf9r","user":{"login":"benel","id":597307,"node_id":"MDQ6VXNlcjU5NzMwNw==","avatar_url":"https://avatars.githubusercontent.com/u/597307?v=4","gravatar_id":"","url":"https://api.github.com/users/benel","html_url":"https://github.com/benel","followers_url":"https://api.github.com/users/benel/followers","following_url":"https://api.github.com/users/benel/following{/other_user}","gists_url":"https://api.github.com/users/benel/gists{/gist_id}","starred_url":"https://api.github.com/users/benel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benel/subscriptions","organizations_url":"https://api.github.com/users/benel/orgs","repos_url":"https://api.github.com/users/benel/repos","events_url":"https://api.github.com/users/benel/events{/privacy}","received_events_url":"https://api.github.com/users/benel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T14:36:23Z","updated_at":"2022-12-08T14:36:23Z","author_association":"NONE","body":"And did you verify your installation with <http://localhost:5984/_utils/#/verifyinstall>?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342832491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342844256","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342844256","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342844256,"node_id":"IC_kwDOAAMmUc5QCi1g","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T14:45:04Z","updated_at":"2022-12-08T14:45:04Z","author_association":"NONE","body":"I clicked on the verify installation... everything seems checked except two:\n1. create view\n2. replication\n\nI really don't know the uses of those 2 as am still new to couchdb and\nhaven't had a reason to use those features so far\n\nOn Thu, Dec 8, 2022 at 3:36 PM Aurélien Bénel ***@***.***>\nwrote:\n\n> And did you verify your installation with\n> http://localhost:5984/_utils/#/verifyinstall?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342832491>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJSY7BY5JVXYK2UFLBNIE2LWMHW7HANCNFSM6AAAAAASYGED6Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342844256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342849374","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342849374","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342849374,"node_id":"IC_kwDOAAMmUc5QCkFe","user":{"login":"benel","id":597307,"node_id":"MDQ6VXNlcjU5NzMwNw==","avatar_url":"https://avatars.githubusercontent.com/u/597307?v=4","gravatar_id":"","url":"https://api.github.com/users/benel","html_url":"https://github.com/benel","followers_url":"https://api.github.com/users/benel/followers","following_url":"https://api.github.com/users/benel/following{/other_user}","gists_url":"https://api.github.com/users/benel/gists{/gist_id}","starred_url":"https://api.github.com/users/benel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/benel/subscriptions","organizations_url":"https://api.github.com/users/benel/orgs","repos_url":"https://api.github.com/users/benel/repos","events_url":"https://api.github.com/users/benel/events{/privacy}","received_events_url":"https://api.github.com/users/benel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T14:49:02Z","updated_at":"2022-12-08T14:49:02Z","author_association":"NONE","body":"> everything seems checked except two\r\n\r\nThen your installation is broken.\r\nIt's out of my skills but I'm sure you will find people here to help you with that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342849374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342852801","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342852801","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342852801,"node_id":"IC_kwDOAAMmUc5QCk7B","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T14:51:43Z","updated_at":"2022-12-08T14:51:43Z","author_association":"NONE","body":"Okay.. Thank you so much for the help\n\nOn Thu, Dec 8, 2022 at 3:49 PM Aurélien Bénel ***@***.***>\nwrote:\n\n> everything seems checked except two\n>\n> Then your installation is broken.\n> It's out of my skills but I'm sure you will find people here to help you\n> with that.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342849374>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJSY7BZAG2F6WEIXOQL7ELDWMHYORANCNFSM6AAAAAASYGED6Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342852801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342884492","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342884492","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342884492,"node_id":"IC_kwDOAAMmUc5QCsqM","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T15:14:08Z","updated_at":"2022-12-08T15:14:08Z","author_association":"CONTRIBUTOR","body":"On which OS is CouchDB running?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342884492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342892353","html_url":"https://github.com/apache/couchdb/pull/4291#issuecomment-1342892353","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4291","id":1342892353,"node_id":"IC_kwDOAAMmUc5QCulB","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T15:19:55Z","updated_at":"2022-12-08T15:19:55Z","author_association":"MEMBER","body":"@rnewson thanks for the view definition side of things. How would the query URLs look for this? And how do things look like in mango?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342892353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342899536","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342899536","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342899536,"node_id":"IC_kwDOAAMmUc5QCwVQ","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T15:25:09Z","updated_at":"2022-12-08T15:25:09Z","author_association":"NONE","body":"It's running on macOS\n\nOn Thu, Dec 8, 2022 at 4:14 PM Ronny Berndt ***@***.***>\nwrote:\n\n> On which OS is CouchDB running?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342884492>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJSY7B3F46XSYWCG4NBQCOLWMH3MXANCNFSM6AAAAAASYGED6Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342899536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342935595","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342935595","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342935595,"node_id":"IC_kwDOAAMmUc5QC5Ir","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T15:52:22Z","updated_at":"2022-12-08T15:52:22Z","author_association":"CONTRIBUTOR","body":"What version of macOS and is there anything in your logs?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342935595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342946405","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342946405","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342946405,"node_id":"IC_kwDOAAMmUc5QC7xl","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T16:01:06Z","updated_at":"2022-12-08T16:01:06Z","author_association":"NONE","body":"I am using macOS Catalina version 10.15.7. I've even tried installing \"brew\ninstall nspr\" as seen in the docs which was referring to something like a\nmissing dependency with mac but that still didn't solve the issue. below is\nmy last few logs\n\n\n[info] 2022-12-08T15:53:05.419616Z ***@***.*** <0.277.0> --------\ncouch_proc_manager <0.3206.1> died epipe\n[error] 2022-12-08T15:53:05.473739Z ***@***.*** <0.3209.1> --------\nOS Process died with status: 134\n[error] 2022-12-08T15:53:05.479716Z ***@***.*** <0.3209.1> --------\ngen_server <0.3209.1> terminated with reason: {exit_status,134}\n  last msg: redacted\n     state: {os_proc,\"./bin/couchjs\n./share/server/main.js\",#Port<0.21333>,fun couch_os_process:writejson/2,fun\ncouch_os_process:readjson/1,5000,300000}\n    extra: []\n[error] 2022-12-08T15:53:05.479934Z ***@***.*** <0.3209.1> --------\ngen_server <0.3209.1> terminated with reason: {exit_status,134}\n  last msg: redacted\n     state: {os_proc,\"./bin/couchjs\n./share/server/main.js\",#Port<0.21333>,fun couch_os_process:writejson/2,fun\ncouch_os_process:readjson/1,5000,300000}\n    extra: []\n[error] 2022-12-08T15:53:05.480553Z ***@***.*** <0.3209.1> --------\nCRASH REPORT Process  (<0.3209.1>) with 0 neighbors exited with reason:\n{exit_status,134} at gen_server:handle_common_reply/8(line:805) <=\nproc_lib:init_p_do_apply/3(line:226); initial_call:\n{couch_os_process,init,['Argument__1']}, ancestors: [<0.3208.1>],\nmessage_queue_len: 0, links: [], dictionary: [], trap_exit: false, status:\nrunning, heap_size: 2586, stack_size: 28, reductions: 1564\n[error] 2022-12-08T15:53:05.480865Z ***@***.*** <0.3209.1> --------\nCRASH REPORT Process  (<0.3209.1>) with 0 neighbors exited with reason:\n{exit_status,134} at gen_server:handle_common_reply/8(line:805) <=\nproc_lib:init_p_do_apply/3(line:226); initial_call:\n{couch_os_process,init,['Argument__1']}, ancestors: [<0.3208.1>],\n\nOn Thu, Dec 8, 2022 at 4:52 PM Ronny Berndt ***@***.***>\nwrote:\n\n> What version of macOS and is there anything in your logs?\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342935595>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJSY7B7YV7E3EEK7FVZFMIDWMH74BANCNFSM6AAAAAASYGED6Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342946405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342982868","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1342982868","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1342982868,"node_id":"IC_kwDOAAMmUc5QDErU","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T16:29:02Z","updated_at":"2022-12-08T16:29:02Z","author_association":"CONTRIBUTOR","body":"Can you do the following steps?\r\n\r\n1. Stop CouchDB\r\n2. Clear/truncate log file\r\n3. Start CouchDB\r\n4. Run your user creation command from above\r\n6. Stop CouchDB\r\n7. Upload your log file\r\n\r\nAfterwards, open a terminal and cd into your CouchDB directory and run the following command:\r\n\r\n`./bin/couchjs -V`\r\n\r\nand paste the output.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342982868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342990932","html_url":"https://github.com/apache/couchdb/pull/4292#issuecomment-1342990932","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4292","id":1342990932,"node_id":"IC_kwDOAAMmUc5QDGpU","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T16:35:22Z","updated_at":"2022-12-08T16:35:22Z","author_association":"CONTRIBUTOR","body":"After the latest update the speedup is apparent. With `js-78` it's about 36-37 seconds and for `js-91` it's 30-31 seconds.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1342990932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343110915","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1343110915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1343110915,"node_id":"IC_kwDOAAMmUc5QDj8D","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T18:08:27Z","updated_at":"2022-12-08T18:08:27Z","author_association":"NONE","body":"Can you explain to me how to upload my log file? I don't seem to understand\nhow to do that\n\nOn Thu, Dec 8, 2022 at 5:29 PM Ronny Berndt ***@***.***>\nwrote:\n\n> Can you do the following steps?\n>\n>    1. Stop CouchDB\n>    2. Clear/truncate log file\n>    3. Start CouchDB\n>    4. Run your user creation command from above\n>    5. Stop CouchDB\n>    6. Upload your log file\n>\n> Afterwards, open a terminal and cd into your CouchDB directory and run the\n> following command:\n>\n> ./bin/couchjs -V\n>\n> and paste the output.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342982868>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AJSY7B6MNIF7ZWBLVQRPS3TWMIEFTANCNFSM6AAAAAASYGED6Q>\n> .\n> You are receiving this because you authored the thread.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343110915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343130307","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1343130307","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1343130307,"node_id":"IC_kwDOAAMmUc5QDorD","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T18:18:03Z","updated_at":"2022-12-08T18:18:03Z","author_association":"NONE","body":"after following the steps above and running the command again.... I get\nthe following log messages:\n\n[info] 2022-12-08T18:13:08.432370Z ***@***.*** <0.254.0> --------\nPreflight check: Checking For Monsters\n\n[info] 2022-12-08T18:13:08.432449Z ***@***.*** <0.254.0> --------\nPreflight check: Asserting Admin Account\n\n[info] 2022-12-08T18:13:08.436471Z ***@***.*** <0.254.0> --------\nApache CouchDB 3.2.2 is starting.\n\n[info] 2022-12-08T18:13:08.436569Z ***@***.*** <0.255.0> --------\nStarting couch_sup\n[info] 2022-12-08T18:13:08.592748Z ***@***.*** <0.254.0> --------\nApache CouchDB has started. Time to relax.\n\n[notice] 2022-12-08T18:13:08.606814Z ***@***.*** <0.296.0> --------\nrexi_server : started servers\n[notice] 2022-12-08T18:13:08.608976Z ***@***.*** <0.300.0> --------\nrexi_buffer : started servers\n[notice] 2022-12-08T18:13:08.698008Z ***@***.*** <0.330.0> --------\nmem3_reshard_dbdoc start init()\n[notice] 2022-12-08T18:13:08.702758Z ***@***.*** <0.332.0> --------\nmem3_reshard start init()\n[notice] 2022-12-08T18:13:08.702946Z ***@***.*** <0.333.0> --------\nmem3_reshard db monitor <0.333.0> starting\n[notice] 2022-12-08T18:13:08.705514Z ***@***.*** <0.332.0> --------\nmem3_reshard starting reloading jobs\n[notice] 2022-12-08T18:13:08.705756Z ***@***.*** <0.332.0> --------\nmem3_reshard finished reloading jobs\n[info] 2022-12-08T18:13:08.734696Z ***@***.*** <0.339.0> --------\nApache CouchDB has started. Time to relax.\n\n[info] 2022-12-08T18:13:08.734794Z ***@***.*** <0.339.0> --------\nApache CouchDB has started on http://127.0.0.1:5984/\n[notice] 2022-12-08T18:13:08.832255Z ***@***.*** <0.427.0> --------\nAll system databases exist.\n[notice] 2022-12-08T18:13:09.633770Z ***@***.*** <0.344.0> 23215c095a\n127.0.0.1:5984 127.0.0.1 undefined GET /_up 200 ok 37\n[notice] 2022-12-08T18:13:09.777170Z ***@***.*** <0.345.0> 1314f323bb\n127.0.0.1:5984 127.0.0.1 undefined GET /_utils/ 304 ok 1\n[notice] 2022-12-08T18:13:09.865079Z ***@***.*** <0.345.0> cdd9c33d67\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/css/styles.1dd5f02ec0ce91979b00.css 304 ok 12\n[notice] 2022-12-08T18:13:09.867120Z ***@***.*** <0.348.0> af28fddefe\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/js/vendor.1dd5f02ec0ce91979b00.js 304 ok 12\n[notice] 2022-12-08T18:13:09.871999Z ***@***.*** <0.347.0> 58a064500d\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/js/manifest.9d15b7c24fc8359d2668.js 304 ok 15\n[notice] 2022-12-08T18:13:09.876089Z ***@***.*** <0.346.0> 4351f8d1fc\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/css/styles.01f570698487acedea0d.css 304 ok 20\n[notice] 2022-12-08T18:13:09.876663Z ***@***.*** <0.349.0> 8ba0783b91\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/js/bundle.01f570698487acedea0d.js 304 ok 20\n[notice] 2022-12-08T18:13:10.342487Z ***@***.*** <0.348.0> 25bebaa70d\n127.0.0.1:5984 127.0.0.1 undefined GET /_session 200 ok 0\n[notice] 2022-12-08T18:13:10.376621Z ***@***.*** <0.346.0> a9cbcec87e\n127.0.0.1:5984 127.0.0.1 undefined GET / 200 ok 40\n[notice] 2022-12-08T18:13:10.376621Z ***@***.*** <0.349.0> 4f16dae6bc\n127.0.0.1:5984 127.0.0.1 undefined GET / 200 ok 42\n[notice] 2022-12-08T18:13:10.377153Z ***@***.*** <0.347.0> 315385f120\n127.0.0.1:5984 127.0.0.1 undefined GET / 200 ok 41\n[notice] 2022-12-08T18:13:10.382688Z ***@***.*** <0.347.0> 317e0c51bc\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/img/couchdb-logo.png 304 ok 1\n[notice] 2022-12-08T18:13:10.471906Z ***@***.*** <0.349.0> 646041ccaa\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/fonts/fauxtonicon5.woff 304 ok 1\n[notice] 2022-12-08T18:13:10.472435Z ***@***.*** <0.347.0> 9280daf507\n127.0.0.1:5984 127.0.0.1 undefined GET\n/_utils/dashboard.assets/fonts/fontawesome-webfont.woff 304 ok 2\n[notice] 2022-12-08T18:13:10.560756Z ***@***.*** <0.347.0> 5d71283cd6\n127.0.0.1:5984 127.0.0.1 undefined GET /_session 200 ok 2\n[notice] 2022-12-08T18:13:13.759756Z ***@***.*** <0.384.0> --------\ncouch_replicator_clustering : cluster stable\n[notice] 2022-12-08T18:13:13.769599Z ***@***.*** <0.411.0> --------\nStarted replicator db changes listener <0.535.0>\n[info] 2022-12-08T18:13:13.770299Z ***@***.*** <0.537.0> --------\nopen_result error {not_found,no_db_file} for _replicator\n[notice] 2022-12-08T18:13:23.607390Z ***@***.*** <0.296.0> --------\nrexi_server : cluster stable\n[notice] 2022-12-08T18:13:23.607520Z ***@***.*** <0.300.0> --------\nrexi_buffer : cluster stable\n[error] 2022-12-08T18:13:37.389915Z ***@***.*** <0.760.0> -------- OS\nProcess Error <0.761.0> :: {os_process_error,{exit_status,134}}\n[error] 2022-12-08T18:13:42.112163Z ***@***.*** <0.752.0> --------\nrexi_server: from: ***@***.***(<0.748.0>) mfa:\nfabric_rpc:update_docs/3\nexit:{timeout,{gen_server,call,[couch_proc_manager,{get_proc,{doc,<<\"_design/_auth\">>,{1,[<<117,58,224,21,122,139,26,34,51,159,60,14,244,241,191,25>>]},{[{<<\"language\">>,<<\"javascript\">>},{<<\"validate_doc_update\">>,<<\"\\n\n   function(newDoc, oldDoc, userCtx, secObj) {\\n        if (newDoc._deleted\n=== true) {\\n            // allow deletes by admins and matching users\\n\n         // without checking the other fields\\n            if\n((userCtx.roles.indexOf('_admin') !== -1) ||\\n                (userCtx.name\n== oldDoc.name)) {\\n                return;\\n            } else {\\n\n       throw({forbidden: 'Only admins may delete other user docs.'});\\n\n       }\\n        }\\n\\n        if (newDoc.type !== 'user') {\\n\n throw({forbidden : 'doc.type must be user'});\\n        } // we only allow\nuser docs for now\\n\\n        if (!newDoc.name) {\\n\n throw({forbidden: 'doc.name is required'});\\n        }\\n\\n        if\n(!newDoc.roles) {\\n            throw({forbidden: 'doc.roles must\nexist'});\\n        }\\n\\n        if (!isArray(newDoc.roles)) {\\n\n throw({forbidden: 'doc.roles must be an array'});\\n        }\\n\\n\n for (var idx = 0; idx < newDoc.roles.length; idx++) {\\n            if\n(typeof newDoc.roles[idx] !== 'string') {\\n\n throw({forbidden: 'doc.roles can only contain strings'});\\n            }\\n\n       }\\n\\n        if (newDoc._id !== ('org.couchdb.user:' + newDoc.name))\n{\\n            throw({\\n                forbidden: 'Doc ID must be of the\nform org.couchdb.user:name'\\n            });\\n        }\\n\\n        if\n(oldDoc) { // validate all updates\\n            if (oldDoc.name !==\nnewDoc.name) {\\n                throw({forbidden: 'Usernames can not be\nchanged.'});\\n            }\\n        }\\n\\n        if (newDoc.password_sha\n&& !newDoc.salt) {\\n            throw({\\n                forbidden: 'Users\nwith password_sha must have a salt.' +\\n                    'See\n/_utils/script/couch.js for example code.'\\n            });\\n        }\\n\\n\n       var available_schemes = [\\\"simple\\\", \\\"pbkdf2\\\", \\\"bcrypt\\\"];\\n\n   if (newDoc.password_scheme\\n                &&\navailable_schemes.indexOf(newDoc.password_scheme) == -1) {\\n\n throw({\\n                forbidden: 'Password scheme `' +\nnewDoc.password_scheme\\n                    + '` not supported.'\\n\n   });\\n        }\\n\\n        if (newDoc.password_scheme === \\\"pbkdf2\\\") {\\n\n           if (typeof(newDoc.iterations) !== \\\"number\\\") {\\n\nthrow({forbidden: \\\"iterations must be a number.\\\"});\\n            }\\n\n       if (typeof(newDoc.derived_key) !== \\\"string\\\") {\\n\nthrow({forbidden: \\\"derived_key must be a string.\\\"});\\n            }\\n\n   }\\n\\n        var is_server_or_database_admin = function(userCtx, secObj)\n{\\n            // see if the user is a server admin\\n\n if(userCtx.roles.indexOf('_admin') !== -1) {\\n                return true;\n// a server admin\\n            }\\n\\n            // see if the user a\ndatabase admin specified by name\\n            if(secObj && secObj.admins &&\nsecObj.admins.names) {\\n\n if(secObj.admins.names.indexOf(userCtx.name) !== -1) {\\n\n return true; // database admin\\n                }\\n            }\\n\\n\n     // see if the user a database admin specified by role\\n\n if(secObj && secObj.admins && secObj.admins.roles) {\\n                var\ndb_roles = secObj.admins.roles;\\n                for(var idx = 0; idx <\nuserCtx.roles.length; idx++) {\\n                    var user_role =\nuserCtx.roles[idx];\\n                    if(db_roles.indexOf(user_role) !==\n-1) {\\n                        return true; // role matches!\\n\n       }\\n                }\\n            }\\n\\n            return false; //\ndefault to no admin\\n        }\\n\\n        if\n(!is_server_or_database_admin(userCtx, secObj)) {\\n            if (oldDoc)\n{ // validate non-admin updates\\n                if (userCtx.name !==\nnewDoc.name) {\\n                    throw({\\n\n forbidden: 'You may only update your own user document.'\\n\n   });\\n                }\\n                // validate role updates\\n\n         var oldRoles = (oldDoc.roles || []).sort();\\n                var\nnewRoles = newDoc.roles.sort();\\n\\n                if (oldRoles.length !==\nnewRoles.length) {\\n                    throw({forbidden: 'Only _admin may\nedit roles'});\\n                }\\n\\n                for (var i = 0; i <\noldRoles.length; i++) {\\n                    if (oldRoles[i] !==\nnewRoles[i]) {\\n                        throw({forbidden: 'Only _admin may\nedit roles'});\\n                    }\\n                }\\n            }\nelse if (newDoc.roles.length > 0) {\\n                throw({forbidden:\n'Only _admin may set roles'});\\n            }\\n        }\\n\\n        // no\nsystem roles in users db\\n        for (var i = 0; i < newDoc.roles.length;\ni++) {\\n            if (newDoc.roles[i] !== '_metrics') {\\n              if\n(newDoc.roles[i][0] === '_') {\\n                  throw({\\n\n     forbidden:\\n                      'No system roles (starting with\nunderscore) in users db.'\\n                  });\\n              }\\n\n   }\\n        }\\n\\n        // no system names as names\\n        if\n(newDoc.name[0] === '_') {\\n            throw({forbidden: 'Username may not\nstart with underscore.'});\\n        }\\n\\n        var badUserNameChars =\n[':'];\\n\\n        for (var i = 0; i < badUserNameChars.length; i++) {\\n\n       if (newDoc.name.indexOf(badUserNameChars[i]) >= 0) {\\n\n throw({forbidden: 'Character `' + badUserNameChars[i] +\\n\n       '` is not allowed in usernames.'});\\n            }\\n        }\\n\n }\\n\">>}]},[],false,[]},{<<\"_design/_auth\">>,<<\"1-753ae0157a8b1a22339f3c0ef4f1bf19\">>}},5000]}}\n[{gen_server,call,3,[{file,\"gen_server.erl\"},{line,246}]},{couch_query_servers,get_ddoc_process,2,[{file,\"src/couch_query_servers.erl\"},{line,630}]},{couch_query_servers,with_ddoc_proc,2,[{file,\"src/couch_query_servers.erl\"},{line,525}]},{couch_query_servers,validate_doc_update,5,[{file,\"src/couch_query_servers.erl\"},{line,368}]},{couch_db,'-validate_doc_update_int/3-lc$^0/1-0-',5,[{file,\"src/couch_db.erl\"},{line,914}]},{couch_db,'-validate_doc_update_int/3-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,917}]},{couch_stats,update_histogram,2,[{file,\"src/couch_stats.erl\"},{line,102}]},{couch_db,'-prep_and_validate_updates/6-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,1014}]}]\n[notice] 2022-12-08T18:13:42.112753Z ***@***.*** <0.727.0> f8b3ec1d15\nlocalhost:5984 127.0.0.1 admin PUT /_users/org.couchdb.user:jan 500 ok 5054\n[info] 2022-12-08T18:13:49.025870Z ***@***.*** <0.39.0> --------\nSIGTERM received - shutting down\n\n[info] 2022-12-08T18:13:49.026009Z ***@***.*** <0.39.0> --------\nSIGTERM received - shutting down\n\nOn Thu, Dec 8, 2022 at 7:08 PM abdul faisal ***@***.***> wrote:\n\n> Can you explain to me how to upload my log file? I don't seem to\n> understand how to do that\n>\n> On Thu, Dec 8, 2022 at 5:29 PM Ronny Berndt ***@***.***>\n> wrote:\n>\n>> Can you do the following steps?\n>>\n>>    1. Stop CouchDB\n>>    2. Clear/truncate log file\n>>    3. Start CouchDB\n>>    4. Run your user creation command from above\n>>    5. Stop CouchDB\n>>    6. Upload your log file\n>>\n>> Afterwards, open a terminal and cd into your CouchDB directory and run\n>> the following command:\n>>\n>> ./bin/couchjs -V\n>>\n>> and paste the output.\n>>\n>> —\n>> Reply to this email directly, view it on GitHub\n>> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342982868>,\n>> or unsubscribe\n>> <https://github.com/notifications/unsubscribe-auth/AJSY7B6MNIF7ZWBLVQRPS3TWMIEFTANCNFSM6AAAAAASYGED6Q>\n>> .\n>> You are receiving this because you authored the thread.Message ID:\n>> ***@***.***>\n>>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343130307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343138935","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1343138935","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1343138935,"node_id":"IC_kwDOAAMmUc5QDqx3","user":{"login":"faisalabdulkadir","id":40210311,"node_id":"MDQ6VXNlcjQwMjEwMzEx","avatar_url":"https://avatars.githubusercontent.com/u/40210311?v=4","gravatar_id":"","url":"https://api.github.com/users/faisalabdulkadir","html_url":"https://github.com/faisalabdulkadir","followers_url":"https://api.github.com/users/faisalabdulkadir/followers","following_url":"https://api.github.com/users/faisalabdulkadir/following{/other_user}","gists_url":"https://api.github.com/users/faisalabdulkadir/gists{/gist_id}","starred_url":"https://api.github.com/users/faisalabdulkadir/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faisalabdulkadir/subscriptions","organizations_url":"https://api.github.com/users/faisalabdulkadir/orgs","repos_url":"https://api.github.com/users/faisalabdulkadir/repos","events_url":"https://api.github.com/users/faisalabdulkadir/events{/privacy}","received_events_url":"https://api.github.com/users/faisalabdulkadir/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T18:21:46Z","updated_at":"2022-12-08T18:21:46Z","author_association":"NONE","body":"When I try to run the command ./bin/couchjs -V  in my couch directory... I\nget the error:\n\nzsh: no such file or directory: ./bin/couchjs\n\n\n\nOn Thu, Dec 8, 2022 at 7:17 PM abdul faisal ***@***.***> wrote:\n\n> after following the steps above and running the command again.... I get\n> the following log messages:\n>\n> [info] 2022-12-08T18:13:08.432370Z ***@***.*** <0.254.0> --------\n> Preflight check: Checking For Monsters\n>\n> [info] 2022-12-08T18:13:08.432449Z ***@***.*** <0.254.0> --------\n> Preflight check: Asserting Admin Account\n>\n> [info] 2022-12-08T18:13:08.436471Z ***@***.*** <0.254.0> --------\n> Apache CouchDB 3.2.2 is starting.\n>\n> [info] 2022-12-08T18:13:08.436569Z ***@***.*** <0.255.0> --------\n> Starting couch_sup\n> [info] 2022-12-08T18:13:08.592748Z ***@***.*** <0.254.0> --------\n> Apache CouchDB has started. Time to relax.\n>\n> [notice] 2022-12-08T18:13:08.606814Z ***@***.*** <0.296.0> --------\n> rexi_server : started servers\n> [notice] 2022-12-08T18:13:08.608976Z ***@***.*** <0.300.0> --------\n> rexi_buffer : started servers\n> [notice] 2022-12-08T18:13:08.698008Z ***@***.*** <0.330.0> --------\n> mem3_reshard_dbdoc start init()\n> [notice] 2022-12-08T18:13:08.702758Z ***@***.*** <0.332.0> --------\n> mem3_reshard start init()\n> [notice] 2022-12-08T18:13:08.702946Z ***@***.*** <0.333.0> --------\n> mem3_reshard db monitor <0.333.0> starting\n> [notice] 2022-12-08T18:13:08.705514Z ***@***.*** <0.332.0> --------\n> mem3_reshard starting reloading jobs\n> [notice] 2022-12-08T18:13:08.705756Z ***@***.*** <0.332.0> --------\n> mem3_reshard finished reloading jobs\n> [info] 2022-12-08T18:13:08.734696Z ***@***.*** <0.339.0> --------\n> Apache CouchDB has started. Time to relax.\n>\n> [info] 2022-12-08T18:13:08.734794Z ***@***.*** <0.339.0> --------\n> Apache CouchDB has started on http://127.0.0.1:5984/\n> [notice] 2022-12-08T18:13:08.832255Z ***@***.*** <0.427.0> --------\n> All system databases exist.\n> [notice] 2022-12-08T18:13:09.633770Z ***@***.*** <0.344.0>\n> 23215c095a 127.0.0.1:5984 127.0.0.1 undefined GET /_up 200 ok 37\n> [notice] 2022-12-08T18:13:09.777170Z ***@***.*** <0.345.0>\n> 1314f323bb 127.0.0.1:5984 127.0.0.1 undefined GET /_utils/ 304 ok 1\n> [notice] 2022-12-08T18:13:09.865079Z ***@***.*** <0.345.0>\n> cdd9c33d67 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/css/styles.1dd5f02ec0ce91979b00.css 304 ok 12\n> [notice] 2022-12-08T18:13:09.867120Z ***@***.*** <0.348.0>\n> af28fddefe 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/js/vendor.1dd5f02ec0ce91979b00.js 304 ok 12\n> [notice] 2022-12-08T18:13:09.871999Z ***@***.*** <0.347.0>\n> 58a064500d 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/js/manifest.9d15b7c24fc8359d2668.js 304 ok 15\n> [notice] 2022-12-08T18:13:09.876089Z ***@***.*** <0.346.0>\n> 4351f8d1fc 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/css/styles.01f570698487acedea0d.css 304 ok 20\n> [notice] 2022-12-08T18:13:09.876663Z ***@***.*** <0.349.0>\n> 8ba0783b91 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/js/bundle.01f570698487acedea0d.js 304 ok 20\n> [notice] 2022-12-08T18:13:10.342487Z ***@***.*** <0.348.0>\n> 25bebaa70d 127.0.0.1:5984 127.0.0.1 undefined GET /_session 200 ok 0\n> [notice] 2022-12-08T18:13:10.376621Z ***@***.*** <0.346.0>\n> a9cbcec87e 127.0.0.1:5984 127.0.0.1 undefined GET / 200 ok 40\n> [notice] 2022-12-08T18:13:10.376621Z ***@***.*** <0.349.0>\n> 4f16dae6bc 127.0.0.1:5984 127.0.0.1 undefined GET / 200 ok 42\n> [notice] 2022-12-08T18:13:10.377153Z ***@***.*** <0.347.0>\n> 315385f120 127.0.0.1:5984 127.0.0.1 undefined GET / 200 ok 41\n> [notice] 2022-12-08T18:13:10.382688Z ***@***.*** <0.347.0>\n> 317e0c51bc 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/img/couchdb-logo.png 304 ok 1\n> [notice] 2022-12-08T18:13:10.471906Z ***@***.*** <0.349.0>\n> 646041ccaa 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/fonts/fauxtonicon5.woff 304 ok 1\n> [notice] 2022-12-08T18:13:10.472435Z ***@***.*** <0.347.0>\n> 9280daf507 127.0.0.1:5984 127.0.0.1 undefined GET\n> /_utils/dashboard.assets/fonts/fontawesome-webfont.woff 304 ok 2\n> [notice] 2022-12-08T18:13:10.560756Z ***@***.*** <0.347.0>\n> 5d71283cd6 127.0.0.1:5984 127.0.0.1 undefined GET /_session 200 ok 2\n> [notice] 2022-12-08T18:13:13.759756Z ***@***.*** <0.384.0> --------\n> couch_replicator_clustering : cluster stable\n> [notice] 2022-12-08T18:13:13.769599Z ***@***.*** <0.411.0> --------\n> Started replicator db changes listener <0.535.0>\n> [info] 2022-12-08T18:13:13.770299Z ***@***.*** <0.537.0> --------\n> open_result error {not_found,no_db_file} for _replicator\n> [notice] 2022-12-08T18:13:23.607390Z ***@***.*** <0.296.0> --------\n> rexi_server : cluster stable\n> [notice] 2022-12-08T18:13:23.607520Z ***@***.*** <0.300.0> --------\n> rexi_buffer : cluster stable\n> [error] 2022-12-08T18:13:37.389915Z ***@***.*** <0.760.0> --------\n> OS Process Error <0.761.0> :: {os_process_error,{exit_status,134}}\n> [error] 2022-12-08T18:13:42.112163Z ***@***.*** <0.752.0> --------\n> rexi_server: from: ***@***.***(<0.748.0>) mfa:\n> fabric_rpc:update_docs/3\n> exit:{timeout,{gen_server,call,[couch_proc_manager,{get_proc,{doc,<<\"_design/_auth\">>,{1,[<<117,58,224,21,122,139,26,34,51,159,60,14,244,241,191,25>>]},{[{<<\"language\">>,<<\"javascript\">>},{<<\"validate_doc_update\">>,<<\"\\n\n>    function(newDoc, oldDoc, userCtx, secObj) {\\n        if (newDoc._deleted\n> === true) {\\n            // allow deletes by admins and matching users\\n\n>          // without checking the other fields\\n            if\n> ((userCtx.roles.indexOf('_admin') !== -1) ||\\n                (userCtx.name\n> == oldDoc.name)) {\\n                return;\\n            } else {\\n\n>        throw({forbidden: 'Only admins may delete other user docs.'});\\n\n>        }\\n        }\\n\\n        if (newDoc.type !== 'user') {\\n\n>  throw({forbidden : 'doc.type must be user'});\\n        } // we only allow\n> user docs for now\\n\\n        if (!newDoc.name) {\\n\n>  throw({forbidden: 'doc.name is required'});\\n        }\\n\\n        if\n> (!newDoc.roles) {\\n            throw({forbidden: 'doc.roles must\n> exist'});\\n        }\\n\\n        if (!isArray(newDoc.roles)) {\\n\n>  throw({forbidden: 'doc.roles must be an array'});\\n        }\\n\\n\n>  for (var idx = 0; idx < newDoc.roles.length; idx++) {\\n            if\n> (typeof newDoc.roles[idx] !== 'string') {\\n\n>  throw({forbidden: 'doc.roles can only contain strings'});\\n            }\\n\n>        }\\n\\n        if (newDoc._id !== ('org.couchdb.user:' + newDoc.name))\n> {\\n            throw({\\n                forbidden: 'Doc ID must be of the\n> form org.couchdb.user:name'\\n            });\\n        }\\n\\n        if\n> (oldDoc) { // validate all updates\\n            if (oldDoc.name !==\n> newDoc.name) {\\n                throw({forbidden: 'Usernames can not be\n> changed.'});\\n            }\\n        }\\n\\n        if (newDoc.password_sha\n> && !newDoc.salt) {\\n            throw({\\n                forbidden: 'Users\n> with password_sha must have a salt.' +\\n                    'See\n> /_utils/script/couch.js for example code.'\\n            });\\n        }\\n\\n\n>        var available_schemes = [\\\"simple\\\", \\\"pbkdf2\\\", \\\"bcrypt\\\"];\\n\n>    if (newDoc.password_scheme\\n                &&\n> available_schemes.indexOf(newDoc.password_scheme) == -1) {\\n\n>  throw({\\n                forbidden: 'Password scheme `' +\n> newDoc.password_scheme\\n                    + '` not supported.'\\n\n>    });\\n        }\\n\\n        if (newDoc.password_scheme === \\\"pbkdf2\\\") {\\n\n>            if (typeof(newDoc.iterations) !== \\\"number\\\") {\\n\n> throw({forbidden: \\\"iterations must be a number.\\\"});\\n            }\\n\n>        if (typeof(newDoc.derived_key) !== \\\"string\\\") {\\n\n> throw({forbidden: \\\"derived_key must be a string.\\\"});\\n            }\\n\n>    }\\n\\n        var is_server_or_database_admin = function(userCtx, secObj)\n> {\\n            // see if the user is a server admin\\n\n>  if(userCtx.roles.indexOf('_admin') !== -1) {\\n                return true;\n> // a server admin\\n            }\\n\\n            // see if the user a\n> database admin specified by name\\n            if(secObj && secObj.admins &&\n> secObj.admins.names) {\\n\n>  if(secObj.admins.names.indexOf(userCtx.name) !== -1) {\\n\n>  return true; // database admin\\n                }\\n            }\\n\\n\n>      // see if the user a database admin specified by role\\n\n>  if(secObj && secObj.admins && secObj.admins.roles) {\\n                var\n> db_roles = secObj.admins.roles;\\n                for(var idx = 0; idx <\n> userCtx.roles.length; idx++) {\\n                    var user_role =\n> userCtx.roles[idx];\\n                    if(db_roles.indexOf(user_role) !==\n> -1) {\\n                        return true; // role matches!\\n\n>        }\\n                }\\n            }\\n\\n            return false; //\n> default to no admin\\n        }\\n\\n        if\n> (!is_server_or_database_admin(userCtx, secObj)) {\\n            if (oldDoc)\n> { // validate non-admin updates\\n                if (userCtx.name !==\n> newDoc.name) {\\n                    throw({\\n\n>  forbidden: 'You may only update your own user document.'\\n\n>    });\\n                }\\n                // validate role updates\\n\n>          var oldRoles = (oldDoc.roles || []).sort();\\n                var\n> newRoles = newDoc.roles.sort();\\n\\n                if (oldRoles.length !==\n> newRoles.length) {\\n                    throw({forbidden: 'Only _admin may\n> edit roles'});\\n                }\\n\\n                for (var i = 0; i <\n> oldRoles.length; i++) {\\n                    if (oldRoles[i] !==\n> newRoles[i]) {\\n                        throw({forbidden: 'Only _admin may\n> edit roles'});\\n                    }\\n                }\\n            }\n> else if (newDoc.roles.length > 0) {\\n                throw({forbidden:\n> 'Only _admin may set roles'});\\n            }\\n        }\\n\\n        // no\n> system roles in users db\\n        for (var i = 0; i < newDoc.roles.length;\n> i++) {\\n            if (newDoc.roles[i] !== '_metrics') {\\n              if\n> (newDoc.roles[i][0] === '_') {\\n                  throw({\\n\n>      forbidden:\\n                      'No system roles (starting with\n> underscore) in users db.'\\n                  });\\n              }\\n\n>    }\\n        }\\n\\n        // no system names as names\\n        if\n> (newDoc.name[0] === '_') {\\n            throw({forbidden: 'Username may not\n> start with underscore.'});\\n        }\\n\\n        var badUserNameChars =\n> [':'];\\n\\n        for (var i = 0; i < badUserNameChars.length; i++) {\\n\n>        if (newDoc.name.indexOf(badUserNameChars[i]) >= 0) {\\n\n>  throw({forbidden: 'Character `' + badUserNameChars[i] +\\n\n>        '` is not allowed in usernames.'});\\n            }\\n        }\\n\n>  }\\n\">>}]},[],false,[]},{<<\"_design/_auth\">>,<<\"1-753ae0157a8b1a22339f3c0ef4f1bf19\">>}},5000]}}\n> [{gen_server,call,3,[{file,\"gen_server.erl\"},{line,246}]},{couch_query_servers,get_ddoc_process,2,[{file,\"src/couch_query_servers.erl\"},{line,630}]},{couch_query_servers,with_ddoc_proc,2,[{file,\"src/couch_query_servers.erl\"},{line,525}]},{couch_query_servers,validate_doc_update,5,[{file,\"src/couch_query_servers.erl\"},{line,368}]},{couch_db,'-validate_doc_update_int/3-lc$^0/1-0-',5,[{file,\"src/couch_db.erl\"},{line,914}]},{couch_db,'-validate_doc_update_int/3-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,917}]},{couch_stats,update_histogram,2,[{file,\"src/couch_stats.erl\"},{line,102}]},{couch_db,'-prep_and_validate_updates/6-fun-1-',3,[{file,\"src/couch_db.erl\"},{line,1014}]}]\n> [notice] 2022-12-08T18:13:42.112753Z ***@***.*** <0.727.0>\n> f8b3ec1d15 localhost:5984 127.0.0.1 admin PUT /_users/org.couchdb.user:jan\n> 500 ok 5054\n> [info] 2022-12-08T18:13:49.025870Z ***@***.*** <0.39.0> --------\n> SIGTERM received - shutting down\n>\n> [info] 2022-12-08T18:13:49.026009Z ***@***.*** <0.39.0> --------\n> SIGTERM received - shutting down\n>\n> On Thu, Dec 8, 2022 at 7:08 PM abdul faisal ***@***.***>\n> wrote:\n>\n>> Can you explain to me how to upload my log file? I don't seem to\n>> understand how to do that\n>>\n>> On Thu, Dec 8, 2022 at 5:29 PM Ronny Berndt ***@***.***>\n>> wrote:\n>>\n>>> Can you do the following steps?\n>>>\n>>>    1. Stop CouchDB\n>>>    2. Clear/truncate log file\n>>>    3. Start CouchDB\n>>>    4. Run your user creation command from above\n>>>    5. Stop CouchDB\n>>>    6. Upload your log file\n>>>\n>>> Afterwards, open a terminal and cd into your CouchDB directory and run\n>>> the following command:\n>>>\n>>> ./bin/couchjs -V\n>>>\n>>> and paste the output.\n>>>\n>>> —\n>>> Reply to this email directly, view it on GitHub\n>>> <https://github.com/apache/couchdb/issues/4296#issuecomment-1342982868>,\n>>> or unsubscribe\n>>> <https://github.com/notifications/unsubscribe-auth/AJSY7B6MNIF7ZWBLVQRPS3TWMIEFTANCNFSM6AAAAAASYGED6Q>\n>>> .\n>>> You are receiving this because you authored the thread.Message ID:\n>>> ***@***.***>\n>>>\n>>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343138935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343244920","html_url":"https://github.com/apache/couchdb/issues/4296#issuecomment-1343244920","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4296","id":1343244920,"node_id":"IC_kwDOAAMmUc5QEEp4","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-08T19:24:32Z","updated_at":"2022-12-08T19:24:32Z","author_association":"CONTRIBUTOR","body":"search for couchjs in your couchdb install directory, cd into that directory and try again with `./couchjs -V`, or can you join our slack community, then we can have a litte live session https://join.slack.com/t/couchdb/shared_invite/zt-fa9zim0j-H04m4o_KcLdWeOxEAcwM8g ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1343244920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344314720","html_url":"https://github.com/apache/couchdb/issues/4293#issuecomment-1344314720","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4293","id":1344314720,"node_id":"IC_kwDOAAMmUc5QIJ1g","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T13:31:55Z","updated_at":"2022-12-09T13:31:55Z","author_association":"CONTRIBUTOR","body":"Closing this, while completed by https://github.com/apache/couchdb-fauxton/issues/1372","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344314720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344319535","html_url":"https://github.com/apache/couchdb/issues/4299#issuecomment-1344319535","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4299","id":1344319535,"node_id":"IC_kwDOAAMmUc5QILAv","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T13:37:01Z","updated_at":"2022-12-09T13:37:01Z","author_association":"CONTRIBUTOR","body":"Hi @mikhailantoshkin, would you like to submit a PR for this, because you know best what needs to be done now ;-)?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344319535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344330179","html_url":"https://github.com/apache/couchdb/issues/4101#issuecomment-1344330179","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4101","id":1344330179,"node_id":"IC_kwDOAAMmUc5QINnD","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T13:48:10Z","updated_at":"2022-12-09T13:48:10Z","author_association":"CONTRIBUTOR","body":"Can this be closed?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344330179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344352340","html_url":"https://github.com/apache/couchdb/issues/4235#issuecomment-1344352340","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4235","id":1344352340,"node_id":"IC_kwDOAAMmUc5QITBU","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T14:07:45Z","updated_at":"2022-12-09T14:07:45Z","author_association":"CONTRIBUTOR","body":"Closing this, additional fields of user can be stored in it's user documents.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344352340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344366719","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1344366719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1344366719,"node_id":"IC_kwDOAAMmUc5QIWh_","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-09T14:19:59Z","updated_at":"2022-12-09T14:19:59Z","author_association":"CONTRIBUTOR","body":"Does this happen with the latest version too?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1344366719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345185023","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1345185023","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1345185023,"node_id":"IC_kwDOAAMmUc5QLeT_","user":{"login":"zdravko123","id":47307329,"node_id":"MDQ6VXNlcjQ3MzA3MzI5","avatar_url":"https://avatars.githubusercontent.com/u/47307329?v=4","gravatar_id":"","url":"https://api.github.com/users/zdravko123","html_url":"https://github.com/zdravko123","followers_url":"https://api.github.com/users/zdravko123/followers","following_url":"https://api.github.com/users/zdravko123/following{/other_user}","gists_url":"https://api.github.com/users/zdravko123/gists{/gist_id}","starred_url":"https://api.github.com/users/zdravko123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdravko123/subscriptions","organizations_url":"https://api.github.com/users/zdravko123/orgs","repos_url":"https://api.github.com/users/zdravko123/repos","events_url":"https://api.github.com/users/zdravko123/events{/privacy}","received_events_url":"https://api.github.com/users/zdravko123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-10T08:31:40Z","updated_at":"2022-12-10T08:31:40Z","author_association":"NONE","body":"here is a screen shot of some more metrics, notice the network sockets increase until\r\n![Uploading 2022-12-10 19_29_34-Node Exporter (AU-WEST-02) - Dashboards - Grafana.png…]()\r\n it maxes out at 5000","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345185023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345185105","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1345185105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1345185105,"node_id":"IC_kwDOAAMmUc5QLeVR","user":{"login":"zdravko123","id":47307329,"node_id":"MDQ6VXNlcjQ3MzA3MzI5","avatar_url":"https://avatars.githubusercontent.com/u/47307329?v=4","gravatar_id":"","url":"https://api.github.com/users/zdravko123","html_url":"https://github.com/zdravko123","followers_url":"https://api.github.com/users/zdravko123/followers","following_url":"https://api.github.com/users/zdravko123/following{/other_user}","gists_url":"https://api.github.com/users/zdravko123/gists{/gist_id}","starred_url":"https://api.github.com/users/zdravko123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdravko123/subscriptions","organizations_url":"https://api.github.com/users/zdravko123/orgs","repos_url":"https://api.github.com/users/zdravko123/repos","events_url":"https://api.github.com/users/zdravko123/events{/privacy}","received_events_url":"https://api.github.com/users/zdravko123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-10T08:32:11Z","updated_at":"2022-12-10T08:32:11Z","author_association":"NONE","body":"![2022-12-10 19_29_34-Node Exporter (AU-WEST-02) - Dashboards - Grafana](https://user-images.githubusercontent.com/47307329/206841254-37fb7267-860c-4f5d-b5df-6c7f30b1983f.png)\r\nimage","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345185105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345185700","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1345185700","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1345185700,"node_id":"IC_kwDOAAMmUc5QLeek","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-10T08:35:26Z","updated_at":"2022-12-10T08:35:26Z","author_association":"CONTRIBUTOR","body":"Any interesting in your log files, when the issues are rising?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345185700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345689610","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1345689610","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1345689610,"node_id":"IC_kwDOAAMmUc5QNZgK","user":{"login":"zdravko123","id":47307329,"node_id":"MDQ6VXNlcjQ3MzA3MzI5","avatar_url":"https://avatars.githubusercontent.com/u/47307329?v=4","gravatar_id":"","url":"https://api.github.com/users/zdravko123","html_url":"https://github.com/zdravko123","followers_url":"https://api.github.com/users/zdravko123/followers","following_url":"https://api.github.com/users/zdravko123/following{/other_user}","gists_url":"https://api.github.com/users/zdravko123/gists{/gist_id}","starred_url":"https://api.github.com/users/zdravko123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdravko123/subscriptions","organizations_url":"https://api.github.com/users/zdravko123/orgs","repos_url":"https://api.github.com/users/zdravko123/repos","events_url":"https://api.github.com/users/zdravko123/events{/privacy}","received_events_url":"https://api.github.com/users/zdravko123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-11T23:32:18Z","updated_at":"2022-12-11T23:32:18Z","author_association":"NONE","body":"we suspect that the new kernel was buggy, we doubled the size of the machines a few days prior or when it started happening, we believe this kicked in the new kernal install and then we had issues.  There was a new one that fixed some socket/tcp race conditions Friday we installed this on all the clusters and it looks like the issue has gone away.. luckily....  So i put it down to OS Kernal update for now, or Santa.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345689610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345689769","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1345689769","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1345689769,"node_id":"IC_kwDOAAMmUc5QNZip","user":{"login":"zdravko123","id":47307329,"node_id":"MDQ6VXNlcjQ3MzA3MzI5","avatar_url":"https://avatars.githubusercontent.com/u/47307329?v=4","gravatar_id":"","url":"https://api.github.com/users/zdravko123","html_url":"https://github.com/zdravko123","followers_url":"https://api.github.com/users/zdravko123/followers","following_url":"https://api.github.com/users/zdravko123/following{/other_user}","gists_url":"https://api.github.com/users/zdravko123/gists{/gist_id}","starred_url":"https://api.github.com/users/zdravko123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdravko123/subscriptions","organizations_url":"https://api.github.com/users/zdravko123/orgs","repos_url":"https://api.github.com/users/zdravko123/repos","events_url":"https://api.github.com/users/zdravko123/events{/privacy}","received_events_url":"https://api.github.com/users/zdravko123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-11T23:33:08Z","updated_at":"2022-12-11T23:33:08Z","author_association":"NONE","body":"Question 1: What was the cause of instability?\r\nAnswer: Bad Ubuntu kernel (Version: 5.4.0-1095.101~18.04.1)\r\n\r\nQuestion 2: Why it all started Friday, 2nd Dec?\r\nAnswer: This is when we started upsizing VMs in anticipation of holidays load\r\n\r\nQuestion 3: How did the instability crawl in?\r\nAnswer: The bad kernel was downloaded around 18th of Nov. However Ubuntu requires VM to reboot for the new kernel to kick in. That reboot happened on 2nd, 3rd and 4th of Dec (Fri, Sat, Sun)\r\n\r\nQuestion 3: What was the fix?\r\nAnswer: Ubuntu issued a fixed kernel 9th Dec (Friday). VMs were patched manually (with exception of NZ and MISC clusters ) between 3 am and 4:30 am today\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345689769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345690031","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1345690031","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1345690031,"node_id":"IC_kwDOAAMmUc5QNZmv","user":{"login":"zdravko123","id":47307329,"node_id":"MDQ6VXNlcjQ3MzA3MzI5","avatar_url":"https://avatars.githubusercontent.com/u/47307329?v=4","gravatar_id":"","url":"https://api.github.com/users/zdravko123","html_url":"https://github.com/zdravko123","followers_url":"https://api.github.com/users/zdravko123/followers","following_url":"https://api.github.com/users/zdravko123/following{/other_user}","gists_url":"https://api.github.com/users/zdravko123/gists{/gist_id}","starred_url":"https://api.github.com/users/zdravko123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdravko123/subscriptions","organizations_url":"https://api.github.com/users/zdravko123/orgs","repos_url":"https://api.github.com/users/zdravko123/repos","events_url":"https://api.github.com/users/zdravko123/events{/privacy}","received_events_url":"https://api.github.com/users/zdravko123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-11T23:34:27Z","updated_at":"2022-12-11T23:34:27Z","author_association":"NONE","body":"https://www.ubuntuupdates.org/package/core/bionic/main/updates/linux-azure-5.4\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345690031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345751170","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1345751170","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1345751170,"node_id":"IC_kwDOAAMmUc5QNoiC","user":{"login":"waversky","id":18565394,"node_id":"MDQ6VXNlcjE4NTY1Mzk0","avatar_url":"https://avatars.githubusercontent.com/u/18565394?v=4","gravatar_id":"","url":"https://api.github.com/users/waversky","html_url":"https://github.com/waversky","followers_url":"https://api.github.com/users/waversky/followers","following_url":"https://api.github.com/users/waversky/following{/other_user}","gists_url":"https://api.github.com/users/waversky/gists{/gist_id}","starred_url":"https://api.github.com/users/waversky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waversky/subscriptions","organizations_url":"https://api.github.com/users/waversky/orgs","repos_url":"https://api.github.com/users/waversky/repos","events_url":"https://api.github.com/users/waversky/events{/privacy}","received_events_url":"https://api.github.com/users/waversky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T01:42:31Z","updated_at":"2022-12-12T01:42:31Z","author_association":"NONE","body":"There are no active tasks. This may be a problem with Erlang or the Windows sleep mechanism. This happens every Monday morning when the computer wakes up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345751170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345753610","html_url":"https://github.com/apache/couchdb/issues/4265#issuecomment-1345753610","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4265","id":1345753610,"node_id":"IC_kwDOAAMmUc5QNpIK","user":{"login":"waversky","id":18565394,"node_id":"MDQ6VXNlcjE4NTY1Mzk0","avatar_url":"https://avatars.githubusercontent.com/u/18565394?v=4","gravatar_id":"","url":"https://api.github.com/users/waversky","html_url":"https://github.com/waversky","followers_url":"https://api.github.com/users/waversky/followers","following_url":"https://api.github.com/users/waversky/following{/other_user}","gists_url":"https://api.github.com/users/waversky/gists{/gist_id}","starred_url":"https://api.github.com/users/waversky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waversky/subscriptions","organizations_url":"https://api.github.com/users/waversky/orgs","repos_url":"https://api.github.com/users/waversky/repos","events_url":"https://api.github.com/users/waversky/events{/privacy}","received_events_url":"https://api.github.com/users/waversky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T01:47:42Z","updated_at":"2022-12-12T01:47:42Z","author_association":"NONE","body":"![图片](https://user-images.githubusercontent.com/18565394/206943902-1c112cc4-44df-4625-a93b-9408cab17a60.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1345753610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1346163617","html_url":"https://github.com/apache/couchdb/issues/4300#issuecomment-1346163617","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4300","id":1346163617,"node_id":"IC_kwDOAAMmUc5QPNOh","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T09:33:46Z","updated_at":"2022-12-12T09:33:46Z","author_association":"CONTRIBUTOR","body":"Closing this for now, if happen again, please re-open this and put a paste from your logs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1346163617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1346314853","html_url":"https://github.com/apache/couchdb/issues/4299#issuecomment-1346314853","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4299","id":1346314853,"node_id":"IC_kwDOAAMmUc5QPyJl","user":{"login":"mikhailantoshkin","id":51194616,"node_id":"MDQ6VXNlcjUxMTk0NjE2","avatar_url":"https://avatars.githubusercontent.com/u/51194616?v=4","gravatar_id":"","url":"https://api.github.com/users/mikhailantoshkin","html_url":"https://github.com/mikhailantoshkin","followers_url":"https://api.github.com/users/mikhailantoshkin/followers","following_url":"https://api.github.com/users/mikhailantoshkin/following{/other_user}","gists_url":"https://api.github.com/users/mikhailantoshkin/gists{/gist_id}","starred_url":"https://api.github.com/users/mikhailantoshkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikhailantoshkin/subscriptions","organizations_url":"https://api.github.com/users/mikhailantoshkin/orgs","repos_url":"https://api.github.com/users/mikhailantoshkin/repos","events_url":"https://api.github.com/users/mikhailantoshkin/events{/privacy}","received_events_url":"https://api.github.com/users/mikhailantoshkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T11:26:46Z","updated_at":"2022-12-12T11:26:46Z","author_association":"CONTRIBUTOR","body":"Sure, I'll give it a shot)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1346314853/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347267733","html_url":"https://github.com/apache/couchdb/issues/1497#issuecomment-1347267733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1497","id":1347267733,"node_id":"IC_kwDOAAMmUc5QTayV","user":{"login":"TheRook","id":521783,"node_id":"MDQ6VXNlcjUyMTc4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/521783?v=4","gravatar_id":"","url":"https://api.github.com/users/TheRook","html_url":"https://github.com/TheRook","followers_url":"https://api.github.com/users/TheRook/followers","following_url":"https://api.github.com/users/TheRook/following{/other_user}","gists_url":"https://api.github.com/users/TheRook/gists{/gist_id}","starred_url":"https://api.github.com/users/TheRook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheRook/subscriptions","organizations_url":"https://api.github.com/users/TheRook/orgs","repos_url":"https://api.github.com/users/TheRook/repos","events_url":"https://api.github.com/users/TheRook/events{/privacy}","received_events_url":"https://api.github.com/users/TheRook/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T20:35:42Z","updated_at":"2022-12-12T20:35:42Z","author_association":"NONE","body":"There is an erlang HTTP/2 server that supports many of the exciting HTTP/2 features like server-push, which can be used for pub/sub and event notification:\r\nhttps://github.com/tatsuhiro-t/lucid\r\n\r\nIt is MIT licensed, which is Apache compatible and pure erlang. \"Do one thing and do it well\" Let lucid make the best http/2 erlang server, and then Couch can benefit. This would be native erlang events triggered by HTTP/2 and distributed to any compatible client - a javascript client running PouchDB would be made both made more efficient.  HTTP/2 fits the couchDB ethos so much better than any alternative right now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347267733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347657356","html_url":"https://github.com/apache/couchdb/issues/1497#issuecomment-1347657356","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1497","id":1347657356,"node_id":"IC_kwDOAAMmUc5QU56M","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:25:25Z","updated_at":"2022-12-13T02:25:25Z","author_association":"MEMBER","body":"> This project was started primarily for the author to learn Erlang/OTP.\r\n\r\n...and has not been updated since 2015. This would not be a good fit for CouchDB long term.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347657356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347728456","html_url":"https://github.com/apache/couchdb/issues/1497#issuecomment-1347728456","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1497","id":1347728456,"node_id":"IC_kwDOAAMmUc5QVLRI","user":{"login":"TheRook","id":521783,"node_id":"MDQ6VXNlcjUyMTc4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/521783?v=4","gravatar_id":"","url":"https://api.github.com/users/TheRook","html_url":"https://github.com/TheRook","followers_url":"https://api.github.com/users/TheRook/followers","following_url":"https://api.github.com/users/TheRook/following{/other_user}","gists_url":"https://api.github.com/users/TheRook/gists{/gist_id}","starred_url":"https://api.github.com/users/TheRook/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheRook/subscriptions","organizations_url":"https://api.github.com/users/TheRook/orgs","repos_url":"https://api.github.com/users/TheRook/repos","events_url":"https://api.github.com/users/TheRook/events{/privacy}","received_events_url":"https://api.github.com/users/TheRook/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T04:19:42Z","updated_at":"2022-12-13T04:19:42Z","author_association":"NONE","body":"Cowboy has wide adoption and support http/2 streams:\nhttps://github.com/ninenines/cowboy\n\nOn Mon, Dec 12, 2022 at 6:25 PM Joan Touzet ***@***.***>\nwrote:\n\n> This project was started primarily for the author to learn Erlang/OTP.\n>\n> ...and has not been updated since 2015. This would not be a good fit for\n> CouchDB long term.\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/1497#issuecomment-1347657356>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAD7MNZYOFKWFNB5V6VHH6LWM7NB7ANCNFSM4FOIW6AA>\n> .\n> You are receiving this because you commented.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347728456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347902170","html_url":"https://github.com/apache/couchdb/pull/4292#issuecomment-1347902170","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4292","id":1347902170,"node_id":"IC_kwDOAAMmUc5QV1ra","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T08:10:36Z","updated_at":"2022-12-13T08:10:36Z","author_association":"CONTRIBUTOR","body":"For me it works, I tried it from scratch.\r\n\r\n```\r\ngit branch -D fix/3517-part7\r\nmake clean\r\nmake\r\nmake release\r\n```\r\nwill result in:\r\n```\r\n... done\r\n\r\n    You can now copy the rel/couchdb directory anywhere on your system.\r\n    Start CouchDB with ./bin/couchdb from within that directory.\r\n```\r\nGit log:\r\n```\r\ncommit 9cbfd0904b8c68cad24021ac7d0ace6d3722154c (HEAD -> fix/3517-part7, origin/fix/3517-part7)\r\nAuthor: Jan Lehnardt <jan@apache.org>\r\nDate:   Mon Dec 12 17:39:34 2022 +0100\r\n\r\n    docs: document workaround\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1347902170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348112467","html_url":"https://github.com/apache/couchdb/pull/4292#issuecomment-1348112467","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4292","id":1348112467,"node_id":"IC_kwDOAAMmUc5QWpBT","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T10:07:46Z","updated_at":"2022-12-13T10:07:46Z","author_association":"MEMBER","body":"@nickva good find, I’ll update the release script and docs to match (if the ast-bypass file does not exist for them, they don’t need it)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348112467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348115649","html_url":"https://github.com/apache/couchdb/pull/4292#issuecomment-1348115649","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4292","id":1348115649,"node_id":"IC_kwDOAAMmUc5QWpzB","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T10:08:52Z","updated_at":"2022-12-13T10:08:52Z","author_association":"MEMBER","body":"hm, or rather, we should build it in all cases, it just won’t do anything on 1.8.5\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348115649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348839360","html_url":"https://github.com/apache/couchdb/issues/4304#issuecomment-1348839360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4304","id":1348839360,"node_id":"IC_kwDOAAMmUc5QZafA","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T15:41:38Z","updated_at":"2022-12-13T15:41:38Z","author_association":"MEMBER","body":"This sounds like a problem for Avira Prime, not CouchDB. Can you explain why you think we would need to do anything?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348839360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348866340","html_url":"https://github.com/apache/couchdb/issues/4304#issuecomment-1348866340","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4304","id":1348866340,"node_id":"IC_kwDOAAMmUc5QZhEk","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T15:51:00Z","updated_at":"2022-12-13T15:51:00Z","author_association":"CONTRIBUTOR","body":"Try contacting Avira to report a false positive. The source for the file in question is https://github.com/apache/couchdb/blob/main/src/couch/priv/spawnkillable/couchspawnkillable_win.c and it hasn't changed significantly in 13 years.\r\n\r\nAnother idea is perhaps your machine was infected by something which modified or patched that file, can try comparing the contents (sha256 or md5) of `couchspawnkillable.exe` from a freshly downloaded and installed CouchDB install.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348866340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348870274","html_url":"https://github.com/apache/couchdb/issues/4138#issuecomment-1348870274","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4138","id":1348870274,"node_id":"IC_kwDOAAMmUc5QZiCC","user":{"login":"mattpr","id":1196252,"node_id":"MDQ6VXNlcjExOTYyNTI=","avatar_url":"https://avatars.githubusercontent.com/u/1196252?v=4","gravatar_id":"","url":"https://api.github.com/users/mattpr","html_url":"https://github.com/mattpr","followers_url":"https://api.github.com/users/mattpr/followers","following_url":"https://api.github.com/users/mattpr/following{/other_user}","gists_url":"https://api.github.com/users/mattpr/gists{/gist_id}","starred_url":"https://api.github.com/users/mattpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattpr/subscriptions","organizations_url":"https://api.github.com/users/mattpr/orgs","repos_url":"https://api.github.com/users/mattpr/repos","events_url":"https://api.github.com/users/mattpr/events{/privacy}","received_events_url":"https://api.github.com/users/mattpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T15:52:51Z","updated_at":"2022-12-13T15:52:51Z","author_association":"NONE","body":"Hey @big-r81 -- really sorry I ghosted you.  It wasn't on purpose.  I didn't see any notifications (probably just missed it on a busy inbox day) and don't normally check notifications directly on github.\r\n\r\nUnfortunately it has been so long I don't have the repro or issue top of mind anymore, but I did save a backup of the debconf we were using from around this time and there was some extra whitespace on `couchdb/adminpass`.\r\n\r\n```\r\ncouchdb couchdb/adminpass   password XXXXXXXXXXXXXXX\r\ncouchdb couchdb/adminpass_again password XXXXXXXXXXXXXXX\r\n...\r\n```\r\n\r\nOur updated debconf doesn't have the extra whitespaces.\r\n\r\nI've deployed couchdb recently for a new app and the debconf does work for the admin user now...so yes I would say one way or another (it was probably the same whitespace issue), this has been resolved. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1348870274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1349009218","html_url":"https://github.com/apache/couchdb/issues/4138#issuecomment-1349009218","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4138","id":1349009218,"node_id":"IC_kwDOAAMmUc5QaD9C","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T16:34:35Z","updated_at":"2022-12-13T16:34:35Z","author_association":"CONTRIBUTOR","body":"👍🏼","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1349009218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1352803664","html_url":"https://github.com/apache/couchdb/issues/4304#issuecomment-1352803664","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4304","id":1352803664,"node_id":"IC_kwDOAAMmUc5QoiVQ","user":{"login":"damienlibouton","id":22769410,"node_id":"MDQ6VXNlcjIyNzY5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/22769410?v=4","gravatar_id":"","url":"https://api.github.com/users/damienlibouton","html_url":"https://github.com/damienlibouton","followers_url":"https://api.github.com/users/damienlibouton/followers","following_url":"https://api.github.com/users/damienlibouton/following{/other_user}","gists_url":"https://api.github.com/users/damienlibouton/gists{/gist_id}","starred_url":"https://api.github.com/users/damienlibouton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damienlibouton/subscriptions","organizations_url":"https://api.github.com/users/damienlibouton/orgs","repos_url":"https://api.github.com/users/damienlibouton/repos","events_url":"https://api.github.com/users/damienlibouton/events{/privacy}","received_events_url":"https://api.github.com/users/damienlibouton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T09:46:34Z","updated_at":"2022-12-15T09:46:34Z","author_association":"NONE","body":"> Try contacting Avira to report a false positive. The source for the file in question is https://github.com/apache/couchdb/blob/main/src/couch/priv/spawnkillable/couchspawnkillable_win.c and it hasn't changed significantly in 13 years.\r\n> \r\n> Another idea is perhaps your machine was infected by something which modified or patched that file, can try comparing the contents (sha256 or md5) of `couchspawnkillable.exe` from a freshly downloaded and installed CouchDB install.\r\n\r\nThanks for the answer but before reporting this to Avira I did some check following your second idea.\r\n\r\n### New machine CouchDB 3.2.2\r\n```\r\nPS C:\\Program Files\\Apache CouchDB\\lib\\couch-3.2.2\\priv> Get-FileHash .\\couchspawnkillable.exe\r\n\r\nAlgorithm       Hash                                                                   Path\r\n---------       ----                                                                   ----\r\nSHA256          94A44AF0A43A3648E3B9388B6E0C8A90868D1F7C6329A86D0B6488580A30E0DF       C:\\Program Files\\Apache CouchDB\\lib\\couch-3.2.2\\priv\\couchspawnkillable.exe\r\n```\r\n### New machine CouchDB 3.2.0\r\n```\r\nPS C:\\Program Files\\Apache CouchDB\\lib\\couch-3.2.0\\priv> Get-FileHash .\\couchspawnkillable.exe\r\n\r\nAlgorithm       Hash                                                                   Path\r\n---------       ----                                                                   ----\r\nSHA256          F9E14C76B8271C8F044343DF31F009AFB5BB750292B4E7534EC447639AD138E5       C:\\Program Files\\Apache CouchDB\\lib\\couch-3.2.0\\priv\\couchspawnkillable.exe\r\n```\r\n### Problematic machine CouchDB 3.2.2\r\n```\r\nPS C:\\Program Files\\Apache CouchDB\\lib\\couch-3.2.2\\priv> Get-FileHash .\\couchspawnkillable.exe\r\n\r\nAlgorithm       Hash                                                                   Path\r\n---------       ----                                                                   ----\r\nSHA256          94A44AF0A43A3648E3B9388B6E0C8A90868D1F7C6329A86D0B6488580A30E0DF       C:\\Program Files\\Apache CouchDB\\lib\\couch-3.2.2\\priv\\couchspawnkillable.exe\r\n```\r\nDo you think it's normal to see a different hash value between CouchDB 3.2.0 and 3.2.2 taking into account that the last commit of this file was on April 1, 2017 ?\r\n\r\nIf yes I will just try to report this to Avira.\r\n\r\nOnce again thanks for your answer !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1352803664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1352830406","html_url":"https://github.com/apache/couchdb/issues/4304#issuecomment-1352830406","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4304","id":1352830406,"node_id":"IC_kwDOAAMmUc5Qoo3G","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T10:08:15Z","updated_at":"2022-12-15T10:08:15Z","author_association":"CONTRIBUTOR","body":"> Do you think it's normal to see a different hash value between CouchDB 3.2.0 and 3.2.2 taking into account that the last commit of this file was on April 1, 2017 ?\n\nI would say yes, because we upgraded our build-chain to Visual Studio 2022 for the 3.2.2 release of CouchDB.\n\nI would suspect for the next release a sha-diff again...\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1352830406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1352847566","html_url":"https://github.com/apache/couchdb/issues/4304#issuecomment-1352847566","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4304","id":1352847566,"node_id":"IC_kwDOAAMmUc5QotDO","user":{"login":"damienlibouton","id":22769410,"node_id":"MDQ6VXNlcjIyNzY5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/22769410?v=4","gravatar_id":"","url":"https://api.github.com/users/damienlibouton","html_url":"https://github.com/damienlibouton","followers_url":"https://api.github.com/users/damienlibouton/followers","following_url":"https://api.github.com/users/damienlibouton/following{/other_user}","gists_url":"https://api.github.com/users/damienlibouton/gists{/gist_id}","starred_url":"https://api.github.com/users/damienlibouton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/damienlibouton/subscriptions","organizations_url":"https://api.github.com/users/damienlibouton/orgs","repos_url":"https://api.github.com/users/damienlibouton/repos","events_url":"https://api.github.com/users/damienlibouton/events{/privacy}","received_events_url":"https://api.github.com/users/damienlibouton/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T10:20:33Z","updated_at":"2022-12-15T10:20:33Z","author_association":"NONE","body":"> > Do you think it's normal to see a different hash value between CouchDB 3.2.0 and 3.2.2 taking into account that the last commit of this file was on April 1, 2017 ?\r\n> \r\n> I would say yes, because we upgraded our build-chain to Visual Studio 2022 for the 3.2.2 release of CouchDB.\r\n> \r\n> I would suspect for the next release a sha-diff again...\r\n\r\nYes I agree with you\r\n\r\nI did another quick check installing CouchDB 3.1.1 on a fresh machine and the hash is also different.\r\n```\r\nPS C:\\Program Files\\Apache CouchDB\\lib\\couch-3.1.1\\priv> Get-FileHash .\\couchspawnkillable.exe\r\n\r\nAlgorithm       Hash                                                                   Path\r\n---------       ----                                                                   ----\r\nSHA256          C3C879C3FF89CCEA84910D182DAE0F118C3B3EBCC89A67EBD2C278BC947A22B7       C:\\Program Files\\Apache CouchDB\\lib\\couch-3.1.1\\priv\\couchspawnkillable.exe\r\n```\r\n\r\nAs usual, thank you for your reactivity !\r\n\r\nI close this issue and I will try to contact Avira about this false positive even if I have no hope of success ! \r\nThis is why I wanted to talk about this with you !\r\n\r\nHave a good day","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1352847566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1353820482","html_url":"https://github.com/apache/couchdb/issues/4308#issuecomment-1353820482","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4308","id":1353820482,"node_id":"IC_kwDOAAMmUc5QsalC","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T23:00:12Z","updated_at":"2022-12-15T23:00:12Z","author_association":"CONTRIBUTOR","body":"#### Benchmark Setup:\r\n\r\nCouchdyno: https://github.com/cloudant-labs/couchdyno\r\nDocument count: **1000000**\r\nDocument size: **10Kb**\r\nDocument data: https://gist.github.com/nickva/9c0223bedd6f225efd81df51819ae76e\r\n\r\n```python\r\n> fh = open(\"generated10k.json\")\r\n> jsonstr = fh.read()\r\n> json10kb = json.loads(jsonstr)\r\n> len(jsonstr)\r\n11487\r\n```\r\n\r\n**Source** (UK): 8 vCPUs, Q=8\r\n**Target** (US East): 80 vCPUs, 64GBs memory (replication jobs run here), Q=8\r\n\r\n```\r\ncouchdyno config:\r\n >    -  connection_timeout = 30000\r\n >    -  create_target = False\r\n >    -  cycle_timeout = 28800\r\n >    -  delete_before_updating = False\r\n >    -  http_connections = 20\r\n >    -  num_branches = 1\r\n >    -  num_docs = 100000\r\n >    -  num_revs = 1\r\n >    -  reset_source = True\r\n >    -  reset_target = True\r\n >    -  skip_rev_check = True\r\n >    -  worker_processes = 4\r\n```\r\n\r\nUsing these settings:\r\n```ini\r\n[chttpd]\r\nbulk_get_use_batches = true\r\n\r\n[replicator]\r\nuse_bulk_get = true\r\n\r\n[ioq]\r\nconcurrency = 20\r\n\r\n[ioq.bypass]\r\ninteractive = true\r\n```\r\n\r\n#### Before (Cloudant release 8310)\r\n\r\n```\r\nr.replicate_1_to_n_and_compare(1, num=1000000, revs=1, branches=1, normal=True, reset_target=True, reset_source=True, src_params=json10kb)\r\n> replicated in 4578 sec\r\n> replicated in 4583 sec\r\n> replicated in 4553 sec\r\n```\r\n\r\n#### After (Cloudant release 8341)\r\n\r\n```\r\nr.replicate_1_to_n_and_compare(1, num=1000000, revs=1, branches=1, normal=True, reset_target=True, reset_source=True, src_params=json10kb)\r\n> replicated in 1518 sec\r\n> replicated in 1548 sec\r\n> replicated in 1518 sec\r\n```\r\n\r\n\r\n### Results:\r\n\r\n```\r\nIn [1]: with_optimizations = (1518 + 1548 + 1518) / 3\r\nIn [2]: before_optimizations = (4578 + 4553 + 4553) / 3\r\nIn [3]: round(before_optimizations / with_optimizations, 1)\r\nOut[3]: 3.0\r\n```\r\n\r\nWe got a **3x** speed-up for 1 million 10kb docs replicated across the Atlantic","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1353820482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1354645576","html_url":"https://github.com/apache/couchdb/issues/3517#issuecomment-1354645576","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3517","id":1354645576,"node_id":"IC_kwDOAAMmUc5QvkBI","user":{"login":"konrad-ohms","id":40577406,"node_id":"MDQ6VXNlcjQwNTc3NDA2","avatar_url":"https://avatars.githubusercontent.com/u/40577406?v=4","gravatar_id":"","url":"https://api.github.com/users/konrad-ohms","html_url":"https://github.com/konrad-ohms","followers_url":"https://api.github.com/users/konrad-ohms/followers","following_url":"https://api.github.com/users/konrad-ohms/following{/other_user}","gists_url":"https://api.github.com/users/konrad-ohms/gists{/gist_id}","starred_url":"https://api.github.com/users/konrad-ohms/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/konrad-ohms/subscriptions","organizations_url":"https://api.github.com/users/konrad-ohms/orgs","repos_url":"https://api.github.com/users/konrad-ohms/repos","events_url":"https://api.github.com/users/konrad-ohms/events{/privacy}","received_events_url":"https://api.github.com/users/konrad-ohms/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T12:00:17Z","updated_at":"2022-12-16T12:00:17Z","author_association":"NONE","body":"I am sorry for the delay @janl, I noticed that I mixed buster and bullseye releases which obviously does not work.\r\nI now downloaded the binaries from the main build from https://ci-couchdb.apache.org/blue/organizations/jenkins/jenkins-cm1%2FFullPlatformMatrix/detail/main/420/artifacts and attached it in a docker image (based on https://github.com/apache/couchdb-docker/blob/1759383589c61f7ba2089cefaad4cc36e2785390/3.2.2/Dockerfile).\r\n\r\nI adjusted the test script to reference the right images:\r\n\r\n```\r\n# couchdb 2\r\nCOUCHDB2_PORT=\"3002\"\r\nCOUCHDB2_IMAGE=\"docker.io/library/couchdb:2.3.1\"\r\nCOUCHDB2_CONTAINER_NAME=\"couchdb2\"\r\n\r\n# couchdb 3\r\nCOUCHDB3_PORT=\"3003\"\r\nCOUCHDB3_IMAGE=\"localhost/couchdb:3.2.2-patch-jan-fix-3517-2022_12_16\"\r\nCOUCHDB3_CONTAINER_NAME=\"couchdb3\"\r\n```\r\n\r\nAfterwards I ran the test script setup again.\r\n\r\n```bash\r\n$ ./couchdb-test.sh setup\r\n...\r\n$ ./couchdb-test.sh query\r\nCouchDB performance regression test script\r\nAssuming that setup is already complete\r\n================ Query CouchDB 2.3.1 ================\r\n{\"couchdb\":\"Welcome\",\"version\":\"2.3.1\",\"git_sha\":\"c298091a4\",\"uuid\":\"8035f2eaf1adc282c96275843955c42e\",\"features\":[\"pluggable-storage-engines\",\"scheduler\"],\"vendor\":{\"name\":\"The Apache Software Foundation\"}}\r\nQuery Database views on port 3002\r\nRound: 1/10\r\n\r\nreal\t0m7.256s\r\nuser\t0m0.013s\r\nsys\t0m0.009s\r\nRound: 2/10\r\n\r\nreal\t0m5.850s\r\nuser\t0m0.014s\r\nsys\t0m0.010s\r\nRound: 3/10\r\n\r\nreal\t0m6.392s\r\nuser\t0m0.009s\r\nsys\t0m0.015s\r\nRound: 4/10\r\n\r\nreal\t0m7.077s\r\nuser\t0m0.012s\r\nsys\t0m0.015s\r\nRound: 5/10\r\n\r\nreal\t0m6.592s\r\nuser\t0m0.012s\r\nsys\t0m0.012s\r\nRound: 6/10\r\n\r\nreal\t0m5.650s\r\nuser\t0m0.012s\r\nsys\t0m0.012s\r\nRound: 7/10\r\n\r\nreal\t0m5.689s\r\nuser\t0m0.013s\r\nsys\t0m0.012s\r\nRound: 8/10\r\n\r\nreal\t0m6.063s\r\nuser\t0m0.008s\r\nsys\t0m0.015s\r\nRound: 9/10\r\n\r\nreal\t0m7.190s\r\nuser\t0m0.013s\r\nsys\t0m0.012s\r\nRound: 10/10\r\n\r\nreal\t0m7.651s\r\nuser\t0m0.016s\r\nsys\t0m0.010s\r\n================ Query CouchDB 3.1.1 ================\r\n{\"couchdb\":\"Welcome\",\"version\":\"3.2.2\",\"git_sha\":\"23a2d85e5\",\"uuid\":\"f317326f8bab2fd1395d065faefe9e21\",\"features\":[\"access-ready\",\"partitioned\",\"pluggable-storage-engines\",\"reshard\",\"scheduler\"],\"vendor\":{\"name\":\"The Apache Software Foundation\"}}\r\nQuery Database views on port 3003\r\nRound: 1/10\r\n\r\nreal\t0m17.533s\r\nuser\t0m0.014s\r\nsys\t0m0.013s\r\nRound: 2/10\r\n\r\nreal\t0m19.850s\r\nuser\t0m0.013s\r\nsys\t0m0.013s\r\nRound: 3/10\r\n\r\nreal\t0m17.629s\r\nuser\t0m0.014s\r\nsys\t0m0.012s\r\nRound: 4/10\r\n\r\nreal\t0m16.767s\r\nuser\t0m0.012s\r\nsys\t0m0.014s\r\nRound: 5/10\r\n\r\nreal\t0m20.259s\r\nuser\t0m0.015s\r\nsys\t0m0.010s\r\nRound: 6/10\r\n\r\nreal\t0m16.414s\r\nuser\t0m0.014s\r\nsys\t0m0.011s\r\nRound: 7/10\r\n\r\nreal\t0m16.187s\r\nuser\t0m0.010s\r\nsys\t0m0.016s\r\nRound: 8/10\r\n\r\nreal\t0m18.886s\r\nuser\t0m0.012s\r\nsys\t0m0.014s\r\nRound: 9/10\r\n\r\nreal\t0m17.893s\r\nuser\t0m0.014s\r\nsys\t0m0.013s\r\nRound: 10/10\r\n\r\nreal\t0m16.993s\r\nuser\t0m0.013s\r\nsys\t0m0.012s\r\n``` \r\n\r\nThis shows, that CouchDB v3 is still slower compared to v2, but way faster than initially, thanks for the fix :slightly_smiling_face:.\r\nIn the meantime, I migrated my views away from custom reduce functions, so the slower performance is no longer that big of an issue for me personally, but others might still be relying on them and are benefiting from your change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1354645576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1355378750","html_url":"https://github.com/apache/couchdb/issues/4306#issuecomment-1355378750","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4306","id":1355378750,"node_id":"IC_kwDOAAMmUc5QyXA-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T18:26:48Z","updated_at":"2022-12-16T18:26:48Z","author_association":"CONTRIBUTOR","body":"All either merged or were closed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1355378750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1355444350","html_url":"https://github.com/apache/couchdb/issues/4306#issuecomment-1355444350","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4306","id":1355444350,"node_id":"IC_kwDOAAMmUc5QynB-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T19:05:18Z","updated_at":"2022-12-16T19:05:18Z","author_association":"CONTRIBUTOR","body":"Fauxton main was tagged as v1.2.9.\r\n\r\nChanges since v1.2.8:\r\n\r\n* In Replication panel warn that not all replications may be displayed. by @brianewilkins in https://github.com/apache/couchdb-fauxton/pull/1311\r\n* Update json-schema to 0.4.0 by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1327\r\n* Update NPM dependencies by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1330\r\n* Replace brace with ace-build and react-ace by @rhyshort in https://github.com/apache/couchdb-fauxton/pull/1331\r\n* Fix: permanent notification banner by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1333\r\n* Revert \"Replace brace with ace-build and react-ace (#1331)\" by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1334\r\n* chore: remove google plus references by @jo in https://github.com/apache/couchdb-fauxton/pull/1336\r\n* Add pre-fetch function to ajax module by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1335\r\n* update dependencies by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1338\r\n* chore: update dependencies to fix vulnerabilities by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1339\r\n* Replace eslint-loader with eslint-webpack-plugin by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1340\r\n* Remove dependency to 'couchapp' by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1341\r\n* Upgrade Jest to v27 by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1342\r\n* Remove unused dependencies by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1343\r\n* upgrade webpack and associated packages by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1344\r\n* update mkdirp by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1346\r\n* Upgrade Nightwatch (v1 -> v2) and switch from Travis to GH Actions by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1349\r\n* Bump async from 0.2.10 to 2.6.4 by @dependabot in https://github.com/apache/couchdb-fauxton/pull/1350\r\n* Bump node-forge from 1.2.1 to 1.3.1 by @dependabot in https://github.com/apache/couchdb-fauxton/pull/1351\r\n* Bump minimist from 1.2.5 to 1.2.6 by @dependabot in https://github.com/apache/couchdb-fauxton/pull/1348\r\n* fix build status badge (readme) by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1352\r\n* Resolve high severity vulnerabilities by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1353\r\n* run workflow on PR by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1355\r\n* Miscellaneous updates/upgrades by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1354\r\n* upgrade rc-slider to v10 and update core-js by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1356\r\n* Bump grunt from 1.5.2 to 1.5.3 by @dependabot in https://github.com/apache/couchdb-fauxton/pull/1357\r\n* update Moment: 2.29.3 -> 2.29.4 by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1359\r\n* Bump terser from 5.12.0 to 5.14.2 by @dependabot in https://github.com/apache/couchdb-fauxton/pull/1360\r\n* Fix wrong config section for `enable_cors` by @big-r81 in https://github.com/apache/couchdb-fauxton/pull/1362\r\n* change create db interface to radio buttons by @mharrigan26 in https://github.com/apache/couchdb-fauxton/pull/1363\r\n* fix typo in Create Database panel by @mharrigan26 in https://github.com/apache/couchdb-fauxton/pull/1364\r\n* chore: update dependencies by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1365\r\n* Replace brace with react-ace by @Antonio-Maranhao in https://github.com/apache/couchdb-fauxton/pull/1366\r\n* update to node 16 by @mharrigan26 in https://github.com/apache/couchdb-fauxton/pull/1369\r\n* Bump loader-utils from 2.0.2 to 2.0.4 by @dependabot in https://github.com/apache/couchdb-fauxton/pull/1371\r\n* upgrade fs-extra package by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1373\r\n* feat(navbar): Add whats new link by @ninetteadhikari in https://github.com/apache/couchdb-fauxton/pull/1374\r\n* upgrade Jest to v29 by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1379\r\n* Use official docker images for CI runs by @big-r81 in https://github.com/apache/couchdb-fauxton/pull/1361\r\n* upgrade Sinon to v15 by @fryjordan in https://github.com/apache/couchdb-fauxton/pull/1376\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1355444350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356359471","html_url":"https://github.com/apache/couchdb/issues/4312#issuecomment-1356359471","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4312","id":1356359471,"node_id":"IC_kwDOAAMmUc5Q2Gcv","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T18:11:59Z","updated_at":"2022-12-17T18:11:59Z","author_association":"CONTRIBUTOR","body":"Thanks for trying it out and the` report @jo. Yeah it would be nice to see why this is a regression. \r\n\r\nSomething with a rebar3 changed I imagined and the dependencies are not checked cached the same way as before?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356359471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356363803","html_url":"https://github.com/apache/couchdb/issues/4313#issuecomment-1356363803","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4313","id":1356363803,"node_id":"IC_kwDOAAMmUc5Q2Hgb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T18:16:05Z","updated_at":"2022-12-17T18:16:05Z","author_association":"CONTRIBUTOR","body":"@jo thanks for trying it out and for your report.\r\n\r\nIt worked on MacOS for me. I wonder if it's related to a difference in networking how localhost is resolved or set up. What OS or network settings are you using? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356363803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356365407","html_url":"https://github.com/apache/couchdb/issues/4313#issuecomment-1356365407","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4313","id":1356365407,"node_id":"IC_kwDOAAMmUc5Q2H5f","user":{"login":"jo","id":17586,"node_id":"MDQ6VXNlcjE3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/17586?v=4","gravatar_id":"","url":"https://api.github.com/users/jo","html_url":"https://github.com/jo","followers_url":"https://api.github.com/users/jo/followers","following_url":"https://api.github.com/users/jo/following{/other_user}","gists_url":"https://api.github.com/users/jo/gists{/gist_id}","starred_url":"https://api.github.com/users/jo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jo/subscriptions","organizations_url":"https://api.github.com/users/jo/orgs","repos_url":"https://api.github.com/users/jo/repos","events_url":"https://api.github.com/users/jo/events{/privacy}","received_events_url":"https://api.github.com/users/jo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T18:19:09Z","updated_at":"2022-12-17T18:20:53Z","author_association":"CONTRIBUTOR","body":"I am running this on Fedora from inside a Flatpak container, like defined here: https://github.com/jo/couchdb-flatpak-example/blob/couchdb-3.3.0/com.example.HelloCouchDB.yml\r\n\r\nI can access it from both 127.0.0.1 and localhost:\r\n\r\n```\r\n[jo@tfx couchdb]$ curl 127.0.0.1:37621\r\n{\"couchdb\":\"Welcome\",\"version\":\"3.3.0\",\"git_sha\":\"fb76d3756\",\"uuid\":\"b4561943fe9ac3c7eb062dded99160c9\",\"features\":[\"access-ready\",\"partitioned\",\"pluggable-storage-engines\",\"reshard\",\"scheduler\"]}\r\n[jo@tfx couchdb]$ curl localhost:37621\r\n{\"couchdb\":\"Welcome\",\"version\":\"3.3.0\",\"git_sha\":\"fb76d3756\",\"uuid\":\"b4561943fe9ac3c7eb062dded99160c9\",\"features\":[\"access-ready\",\"partitioned\",\"pluggable-storage-engines\",\"reshard\",\"scheduler\"]}\r\n```\r\n\r\nBind address is set to 127.0.0.1\r\n```ini\r\n[chttpd]\r\nbind_address = 127.0.0.1\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356365407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356366692","html_url":"https://github.com/apache/couchdb/issues/4313#issuecomment-1356366692","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4313","id":1356366692,"node_id":"IC_kwDOAAMmUc5Q2INk","user":{"login":"jo","id":17586,"node_id":"MDQ6VXNlcjE3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/17586?v=4","gravatar_id":"","url":"https://api.github.com/users/jo","html_url":"https://github.com/jo","followers_url":"https://api.github.com/users/jo/followers","following_url":"https://api.github.com/users/jo/following{/other_user}","gists_url":"https://api.github.com/users/jo/gists{/gist_id}","starred_url":"https://api.github.com/users/jo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jo/subscriptions","organizations_url":"https://api.github.com/users/jo/orgs","repos_url":"https://api.github.com/users/jo/repos","events_url":"https://api.github.com/users/jo/events{/privacy}","received_events_url":"https://api.github.com/users/jo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T18:23:05Z","updated_at":"2022-12-17T18:23:05Z","author_association":"CONTRIBUTOR","body":"Ah, I just read https://docs.couchdb.org/en/3.2.2-docs/api/server/common.html#post--_replicate\r\n\r\n> For backwards compatibility, CouchDB 3.x will auto-convert bare database names by prepending the address and port CouchDB is listening on, to form a complete URL. This behaviour is deprecated in 3.x and will be removed in CouchDB 4.0.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356366692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356403830","html_url":"https://github.com/apache/couchdb/pull/4314#issuecomment-1356403830","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4314","id":1356403830,"node_id":"IC_kwDOAAMmUc5Q2RR2","user":{"login":"jo","id":17586,"node_id":"MDQ6VXNlcjE3NTg2","avatar_url":"https://avatars.githubusercontent.com/u/17586?v=4","gravatar_id":"","url":"https://api.github.com/users/jo","html_url":"https://github.com/jo","followers_url":"https://api.github.com/users/jo/followers","following_url":"https://api.github.com/users/jo/following{/other_user}","gists_url":"https://api.github.com/users/jo/gists{/gist_id}","starred_url":"https://api.github.com/users/jo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jo/subscriptions","organizations_url":"https://api.github.com/users/jo/orgs","repos_url":"https://api.github.com/users/jo/repos","events_url":"https://api.github.com/users/jo/events{/privacy}","received_events_url":"https://api.github.com/users/jo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T19:28:28Z","updated_at":"2022-12-17T19:28:28Z","author_association":"CONTRIBUTOR","body":"confirmed it fixes #4313 :heavy_check_mark: ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356403830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356404899","html_url":"https://github.com/apache/couchdb/pull/4314#issuecomment-1356404899","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4314","id":1356404899,"node_id":"IC_kwDOAAMmUc5Q2Rij","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T19:33:08Z","updated_at":"2022-12-17T19:33:08Z","author_association":"CONTRIBUTOR","body":"Thank you for confirming @jo !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356404899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356404966","html_url":"https://github.com/apache/couchdb/issues/4313#issuecomment-1356404966","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4313","id":1356404966,"node_id":"IC_kwDOAAMmUc5Q2Rjm","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T19:33:37Z","updated_at":"2022-12-17T19:33:37Z","author_association":"CONTRIBUTOR","body":"This PR https://github.com/apache/couchdb/pull/4314 fix this issue","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1356404966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1358003862","html_url":"https://github.com/apache/couchdb/issues/4312#issuecomment-1358003862","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4312","id":1358003862,"node_id":"IC_kwDOAAMmUc5Q8X6W","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T17:30:22Z","updated_at":"2022-12-19T17:30:22Z","author_association":"CONTRIBUTOR","body":"This commit should enable ./configure and make release to work without a network https://github.com/apache/couchdb/pull/4319\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1358003862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1358004936","html_url":"https://github.com/apache/couchdb/issues/4312#issuecomment-1358004936","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4312","id":1358004936,"node_id":"IC_kwDOAAMmUc5Q8YLI","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T17:31:15Z","updated_at":"2022-12-19T17:31:15Z","author_association":"CONTRIBUTOR","body":"@jo thanks taking the time and care to try out the new release and help debug it! It's much appreciated!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1358004936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1359382647","html_url":"https://github.com/apache/couchdb/pull/4324#issuecomment-1359382647","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4324","id":1359382647,"node_id":"IC_kwDOAAMmUc5RBoh3","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T13:48:40Z","updated_at":"2022-12-20T13:48:40Z","author_association":"MEMBER","body":"closing since we don't support elixir 1.14. yet","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1359382647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1360905113","html_url":"https://github.com/apache/couchdb/issues/4327#issuecomment-1360905113","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4327","id":1360905113,"node_id":"IC_kwDOAAMmUc5RHcOZ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T06:22:48Z","updated_at":"2022-12-21T06:23:26Z","author_association":"CONTRIBUTOR","body":"\r\nTried jumping back a month or so:\r\n\r\n```\r\ncommit 3c24731a5e49bbb4a1d1f407f11f141ca8698e6c (HEAD)\r\nDate:   Wed Nov 16 22:32:35 2022\r\n```\r\n\r\nSame results (tests ignored), so not related to recent rebar/mix changes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1360905113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1360916396","html_url":"https://github.com/apache/couchdb/issues/4327#issuecomment-1360916396","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4327","id":1360916396,"node_id":"IC_kwDOAAMmUc5RHe-s","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T06:42:45Z","updated_at":"2022-12-21T06:42:45Z","author_association":"CONTRIBUTOR","body":"I guess things are not that dire, as it looks we only have one exunit test suite in dreyfus.\r\n\r\n```\r\nfind . -name elixir -type d | grep -v '\\./test/elixir'\r\n./src/dreyfus/test/elixir\r\n```\r\n\r\nThe tests are:\r\n\r\nhttps://github.com/apache/couchdb/blob/main/src/dreyfus/test/elixir/test/search_test.exs\r\nhttps://github.com/apache/couchdb/blob/main/src/dreyfus/test/elixir/test/partition_search_test.exs\r\n\r\nShould we rewrite them in Erlang as well?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1360916396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1360967942","html_url":"https://github.com/apache/couchdb/issues/4327#issuecomment-1360967942","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4327","id":1360967942,"node_id":"IC_kwDOAAMmUc5RHrkG","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T07:52:03Z","updated_at":"2022-12-21T07:52:03Z","author_association":"MEMBER","body":"there are a few more, but not a lot:\r\n\r\n```\r\n> find  . -name exunit \r\n./src/couch/test/exunit\r\n> ls src/couch/test/exunit/\r\ncouch_compress_tests.exs\tsame_site_cookie_tests.exs\ttest_helper.exs\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1360967942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1361282051","html_url":"https://github.com/apache/couchdb/issues/4316#issuecomment-1361282051","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4316","id":1361282051,"node_id":"IC_kwDOAAMmUc5RI4QD","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T12:57:46Z","updated_at":"2022-12-21T12:57:46Z","author_association":"CONTRIBUTOR","body":"Fixed by bfd8d55b397925572f83f660d830078924c8e8bd.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1361282051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1361695466","html_url":"https://github.com/apache/couchdb/pull/4328#issuecomment-1361695466","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4328","id":1361695466,"node_id":"IC_kwDOAAMmUc5RKdLq","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T17:18:39Z","updated_at":"2022-12-21T17:18:39Z","author_association":"CONTRIBUTOR","body":"A big thx to  @jjrodrig for debugging and applying a nice and generic solution!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1361695466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1361992074","html_url":"https://github.com/apache/couchdb/issues/4327#issuecomment-1361992074","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4327","id":1361992074,"node_id":"IC_kwDOAAMmUc5RLlmK","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T19:28:11Z","updated_at":"2022-12-21T19:28:11Z","author_association":"CONTRIBUTOR","body":"Thanks, @janl. A few more it seems. It might be a small beginner task to switch them to Erlang then we should be able to reduce our makefile and mix.exs size a bit. Also make the test suite run faster a bit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1361992074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1362522975","html_url":"https://github.com/apache/couchdb/pull/4331#issuecomment-1362522975","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4331","id":1362522975,"node_id":"IC_kwDOAAMmUc5RNnNf","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T07:55:13Z","updated_at":"2022-12-22T07:55:13Z","author_association":"CONTRIBUTOR","body":"Thank you for your contribution, @eanyanwu ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1362522975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1362991997","html_url":"https://github.com/apache/couchdb/pull/4291#issuecomment-1362991997","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4291","id":1362991997,"node_id":"IC_kwDOAAMmUc5RPZt9","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T15:46:39Z","updated_at":"2022-12-22T15:46:39Z","author_association":"CONTRIBUTOR","body":"JFYI \r\nIn case if there is an intend to run two backends at the same time.\r\nInstead of relying on `config:get_boolean(\"nouveau\", \"enable\", false).` it should be possible to enable/disable nouveau on per databases basis using feature flags. The feature flags are compiled down into an erlang module and therefore very efficient (if performance is the concern).\r\n\r\nAt the moment the feature flags are used for partition queries. However they can be used here as well. In order to make them work the `subject` need to be passed to the check function. Currently supported subjects are defined [here](https://github.com/apache/couchdb/blob/main/src/couch/src/couch_flags.erl#L109:L122). The check for a feature flag look like `couch_flags:is_enabled(nouveau, Subject)`. In order to make it work for `#idx{}` and `#index{}` records we would need to extract the database name.\r\n\r\n```erlang\r\nis_nouveau(#index{dbname = Subject}) ->\r\n     couch_flags:is_enabled(nouveau, Subject);\r\nis_nouveau(#idx{dbname = Subject}) ->\r\n     couch_flags:is_enabled(nouveau, Subject).\r\n```\r\n\r\nThe configuration for feature flag is done in ini files as follows.\r\n\r\n```ini\r\n[feature_flags]\r\n; This enables nouveau for databases with given prefix. \r\nnouveau||my_database* = true\r\n```\r\n\r\nSupporting another type of a subject also supported via EPI. \r\n\r\n```erlang\r\n-module(nouveue_plugin_feature_flags).\r\n\r\n-export([\r\n    rules/0,\r\n    subject_key/1\r\n]).\r\n\r\nrules() ->\r\n    [].\r\n\r\nsubject_key(#idx{dbname = Subject}) ->\r\n   Subject;\r\nsubject_key(#index{dbname = Subject}) ->\r\n   Subject;    \r\nsubject_key(_) ->\r\n    no_decision.\r\n```\r\n\r\n```erlang\r\n-module(nouveau_epi).\r\n\r\n-behaviour(couch_epi_plugin).\r\n\r\n....\r\nproviders() ->\r\n    [\r\n         {chttpd_handlers, nouveau_httpd_handlers},\r\n         {feature_flags, nouveau_plugin_feature_flags}\r\n    ].\r\n\r\n```\r\n\r\nThe only two places in the PR which are hard to do are in `nouveau_api.erl` since in these case we don't have access to database name.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1362991997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1365868175","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1365868175","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1365868175,"node_id":"IC_kwDOAAMmUc5RaX6P","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-27T12:29:03Z","updated_at":"2022-12-27T12:29:03Z","author_association":"NONE","body":"@big-r81 When I compile the master version or 3.3.0-RC2, the following error is reported:\r\n### Steps to reproduce the issue\r\n\r\n```console\r\n[root@bigdata ~]# spack install --keep-stage -v couchdb@3.3.0-RC2\r\n===> Compiling ssl_verify_fun\r\n===> Compiling rebar\r\n===> Building escript for rebar...\r\nCloning into '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/spack-src/src/erlfmt'...\r\n===> Verifying dependencies...\r\n===> Failed to update package getopt from repo hexpm\r\n===> Package not found in any repo: getopt\r\n==> Error: ProcessError: Command exited with status 1:\r\n    '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/spack-src/configure' '--prefix=/home/spack/opt/spack/linux-centos8-aarch64/gcc-8.5.0/couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63' '--disable-docs'\r\n\r\n3 warnings found in build log:\r\n  >> 4     WARNING: Unknown option '--prefix=/home/spack/opt/spack/linux-centos8-aarch64/gcc-8.5.0/couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63', ignoring\r\n     5     ==> configuring couchdb in rel/couchdb.config\r\n     6     Cloning into '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/spack-src/src/rebar'...\r\n     7     make: Entering directory '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/spack-src/src/rebar'\r\n     8     ./bootstrap\r\n     9     No beam files found.\r\n     10    Recompile: src/rebar\r\n\r\n     ...\r\n\r\n     15    Recompile: src/rebar_base_compiler\r\n     16    Recompile: src/rebar_cleaner\r\n     17    Recompile: src/rebar_config\r\n     18    Recompile: src/rebar_core\r\n     19    Recompile: src/rebar_cover_utils\r\n     20    Recompile: src/rebar_ct\r\n  >> 21    src/rebar_ct.erl:291: Warning: crypto:rand_uniform/2 is deprecated and will be removed in a future release; use rand:uniform/1\r\n     22    Recompile: src/rebar_deps\r\n     23    Recompile: src/rebar_dia_compiler\r\n     24    Recompile: src/rebar_dialyzer\r\n     25    Recompile: src/rebar_edoc\r\n     26    Recompile: src/rebar_erlc_compiler\r\n     27    Recompile: src/rebar_erlydtl_compiler\r\n     28    Recompile: src/rebar_escripter\r\n     29    Recompile: src/rebar_eunit\r\n  >> 30    src/rebar_eunit.erl:282: Warning: crypto:rand_uniform/2 is deprecated and will be removed in a future release; use rand:uniform/1\r\n     31    Recompile: src/rebar_file_utils\r\n     32    Recompile: src/rebar_getopt\r\n     33    Recompile: src/rebar_lfe_compiler\r\n     34    Recompile: src/rebar_log\r\n     35    Recompile: src/rebar_metacmds\r\n     36    Recompile: src/rebar_mustache\r\n```\r\nHow can I solve this problem?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1365868175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1365873442","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1365873442","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1365873442,"node_id":"IC_kwDOAAMmUc5RaZMi","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-27T12:39:29Z","updated_at":"2022-12-27T12:39:29Z","author_association":"CONTRIBUTOR","body":"```\r\n===> Failed to update package getopt from repo hexpm\r\n===> Package not found in any repo: getopt\r\n```\r\nMaybe a temporary connection problem to hex.pm or a problem at hex.pm?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1365873442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366094372","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366094372","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366094372,"node_id":"IC_kwDOAAMmUc5RbPIk","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-27T18:29:20Z","updated_at":"2022-12-27T18:29:31Z","author_association":"CONTRIBUTOR","body":"Based on what @big-r81 pointed out, it seems like it needs access to the network to install a few packages. I wonder if you have access to the network in the environment @Tom-python0121?\r\n\r\nIs it the `./configure` or `make release` or `make check` step that fails?\r\n\r\nWe just fixed a similar issues and but there is probably a few more instances of it left https://github.com/apache/couchdb/pull/4319","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366094372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366295371","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366295371","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366295371,"node_id":"IC_kwDOAAMmUc5RcANL","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T01:06:39Z","updated_at":"2022-12-28T01:06:39Z","author_association":"NONE","body":"@nickva I have a network agent, the error is as follows:\r\n```console\r\n[root@bigdata spack-src]# ./configure\r\n==> configuring couchdb in rel/couchdb.config\r\n===> Verifying dependencies...\r\n=NOTICE REPORT==== 28-Dec-2022::09:04:08.134848 ===\r\nTLS client: In state certify at ssl_handshake.erl:1766 generated CLIENT ALERT: Fatal - Unknown CA\r\n\r\n===> Failed to update package getopt from repo hexpm\r\n===> Package not found in any repo: getopt\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366295371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366369747","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366369747","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366369747,"node_id":"IC_kwDOAAMmUc5RcSXT","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T05:01:43Z","updated_at":"2022-12-28T05:01:43Z","author_association":"CONTRIBUTOR","body":"@Tom-python0121 thanks for double checking.\r\n\r\nWhen I run `./configure` from the tar.gz I get only:\r\n\r\n```\r\n$ ./configure \r\n==> configuring couchdb in rel/couchdb.config\r\nYou have configured Apache CouchDB, time to relax. Relax.\r\n```\r\n\r\nBut in your case it seems it's attempting to install rebar or rebar3. So it could be one of these sections that's failing: https://github.com/apache/couchdb/blob/f6ddbe24cace7a841508c451bc12820b9d76c218/configure#L307-L315\r\n\r\nWonder what your `${rootdir}` is in https://github.com/apache/couchdb/blob/f6ddbe24cace7a841508c451bc12820b9d76c218/configure#L336-L338 and if bin/rebar3 found there. Would you be able to echo it in a debug line with a patch like this:\r\n\r\n```\r\nif [ -z \"${REBAR3}\" ]; then\r\n    echo \"rebar3 install **\"\r\n    echo \"rootdir = ${rootdir}\"\r\n    install_local_rebar3\r\n    REBAR3=${rootdir}/bin/rebar3\r\nfi\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366369747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366405539","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366405539","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366405539,"node_id":"IC_kwDOAAMmUc5RcbGj","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T06:32:54Z","updated_at":"2022-12-28T06:34:01Z","author_association":"NONE","body":"@nickva \r\nThe command output is as follows:\r\n```console\r\n[root@bigdata couchdb-3.3.0-RC2]# ./configure\r\n……\r\n==> rebar (compile)\r\n==> rebar (escriptize)\r\nCongratulations! You now have a self-contained script called \"rebar\" in\r\nyour current working directory. Place this script anywhere in your path\r\nand you can use rebar to build OTP-compliant apps.\r\nmake: Leaving directory '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2/src/rebar'\r\nmake: Entering directory '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2/src/rebar'\r\nmake: Leaving directory '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2/src/rebar'\r\nrebar3 install **\r\nrootdir = /home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2\r\nCloning into '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2/src/rebar3'...\r\nremote: Enumerating objects: 515, done.\r\nremote: Counting objects: 100% (515/515), done.\r\nremote: Compressing objects: 100% (445/445), done.\r\nremote: Total 515 (delta 73), reused 300 (delta 38), pack-reused 0\r\nReceiving objects: 100% (515/515), 862.33 KiB | 857.00 KiB/s, done.\r\nResolving deltas: 100% (73/73), done.\r\nEvaluating config script \"/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2/src/rebar3/_build/default/lib/rebar/src/rebar.app.src.script\"\r\n===> Verifying dependencies...\r\n===> Analyzing applications...\r\n===> Compiling getopt\r\n===> Compiling providers\r\n===> Compiling cf\r\n===> Compiling erlware_commons\r\n===> Compiling bbmustache\r\n===> Compiling relx\r\n===> Compiling eunit_formatters\r\n===> Compiling cth_readable\r\n===> Compiling certifi\r\n===> Compiling ssl_verify_fun\r\n===> Compiling rebar\r\n===> Verifying dependencies...\r\n===> Cleaning out certifi...\r\n===> Cleaning out cf...\r\n===> Cleaning out erlware_commons...\r\n===> Cleaning out getopt...\r\n===> Cleaning out providers...\r\n===> Cleaning out rebar...\r\n===> Verifying dependencies...\r\n===> Analyzing applications...\r\n===> Compiling getopt\r\n===> Compiling providers\r\n===> Compiling cf\r\n===> Compiling erlware_commons\r\n===> Compiling bbmustache\r\n===> Compiling relx\r\n===> Compiling eunit_formatters\r\n===> Compiling cth_readable\r\n===> Compiling certifi\r\n===> Compiling ssl_verify_fun\r\n===> Compiling rebar\r\n===> Building escript for rebar...\r\nCloning into '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/couchdb-3.3.0-RC2/src/erlfmt'...\r\nremote: Enumerating objects: 91, done.\r\nremote: Counting objects: 100% (91/91), done.\r\nremote: Compressing objects: 100% (83/83), done.\r\nremote: Total 91 (delta 6), reused 38 (delta 2), pack-reused 0\r\nUnpacking objects: 100% (91/91), 171.48 KiB | 2.68 MiB/s, done.\r\n===> Verifying dependencies...\r\n=NOTICE REPORT==== 28-Dec-2022::14:29:46.421169 ===\r\nTLS client: In state certify at ssl_handshake.erl:1766 generated CLIENT ALERT: Fatal - Unknown CA\r\n\r\n===> Failed to update package getopt from repo hexpm\r\n===> Package not found in any repo: getopt\r\n```\r\nBut it's still wrong.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366405539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366427276","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366427276","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366427276,"node_id":"IC_kwDOAAMmUc5RcgaM","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T07:19:32Z","updated_at":"2022-12-28T07:24:57Z","author_association":"CONTRIBUTOR","body":"@Tom-python0121 exactly, it doesn't seem right that it's downloading and fetching rebar2 or rebar3.\r\n\r\nThose scripts should be in the the .tgz already.\r\n\r\nJust to double-check again wonder if we're looking at the same tgz file:\r\n\r\n```\r\n~/tmp $ cat apache-couchdb-3.3.0-RC2.tar.gz.sha256\r\ne8c6bf3f99a8f0d2af5806652f57d53796367e2d4b24dedc86e268cf86f787a0  apache-couchdb-3.3.0-RC2.tar.gz\r\n\r\n~/tmp $ sha256sum -c apache-couchdb-3.3.0-RC2.tar.gz.sha256 \r\napache-couchdb-3.3.0-RC2.tar.gz: OK\r\n\r\n~/tmp $ tar xfz apache-couchdb-3.3.0-RC2.tar.gz \r\n\r\n~/tmp $ ls -l apache-couchdb-3.3.0/bin\r\ntotal 1120\r\n-rw-rw-r-- 1 nickv nickv     68 Dec 22 02:53 erlang-version.escript\r\n-rwxrwxr-x 1 nickv nickv 134844 Dec 22 03:00 erlfmt\r\n-rwxrwxr-x 1 nickv nickv 203550 Dec 22 03:00 rebar\r\n-rwxrwxr-x 1 nickv nickv 800215 Dec 22 03:00 rebar3\r\n```\r\n\r\nThen wonder if the shell expression `if [ ! -x \"${rootdir}/bin/rebar\" ]; then` is not working properly, I tested both with /bin/bash and the default dash (bin/sh on Ubuntu).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366427276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366429282","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366429282","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366429282,"node_id":"IC_kwDOAAMmUc5Rcg5i","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T07:24:12Z","updated_at":"2022-12-28T07:26:29Z","author_association":"NONE","body":"@nickva I downloaded it from this URL, isn't it? Are there any other URLs?\r\n```console\r\nwget https://github.com/apache/couchdb/archive/refs/tags/3.3.0-RC2.tar.gz\r\n[root@bigdata spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63]# sha256sum 3.3.0-RC2.tar.gz\r\n0b823f7027c2ec18677d8fe4cc02977893579491763897d5fcc2696983c15eb6  3.3.0-RC2.tar.gz\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366429282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366432910","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366432910","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366432910,"node_id":"IC_kwDOAAMmUc5RchyO","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T07:32:10Z","updated_at":"2022-12-28T07:35:01Z","author_association":"CONTRIBUTOR","body":"> I downloaded it from this URL, isn't it? Are there any other URLs?\r\n> \r\n> ```\r\n> wget https://github.com/apache/couchdb/archive/refs/tags/3.3.0-RC2.tar.gz\r\n> [root@bigdata spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63]# sha256sum 3.3.0-RC2.tar.gz\r\n> 0b823f7027c2ec18677d8fe4cc02977893579491763897d5fcc2696983c15eb6  3.3.0-RC2.tar.gz\r\n> ```\r\n\r\nThere is our answer. That's not the correct URL. That's the git tag but that's not our release candidate tar.gz file. That one is located at: https://dist.apache.org/repos/dist/dev/couchdb/source/3.3.0/rc.2\r\n\r\nYou can track the ML release vote thread as well: https://lists.apache.org/thread/rgrh1bctsosoxqfzf0xn7oc7x0b20x3k\r\n\r\nAfter the vote passes it will be tagged as 3.3.0 and but the release would then be available via a link at https://couchdb.apache.org/\r\n\r\nYou can still build it from the git source but it's a slightly different procedure. There is an extra configuration step, there is definitely a lot more dep fetching and network communication and such. The official tar.gz file already has that taken care of in the `make dist` step.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366432910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366492107","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366492107","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366492107,"node_id":"IC_kwDOAAMmUc5RcwPL","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T09:12:59Z","updated_at":"2022-12-28T09:12:59Z","author_association":"NONE","body":"@nickva It works, but there's a problem reported so far. Have you encountered it in make check? How can I solve it?\r\n```console\r\n[root@bigdata apache-couchdb-3.3.0]# make check\r\n……\r\n==> couch_prometheus (compile)\r\n==> rel (compile)\r\n==> apache-couchdb-3.3.0 (compile)\r\n/bin/sh: mix: command not found\r\nmake[1]: *** [Makefile:247: elixir-init] Error 127\r\nmake[1]: Leaving directory '/home/stage/root/spack-stage-couchdb-3.3.0-RC2-pp6mytoamrlxeaykdrgpytuslzbxyo63/apache-couchdb-3.3.0'\r\nmake: *** [Makefile:155: check] Error 2\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366492107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366590095","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1366590095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1366590095,"node_id":"IC_kwDOAAMmUc5RdIKP","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T11:43:47Z","updated_at":"2022-12-28T11:43:47Z","author_association":"CONTRIBUTOR","body":"For `make check` to work, you need to install elixir (<1.14) too.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1366590095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1367019536","html_url":"https://github.com/apache/couchdb/issues/4259#issuecomment-1367019536","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4259","id":1367019536,"node_id":"IC_kwDOAAMmUc5RexAQ","user":{"login":"Tom-python0121","id":77763324,"node_id":"MDQ6VXNlcjc3NzYzMzI0","avatar_url":"https://avatars.githubusercontent.com/u/77763324?v=4","gravatar_id":"","url":"https://api.github.com/users/Tom-python0121","html_url":"https://github.com/Tom-python0121","followers_url":"https://api.github.com/users/Tom-python0121/followers","following_url":"https://api.github.com/users/Tom-python0121/following{/other_user}","gists_url":"https://api.github.com/users/Tom-python0121/gists{/gist_id}","starred_url":"https://api.github.com/users/Tom-python0121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tom-python0121/subscriptions","organizations_url":"https://api.github.com/users/Tom-python0121/orgs","repos_url":"https://api.github.com/users/Tom-python0121/repos","events_url":"https://api.github.com/users/Tom-python0121/events{/privacy}","received_events_url":"https://api.github.com/users/Tom-python0121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T01:48:52Z","updated_at":"2022-12-29T01:48:52Z","author_association":"NONE","body":"@big-r81 @nickva The problem has been solved, but an error is reported in the make check test case, as shown in the following figure.\r\n```console\r\n[root@bigdata apache-couchdb-3.3.0]# make check\r\n……\r\nmodule 'chttpd_view_test'\r\n  chttpd view tests\r\n    chttpd_view_test:82: should_succeed_on_view_with_queries_keys...*failed*\r\nin function chttpd_view_test:'-should_succeed_on_view_with_queries_keys/1-fun-2-'/1 (test/eunit/chttpd_view_test.erl, line 84)\r\nin call from eunit_test:run_testfun/1 (eunit_test.erl, line 71)\r\nin call from eunit_proc:run_test/1 (eunit_proc.erl, line 522)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 347)\r\nin call from eunit_proc:handle_test/2 (eunit_proc.erl, line 505)\r\nin call from eunit_proc:tests_inorder/3 (eunit_proc.erl, line 447)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 337)\r\nin call from eunit_proc:run_group/2 (eunit_proc.erl, line 561)\r\n**error:{badmatch,{error,req_timedout}}\r\n  output:<<\"\">>\r\n\r\n    chttpd_view_test:106: should_succeed_on_view_with_queries_limit_skip...*failed*\r\nin function chttpd_view_test:'-should_succeed_on_view_with_queries_limit_skip/1-fun-4-'/1 (test/eunit/chttpd_view_test.erl, line 108)\r\nin call from eunit_test:run_testfun/1 (eunit_test.erl, line 71)\r\nin call from eunit_proc:run_test/1 (eunit_proc.erl, line 522)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 347)\r\nin call from eunit_proc:handle_test/2 (eunit_proc.erl, line 505)\r\nin call from eunit_proc:tests_inorder/3 (eunit_proc.erl, line 447)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 337)\r\nin call from eunit_proc:run_group/2 (eunit_proc.erl, line 561)\r\n**error:{badmatch,{error,req_timedout}}\r\n  output:<<\"\">>\r\n\r\n    chttpd_view_test:130: should_succeed_on_view_with_multiple_queries...*failed*\r\nin function chttpd_view_test:'-should_succeed_on_view_with_multiple_queries/1-fun-5-'/1 (test/eunit/chttpd_view_test.erl, line 132)\r\nin call from eunit_test:run_testfun/1 (eunit_test.erl, line 71)\r\nin call from eunit_proc:run_test/1 (eunit_proc.erl, line 522)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 347)\r\nin call from eunit_proc:handle_test/2 (eunit_proc.erl, line 505)\r\nin call from eunit_proc:tests_inorder/3 (eunit_proc.erl, line 447)\r\nin call from eunit_proc:with_timeout/3 (eunit_proc.erl, line 337)\r\nin call from eunit_proc:run_group/2 (eunit_proc.erl, line 561)\r\n**error:{badmatch,{error,req_timedout}}\r\n  output:<<\"\">>\r\n\r\n    [done in 93.355 s]\r\n……\r\nmodule 'chttpd_security_tests'\r\n  chttpd security tests\r\n    chttpd_security_tests:154: should_allow_admin_db_compaction...[0.003 s] ok\r\n    chttpd_security_tests:179: should_allow_valid_password_to_create_user...ok\r\n    chttpd_security_tests:193: should_disallow_invalid_password_to_create_user...ok\r\n    chttpd_security_tests:204: should_disallow_anonymous_db_compaction...ok\r\n    chttpd_security_tests:215: should_disallow_db_member_db_compaction...ok\r\n    undefined\r\n    *** context setup failed ***\r\n**in function chttpd_security_tests:create_user/4 (test/eunit/chttpd_security_tests.erl, line 94)\r\nin call from chttpd_security_tests:setup/0 (test/eunit/chttpd_security_tests.erl, line 49)\r\n**error:{badmatch,{ok,500,\r\n              [{\"Cache-Control\",\"must-revalidate\"},\r\n               {\"Content-Length\",\"51\"},\r\n               {\"Content-Type\",\"application/json\"},\r\n               {\"Date\",\"Thu, 29 Dec 2022 01:32:53 GMT\"},\r\n               {\"Server\",\"CouchDB/3.3.0 (Erlang OTP/23)\"},\r\n               {\"X-Couch-Request-ID\",\"6f293153b6\"},\r\n               {\"X-CouchDB-Body-Time\",\"0\"}],\r\n              <<\"{\\\"error\\\":\\\"error\\\",\\\"reason\\\":\\\"internal_server_error\\\"}\\n\">>}}\r\n……\r\nmodule 'chttpd_csp_tests'\r\nCSP Tests\r\nundefined\r\n*** context setup failed ***\r\n**in function chttpd_csp_tests:req/5 (test/eunit/chttpd_csp_tests.erl, line 272)\r\nin call from chttpd_csp_tests:create_doc/3 (test/eunit/chttpd_csp_tests.erl, line 258)\r\nin call from chttpd_csp_tests:setup/0 (test/eunit/chttpd_csp_tests.erl, line 195)\r\n**error:{badmatch,{error,req_timedout}}\r\n\r\n\r\nundefined\r\n*** context setup failed ***\r\n**in function chttpd_csp_tests:req/5 (test/eunit/chttpd_csp_tests.erl, line 272)\r\nin call from chttpd_csp_tests:create_doc/3 (test/eunit/chttpd_csp_tests.erl, line 258)\r\nin call from chttpd_csp_tests:setup/0 (test/eunit/chttpd_csp_tests.erl, line 195)\r\n**error:{badmatch,{error,req_timedout}}\r\n\r\n\r\nundefined\r\n*** context setup failed ***\r\n**in function chttpd_csp_tests:req/5 (test/eunit/chttpd_csp_tests.erl, line 272)\r\nin call from chttpd_csp_tests:create_doc/3 (test/eunit/chttpd_csp_tests.erl, line 258)\r\nin call from chttpd_csp_tests:setup/0 (test/eunit/chttpd_csp_tests.erl, line 195)\r\n**error:{badmatch,{error,req_timedout}}\r\n\r\n\r\nundefined\r\n*** context setup failed ***\r\n**in function chttpd_csp_tests:req/5 (test/eunit/chttpd_csp_tests.erl, line 272)\r\nin call from chttpd_csp_tests:create_doc/3 (test/eunit/chttpd_csp_tests.erl, line 258)\r\nin call from chttpd_csp_tests:setup/0 (test/eunit/chttpd_csp_tests.erl, line 195)\r\n**error:{badmatch,{error,req_timedout}}\r\n\r\n\r\nundefined\r\n*** context setup failed ***\r\n**in function chttpd_csp_tests:req/5 (test/eunit/chttpd_csp_tests.erl, line 272)\r\nin call from chttpd_csp_tests:create_doc/3 (test/eunit/chttpd_csp_tests.erl, line 258)\r\nin call from chttpd_csp_tests:setup/0 (test/eunit/chttpd_csp_tests.erl, line 195)\r\n**error:{badmatch,{error,req_timedout}}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1367019536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1367739483","html_url":"https://github.com/apache/couchdb/pull/4335#issuecomment-1367739483","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4335","id":1367739483,"node_id":"IC_kwDOAAMmUc5Rhgxb","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T05:47:31Z","updated_at":"2022-12-30T05:47:31Z","author_association":"CONTRIBUTOR","body":"For posterity, leaving the commands used to update the versions in couchdb-ci repo:\r\n\r\n```sh\r\nERLANGVERSION=24.3.4.7 ./build.sh buildx-platform-release\r\nBUILDX_PLATFORMS=linux/amd64 ERLANGVERSION=23.3.4.18 ./build.sh buildx-platform debian-bullseye\r\nERLANGVERSION=24.3.4.7 ./build.sh buildx-platform debian-bullseye\r\nBUILDX_PLATFORMS=linux/amd64 ERLANGVERSION=25.2 ./build.sh buildx-platform debian-bullseye\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1367739483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1368458575","html_url":"https://github.com/apache/couchdb/issues/3955#issuecomment-1368458575","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3955","id":1368458575,"node_id":"IC_kwDOAAMmUc5RkQVP","user":{"login":"trickkiste","id":1325926,"node_id":"MDQ6VXNlcjEzMjU5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1325926?v=4","gravatar_id":"","url":"https://api.github.com/users/trickkiste","html_url":"https://github.com/trickkiste","followers_url":"https://api.github.com/users/trickkiste/followers","following_url":"https://api.github.com/users/trickkiste/following{/other_user}","gists_url":"https://api.github.com/users/trickkiste/gists{/gist_id}","starred_url":"https://api.github.com/users/trickkiste/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trickkiste/subscriptions","organizations_url":"https://api.github.com/users/trickkiste/orgs","repos_url":"https://api.github.com/users/trickkiste/repos","events_url":"https://api.github.com/users/trickkiste/events{/privacy}","received_events_url":"https://api.github.com/users/trickkiste/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-01T14:37:49Z","updated_at":"2023-01-01T14:37:49Z","author_association":"NONE","body":"@nickva I can't see the logic behind not supporting custom reduce functions in partitioned DBs? \r\nWhy?\r\nPartitioned DBs make a whole lot of sense e.g. in accounting apps, so you can easily separate the various accounting periods. But not being able to use custom reduce functions kind of kills the purpose of going with couchDB map/reduce in the first place.\r\n\r\nWill this feature be added with the next release?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1368458575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1368458908","html_url":"https://github.com/apache/couchdb/issues/3955#issuecomment-1368458908","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3955","id":1368458908,"node_id":"IC_kwDOAAMmUc5RkQac","user":{"login":"trickkiste","id":1325926,"node_id":"MDQ6VXNlcjEzMjU5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1325926?v=4","gravatar_id":"","url":"https://api.github.com/users/trickkiste","html_url":"https://github.com/trickkiste","followers_url":"https://api.github.com/users/trickkiste/followers","following_url":"https://api.github.com/users/trickkiste/following{/other_user}","gists_url":"https://api.github.com/users/trickkiste/gists{/gist_id}","starred_url":"https://api.github.com/users/trickkiste/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trickkiste/subscriptions","organizations_url":"https://api.github.com/users/trickkiste/orgs","repos_url":"https://api.github.com/users/trickkiste/repos","events_url":"https://api.github.com/users/trickkiste/events{/privacy}","received_events_url":"https://api.github.com/users/trickkiste/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-01T14:40:18Z","updated_at":"2023-01-01T14:40:18Z","author_association":"NONE","body":"> In a partitioned DB using custom reduce function doesn't work, all queries to that view fail with 500 error. Creating exact same view in non-partitioned db works. Built in reduce funtions work fine though.\r\n\r\n@silvpol , did you find any way around that limitation yet?\r\nOr does one have to move back to non-partitioned DB for real?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1368458908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1370714228","html_url":"https://github.com/apache/couchdb/issues/3955#issuecomment-1370714228","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3955","id":1370714228,"node_id":"IC_kwDOAAMmUc5Rs3B0","user":{"login":"silvpol","id":2226747,"node_id":"MDQ6VXNlcjIyMjY3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/2226747?v=4","gravatar_id":"","url":"https://api.github.com/users/silvpol","html_url":"https://github.com/silvpol","followers_url":"https://api.github.com/users/silvpol/followers","following_url":"https://api.github.com/users/silvpol/following{/other_user}","gists_url":"https://api.github.com/users/silvpol/gists{/gist_id}","starred_url":"https://api.github.com/users/silvpol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvpol/subscriptions","organizations_url":"https://api.github.com/users/silvpol/orgs","repos_url":"https://api.github.com/users/silvpol/repos","events_url":"https://api.github.com/users/silvpol/events{/privacy}","received_events_url":"https://api.github.com/users/silvpol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T09:58:45Z","updated_at":"2023-01-04T09:58:45Z","author_association":"NONE","body":"@trickkiste I have changed data design a bit to make it work with built in functions, using an array type to emit intermediate calculations and _stats function to achive what I wanted. It's a bit clunky but works good enough.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1370714228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190105","html_url":"https://github.com/apache/couchdb/issues/4344#issuecomment-1371190105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4344","id":1371190105,"node_id":"IC_kwDOAAMmUc5RurNZ","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T11:18:07Z","updated_at":"2023-01-04T11:18:07Z","author_association":"CONTRIBUTOR","body":"Please provide some logs!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190109","html_url":"https://github.com/apache/couchdb/issues/4344#issuecomment-1371190109","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4344","id":1371190109,"node_id":"IC_kwDOAAMmUc5RurNd","user":{"login":"jcheger","id":4332314,"node_id":"MDQ6VXNlcjQzMzIzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4332314?v=4","gravatar_id":"","url":"https://api.github.com/users/jcheger","html_url":"https://github.com/jcheger","followers_url":"https://api.github.com/users/jcheger/followers","following_url":"https://api.github.com/users/jcheger/following{/other_user}","gists_url":"https://api.github.com/users/jcheger/gists{/gist_id}","starred_url":"https://api.github.com/users/jcheger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jcheger/subscriptions","organizations_url":"https://api.github.com/users/jcheger/orgs","repos_url":"https://api.github.com/users/jcheger/repos","events_url":"https://api.github.com/users/jcheger/events{/privacy}","received_events_url":"https://api.github.com/users/jcheger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T13:32:40Z","updated_at":"2023-01-04T13:32:40Z","author_association":"NONE","body":"Same issue for me. No problem on 3.2.2, stuck on 3.3.0.\r\n\r\nUsing Fauxton, creating a replication (any kind) fails with error message \"{error, undef}\".\r\n\r\nOn the browser, the complete response is:\r\n- error: \"forbidden\"\r\n- reason: \"{error,undef}\"\r\n\r\nOn the server, the only log is \"POST /_replicator 403 ok 4\"","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190114","html_url":"https://github.com/apache/couchdb/issues/4344#issuecomment-1371190114","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4344","id":1371190114,"node_id":"IC_kwDOAAMmUc5RurNi","user":{"login":"burotica49","id":82665881,"node_id":"MDQ6VXNlcjgyNjY1ODgx","avatar_url":"https://avatars.githubusercontent.com/u/82665881?v=4","gravatar_id":"","url":"https://api.github.com/users/burotica49","html_url":"https://github.com/burotica49","followers_url":"https://api.github.com/users/burotica49/followers","following_url":"https://api.github.com/users/burotica49/following{/other_user}","gists_url":"https://api.github.com/users/burotica49/gists{/gist_id}","starred_url":"https://api.github.com/users/burotica49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burotica49/subscriptions","organizations_url":"https://api.github.com/users/burotica49/orgs","repos_url":"https://api.github.com/users/burotica49/repos","events_url":"https://api.github.com/users/burotica49/events{/privacy}","received_events_url":"https://api.github.com/users/burotica49/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T13:39:10Z","updated_at":"2023-01-04T13:39:10Z","author_association":"NONE","body":"By creating the rule by API with Postman it works with this format:\r\n\r\n```\r\n{\r\n    \"_id\": \"my_rep\",\r\n    \"source\": \"http://myserver.com/foo\",\r\n    \"target\": {\r\n        \"url\": \"http://localhost:5984/bar\",\r\n        \"auth\": {\r\n            \"basic\": {\r\n                \"username\": \"user\",\r\n                \"password\": \"pass\"\r\n            }\r\n        }\r\n    },\r\n    \"create_target\":  true,\r\n    \"continuous\": true\r\n}\r\n\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190117","html_url":"https://github.com/apache/couchdb/issues/4344#issuecomment-1371190117","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4344","id":1371190117,"node_id":"IC_kwDOAAMmUc5RurNl","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T13:51:18Z","updated_at":"2023-01-04T13:51:18Z","author_association":"CONTRIBUTOR","body":"Thanks to both of you.\r\n\r\nTo narrow down the problem:\r\n\r\n1. If you create the same replication via `curl` or Postman, the replication works?\r\n2. If you create a replication via Fauxton, you get the `{error, undef}` error?\r\n3. In Fauxton you give the credentials to the source and target?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190119","html_url":"https://github.com/apache/couchdb/issues/4344#issuecomment-1371190119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4344","id":1371190119,"node_id":"IC_kwDOAAMmUc5RurNn","user":{"login":"burotica49","id":82665881,"node_id":"MDQ6VXNlcjgyNjY1ODgx","avatar_url":"https://avatars.githubusercontent.com/u/82665881?v=4","gravatar_id":"","url":"https://api.github.com/users/burotica49","html_url":"https://github.com/burotica49","followers_url":"https://api.github.com/users/burotica49/followers","following_url":"https://api.github.com/users/burotica49/following{/other_user}","gists_url":"https://api.github.com/users/burotica49/gists{/gist_id}","starred_url":"https://api.github.com/users/burotica49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burotica49/subscriptions","organizations_url":"https://api.github.com/users/burotica49/orgs","repos_url":"https://api.github.com/users/burotica49/repos","events_url":"https://api.github.com/users/burotica49/events{/privacy}","received_events_url":"https://api.github.com/users/burotica49/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T14:13:21Z","updated_at":"2023-01-04T14:13:21Z","author_association":"NONE","body":"If I create the replication not curl, it spins\r\nIf I try to create it with Fauxton in the replication part, I get the error message {error, undef}\r\nIf I modify the document directly with this format in the base _replicator it works and it turns :\r\n```\r\n{\r\n    \"_id\": \"my_rep\",\r\n    \"source\": \r\n        \"url\": \"http://mysource.com:5984/bar\",\r\n        \"auth\": {\r\n            \"basic\": {\r\n                \"username\": \"user\",\r\n                \"password\": \"pass\"\r\n            }\r\n        }\r\n    \"target\": {\r\n        \"url\": \"http://mytarget.com:5984/bar\",\r\n        \"auth\": {\r\n            \"basic\": {\r\n                \"username\": \"user\",\r\n                \"password\": \"pass\"\r\n            }\r\n        }\r\n    },\r\n    \"create_target\":  false,\r\n    \"continuous\": true\r\n}\r\n\r\n```\r\nI give credentials to both.\r\nIt's really the replication creation wizard that's buggy","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1371190119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]