[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/672462256","html_url":"https://github.com/apache/brpc/issues/1059#issuecomment-672462256","issue_url":"https://api.github.com/repos/apache/brpc/issues/1059","id":672462256,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MjQ2MjI1Ng==","user":{"login":"tabokie","id":27005812,"node_id":"MDQ6VXNlcjI3MDA1ODEy","avatar_url":"https://avatars.githubusercontent.com/u/27005812?v=4","gravatar_id":"","url":"https://api.github.com/users/tabokie","html_url":"https://github.com/tabokie","followers_url":"https://api.github.com/users/tabokie/followers","following_url":"https://api.github.com/users/tabokie/following{/other_user}","gists_url":"https://api.github.com/users/tabokie/gists{/gist_id}","starred_url":"https://api.github.com/users/tabokie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tabokie/subscriptions","organizations_url":"https://api.github.com/users/tabokie/orgs","repos_url":"https://api.github.com/users/tabokie/repos","events_url":"https://api.github.com/users/tabokie/events{/privacy}","received_events_url":"https://api.github.com/users/tabokie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-12T02:07:58Z","updated_at":"2020-08-12T02:44:08Z","author_association":"NONE","body":"@sky91 As I remember, we got rid of `-static` by explicitly specifying all the libraries in their static versions. I don't currently have access to the code right now, will post the detail some time later.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/672462256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/672855466","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-672855466","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":672855466,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mjg1NTQ2Ng==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-12T13:00:15Z","updated_at":"2020-08-12T13:00:15Z","author_association":"CONTRIBUTOR","body":"> 【那个bthread用std::mutex导致死锁的问题】请问这个是什么问题，现有的 issue 上也没有搜到\r\n\r\n![image](https://user-images.githubusercontent.com/18675094/90017948-cee22900-dcde-11ea-8bcd-c02005b0421b.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/672855466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/672860507","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-672860507","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":672860507,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mjg2MDUwNw==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-12T13:09:56Z","updated_at":"2020-08-12T13:09:56Z","author_association":"CONTRIBUTOR","body":"> 【那个bthread用std::mutex导致死锁的问题】请问这个是什么问题，现有的 issue 上也没有搜到\r\n\r\nhttps://github.com/apache/incubator-brpc/blob/master/docs/cn/bthread.md\r\n“但这个机制更多是为了规避在一些极端情况下的死锁, 比如所有的用户代码都lock在一个pthread mutex上, 并且这个mutex需要在某个RPC回调中unlock, 如果所有的worker都被阻塞, 那么就没有线程来处理RPC回调了, 整个程序就死锁了. 虽然绝大部分的RPC实现都有这个潜在问题, 但实际出现频率似乎很低, 只要养成不在锁内做RPC的好习惯, 这是完全可以规避的.”","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/672860507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673851815","html_url":"https://github.com/apache/brpc/issues/1205#issuecomment-673851815","issue_url":"https://api.github.com/repos/apache/brpc/issues/1205","id":673851815,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mzg1MTgxNQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-14T02:40:50Z","updated_at":"2020-08-14T02:40:50Z","author_association":"MEMBER","body":"这个问题他们社区应该比我们更清楚一些。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673851815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673859515","html_url":"https://github.com/apache/brpc/issues/1206#issuecomment-673859515","issue_url":"https://api.github.com/repos/apache/brpc/issues/1206","id":673859515,"node_id":"MDEyOklzc3VlQ29tbWVudDY3Mzg1OTUxNQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-14T03:15:02Z","updated_at":"2020-08-14T03:15:02Z","author_association":"MEMBER","body":"看下是不是请求发得太快了，导致server端不能正常处理（timeout），同时client不能正常及时运行新增的bthread了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673859515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673918058","html_url":"https://github.com/apache/brpc/issues/1206#issuecomment-673918058","issue_url":"https://api.github.com/repos/apache/brpc/issues/1206","id":673918058,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkxODA1OA==","user":{"login":"kkstudykk","id":30803698,"node_id":"MDQ6VXNlcjMwODAzNjk4","avatar_url":"https://avatars.githubusercontent.com/u/30803698?v=4","gravatar_id":"","url":"https://api.github.com/users/kkstudykk","html_url":"https://github.com/kkstudykk","followers_url":"https://api.github.com/users/kkstudykk/followers","following_url":"https://api.github.com/users/kkstudykk/following{/other_user}","gists_url":"https://api.github.com/users/kkstudykk/gists{/gist_id}","starred_url":"https://api.github.com/users/kkstudykk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkstudykk/subscriptions","organizations_url":"https://api.github.com/users/kkstudykk/orgs","repos_url":"https://api.github.com/users/kkstudykk/repos","events_url":"https://api.github.com/users/kkstudykk/events{/privacy}","received_events_url":"https://api.github.com/users/kkstudykk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-14T06:48:41Z","updated_at":"2020-08-14T06:48:41Z","author_association":"NONE","body":"> 看下是不是请求发得太快了，导致server端不能正常处理（timeout），同时client不能正常及时运行新增的bthread了。\r\n\r\nserver是redis集群，我们启的bthread来发rpc请求，一次请求，会触发20多个bthread请求，怀疑client新增请求过多吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673918058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673936749","html_url":"https://github.com/apache/brpc/issues/1206#issuecomment-673936749","issue_url":"https://api.github.com/repos/apache/brpc/issues/1206","id":673936749,"node_id":"MDEyOklzc3VlQ29tbWVudDY3MzkzNjc0OQ==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-14T07:39:16Z","updated_at":"2020-08-14T07:39:16Z","author_association":"CONTRIBUTOR","body":"看下bvar中的bthread_count和work usage是不是超过负载了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/673936749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674021740","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-674021740","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":674021740,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDAyMTc0MA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-14T11:06:39Z","updated_at":"2020-08-14T11:06:39Z","author_association":"MEMBER","body":"目前是对用户透明的，通过对 cntl 调用 SetFailed 来隐式转换，转换方式在 https://github.com/apache/incubator-brpc/blob/master/src/brpc/grpc.cpp#L53 可以查到，同时 SetFailed 第二个error text参数就是grpc_message。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674021740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674054580","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-674054580","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":674054580,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDA1NDU4MA==","user":{"login":"withoutaname","id":30468280,"node_id":"MDQ6VXNlcjMwNDY4Mjgw","avatar_url":"https://avatars.githubusercontent.com/u/30468280?v=4","gravatar_id":"","url":"https://api.github.com/users/withoutaname","html_url":"https://github.com/withoutaname","followers_url":"https://api.github.com/users/withoutaname/followers","following_url":"https://api.github.com/users/withoutaname/following{/other_user}","gists_url":"https://api.github.com/users/withoutaname/gists{/gist_id}","starred_url":"https://api.github.com/users/withoutaname/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/withoutaname/subscriptions","organizations_url":"https://api.github.com/users/withoutaname/orgs","repos_url":"https://api.github.com/users/withoutaname/repos","events_url":"https://api.github.com/users/withoutaname/events{/privacy}","received_events_url":"https://api.github.com/users/withoutaname/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-14T12:39:52Z","updated_at":"2020-08-14T12:39:52Z","author_association":"NONE","body":"这个方法我试过了，调用如下\r\nbrpc::Controller* cntl = static_cast<brpc::Controller*>(rpcCntl);\r\ncntl->SetFailed(6, \"Already exists\");\r\n\r\n抓包结果如下\r\nHyperText Transfer Protocol 2\r\n    Stream: HEADERS, Stream ID: 1, Length 19, 200 OK\r\n        Length: 19\r\n        Type: HEADERS (1)\r\n        Flags: 0x04\r\n        0... .... .... .... .... .... .... .... = Reserved: 0x0\r\n        .000 0000 0000 0000 0000 0000 0000 0001 = Stream Identifier: 1\r\n        [Pad Length: 0]\r\n        Header Block Fragment: 885f106170706c69636174696f6e2f67727063\r\n        [Header Length: 54]\r\n        [Header Count: 2]\r\n        Header: :status: 200 OK\r\n        Header: content-type: application/grpc\r\n    Stream: DATA, Stream ID: 1, Length 5\r\n    Stream: HEADERS, Stream ID: 1, Length 102\r\n        Length: 102\r\n        Type: HEADERS (1)\r\n        Flags: 0x05\r\n        0... .... .... .... .... .... .... .... = Reserved: 0x0\r\n        .000 0000 0000 0000 0000 0000 0000 0001 = Stream Identifier: 1\r\n        [Pad Length: 0]\r\n        Header Block Fragment: 400b677270632d737461747573023133400c677270632d6d…\r\n        [Header Length: 112]\r\n        [Header Count: 2]\r\n        Header: grpc-status: 13\r\n        Header: grpc-message: %5b%31%37%32.%31%37.%30.%32%3a%38%30%38%30%5d%5bE%36%5dAlready%20exists\r\n    Stream: WINDOW_UPDATE, Stream ID: 0, Length 4\r\n\r\n预期的grpc-status是6但是结果是13，预期的grpc-message是Already exists但是结果是%5b%31%37%32.%31%37.%30.%32%3a%38%30%38%30%5d%5bE%36%5dAlready%20exists","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674054580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674623235","html_url":"https://github.com/apache/brpc/issues/1198#issuecomment-674623235","issue_url":"https://api.github.com/repos/apache/brpc/issues/1198","id":674623235,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDYyMzIzNQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T02:27:35Z","updated_at":"2020-08-17T02:27:35Z","author_association":"CONTRIBUTOR","body":"这种变量如果定义在命名空间内，就大大降低易用性了。如果其中一个文件定义的变量是另一个的子集，那只需要include多的那个即可，如果两者存在不完全重复部分，那么就得自行定义其中一部分变量了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674623235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674624447","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-674624447","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":674624447,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDYyNDQ0Nw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T02:33:23Z","updated_at":"2020-08-17T02:33:23Z","author_association":"MEMBER","body":"cntl->SetFailed 的第一个参数是brpc的[Error](https://github.com/apache/incubator-brpc/blob/master/src/brpc/errno.proto)，不是直接的grpc-status，和grpc-status的转化关系可以在grpc.cpp中可以找到，例如cntl->SetFailed(EREQUEST, ....)对应grpc-status=GRPC_INVALIDARGUMENT。在你的case里，目前没有brpc Error可以对应到grpc-status=6，可以先找其它可用的Error代替下，之后我们Fix下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674624447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674626576","html_url":"https://github.com/apache/brpc/issues/1171#issuecomment-674626576","issue_url":"https://api.github.com/repos/apache/brpc/issues/1171","id":674626576,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDYyNjU3Ng==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T02:43:23Z","updated_at":"2020-08-17T02:43:23Z","author_association":"CONTRIBUTOR","body":"通过HTTP请求可以\r\n或者描述一下您的原始的需求是啥","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674626576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674712688","html_url":"https://github.com/apache/brpc/issues/1202#issuecomment-674712688","issue_url":"https://api.github.com/repos/apache/brpc/issues/1202","id":674712688,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDcxMjY4OA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T07:28:36Z","updated_at":"2020-08-17T07:28:36Z","author_association":"CONTRIBUTOR","body":"目前不支持在windows平台下编译","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674712688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674716192","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-674716192","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":674716192,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDcxNjE5Mg==","user":{"login":"withoutaname","id":30468280,"node_id":"MDQ6VXNlcjMwNDY4Mjgw","avatar_url":"https://avatars.githubusercontent.com/u/30468280?v=4","gravatar_id":"","url":"https://api.github.com/users/withoutaname","html_url":"https://github.com/withoutaname","followers_url":"https://api.github.com/users/withoutaname/followers","following_url":"https://api.github.com/users/withoutaname/following{/other_user}","gists_url":"https://api.github.com/users/withoutaname/gists{/gist_id}","starred_url":"https://api.github.com/users/withoutaname/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/withoutaname/subscriptions","organizations_url":"https://api.github.com/users/withoutaname/orgs","repos_url":"https://api.github.com/users/withoutaname/repos","events_url":"https://api.github.com/users/withoutaname/events{/privacy}","received_events_url":"https://api.github.com/users/withoutaname/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T07:37:10Z","updated_at":"2020-08-17T07:37:10Z","author_association":"NONE","body":"brpc构造grpc-message是会在前面补一段服务的endpoint和brpc的error code对吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674716192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674857566","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-674857566","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":674857566,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDg1NzU2Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T12:41:17Z","updated_at":"2020-08-17T12:41:17Z","author_association":"MEMBER","body":"> brpc构造grpc-message是会在前面补一段服务的endpoint和brpc的error code对吧？\r\n\r\n是的\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/674857566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675186074","html_url":"https://github.com/apache/brpc/issues/1190#issuecomment-675186074","issue_url":"https://api.github.com/repos/apache/brpc/issues/1190","id":675186074,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTE4NjA3NA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T00:46:43Z","updated_at":"2020-08-18T00:46:43Z","author_association":"CONTRIBUTOR","body":"什么场景需要用到这么多mutex实例？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675186074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675225869","html_url":"https://github.com/apache/brpc/issues/1190#issuecomment-675225869","issue_url":"https://api.github.com/repos/apache/brpc/issues/1190","id":675225869,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTIyNTg2OQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-18T03:20:25Z","updated_at":"2020-08-18T03:21:09Z","author_association":"CONTRIBUTOR","body":"> 什么场景需要用到这么多mutex实例？\r\n\r\n在braft 做 multi raft的时候，每个分片（一个分片一个raft group）都放了一个条带锁。最开始放得比较大（10000个），分片多了就导致内存爆了，现在已经改成100了。因此想问下这个问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675225869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675878231","html_url":"https://github.com/apache/brpc/issues/1191#issuecomment-675878231","issue_url":"https://api.github.com/repos/apache/brpc/issues/1191","id":675878231,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTg3ODIzMQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T06:25:29Z","updated_at":"2020-08-19T06:25:29Z","author_association":"CONTRIBUTOR","body":"不支持HTTP，目前只支持baidu_std协议","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675878231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675921963","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-675921963","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":675921963,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NTkyMTk2Mw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T08:09:03Z","updated_at":"2020-08-19T08:09:03Z","author_association":"MEMBER","body":"Fix in https://github.com/apache/incubator-brpc/pull/1161, Thanks all.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/675921963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/676012448","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-676012448","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":676012448,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjAxMjQ0OA==","user":{"login":"withoutaname","id":30468280,"node_id":"MDQ6VXNlcjMwNDY4Mjgw","avatar_url":"https://avatars.githubusercontent.com/u/30468280?v=4","gravatar_id":"","url":"https://api.github.com/users/withoutaname","html_url":"https://github.com/withoutaname","followers_url":"https://api.github.com/users/withoutaname/followers","following_url":"https://api.github.com/users/withoutaname/following{/other_user}","gists_url":"https://api.github.com/users/withoutaname/gists{/gist_id}","starred_url":"https://api.github.com/users/withoutaname/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/withoutaname/subscriptions","organizations_url":"https://api.github.com/users/withoutaname/orgs","repos_url":"https://api.github.com/users/withoutaname/repos","events_url":"https://api.github.com/users/withoutaname/events{/privacy}","received_events_url":"https://api.github.com/users/withoutaname/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T09:19:25Z","updated_at":"2020-08-19T09:19:25Z","author_association":"NONE","body":"有计划支持用户显式的设置grpc-status和grpc-message吗？完全由用户设置，不再改写\r\n\r\n- ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/676012448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/676348098","html_url":"https://github.com/apache/brpc/issues/1186#issuecomment-676348098","issue_url":"https://api.github.com/repos/apache/brpc/issues/1186","id":676348098,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjM0ODA5OA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-19T13:21:47Z","updated_at":"2020-08-19T13:21:47Z","author_association":"CONTRIBUTOR","body":"@acelyc111 please provide more information about the environment, thx, such as\r\nVersions (各种版本)\r\nOS:\r\nCompiler:\r\nbrpc:\r\nprotobuf:","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/676348098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/676936636","html_url":"https://github.com/apache/brpc/issues/800#issuecomment-676936636","issue_url":"https://api.github.com/repos/apache/brpc/issues/800","id":676936636,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NjkzNjYzNg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T03:25:29Z","updated_at":"2020-08-21T02:17:55Z","author_association":"CONTRIBUTOR","body":"没法主动关闭连接，实际的关闭动作是在idle之后回收的时候发生的。可以加HTTP header   `Connection: Close` 使得客户端关闭","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/676936636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677459916","html_url":"https://github.com/apache/brpc/issues/1210#issuecomment-677459916","issue_url":"https://api.github.com/repos/apache/brpc/issues/1210","id":677459916,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQ1OTkxNg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T08:35:04Z","updated_at":"2020-08-20T08:44:42Z","author_association":"CONTRIBUTOR","body":"Can u show a concrete scenario in which this feature is applied? we may understand this issue better then","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677459916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677489379","html_url":"https://github.com/apache/brpc/issues/1210#issuecomment-677489379","issue_url":"https://api.github.com/repos/apache/brpc/issues/1210","id":677489379,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQ4OTM3OQ==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T09:31:53Z","updated_at":"2020-08-20T09:33:34Z","author_association":"MEMBER","body":"When the server receives the first request(e.g. login) from the client, it needs to check whether the client is allowed to log in or not. We need to do some customized check, e.g.:\r\n1. the username and password, which can be handled in `Authenticator`;\r\n1. the IP address, which has been passed to `Authenticator`, but if an IP is blocked, the server should report that back to the client, so the client knew it has been blocked, in this case, the server should close the connection.\r\n\r\nThis is just a very simple scenario, the check process may be different.\r\n\r\nWe need to customize the process of requests, there may be two kinds of RPC requests:\r\n1. the *login* request, do not need to authenticate, itself is some kinds of an Authenticator;\r\n1. other requests, which are not allowed to be called if the *login* has not been successfully called.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677489379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677492737","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-677492737","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":677492737,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQ5MjczNw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T09:39:20Z","updated_at":"2020-08-20T09:39:20Z","author_association":"CONTRIBUTOR","body":"malloc用的是tcmalloc吗？链接的是 libtcmalloc_and_profiler 吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677492737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677495844","html_url":"https://github.com/apache/brpc/issues/1190#issuecomment-677495844","issue_url":"https://api.github.com/repos/apache/brpc/issues/1190","id":677495844,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzQ5NTg0NA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T09:46:11Z","updated_at":"2020-08-20T09:46:11Z","author_association":"CONTRIBUTOR","body":"我看你提供的数据10000实例的时候，虚拟内存使用量也就2M吧？这个对于您的场景来说很大是吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677495844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677504839","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-677504839","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":677504839,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzUwNDgzOQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T10:04:33Z","updated_at":"2020-08-20T10:04:52Z","author_association":"CONTRIBUTOR","body":"> malloc用的是tcmalloc吗？链接的是 libtcmalloc_and_profiler 吧\r\n\r\n应该不是。但是看文档，contention不需要tcmalloc吧？\r\n![image](https://user-images.githubusercontent.com/18675094/90756958-91e5ea00-e30f-11ea-8220-17dd7a31f4ac.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677504839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677506868","html_url":"https://github.com/apache/brpc/issues/1210#issuecomment-677506868","issue_url":"https://api.github.com/repos/apache/brpc/issues/1210","id":677506868,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzUwNjg2OA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T10:09:06Z","updated_at":"2020-08-20T10:09:06Z","author_association":"CONTRIBUTOR","body":"It seems these \"process\" can be done in the normal RPC calls? what makes it necessary to be done in the autentication process","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677506868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677512297","html_url":"https://github.com/apache/brpc/issues/1190#issuecomment-677512297","issue_url":"https://api.github.com/repos/apache/brpc/issues/1190","id":677512297,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzUxMjI5Nw==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T10:22:22Z","updated_at":"2020-08-20T10:22:22Z","author_association":"CONTRIBUTOR","body":"> 我看你提供的数据10000实例的时候，虚拟内存使用量也就2M吧？这个对于您的场景来说很大是吧\r\n\r\n分片多了就不行了。这个问题是在有个测试case发现的，当时调成了1000000。多几个分片就挂了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677512297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677569375","html_url":"https://github.com/apache/brpc/issues/1210#issuecomment-677569375","issue_url":"https://api.github.com/repos/apache/brpc/issues/1210","id":677569375,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzU2OTM3NQ==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T11:35:12Z","updated_at":"2020-08-20T11:35:12Z","author_association":"MEMBER","body":"> It seems these \"process\" can be done in the normal RPC calls?\r\n\r\nIn this way, we have to check/verify the client in all RPC calls, which is very inconvenient.\r\n\r\n> what makes it necessary to be done in the authentication process\r\n\r\nIf *login* has not been called, it cannot call any other RPC calls, and if the client cannot pass the *login* check, the connection should be closed. From this point of view, it's very similar to the ``Authenticator``.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677569375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677673679","html_url":"https://github.com/apache/brpc/issues/1186#issuecomment-677673679","issue_url":"https://api.github.com/repos/apache/brpc/issues/1186","id":677673679,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NzY3MzY3OQ==","user":{"login":"acelyc111","id":10775040,"node_id":"MDQ6VXNlcjEwNzc1MDQw","avatar_url":"https://avatars.githubusercontent.com/u/10775040?v=4","gravatar_id":"","url":"https://api.github.com/users/acelyc111","html_url":"https://github.com/acelyc111","followers_url":"https://api.github.com/users/acelyc111/followers","following_url":"https://api.github.com/users/acelyc111/following{/other_user}","gists_url":"https://api.github.com/users/acelyc111/gists{/gist_id}","starred_url":"https://api.github.com/users/acelyc111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acelyc111/subscriptions","organizations_url":"https://api.github.com/users/acelyc111/orgs","repos_url":"https://api.github.com/users/acelyc111/repos","events_url":"https://api.github.com/users/acelyc111/events{/privacy}","received_events_url":"https://api.github.com/users/acelyc111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-20T13:45:24Z","updated_at":"2020-08-20T13:45:24Z","author_association":"MEMBER","body":"@lorinlee \r\nVersions (各种版本)\r\nOS: CentOS Linux release 7.5.1804\r\nCompiler: g++ 7.3.0\r\nbrpc: 0.9.5\r\nprotobuf: 3.5.1\r\n\r\nIn fact I'm using a Apache Doris's build docker image: apachedoris/doris-dev:build-env-1.2\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/677673679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678023990","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-678023990","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":678023990,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODAyMzk5MA==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T03:56:58Z","updated_at":"2020-08-21T03:56:58Z","author_association":"CONTRIBUTOR","body":"@gydong  @jamesge @chenzhangyi 求帮忙看下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678023990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678034257","html_url":"https://github.com/apache/brpc/issues/1210#issuecomment-678034257","issue_url":"https://api.github.com/repos/apache/brpc/issues/1210","id":678034257,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODAzNDI1Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T04:39:56Z","updated_at":"2020-08-21T04:39:56Z","author_association":"CONTRIBUTOR","body":"OK, I'll carry out a discussion with other committers about this, and reply then","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678034257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678061050","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-678061050","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":678061050,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODA2MTA1MA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T06:12:37Z","updated_at":"2020-08-21T06:12:37Z","author_association":"MEMBER","body":"是通过so加载的吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678061050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678067527","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-678067527","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":678067527,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODA2NzUyNw==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T06:30:21Z","updated_at":"2020-08-21T06:30:46Z","author_association":"CONTRIBUTOR","body":"> 是通过so加载的吗？\r\n\r\n是的。自己的代码是mysql的一个so插件加载进去的。brpc的代码就放在so里面，bvar什么的是可以用的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678067527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678071206","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-678071206","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":678071206,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODA3MTIwNg==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T06:39:26Z","updated_at":"2020-08-21T06:39:26Z","author_association":"MEMBER","body":"这个是因为已经链接了glibc里面的pthread_mutex_lock实现，导致brpc里面的hook没有生效","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678071206/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678081454","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-678081454","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":678081454,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODA4MTQ1NA==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-21T07:05:55Z","updated_at":"2020-08-21T07:05:55Z","author_association":"CONTRIBUTOR","body":"> 这个是因为已经链接了glibc里面的pthread_mutex_lock实现，导致brpc里面的hook没有生效\r\n\r\n那在mysql自身代码（非so中）中引入brpc就可以了吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678081454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678854243","html_url":"https://github.com/apache/brpc/issues/1213#issuecomment-678854243","issue_url":"https://api.github.com/repos/apache/brpc/issues/1213","id":678854243,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODg1NDI0Mw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T01:07:57Z","updated_at":"2020-08-24T01:07:57Z","author_association":"CONTRIBUTOR","body":"最佳实践是用prometheus 采集 /metrics 这个path","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678854243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678872104","html_url":"https://github.com/apache/brpc/issues/1207#issuecomment-678872104","issue_url":"https://api.github.com/repos/apache/brpc/issues/1207","id":678872104,"node_id":"MDEyOklzc3VlQ29tbWVudDY3ODg3MjEwNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T02:32:20Z","updated_at":"2020-08-24T02:32:20Z","author_association":"MEMBER","body":"> 有计划支持用户显式的设置grpc-status和grpc-message吗？完全由用户设置，不再改写\r\n\r\n我先记个issue。另外这个改动不算太大，有兴趣的话也可以给我们提个pr","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/678872104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/680813464","html_url":"https://github.com/apache/brpc/issues/569#issuecomment-680813464","issue_url":"https://api.github.com/repos/apache/brpc/issues/569","id":680813464,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgxMzQ2NA==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T11:08:08Z","updated_at":"2020-08-26T11:08:08Z","author_association":"NONE","body":"真是个大问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/680813464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/680822250","html_url":"https://github.com/apache/brpc/issues/1216#issuecomment-680822250","issue_url":"https://api.github.com/repos/apache/brpc/issues/1216","id":680822250,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MDgyMjI1MA==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-26T11:29:02Z","updated_at":"2020-08-26T11:29:02Z","author_association":"NONE","body":"In file included from src/mcpack2pb/generator.cpp:30:0:\r\n./src/idl_options.pb.h:17:2: error: #error This file was generated by an older version of protoc which is\r\n #error This file was generated by an older version of protoc which is\r\n  ^\r\n./src/idl_options.pb.h:18:2: error: #error incompatible with your Protocol Buffer headers. Please\r\n #error incompatible with your Protocol Buffer headers.  Please\r\n  ^\r\n./src/idl_options.pb.h:19:2: error: #error regenerate this file with a newer version of protoc.\r\n #error regenerate this file with a newer version of protoc.\r\n  ^\r\nmake: *** [src/mcpack2pb/generator.o] Error 1","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/680822250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681231276","html_url":"https://github.com/apache/brpc/issues/1218#issuecomment-681231276","issue_url":"https://api.github.com/repos/apache/brpc/issues/1218","id":681231276,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTIzMTI3Ng==","user":{"login":"weinberggithub","id":17616523,"node_id":"MDQ6VXNlcjE3NjE2NTIz","avatar_url":"https://avatars.githubusercontent.com/u/17616523?v=4","gravatar_id":"","url":"https://api.github.com/users/weinberggithub","html_url":"https://github.com/weinberggithub","followers_url":"https://api.github.com/users/weinberggithub/followers","following_url":"https://api.github.com/users/weinberggithub/following{/other_user}","gists_url":"https://api.github.com/users/weinberggithub/gists{/gist_id}","starred_url":"https://api.github.com/users/weinberggithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weinberggithub/subscriptions","organizations_url":"https://api.github.com/users/weinberggithub/orgs","repos_url":"https://api.github.com/users/weinberggithub/repos","events_url":"https://api.github.com/users/weinberggithub/events{/privacy}","received_events_url":"https://api.github.com/users/weinberggithub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T01:26:12Z","updated_at":"2020-08-27T01:26:12Z","author_association":"NONE","body":"请问brpc做server时，在实现持续上传大文件有哪些不好处理的地方吗？了解到已经实现下载的持续传输(ProgressiveAttachment)。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681231276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681937900","html_url":"https://github.com/apache/brpc/pull/536#issuecomment-681937900","issue_url":"https://api.github.com/repos/apache/brpc/issues/536","id":681937900,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTkzNzkwMA==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T13:08:51Z","updated_at":"2020-08-27T13:08:51Z","author_association":"NONE","body":"添加ShareStatsForNewSocket的目的是？目前看该函数的引入可能造成bug，具体表现是：\r\n在multi模式下，名字服务更新ip port, 删除旧main socket时，由于multi下socket创建时调用ShareStatsForNewSocket导致share part引用计数无法归零，无法删除main socket。以上已经通过UT验证。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681937900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681979409","html_url":"https://github.com/apache/brpc/issues/1216#issuecomment-681979409","issue_url":"https://api.github.com/repos/apache/brpc/issues/1216","id":681979409,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTk3OTQwOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T14:19:49Z","updated_at":"2020-08-27T14:19:49Z","author_association":"MEMBER","body":"这是因为环境的protoc和protobuf runtime的版本对应不上导致的，一般是由于装了多个版本的protobuf","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681979409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681979718","html_url":"https://github.com/apache/brpc/pull/1221#issuecomment-681979718","issue_url":"https://api.github.com/repos/apache/brpc/issues/1221","id":681979718,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTk3OTcxOA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T14:20:21Z","updated_at":"2020-08-27T14:20:21Z","author_association":"MEMBER","body":"Thanks for the contribution.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681979718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681985150","html_url":"https://github.com/apache/brpc/issues/1216#issuecomment-681985150","issue_url":"https://api.github.com/repos/apache/brpc/issues/1216","id":681985150,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTk4NTE1MA==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T14:29:13Z","updated_at":"2020-08-27T14:29:13Z","author_association":"NONE","body":"手动处理了一下config.sh，己安装成功","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681985150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681989084","html_url":"https://github.com/apache/brpc/pull/1219#issuecomment-681989084","issue_url":"https://api.github.com/repos/apache/brpc/issues/1219","id":681989084,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTk4OTA4NA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T14:35:35Z","updated_at":"2020-08-27T14:35:35Z","author_association":"MEMBER","body":"多谢领取这个[issue](https://github.com/apache/incubator-brpc/issues/1209)。\r\n\r\n改的时候需要注意一点：不仅仅只是把HealthCheckThread替换成StartHealthCheck。\r\n由于原来的HealthCheckThread是个bthread，所以在原来的上下文是通顺的，而StartHealthCheck新建了一个由timer处理的任务，这里的上下文需要对应的修改一下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/681989084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682022520","html_url":"https://github.com/apache/brpc/issues/1199#issuecomment-682022520","issue_url":"https://api.github.com/repos/apache/brpc/issues/1199","id":682022520,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjAyMjUyMA==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T15:30:13Z","updated_at":"2020-08-27T15:30:13Z","author_association":"NONE","body":"修改cmakefile文件\r\n\r\nset(Protobuf_INCLUDE_DIR /usr/include/protobuf25)\r\nset(Protobuf_LIBRARY /usr/lib64/protobuf25)\r\ninclude_directories(${Protobuf_INCLUDE_DIR})\r\ninclude_directories(${CMAKE_CURRENT_BINARY_DIR})\r\nset(Protobuf_PROTOC_EXECUTABLE /usr/bin/protoc25)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682022520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682267046","html_url":"https://github.com/apache/brpc/issues/1217#issuecomment-682267046","issue_url":"https://api.github.com/repos/apache/brpc/issues/1217","id":682267046,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI2NzA0Ng==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T01:05:24Z","updated_at":"2020-08-28T01:05:24Z","author_association":"CONTRIBUTOR","body":"server支持接收大body，但不支持持续接收（边接收边处理），所以只要内存足够用，是可以传输大body的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682267046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682270904","html_url":"https://github.com/apache/brpc/issues/1199#issuecomment-682270904","issue_url":"https://api.github.com/repos/apache/brpc/issues/1199","id":682270904,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI3MDkwNA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T01:18:48Z","updated_at":"2020-08-28T01:18:48Z","author_association":"CONTRIBUTOR","body":"是说升级到protobuf2.5 后即可解决您的问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682270904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682282946","html_url":"https://github.com/apache/brpc/issues/1199#issuecomment-682282946","issue_url":"https://api.github.com/repos/apache/brpc/issues/1199","id":682282946,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI4Mjk0Ng==","user":{"login":"songlong","id":5988634,"node_id":"MDQ6VXNlcjU5ODg2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/5988634?v=4","gravatar_id":"","url":"https://api.github.com/users/songlong","html_url":"https://github.com/songlong","followers_url":"https://api.github.com/users/songlong/followers","following_url":"https://api.github.com/users/songlong/following{/other_user}","gists_url":"https://api.github.com/users/songlong/gists{/gist_id}","starred_url":"https://api.github.com/users/songlong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songlong/subscriptions","organizations_url":"https://api.github.com/users/songlong/orgs","repos_url":"https://api.github.com/users/songlong/repos","events_url":"https://api.github.com/users/songlong/events{/privacy}","received_events_url":"https://api.github.com/users/songlong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T02:03:39Z","updated_at":"2020-08-28T02:03:39Z","author_association":"NONE","body":"不能，升级了pb2.5，gflags2.2.1, 通过preload加载，能避免flags重新reload注册问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682282946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682292810","html_url":"https://github.com/apache/brpc/pull/536#issuecomment-682292810","issue_url":"https://api.github.com/repos/apache/brpc/issues/536","id":682292810,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI5MjgxMA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T02:41:41Z","updated_at":"2020-08-28T02:41:41Z","author_association":"CONTRIBUTOR","body":"> 添加ShareStatsForNewSocket的目的是？目前看该函数的引入可能造成bug，具体表现是：\r\n> 在multi模式下，名字服务更新ip port, 删除旧main socket时，由于multi下socket创建时调用ShareStatsForNewSocket导致share part引用计数无法归零，无法删除main socket。以上已经通过UT验证。\r\n\r\n感谢反馈，我看一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682292810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682294119","html_url":"https://github.com/apache/brpc/pull/536#issuecomment-682294119","issue_url":"https://api.github.com/repos/apache/brpc/issues/536","id":682294119,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI5NDExOQ==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T02:46:46Z","updated_at":"2020-08-28T02:46:46Z","author_association":"NONE","body":"好的，感谢，也想知道当初给multi下每个socket 共享main socket sharepart的原因，看了代码暂时没法理解，谢谢！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682294119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682295379","html_url":"https://github.com/apache/brpc/pull/1157#issuecomment-682295379","issue_url":"https://api.github.com/repos/apache/brpc/issues/1157","id":682295379,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjI5NTM3OQ==","user":{"login":"lacey1102","id":7149382,"node_id":"MDQ6VXNlcjcxNDkzODI=","avatar_url":"https://avatars.githubusercontent.com/u/7149382?v=4","gravatar_id":"","url":"https://api.github.com/users/lacey1102","html_url":"https://github.com/lacey1102","followers_url":"https://api.github.com/users/lacey1102/followers","following_url":"https://api.github.com/users/lacey1102/following{/other_user}","gists_url":"https://api.github.com/users/lacey1102/gists{/gist_id}","starred_url":"https://api.github.com/users/lacey1102/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lacey1102/subscriptions","organizations_url":"https://api.github.com/users/lacey1102/orgs","repos_url":"https://api.github.com/users/lacey1102/repos","events_url":"https://api.github.com/users/lacey1102/events{/privacy}","received_events_url":"https://api.github.com/users/lacey1102/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T02:51:33Z","updated_at":"2020-08-28T02:51:33Z","author_association":"NONE","body":"> hi，主要是指_numinflight这个计数不对么？\r\n\r\n主要是要做sharepart->RemoveRefManually()。未降低引用个数，会导致这部分内存无法释放。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682295379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682404017","html_url":"https://github.com/apache/brpc/issues/1223#issuecomment-682404017","issue_url":"https://api.github.com/repos/apache/brpc/issues/1223","id":682404017,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjQwNDAxNw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T08:39:44Z","updated_at":"2020-08-28T08:39:44Z","author_association":"CONTRIBUTOR","body":"-minloglevel 这个gflag无法满足需求吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682404017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682420339","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-682420339","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":682420339,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjQyMDMzOQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T09:13:23Z","updated_at":"2020-08-28T09:13:23Z","author_association":"CONTRIBUTOR","body":"> 这个是因为已经链接了glibc里面的pthread_mutex_lock实现，导致brpc里面的hook没有生效\r\n\r\n我在braft的server上用contention也是出现了这个错误了。\r\n\r\n[20200828.170959.contention]\r\nUsing local file /home/work/storage_node_service.\r\nArgument \"MSWin32\" isn't numeric in numeric eq (==) at ./rpc_data/profiling/pprof.pl line 4898.\r\nArgument \"linux\" isn't numeric in numeric eq (==) at ./rpc_data/profiling/pprof.pl line 4898.\r\nUsing local file ./rpc_data/profiling/a33592089b394bec362ef13e1492d1dc/20200828.170959.contention.\r\nNo nodes to print\r\n\r\n求指导","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682420339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682536381","html_url":"https://github.com/apache/brpc/issues/1223#issuecomment-682536381","issue_url":"https://api.github.com/repos/apache/brpc/issues/1223","id":682536381,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MjUzNjM4MQ==","user":{"login":"qicosmos","id":6500147,"node_id":"MDQ6VXNlcjY1MDAxNDc=","avatar_url":"https://avatars.githubusercontent.com/u/6500147?v=4","gravatar_id":"","url":"https://api.github.com/users/qicosmos","html_url":"https://github.com/qicosmos","followers_url":"https://api.github.com/users/qicosmos/followers","following_url":"https://api.github.com/users/qicosmos/following{/other_user}","gists_url":"https://api.github.com/users/qicosmos/gists{/gist_id}","starred_url":"https://api.github.com/users/qicosmos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qicosmos/subscriptions","organizations_url":"https://api.github.com/users/qicosmos/orgs","repos_url":"https://api.github.com/users/qicosmos/repos","events_url":"https://api.github.com/users/qicosmos/events{/privacy}","received_events_url":"https://api.github.com/users/qicosmos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-28T13:02:59Z","updated_at":"2020-08-28T13:02:59Z","author_association":"NONE","body":"我们的工程中也用到了glog，只想禁用brpc部分的输出，而且brpc已经在logging中提供了这个接口了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/682536381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683217626","html_url":"https://github.com/apache/brpc/pull/536#issuecomment-683217626","issue_url":"https://api.github.com/repos/apache/brpc/issues/536","id":683217626,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzIxNzYyNg==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-29T01:52:38Z","updated_at":"2020-08-29T01:52:38Z","author_association":"NONE","body":"麻烦大佬优先看下这个问题哦，我们最近在引入multi模式，测试过程中发现了上述问题，还希望解答下困惑，谢谢！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683217626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683395804","html_url":"https://github.com/apache/brpc/issues/669#issuecomment-683395804","issue_url":"https://api.github.com/repos/apache/brpc/issues/669","id":683395804,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM5NTgwNA==","user":{"login":"zhanghd-yd","id":22021450,"node_id":"MDQ6VXNlcjIyMDIxNDUw","avatar_url":"https://avatars.githubusercontent.com/u/22021450?v=4","gravatar_id":"","url":"https://api.github.com/users/zhanghd-yd","html_url":"https://github.com/zhanghd-yd","followers_url":"https://api.github.com/users/zhanghd-yd/followers","following_url":"https://api.github.com/users/zhanghd-yd/following{/other_user}","gists_url":"https://api.github.com/users/zhanghd-yd/gists{/gist_id}","starred_url":"https://api.github.com/users/zhanghd-yd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhanghd-yd/subscriptions","organizations_url":"https://api.github.com/users/zhanghd-yd/orgs","repos_url":"https://api.github.com/users/zhanghd-yd/repos","events_url":"https://api.github.com/users/zhanghd-yd/events{/privacy}","received_events_url":"https://api.github.com/users/zhanghd-yd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T09:07:53Z","updated_at":"2020-08-30T09:07:53Z","author_association":"NONE","body":"> 换了一下gflag的版本又重新编译了一下，可以通过了，braft也跑通了！\r\n\r\n老兄，我和你一样的问题一样的系统和环境，你是用的哪个版本的gflags，是源码重新编译的吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683395804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683398692","html_url":"https://github.com/apache/brpc/issues/669#issuecomment-683398692","issue_url":"https://api.github.com/repos/apache/brpc/issues/669","id":683398692,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzM5ODY5Mg==","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T09:37:33Z","updated_at":"2020-08-30T09:37:33Z","author_association":"CONTRIBUTOR","body":"> > 换了一下gflag的版本又重新编译了一下，可以通过了，braft也跑通了！\r\n> \r\n> 老兄，我和你一样的问题一样的系统和环境，你是用的哪个版本的gflags，是源码重新编译的吗\r\n\r\n如果是Manjaro的话，sudo pacman -S gflags 就可以了，我之前是源码重新安装的，现在直接安装这些库也可以。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683398692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683440872","html_url":"https://github.com/apache/brpc/issues/669#issuecomment-683440872","issue_url":"https://api.github.com/repos/apache/brpc/issues/669","id":683440872,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzQ0MDg3Mg==","user":{"login":"zhanghd-yd","id":22021450,"node_id":"MDQ6VXNlcjIyMDIxNDUw","avatar_url":"https://avatars.githubusercontent.com/u/22021450?v=4","gravatar_id":"","url":"https://api.github.com/users/zhanghd-yd","html_url":"https://github.com/zhanghd-yd","followers_url":"https://api.github.com/users/zhanghd-yd/followers","following_url":"https://api.github.com/users/zhanghd-yd/following{/other_user}","gists_url":"https://api.github.com/users/zhanghd-yd/gists{/gist_id}","starred_url":"https://api.github.com/users/zhanghd-yd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhanghd-yd/subscriptions","organizations_url":"https://api.github.com/users/zhanghd-yd/orgs","repos_url":"https://api.github.com/users/zhanghd-yd/repos","events_url":"https://api.github.com/users/zhanghd-yd/events{/privacy}","received_events_url":"https://api.github.com/users/zhanghd-yd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-30T16:27:24Z","updated_at":"2020-08-30T16:27:24Z","author_association":"NONE","body":"> > > 换了一下gflag的版本又重新编译了一下，可以通过了，braft也跑通了！\r\n> > \r\n> > \r\n> > 老兄，我和你一样的问题一样的系统和环境，你是用的哪个版本的gflags，是源码重新编译的吗\r\n> \r\n> 如果是Manjaro的话，sudo pacman -S gflags 就可以了，我之前是源码重新安装的，现在直接安装这些库也可以。\r\n\r\n我问题解决了...有点狗血。系统lib和include里原本有一个openssl，但是在安装wps-office-cn后，系统又额外多安装了一个openssl-1.0。编译brpc的时候，config_brpc.sh脚本生成的config.mk的HDRS和LIBS路径都指向了openssl-1.0的版本。感觉应该是这个原因，我把config.mk的路径重新指向了include和lib路径下的openssl版本，重新编译brpc和example就没问题.......","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683440872/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683503787","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-683503787","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":683503787,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUwMzc4Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T01:21:20Z","updated_at":"2020-08-31T01:21:20Z","author_association":"CONTRIBUTOR","body":"这次是直接链接的brpc吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683503787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683506762","html_url":"https://github.com/apache/brpc/issues/1223#issuecomment-683506762","issue_url":"https://api.github.com/repos/apache/brpc/issues/1223","id":683506762,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUwNjc2Mg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T01:32:44Z","updated_at":"2020-08-31T01:32:44Z","author_association":"CONTRIBUTOR","body":"编译brpc时，如果开启了 BRPC_WITH_GLOG ， 则SetMinLogLevel 这个函数没有被定义。\r\n目前只能设置-minloglevel 这个gflag。\r\n是哪些日志刷得频繁？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683506762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683510461","html_url":"https://github.com/apache/brpc/issues/1223#issuecomment-683510461","issue_url":"https://api.github.com/repos/apache/brpc/issues/1223","id":683510461,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUxMDQ2MQ==","user":{"login":"qicosmos","id":6500147,"node_id":"MDQ6VXNlcjY1MDAxNDc=","avatar_url":"https://avatars.githubusercontent.com/u/6500147?v=4","gravatar_id":"","url":"https://api.github.com/users/qicosmos","html_url":"https://github.com/qicosmos","followers_url":"https://api.github.com/users/qicosmos/followers","following_url":"https://api.github.com/users/qicosmos/following{/other_user}","gists_url":"https://api.github.com/users/qicosmos/gists{/gist_id}","starred_url":"https://api.github.com/users/qicosmos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qicosmos/subscriptions","organizations_url":"https://api.github.com/users/qicosmos/orgs","repos_url":"https://api.github.com/users/qicosmos/repos","events_url":"https://api.github.com/users/qicosmos/events{/privacy}","received_events_url":"https://api.github.com/users/qicosmos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T01:51:02Z","updated_at":"2020-08-31T01:51:02Z","author_association":"NONE","body":"我开启了这宏。\r\ndefault_variables.cpp中的fail to sscanf, faile to read, fail to xxx之类的日志。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683510461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683512133","html_url":"https://github.com/apache/brpc/issues/1223#issuecomment-683512133","issue_url":"https://api.github.com/repos/apache/brpc/issues/1223","id":683512133,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUxMjEzMw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T01:59:54Z","updated_at":"2020-08-31T01:59:54Z","author_association":"CONTRIBUTOR","body":"出现这些error本身是不符合预期的吧？我们使用过程中，很少见到brpc框架本身输出的日志，输出的日志都比较重要，能帮助排查问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683512133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683513280","html_url":"https://github.com/apache/brpc/issues/1223#issuecomment-683513280","issue_url":"https://api.github.com/repos/apache/brpc/issues/1223","id":683513280,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzUxMzI4MA==","user":{"login":"qicosmos","id":6500147,"node_id":"MDQ6VXNlcjY1MDAxNDc=","avatar_url":"https://avatars.githubusercontent.com/u/6500147?v=4","gravatar_id":"","url":"https://api.github.com/users/qicosmos","html_url":"https://github.com/qicosmos","followers_url":"https://api.github.com/users/qicosmos/followers","following_url":"https://api.github.com/users/qicosmos/following{/other_user}","gists_url":"https://api.github.com/users/qicosmos/gists{/gist_id}","starred_url":"https://api.github.com/users/qicosmos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qicosmos/subscriptions","organizations_url":"https://api.github.com/users/qicosmos/orgs","repos_url":"https://api.github.com/users/qicosmos/repos","events_url":"https://api.github.com/users/qicosmos/events{/privacy}","received_events_url":"https://api.github.com/users/qicosmos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T02:05:57Z","updated_at":"2020-08-31T02:05:57Z","author_association":"NONE","body":"说得也是，也许还得继续查找为什么频繁刷这个日志的原因。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683513280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683578715","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-683578715","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":683578715,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzU3ODcxNQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T06:06:55Z","updated_at":"2020-08-31T06:06:55Z","author_association":"CONTRIBUTOR","body":"这个没必要修改代码，在mapping中增加一行自己到自己的映射关系即可： \r\n\"SERVICE/METHOD => SERVICE/METHOD\"","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683578715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683579083","html_url":"https://github.com/apache/brpc/pull/1212#issuecomment-683579083","issue_url":"https://api.github.com/repos/apache/brpc/issues/1212","id":683579083,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzU3OTA4Mw==","user":{"login":"eric-buaa-cn","id":40321036,"node_id":"MDQ6VXNlcjQwMzIxMDM2","avatar_url":"https://avatars.githubusercontent.com/u/40321036?v=4","gravatar_id":"","url":"https://api.github.com/users/eric-buaa-cn","html_url":"https://github.com/eric-buaa-cn","followers_url":"https://api.github.com/users/eric-buaa-cn/followers","following_url":"https://api.github.com/users/eric-buaa-cn/following{/other_user}","gists_url":"https://api.github.com/users/eric-buaa-cn/gists{/gist_id}","starred_url":"https://api.github.com/users/eric-buaa-cn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eric-buaa-cn/subscriptions","organizations_url":"https://api.github.com/users/eric-buaa-cn/orgs","repos_url":"https://api.github.com/users/eric-buaa-cn/repos","events_url":"https://api.github.com/users/eric-buaa-cn/events{/privacy}","received_events_url":"https://api.github.com/users/eric-buaa-cn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T06:08:03Z","updated_at":"2020-08-31T06:08:03Z","author_association":"CONTRIBUTOR","body":"May be later I'll fix the license problem.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683579083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683698131","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-683698131","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":683698131,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MzY5ODEzMQ==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-31T10:29:42Z","updated_at":"2020-08-31T10:29:42Z","author_association":"MEMBER","body":"不支持添加 service 同名的映射吧?\r\n\r\n我这里会提示:\r\n> Impossible: _fullname_service and _service_map are inconsistent before inserting\r\n\r\n添加时在这里是不是限制了?\r\nhttps://github.com/apache/incubator-brpc/blob/8801a8444f35e93f37b5d13019577edbdedfd6f6/src/brpc/server.cpp#L1316\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/683698131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684136855","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-684136855","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":684136855,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDEzNjg1NQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T01:28:29Z","updated_at":"2020-09-01T01:28:29Z","author_association":"CONTRIBUTOR","body":"我是这样写的，没问题\r\n![image](https://user-images.githubusercontent.com/3294444/91784228-f456b880-ec34-11ea-8516-3f9c15c6b9d9.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684136855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684146991","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-684146991","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":684146991,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDE0Njk5MQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T02:03:36Z","updated_at":"2020-09-01T02:03:36Z","author_association":"CONTRIBUTOR","body":"> 这次是直接链接的brpc吗？\r\n\r\n对的。是一个brpc的server，不是dummy server了。但也没有连接tcmalloc的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684146991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684545119","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-684545119","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":684545119,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDU0NTExOQ==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T08:13:39Z","updated_at":"2020-09-01T08:13:39Z","author_association":"MEMBER","body":"@gydong  这样是可以通过 `/Echo` 访问 ``SERVICE`` 的 ``Echo`` 方法, 但是不能通过原路径 ``/SERVICE/Echo`` 进行访问, 映射后是全路径, 这样如果想要在有映射的情况下, 保留通过 ``/SERVICE/Echo`` 访问的方式, 那么需要怎么配呢?\r\n\r\n我这边的场景是服务端希望可以支持 ``gRPC`` 及 ``HTTP`` 进行访问:\r\n1. ``gRPC`` 部分直接使用 ``proto`` 定义的方法进行访问, 即: ``/SERVICE_FULL_NAME/Echo``;\r\n2. ``HTTP`` 则通过映射后的路径进行访问, 即: ``/v1/xxx/Echo``.\r\n\r\n同时还希望保留 ``default_method`` 的行为.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684545119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684574456","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-684574456","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":684574456,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NDU3NDQ1Ng==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-01T08:33:53Z","updated_at":"2020-09-01T08:33:53Z","author_association":"CONTRIBUTOR","body":"嗯，你说的对，我去了解一下相关背景，看看如何满足你的需求更合适","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/684574456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/685232133","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-685232133","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":685232133,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTIzMjEzMw==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T01:45:49Z","updated_at":"2020-09-02T01:45:49Z","author_association":"MEMBER","body":"[travis](https://travis-ci.org/github/apache/incubator-brpc/jobs/723097214) 在编译 unittest 时失败, 但应该与此次改动无关.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/685232133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/685273736","html_url":"https://github.com/apache/brpc/pull/1214#issuecomment-685273736","issue_url":"https://api.github.com/repos/apache/brpc/issues/1214","id":685273736,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTI3MzczNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T03:46:13Z","updated_at":"2020-09-02T03:46:13Z","author_association":"CONTRIBUTOR","body":"@wasphin thanks for the commit and UT","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/685273736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/685452562","html_url":"https://github.com/apache/brpc/issues/1173#issuecomment-685452562","issue_url":"https://api.github.com/repos/apache/brpc/issues/1173","id":685452562,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTQ1MjU2Mg==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T08:47:29Z","updated_at":"2020-09-02T08:47:29Z","author_association":"CONTRIBUTOR","body":"@JianyuLi @zhongleihe 请问可以提供一个可复现的环境嘛，Dockerfile就行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/685452562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686230241","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-686230241","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":686230241,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjIzMDI0MQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T03:33:51Z","updated_at":"2020-09-03T03:34:03Z","author_association":"CONTRIBUTOR","body":"把 FLAGS_bvar_collector_expected_per_second 设置成超过你服务QPS的一个数字不可以吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686230241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686485682","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-686485682","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":686485682,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjQ4NTY4Mg==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T13:20:27Z","updated_at":"2020-09-03T13:20:27Z","author_association":"MEMBER","body":"> 把 FLAGS_bvar_collector_expected_per_second 设置成超过你服务QPS的一个数字不可以吗？\r\n\r\n这个flag默认值是1000。已经远超我们的qps了。\r\n@gydong ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686485682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686839658","html_url":"https://github.com/apache/brpc/issues/1226#issuecomment-686839658","issue_url":"https://api.github.com/repos/apache/brpc/issues/1226","id":686839658,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjgzOTY1OA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T01:02:31Z","updated_at":"2020-09-04T01:02:31Z","author_association":"CONTRIBUTOR","body":"#https://github.com/apache/incubator-brpc/issues/1191","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686839658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686840044","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-686840044","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":686840044,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg0MDA0NA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T01:03:50Z","updated_at":"2020-09-04T01:03:50Z","author_association":"CONTRIBUTOR","body":"那你实际观测到的采样率大概是多少呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686840044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686858830","html_url":"https://github.com/apache/brpc/issues/1211#issuecomment-686858830","issue_url":"https://api.github.com/repos/apache/brpc/issues/1211","id":686858830,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njg1ODgzMA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T02:13:13Z","updated_at":"2020-09-04T02:13:13Z","author_association":"CONTRIBUTOR","body":"方便的话，留下你的微信号，我拉你到开发者群里","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/686858830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687048973","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-687048973","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":687048973,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzA0ODk3Mw==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T09:56:16Z","updated_at":"2020-09-04T09:56:16Z","author_association":"MEMBER","body":"> 那你实际观测到的采样率大概是多少呢？\r\n\r\n一个非线上的机器，就是一分钟内一会有请求一会没有。qps小于1吧。就想每次请求都落一下。不想用线上的机器落。怕影响性能。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687048973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687711837","html_url":"https://github.com/apache/brpc/issues/1227#issuecomment-687711837","issue_url":"https://api.github.com/repos/apache/brpc/issues/1227","id":687711837,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzcxMTgzNw==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T06:52:03Z","updated_at":"2020-09-06T06:52:03Z","author_association":"MEMBER","body":"A reproducible example.\r\n\r\nfile:  ``echo.cc``\r\n```c++\r\n#include <boost/process.hpp>\r\n#include <iostream>\r\n\r\nint main(int, char*[]) {\r\n    namespace bp = boost::process;\r\n\r\n    bp::ipstream out;\r\n    bp::child echo(bp::search_path(\"echo\"), \"hello, world!\", bp::std_out > out);\r\n\r\n    std::string line;\r\n    while (out && std::getline(out, line) && !line.empty())\r\n        std::cout << line << std::endl;\r\n\r\n    echo.wait();\r\n\r\n    return 0;\r\n}\r\n```\r\nWithout ``brpc``:\r\n```\r\n$ g++ fork.cc -lboost_system -lboost_filesystem -pthread\r\n$ ./a.out \r\nhello, world!\r\n```\r\nWith ``brpc``:\r\n```\r\n$ g++ fork.cc -lbrpc -lboost_system -lboost_filesystem -pthread\r\n$ ldd a.out \r\n\tlinux-vdso.so.1 (0x00007f2f8597b000)\r\n\tlibbrpc.so => /lib64/libbrpc.so (0x00007f2f84530000)\r\n\tlibboost_system.so.1.66.0 => /lib64/libboost_system.so.1.66.0 (0x00007f2f8432b000)\r\n\tlibboost_filesystem.so.1.66.0 => /lib64/libboost_filesystem.so.1.66.0 (0x00007f2f84110000)\r\n\tlibstdc++.so.6 => /lib64/libstdc++.so.6 (0x00007f2f83d7b000)\r\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007f2f839f9000)\r\n\tlibgcc_s.so.1 => /lib64/libgcc_s.so.1 (0x00007f2f837e1000)\r\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007f2f835c1000)\r\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007f2f831ff000)\r\n\tlibgflags.so.2.1 => /lib64/libgflags.so.2.1 (0x00007f2f82fd8000)\r\n\tlibprotobuf.so.15 => /lib64/libprotobuf.so.15 (0x00007f2f82adb000)\r\n\tlibleveldb.so.1 => /lib64/libleveldb.so.1 (0x00007f2f82877000)\r\n\tlibprotoc.so.15 => /lib64/libprotoc.so.15 (0x00007f2f823b9000)\r\n\tlibcrypto.so.1.1 => /lib64/libcrypto.so.1.1 (0x00007f2f81ed6000)\r\n\tlibdl.so.2 => /lib64/libdl.so.2 (0x00007f2f81cd2000)\r\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007f2f81abb000)\r\n\tlibssl.so.1.1 => /lib64/libssl.so.1.1 (0x00007f2f81827000)\r\n\tlibrt.so.1 => /lib64/librt.so.1 (0x00007f2f8161e000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f2f85755000)\r\n\tlibsnappy.so.1 => /lib64/libsnappy.so.1 (0x00007f2f81414000)\r\n$ ./a.out\r\n```\r\n```\r\n$ pgrep a.out\r\n28877\r\n28879\r\n$ pstack 28877\r\nThread 2 (Thread 0x7fd3aa239700 (LWP 28878)):\r\n#0  0x00007fd3ac0ed238 in nanosleep () from /lib64/libc.so.6\r\n#1  0x00007fd3ac118d78 in usleep () from /lib64/libc.so.6\r\n#2  0x00007fd3ad53e322 in bvar::detail::SamplerCollector::run (this=0x1ac9600) at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:174\r\n#3  0x00007fd3ad53ee29 in bvar::detail::SamplerCollector::sampling_thread (arg=<optimized out>) at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:103\r\n#4  0x00007fd3ac3ef2de in start_thread () from /lib64/libpthread.so.0\r\n#5  0x00007fd3ac120e83 in clone () from /lib64/libc.so.6\r\nThread 1 (Thread 0x7fd3ae76f9c0 (LWP 28877)):\r\n#0  0x00007fd3ac3f8b94 in read () from /lib64/libpthread.so.0\r\n#1  0x000000000041318c in boost::process::detail::posix::executor<boost::fusion::joint_view<boost::fusion::tuple<boost::process::detail::posix::exe_cmd_init<char> >, boost::fusion::filter_view<boost::fusion::tuple<boost::filesystem::path&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&> const, boost::process::detail::is_initializer<mpl_::arg<-1> > > > >::_read_error(int) ()\r\n#2  0x0000000000411a67 in boost::process::detail::posix::executor<boost::fusion::joint_view<boost::fusion::tuple<boost::process::detail::posix::exe_cmd_init<char> >, boost::fusion::filter_view<boost::fusion::tuple<boost::filesystem::path&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&> const, boost::process::detail::is_initializer<mpl_::arg<-1> > > > >::invoke(mpl_::bool_<false>, mpl_::bool_<false>) ()\r\n#3  0x000000000041025d in boost::process::detail::posix::executor<boost::fusion::joint_view<boost::fusion::tuple<boost::process::detail::posix::exe_cmd_init<char> >, boost::fusion::filter_view<boost::fusion::tuple<boost::filesystem::path&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&> const, boost::process::detail::is_initializer<mpl_::arg<-1> > > > >::operator()() ()\r\n#4  0x000000000040eb57 in boost::process::child boost::process::detail::basic_execute_impl<char, boost::filesystem::path, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1> >(boost::filesystem::path&&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&&) ()\r\n#5  0x000000000040cbd9 in boost::process::child boost::process::detail::execute_impl<boost::filesystem::path, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1> >(boost::filesystem::path&&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&&) ()\r\n#6  0x000000000040b1c8 in boost::process::child::child<boost::filesystem::path, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1> >(boost::filesystem::path&&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&&) ()\r\n#7  0x0000000000405a9f in main ()\r\n$ pstack 28879\r\nThread 2 (Thread 0x7fd3aa239700 (LWP 28880)):\r\n#0  0x00007fd3ac0ed238 in nanosleep () from /lib64/libc.so.6\r\n#1  0x00007fd3ac118d78 in usleep () from /lib64/libc.so.6\r\n#2  0x00007fd3ad53e322 in bvar::detail::SamplerCollector::run (this=0x1ac9600) at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:174\r\n#3  0x00007fd3ad53ee29 in bvar::detail::SamplerCollector::sampling_thread (arg=<optimized out>) at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:103\r\n#4  0x00007fd3ac3ef2de in start_thread () from /lib64/libpthread.so.0\r\n#5  0x00007fd3ac120e83 in clone () from /lib64/libc.so.6\r\nThread 1 (Thread 0x7fd3ae76f9c0 (LWP 28879)):\r\n#0  0x00007fd3ac12e58c in __lll_lock_wait_private () from /lib64/libc.so.6\r\n#1  0x00007fd3ac12e772 in __register_atfork () from /lib64/libc.so.6\r\n#2  0x00007fd3ad53ec17 in bvar::detail::SamplerCollector::create_sampling_thread (this=0x1ac9600) at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:91\r\n#3  bvar::detail::SamplerCollector::after_forked_as_child (this=0x1ac9600) at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:97\r\n#4  bvar::detail::SamplerCollector::child_callback_atfork () at /usr/src/debug/brpc-0.9.7-1.el8.x86_64/src/bvar/detail/sampler.cpp:82\r\n#5  0x00007fd3ac12eb10 in __run_fork_handlers () from /lib64/libc.so.6\r\n#6  0x00007fd3ac0ed38c in fork () from /lib64/libc.so.6\r\n#7  0x00000000004117c9 in boost::process::detail::posix::executor<boost::fusion::joint_view<boost::fusion::tuple<boost::process::detail::posix::exe_cmd_init<char> >, boost::fusion::filter_view<boost::fusion::tuple<boost::filesystem::path&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&> const, boost::process::detail::is_initializer<mpl_::arg<-1> > > > >::invoke(mpl_::bool_<false>, mpl_::bool_<false>) ()\r\n#8  0x000000000041025d in boost::process::detail::posix::executor<boost::fusion::joint_view<boost::fusion::tuple<boost::process::detail::posix::exe_cmd_init<char> >, boost::fusion::filter_view<boost::fusion::tuple<boost::filesystem::path&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&> const, boost::process::detail::is_initializer<mpl_::arg<-1> > > > >::operator()() ()\r\n#9  0x000000000040eb57 in boost::process::child boost::process::detail::basic_execute_impl<char, boost::filesystem::path, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1> >(boost::filesystem::path&&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&&) ()\r\n#10 0x000000000040cbd9 in boost::process::child boost::process::detail::execute_impl<boost::filesystem::path, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1> >(boost::filesystem::path&&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&&) ()\r\n#11 0x000000000040b1c8 in boost::process::child::child<boost::filesystem::path, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1> >(boost::filesystem::path&&, char const (&) [14], boost::process::detail::posix::pipe_out<1, -1>&&) ()\r\n#12 0x0000000000405a9f in main ()\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687711837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687713408","html_url":"https://github.com/apache/brpc/issues/208#issuecomment-687713408","issue_url":"https://api.github.com/repos/apache/brpc/issues/208","id":687713408,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzcxMzQwOA==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T07:06:18Z","updated_at":"2020-09-06T07:06:18Z","author_association":"MEMBER","body":"@jamesge  #1227 中的现象和这个是不是也有关系? 如何在使用 ``brpc`` 的程序中启动其他子进程呢?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687713408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687779766","html_url":"https://github.com/apache/brpc/issues/1227#issuecomment-687779766","issue_url":"https://api.github.com/repos/apache/brpc/issues/1227","id":687779766,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzc3OTc2Ng==","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T12:42:05Z","updated_at":"2020-09-06T12:42:05Z","author_association":"MEMBER","body":"抱歉, 刚看到最新版本有修正.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687779766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687955924","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-687955924","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":687955924,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk1NTkyNA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T00:55:27Z","updated_at":"2020-09-07T00:55:27Z","author_association":"CONTRIBUTOR","body":"『貌似很慢』这个描述很笼统，不清楚哪里不符合预期，是流量少导致慢还是采样频率不符合预期，如何不符合预期","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687955924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687979748","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-687979748","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":687979748,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk3OTc0OA==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:08:54Z","updated_at":"2020-09-07T02:08:54Z","author_association":"MEMBER","body":"> 『貌似很慢』这个描述很笼统，不清楚哪里不符合预期，是流量少导致慢还是采样频率不符合预期，如何不符合预期\r\n\r\n不符合预期是说。当qps小于1的时候，一条都dump不下来。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/687979748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688422452","html_url":"https://github.com/apache/brpc/issues/1225#issuecomment-688422452","issue_url":"https://api.github.com/repos/apache/brpc/issues/1225","id":688422452,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODQyMjQ1Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T16:25:17Z","updated_at":"2020-09-07T16:25:17Z","author_association":"CONTRIBUTOR","body":"从实现角度来说，如果FLAGS_bvar_collector_expected_per_second远大于实际qps，应该是有很大概率会采样每一条请求","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688422452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688559911","html_url":"https://github.com/apache/brpc/issues/1228#issuecomment-688559911","issue_url":"https://api.github.com/repos/apache/brpc/issues/1228","id":688559911,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU1OTkxMQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T00:56:42Z","updated_at":"2020-09-08T00:56:42Z","author_association":"CONTRIBUTOR","body":"代码中有对Start()函数有加判断吗？类似这样子\r\n\r\n![image](https://user-images.githubusercontent.com/3294444/92422786-2aee7f00-f1b1-11ea-919f-7f07a1b4a997.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688559911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688589709","html_url":"https://github.com/apache/brpc/issues/1228#issuecomment-688589709","issue_url":"https://api.github.com/repos/apache/brpc/issues/1228","id":688589709,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4OTcwOQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:56:48Z","updated_at":"2020-09-08T02:56:48Z","author_association":"MEMBER","body":"> 代码中有对Start()函数有加判断吗？类似这样子\r\n> \r\n> ![image](https://user-images.githubusercontent.com/3294444/92422786-2aee7f00-f1b1-11ea-919f-7f07a1b4a997.png)\r\n\r\n有的。\r\nreturn -1之前，也尝试添加了server.Stop(0); server.Join(); 结果还是一样。先出core，等几分钟再结束进程。\r\nreturn -1之前的LOG还能打印出来。不知道你们遇到过没。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688589709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688628360","html_url":"https://github.com/apache/brpc/issues/1228#issuecomment-688628360","issue_url":"https://api.github.com/repos/apache/brpc/issues/1228","id":688628360,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODYyODM2MA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T05:34:18Z","updated_at":"2020-09-08T05:34:18Z","author_association":"CONTRIBUTOR","body":"我遇到过几次端口被占用的情况，可以顺利退出，不会core","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688628360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688637622","html_url":"https://github.com/apache/brpc/issues/1229#issuecomment-688637622","issue_url":"https://api.github.com/repos/apache/brpc/issues/1229","id":688637622,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODYzNzYyMg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T06:02:24Z","updated_at":"2020-09-08T06:02:24Z","author_association":"CONTRIBUTOR","body":"在brpc框架下，锁内RPC属于未定义行为，不管换成什么锁，问题还是一样","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688637622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688640358","html_url":"https://github.com/apache/brpc/issues/1230#issuecomment-688640358","issue_url":"https://api.github.com/repos/apache/brpc/issues/1230","id":688640358,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY0MDM1OA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T06:10:30Z","updated_at":"2020-09-08T06:10:30Z","author_association":"MEMBER","body":"请问有复现的case吗？ 还是通过看代码得到的结论","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688640358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688651366","html_url":"https://github.com/apache/brpc/issues/1230#issuecomment-688651366","issue_url":"https://api.github.com/repos/apache/brpc/issues/1230","id":688651366,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY1MTM2Ng==","user":{"login":"Ailusa0106","id":70932122,"node_id":"MDQ6VXNlcjcwOTMyMTIy","avatar_url":"https://avatars.githubusercontent.com/u/70932122?v=4","gravatar_id":"","url":"https://api.github.com/users/Ailusa0106","html_url":"https://github.com/Ailusa0106","followers_url":"https://api.github.com/users/Ailusa0106/followers","following_url":"https://api.github.com/users/Ailusa0106/following{/other_user}","gists_url":"https://api.github.com/users/Ailusa0106/gists{/gist_id}","starred_url":"https://api.github.com/users/Ailusa0106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ailusa0106/subscriptions","organizations_url":"https://api.github.com/users/Ailusa0106/orgs","repos_url":"https://api.github.com/users/Ailusa0106/repos","events_url":"https://api.github.com/users/Ailusa0106/events{/privacy}","received_events_url":"https://api.github.com/users/Ailusa0106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T06:39:11Z","updated_at":"2020-09-08T06:39:11Z","author_association":"NONE","body":"> 请问有复现的case吗？ 还是通过看代码得到的结论\r\n\r\n你好，看代码的结论，感觉这块无法完全保证获取的是最新值","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688651366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688659081","html_url":"https://github.com/apache/brpc/issues/1229#issuecomment-688659081","issue_url":"https://api.github.com/repos/apache/brpc/issues/1229","id":688659081,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY1OTA4MQ==","user":{"login":"dyinnz","id":9251982,"node_id":"MDQ6VXNlcjkyNTE5ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9251982?v=4","gravatar_id":"","url":"https://api.github.com/users/dyinnz","html_url":"https://github.com/dyinnz","followers_url":"https://api.github.com/users/dyinnz/followers","following_url":"https://api.github.com/users/dyinnz/following{/other_user}","gists_url":"https://api.github.com/users/dyinnz/gists{/gist_id}","starred_url":"https://api.github.com/users/dyinnz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dyinnz/subscriptions","organizations_url":"https://api.github.com/users/dyinnz/orgs","repos_url":"https://api.github.com/users/dyinnz/repos","events_url":"https://api.github.com/users/dyinnz/events{/privacy}","received_events_url":"https://api.github.com/users/dyinnz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T06:54:56Z","updated_at":"2020-09-08T06:54:56Z","author_association":"NONE","body":"> 在brpc框架下，锁内RPC属于未定义行为，不管换成什么锁，问题还是一样\r\n\r\n这里说的'锁内RPC'是指什么意思？我上面说的场景中，是 RPC 的被调用端，部分操作需要加锁，应该是 RPC内部用锁？\r\nBTW，如果只是普通的 mutex，这里的行为应该是这个 bthread/pthread 被阻塞，只要 pthread worker 没有用完，这里应该不至于死锁吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688659081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688665802","html_url":"https://github.com/apache/brpc/issues/1230#issuecomment-688665802","issue_url":"https://api.github.com/repos/apache/brpc/issues/1230","id":688665802,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY2NTgwMg==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T07:08:06Z","updated_at":"2020-09-08T07:08:06Z","author_association":"MEMBER","body":"> 值\r\n\r\nbutex/futex 的语义本身就不保证能看到最新值， 这里保证的都是\"使用姿势正确\"的前提下. 1) waiter 能看到最新的只。 or 2) waiter会被waker通过 *utex_wake() 唤醒.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688665802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688672893","html_url":"https://github.com/apache/brpc/issues/1230#issuecomment-688672893","issue_url":"https://api.github.com/repos/apache/brpc/issues/1230","id":688672893,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY3Mjg5Mw==","user":{"login":"Ailusa0106","id":70932122,"node_id":"MDQ6VXNlcjcwOTMyMTIy","avatar_url":"https://avatars.githubusercontent.com/u/70932122?v=4","gravatar_id":"","url":"https://api.github.com/users/Ailusa0106","html_url":"https://github.com/Ailusa0106","followers_url":"https://api.github.com/users/Ailusa0106/followers","following_url":"https://api.github.com/users/Ailusa0106/following{/other_user}","gists_url":"https://api.github.com/users/Ailusa0106/gists{/gist_id}","starred_url":"https://api.github.com/users/Ailusa0106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ailusa0106/subscriptions","organizations_url":"https://api.github.com/users/Ailusa0106/orgs","repos_url":"https://api.github.com/users/Ailusa0106/repos","events_url":"https://api.github.com/users/Ailusa0106/events{/privacy}","received_events_url":"https://api.github.com/users/Ailusa0106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T07:21:24Z","updated_at":"2020-09-08T07:21:24Z","author_association":"NONE","body":"> > 值\r\n> \r\n> butex/futex 的语义本身就不保证能看到最新值， 这里保证的都是\"使用姿势正确\"的前提下. 1) waiter 能看到最新的只。 or 2) waiter会被waker通过 *utex_wake() 唤醒.\r\n\r\n嗯，多谢回复，主要是针对这个正确的姿势，拿bthread_mutex_unlock举例，假设两个thread，thread1解锁，此时锁变量的值去和0交换，交换之后利用butex_wake唤醒队列（但是此时队列为空），如果thread2 wait_for_butex这个时候看不到最新值就会lock（append进入队列），但是已经没有thread能唤醒它了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688672893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688687371","html_url":"https://github.com/apache/brpc/issues/1229#issuecomment-688687371","issue_url":"https://api.github.com/repos/apache/brpc/issues/1229","id":688687371,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY4NzM3MQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T07:48:47Z","updated_at":"2020-09-08T07:48:47Z","author_association":"CONTRIBUTOR","body":"用STL中的mutex，不会导致bthread被切换到另一个系统线程中，因为系统线程会被阻塞，除非这个过程中调用了一些特定的阻塞函数（如bthread_sleep和butex_wait等等）或者做了同步rpc请求等等","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688687371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688691129","html_url":"https://github.com/apache/brpc/issues/1230#issuecomment-688691129","issue_url":"https://api.github.com/repos/apache/brpc/issues/1230","id":688691129,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY5MTEyOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T07:55:39Z","updated_at":"2020-09-08T07:55:39Z","author_association":"CONTRIBUTOR","body":"> 嗯，多谢回复，主要是针对这个正确的姿势，拿bthread_mutex_unlock举例，假设两个thread，thread1解锁，此时锁变量的值去和0交换，交换之后利用butex_wake唤醒队列（但是此时队列为空），如果thread2 wait_for_butex这个时候看不到最新值就会lock（append进入队列），但是已经没有thread能唤醒它了。\r\n\r\n这是不可能的，wait一端获取waiter_lock后必然能看到最新值。这类多线程问题的先验知识比较多，解释起来也比较困难，你可能得自己去学习一下了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688691129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688693930","html_url":"https://github.com/apache/brpc/issues/1230#issuecomment-688693930","issue_url":"https://api.github.com/repos/apache/brpc/issues/1230","id":688693930,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY5MzkzMA==","user":{"login":"Ailusa0106","id":70932122,"node_id":"MDQ6VXNlcjcwOTMyMTIy","avatar_url":"https://avatars.githubusercontent.com/u/70932122?v=4","gravatar_id":"","url":"https://api.github.com/users/Ailusa0106","html_url":"https://github.com/Ailusa0106","followers_url":"https://api.github.com/users/Ailusa0106/followers","following_url":"https://api.github.com/users/Ailusa0106/following{/other_user}","gists_url":"https://api.github.com/users/Ailusa0106/gists{/gist_id}","starred_url":"https://api.github.com/users/Ailusa0106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ailusa0106/subscriptions","organizations_url":"https://api.github.com/users/Ailusa0106/orgs","repos_url":"https://api.github.com/users/Ailusa0106/repos","events_url":"https://api.github.com/users/Ailusa0106/events{/privacy}","received_events_url":"https://api.github.com/users/Ailusa0106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T08:00:41Z","updated_at":"2020-09-08T08:00:41Z","author_association":"NONE","body":"> > 嗯，多谢回复，主要是针对这个正确的姿势，拿bthread_mutex_unlock举例，假设两个thread，thread1解锁，此时锁变量的值去和0交换，交换之后利用butex_wake唤醒队列（但是此时队列为空），如果thread2 wait_for_butex这个时候看不到最新值就会lock（append进入队列），但是已经没有thread能唤醒它了。\r\n> \r\n> 这是不可能的，wait一端获取waiter_lock后必然能看到最新值。这类多线程问题的先验知识比较多，解释起来也比较困难，你可能得自己去学习一下了。\r\n\r\n好的，多谢戈大神回复","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/688693930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]