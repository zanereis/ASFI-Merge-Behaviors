[{"url":"https://api.github.com/repos/apache/flink/issues/comments/347460701","html_url":"https://github.com/apache/flink/pull/5036#issuecomment-347460701","issue_url":"https://api.github.com/repos/apache/flink/issues/5036","id":347460701,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ2MDcwMQ==","user":{"login":"dianfu","id":5466492,"node_id":"MDQ6VXNlcjU0NjY0OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5466492?v=4","gravatar_id":"","url":"https://api.github.com/users/dianfu","html_url":"https://github.com/dianfu","followers_url":"https://api.github.com/users/dianfu/followers","following_url":"https://api.github.com/users/dianfu/following{/other_user}","gists_url":"https://api.github.com/users/dianfu/gists{/gist_id}","starred_url":"https://api.github.com/users/dianfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dianfu/subscriptions","organizations_url":"https://api.github.com/users/dianfu/orgs","repos_url":"https://api.github.com/users/dianfu/repos","events_url":"https://api.github.com/users/dianfu/events{/privacy}","received_events_url":"https://api.github.com/users/dianfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T09:16:39Z","updated_at":"2017-11-28T09:16:39Z","author_association":"CONTRIBUTOR","body":"Close this PR for the same reason as #5063 ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347460701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347468755","html_url":"https://github.com/apache/flink/pull/5063#issuecomment-347468755","issue_url":"https://api.github.com/repos/apache/flink/issues/5063","id":347468755,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ2ODc1NQ==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T09:46:39Z","updated_at":"2017-11-28T09:46:39Z","author_association":"CONTRIBUTOR","body":"Thank you @dianfu for the discussion. \r\nI raised concerns about this PR because it seem to me to optimize for a special use case and possibly cause regression for more common workloads. However, I don't have numbers to back my assumptions.\r\n\r\nIf this is a big issue for you, we can also benchmark the impact of the change for periodic and punctuated watermarks to check how it affects the performance.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347468755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347469094","html_url":"https://github.com/apache/flink/pull/4581#issuecomment-347469094","issue_url":"https://api.github.com/repos/apache/flink/issues/4581","id":347469094,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ2OTA5NA==","user":{"login":"NicoK","id":213026,"node_id":"MDQ6VXNlcjIxMzAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/213026?v=4","gravatar_id":"","url":"https://api.github.com/users/NicoK","html_url":"https://github.com/NicoK","followers_url":"https://api.github.com/users/NicoK/followers","following_url":"https://api.github.com/users/NicoK/following{/other_user}","gists_url":"https://api.github.com/users/NicoK/gists{/gist_id}","starred_url":"https://api.github.com/users/NicoK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicoK/subscriptions","organizations_url":"https://api.github.com/users/NicoK/orgs","repos_url":"https://api.github.com/users/NicoK/repos","events_url":"https://api.github.com/users/NicoK/events{/privacy}","received_events_url":"https://api.github.com/users/NicoK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T09:47:54Z","updated_at":"2017-11-28T09:47:54Z","author_association":"CONTRIBUTOR","body":"test failures are unrelated this time (failing kafka download for the end-to-end tests)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347469094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347471467","html_url":"https://github.com/apache/flink/pull/4889#issuecomment-347471467","issue_url":"https://api.github.com/repos/apache/flink/issues/4889","id":347471467,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ3MTQ2Nw==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T09:56:38Z","updated_at":"2017-11-28T09:56:38Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @zentol. Rebasing and once Travis gives green light, I'll merge it.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347471467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347474744","html_url":"https://github.com/apache/flink/pull/5063#issuecomment-347474744","issue_url":"https://api.github.com/repos/apache/flink/issues/5063","id":347474744,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ3NDc0NA==","user":{"login":"dianfu","id":5466492,"node_id":"MDQ6VXNlcjU0NjY0OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5466492?v=4","gravatar_id":"","url":"https://api.github.com/users/dianfu","html_url":"https://github.com/dianfu","followers_url":"https://api.github.com/users/dianfu/followers","following_url":"https://api.github.com/users/dianfu/following{/other_user}","gists_url":"https://api.github.com/users/dianfu/gists{/gist_id}","starred_url":"https://api.github.com/users/dianfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dianfu/subscriptions","organizations_url":"https://api.github.com/users/dianfu/orgs","repos_url":"https://api.github.com/users/dianfu/repos","events_url":"https://api.github.com/users/dianfu/events{/privacy}","received_events_url":"https://api.github.com/users/dianfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T10:09:09Z","updated_at":"2017-11-28T10:09:09Z","author_association":"CONTRIBUTOR","body":"The current known impact is that it will need to checkpoint more timer. For the impact to performance, I will do some benchmark later. :)   \r\nI think we only need to consider this optimization if there are cases where users have to use punctuated watermark in the way that generating one watermark for every incoming event. I will reopen this PR if we find a persuading use case and reason. :)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347474744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347475120","html_url":"https://github.com/apache/flink/pull/5085#issuecomment-347475120","issue_url":"https://api.github.com/repos/apache/flink/issues/5085","id":347475120,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ3NTEyMA==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T10:10:34Z","updated_at":"2017-11-28T10:10:34Z","author_association":"CONTRIBUTOR","body":"Merging.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347475120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347483604","html_url":"https://github.com/apache/flink/pull/5063#issuecomment-347483604","issue_url":"https://api.github.com/repos/apache/flink/issues/5063","id":347483604,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ4MzYwNA==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T10:42:32Z","updated_at":"2017-11-28T10:42:32Z","author_association":"CONTRIBUTOR","body":"Great, thank you!","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347483604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347485667","html_url":"https://github.com/apache/flink/pull/5040#issuecomment-347485667","issue_url":"https://api.github.com/repos/apache/flink/issues/5040","id":347485667,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ4NTY2Nw==","user":{"login":"twalthr","id":5746567,"node_id":"MDQ6VXNlcjU3NDY1Njc=","avatar_url":"https://avatars.githubusercontent.com/u/5746567?v=4","gravatar_id":"","url":"https://api.github.com/users/twalthr","html_url":"https://github.com/twalthr","followers_url":"https://api.github.com/users/twalthr/followers","following_url":"https://api.github.com/users/twalthr/following{/other_user}","gists_url":"https://api.github.com/users/twalthr/gists{/gist_id}","starred_url":"https://api.github.com/users/twalthr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalthr/subscriptions","organizations_url":"https://api.github.com/users/twalthr/orgs","repos_url":"https://api.github.com/users/twalthr/repos","events_url":"https://api.github.com/users/twalthr/events{/privacy}","received_events_url":"https://api.github.com/users/twalthr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T10:50:21Z","updated_at":"2017-11-28T10:50:21Z","author_association":"CONTRIBUTOR","body":"Thanks. I will have a look at it soon. I think it ok that the Table API is a super set of features in this case.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347485667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347506832","html_url":"https://github.com/apache/flink/pull/4504#issuecomment-347506832","issue_url":"https://api.github.com/repos/apache/flink/issues/4504","id":347506832,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzUwNjgzMg==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T12:22:38Z","updated_at":"2017-11-28T12:22:38Z","author_association":"CONTRIBUTOR","body":"@NicoK The byte counting in the ResultPartition class looks unrelated to the metric system; in fact that field isn't read anywhere. We may want to remove it, but I wouldn't do that as part of this PR.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347506832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347526066","html_url":"https://github.com/apache/flink/pull/4666#issuecomment-347526066","issue_url":"https://api.github.com/repos/apache/flink/issues/4666","id":347526066,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzUyNjA2Ng==","user":{"login":"greghogan","id":569655,"node_id":"MDQ6VXNlcjU2OTY1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/569655?v=4","gravatar_id":"","url":"https://api.github.com/users/greghogan","html_url":"https://github.com/greghogan","followers_url":"https://api.github.com/users/greghogan/followers","following_url":"https://api.github.com/users/greghogan/following{/other_user}","gists_url":"https://api.github.com/users/greghogan/gists{/gist_id}","starred_url":"https://api.github.com/users/greghogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greghogan/subscriptions","organizations_url":"https://api.github.com/users/greghogan/orgs","repos_url":"https://api.github.com/users/greghogan/repos","events_url":"https://api.github.com/users/greghogan/events{/privacy}","received_events_url":"https://api.github.com/users/greghogan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T13:39:36Z","updated_at":"2017-11-28T13:39:36Z","author_association":"CONTRIBUTOR","body":"@raymondtay are we still looking to make this change? Defining the mapper may be just as likely to confuse new Flink users.\r\n\r\nAlso, when updating future PRs you want to rebase to master rather than merging master.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347526066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347532408","html_url":"https://github.com/apache/flink/pull/4734#issuecomment-347532408","issue_url":"https://api.github.com/repos/apache/flink/issues/4734","id":347532408,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzUzMjQwOA==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T14:03:05Z","updated_at":"2017-11-28T14:03:05Z","author_association":"CONTRIBUTOR","body":"Hi @tillrohrmann, this PR is now rebased to the latest master, and reworked to incorporate your last comments.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347532408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347553610","html_url":"https://github.com/apache/flink/pull/4826#issuecomment-347553610","issue_url":"https://api.github.com/repos/apache/flink/issues/4826","id":347553610,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU1MzYxMA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T15:11:09Z","updated_at":"2017-11-28T15:12:05Z","author_association":"CONTRIBUTOR","body":"So here's the thing: The port of the metric itself is good, and exactly what i want 👍 . What I'm unsatisfied with is the naming of the metric, but that isn't the fault of this PR but a limitation in the metric system.\r\n\r\nThe way the metric is named is inconsistent. The source task is encoded in the metric name with its ID, but the target task is encoded in the scope as either ID or name, based on the scope format. (maybe reverse the order but you get the idea i hope).\r\n\r\nThe conclusion i arrived at is that this metric should not be registered at the task level (which just doesn't support the notion of a metric describing 2 tasks) but at the job level instead (where we can do whatever we want in regards to tasks).\r\n\r\nThis would, in principal, allow us to have this identifier:\r\n```myjob.latency.source.ABCDE.target.DEFGH.latency_p95```\r\nBut this still isn't satisfactory, because it is still hardly usable for key-value reporters where we want to filter the latency metrics based on the source or target, for which we need something like this:\r\n```\r\nlogical scope: job.task.latency.latency_p95:\r\ntags:\r\n   job_name = myjob\r\n   source = ABCDE\r\n   target = DEFGH\r\n```\r\nFor this to work however we first have to implement FLINK-7692 to support custom key-value pairs.\r\n\r\nAs such I would like to delay merging this PR by a week or 2 until the aforementioned feature is implemented, so we don't iterate through 3 different versions.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347553610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347555536","html_url":"https://github.com/apache/flink/pull/4374#issuecomment-347555536","issue_url":"https://api.github.com/repos/apache/flink/issues/4374","id":347555536,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU1NTUzNg==","user":{"login":"greghogan","id":569655,"node_id":"MDQ6VXNlcjU2OTY1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/569655?v=4","gravatar_id":"","url":"https://api.github.com/users/greghogan","html_url":"https://github.com/greghogan","followers_url":"https://api.github.com/users/greghogan/followers","following_url":"https://api.github.com/users/greghogan/following{/other_user}","gists_url":"https://api.github.com/users/greghogan/gists{/gist_id}","starred_url":"https://api.github.com/users/greghogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greghogan/subscriptions","organizations_url":"https://api.github.com/users/greghogan/orgs","repos_url":"https://api.github.com/users/greghogan/repos","events_url":"https://api.github.com/users/greghogan/events{/privacy}","received_events_url":"https://api.github.com/users/greghogan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T15:16:52Z","updated_at":"2017-11-28T15:16:52Z","author_association":"CONTRIBUTOR","body":"@RebornHuan although this change looks to be correct and makes good use of the newer API, there is a trade-off between deleting a line of code called during an error condition and the risk of such small refactorings. I don't think we have a demonstrated benefit to making this change.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347555536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347557779","html_url":"https://github.com/apache/flink/pull/5093#issuecomment-347557779","issue_url":"https://api.github.com/repos/apache/flink/issues/5093","id":347557779,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU1Nzc3OQ==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T15:23:38Z","updated_at":"2017-11-28T15:23:38Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @GJL.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347557779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347573502","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347573502","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347573502,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU3MzUwMg==","user":{"login":"xccui","id":1452518,"node_id":"MDQ6VXNlcjE0NTI1MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1452518?v=4","gravatar_id":"","url":"https://api.github.com/users/xccui","html_url":"https://github.com/xccui","followers_url":"https://api.github.com/users/xccui/followers","following_url":"https://api.github.com/users/xccui/following{/other_user}","gists_url":"https://api.github.com/users/xccui/gists{/gist_id}","starred_url":"https://api.github.com/users/xccui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xccui/subscriptions","organizations_url":"https://api.github.com/users/xccui/orgs","repos_url":"https://api.github.com/users/xccui/repos","events_url":"https://api.github.com/users/xccui/events{/privacy}","received_events_url":"https://api.github.com/users/xccui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T16:09:28Z","updated_at":"2017-11-28T16:09:28Z","author_association":"MEMBER","body":"Hi @hequn8128, thanks for looking into this. \r\n\r\nI've checked the current implementation and found that it really may emit late data. However, that was caused by the checkings below:\r\nhttps://github.com/apache/flink/blob/427dfe42e2bea891b40e662bc97cdea57cdae3f5/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/join/TimeBoundedStreamInnerJoin.scala#L173\r\nand\r\nhttps://github.com/apache/flink/blob/427dfe42e2bea891b40e662bc97cdea57cdae3f5/flink-libraries/flink-table/src/main/scala/org/apache/flink/table/runtime/join/TimeBoundedStreamInnerJoin.scala#L234\r\n\r\nIn some situations, they will not forbid the late rows from being calculated and emitted. Honestly, I cannot think out a solution in a short time. Do you want to continue working on that? Or I could take it over, if you don't mind.\r\n\r\nThanks, Xingcan","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347573502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347598008","html_url":"https://github.com/apache/flink/pull/5040#issuecomment-347598008","issue_url":"https://api.github.com/repos/apache/flink/issues/5040","id":347598008,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU5ODAwOA==","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T17:23:35Z","updated_at":"2017-11-28T17:23:35Z","author_association":"CONTRIBUTOR","body":"Thanks @twalthr for confirming, I will also add in the documentation today then.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347598008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347606292","html_url":"https://github.com/apache/flink/pull/4374#issuecomment-347606292","issue_url":"https://api.github.com/repos/apache/flink/issues/4374","id":347606292,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzYwNjI5Mg==","user":{"login":"NicoK","id":213026,"node_id":"MDQ6VXNlcjIxMzAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/213026?v=4","gravatar_id":"","url":"https://api.github.com/users/NicoK","html_url":"https://github.com/NicoK","followers_url":"https://api.github.com/users/NicoK/followers","following_url":"https://api.github.com/users/NicoK/following{/other_user}","gists_url":"https://api.github.com/users/NicoK/gists{/gist_id}","starred_url":"https://api.github.com/users/NicoK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicoK/subscriptions","organizations_url":"https://api.github.com/users/NicoK/orgs","repos_url":"https://api.github.com/users/NicoK/repos","events_url":"https://api.github.com/users/NicoK/events{/privacy}","received_events_url":"https://api.github.com/users/NicoK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T17:49:17Z","updated_at":"2017-11-28T17:49:17Z","author_association":"CONTRIBUTOR","body":"but honestly, the previous approach just looks wrong: adding it and in case of a conflict reverting that `put` operation.\r\nWhat if (and I'm walking in the dark here) something already operates on the invalidly registered task (is this run in parallel?). I cannot spot any parallel use though...","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347606292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347669679","html_url":"https://github.com/apache/flink/pull/4383#issuecomment-347669679","issue_url":"https://api.github.com/repos/apache/flink/issues/4383","id":347669679,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY2OTY3OQ==","user":{"login":"greghogan","id":569655,"node_id":"MDQ6VXNlcjU2OTY1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/569655?v=4","gravatar_id":"","url":"https://api.github.com/users/greghogan","html_url":"https://github.com/greghogan","followers_url":"https://api.github.com/users/greghogan/followers","following_url":"https://api.github.com/users/greghogan/following{/other_user}","gists_url":"https://api.github.com/users/greghogan/gists{/gist_id}","starred_url":"https://api.github.com/users/greghogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greghogan/subscriptions","organizations_url":"https://api.github.com/users/greghogan/orgs","repos_url":"https://api.github.com/users/greghogan/repos","events_url":"https://api.github.com/users/greghogan/events{/privacy}","received_events_url":"https://api.github.com/users/greghogan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T21:29:25Z","updated_at":"2017-11-28T21:29:25Z","author_association":"CONTRIBUTOR","body":"@zentol @fhueske I am merging the change with the extra space since this looks to have been the original intent. I've looked at both forms without finding a strong preference.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347669679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347669894","html_url":"https://github.com/apache/flink/pull/4574#issuecomment-347669894","issue_url":"https://api.github.com/repos/apache/flink/issues/4574","id":347669894,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY2OTg5NA==","user":{"login":"greghogan","id":569655,"node_id":"MDQ6VXNlcjU2OTY1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/569655?v=4","gravatar_id":"","url":"https://api.github.com/users/greghogan","html_url":"https://github.com/greghogan","followers_url":"https://api.github.com/users/greghogan/followers","following_url":"https://api.github.com/users/greghogan/following{/other_user}","gists_url":"https://api.github.com/users/greghogan/gists{/gist_id}","starred_url":"https://api.github.com/users/greghogan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greghogan/subscriptions","organizations_url":"https://api.github.com/users/greghogan/orgs","repos_url":"https://api.github.com/users/greghogan/repos","events_url":"https://api.github.com/users/greghogan/events{/privacy}","received_events_url":"https://api.github.com/users/greghogan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T21:30:11Z","updated_at":"2017-11-28T21:30:11Z","author_association":"CONTRIBUTOR","body":"@zjureel am merging this ... thanks for the PR and edits!","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347669894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347690710","html_url":"https://github.com/apache/flink/pull/5076#issuecomment-347690710","issue_url":"https://api.github.com/repos/apache/flink/issues/5076","id":347690710,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY5MDcxMA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T22:50:27Z","updated_at":"2017-11-28T22:50:27Z","author_association":"CONTRIBUTOR","body":"These should generally be pretty safe changes to make IMO, and well worth it. In particular the undeclared usage of transitive dependencies (that may be shaded) frequently caused headaches, and should now be much easier to detect.\r\n\r\nWe have to look out for dependencies that are used exclusively via reflection and those we have for the sake of including them in flink-dist; can't think of other special cases at the moment.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347690710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347744702","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347744702","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347744702,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc0NDcwMg==","user":{"login":"hequn8128","id":4971479,"node_id":"MDQ6VXNlcjQ5NzE0Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4971479?v=4","gravatar_id":"","url":"https://api.github.com/users/hequn8128","html_url":"https://github.com/hequn8128","followers_url":"https://api.github.com/users/hequn8128/followers","following_url":"https://api.github.com/users/hequn8128/following{/other_user}","gists_url":"https://api.github.com/users/hequn8128/gists{/gist_id}","starred_url":"https://api.github.com/users/hequn8128/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hequn8128/subscriptions","organizations_url":"https://api.github.com/users/hequn8128/orgs","repos_url":"https://api.github.com/users/hequn8128/repos","events_url":"https://api.github.com/users/hequn8128/events{/privacy}","received_events_url":"https://api.github.com/users/hequn8128/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T03:50:27Z","updated_at":"2017-11-29T03:51:03Z","author_association":"CONTRIBUTOR","body":"Hi @xccui , thanks for your reply. Feel free to take it if you wish. I still have some confusions. \r\n1. Considering the test `testRowTimeJoinWithCommonBounds2` in `JoinHarnessTest`, do you mean the row with timestamp 1000 should not been calculated? The row does satisfy the join condition: `t1.rt BETWEEN t2.rt - INTERVAL '5' SECOND AND t2.rt + INTERVAL '1' SECOND`, and this is the difference between `BETWEEN` and `NOT BETWEEN`.\r\n2. Can't we use the holding back watermark as the boundary to cache and expire data? Any data with timestamp bigger than the holding back watermark should be cached and may be joined later.  We should take any opportunity to join and produce a result that satisfy the join predicate.\r\n\r\nThanks, Hequn","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347744702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347749387","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347749387","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347749387,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc0OTM4Nw==","user":{"login":"xccui","id":1452518,"node_id":"MDQ6VXNlcjE0NTI1MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1452518?v=4","gravatar_id":"","url":"https://api.github.com/users/xccui","html_url":"https://github.com/xccui","followers_url":"https://api.github.com/users/xccui/followers","following_url":"https://api.github.com/users/xccui/following{/other_user}","gists_url":"https://api.github.com/users/xccui/gists{/gist_id}","starred_url":"https://api.github.com/users/xccui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xccui/subscriptions","organizations_url":"https://api.github.com/users/xccui/orgs","repos_url":"https://api.github.com/users/xccui/repos","events_url":"https://api.github.com/users/xccui/events{/privacy}","received_events_url":"https://api.github.com/users/xccui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T04:27:01Z","updated_at":"2017-11-29T04:27:01Z","author_association":"MEMBER","body":"Hi @hequn8128, let me try to explain this.\r\n\r\n1. In current implementation,  the join process just relies on the cached rows instead of the watermarks. Specifically, when receiving a record, the join function will only check whether there exist qualified rows of the opposite cache in spite of the lateness. Thus if the cache ***is not cleaned up in time***, the outdated results will be emitted.\r\n\r\n2. Strictly speaking, the value for holding back watermarks should be dynamically reported by the join function in runtime. The current implementation temporarily uses a static value (`MaxOutputDelay`) for that. In other words, the holding back value should be decided by the cached rows, rather than, the cache size should be decided by `MaxOutputDelay`.\r\n\r\nHope that helps.\r\n\r\nBest, Xingcan","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347749387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347776259","html_url":"https://github.com/apache/flink/pull/5075#issuecomment-347776259","issue_url":"https://api.github.com/repos/apache/flink/issues/5075","id":347776259,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc3NjI1OQ==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T07:32:10Z","updated_at":"2017-11-29T07:32:10Z","author_association":"CONTRIBUTOR","body":"Thanks! Merging this ..","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347776259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347777079","html_url":"https://github.com/apache/flink/pull/5017#issuecomment-347777079","issue_url":"https://api.github.com/repos/apache/flink/issues/5017","id":347777079,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc3NzA3OQ==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T07:36:37Z","updated_at":"2017-11-29T07:36:37Z","author_association":"CONTRIBUTOR","body":"Merging ...","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347777079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347778835","html_url":"https://github.com/apache/flink/pull/4935#issuecomment-347778835","issue_url":"https://api.github.com/repos/apache/flink/issues/4935","id":347778835,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc3ODgzNQ==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T07:46:48Z","updated_at":"2017-11-29T07:46:48Z","author_association":"CONTRIBUTOR","body":"Hi @Aitozi, sorry for the long delay in relaying back to this PR.\r\n\r\nI'm still not convinced that this is a sane solution. For example, what is a \"good\" setting for the `KEY_REGISTER_TIMES` property? Isn't 1 enough, since you mentioned that the missing metric is registered in Kafka after the first poll. Making this configurable seems unnecessary to me.\r\n\r\nI wonder if we can try the following two approaches:\r\n1) Manually register the metrics that we know would be missing before the first poll, or\r\n2) Poll once first outside the loop just to make sure that all Kafka metrics are existent, perform the metrics registration, and then start the regular fetch loop.\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347778835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347795341","html_url":"https://github.com/apache/flink/pull/3359#issuecomment-347795341","issue_url":"https://api.github.com/repos/apache/flink/issues/3359","id":347795341,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc5NTM0MQ==","user":{"login":"StefanRRichter","id":2128543,"node_id":"MDQ6VXNlcjIxMjg1NDM=","avatar_url":"https://avatars.githubusercontent.com/u/2128543?v=4","gravatar_id":"","url":"https://api.github.com/users/StefanRRichter","html_url":"https://github.com/StefanRRichter","followers_url":"https://api.github.com/users/StefanRRichter/followers","following_url":"https://api.github.com/users/StefanRRichter/following{/other_user}","gists_url":"https://api.github.com/users/StefanRRichter/gists{/gist_id}","starred_url":"https://api.github.com/users/StefanRRichter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StefanRRichter/subscriptions","organizations_url":"https://api.github.com/users/StefanRRichter/orgs","repos_url":"https://api.github.com/users/StefanRRichter/repos","events_url":"https://api.github.com/users/StefanRRichter/events{/privacy}","received_events_url":"https://api.github.com/users/StefanRRichter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:02:21Z","updated_at":"2017-11-29T09:02:21Z","author_association":"CONTRIBUTOR","body":"I think this implementation was (close to complete) and should be working, but the PR is outdated. I think it should be possible to attempt a manual rebase.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347795341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347800308","html_url":"https://github.com/apache/flink/pull/4559#issuecomment-347800308","issue_url":"https://api.github.com/repos/apache/flink/issues/4559","id":347800308,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgwMDMwOA==","user":{"login":"NicoK","id":213026,"node_id":"MDQ6VXNlcjIxMzAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/213026?v=4","gravatar_id":"","url":"https://api.github.com/users/NicoK","html_url":"https://github.com/NicoK","followers_url":"https://api.github.com/users/NicoK/followers","following_url":"https://api.github.com/users/NicoK/following{/other_user}","gists_url":"https://api.github.com/users/NicoK/gists{/gist_id}","starred_url":"https://api.github.com/users/NicoK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicoK/subscriptions","organizations_url":"https://api.github.com/users/NicoK/orgs","repos_url":"https://api.github.com/users/NicoK/repos","events_url":"https://api.github.com/users/NicoK/events{/privacy}","received_events_url":"https://api.github.com/users/NicoK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:21:47Z","updated_at":"2017-11-29T09:22:37Z","author_association":"CONTRIBUTOR","body":"Regarding b): I just checked with #4552 and it looks as if the `backlog` is incremented from the `RecordWriter` / task thread, and then both read and decremented from netty's IO thread. Therefore, we'll not only have a visibility problem here, but also a synchronisation problem with the increment/decrement, won't we? ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347800308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347801349","html_url":"https://github.com/apache/flink/pull/4552#issuecomment-347801349","issue_url":"https://api.github.com/repos/apache/flink/issues/4552","id":347801349,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgwMTM0OQ==","user":{"login":"NicoK","id":213026,"node_id":"MDQ6VXNlcjIxMzAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/213026?v=4","gravatar_id":"","url":"https://api.github.com/users/NicoK","html_url":"https://github.com/NicoK","followers_url":"https://api.github.com/users/NicoK/followers","following_url":"https://api.github.com/users/NicoK/following{/other_user}","gists_url":"https://api.github.com/users/NicoK/gists{/gist_id}","starred_url":"https://api.github.com/users/NicoK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicoK/subscriptions","organizations_url":"https://api.github.com/users/NicoK/orgs","repos_url":"https://api.github.com/users/NicoK/repos","events_url":"https://api.github.com/users/NicoK/events{/privacy}","received_events_url":"https://api.github.com/users/NicoK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:25:47Z","updated_at":"2017-11-29T09:25:47Z","author_association":"CONTRIBUTOR","body":"Ok, I think, I'll manage the review without the split.\r\n\r\nSince this is the last of the credit-based PRs though, can you rebase on top of the latest changes (preferably after addressing the comments in the other PRs)? This way, I'll have the full picture of this crucial change.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347801349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347806486","html_url":"https://github.com/apache/flink/pull/5070#issuecomment-347806486","issue_url":"https://api.github.com/repos/apache/flink/issues/5070","id":347806486,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgwNjQ4Ng==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:45:16Z","updated_at":"2017-11-29T09:45:16Z","author_association":"CONTRIBUTOR","body":"`Map` does not provide an implementation for `equals`. However, `java.util.AbstractMap` does which is the base class for the commonly used Java maps including `HashMap`. Maybe we can add a case for `AbstractMap`?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347806486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347806839","html_url":"https://github.com/apache/flink/pull/4383#issuecomment-347806839","issue_url":"https://api.github.com/repos/apache/flink/issues/4383","id":347806839,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgwNjgzOQ==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:46:28Z","updated_at":"2017-11-29T09:46:28Z","author_association":"CONTRIBUTOR","body":"Thanks @greghogan!","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347806839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347808700","html_url":"https://github.com/apache/flink/pull/4552#issuecomment-347808700","issue_url":"https://api.github.com/repos/apache/flink/issues/4552","id":347808700,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgwODcwMA==","user":{"login":"zhijiangW","id":12387855,"node_id":"MDQ6VXNlcjEyMzg3ODU1","avatar_url":"https://avatars.githubusercontent.com/u/12387855?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijiangW","html_url":"https://github.com/zhijiangW","followers_url":"https://api.github.com/users/zhijiangW/followers","following_url":"https://api.github.com/users/zhijiangW/following{/other_user}","gists_url":"https://api.github.com/users/zhijiangW/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijiangW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijiangW/subscriptions","organizations_url":"https://api.github.com/users/zhijiangW/orgs","repos_url":"https://api.github.com/users/zhijiangW/repos","events_url":"https://api.github.com/users/zhijiangW/events{/privacy}","received_events_url":"https://api.github.com/users/zhijiangW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T09:53:36Z","updated_at":"2017-11-29T09:53:36Z","author_association":"CONTRIBUTOR","body":"Yes, I am planing to rebase this with the latest changes of previous commits.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347808700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347811864","html_url":"https://github.com/apache/flink/pull/3359#issuecomment-347811864","issue_url":"https://api.github.com/repos/apache/flink/issues/3359","id":347811864,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgxMTg2NA==","user":{"login":"shixiaogang","id":11361724,"node_id":"MDQ6VXNlcjExMzYxNzI0","avatar_url":"https://avatars.githubusercontent.com/u/11361724?v=4","gravatar_id":"","url":"https://api.github.com/users/shixiaogang","html_url":"https://github.com/shixiaogang","followers_url":"https://api.github.com/users/shixiaogang/followers","following_url":"https://api.github.com/users/shixiaogang/following{/other_user}","gists_url":"https://api.github.com/users/shixiaogang/gists{/gist_id}","starred_url":"https://api.github.com/users/shixiaogang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shixiaogang/subscriptions","organizations_url":"https://api.github.com/users/shixiaogang/orgs","repos_url":"https://api.github.com/users/shixiaogang/repos","events_url":"https://api.github.com/users/shixiaogang/events{/privacy}","received_events_url":"https://api.github.com/users/shixiaogang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T10:05:23Z","updated_at":"2017-11-29T10:05:23Z","author_association":"NONE","body":"Very sorry for the delay. I was engaged at the work in the past months, making flink capable of the terrible data flows in Singles Day. \r\n\r\nRocksDBInternalTimerService is among the improvements done. \r\nBut we adopt a very different implementation since the initial implementation presented here has several problems:\r\n* The initial implementation requires other rocksdb instances than the one used in RocksDBKeyedStateBackend, which makes the resource configuration very difficult. \r\n* The snapshotting of RocksDBInternalTimerService here is very inefficient. Though an asynchronous and incremental implementation is available, it will duplicate much code in RocksDBKeyedStateBackend.\r\n\r\nWe address these problem by introducing `SecondaryKeyedState`s which provide non-keyed access methods to the data inside a key group. Similar to normal keyed state, secondary keyed states are partitioned in to key groups and are also stored in the backends. Hence these secondary states can also benefit from asynchronous and incremental snapshotting in `RocksDBKeyedStateBackend`. \r\n\r\nWhat do you think of the changes ? @StefanRRichter \r\n\r\n ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347811864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347813303","html_url":"https://github.com/apache/flink/pull/3359#issuecomment-347813303","issue_url":"https://api.github.com/repos/apache/flink/issues/3359","id":347813303,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgxMzMwMw==","user":{"login":"StefanRRichter","id":2128543,"node_id":"MDQ6VXNlcjIxMjg1NDM=","avatar_url":"https://avatars.githubusercontent.com/u/2128543?v=4","gravatar_id":"","url":"https://api.github.com/users/StefanRRichter","html_url":"https://github.com/StefanRRichter","followers_url":"https://api.github.com/users/StefanRRichter/followers","following_url":"https://api.github.com/users/StefanRRichter/following{/other_user}","gists_url":"https://api.github.com/users/StefanRRichter/gists{/gist_id}","starred_url":"https://api.github.com/users/StefanRRichter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StefanRRichter/subscriptions","organizations_url":"https://api.github.com/users/StefanRRichter/orgs","repos_url":"https://api.github.com/users/StefanRRichter/repos","events_url":"https://api.github.com/users/StefanRRichter/events{/privacy}","received_events_url":"https://api.github.com/users/StefanRRichter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T10:10:40Z","updated_at":"2017-11-29T10:11:14Z","author_association":"CONTRIBUTOR","body":"@shixiaogang The changes sound helpful, considering that this PR was implemented before incremental checkpoints. For a final opinion I would have to review the code. One concern that I have are more and more reported state types that we introduce. I am currently working on a feature that introduces recovery from task-local state, which also looks like it will add to the states that can be produced in a snapshot. So we might need some form of consolidation in the future to avoid a \"wild-grow\" of more and more state types that make everything more complex and harder to maintain. But overall, I think the general idea is very good!","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347813303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347816225","html_url":"https://github.com/apache/flink/pull/5076#issuecomment-347816225","issue_url":"https://api.github.com/repos/apache/flink/issues/5076","id":347816225,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgxNjIyNQ==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T10:21:45Z","updated_at":"2017-11-29T10:21:45Z","author_association":"CONTRIBUTOR","body":"We also have to look out for dependencies that were added to include a transitive dependency in a fat jar, like we do for reporters/connectors,","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347816225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347817678","html_url":"https://github.com/apache/flink/pull/5092#issuecomment-347817678","issue_url":"https://api.github.com/repos/apache/flink/issues/5092","id":347817678,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgxNzY3OA==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T10:27:17Z","updated_at":"2017-11-29T10:27:17Z","author_association":"CONTRIBUTOR","body":"The change looks good, but I would like the metrics to be called `currentInputWatermark` and `currentOutputWatermark`. We will likely have that distinction in more places in the future and @zentol pointed out to me that the `AsyncWaitOperator` already has differing input and output watermarks.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347817678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347827852","html_url":"https://github.com/apache/flink/pull/5092#issuecomment-347827852","issue_url":"https://api.github.com/repos/apache/flink/issues/5092","id":347827852,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgyNzg1Mg==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T11:08:15Z","updated_at":"2017-11-29T11:08:15Z","author_association":"CONTRIBUTOR","body":"If we separate the watermark metric into in- and output metrics we can simplify the the whole thing for sources. We can just intercept emitted watermarks in the `Output` like we do for `numRecordsOut`, and re-use the same gauge as the input for sources/assigners.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347827852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347832506","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347832506","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347832506,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgzMjUwNg==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T11:27:43Z","updated_at":"2017-11-29T11:27:43Z","author_association":"CONTRIBUTOR","body":"To add some more context, we decided to also join late records with records that are still in the cache to have a more complete join result (watermarks should not define the semantics of the query but just be a trigger for cleaning the state). Of course joining late records results in late records in the output but that is OK in my opinion. \r\n\r\nWhat must *not* happen is that a join result of two records that both arrived in time (i.e, are not late) results in a joined output record that is late. I haven't looked at the details, but is this the case @hequn8128?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347832506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347833405","html_url":"https://github.com/apache/flink/pull/5096#issuecomment-347833405","issue_url":"https://api.github.com/repos/apache/flink/issues/5096","id":347833405,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgzMzQwNQ==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T11:31:41Z","updated_at":"2017-11-29T11:31:41Z","author_association":"CONTRIBUTOR","body":"This looks good! 👍 I'm guessing the test fails without the fix?\r\n\r\n@gyfora Do you want to use your committer powers and merge this to `release-1.4` and `master`?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347833405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347838063","html_url":"https://github.com/apache/flink/pull/5096#issuecomment-347838063","issue_url":"https://api.github.com/repos/apache/flink/issues/5096","id":347838063,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzgzODA2Mw==","user":{"login":"gyfora","id":5880972,"node_id":"MDQ6VXNlcjU4ODA5NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5880972?v=4","gravatar_id":"","url":"https://api.github.com/users/gyfora","html_url":"https://github.com/gyfora","followers_url":"https://api.github.com/users/gyfora/followers","following_url":"https://api.github.com/users/gyfora/following{/other_user}","gists_url":"https://api.github.com/users/gyfora/gists{/gist_id}","starred_url":"https://api.github.com/users/gyfora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gyfora/subscriptions","organizations_url":"https://api.github.com/users/gyfora/orgs","repos_url":"https://api.github.com/users/gyfora/repos","events_url":"https://api.github.com/users/gyfora/events{/privacy}","received_events_url":"https://api.github.com/users/gyfora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T11:53:05Z","updated_at":"2017-11-29T11:53:05Z","author_association":"CONTRIBUTOR","body":"yes it fails without it, will merge this","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347838063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347847006","html_url":"https://github.com/apache/flink/pull/5096#issuecomment-347847006","issue_url":"https://api.github.com/repos/apache/flink/issues/5096","id":347847006,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg0NzAwNg==","user":{"login":"gyfora","id":5880972,"node_id":"MDQ6VXNlcjU4ODA5NzI=","avatar_url":"https://avatars.githubusercontent.com/u/5880972?v=4","gravatar_id":"","url":"https://api.github.com/users/gyfora","html_url":"https://github.com/gyfora","followers_url":"https://api.github.com/users/gyfora/followers","following_url":"https://api.github.com/users/gyfora/following{/other_user}","gists_url":"https://api.github.com/users/gyfora/gists{/gist_id}","starred_url":"https://api.github.com/users/gyfora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gyfora/subscriptions","organizations_url":"https://api.github.com/users/gyfora/orgs","repos_url":"https://api.github.com/users/gyfora/repos","events_url":"https://api.github.com/users/gyfora/events{/privacy}","received_events_url":"https://api.github.com/users/gyfora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T12:33:02Z","updated_at":"2017-11-29T12:33:02Z","author_association":"CONTRIBUTOR","body":"@aljoscha , im having a hard time setting up my git credentials properly on my work laptop could you please push this for me?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347847006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347853336","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347853336","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347853336,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg1MzMzNg==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T13:00:17Z","updated_at":"2017-11-29T13:00:17Z","author_association":"CONTRIBUTOR","body":"@tzulitai @aljoscha ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347853336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347853556","html_url":"https://github.com/apache/flink/pull/5092#issuecomment-347853556","issue_url":"https://api.github.com/repos/apache/flink/issues/5092","id":347853556,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg1MzU1Ng==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T13:01:04Z","updated_at":"2017-11-29T13:01:04Z","author_association":"CONTRIBUTOR","body":"I've opened an alternative version of this PR here: #5100 .","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347853556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347857386","html_url":"https://github.com/apache/flink/pull/5062#issuecomment-347857386","issue_url":"https://api.github.com/repos/apache/flink/issues/5062","id":347857386,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg1NzM4Ng==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T13:17:44Z","updated_at":"2017-11-29T13:17:44Z","author_association":"CONTRIBUTOR","body":"Your follow-up reference points to this very PR :P","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347857386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347857909","html_url":"https://github.com/apache/flink/pull/5062#issuecomment-347857909","issue_url":"https://api.github.com/repos/apache/flink/issues/5062","id":347857909,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg1NzkwOQ==","user":{"login":"kl0u","id":2405800,"node_id":"MDQ6VXNlcjI0MDU4MDA=","avatar_url":"https://avatars.githubusercontent.com/u/2405800?v=4","gravatar_id":"","url":"https://api.github.com/users/kl0u","html_url":"https://github.com/kl0u","followers_url":"https://api.github.com/users/kl0u/followers","following_url":"https://api.github.com/users/kl0u/following{/other_user}","gists_url":"https://api.github.com/users/kl0u/gists{/gist_id}","starred_url":"https://api.github.com/users/kl0u/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kl0u/subscriptions","organizations_url":"https://api.github.com/users/kl0u/orgs","repos_url":"https://api.github.com/users/kl0u/repos","events_url":"https://api.github.com/users/kl0u/events{/privacy}","received_events_url":"https://api.github.com/users/kl0u/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T13:19:55Z","updated_at":"2017-11-29T13:19:55Z","author_association":"CONTRIBUTOR","body":"Fixed @zentol !","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347857909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347880735","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347880735","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347880735,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg4MDczNQ==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T14:42:52Z","updated_at":"2017-11-29T14:42:52Z","author_association":"CONTRIBUTOR","body":"Could we set the watermark in the stream input processors (for the input watermark). Operators might override `processWatermark`, and in fact `AsyncWaitOperator` does that and doesn't call the `super`.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347880735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347880886","html_url":"https://github.com/apache/flink/pull/5096#issuecomment-347880886","issue_url":"https://api.github.com/repos/apache/flink/issues/5096","id":347880886,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg4MDg4Ng==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T14:43:19Z","updated_at":"2017-11-29T14:43:19Z","author_association":"CONTRIBUTOR","body":"sure 👌 \r\n","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347880886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347881680","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347881680","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347881680,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg4MTY4MA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T14:45:43Z","updated_at":"2017-11-29T14:45:43Z","author_association":"CONTRIBUTOR","body":"input processors only exist once per task, no? So we wouldn't measure them at the operator level.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347881680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347882618","html_url":"https://github.com/apache/flink/pull/5096#issuecomment-347882618","issue_url":"https://api.github.com/repos/apache/flink/issues/5096","id":347882618,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg4MjYxOA==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T14:48:51Z","updated_at":"2017-11-29T14:48:51Z","author_association":"CONTRIBUTOR","body":"Thanks for discovering and fixing this! 😃 \r\n\r\nMerged","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347882618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347886192","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347886192","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347886192,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg4NjE5Mg==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T14:59:51Z","updated_at":"2017-11-29T14:59:51Z","author_association":"CONTRIBUTOR","body":"Ah stupid, so we have to do it in the chain and in the input processors. Because the problem of operators overriding `processWatermark()` is real. 😅 ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347886192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347891829","html_url":"https://github.com/apache/flink/pull/4651#issuecomment-347891829","issue_url":"https://api.github.com/repos/apache/flink/issues/4651","id":347891829,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg5MTgyOQ==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:17:45Z","updated_at":"2017-11-29T15:17:45Z","author_association":"CONTRIBUTOR","body":"This change looks good! Does it still build when rebased on master/release-1.4?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347891829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347892259","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347892259","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347892259,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg5MjI1OQ==","user":{"login":"hequn8128","id":4971479,"node_id":"MDQ6VXNlcjQ5NzE0Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4971479?v=4","gravatar_id":"","url":"https://api.github.com/users/hequn8128","html_url":"https://github.com/hequn8128","followers_url":"https://api.github.com/users/hequn8128/followers","following_url":"https://api.github.com/users/hequn8128/following{/other_user}","gists_url":"https://api.github.com/users/hequn8128/gists{/gist_id}","starred_url":"https://api.github.com/users/hequn8128/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hequn8128/subscriptions","organizations_url":"https://api.github.com/users/hequn8128/orgs","repos_url":"https://api.github.com/users/hequn8128/repos","events_url":"https://api.github.com/users/hequn8128/events{/privacy}","received_events_url":"https://api.github.com/users/hequn8128/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:19:03Z","updated_at":"2017-11-29T15:54:17Z","author_association":"CONTRIBUTOR","body":"Thanks for your replies.\r\n@fhueske : The watermark must be aligned with timestamps, and it is the main reason why watermarks are hold back(right?).  Current window join may output a record with timestamp equals to the earlier **output** watermark(see `testRowTimeJoinWithCommonBounds2 ` in `JoinHarnessTest `).  \r\n\r\n@xccui : I am considering that if we can cache more late records to have a more complete join result, and this can be achieved by caching both left and right data with timestamp that is bigger than the holding back watermark.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347892259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347893666","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347893666","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347893666,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg5MzY2Ng==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:23:20Z","updated_at":"2017-11-29T15:23:20Z","author_association":"CONTRIBUTOR","body":"You can't measure input metrics in the ChainingOutput (nicely) since for a chain A->B does B at no point have access to the output of A.\r\n\r\nWe would need to have the task setup all watermark metrics and either pass them on to operators for registration or have the task register them for operators, which is just backwards. This also clashes heavily with the idea of operators deciding whether the same metric is used for input&output.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347893666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347894440","html_url":"https://github.com/apache/flink/pull/4651#issuecomment-347894440","issue_url":"https://api.github.com/repos/apache/flink/issues/4651","id":347894440,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg5NDQ0MA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:25:41Z","updated_at":"2017-11-29T15:25:41Z","author_association":"CONTRIBUTOR","body":"Rebased on top of master, let's see what travis says. Didn't get any conflicts so 🤞 .","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347894440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347898120","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347898120","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347898120,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzg5ODEyMA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:36:08Z","updated_at":"2017-11-29T15:36:08Z","author_association":"CONTRIBUTOR","body":"ah, weÄ#re doing the same already for `numRecordsIn`.... maybe we can do this after all.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347898120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347903309","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347903309","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347903309,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkwMzMwOQ==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:51:31Z","updated_at":"2017-11-29T15:51:31Z","author_association":"CONTRIBUTOR","body":"the coupling of input to output gauge becomes rather tricky. The input gauge must be reachable in `Stream[Two]InputProcessor`, `OperatorChain#createChainedOperator`, and the output gauge in `AbstractStreamOperator#setup`.\r\n\r\nFor sources, sinks and watermark assigners we must refer to the same gauge in both places. I don't see how we can do this in a nice way.\r\n\r\nThe rather nice thing the current approach has is that everything is contained in `AbstractStreamOperator` and isn't scattered all over the place.\r\n\r\n`Given that we allow people to completely re-define how operators handle watermarks, wouldn't it make sense to give them the same freedom when it comes to the input watermark metrics?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347903309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347905731","html_url":"https://github.com/apache/flink/pull/5076#issuecomment-347905731","issue_url":"https://api.github.com/repos/apache/flink/issues/5076","id":347905731,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkwNTczMQ==","user":{"login":"yew1eb","id":4133864,"node_id":"MDQ6VXNlcjQxMzM4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4133864?v=4","gravatar_id":"","url":"https://api.github.com/users/yew1eb","html_url":"https://github.com/yew1eb","followers_url":"https://api.github.com/users/yew1eb/followers","following_url":"https://api.github.com/users/yew1eb/following{/other_user}","gists_url":"https://api.github.com/users/yew1eb/gists{/gist_id}","starred_url":"https://api.github.com/users/yew1eb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yew1eb/subscriptions","organizations_url":"https://api.github.com/users/yew1eb/orgs","repos_url":"https://api.github.com/users/yew1eb/repos","events_url":"https://api.github.com/users/yew1eb/events{/privacy}","received_events_url":"https://api.github.com/users/yew1eb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T15:58:27Z","updated_at":"2017-11-29T15:58:27Z","author_association":"CONTRIBUTOR","body":"Hi @greghogan,  You're quite right, Thanks for your advice.  \r\nFor a discussion of this improvement, you can see #4712.\r\n","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347905731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347911539","html_url":"https://github.com/apache/flink/pull/5101#issuecomment-347911539","issue_url":"https://api.github.com/repos/apache/flink/issues/5101","id":347911539,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkxMTUzOQ==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T16:15:51Z","updated_at":"2017-11-29T16:15:51Z","author_association":"CONTRIBUTOR","body":"Can we also remove this bit \r\n```\r\n// temporary hack for FLIP-6 since slot-sharing isn't implemented yet\r\njobGraph.setAllowQueuedScheduling(true);\r\n```\r\nfrom the `RestClusterClient`?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347911539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347912188","html_url":"https://github.com/apache/flink/pull/5066#issuecomment-347912188","issue_url":"https://api.github.com/repos/apache/flink/issues/5066","id":347912188,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkxMjE4OA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T16:17:56Z","updated_at":"2017-11-29T16:17:56Z","author_association":"CONTRIBUTOR","body":"merging.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347912188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347912800","html_url":"https://github.com/apache/flink/pull/5066#issuecomment-347912800","issue_url":"https://api.github.com/repos/apache/flink/issues/5066","id":347912800,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkxMjgwMA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T16:19:44Z","updated_at":"2017-11-29T16:19:44Z","author_association":"CONTRIBUTOR","body":"will fix the checkstyle violation on the way.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347912800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347912993","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347912993","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347912993,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkxMjk5Mw==","user":{"login":"xccui","id":1452518,"node_id":"MDQ6VXNlcjE0NTI1MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1452518?v=4","gravatar_id":"","url":"https://api.github.com/users/xccui","html_url":"https://github.com/xccui","followers_url":"https://api.github.com/users/xccui/followers","following_url":"https://api.github.com/users/xccui/following{/other_user}","gists_url":"https://api.github.com/users/xccui/gists{/gist_id}","starred_url":"https://api.github.com/users/xccui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xccui/subscriptions","organizations_url":"https://api.github.com/users/xccui/orgs","repos_url":"https://api.github.com/users/xccui/repos","events_url":"https://api.github.com/users/xccui/events{/privacy}","received_events_url":"https://api.github.com/users/xccui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T16:20:16Z","updated_at":"2017-11-29T16:51:39Z","author_association":"MEMBER","body":"Hi @hequn8128, as @fhueske explained, watermarks should not define the semantics of the join. We just emit join results, in spite of whether they are late and the join function should not care about the lateness. You can take \"holding back watermarks\" as a special watermark assigner, based on which, there could be out-of-ordered data (join results) being taken as late. Currently, we just generates watermarks with a static delay that equals to the larger relative offset. In the future, we should dynamically generate the delay value according to the minimum timestamp in the cache since it tells us how \"late\" the join results could be.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347912993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347917430","html_url":"https://github.com/apache/flink/pull/5069#issuecomment-347917430","issue_url":"https://api.github.com/repos/apache/flink/issues/5069","id":347917430,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkxNzQzMA==","user":{"login":"yew1eb","id":4133864,"node_id":"MDQ6VXNlcjQxMzM4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4133864?v=4","gravatar_id":"","url":"https://api.github.com/users/yew1eb","html_url":"https://github.com/yew1eb","followers_url":"https://api.github.com/users/yew1eb/followers","following_url":"https://api.github.com/users/yew1eb/following{/other_user}","gists_url":"https://api.github.com/users/yew1eb/gists{/gist_id}","starred_url":"https://api.github.com/users/yew1eb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yew1eb/subscriptions","organizations_url":"https://api.github.com/users/yew1eb/orgs","repos_url":"https://api.github.com/users/yew1eb/repos","events_url":"https://api.github.com/users/yew1eb/events{/privacy}","received_events_url":"https://api.github.com/users/yew1eb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T16:33:27Z","updated_at":"2017-11-29T16:33:27Z","author_association":"CONTRIBUTOR","body":"@tzulitai, thanks for your review. I have updated the PR according to your comments.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347917430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347923230","html_url":"https://github.com/apache/flink/pull/5066#issuecomment-347923230","issue_url":"https://api.github.com/repos/apache/flink/issues/5066","id":347923230,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkyMzIzMA==","user":{"login":"NicoK","id":213026,"node_id":"MDQ6VXNlcjIxMzAyNg==","avatar_url":"https://avatars.githubusercontent.com/u/213026?v=4","gravatar_id":"","url":"https://api.github.com/users/NicoK","html_url":"https://github.com/NicoK","followers_url":"https://api.github.com/users/NicoK/followers","following_url":"https://api.github.com/users/NicoK/following{/other_user}","gists_url":"https://api.github.com/users/NicoK/gists{/gist_id}","starred_url":"https://api.github.com/users/NicoK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NicoK/subscriptions","organizations_url":"https://api.github.com/users/NicoK/orgs","repos_url":"https://api.github.com/users/NicoK/repos","events_url":"https://api.github.com/users/NicoK/events{/privacy}","received_events_url":"https://api.github.com/users/NicoK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T16:51:22Z","updated_at":"2017-11-29T16:51:22Z","author_association":"CONTRIBUTOR","body":"oh, sorry for that","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347923230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347926146","html_url":"https://github.com/apache/flink/pull/5101#issuecomment-347926146","issue_url":"https://api.github.com/repos/apache/flink/issues/5101","id":347926146,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkyNjE0Ng==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:00:15Z","updated_at":"2017-11-29T17:00:27Z","author_association":"CONTRIBUTOR","body":"I think we can remove the comment but not disabling the queued scheduling mode which is mandatory for Flip-6 to work. I'll remove the comment.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347926146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347927195","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347927195","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347927195,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkyNzE5NQ==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:03:35Z","updated_at":"2017-11-29T17:03:35Z","author_association":"CONTRIBUTOR","body":"I think the fact the the operator needs this in `setup()` is already problematic, the latency metrics implementation shouldn't have been merged like this. Wouldn't we need the output gauge only in `OperatorChain` because that creates the `Output`s that operators use to emit watermarks?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347927195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347928048","html_url":"https://github.com/apache/flink/pull/4985#issuecomment-347928048","issue_url":"https://api.github.com/repos/apache/flink/issues/4985","id":347928048,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkyODA0OA==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:06:31Z","updated_at":"2017-11-29T17:06:31Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @shuai-xu. Will rebase it and once Travis gives green light, I'll merge it.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347928048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347929383","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-347929383","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":347929383,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkyOTM4Mw==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:11:07Z","updated_at":"2017-11-29T17:11:07Z","author_association":"CONTRIBUTOR","body":"I had a look at `testRowTimeJoinWithCommonBounds2`. \r\n\r\nThe test processes starts by processing two watermarks for `6000` for the first and second input. After that three records are added for `6000` (first), `6000` (second), and `1000` (first). All three records are late because their timestamp is smaller or equal to the current watermark. Therefore, the join result should also be late. If all three records would be aligned with the watermarks, the result should not be late.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347929383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347929396","html_url":"https://github.com/apache/flink/pull/5102#issuecomment-347929396","issue_url":"https://api.github.com/repos/apache/flink/issues/5102","id":347929396,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkyOTM5Ng==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:11:09Z","updated_at":"2017-11-29T17:11:09Z","author_association":"CONTRIBUTOR","body":"The changes look good! But you comment about needing that IRC channel seem valid. If we don't have the test, however, we would have no way of knowing that the code at least works. (We could also drop the source completely)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347929396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347930779","html_url":"https://github.com/apache/flink/pull/5071#issuecomment-347930779","issue_url":"https://api.github.com/repos/apache/flink/issues/5071","id":347930779,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkzMDc3OQ==","user":{"login":"yew1eb","id":4133864,"node_id":"MDQ6VXNlcjQxMzM4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4133864?v=4","gravatar_id":"","url":"https://api.github.com/users/yew1eb","html_url":"https://github.com/yew1eb","followers_url":"https://api.github.com/users/yew1eb/followers","following_url":"https://api.github.com/users/yew1eb/following{/other_user}","gists_url":"https://api.github.com/users/yew1eb/gists{/gist_id}","starred_url":"https://api.github.com/users/yew1eb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yew1eb/subscriptions","organizations_url":"https://api.github.com/users/yew1eb/orgs","repos_url":"https://api.github.com/users/yew1eb/repos","events_url":"https://api.github.com/users/yew1eb/events{/privacy}","received_events_url":"https://api.github.com/users/yew1eb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:15:38Z","updated_at":"2017-11-29T17:15:38Z","author_association":"CONTRIBUTOR","body":"@zentol , thanks for your review. I have updated the PR according to your comments.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347930779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347931980","html_url":"https://github.com/apache/flink/pull/5102#issuecomment-347931980","issue_url":"https://api.github.com/repos/apache/flink/issues/5102","id":347931980,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzkzMTk4MA==","user":{"login":"uce","id":1756620,"node_id":"MDQ6VXNlcjE3NTY2MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1756620?v=4","gravatar_id":"","url":"https://api.github.com/users/uce","html_url":"https://github.com/uce","followers_url":"https://api.github.com/users/uce/followers","following_url":"https://api.github.com/users/uce/following{/other_user}","gists_url":"https://api.github.com/users/uce/gists{/gist_id}","starred_url":"https://api.github.com/users/uce/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uce/subscriptions","organizations_url":"https://api.github.com/users/uce/orgs","repos_url":"https://api.github.com/users/uce/repos","events_url":"https://api.github.com/users/uce/events{/privacy}","received_events_url":"https://api.github.com/users/uce/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:19:37Z","updated_at":"2017-11-29T17:19:37Z","author_association":"CONTRIBUTOR","body":"I would be in favour of removing this or moving it to Bahir, but it is currently used in a [doc example](https://ci.apache.org/projects/flink/flink-docs-release-1.4/quickstart/run_example_quickstart.html). Besides that I doubt that this is of much value to users.\r\n\r\nIf you think it's OK with it, let's merge this for now and think about the example thing really needs it.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347931980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347942920","html_url":"https://github.com/apache/flink/pull/5070#issuecomment-347942920","issue_url":"https://api.github.com/repos/apache/flink/issues/5070","id":347942920,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzk0MjkyMA==","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T17:56:50Z","updated_at":"2017-11-29T17:56:50Z","author_association":"CONTRIBUTOR","body":"Ah. I see. `AbstractMap.equals` look very much similar to `Arrays.equals`. I will add it in and some more testings. thanks @fhueske for the great tips","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347942920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347972049","html_url":"https://github.com/apache/flink/pull/5070#issuecomment-347972049","issue_url":"https://api.github.com/repos/apache/flink/issues/5070","id":347972049,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzk3MjA0OQ==","user":{"login":"walterddr","id":3581352,"node_id":"MDQ6VXNlcjM1ODEzNTI=","avatar_url":"https://avatars.githubusercontent.com/u/3581352?v=4","gravatar_id":"","url":"https://api.github.com/users/walterddr","html_url":"https://github.com/walterddr","followers_url":"https://api.github.com/users/walterddr/followers","following_url":"https://api.github.com/users/walterddr/following{/other_user}","gists_url":"https://api.github.com/users/walterddr/gists{/gist_id}","starred_url":"https://api.github.com/users/walterddr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/walterddr/subscriptions","organizations_url":"https://api.github.com/users/walterddr/orgs","repos_url":"https://api.github.com/users/walterddr/repos","events_url":"https://api.github.com/users/walterddr/events{/privacy}","received_events_url":"https://api.github.com/users/walterddr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T19:37:18Z","updated_at":"2017-11-29T19:37:18Z","author_association":"CONTRIBUTOR","body":"@twalthr I think my previous unit test method was not correct. Since TableAPI always use `java.util.HashMap` per flink documentation. I think it is safe to directly use `$leftTerm.equals($rightTerm)` and it should always be using `java.util.AbstractMap.equals` implementation. Do you think I should add extra check or do you think the `isMap(resultType)` should be suffice? ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347972049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/347984844","html_url":"https://github.com/apache/flink/pull/5100#issuecomment-347984844","issue_url":"https://api.github.com/repos/apache/flink/issues/5100","id":347984844,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzk4NDg0NA==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T20:23:36Z","updated_at":"2017-11-29T20:23:36Z","author_association":"CONTRIBUTOR","body":"yes, we _could_ setup all IO metrics in the operator chain. But that will require some more changes there since the methods there never access 2 operators at the same time. \r\nFor a chain A->B, to setup the output of A you need metrics for both A and B.\r\nYou cannot be \"clever\" and re-use the output metrics of A as the input metrics for B, since this will cause odd results in forking chain scenarios where the input metrics for both chained operators change at the same time even though they are always processed sequentially. This would get even more funky if an operator decides that it's input/output metrics are always supposed to be identical, at which point you have metrics for 3 operators changing at the same time.\r\n\r\nBut just thinking about modifying the `OperatorChain` sends shivers down my spine ❄️ ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/347984844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348090836","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-348090836","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":348090836,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODA5MDgzNg==","user":{"login":"hequn8128","id":4971479,"node_id":"MDQ6VXNlcjQ5NzE0Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4971479?v=4","gravatar_id":"","url":"https://api.github.com/users/hequn8128","html_url":"https://github.com/hequn8128","followers_url":"https://api.github.com/users/hequn8128/followers","following_url":"https://api.github.com/users/hequn8128/following{/other_user}","gists_url":"https://api.github.com/users/hequn8128/gists{/gist_id}","starred_url":"https://api.github.com/users/hequn8128/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hequn8128/subscriptions","organizations_url":"https://api.github.com/users/hequn8128/orgs","repos_url":"https://api.github.com/users/hequn8128/repos","events_url":"https://api.github.com/users/hequn8128/events{/privacy}","received_events_url":"https://api.github.com/users/hequn8128/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T06:00:24Z","updated_at":"2017-11-30T12:48:12Z","author_association":"CONTRIBUTOR","body":"Thanks for your replies. @fhueske @xccui \r\nI agree with that it is valid to join late input data.What I concern is the watermark has not been hold back correctly.\r\n\r\nTake `testRowTimeJoinWithCommonBounds2` as an example.\r\n1. Output watermark with timestamp 1000 (hold back 5000 from 6000)\r\n2. Output record1 with timestamp 6000 (valid)\r\n3. Output record2 with timestamp 1000 (invalid)\r\n\r\nThe record2 is outputted invalidly because it's timestamp is equal to the previous output watermark (1000). In my pr, I hold the input watermark back with 5001 to make record2 valid. So the test will output with:\r\n\r\n1. Output watermark with timestamp 999 (hold back 5001 from 6000)\r\n2. Output record1 with timestamp 6000 (valid)\r\n3. Output record2 with timestamp 1000 (valid) ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348090836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348108729","html_url":"https://github.com/apache/flink/pull/5069#issuecomment-348108729","issue_url":"https://api.github.com/repos/apache/flink/issues/5069","id":348108729,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODEwODcyOQ==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T07:48:12Z","updated_at":"2017-11-30T07:48:12Z","author_association":"CONTRIBUTOR","body":"LGTM, merging this ..","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348108729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348111398","html_url":"https://github.com/apache/flink/pull/5069#issuecomment-348111398","issue_url":"https://api.github.com/repos/apache/flink/issues/5069","id":348111398,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODExMTM5OA==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T08:01:52Z","updated_at":"2017-11-30T08:01:52Z","author_association":"CONTRIBUTOR","body":"Ah, I just realized that my comment on the last review is irrelevant, since `org.apache.flink.streaming.util.serialization.SerializationSchema` extends `org.apache.flink.api.common.serialization.SerializationSchema`, meaning that there is no API-breaking change.\r\n\r\nSorry about this. The PR is good to go without the extra follow-up fix. Merging the first commit.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348111398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348115038","html_url":"https://github.com/apache/flink/pull/5102#issuecomment-348115038","issue_url":"https://api.github.com/repos/apache/flink/issues/5102","id":348115038,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODExNTAzOA==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T08:19:37Z","updated_at":"2017-11-30T08:19:37Z","author_association":"CONTRIBUTOR","body":"LGTM.\r\n\r\n+1 to merge this now, and we think about removing the source as well as reworking the doc example to not use it (I think it might be nice to directly kick off the docs with an intro example that read / writes to Kafka), as a separate issue.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348115038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348128863","html_url":"https://github.com/apache/flink/pull/4988#issuecomment-348128863","issue_url":"https://api.github.com/repos/apache/flink/issues/4988","id":348128863,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODEyODg2Mw==","user":{"login":"shuai-xu","id":20960838,"node_id":"MDQ6VXNlcjIwOTYwODM4","avatar_url":"https://avatars.githubusercontent.com/u/20960838?v=4","gravatar_id":"","url":"https://api.github.com/users/shuai-xu","html_url":"https://github.com/shuai-xu","followers_url":"https://api.github.com/users/shuai-xu/followers","following_url":"https://api.github.com/users/shuai-xu/following{/other_user}","gists_url":"https://api.github.com/users/shuai-xu/gists{/gist_id}","starred_url":"https://api.github.com/users/shuai-xu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shuai-xu/subscriptions","organizations_url":"https://api.github.com/users/shuai-xu/orgs","repos_url":"https://api.github.com/users/shuai-xu/repos","events_url":"https://api.github.com/users/shuai-xu/events{/privacy}","received_events_url":"https://api.github.com/users/shuai-xu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T09:19:00Z","updated_at":"2017-11-30T09:19:00Z","author_association":"CONTRIBUTOR","body":"This pr is very helpful for us. Thank you. I have tried it on our cluster with yarn job mode，and it works well. My only suggestion is to change the default value of rest.address to 0.0.0.0 instead of localhost. Since if the rest server start at localhost, it can only be accessed from local machine. But if on 0.0.0.0, it can be accessed remotely. ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348128863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348148977","html_url":"https://github.com/apache/flink/pull/5104#issuecomment-348148977","issue_url":"https://api.github.com/repos/apache/flink/issues/5104","id":348148977,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODE0ODk3Nw==","user":{"login":"pnowojski","id":8957547,"node_id":"MDQ6VXNlcjg5NTc1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/8957547?v=4","gravatar_id":"","url":"https://api.github.com/users/pnowojski","html_url":"https://github.com/pnowojski","followers_url":"https://api.github.com/users/pnowojski/followers","following_url":"https://api.github.com/users/pnowojski/following{/other_user}","gists_url":"https://api.github.com/users/pnowojski/gists{/gist_id}","starred_url":"https://api.github.com/users/pnowojski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pnowojski/subscriptions","organizations_url":"https://api.github.com/users/pnowojski/orgs","repos_url":"https://api.github.com/users/pnowojski/repos","events_url":"https://api.github.com/users/pnowojski/events{/privacy}","received_events_url":"https://api.github.com/users/pnowojski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T10:34:35Z","updated_at":"2017-11-30T10:34:35Z","author_association":"CONTRIBUTOR","body":"2 times improvement is for network stack only. With other things in play (like even simple operators) it will be smaller.\r\n\r\nAs we discussed offline, I didn't want tightening up the connection/dependencies of `RecordSerializer`. `Buffer` is a much simpler dependency compare to `BufferProvider`. Think how more difficult would it be to test it with `BufferProvider`. However I was thinking about refactoring it in another direction, creating kind of `write-only` `@NotThreadSafe` `BufferBuilder` class.\r\n\r\nI have create a separate issue for that: https://issues.apache.org/jira/browse/FLINK-8178","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348148977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348150887","html_url":"https://github.com/apache/flink/pull/5103#issuecomment-348150887","issue_url":"https://api.github.com/repos/apache/flink/issues/5103","id":348150887,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODE1MDg4Nw==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T10:42:00Z","updated_at":"2017-11-30T10:42:00Z","author_association":"CONTRIBUTOR","body":"👍 looks good. Can I merge this or do you want to go ahead?\r\n","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348150887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348159865","html_url":"https://github.com/apache/flink/pull/5103#issuecomment-348159865","issue_url":"https://api.github.com/repos/apache/flink/issues/5103","id":348159865,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODE1OTg2NQ==","user":{"login":"zentol","id":5725237,"node_id":"MDQ6VXNlcjU3MjUyMzc=","avatar_url":"https://avatars.githubusercontent.com/u/5725237?v=4","gravatar_id":"","url":"https://api.github.com/users/zentol","html_url":"https://github.com/zentol","followers_url":"https://api.github.com/users/zentol/followers","following_url":"https://api.github.com/users/zentol/following{/other_user}","gists_url":"https://api.github.com/users/zentol/gists{/gist_id}","starred_url":"https://api.github.com/users/zentol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zentol/subscriptions","organizations_url":"https://api.github.com/users/zentol/orgs","repos_url":"https://api.github.com/users/zentol/repos","events_url":"https://api.github.com/users/zentol/events{/privacy}","received_events_url":"https://api.github.com/users/zentol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T11:19:43Z","updated_at":"2017-11-30T11:19:43Z","author_association":"CONTRIBUTOR","body":"feel free to merge it.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348159865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348182933","html_url":"https://github.com/apache/flink/pull/5103#issuecomment-348182933","issue_url":"https://api.github.com/repos/apache/flink/issues/5103","id":348182933,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODE4MjkzMw==","user":{"login":"aljoscha","id":68551,"node_id":"MDQ6VXNlcjY4NTUx","avatar_url":"https://avatars.githubusercontent.com/u/68551?v=4","gravatar_id":"","url":"https://api.github.com/users/aljoscha","html_url":"https://github.com/aljoscha","followers_url":"https://api.github.com/users/aljoscha/followers","following_url":"https://api.github.com/users/aljoscha/following{/other_user}","gists_url":"https://api.github.com/users/aljoscha/gists{/gist_id}","starred_url":"https://api.github.com/users/aljoscha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aljoscha/subscriptions","organizations_url":"https://api.github.com/users/aljoscha/orgs","repos_url":"https://api.github.com/users/aljoscha/repos","events_url":"https://api.github.com/users/aljoscha/events{/privacy}","received_events_url":"https://api.github.com/users/aljoscha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T13:07:14Z","updated_at":"2017-11-30T13:07:14Z","author_association":"CONTRIBUTOR","body":"merged into `release-1.4`","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348182933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348223601","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-348223601","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":348223601,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODIyMzYwMQ==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T15:32:56Z","updated_at":"2017-11-30T15:32:56Z","author_association":"CONTRIBUTOR","body":"Yes, the records emitted in your test are late. But the reason for that is that also records that you give into the join are already late. You set the watermarks on both input to `6000` and subsequently insert late data.\r\n\r\nIf you change the test to insert records such that they are not late:\r\n\r\n```\r\ntestHarness.processElement1(new StreamRecord[CRow](\r\n  CRow(Row.of(1000L: JLong, \"k1\"), true), 1000))\r\n\r\ntestHarness.processWatermark1(new Watermark(5999))\r\ntestHarness.processWatermark2(new Watermark(5999))\r\n\r\ntestHarness.processElement1(new StreamRecord[CRow](\r\n  CRow(Row.of(6000L: JLong, \"k1\"), true), 6000))\r\ntestHarness.processElement2(new StreamRecord[CRow](\r\n  CRow(Row.of(6000L: JLong, \"k1\"), true), 6000))\r\n```\r\n\r\nthe result records are not late as well. \r\n\r\nIf you change the watemarks to `6000`, the 2nd and 3rd records are received as late data (because their timestamp is equal to the watermark time) and therefore the output is late as well.\r\n\r\nI think the current logic is correct.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348223601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348233863","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-348233863","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":348233863,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODIzMzg2Mw==","user":{"login":"hequn8128","id":4971479,"node_id":"MDQ6VXNlcjQ5NzE0Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4971479?v=4","gravatar_id":"","url":"https://api.github.com/users/hequn8128","html_url":"https://github.com/hequn8128","followers_url":"https://api.github.com/users/hequn8128/followers","following_url":"https://api.github.com/users/hequn8128/following{/other_user}","gists_url":"https://api.github.com/users/hequn8128/gists{/gist_id}","starred_url":"https://api.github.com/users/hequn8128/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hequn8128/subscriptions","organizations_url":"https://api.github.com/users/hequn8128/orgs","repos_url":"https://api.github.com/users/hequn8128/repos","events_url":"https://api.github.com/users/hequn8128/events{/privacy}","received_events_url":"https://api.github.com/users/hequn8128/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T16:03:49Z","updated_at":"2017-11-30T16:03:49Z","author_association":"CONTRIBUTOR","body":"Ooooops... finally understand what you mean. Thank your very much for your explain. @fhueske @xccui . I will close this pr :)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348233863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348234364","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-348234364","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":348234364,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODIzNDM2NA==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T16:05:31Z","updated_at":"2017-11-30T16:05:31Z","author_association":"CONTRIBUTOR","body":"No worries! It's always good to have another pair of eyes looking over complex logic like this :-)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348234364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348235304","html_url":"https://github.com/apache/flink/pull/5094#issuecomment-348235304","issue_url":"https://api.github.com/repos/apache/flink/issues/5094","id":348235304,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODIzNTMwNA==","user":{"login":"xccui","id":1452518,"node_id":"MDQ6VXNlcjE0NTI1MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1452518?v=4","gravatar_id":"","url":"https://api.github.com/users/xccui","html_url":"https://github.com/xccui","followers_url":"https://api.github.com/users/xccui/followers","following_url":"https://api.github.com/users/xccui/following{/other_user}","gists_url":"https://api.github.com/users/xccui/gists{/gist_id}","starred_url":"https://api.github.com/users/xccui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xccui/subscriptions","organizations_url":"https://api.github.com/users/xccui/orgs","repos_url":"https://api.github.com/users/xccui/repos","events_url":"https://api.github.com/users/xccui/events{/privacy}","received_events_url":"https://api.github.com/users/xccui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T16:08:19Z","updated_at":"2017-11-30T16:08:19Z","author_association":"MEMBER","body":"Never mind~ Thanks for reminding me of the ideas :-)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348235304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348252535","html_url":"https://github.com/apache/flink/pull/4935#issuecomment-348252535","issue_url":"https://api.github.com/repos/apache/flink/issues/4935","id":348252535,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODI1MjUzNQ==","user":{"login":"Aitozi","id":9486140,"node_id":"MDQ6VXNlcjk0ODYxNDA=","avatar_url":"https://avatars.githubusercontent.com/u/9486140?v=4","gravatar_id":"","url":"https://api.github.com/users/Aitozi","html_url":"https://github.com/Aitozi","followers_url":"https://api.github.com/users/Aitozi/followers","following_url":"https://api.github.com/users/Aitozi/following{/other_user}","gists_url":"https://api.github.com/users/Aitozi/gists{/gist_id}","starred_url":"https://api.github.com/users/Aitozi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aitozi/subscriptions","organizations_url":"https://api.github.com/users/Aitozi/orgs","repos_url":"https://api.github.com/users/Aitozi/repos","events_url":"https://api.github.com/users/Aitozi/events{/privacy}","received_events_url":"https://api.github.com/users/Aitozi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T17:00:34Z","updated_at":"2017-11-30T17:00:34Z","author_association":"CONTRIBUTOR","body":"Hi, @tzulitai \r\nAfter i read kafkaConsumer code again, i found that the per partition kafka lag metric is register in method `FetchManagerMetrics#recordPartitionLag` But the when the client get the num equal to `max.poll.records ` at  once poll, it will  return the record it polls in advance left some partition haven't not been `sendFetches` to. So some partition will be lost. In test , if we just poll once , then  register kafka metric , if i have many partition like about(100), some partition lag metric will be losed.  \r\nSo i think, with a configurable property, users can choose to when they have too many partition, and will do little harmless to the performance .\r\n\r\nPlease let me know your idea ,thanks","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348252535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348415560","html_url":"https://github.com/apache/flink/pull/4533#issuecomment-348415560","issue_url":"https://api.github.com/repos/apache/flink/issues/4533","id":348415560,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODQxNTU2MA==","user":{"login":"zhijiangW","id":12387855,"node_id":"MDQ6VXNlcjEyMzg3ODU1","avatar_url":"https://avatars.githubusercontent.com/u/12387855?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijiangW","html_url":"https://github.com/zhijiangW","followers_url":"https://api.github.com/users/zhijiangW/followers","following_url":"https://api.github.com/users/zhijiangW/following{/other_user}","gists_url":"https://api.github.com/users/zhijiangW/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijiangW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijiangW/subscriptions","organizations_url":"https://api.github.com/users/zhijiangW/orgs","repos_url":"https://api.github.com/users/zhijiangW/repos","events_url":"https://api.github.com/users/zhijiangW/events{/privacy}","received_events_url":"https://api.github.com/users/zhijiangW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T06:47:28Z","updated_at":"2017-12-01T06:47:28Z","author_association":"CONTRIBUTOR","body":"@NicoK , I have updates the modifications addressed your comments. :)","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348415560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348428976","html_url":"https://github.com/apache/flink/pull/4559#issuecomment-348428976","issue_url":"https://api.github.com/repos/apache/flink/issues/4559","id":348428976,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODQyODk3Ng==","user":{"login":"zhijiangW","id":12387855,"node_id":"MDQ6VXNlcjEyMzg3ODU1","avatar_url":"https://avatars.githubusercontent.com/u/12387855?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijiangW","html_url":"https://github.com/zhijiangW","followers_url":"https://api.github.com/users/zhijiangW/followers","following_url":"https://api.github.com/users/zhijiangW/following{/other_user}","gists_url":"https://api.github.com/users/zhijiangW/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijiangW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijiangW/subscriptions","organizations_url":"https://api.github.com/users/zhijiangW/orgs","repos_url":"https://api.github.com/users/zhijiangW/repos","events_url":"https://api.github.com/users/zhijiangW/events{/privacy}","received_events_url":"https://api.github.com/users/zhijiangW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T08:07:50Z","updated_at":"2017-12-01T08:07:50Z","author_association":"CONTRIBUTOR","body":"@NicoK , thanks for your reviews and I have updated the codes for above comments.\r\n\r\nRegarding the tests for backlog statistics, do you think I should add new tests in this PR or update your added tests later after your commit is merged?","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348428976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348431219","html_url":"https://github.com/apache/flink/pull/4509#issuecomment-348431219","issue_url":"https://api.github.com/repos/apache/flink/issues/4509","id":348431219,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODQzMTIxOQ==","user":{"login":"zhijiangW","id":12387855,"node_id":"MDQ6VXNlcjEyMzg3ODU1","avatar_url":"https://avatars.githubusercontent.com/u/12387855?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijiangW","html_url":"https://github.com/zhijiangW","followers_url":"https://api.github.com/users/zhijiangW/followers","following_url":"https://api.github.com/users/zhijiangW/following{/other_user}","gists_url":"https://api.github.com/users/zhijiangW/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijiangW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijiangW/subscriptions","organizations_url":"https://api.github.com/users/zhijiangW/orgs","repos_url":"https://api.github.com/users/zhijiangW/repos","events_url":"https://api.github.com/users/zhijiangW/events{/privacy}","received_events_url":"https://api.github.com/users/zhijiangW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T08:19:29Z","updated_at":"2017-12-01T08:19:29Z","author_association":"CONTRIBUTOR","body":"@NicoK , the codes are updated.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348431219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348462899","html_url":"https://github.com/apache/flink/pull/4552#issuecomment-348462899","issue_url":"https://api.github.com/repos/apache/flink/issues/4552","id":348462899,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODQ2Mjg5OQ==","user":{"login":"zhijiangW","id":12387855,"node_id":"MDQ6VXNlcjEyMzg3ODU1","avatar_url":"https://avatars.githubusercontent.com/u/12387855?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijiangW","html_url":"https://github.com/zhijiangW","followers_url":"https://api.github.com/users/zhijiangW/followers","following_url":"https://api.github.com/users/zhijiangW/following{/other_user}","gists_url":"https://api.github.com/users/zhijiangW/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijiangW/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijiangW/subscriptions","organizations_url":"https://api.github.com/users/zhijiangW/orgs","repos_url":"https://api.github.com/users/zhijiangW/repos","events_url":"https://api.github.com/users/zhijiangW/events{/privacy}","received_events_url":"https://api.github.com/users/zhijiangW/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T10:44:00Z","updated_at":"2017-12-01T10:44:00Z","author_association":"CONTRIBUTOR","body":"@NicoK , I have rebased the latest codes. Wish your reviews!","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348462899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348524940","html_url":"https://github.com/apache/flink/pull/5076#issuecomment-348524940","issue_url":"https://api.github.com/repos/apache/flink/issues/5076","id":348524940,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODUyNDk0MA==","user":{"login":"yew1eb","id":4133864,"node_id":"MDQ6VXNlcjQxMzM4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4133864?v=4","gravatar_id":"","url":"https://api.github.com/users/yew1eb","html_url":"https://github.com/yew1eb","followers_url":"https://api.github.com/users/yew1eb/followers","following_url":"https://api.github.com/users/yew1eb/following{/other_user}","gists_url":"https://api.github.com/users/yew1eb/gists{/gist_id}","starred_url":"https://api.github.com/users/yew1eb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yew1eb/subscriptions","organizations_url":"https://api.github.com/users/yew1eb/orgs","repos_url":"https://api.github.com/users/yew1eb/repos","events_url":"https://api.github.com/users/yew1eb/events{/privacy}","received_events_url":"https://api.github.com/users/yew1eb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T15:32:17Z","updated_at":"2017-12-01T15:32:17Z","author_association":"CONTRIBUTOR","body":"@zentol , Thanks for your suggestions, i will be very careful to clean up the dependencies.\r\nI will start with the top modules (not used by other modules), order as follow:\r\n> ├── flink-clients\r\n> ├── flink-scala-shell\r\n> ├── flink-end-to-end-tests\r\n> ├── flink-fs-tests\r\n> ├── flink-mesos\r\n> ├── flink-yarn-tests\r\n> ├── flink-yarn\r\n> ├── flink-formats\r\n> │   ├── flink-avro\r\n> ├── flink-java8\r\n> ├── flink-runtime-web\r\n> ├── flink-examples\r\n> │   ├── flink-examples-batch\r\n> │   ├── flink-examples-streaming\r\n> │   ├── flink-examples-table\r\n> ├── flink-libraries\r\n> │   ├── flink-cep\r\n> │   ├── flink-cep-scala\r\n> │   ├── flink-gelly\r\n> │   ├── flink-gelly-examples\r\n> │   ├── flink-gelly-scala\r\n> │   ├── flink-ml\r\n> │   ├── flink-python\r\n> │   ├── flink-table\r\n> ├── flink-metrics\r\n> │   ├── flink-metrics-core\r\n> │   ├── flink-metrics-datadog\r\n> │   ├── flink-metrics-dropwizard\r\n> │   ├── flink-metrics-ganglia\r\n> │   ├── flink-metrics-graphite\r\n> │   ├── flink-metrics-jmx\r\n> │   ├── flink-metrics-prometheus\r\n> │   ├── flink-metrics-slf4j\r\n> │   ├── flink-metrics-statsd\r\n> ├── flink-contrib\r\n> │   ├── flink-connector-wikiedits\r\n> │   ├── flink-statebackend-rocksdb\r\n> │   ├── flink-storm\r\n> │   ├── flink-storm-examples\r\n> │   ├── flink-streaming-contrib\r\n> │   ├── flink-tweet-inputformat\r\n> ├── flink-filesystems\r\n> │   ├── flink-hadoop-fs\r\n> │   ├── flink-mapr-fs\r\n> │   ├── flink-s3-fs-hadoop\r\n> │   ├── flink-s3-fs-presto\r\n> ├── flink-connectors\r\n> │   ├── flink-connector-cassandra\r\n> │   ├── flink-connector-elasticsearch\r\n> │   ├── flink-connector-elasticsearch-base\r\n> │   ├── flink-connector-elasticsearch2\r\n> │   ├── flink-connector-elasticsearch5\r\n> │   ├── flink-connector-filesystem\r\n> │   ├── flink-connector-kafka-0.10\r\n> │   ├── flink-connector-kafka-0.11\r\n> │   ├── flink-connector-kafka-0.8\r\n> │   ├── flink-connector-kafka-0.9\r\n> │   ├── flink-connector-kafka-base\r\n> │   ├── flink-connector-kinesis\r\n> │   ├── flink-connector-nifi\r\n> │   ├── flink-connector-rabbitmq\r\n> │   ├── flink-connector-twitter\r\n> │   ├── flink-hadoop-compatibility\r\n> │   ├── flink-hbase\r\n> │   ├── flink-hcatalog\r\n> │   ├── flink-jdbc\r\n> │   ├── flink-orc\r\n> ├── flink-optimizer\r\n> ├── flink-queryable-state\r\n> ├── flink-test-utils-parent\r\n> │   ├── flink-test-utils\r\n> │   ├── flink-test-utils-junit\r\n> ├── flink-tests\r\n> ├── flink-scala\r\n> ├── flink-streaming-java\r\n> ├── flink-streaming-scala\r\n> ├── flink-runtime\r\n> ├── flink-java\r\n> ├── flink-core\r\n","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348524940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348538382","html_url":"https://github.com/apache/flink/pull/5070#issuecomment-348538382","issue_url":"https://api.github.com/repos/apache/flink/issues/5070","id":348538382,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODUzODM4Mg==","user":{"login":"twalthr","id":5746567,"node_id":"MDQ6VXNlcjU3NDY1Njc=","avatar_url":"https://avatars.githubusercontent.com/u/5746567?v=4","gravatar_id":"","url":"https://api.github.com/users/twalthr","html_url":"https://github.com/twalthr","followers_url":"https://api.github.com/users/twalthr/followers","following_url":"https://api.github.com/users/twalthr/following{/other_user}","gists_url":"https://api.github.com/users/twalthr/gists{/gist_id}","starred_url":"https://api.github.com/users/twalthr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twalthr/subscriptions","organizations_url":"https://api.github.com/users/twalthr/orgs","repos_url":"https://api.github.com/users/twalthr/repos","events_url":"https://api.github.com/users/twalthr/events{/privacy}","received_events_url":"https://api.github.com/users/twalthr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T16:20:09Z","updated_at":"2017-12-01T16:20:09Z","author_association":"CONTRIBUTOR","body":"@walterddr I think the current solution is sufficient for now. I will merge this...","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348538382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348542595","html_url":"https://github.com/apache/flink/pull/5111#issuecomment-348542595","issue_url":"https://api.github.com/repos/apache/flink/issues/5111","id":348542595,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODU0MjU5NQ==","user":{"login":"fhueske","id":2388347,"node_id":"MDQ6VXNlcjIzODgzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/2388347?v=4","gravatar_id":"","url":"https://api.github.com/users/fhueske","html_url":"https://github.com/fhueske","followers_url":"https://api.github.com/users/fhueske/followers","following_url":"https://api.github.com/users/fhueske/following{/other_user}","gists_url":"https://api.github.com/users/fhueske/gists{/gist_id}","starred_url":"https://api.github.com/users/fhueske/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fhueske/subscriptions","organizations_url":"https://api.github.com/users/fhueske/orgs","repos_url":"https://api.github.com/users/fhueske/repos","events_url":"https://api.github.com/users/fhueske/events{/privacy}","received_events_url":"https://api.github.com/users/fhueske/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T16:35:16Z","updated_at":"2017-12-01T16:35:16Z","author_association":"CONTRIBUTOR","body":"Thanks for the fix. +1 to merge","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348542595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348633121","html_url":"https://github.com/apache/flink/pull/4988#issuecomment-348633121","issue_url":"https://api.github.com/repos/apache/flink/issues/4988","id":348633121,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODYzMzEyMQ==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T22:38:49Z","updated_at":"2017-12-01T22:38:49Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @shuai-xu. I'll change the default value of the rest address to `0.0.0.0`.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348633121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348633876","html_url":"https://github.com/apache/flink/pull/4988#issuecomment-348633876","issue_url":"https://api.github.com/repos/apache/flink/issues/4988","id":348633876,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODYzMzg3Ng==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T22:43:09Z","updated_at":"2017-12-01T22:43:09Z","author_association":"CONTRIBUTOR","body":"Actually we cannot change it to `0.0.0.0`, because the address is also used by the client to connect to the rest server. Therefore, it must be a valid target address.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348633876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348638625","html_url":"https://github.com/apache/flink/pull/5109#issuecomment-348638625","issue_url":"https://api.github.com/repos/apache/flink/issues/5109","id":348638625,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODYzODYyNQ==","user":{"login":"tillrohrmann","id":5756858,"node_id":"MDQ6VXNlcjU3NTY4NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5756858?v=4","gravatar_id":"","url":"https://api.github.com/users/tillrohrmann","html_url":"https://github.com/tillrohrmann","followers_url":"https://api.github.com/users/tillrohrmann/followers","following_url":"https://api.github.com/users/tillrohrmann/following{/other_user}","gists_url":"https://api.github.com/users/tillrohrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/tillrohrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tillrohrmann/subscriptions","organizations_url":"https://api.github.com/users/tillrohrmann/orgs","repos_url":"https://api.github.com/users/tillrohrmann/repos","events_url":"https://api.github.com/users/tillrohrmann/events{/privacy}","received_events_url":"https://api.github.com/users/tillrohrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-01T23:10:39Z","updated_at":"2017-12-01T23:10:39Z","author_association":"CONTRIBUTOR","body":"Merging this PR.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348638625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348659418","html_url":"https://github.com/apache/flink/pull/4471#issuecomment-348659418","issue_url":"https://api.github.com/repos/apache/flink/issues/4471","id":348659418,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODY1OTQxOA==","user":{"login":"hequn8128","id":4971479,"node_id":"MDQ6VXNlcjQ5NzE0Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4971479?v=4","gravatar_id":"","url":"https://api.github.com/users/hequn8128","html_url":"https://github.com/hequn8128","followers_url":"https://api.github.com/users/hequn8128/followers","following_url":"https://api.github.com/users/hequn8128/following{/other_user}","gists_url":"https://api.github.com/users/hequn8128/gists{/gist_id}","starred_url":"https://api.github.com/users/hequn8128/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hequn8128/subscriptions","organizations_url":"https://api.github.com/users/hequn8128/orgs","repos_url":"https://api.github.com/users/hequn8128/repos","events_url":"https://api.github.com/users/hequn8128/events{/privacy}","received_events_url":"https://api.github.com/users/hequn8128/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-02T02:02:35Z","updated_at":"2017-12-02T02:02:35Z","author_association":"CONTRIBUTOR","body":"hi @twalthr , Sorry for the late reply. The notification of github has been ignored mistakenly. I will give an update ASAP. Thanks very much. ","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348659418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348758623","html_url":"https://github.com/apache/flink/pull/5114#issuecomment-348758623","issue_url":"https://api.github.com/repos/apache/flink/issues/5114","id":348758623,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODc1ODYyMw==","user":{"login":"EronWright","id":1775518,"node_id":"MDQ6VXNlcjE3NzU1MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1775518?v=4","gravatar_id":"","url":"https://api.github.com/users/EronWright","html_url":"https://github.com/EronWright","followers_url":"https://api.github.com/users/EronWright/followers","following_url":"https://api.github.com/users/EronWright/following{/other_user}","gists_url":"https://api.github.com/users/EronWright/gists{/gist_id}","starred_url":"https://api.github.com/users/EronWright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EronWright/subscriptions","organizations_url":"https://api.github.com/users/EronWright/orgs","repos_url":"https://api.github.com/users/EronWright/repos","events_url":"https://api.github.com/users/EronWright/events{/privacy}","received_events_url":"https://api.github.com/users/EronWright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-03T11:49:33Z","updated_at":"2017-12-04T00:53:46Z","author_association":"CONTRIBUTOR","body":"Log output showing a 'mixed' scenario, involving two tasks (each w/ 1.5 cpus, 4096 mem), combining resources across the reserved and unreserved pool in a single offer.\r\n\r\nUpon receiving an offer containing resources reserved for `myrole` (2 cpus, 4096 mem, a range of ports) in addition to some unreserved resources (2 cpus, 10766 mem, more ports), the task `taskmanager-00002` took some of the reserved cpus, all the reserved memory, and 2 ports.  `taskmanager-00001` then took (among other things) the remaining reserved cpus plus some unreserved cpus to meet its needs.\r\n\r\n```\r\nAssigning resources: [\r\n  cpus(myrole):2.0; mem(myrole):4096.0; ports(myrole):[1025-2180]; \r\n  disk(*):28829.0; cpus(*):2.0; mem(*):10766.0; ports(*):[2182-3887,3889-5049,5052-8079,8082-8180,8182-32000]]   \r\n\r\nProcessing task taskmanager-00002                                                                                         \r\n  Allocating 1.5 cpus                                                                                                       \r\n    Taking 1.5 from cpus(myrole):2.0                                             \r\n    Allocated: [cpus(myrole):1.5], unsatisfied: 0.0                              \r\n  Allocating 4096.0 mem                                                                                                     \r\n    Taking 4096.0 from mem(myrole):4096.0                                        \r\n    Allocated: [mem(myrole):4096.0], unsatisfied: 0.0                            \r\n  Allocating 2 ports                                                                                                        \r\n    Taking [1025-1026] from ports(myrole):[1025-2180]                            \r\n    Allocated: [ports(myrole):[1025-1026]], unsatisfied: 0                       \r\n\r\nProcessing task taskmanager-00001                                                                                         \r\n  Allocating 1.5 cpus                                                                                                       \r\n    Taking 0.5 from cpus(myrole):0.5                                             \r\n    Taking 1.0 from cpus(*):2.0                                                                                               \r\n    Allocated: [cpus(myrole):0.5; cpus(*):1.0], unsatisfied: 0.0                 \r\n  Allocating 4096.0 mem                                                                                                     \r\n    Taking 4096.0 from mem(*):10766.0                                                                                         \r\n    Allocated: [mem(*):4096.0], unsatisfied: 0.0                                                                              \r\n  Allocating 2 ports                                                                                                        \r\n    Taking [1027-1028] from ports(myrole):[1027-2180]                            \r\n    Allocated: [ports(myrole):[1027-1028]], unsatisfied: 0                       \r\n\r\nRemaining resources: [\r\n  ports(myrole):[1029-2180];\r\n  disk(*):28829.0; cpus(*):1.0; mem(*):6670.0; ports(*):[2182-3887,3889-5049,5052-8079,8082-8180,8182-32000]]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348758623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348806689","html_url":"https://github.com/apache/flink/pull/5108#issuecomment-348806689","issue_url":"https://api.github.com/repos/apache/flink/issues/5108","id":348806689,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODgwNjY4OQ==","user":{"login":"StephanEwen","id":1727146,"node_id":"MDQ6VXNlcjE3MjcxNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1727146?v=4","gravatar_id":"","url":"https://api.github.com/users/StephanEwen","html_url":"https://github.com/StephanEwen","followers_url":"https://api.github.com/users/StephanEwen/followers","following_url":"https://api.github.com/users/StephanEwen/following{/other_user}","gists_url":"https://api.github.com/users/StephanEwen/gists{/gist_id}","starred_url":"https://api.github.com/users/StephanEwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/StephanEwen/subscriptions","organizations_url":"https://api.github.com/users/StephanEwen/orgs","repos_url":"https://api.github.com/users/StephanEwen/repos","events_url":"https://api.github.com/users/StephanEwen/events{/privacy}","received_events_url":"https://api.github.com/users/StephanEwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-03T19:15:18Z","updated_at":"2017-12-03T19:15:18Z","author_association":"CONTRIBUTOR","body":"I don't quite understand this bug and fix. Any failure/recovery in Flink will basically result in a loss of the cache. That means this does not give you any added guarantees here - only stickyness between recoveries.\r\n\r\nI would follow @aljoscha's advise and check what Kafka's own behavior for this is. The fact that Flink switches the partition when Kafka adds more topics may also be considered correct. Making this stateful and sticky to its first-ever partitioning scheme means also that when scaling Kafka out, one needs to savepoint/restore the Flink job and tell it to not pick up previous state. Quite tricky as well.\r\n\r\nIs this an actual user-reported problem?\r\n\r\nIf this code is added, it needs to be performance optimized:\r\n  - map.contains() followed by map.get() is an antipattern (can we guard for that via spotbugs?) - two hash map accesses. Just do map.get() and check for null, that is only one hash map access. \r\n  - Because a very common case will be having one topic, the code should be optimized for one topic, meaning memoization if the latest value/access to save the hashmap lookup when the method is always invoked with the same string object.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348806689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/flink/issues/comments/348873963","html_url":"https://github.com/apache/flink/pull/5108#issuecomment-348873963","issue_url":"https://api.github.com/repos/apache/flink/issues/5108","id":348873963,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODg3Mzk2Mw==","user":{"login":"tzulitai","id":5284370,"node_id":"MDQ6VXNlcjUyODQzNzA=","avatar_url":"https://avatars.githubusercontent.com/u/5284370?v=4","gravatar_id":"","url":"https://api.github.com/users/tzulitai","html_url":"https://github.com/tzulitai","followers_url":"https://api.github.com/users/tzulitai/followers","following_url":"https://api.github.com/users/tzulitai/following{/other_user}","gists_url":"https://api.github.com/users/tzulitai/gists{/gist_id}","starred_url":"https://api.github.com/users/tzulitai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tzulitai/subscriptions","organizations_url":"https://api.github.com/users/tzulitai/orgs","repos_url":"https://api.github.com/users/tzulitai/repos","events_url":"https://api.github.com/users/tzulitai/events{/privacy}","received_events_url":"https://api.github.com/users/tzulitai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-04T06:46:16Z","updated_at":"2017-12-04T07:07:33Z","author_association":"CONTRIBUTOR","body":"This is not an actual user-reported problem.\r\nI considered this a regression due to the fact that the original `FlinkFixedPartitioner` implementation did not switch partitions at all between recoveries, even in the case of scaling out Kafka.\r\n\r\nLet me explain a bit the history of the fixed partitioner with a bit of code (sorry for not have provided this information earlier). The previous implementation: https://github.com/apache/flink/blob/release-1.2/flink-connectors/flink-connector-kafka-base/src/main/java/org/apache/flink/streaming/connectors/kafka/partitioner/FixedPartitioner.java.\r\n\r\nAs you can see, the original implementation of the fixed partitioner already has the following problems:\r\n1. State of the partitioner (i.e., the `targetPartition`) is lost on failure, and re-determined on restore.\r\n2. The API for the partitioner itself is problematic, in the case of multiple topics. Please see [FLINK-6288](https://issues.apache.org/jira/browse/FLINK-6288) for a description on that.\r\nIt, however, does have the guarantee that provides stickiness between recoveries.\r\n\r\nNow, the issue this PR is fixing occurred when fixing problem 2. in 9ed9b68.\r\nThe `FlinkFixedPartitioner` no longer provided stickiness between recoveries; the partitioner will switch partitions in the case of scaling out Kafka.\r\n\r\nI consider this a regression, only because users who actually use the fixed partitioner before will experience different behaviours.\r\n\r\nHowever, if we were to re-visit the semantics of the fixed partitioner, it could be that it actually makes more sense that the fixed partitioner switches partition on scaling out Kafka (as @StephanEwen pointed out).\r\nSince 9ed9b68 is actually part of Flink 1.3 already, and we haven't received any complaints so far on the changed semantics, it definitely is arguable that we don't really need to apply this PR fix at all.","reactions":{"url":"https://api.github.com/repos/apache/flink/issues/comments/348873963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]