[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264095809","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1264095809","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1264095809,"node_id":"IC_kwDOACaFSM5LWJJB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-30T22:38:33Z","updated_at":"2022-09-30T22:38:33Z","author_association":"MEMBER","body":"> I'm not sure I like the idea of overriding the cancel method. Handling the InterruptedException is the standard way of handling a canceled future so I don't think we should deviate from that pattern as that's the intended way for handling it.\r\n\r\nOkay, that's fine. I haven't looked into it very closely. I was just thinking it might be nice to have some degree of confidence on whether it succeeded or not upon cancellation, and we would know that if we interrupted between retries.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264095809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264354593","html_url":"https://github.com/apache/accumulo/pull/2957#issuecomment-1264354593","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2957","id":1264354593,"node_id":"IC_kwDOACaFSM5LXIUh","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-01T12:48:23Z","updated_at":"2022-10-01T12:49:34Z","author_association":"CONTRIBUTOR","body":"I did some digging with the licensing and it looks jquery.pie.js is under https://github.com/flot/flot/blob/master/source/jquery.flot.pie.js. The licensing in the headers has been renamed/reworked slightly but it is still used.\r\n\r\nThe section that we currently show in our license file referring to June 2009 creation was dropped long ago:\r\n \r\nhttps://github.com/flot/flot/commit/9e21074d82376c519ca586b1fdcfca0eafdc97ad#diff-46d28d77e2699e7634fe9138e185409139794584ffa0c7cfb842c79efcaa8741\r\n\r\nCurrent version shows:\r\n\r\nhttps://github.com/flot/flot/blob/de34ce947d8ebfb2cac0b682a130ba079d8d654b/source/jquery.flot.pie.js#L1-L14\r\n\r\n@ctubbsii  - Should we just update the LICENSE file with the updated wording from the current version?\r\n\r\nAs a side note, I also checked the licensing section on jquery.flot.resize.js and it is still accurate with the inline dependency. I think only the jquery.pie.js part should be edited.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264354593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264478349","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1264478349","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1264478349,"node_id":"IC_kwDOACaFSM5LXmiN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-01T21:00:12Z","updated_at":"2022-10-01T21:04:50Z","author_association":"CONTRIBUTOR","body":"@ctubbsii @cshannon @dlmarion  I did three experiments in [406b9f8](https://github.com/apache/accumulo/pull/2967/commits/406b9f84e96faf936e071797e125f11b8118d00b) where I tried different ways of limiting the retries and returning the final map of props.  Did this based on reading the feedback from yesterday to see how different approaches looked.  I did the following :\r\n\r\n * I made instanceOperations().modifyProperties() take a timeout duration.\r\n * I renamed namespaceOperations().modifyProperties() to modifyPropertiesAsync() and it returns a CompletableFuture.  It creates a cached thread pool (can't shut the thread pool down before method exits so the cached thread pool is good option) to execute the task asynchronously.  I was wary of using the common pool from fork join because it shared JVM wide and is intended for computational task and not I/O task.  I added Async to the name to make it clear that the operation may not be complete when the method returns.\r\n * I made tableOperations().modifyProperties() return a CompleteableFuture and take an Executor as parameter that it uses to execute the task.  This avoids the Accumulo code having to create and manager an executor to run the async task.\r\n\r\nI made all of the operations return a `Map<String, String>`.  The returned map is the final map that was accepted on the last retry.  I think this will be useful for conditional updates as it allows the user to inspect what the final result was w/o having to do anything odd in their lambda like setting an atomic reference. \r\n\r\nTo get a feel for how all of these changes would look when used I added three new test that make two conditional updates using each API.   These three test were added at the end of PropStoreConfigIT.java.\r\n\r\nAfter making all these change I was digging a bit deeper in the code and found that the current code that is committed will already retry forever.  The currently committed code calls [executeVoidTableCommand()](https://github.com/apache/accumulo/blob/8a7ed07d74a0ba0d127a37a5fced23d34a270dfe/core/src/main/java/org/apache/accumulo/core/rpc/clients/ManagerThriftClient.java#L101-L136) which retries forever when there are problems communicating with the Manager.  After seeing this I think retrying forever is a good option in this PR for the following reasons :\r\n\r\n * The code to communicate with the manager retries forever and many table operations use this.  This is a more systemic issue and only addressing it one place in the API does not make sense to me.\r\n * When things are working well (Manager and Zookeeper are healthy) I think its extremely unlikely that any modifyProperties call would retry forever given they are doing exponential backoff.  When that code does have a high chance of retrying forever is when ZK and/or manager are unhealthy and in some code already retries forever in those cases.\r\n\r\nIt would still be nice to return the final Map that was accepted. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264478349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264531146","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1264531146","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1264531146,"node_id":"IC_kwDOACaFSM5LXzbK","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-02T02:24:53Z","updated_at":"2022-10-02T02:24:53Z","author_association":"MEMBER","body":"Thoughts on those experiments (skip over for my conclusion):\r\n\r\n* I'm not sure it's necessary to name the method \"Async()\" when it returns a Future. I think that's implied. But, I suppose it doesn't hurt to be explicit. I just wouldn't want to have two versions.... one async and one synchronous, because we imply it with the name suffix, because that name suffix is often used to distinguish between two versions of the same command in many other APIs (ZooKeeper does this, for one example).\r\n* I agree returning the final map is nice (very convenient)\r\n* I'm not sure the existing retry forever is the same kind of indefinite retry as we've been discussing. That retries trying to communicate with the server. This retry is a new retry when the server communicates fine, but communicates the detection of a collision. I don't think they're comparable.\r\n* I don't think it's a problem to use the ForkJoinPool as a default, but I think it's a bit of API bloat to start accepting executors on all async APIs. I think if we start adding async APIs, we should default to the ForkJoinPool, and provide some other mechanism to set an executor at the time the AccumuloClient is constructed, for use with that client, and shut down when that client is closed. This goes back to previous discussions about having per-client resources, and possibly making those resources sharable across clients only in explicit ways at the time the client is constructed. There shouldn't be any global JVM resources being auto-magically created and used and cleaned up (think SingletonManager stuffs).\r\n* You started using the term \"conditional updates\" in the method names of the test code. While this method can certainly be used for conditional updates, and the tests themselves may be doing conditional updating, I just want to be clear that this feature itself is not necessarily a conditional update API, because we do not impose any conditional gating. Any conditionals would be imposed by the user in their own mutator code. I mention this only because I think we should be careful not to use the term \"conditional\" as a general term for this feature. I don't think you were doing that... but it's something that might easily be done if we're not careful, because we have ConditionalMutation, which is very similar, for user data. So, if we're not careful, it could get confusing for users.\r\n\r\nMy conclusion: Based on the experimentation you've done, and the state of this discussion, and thinking about how much work is still needed to design asynchronous APIs in a way that's consistent going forward, instead of just doing it as a one-off for this specific feature, I'm thinking that I'd prefer to settle with the infinite retry you initially proposed, and to punt on the asynchronous stuff until 3.x, so we can do it consistently.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264531146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264533436","html_url":"https://github.com/apache/accumulo/pull/2957#issuecomment-1264533436","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2957","id":1264533436,"node_id":"IC_kwDOACaFSM5LXz-8","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-02T02:35:33Z","updated_at":"2022-10-02T02:35:33Z","author_association":"MEMBER","body":"> Should we just update the LICENSE file with the updated wording from the current version?\r\n\r\nYes, exactly.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264533436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264717379","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1264717379","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1264717379,"node_id":"IC_kwDOACaFSM5LYg5D","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-02T19:37:41Z","updated_at":"2022-10-02T19:38:58Z","author_association":"CONTRIBUTOR","body":"> I'm not sure it's necessary to name the method \"Async()\" when it returns a Future. I think that's implied. \r\n\r\nFor that I was thinking its an async method among many sync methods and using the return type is optional.  So wanted to make sure anyone using it knew that when the method returned it may not be done.\r\n\r\n>  I think if we start adding async APIs, we should default to the ForkJoinPool, and provide some other mechanism to set an executor at the time the AccumuloClient is constructed, for use with that client, and shut down when that client is closed.\r\n\r\nI am not sure scoping the executor at the client is good.  Many methods on Completable future have a version that takes an Executor and one that does not.  This allows developer control over limiting how many cores an operation can use.   I think this important if a developer wants to limit one scan to one core and another to 32 cores for example.  If the executor was scoped to the accumulo client, then they would need to create two different clients for the scans.\r\n\r\n> My conclusion: Based on the experimentation you've done, and the state of this discussion, and thinking about how much work is still needed to design asynchronous APIs in a way that's consistent going forward, instead of just doing it as a one-off for this specific feature\r\n\r\nI agree.  I also mentioned previously it would be good to do the async client API work at the same time as making the servers support async read/write pipelines so that the two could influence each in a development cycle.  This is another reason to defer this to 3.0.\r\n\r\nAnother little thing that I noticed while experimenting with an async API for this PR is that our existing checked exceptions would be wrapped by something like an ExecutionException when using futures.  Its a very nuanced thing, but exceptions may be something else to consider in the design of async APIs.  I noticed that ComletableFuture introduced a new method called [join()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html#join()) that is similar to [get()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/CompletableFuture.html#get()) except it has no checked exceptions.  I really like it, so much easier to use.  Makes me wonder if there is a wider move away from checked exceptions in the Java APIs because they are painful to use w/ lambdas.\r\n\r\nI think I will revert the experimental commmit I did and then do another commit to add the map return type.\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264717379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264972799","html_url":"https://github.com/apache/accumulo/pull/2988#issuecomment-1264972799","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2988","id":1264972799,"node_id":"IC_kwDOACaFSM5LZfP_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T06:03:21Z","updated_at":"2022-10-03T06:03:21Z","author_association":"MEMBER","body":"This causes the following tests to fail:\r\n`-Dit.test=AuditMessageIT,DumpConfigIT,ImportExportIT,NamespacesIT,PropStoreConfigIT,PermissionsIT,ShellServerIT`\r\n\r\nI'm reverting this until it is re-worked to address the failures and we've given proper consideration to the code that calls this, and our desired behavior. I created a new issue to track the re-work: #2993","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264972799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264975282","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1264975282","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1264975282,"node_id":"IC_kwDOACaFSM5LZf2y","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T06:06:37Z","updated_at":"2022-10-03T06:06:37Z","author_association":"MEMBER","body":"> I think I will revert the experimental commmit I did and then do another commit to add the map return type.\r\n\r\nThere's conflicts with main, so if you could rebase it onto main, or merge main into this branch to resolve the conflicts, that would also be helpful to make it easier to merge once you're done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1264975282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265464689","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265464689","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265464689,"node_id":"IC_kwDOACaFSM5LbXVx","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T13:45:35Z","updated_at":"2022-10-03T13:56:42Z","author_association":"CONTRIBUTOR","body":"> There's conflicts with main, so if you could rebase it onto main, or merge main into this branch to resolve the conflicts, that would also be helpful to make it easier to merge once you're done.\r\n\r\nI merged main in, fixed a bunch of build problems I created, and updated the javadocs.  Also made the function return the map.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265464689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265619285","html_url":"https://github.com/apache/accumulo/pull/2957#issuecomment-1265619285","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2957","id":1265619285,"node_id":"IC_kwDOACaFSM5Lb9FV","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T15:13:48Z","updated_at":"2022-10-03T15:13:48Z","author_association":"MEMBER","body":"Thanks for the input @ctubbsii and @cshannon. I updated the flot license. Take a look and see what you think.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265619285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265768528","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265768528","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265768528,"node_id":"IC_kwDOACaFSM5LchhQ","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T17:12:49Z","updated_at":"2022-10-03T17:12:49Z","author_association":"MEMBER","body":"Not sure if this adds any value but I saw an test failure when running `PermissionsIT.systemPermissionsTest` locally on main that looked like it could be related:\r\n```java\r\n2022-10-03T13:08:18,940 [functional.PermissionsIT] DEBUG: Verifying the DROP_TABLE permission\r\n2022-10-03T13:08:19,940 [functional.PermissionsIT] DEBUG: Confirming that the lack of the DROP_TABLE permission properly restricts the user\r\n2022-10-03T13:08:20,329 [functional.PermissionsIT] DEBUG: Confirming that the presence of the DROP_TABLE permission properly permits the user\r\n2022-10-03T13:08:21,000 [functional.PermissionsIT] DEBUG: Verifying the ALTER_TABLE permission\r\n2022-10-03T13:08:22,000 [functional.PermissionsIT] DEBUG: Confirming that the lack of the ALTER_TABLE permission properly restricts the user\r\n\r\njava.util.ConcurrentModificationException\r\n\tat org.apache.accumulo.core.rpc.clients.ManagerThriftClient.executeVoidTableCommand(ManagerThriftClient.java:128)\r\n\tat org.apache.accumulo.core.rpc.clients.ManagerThriftClient.executeVoid(ManagerThriftClient.java:142)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.modifyProperties(TableOperationsImpl.java:1027)\r\n\tat org.apache.accumulo.test.functional.PermissionsIT.testMissingSystemPermission(PermissionsIT.java:221)\r\n\tat org.apache.accumulo.test.functional.PermissionsIT.systemPermissionsTest(PermissionsIT.java:127)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.api.AssertTimeout.lambda$assertTimeoutPreemptively$4(AssertTimeout.java:138)\r\n\tat java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: ThriftConcurrentModificationException(description:Failed to modify properties to zooKeeper for TablePropKey{TableId=4'}, properties changed since reading.)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$modifyTableProperties_result$modifyTableProperties_resultStandardScheme.read(ManagerClientService.java:9258)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$modifyTableProperties_result$modifyTableProperties_resultStandardScheme.read(ManagerClientService.java:9217)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$modifyTableProperties_result.read(ManagerClientService.java:9143)\r\n\tat org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:88)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$Client.recv_modifyTableProperties(ManagerClientService.java:263)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$Client.modifyTableProperties(ManagerClientService.java:247)\r\n\tat org.apache.accumulo.core.clientImpl.TableOperationsImpl.lambda$modifyProperties$1(TableOperationsImpl.java:1028)\r\n\tat org.apache.accumulo.core.rpc.clients.ManagerThriftClient.executeVoidTableCommand(ManagerThriftClient.java:107)\r\n\t... 17 more\r\n```\r\nThis doesn't happen all the time but I am able to reproduce the failure after a few runs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265768528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265821685","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265821685","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265821685,"node_id":"IC_kwDOACaFSM5Lcuf1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T17:54:25Z","updated_at":"2022-10-03T17:54:25Z","author_association":"CONTRIBUTOR","body":"I just saw a CME in PropStoreConfigIT.modifyTablePropTest","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265821685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265835606","html_url":"https://github.com/apache/accumulo/pull/2988#issuecomment-1265835606","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2988","id":1265835606,"node_id":"IC_kwDOACaFSM5Lcx5W","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T18:07:37Z","updated_at":"2022-10-03T18:07:37Z","author_association":"CONTRIBUTOR","body":"I made the following changes in #2994 \r\n\r\n  1. Modified client.thrift to declare ThriftSecurityException where it's thrown\r\n  2. Added check for system user in ClientServiceHandler to allow system process to get configuration\r\n  3. Modified PermissionsIT so that test user always has READ permissions on table so that it can check the configuration for arbitrary properties\r\n  \r\n The following tests are now passing: `AuditMessageIT, DumpConfigIT, ImportExportIT, PropStoreConfigIT, PermissionsIT`\r\n \r\n The following tests are still failing, but I think they may point to valid issues.\r\n \r\n**NamespacesIT**\r\n - testPermissions may be failing due to consistency\r\n - verifyPropertyInheritance & verifySystemPropertyInheritance, root user does not have READ permission on DEFAULT namespace.\r\n\r\n**ShellServerIT**\r\ncloneTable - failing on line 649, getting configuration on table that was just cloned\r\ncloneTableOffline - failing on line 671, getting configuration on table that was just cloned\r\nexporttableImporttable - failing on line 212, getting the configuration for a table that was just imported.\r\n\r\nThe above tests are failing with the error:\r\n```\r\norg.apache.accumulo.core.client.AccumuloException: org.apache.accumulo.core.client.AccumuloSecurityException: Error PERMISSION_DENIED for user root - User does not have permission to perform this action\r\n\tat org.apache.accumulo.core.clientImpl.NamespaceOperationsImpl.getConfiguration(NamespaceOperationsImpl.java:266) ~[classes/:?]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265835606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265865762","html_url":"https://github.com/apache/accumulo/issues/2993#issuecomment-1265865762","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2993","id":1265865762,"node_id":"IC_kwDOACaFSM5Lc5Qi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T18:31:56Z","updated_at":"2022-10-03T18:31:56Z","author_association":"CONTRIBUTOR","body":"I made the following changes in #2994 \r\n\r\n  1. Modified client.thrift to declare ThriftSecurityException where it's thrown\r\n  2. Added check for system user in ClientServiceHandler to allow system process to get configuration\r\n  3. Modified PermissionsIT so that test user always has READ permissions on table so that it can check the configuration for arbitrary properties\r\n  \r\n The following tests are now passing: `AuditMessageIT, DumpConfigIT, ImportExportIT, PropStoreConfigIT, PermissionsIT`\r\n \r\n The following tests are still failing, but I think they may point to valid issues.\r\n \r\n**NamespacesIT**\r\n - testPermissions may be failing due to consistency\r\n - verifyPropertyInheritance & verifySystemPropertyInheritance, root user does not have READ permission on DEFAULT namespace.\r\n\r\n**ShellServerIT**\r\ncloneTable - failing on line 649, getting configuration on table that was just cloned\r\ncloneTableOffline - failing on line 671, getting configuration on table that was just cloned\r\nexporttableImporttable - failing on line 212, getting the configuration for a table that was just imported.\r\n\r\nThe above tests are failing with the error:\r\n```\r\norg.apache.accumulo.core.client.AccumuloException: org.apache.accumulo.core.client.AccumuloSecurityException: Error PERMISSION_DENIED for user root - User does not have permission to perform this action\r\n\tat org.apache.accumulo.core.clientImpl.NamespaceOperationsImpl.getConfiguration(NamespaceOperationsImpl.java:266) ~[classes/:?]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265865762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265889080","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265889080","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265889080,"node_id":"IC_kwDOACaFSM5Lc-84","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T18:53:14Z","updated_at":"2022-10-03T18:53:14Z","author_association":"CONTRIBUTOR","body":"@dlmarion and @DomGarguilo for the CME errors you mentioned, you are seeing those in the main branch w/o these changes merged?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265889080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265892817","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265892817","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265892817,"node_id":"IC_kwDOACaFSM5Lc_3R","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T18:57:02Z","updated_at":"2022-10-03T18:58:05Z","author_association":"MEMBER","body":"> @dlmarion and @DomGarguilo for the CME errors you mentioned, you are seeing those in the main branch w/o these changes merged?\r\n\r\nYes, main branch. Haven't tried with the changes in this PR yet. Might have been the wrong spot to report the test failure I saw. Do you think I should open a separate ticket instead?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265892817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265895625","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265895625","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265895625,"node_id":"IC_kwDOACaFSM5LdAjJ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T18:59:58Z","updated_at":"2022-10-03T18:59:58Z","author_association":"CONTRIBUTOR","body":"Correct","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265895625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265912644","html_url":"https://github.com/apache/accumulo/issues/2993#issuecomment-1265912644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2993","id":1265912644,"node_id":"IC_kwDOACaFSM5LdEtE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T19:16:19Z","updated_at":"2022-10-03T19:16:50Z","author_association":"CONTRIBUTOR","body":"This [one line](https://github.com/apache/accumulo/pull/2994/commits/9e98909a50924f9feedcd5950f7ce7997b3a2f84) change resolves the test issues in ShellServerIT, NamespacesIT.verifyPropertyInheritance and verifySystemPropertyInheritance. If we want to keep this change, then we likely need to also update the upgrade code. If we don't want to keep this change, then we need to make a similar change in the tests.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265912644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265922362","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265922362","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265922362,"node_id":"IC_kwDOACaFSM5LdHE6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T19:21:04Z","updated_at":"2022-10-03T19:21:04Z","author_association":"CONTRIBUTOR","body":"> Yes, main branch. Haven't tried with the changes in this PR yet. Might have been the wrong spot to report the test failure I saw. Do you think I should open a separate ticket instead?\r\n\r\nThis is a good place to mention that, seems related.  If this PR does not fix the problem then we could open an issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265922362/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265959924","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1265959924","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1265959924,"node_id":"IC_kwDOACaFSM5LdQP0","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T19:57:56Z","updated_at":"2022-10-03T19:57:56Z","author_association":"CONTRIBUTOR","body":"Is this a concurrency issue it the test?  I would help to know where multiple, concurrent change requests being made.  While this pr could \"fix\" the issue - it is surprising that it is happening at all.\r\n\r\nI am assuming that these are new with the adoption of using the new atomic,  multi-property set functions in new places in the code - but those changes should have just been grouping prop changes that were occurring serially into a single call.\r\n\r\nIt may help too if the underlying exception printed the expected vs the received data versions - that may help unwind the timeline of these events.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265959924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265968429","html_url":"https://github.com/apache/accumulo/issues/2993#issuecomment-1265968429","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2993","id":1265968429,"node_id":"IC_kwDOACaFSM5LdSUt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T20:06:06Z","updated_at":"2022-10-03T20:06:06Z","author_association":"CONTRIBUTOR","body":"I also fixed the NamespacesIT test, so I think all tests are passing now. I'm going to kick off a full IT build to be sure. There is still an open question w/r/t my comment above.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1265968429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266066494","html_url":"https://github.com/apache/accumulo/issues/2993#issuecomment-1266066494","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2993","id":1266066494,"node_id":"IC_kwDOACaFSM5LdqQ-","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T21:21:13Z","updated_at":"2022-10-03T21:21:13Z","author_association":"MEMBER","body":"The root user should not have permission by default to read the DEFAULT namespace, as that is intended for user tables, and the root user has no inherent need to read user tables. It can be granted to the root user in the test where it is needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266066494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266148932","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1266148932","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1266148932,"node_id":"IC_kwDOACaFSM5Ld-ZE","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-03T22:42:33Z","updated_at":"2022-10-03T22:42:33Z","author_association":"CONTRIBUTOR","body":"I reviewed the changes and they LGTM. I think it's reasonable to wait and just to do the bigger async update for 3.0. I also do like the return of the final updated map now that retry is supported so the user can see what was accepted. In terms of the CME that has happened a few times during tests, I like @EdColeman's idea of printing out the state to help track down expected vs the actual result. We could also just go ahead and proactively update the logging now to print the state when CME is thrown now as part of this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266148932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266667291","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1266667291","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1266667291,"node_id":"IC_kwDOACaFSM5Lf88b","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T09:32:13Z","updated_at":"2022-10-04T09:32:13Z","author_association":"CONTRIBUTOR","body":" > Is this a concurrency issue it the test? I would help to know where multiple, concurrent change requests being made. While this pr could \"fix\" the issue - it is surprising that it is happening at all.\r\n\r\nI was also wondering about this.  I thought of another possible cause besides an actual concurrent update.  If the props were read from a stale cache it could also cause this.  So there are two updates that do not overlap in time and the 2nd update reads props from a cache where the first update is not reflected.  Not sure if this can even happen, its been a while since i reviewed the recent server side changes to store props in a single znode.  I remember those changes introduced some new caching.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266667291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266709231","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1266709231","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1266709231,"node_id":"IC_kwDOACaFSM5LgHLv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T10:04:44Z","updated_at":"2022-10-04T10:04:44Z","author_association":"CONTRIBUTOR","body":"> We could also just go ahead and proactively update the logging now to print the state when CME is thrown now as part of this PR.\r\n\r\nI think I would prefer to get this PR merged now that consensus has been reached on these changes.\r\n\r\n@ctubbsii I updated the HTML tags in [b889e95](https://github.com/apache/accumulo/pull/2967/commits/b889e95366070eb48213107aac7c34350426f2cb).  Also I added a paragraph to the javadoc in b889e95 containing some info that I thought was important to call out.  @EdColeman, @cshannon, @ctubbsii, or @dlmarion  could one of you take a look at that new paragraph?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266709231/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266988052","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1266988052","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1266988052,"node_id":"IC_kwDOACaFSM5LhLQU","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T13:20:40Z","updated_at":"2022-10-04T13:20:40Z","author_association":"CONTRIBUTOR","body":"I created https://github.com/apache/accumulo/issues/2996 to track things specifically to the CMEs that are occurring.  Depending on the final state of this PR, that issue can be closed - or can be used for follow-on work independent of the PR so this PR can proceed without those issues getting lost","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1266988052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267277344","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1267277344","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1267277344,"node_id":"IC_kwDOACaFSM5LiR4g","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T16:42:09Z","updated_at":"2022-10-04T16:42:09Z","author_association":"CONTRIBUTOR","body":"Full IT build passed successfully","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267277344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267293631","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1267293631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1267293631,"node_id":"IC_kwDOACaFSM5LiV2_","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T16:57:23Z","updated_at":"2022-10-04T16:57:23Z","author_association":"CONTRIBUTOR","body":"I started looking into this and ran bulk import RW test.  I saw the following error, which is a different problem.  I didn't keep the RW test logs so can't dig into it much.  Going to keep running RW bulk test and keeping the test logs.\r\n\r\n```\r\n2022-10-04T13:26:12,850 [testing.randomwalk.Module] DEBUG: State information\r\n2022-10-04T13:26:12,850 [testing.randomwalk.Module] DEBUG:   bulkImportSuccess: true\r\n2022-10-04T13:26:12,855 [testing.randomwalk.Module] DEBUG:   fs: class org.apache.hadoop.hdfs.DistributedFileSystem - DFS[DFSClient[clientName=DFSClient_NONMAPREDUCE_-924030891_1, ugi=ubuntu (auth:SIMPLE)]]\r\n2022-10-04T13:26:12,855 [testing.randomwalk.Module] DEBUG:   pool: class org.apache.accumulo.core.util.threads.ThreadPools$2 - org.apache.accumulo.core.util.threads.ThreadPools$2@4248b963[Terminated, pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 823]\r\n2022-10-04T13:26:12,855 [testing.randomwalk.Framework] ERROR: Error during random walk\r\njava.lang.Exception: Error running node bulk.Verify\r\n\tat org.apache.accumulo.testing.randomwalk.Module.visit(Module.java:360) ~[accumulo-testing-shaded.jar:?]\r\n\tat org.apache.accumulo.testing.randomwalk.Framework.run(Framework.java:54) ~[accumulo-testing-shaded.jar:?]\r\n\tat org.apache.accumulo.testing.randomwalk.Framework.main(Framework.java:98) ~[accumulo-testing-shaded.jar:?]\r\nCaused by: java.lang.Exception: Bad key at r004d9 cf:000 [] 1664889971863 false=-1\r\n\tat org.apache.accumulo.testing.randomwalk.bulk.Verify.visit(Verify.java:73) ~[accumulo-testing-shaded.jar:?]\r\n\tat org.apache.accumulo.testing.randomwalk.Module.lambda$visit$0(Module.java:295) ~[accumulo-testing-shaded.jar:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-testing-shaded.jar:?]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-testing-shaded.jar:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-testing-shaded.jar:?]\r\n\tat java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n2022-10-04T13:26:12,864 [testing.randomwalk.Framework] INFO : Test finished\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267293631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267303733","html_url":"https://github.com/apache/accumulo/issues/2998#issuecomment-1267303733","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2998","id":1267303733,"node_id":"IC_kwDOACaFSM5LiYU1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T17:06:06Z","updated_at":"2022-10-04T17:06:06Z","author_association":"CONTRIBUTOR","body":"Like the other server components, each has a defined port and then there is a port search property that will allow the server to search for an open port if the configured port is not open. When running more than one compactor on a host, you will need to set the [compactor.port.search](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/conf/Property.java#L1378) property from its default of `false` to `true`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267303733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267310987","html_url":"https://github.com/apache/accumulo/issues/2998#issuecomment-1267310987","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2998","id":1267310987,"node_id":"IC_kwDOACaFSM5LiaGL","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T17:13:05Z","updated_at":"2022-10-04T17:13:05Z","author_association":"MEMBER","body":"> When running more than one compactor on a host, you will need to set the [compactor.port.search](https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/conf/Property.java#L1378) property from its default of `false` to `true`.\r\n\r\nThat did the trick, thanks. Closing this as a non-issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267310987/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267323207","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1267323207","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1267323207,"node_id":"IC_kwDOACaFSM5LidFH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-04T17:24:05Z","updated_at":"2022-10-04T17:24:05Z","author_association":"CONTRIBUTOR","body":"Full IT build passed successfully","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1267323207/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268139096","html_url":"https://github.com/apache/accumulo/issues/2996#issuecomment-1268139096","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2996","id":1268139096,"node_id":"IC_kwDOACaFSM5LlkRY","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T08:48:27Z","updated_at":"2022-10-05T08:48:27Z","author_association":"CONTRIBUTOR","body":"End to end trace level logging that shows what happening at each step client and server would be really nice.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268139096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268313186","html_url":"https://github.com/apache/accumulo/pull/2997#issuecomment-1268313186","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2997","id":1268313186,"node_id":"IC_kwDOACaFSM5LmOxi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T11:33:25Z","updated_at":"2022-10-05T11:33:25Z","author_association":"CONTRIBUTOR","body":"@AlbertWhitlock  - I'm not sure what these changes do, can you provide a screenshot of the changes?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268313186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268431583","html_url":"https://github.com/apache/accumulo/pull/2997#issuecomment-1268431583","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2997","id":1268431583,"node_id":"IC_kwDOACaFSM5Lmrrf","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T13:26:01Z","updated_at":"2022-10-05T13:26:01Z","author_association":"MEMBER","body":"Here is a screenshot of the changed page:\r\n![image](https://user-images.githubusercontent.com/47725857/194071282-86100293-60f9-4931-82cd-f5d60e958116.png)\r\n\r\nThe top table was added to replace what was described in #2934:\r\n![image](https://user-images.githubusercontent.com/11872539/190671815-5b1e66f9-51f0-4b79-817c-f9750aa36ed3.png)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268431583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268662924","html_url":"https://github.com/apache/accumulo/pull/2997#issuecomment-1268662924","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2997","id":1268662924,"node_id":"IC_kwDOACaFSM5LnkKM","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T16:29:00Z","updated_at":"2022-10-05T16:29:00Z","author_association":"MEMBER","body":"Looks like an unrelated change was included in [009fe3d](https://github.com/apache/accumulo/pull/2997/commits/009fe3d4987ee7a8f4009fc7e9f3aac07b8d49e0), possibly by accident","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268662924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268768348","html_url":"https://github.com/apache/accumulo/pull/2997#issuecomment-1268768348","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2997","id":1268768348,"node_id":"IC_kwDOACaFSM5Ln95c","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T18:07:54Z","updated_at":"2022-10-05T18:07:54Z","author_association":"CONTRIBUTOR","body":"Screenshots look good, I like it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268768348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268857319","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1268857319","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1268857319,"node_id":"IC_kwDOACaFSM5LoTnn","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T19:22:44Z","updated_at":"2022-10-05T19:22:44Z","author_association":"CONTRIBUTOR","body":"This will need an entry in the release notes upon merge because this behavior is different from 2.0.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268857319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268859311","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1268859311","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1268859311,"node_id":"IC_kwDOACaFSM5LoUGv","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T19:24:25Z","updated_at":"2022-10-05T19:24:25Z","author_association":"CONTRIBUTOR","body":"Do these changes impact what a shell user or a client needs to do - or be granted to work?  Say I have a client process that creates tables, sets props and then ingests - will it continue to work without changes or would something different need to be granted?  Not saying that it should not be done if changes are required - but they do need to be made known - preferably as part of this PR, but could be done as a follow-on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268859311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268860678","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1268860678","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1268860678,"node_id":"IC_kwDOACaFSM5LoUcG","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T19:25:38Z","updated_at":"2022-10-05T19:25:38Z","author_association":"CONTRIBUTOR","body":"If you create a table, I believe you have all permissions on that table. So nothing would need to change","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268860678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268876506","html_url":"https://github.com/apache/accumulo/pull/2990#issuecomment-1268876506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2990","id":1268876506,"node_id":"IC_kwDOACaFSM5LoYTa","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T19:38:19Z","updated_at":"2022-10-05T19:38:19Z","author_association":"CONTRIBUTOR","body":"> I think the main concern is: do these make progress? Or do they block indefinitely?\r\n\r\nIn my limited testing, they do make progress. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268876506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268958175","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1268958175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1268958175,"node_id":"IC_kwDOACaFSM5LosPf","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T20:47:40Z","updated_at":"2022-10-05T20:47:40Z","author_association":"CONTRIBUTOR","body":"I wonder if this error occurred when a table was compacting and splitting at the same time and the split failed due to the bug I fixed in #2977. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268958175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268962004","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1268962004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1268962004,"node_id":"IC_kwDOACaFSM5LotLU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-05T20:51:31Z","updated_at":"2022-10-05T20:51:31Z","author_association":"MEMBER","body":"It does add some extra constraints... like in order to clone a table with the same configuration, you now need `ALTER_TABLE` permissions for the table, and not just `READ`. This won't affect the table's creator, but it does change behavior for other users.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1268962004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269605242","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1269605242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1269605242,"node_id":"IC_kwDOACaFSM5LrKN6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T08:46:17Z","updated_at":"2022-10-06T08:46:17Z","author_association":"CONTRIBUTOR","body":"> LGTM, I think the log messages should be modified to note that we are going to retry. \r\n\r\nThe Retry code will append the following to the log message to indicate that its going to retry.\r\n\r\nhttps://github.com/apache/accumulo/blob/6976933640be998c01c2a47c4a1bf8d0dca84d86/core/src/main/java/org/apache/accumulo/fate/util/Retry.java#L239-L242\r\n\r\n> To that end, it may be useful to log that it was successful when a retry was performed.\r\n\r\nThat would be really nice to do.  Looking at the Retry class it does not support this.  I am going to look into doing this and see if it should be done in this PR or as a follow on PR that makes a more general change to Retry.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269605242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269905344","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1269905344","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1269905344,"node_id":"IC_kwDOACaFSM5LsTfA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T12:00:19Z","updated_at":"2022-10-06T12:00:19Z","author_association":"CONTRIBUTOR","body":"> I wonder if this error occurred when a table was compacting and splitting at the same time and the split failed due to the bug I fixed in https://github.com/apache/accumulo/issues/2977.\r\n\r\nI will look into that.  I have been trying to recreate your scenario with a slight modification to the RW test graph. Instead of not ever verifiying and therefore not ending.  I changed my graph locally to start over after verify.  So doing the following locally.\r\n\r\n```\r\n$ git diff\r\ndiff --git a/src/main/resources/randomwalk/modules/Bulk.xml b/src/main/resources/randomwalk/modules/Bulk.xml\r\nindex 26004b1..1880944 100644\r\n--- a/src/main/resources/randomwalk/modules/Bulk.xml\r\n+++ b/src/main/resources/randomwalk/modules/Bulk.xml\r\n@@ -55,7 +55,7 @@\r\n </node>\r\n \r\n <node id=\"bulk.Verify\">\r\n-  <edge id=\"END\" weight=\"1\"/>\r\n+  <edge id=\"bulk.Setup\" weight=\"1\"/>\r\n </node>\r\n \r\n </module>\r\n```\r\n\r\nI have been bumping into a few little issues with the test when trying to verify so i have not have not had a super long run yet.  But in the runs so far I don't think I saw any problems.  I will take a look at the split thing you mentioned.  I also found I needed to add nohup to your little script so that the processes would not terminate.\r\n\r\n```\r\nfor (( i=1; i<5; i++)); do nohup bin/rwalk Bulk.xml > rwalk\"$i\".log 2>&1 & done\r\n```\r\n\r\nI think I am close to getting a test that could run for days on end going.  I think this a good to test to run even if this issue may be fixed by the change you mentioned.\r\n\r\n@milleruntime when you did see the error on the tserver, did it cause the RW test to hang or error?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269905344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269938162","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1269938162","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1269938162,"node_id":"IC_kwDOACaFSM5Lsbfy","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T12:20:02Z","updated_at":"2022-10-06T12:20:02Z","author_association":"CONTRIBUTOR","body":"Kicked off full IT build","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269938162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269941212","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1269941212","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1269941212,"node_id":"IC_kwDOACaFSM5LscPc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T12:21:57Z","updated_at":"2022-10-06T12:21:57Z","author_association":"CONTRIBUTOR","body":"@milleruntime when you did see this error how long did you run test before seeing it?  How many times did you see it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1269941212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270122185","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1270122185","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1270122185,"node_id":"IC_kwDOACaFSM5LtIbJ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T14:09:35Z","updated_at":"2022-10-06T14:09:35Z","author_association":"CONTRIBUTOR","body":"> > LGTM, I think the log messages should be modified to note that we are going to retry.\r\n> \r\n> The Retry code will append the following to the log message to indicate that its going to retry.\r\n> \r\n> https://github.com/apache/accumulo/blob/6976933640be998c01c2a47c4a1bf8d0dca84d86/core/src/main/java/org/apache/accumulo/fate/util/Retry.java#L239-L242\r\n> \r\n\r\nI missed that, thanks for pointing it out.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270122185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270184562","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270184562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270184562,"node_id":"IC_kwDOACaFSM5LtXpy","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T14:43:03Z","updated_at":"2022-10-06T14:43:03Z","author_association":"CONTRIBUTOR","body":"If you put this in the parent pom, in the dependencies section (not dependencyManagement), then I believe that each module will automatically inherit it. Just thinking that we could make the change in one place.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270184562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270197859","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270197859","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270197859,"node_id":"IC_kwDOACaFSM5Lta5j","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T14:49:57Z","updated_at":"2022-10-06T14:49:57Z","author_association":"CONTRIBUTOR","body":"Would the proper scope still be test - or is provided more appropriate - it needs to make it to the class paths for tests - not sure what is required for \"normal\" logging","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270197859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270231045","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270231045","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270231045,"node_id":"IC_kwDOACaFSM5LtjAF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T15:07:26Z","updated_at":"2022-10-06T15:07:26Z","author_association":"CONTRIBUTOR","body":"I tested with the `test` scope, and that failed. The monitor needs it apparently. I'm testing now with the `provided` scope.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270231045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270237672","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270237672","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270237672,"node_id":"IC_kwDOACaFSM5Ltkno","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T15:11:07Z","updated_at":"2022-10-06T15:11:07Z","author_association":"CONTRIBUTOR","body":"So, I added the following to the parent pom:\r\n```\r\n@@ -695,6 +695,13 @@\r\n       <artifactId>spotbugs-annotations</artifactId>\r\n       <optional>true</optional>\r\n     </dependency>\r\n+    <dependency>\r\n+      <!-- needed because https://issues.apache.org/jira/browse/LOG4J2-3601 -->\r\n+      <groupId>org.apache.logging.log4j</groupId>\r\n+      <artifactId>log4j-core</artifactId>\r\n+      <scope>provided</scope>\r\n+      <optional>true</optional>\r\n+    </dependency>\r\n```\r\nand removed the dependency declaration in `assemble/pom.xml`, `core/pom.xml`, and `server/monitor/pom.xml`. `mvn clean package` completed successfully, but `log4j-core` is not in the assembly (I assume it's supposed to be there for the monitor). So, the declaration in `assemble/pom.xml` may need to remain. Further tests are likely needed with this approach.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270237672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270242123","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270242123","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270242123,"node_id":"IC_kwDOACaFSM5LtltL","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T15:13:30Z","updated_at":"2022-10-06T15:13:30Z","author_association":"CONTRIBUTOR","body":"What I first noticed was when running a test in an ide - the warning about it missing and using SimpleLogger was printed - but no logs showed up in the ide run pane","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270242123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270246023","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270246023","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270246023,"node_id":"IC_kwDOACaFSM5LtmqH","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T15:15:33Z","updated_at":"2022-10-06T15:15:33Z","author_association":"CONTRIBUTOR","body":"> What I first noticed was when running a test in an ide - the warning about it missing and using SimpleLogger was printed - but no logs showed up in the ide run pane\r\n\r\nYes, I had the same issue in `accumulo-classloaders` yesterday. Adding log4j-core resolved the issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270246023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270338186","html_url":"https://github.com/apache/accumulo/pull/3001#issuecomment-1270338186","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3001","id":1270338186,"node_id":"IC_kwDOACaFSM5Lt9KK","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T16:08:19Z","updated_at":"2022-10-06T16:08:19Z","author_association":"MEMBER","body":"I marked this as WIP because there is behavior that seem incorrect to me. In the following code that I added here:\r\n```java\r\n          // assert the test user does not have permissions to obtain a delegation token\r\n          loginAs(rootUser);\r\n          assertFalse(root_client.securityOperations().hasSystemPermission(testUser.getPrincipal(),\r\n              SystemPermission.OBTAIN_DELEGATION_TOKEN));\r\n          // login as the test user and attempt to obtain a delegation token\r\n          loginAs(testUser);\r\n          DelegationToken token =\r\n              test_user_client.securityOperations().getDelegationToken(new DelegationTokenConfig());\r\n```\r\n\r\nIt checks that the `testUser` does not have the permissions to obtain a delegation token, then successfully obtains a delegation token. Unless I am misunderstanding something, this does not seem like it should be happening. Can anyone confirm or deny this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270338186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270365479","html_url":"https://github.com/apache/accumulo/pull/2994#issuecomment-1270365479","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2994","id":1270365479,"node_id":"IC_kwDOACaFSM5LuD0n","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T16:25:18Z","updated_at":"2022-10-06T16:25:18Z","author_association":"CONTRIBUTOR","body":"Full IT build completed successfully","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270365479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270424827","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270424827","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270424827,"node_id":"IC_kwDOACaFSM5LuST7","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T17:11:19Z","updated_at":"2022-10-06T17:11:19Z","author_association":"CONTRIBUTOR","body":"Moving the declaration to main pom.xml with test scope seems to work for logging in the IDE and `mvn clean package` passed for me.  To confirm the logging I used a single IT test - so not really comprehensive, but this seem to move us closer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270424827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270428557","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270428557","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270428557,"node_id":"IC_kwDOACaFSM5LuTON","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T17:14:39Z","updated_at":"2022-10-06T17:14:39Z","author_association":"CONTRIBUTOR","body":"Did you mean to add `log4j-slf4j2-impl` to the main pom? I thought you were adding `log4j-core` ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270428557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270438922","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1270438922","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1270438922,"node_id":"IC_kwDOACaFSM5LuVwK","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T17:23:20Z","updated_at":"2022-10-06T17:23:20Z","author_association":"CONTRIBUTOR","body":"`log4j-slf4j2-impl` was inadvertent - running a mvn clean now to see if that changes things.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270438922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270573354","html_url":"https://github.com/apache/accumulo/pull/3003#issuecomment-1270573354","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3003","id":1270573354,"node_id":"IC_kwDOACaFSM5Lu2kq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T19:21:27Z","updated_at":"2022-10-06T19:21:27Z","author_association":"MEMBER","body":"This would fix #2690 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270573354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270582088","html_url":"https://github.com/apache/accumulo/pull/3003#issuecomment-1270582088","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3003","id":1270582088,"node_id":"IC_kwDOACaFSM5Lu4tI","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-06T19:29:23Z","updated_at":"2022-10-06T19:29:23Z","author_association":"CONTRIBUTOR","body":"Changing the node name so that they match would require additional changes that would include removing the legacy node.  It was easier now to keep the existing convention.  I would suggest a follow-on PR.  It is mainly going to be changes in the ConfigurationTransform code.\r\n\r\nA higher priority right now should be working to trace down the concurrency issues with multiple property updates - once those are resolved, this could be revisited.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1270582088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271312449","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1271312449","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1271312449,"node_id":"IC_kwDOACaFSM5LxrBB","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T08:54:33Z","updated_at":"2022-10-07T08:55:35Z","author_association":"CONTRIBUTOR","body":"I was able to reproduce this yesterday.  It seems like the same situation that was speculated as a cause in an earlier comment, a compaction of an empty tablet followed by a close.\r\n\r\nSaw the following in the tserver logs.\r\n\r\n```\r\n2022-10-06T19:41:09,701 [tablet.location] DEBUG: Loading 3s<< on localhost:9997[1000325bae30004]\r\n2022-10-06T19:41:09,728 [tablet.location] DEBUG: Loaded 3s<< on localhost:9997[1000325bae30004]\r\n2022-10-06T19:41:09,830 [tablet.Tablet] DEBUG: Tablet 3s<< had no dir, creating hdfs://localhost:8020/accumulo/tables/3s/default_tablet\r\n2022-10-06T19:41:09,837 [tablet.Tablet] ERROR: Closed tablet 3s<< lastCompactID is inconsistent with metadata : 2 != -1\r\n2022-10-06T19:41:09,839 [tablet.Tablet] ERROR: Failed to do close consistency check for tablet 3s<<\r\njava.lang.RuntimeException: Closed tablet 3s<< lastCompactID is inconsistent with metadata : 2 != -1\r\njava.lang.RuntimeException: Failed to do close consistency check for tablet 3s<<\r\n```\r\n\r\nSaw the following the manager logs\r\n\r\n```\r\n2022-10-06T19:41:09,520 [security.SecurityOperation] INFO : Granted table permission READ for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,523 [security.SecurityOperation] INFO : Granted table permission WRITE for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,526 [security.SecurityOperation] INFO : Granted table permission BULK_IMPORT for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,528 [security.SecurityOperation] INFO : Granted table permission ALTER_TABLE for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,530 [security.SecurityOperation] INFO : Granted table permission GRANT for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,533 [security.SecurityOperation] INFO : Granted table permission DROP_TABLE for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,537 [security.SecurityOperation] INFO : Granted table permission GET_SUMMARIES for user root on the table 3s at the request of user !SYSTEM\r\n2022-10-06T19:41:09,550 [tableOps.Utils] INFO : table 3s FATE[3d5c0cbb1211e4a9] locked for write operation: CREATE\r\n2022-10-06T19:41:09,550 [tables.TableManager] DEBUG: Creating ZooKeeper entries for new table bulk_dev_uk_2030907_1665085269455 (ID: 3s) in namespace (ID: +default)\r\n2022-10-06T19:41:09,560 [manager.EventCoordinator] INFO : Table state in zookeeper changed for 3s to NEW\r\n2022-10-06T19:41:09,581 [balancer.TableLoadBalancer] INFO : Loaded class org.apache.accumulo.core.spi.balancer.SimpleLoadBalancer for table 3s\r\n2022-10-06T19:41:09,603 [tables.TableManager] DEBUG: Transitioning state for table 3s from NEW to ONLINE\r\n2022-10-06T19:41:09,604 [manager.EventCoordinator] INFO : Table state in zookeeper changed for 3s to ONLINE\r\n2022-10-06T19:41:09,613 [tableOps.Utils] INFO : table 3s FATE[3d5c0cbb1211e4a9] unlocked for write\r\n2022-10-06T19:41:09,680 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:53720; action: compactTable; targetTable: 3s; targetNamespace: +default;\r\n2022-10-06T19:41:09,685 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:53712; action: compactTable; targetTable: 3s; targetNamespace: +default;\r\n2022-10-06T19:41:09,700 [tablet.location] DEBUG: Assigned 3s<< to localhost:9997[1000325bae30004]\r\n2022-10-06T19:41:09,730 [manager.EventCoordinator] INFO : tablet 3s<< was loaded on localhost:9997\r\n2022-10-06T19:41:09,731 [tableOps.Utils] INFO : table 3s FATE[68a7eab3013b5aaa] locked for read operation: COMPACT\r\n2022-10-06T19:41:09,751 [tableOps.Utils] INFO : table 3s FATE[71a8f902cf66da2a] locked for read operation: COMPACT\r\n2022-10-06T19:41:11,854 [schema.LinkingIterator] DEBUG: First tablet seen provides evidence of earlier tablet in range, retrying 3s;r0e773 [3s; : [] 9223372036854775807 false,3s<%00; : [] 9223372036854775807 false) \r\n2022-10-06T19:41:12,124 [manager.EventCoordinator] INFO : localhost:9997 reported split 3s;r0e773<, 3s<;r0e773\r\n2022-10-06T19:41:13,897 [schema.LinkingIterator] DEBUG: First tablet seen provides evidence of earlier tablet in range, retrying 3s;r057b6 [3s; : [] 9223372036854775807 false,3s<%00; : [] 9223372036854775807 false) \r\n2022-10-06T19:41:14,123 [manager.EventCoordinator] INFO : localhost:9997 reported split 3s;r057b6<, 3s;r0e773;r057b6\r\n2022-10-06T19:41:14,905 [manager.EventCoordinator] INFO : localhost:9997 reported split 3s;r11bf7;r0e773, 3s<;r11bf7\r\n2022-10-06T19:41:16,423 [manager.EventCoordinator] INFO : localhost:9997 reported split 3s;r0af73;r057b6, 3s;r0e773;r0af73\r\n2022-10-06T19:41:16,902 [schema.LinkingIterator] DEBUG: Tablets end row and prev end row not equals 3s;r11bf7;r0e773 3s<;r1391e \r\n2022-10-06T19:41:17,425 [manager.EventCoordinator] INFO : localhost:9997 reported split 3s;r1391e;r11bf7, 3s<;r1391e\r\n2022-10-06T19:41:18,168 [accumulo.audit] INFO : operation: permitted; user: root; client: 127.0.0.1:53712; action: mergeTable; targetTable: 3s; targetNamespace: +default;\r\n2022-10-06T19:41:18,168 [manager.Manager] DEBUG: Creating merge op: 3s from startRow: -inf to endRow: +inf\r\n2022-10-06T19:41:18,237 [tableOps.Utils] INFO : table 3s FATE[57d4471744875c60] locked for write operation: MERGE\r\n2022-10-06T19:41:18,242 [manager.EventCoordinator] INFO : Merge state of 3s<< set to STARTED\r\n2022-10-06T19:41:18,382 [manager.Manager] DEBUG: mergeInfo overlaps: 3s;r057b6< true\r\n```\r\n\r\nI added some logging to the tserver that will help verify the hypothesis and kicked the test off again.  Didn't see the problem again, but did see #3006.  Also noticed some of the bulk import random walk test are stuck this morning i have not had a chance to track that down. Going to keep trying to reproduce the problem with improved logging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271312449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271476193","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1271476193","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1271476193,"node_id":"IC_kwDOACaFSM5LyS_h","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T11:34:40Z","updated_at":"2022-10-07T11:34:40Z","author_association":"CONTRIBUTOR","body":"The current version of this change doesn't actually solve anything because as @ctubbsii pointed out the dependency is already transitive from accumulo-monitor. I can see the dependency is pulled in transitively both in Intellij and the command line and running tests from the test module from Intellij logging is working fine in the `test` module.\r\n\r\nHowever, where I do see a problem is other modules. For example, running BulkImporterTest doesn't have logging as there is not longer a transitive dependency on log4j-core for `server/base` module. \r\n\r\nI will go through and update the PR and push a commit to fix this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271476193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271525762","html_url":"https://github.com/apache/accumulo/pull/3000#issuecomment-1271525762","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3000","id":1271525762,"node_id":"IC_kwDOACaFSM5LyfGC","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T12:27:11Z","updated_at":"2022-10-07T12:27:11Z","author_association":"CONTRIBUTOR","body":"This has been fixed with my latest commit. Essentially, due to the bug, we have to add a test scope dependency for  `log4j-core` everywhere we already have a dependency for `log4j-slf4j2-impl` unless there is already a dependency on `accumulo-monitor` which pulls in `log4j-core` already. Notably, the `test` and `accumulo-minicluster` modules already pull in `accumulo-monitor` and don't need `log4j-core`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271525762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271619351","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1271619351","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1271619351,"node_id":"IC_kwDOACaFSM5Ly18X","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T13:47:56Z","updated_at":"2022-10-07T13:47:56Z","author_association":"CONTRIBUTOR","body":"> To that end, it may be useful to log that it was successful when a retry was performed.\r\n\r\n@dlmarion I added logging of when a an operation completed in 0c3bd62.  I also opened #3007 with something else i noticed and that issue has output from the new logging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271619351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271627346","html_url":"https://github.com/apache/accumulo/pull/2997#issuecomment-1271627346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2997","id":1271627346,"node_id":"IC_kwDOACaFSM5Ly35S","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T13:54:00Z","updated_at":"2022-10-07T13:54:00Z","author_association":"MEMBER","body":"@AlbertWhitlock These changes look good. The only other suggestion I have is to use `Functions.ajaxReloadTable()` throughout this file to reload the tables. Other than that, I think this is good to go.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271627346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271627601","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1271627601","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1271627601,"node_id":"IC_kwDOACaFSM5Ly39R","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T13:54:11Z","updated_at":"2022-10-07T13:54:11Z","author_association":"CONTRIBUTOR","body":"Looks good to me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271627601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271706513","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1271706513","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1271706513,"node_id":"IC_kwDOACaFSM5LzLOR","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T14:56:22Z","updated_at":"2022-10-07T14:58:58Z","author_association":"CONTRIBUTOR","body":"I've been able to pretty consistently in my IDE get the `PermissionsIT.systemPermissionsTest()` to fail with a CME. It's not every time but often. I ran the test against this branch and can confirm that this reliably fixes the test by doing a retry. Here is the output from the logs.\r\n\r\n```\r\n2022-10-07T10:49:48,842 [admin.TableOperations] DEBUG: Unable to modify table properties for PermissionsIT_systemPermissionsTest0__ALTER_TABLE_WITHOUT_PERM_TEST__ because of concurrent modification, retrying attempt 1 (suppressing retry messages for 180000ms)\r\n2022-10-07T10:49:48,843 [util.Retry] DEBUG: Sleeping for 25ms before retrying operation\r\n2022-10-07T10:49:48,876 [admin.TableOperations] DEBUG: Modifying properties for table PermissionsIT_systemPermissionsTest0__ALTER_TABLE_WITHOUT_PERM_TEST__ completed after 2 retries and is no longer retrying.\r\n2022-10-07T10:49:48,969 [functional.PermissionsIT] DEBUG: Confirming that the presence of the ALTER_TABLE permission properly permits the user\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271706513/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271711649","html_url":"https://github.com/apache/accumulo/pull/3003#issuecomment-1271711649","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3003","id":1271711649,"node_id":"IC_kwDOACaFSM5LzMeh","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T15:00:46Z","updated_at":"2022-10-07T15:00:46Z","author_association":"CONTRIBUTOR","body":"> Changing the node name so that they match would require additional changes that would include removing the legacy node. It was easier now to keep the existing convention. I would suggest a follow-on PR. It is mainly going to be changes in the ConfigurationTransform code.\r\n> \r\n> A higher priority right now should be working to trace down the concurrency issues with multiple property updates - once those are resolved, this could be revisited.\r\n\r\nTests pass with the latest in PR #2967, See my comment here: https://github.com/apache/accumulo/pull/2967#issuecomment-1271706513","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271711649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271771154","html_url":"https://github.com/apache/accumulo/pull/3003#issuecomment-1271771154","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3003","id":1271771154,"node_id":"IC_kwDOACaFSM5LzbAS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T15:56:13Z","updated_at":"2022-10-07T15:56:13Z","author_association":"CONTRIBUTOR","body":"This change doesn't make sense to me to merge in now as it seems too late to be making a change like this with the 2.1.0 release being imminent. I would think it would be better to wait until the next version for this change and at the same time we can also rename system scope to be consistent with the others.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271771154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271778414","html_url":"https://github.com/apache/accumulo/pull/3003#issuecomment-1271778414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3003","id":1271778414,"node_id":"IC_kwDOACaFSM5Lzcxu","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T16:02:55Z","updated_at":"2022-10-07T16:02:55Z","author_association":"CONTRIBUTOR","body":"Also if the reason to do it now would be that changing it later requires doing some upgrading/migration to the property store then that could just be part of the migration that needs to be done anyways if we rename the system level node from config to conf.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271778414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271803163","html_url":"https://github.com/apache/accumulo/pull/2967#issuecomment-1271803163","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2967","id":1271803163,"node_id":"IC_kwDOACaFSM5Lzi0b","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T16:28:32Z","updated_at":"2022-10-07T16:28:32Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - thoughts on merging this? Are you waiting on anything in particular?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1271803163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272024544","html_url":"https://github.com/apache/accumulo/issues/2667#issuecomment-1272024544","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2667","id":1272024544,"node_id":"IC_kwDOACaFSM5L0Y3g","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T19:37:22Z","updated_at":"2022-10-07T19:37:22Z","author_association":"CONTRIBUTOR","body":"> I was able to reproduce this yesterday. It seems like the same situation that was speculated as a cause in an earlier comment, a compaction of an empty tablet followed by a close.\r\n\r\nInteresting. I am going to try to write a test to reproduce it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272024544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272041559","html_url":"https://github.com/apache/accumulo/issues/3010#issuecomment-1272041559","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3010","id":1272041559,"node_id":"IC_kwDOACaFSM5L0dBX","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T20:00:34Z","updated_at":"2022-10-07T20:00:34Z","author_association":"CONTRIBUTOR","body":"Looking at [this](https://github.com/apache/accumulo/blob/main/shell/src/main/java/org/apache/accumulo/shell/commands/ConfigCommand.java#L155) ConfigCommand in the Shell retrieves the Site, System, Namespace, and Table configurations to print out the table configuration. Also, looking at the list of permissions ALTER_NAMESPACE was missing for the root user on the default namespace and the accumulo namespace. We didn't add the ALTER_NAMESPACE permission in the tests for the default namespace in #2994, but I think I assume that the ALTER_NAMESPACE permission would be their for the accumulo namespace. \r\n\r\nI added those permissions and things worked:\r\n```\r\nroot@accumulo-testing> grant Namespace.ALTER_NAMESPACE -ns \"\" -u root\r\nroot@accumulo-testing> grant Namespace.ALTER_NAMESPACE -ns accumulo -u root\r\nroot@accumulo-testing> config -t ci\r\n-----------+---------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                        | VALUE\r\n-----------+---------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\ndefault    | table.balancer ............................ | org.apache.accumulo.core.spi.balancer.SimpleLoadBalancer\r\n```\r\n\r\nI feel like two things should happen from this:\r\n\r\n1. The root user should get the ALTER_NAMESPACE permission (and maybe others) on the `accumulo` namespace.\r\n2. The logic for getting the different configuration information in ConfigCommand should be moved server-side. If we leave it in the Shell, then we need to back out the changes in #2994. However, if we leave it in the shell, then we are exposing information about the site and system configuration to *all* users.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272041559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272069074","html_url":"https://github.com/apache/accumulo/issues/3010#issuecomment-1272069074","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3010","id":1272069074,"node_id":"IC_kwDOACaFSM5L0jvS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T20:38:46Z","updated_at":"2022-10-07T22:10:58Z","author_association":"CONTRIBUTOR","body":"~~If we grant the root user the ALTER_NAMESPACE permission then wouldn't that fix things and allow us to keep the logic in the shell? It worked once you granted the proper permissions as the root user would have access. I only briefly looked at this but trying to figure out why the changes would need to get moved to the server if the user running the shell had the proper permissions granted.~~ \r\n\r\nEditing my comment because obviously a non root user could use the shell and could want to get config information for their table/namespaces they have access to.\r\n\r\nLooking at this more, all the properties are gathered in order of precedence (default, site, system, table, etc) and then printed out for matching table properties so it lists at what level it's set at. So, currently the user should only need access to matching table properties from site, system, etc and not everything so moving it to the server site to handle this and only returning relevant values for the table could work so we don't leak everything.\r\n\r\nI can go ahead and work on this some today/tomorrow. The main thing is moving the logic to the server side that computes the level the properties were set at and then returning that data along with the configs (maybe an enum or something) so we would just need a new RPC call that would tag each config that gets returned as part of getTableConfiguration() with the level the property was set (default, site, system, etc)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272069074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272106302","html_url":"https://github.com/apache/accumulo/issues/1434#issuecomment-1272106302","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1434","id":1272106302,"node_id":"IC_kwDOACaFSM5L0s0-","user":{"login":"ice1000","id":16398479,"node_id":"MDQ6VXNlcjE2Mzk4NDc5","avatar_url":"https://avatars.githubusercontent.com/u/16398479?v=4","gravatar_id":"","url":"https://api.github.com/users/ice1000","html_url":"https://github.com/ice1000","followers_url":"https://api.github.com/users/ice1000/followers","following_url":"https://api.github.com/users/ice1000/following{/other_user}","gists_url":"https://api.github.com/users/ice1000/gists{/gist_id}","starred_url":"https://api.github.com/users/ice1000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ice1000/subscriptions","organizations_url":"https://api.github.com/users/ice1000/orgs","repos_url":"https://api.github.com/users/ice1000/repos","events_url":"https://api.github.com/users/ice1000/events{/privacy}","received_events_url":"https://api.github.com/users/ice1000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T21:38:26Z","updated_at":"2022-10-07T21:38:26Z","author_association":"NONE","body":"JCommander has a substitute called picocli which supports jpms.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272106302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272147497","html_url":"https://github.com/apache/accumulo/pull/3009#issuecomment-1272147497","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3009","id":1272147497,"node_id":"IC_kwDOACaFSM5L024p","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T23:02:02Z","updated_at":"2022-10-07T23:02:02Z","author_association":"CONTRIBUTOR","body":"Full ITs passed so I'm going to go ahead and merge this for now but it may need to be reverted depending on what we do about #3010 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272147497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272155104","html_url":"https://github.com/apache/accumulo/issues/3010#issuecomment-1272155104","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3010","id":1272155104,"node_id":"IC_kwDOACaFSM5L04vg","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-07T23:21:42Z","updated_at":"2022-10-07T23:21:42Z","author_association":"CONTRIBUTOR","body":"I spent some time prototyping a server side change and the change would be a decent sized change as we'd need to update the API with a new RPC call (probably multiple for both namespace and tables) and handle all the logic the shell is doing to figure out where the properties came from and then return that information (likely associating an enum value for where the config is applied). I think a change that extensive would be better for 3.0 and not 2.1 if we wanted to go that path and would probably generate some discussion on the API and shouldn't be rushed.\r\n\r\nAfter talking to @dlmarion a bit I think another approach for now (which would avoid having to revert the permissions checks) would be to simply not show the level where the properties came from if the user doesn't have permission when they provide a table or namespace. The call for getTableConfiguration() already gets all the properties merged together and that is really what the user cares about if they want to view a table config. The user also has permission to view defaults. So if a user doesn't have permission to view site or system or namespace configuration when we display the table we could just show any property that was not set specifically on the table as \"default\" and not the exact level it came from.\r\n\r\nFor admin users (or other users with permissions) that can view the Site/System config, etc we can still display the existing information. This check could be done as simply as try/catch on those calls to detect if they can view it.\r\n\r\nI will work on a PR tomorrow that will modify the command to just skip over the get site, system, namespace, etc calls if there is no permission to view them and show default instead. My thinking is if any of those calls failed we'd just switch \"modes\" and just show \"default\" if not set on the table or namespace they wanted to see. \r\n\r\nThe other option is to just revert #2994 but I do think it would be a good idea to not allow all users without to look up the full configs for system and site.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272155104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272316692","html_url":"https://github.com/apache/accumulo/pull/3011#issuecomment-1272316692","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3011","id":1272316692,"node_id":"IC_kwDOACaFSM5L1gMU","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-08T13:13:25Z","updated_at":"2022-10-08T15:03:30Z","author_association":"CONTRIBUTOR","body":"There were 2 problems here that I fixed with permissions.\r\n\r\n1. The first was that while `ALTER_NAMESPACE` was initially set in the map for the root user namespace permissions on the Accumulo namespace, right after that the `ALTER_TABLE` was added by calling put again using the same key and a singleton set so it was blowing away the first permission where as they need to be added to the same set. So I fixed that so both `ALTER_NAMESPACE` and `ALTER_TABLE` are properly added to the Accumulo namespace.\r\n2. The ALTER_NAMESPACE permission needs to be added to the Default namespace for configs to be read by the root user for tables under that namespace.\r\n\r\nHere is the output after this change:\r\n```\r\nroot@uno> userpermissions \r\nSystem permissions: System.GRANT, System.CREATE_TABLE, System.DROP_TABLE, System.ALTER_TABLE, System.CREATE_USER, System.DROP_USER, System.ALTER_USER, System.SYSTEM, System.CREATE_NAMESPACE, System.DROP_NAMESPACE, System.ALTER_NAMESPACE, System.OBTAIN_DELEGATION_TOKEN\r\n\r\nNamespace permissions (): Namespace.ALTER_NAMESPACE\r\nNamespace permissions (accumulo): Namespace.READ, Namespace.ALTER_NAMESPACE, Namespace.ALTER_TABLE\r\n\r\nTable permissions (accumulo.metadata): Table.READ, Table.ALTER_TABLE\r\nTable permissions (accumulo.replication): Table.READ\r\nTable permissions (accumulo.root): Table.READ, Table.ALTER_TABLE\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272316692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272317059","html_url":"https://github.com/apache/accumulo/issues/3010#issuecomment-1272317059","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3010","id":1272317059,"node_id":"IC_kwDOACaFSM5L1gSD","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-08T13:15:16Z","updated_at":"2022-10-08T13:15:16Z","author_association":"CONTRIBUTOR","body":"I fixed the first permission issue for the root user in this PR https://github.com/apache/accumulo/pull/3011\r\nThere was a bug for the accumulo namespace and default namespace was not set at all","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272317059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272331697","html_url":"https://github.com/apache/accumulo/issues/3010#issuecomment-1272331697","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3010","id":1272331697,"node_id":"IC_kwDOACaFSM5L1j2x","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-08T14:24:38Z","updated_at":"2022-10-08T14:28:14Z","author_association":"CONTRIBUTOR","body":"@dlmarion pointed out that root user shouldn't have access to Namespace.READ on the default namespace so I'm updating my PR to remove that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272331697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272337742","html_url":"https://github.com/apache/accumulo/pull/3011#issuecomment-1272337742","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3011","id":1272337742,"node_id":"IC_kwDOACaFSM5L1lVO","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-08T15:00:09Z","updated_at":"2022-10-08T15:00:09Z","author_association":"CONTRIBUTOR","body":"As another note I noticed that the table `accumulo.replication` does not have `Table.ALTER_TABLE` permissions so its config can't be read by default by the root user. Not sure if we need to fix that or not since it's a deprecated table anyways.\r\n\r\nAlso, obviously, the root user will now need `ALTER_NAMESPACE` permission on any created namespace going forward to be able to read configs, etc.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272337742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272361510","html_url":"https://github.com/apache/accumulo/pull/3012#issuecomment-1272361510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3012","id":1272361510,"node_id":"IC_kwDOACaFSM5L1rIm","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-08T17:15:35Z","updated_at":"2022-10-08T17:26:21Z","author_association":"CONTRIBUTOR","body":"This is a draft/prototype of just using default configs for determining the level of overrides for properties for users that don't have access to site/system configs after the changes in #2994 .\r\n\r\nIt probably still needs a bit of work (hence draft status) but I wanted to get some feedback on what people think and if this is what we want to do to solve the problem or if we want to do something else. I probably won't have a lot of time to work on this again until Friday and next weekend so if someone wants to take this over and polish it up feel free as it's a blocker for 2.1.0, assuming this is the direction we want to go in.\r\n\r\nIf this is not the strategy we want then as I mentioned previously in #3010, the other 2 possibilities would be:\r\n1. Move the logic for determining the overrides for the config to the server, which would require a lot more changes including to the API and RPC layer to return the information for the properties and what level they were applied. I think this is a bit late for version 2.1.0 to make those changes but if it's something we want to do and there is time I could work on that instead.\r\n2. Revert back the permissions checks entirely and then make the changes for 3.0 (either client side like this or handle it server side)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272361510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272362665","html_url":"https://github.com/apache/accumulo/issues/3010#issuecomment-1272362665","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3010","id":1272362665,"node_id":"IC_kwDOACaFSM5L1rap","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-08T17:22:31Z","updated_at":"2022-10-08T17:22:31Z","author_association":"CONTRIBUTOR","body":"Ok, I'm out of time for today but submitted 2 PRs to address this as linked, #3011 and #3012. When testing #3012 it's best to also merge in #3011.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1272362665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274371667","html_url":"https://github.com/apache/accumulo/issues/2736#issuecomment-1274371667","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2736","id":1274371667,"node_id":"IC_kwDOACaFSM5L9V5T","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T09:12:30Z","updated_at":"2022-10-11T09:12:30Z","author_association":"CONTRIBUTOR","body":"I believe in PR #2215, I did fix this. I did not realize it was something\nthat happened against main though.\n\nOn Thu, May 26, 2022 at 9:38 AM Mike Miller ***@***.***>\nwrote:\n\n> Running the fate command in the shell fate print with only one sub\n> command will give:\n>\n> 2022-05-26T09:32:06,812 [shell.Shell] DEBUG: java.lang.NullPointerException\n> java.lang.NullPointerException: null\n> \tat org.apache.accumulo.shell.commands.FateCommand.printTx(FateCommand.java:223) ~[accumulo-shell-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\n> \tat org.apache.accumulo.shell.commands.FateCommand.execute(FateCommand.java:178) ~[accumulo-shell-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\n> \tat org.apache.accumulo.shell.Shell.execCommand(Shell.java:774) ~[accumulo-shell-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\n> \tat org.apache.accumulo.shell.Shell.start(Shell.java:593) ~[accumulo-shell-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\n> \tat org.apache.accumulo.shell.Shell.execute(Shell.java:524) ~[accumulo-shell-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\n> \tat org.apache.accumulo.start.Main.lambda$execKeyword$0(Main.java:126) ~[accumulo-start-2.1.0-SNAPSHOT.jar:2.1.0-SNAPSHOT]\n> \tat java.lang.Thread.run(Thread.java:829) ~[?:?]\n>\n> It works if you put anything as the 3rd argument: fate -print 1234\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/2736>, or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSV5356RKS54ZBBN4UKLVL55FLANCNFSM5XBG3ULA>\n> .\n> You are receiving this because you are subscribed to this thread.Message\n> ID: ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274371667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274388160","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1274388160","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1274388160,"node_id":"IC_kwDOACaFSM5L9Z7A","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T09:21:38Z","updated_at":"2022-10-11T09:21:38Z","author_association":"CONTRIBUTOR","body":"It depends on what the issue is. #2215 did fix some issues after I\ninitially resolved some merge conflicts. Unsure on how new this particular\nbug is though.\n\nOn Fri, Jun 3, 2022 at 9:32 AM Mike Miller ***@***.***> wrote:\n\n> Is this reproduced with the changes in PR #2215\n> <https://github.com/apache/accumulo/pull/2215>?\n>\n> I haven't tested it with your branch but if it is up to date then I think\n> it would have the same problem.\n>\n> When I was originally testing, I found that timing was important for the\n> fate -list command. I usually added a timer during table creation in order\n> to see a fate transaction taking place. Otherwise, the transaction finished\n> before I could print/ do other fate commands to it.\n>\n> Right, it is tricky to get the timing. I found it helps if you use the\n> SlowIterator on a compaction. This requires the test jar and can be done\n> using these commands:\n>\n> config -t ci -s table.iterator.majc.slow=1,org.apache.accumulo.test.functional.SlowIterator\n> config -t ci -s table.iterator.majc.slow.opt.sleepTime=5\n>\n> It helps to cancel compactions on the table first too then run a user\n> compaction. Fate TX will only be created for user initiated compaction. I\n> just confirmed this again on main using the SlowIterator:\n>\n> [zk: localhost:2181(CONNECTED) 2] ls /accumulo/af1770d1-ffa1-4373-95f9-d715b11d70dd/fate\n> [tx_50704e650c56e804]\n> [zk: localhost:2181(CONNECTED) 3] get /accumulo/af1770d1-ffa1-4373-95f9-d715b11d70dd/fate/tx_50704e650c56e804\n> IN_PROGRESS\n> ***@***.*** ci> fate -print 50704e650c56e804\n> 2022-06-03T09:26:32,409 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\n>  0 transactions\n> ***@***.*** ci> fate -print 50704e650c56e804\n> 2022-06-03T09:30:27,019 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\n>  0 transactions\n> ***@***.*** ci> fate -print\n> 2022-06-03T09:30:31,987 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\n>  0 transactions\n> ***@***.*** ci> fate -list\n> 2022-06-03T09:30:34,832 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/mpmill4/workspace/uno/install/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\n>  0 transactions\n>\n> —\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/2754#issuecomment-1145969873>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AHASSV5TVFSKSWAMFHAKSG3VNICORANCNFSM5XYNIFDQ>\n> .\n> You are receiving this because you commented.Message ID:\n> ***@***.***>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274388160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274529634","html_url":"https://github.com/apache/accumulo/pull/3013#issuecomment-1274529634","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3013","id":1274529634,"node_id":"IC_kwDOACaFSM5L98di","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T11:22:58Z","updated_at":"2022-10-11T11:22:58Z","author_association":"CONTRIBUTOR","body":"I don't know this area of the code well, did these changes fix the issue (did you test it already?). I kicked off a full IT build for this branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274529634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274571108","html_url":"https://github.com/apache/accumulo/pull/3013#issuecomment-1274571108","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3013","id":1274571108,"node_id":"IC_kwDOACaFSM5L-Glk","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T12:00:36Z","updated_at":"2022-10-11T12:00:36Z","author_association":"CONTRIBUTOR","body":"> I don't know this area of the code well, did these changes fix the issue (did you test it already?). I kicked off a full IT build for this branch.\r\n\r\nThe IT I added in the PR would cause the issue to happen.  Without the fix the IT would get stuck.  After adding the fix it would succeed.   I just kicked off another round of Bulk RW test with this change, it was causing the walkers to get stuck.  Going to see how that goes.\r\n\r\nWhen it did get stuck would see lots of log messages like the following in the tserver logs over and over.\r\n\r\n```\r\n2022-10-10T16:27:10,577 [tablet.CompactableImpl] DEBUG: Selected files not in all files [hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jt.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jv.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ml/I00010mm.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k2/I00010k4.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000xmg/A0000zrs.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ji/I00010jk.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000xl5/A0000ztw.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000zyu/C000119j.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jm.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ll/I00010ln.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ll/I00010lp.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jf/I00010jg.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k6/I00010k8.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010js.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jq.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000zyu/C00011ul.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k2/I00010k3.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jn.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k6/I00010k7.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jf/I00010jh.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k6/I00010k9.rf] [hdfs://localhost:8020/accumulo/tables/f/b-00010jf/I00010jg.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jf/I00010jh.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ji/I00010jk.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jm.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jn.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jq.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010js.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jt.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010jj/I00010jv.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k2/I00010k3.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k2/I00010k4.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k6/I00010k7.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k6/I00010k8.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010k6/I00010k9.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ll/I00010ln.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ll/I00010lp.rf, hdfs://localhost:8020/accumulo/tables/f/b-00010ml/I00010mm.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000xl5/A0000ztw.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000xmg/A0000zrs.rf, hdfs://localhost:8020/accumulo/tables/f/t-0000zyu/C000119j.rf]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274571108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274583797","html_url":"https://github.com/apache/accumulo/pull/3013#issuecomment-1274583797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3013","id":1274583797,"node_id":"IC_kwDOACaFSM5L-Jr1","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T12:10:59Z","updated_at":"2022-10-11T12:10:59Z","author_association":"CONTRIBUTOR","body":"I also ran all of the compaction ITs I could find and those passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274583797/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274697183","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1274697183","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1274697183,"node_id":"IC_kwDOACaFSM5L-lXf","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T13:35:32Z","updated_at":"2022-10-11T13:39:10Z","author_association":"CONTRIBUTOR","body":"@cshannon  - this is an alternate to your # 2 . For the `root` user, I gave the permission `Namespace.ALTER_NAMESPACE` on the `accumulo` namespace manually. The configuration's printed normally for:\r\n\r\n```\r\nconfig\r\nconfig -ns accumulo\r\nconfig -t accumulo.metadata\r\n```\r\n\r\nI also created another user and this is what it looks like:\r\n\r\n```\r\nroot@test> createuser dave\r\nEnter new password for 'dave': ****\r\nPlease confirm new password for 'dave': ****\r\nroot@test> grant System.CREATE_NAMESPACE -s -u dave\r\nroot@test> user dave\r\nEnter password for user dave: ****\r\ndave@test> createnamespace dtest\r\ndave@test> createtable dtest.foo\r\ndave@test dtest.foo> config -t dtest.foo\r\n2022-10-11T13:27:14,891 [shell.Shell] WARN : System Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n2022-10-11T13:27:14,893 [shell.Shell] WARN : Site Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                                               | VALUE\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\nnamespace  | table.balancer ................................................... | org.apache.accumulo.core.spi.balancer.SimpleLoadBalancer\r\nnamespace  | table.bloom.enabled .............................................. | false\r\nnamespace  | table.bloom.error.rate ........................................... | 0.5%\r\nnamespace  | table.bloom.hash.type ............................................ | murmur\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274697183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274875796","html_url":"https://github.com/apache/accumulo/pull/3013#issuecomment-1274875796","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3013","id":1274875796,"node_id":"IC_kwDOACaFSM5L_Q-U","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T15:23:08Z","updated_at":"2022-10-11T15:23:08Z","author_association":"CONTRIBUTOR","body":"Full IT build passed with no test failures.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274875796/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274905406","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1274905406","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1274905406,"node_id":"IC_kwDOACaFSM5L_YM-","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T15:42:33Z","updated_at":"2022-10-11T15:42:33Z","author_association":"CONTRIBUTOR","body":"I am late to this, but it seems less important to display a value because that's what the users can see vs. what is set.  With the example above, if `table.bloom.enabled=true` was set at a level that the user cannot \"see\" - would it show that it was a) set to true somewhere, b) lie to the uses and say the value was \"false\", c) show that that value cannot be displayed because of permissions or d) just fail the entire command.\r\n\r\nIt seems that c) or d) are the only valid choices - we cannot display a value that is not what is used - even if there's a warning at the beginning - so b should be right out.  Allowing a seems a way to get around permissions that might not be ideal, but at least reflects the actual state of the system.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274905406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274916162","html_url":"https://github.com/apache/accumulo/issues/2754#issuecomment-1274916162","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2754","id":1274916162,"node_id":"IC_kwDOACaFSM5L_a1C","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T15:50:38Z","updated_at":"2022-10-11T15:50:38Z","author_association":"CONTRIBUTOR","body":"I believe that it was \"fixed\" at the time - but since then the FATE command and the tests have moved to Admin - so that could have either introduced something new, invalidated the fix or maybe not.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274916162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274918245","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1274918245","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1274918245,"node_id":"IC_kwDOACaFSM5L_bVl","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T15:52:16Z","updated_at":"2022-10-11T15:52:16Z","author_association":"CONTRIBUTOR","body":"@EdColeman - I'm pretty sure the way that it works is the following:\r\n\r\nThe user will enter a command in the shell, one of:\r\n```\r\nconfig -t <table>\r\nconfig -ns <namespace>\r\nconfig\r\n```\r\n\r\nThe user making the call will need the correct permissions on the object for which they are requesting the configuration information (table, namespace, system). If they don't have the permissions to see that, then they will get an error. The ConfigCommand also gets the configuration information at levels above what are requested solely for the purpose of showing the user what the value is at the higher level (and marking the current value with overridden). For example, if a user enters `config -t <table>`, then ConfigCommand also gets the site, system, and namespace configurations. If the user can't see the system/site configuration, but can see the namespace and table configuration, then that's all they will see as in my example above.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274918245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274919986","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1274919986","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1274919986,"node_id":"IC_kwDOACaFSM5L_bwy","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T15:53:39Z","updated_at":"2022-10-11T15:53:39Z","author_association":"CONTRIBUTOR","body":"> With the example above, if table.bloom.enabled=true was set at a level that the user cannot \"see\" - would it show that it was a) set to true somewhere, b) lie to the uses and say the value was \"false\", c) show that that value cannot be displayed because of permissions or d) just fail the entire command.\r\n\r\nI'm pretty sure the answer is 'a' here.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274919986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274929529","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1274929529","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1274929529,"node_id":"IC_kwDOACaFSM5L_eF5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T16:00:40Z","updated_at":"2022-10-11T16:00:40Z","author_association":"CONTRIBUTOR","body":"```\r\nroot@test> config -s table.bloom.enabled=true\r\nroot@test> config -f bloom\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                 | VALUE\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\ndefault    | table.bloom.enabled ................ | false\r\nsystem     |    @override ....................... | true\r\ndefault    | table.bloom.error.rate ............. | 0.5%\r\ndefault    | table.bloom.hash.type .............. | murmur\r\ndefault    | table.bloom.key.functor ............ | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\ndefault    | table.bloom.load.threshold ......... | 1\r\ndefault    | table.bloom.size ................... | 1048576\r\ndefault    | tserver.bloom.load.concurrent.max .. | 4\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nroot@test> config -t accumulo.metadata -f bloom\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                 | VALUE\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\ndefault    | table.bloom.enabled ................ | false\r\nsystem     |    @override ....................... | true\r\ndefault    | table.bloom.error.rate ............. | 0.5%\r\ndefault    | table.bloom.hash.type .............. | murmur\r\ndefault    | table.bloom.key.functor ............ | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\ndefault    | table.bloom.load.threshold ......... | 1\r\ndefault    | table.bloom.size ................... | 1048576\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nroot@test> user dave\r\nEnter password for user dave: ****\r\ndave@test> config -ns dtest -f bloom\r\n2022-10-11T15:57:16,072 [shell.Shell] WARN : System Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n2022-10-11T15:57:16,074 [shell.Shell] WARN : Site Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                 | VALUE\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nnamespace  | table.bloom.enabled ................ | true\r\nnamespace  | table.bloom.error.rate ............. | 0.5%\r\nnamespace  | table.bloom.hash.type .............. | murmur\r\nnamespace  | table.bloom.key.functor ............ | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\nnamespace  | table.bloom.load.threshold ......... | 1\r\nnamespace  | table.bloom.size ................... | 1048576\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\ndave@test> config -t dtest.foo -f bloom\r\n2022-10-11T15:59:07,671 [shell.Shell] WARN : System Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n2022-10-11T15:59:07,672 [shell.Shell] WARN : Site Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                 | VALUE\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\ndefault    | table.bloom.enabled ................ | false\r\nnamespace  |    @override ....................... | true\r\ndefault    | table.bloom.error.rate ............. | 0.5%\r\nnamespace  |    @override ....................... | 0.5%\r\ndefault    | table.bloom.hash.type .............. | murmur\r\nnamespace  |    @override ....................... | murmur\r\ndefault    | table.bloom.key.functor ............ | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\nnamespace  |    @override ....................... | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\ndefault    | table.bloom.load.threshold ......... | 1\r\nnamespace  |    @override ....................... | 1\r\ndefault    | table.bloom.size ................... | 1048576\r\nnamespace  |    @override ....................... | 1048576\r\n-----------+--------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n```\r\n\r\nIn the last config print I'm working on a change showing the overrides from the default configuration when the user can't see the system & site config. I have some work to do, but you can see the change there. I think this shows that the answer is `a`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1274929529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1275021451","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1275021451","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1275021451,"node_id":"IC_kwDOACaFSM5L_0iL","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T17:17:21Z","updated_at":"2022-10-11T17:17:21Z","author_association":"CONTRIBUTOR","body":"In 4bd6b14 I made some modifications for users **without** the SystemPermission.SYSTEM permission. Before this commit, the password properties were shown. Now, `config` returns:\r\n\r\n```\r\ndave@test> config\r\n2022-10-11T17:14:59,695 [shell.Shell] WARN : System Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n2022-10-11T17:14:59,697 [shell.Shell] WARN : Site Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                                               | VALUE\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\n```\r\n\r\nI also modified the namespace and table displays to include the default values if they were different from the current value.\r\n\r\n```\r\ndave@test> config -ns dtest -f bloom\r\n2022-10-11T17:16:34,294 [shell.Shell] WARN : System Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n2022-10-11T17:16:34,296 [shell.Shell] WARN : Site Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                                               | VALUE\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\ndefault    | table.bloom.enabled .............................................. | false\r\nnamespace  |    @override ..................................................... | true\r\nnamespace  | table.bloom.error.rate ........................................... | 0.5%\r\nnamespace  | table.bloom.hash.type ............................................ | murmur\r\nnamespace  | table.bloom.key.functor .......................................... | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\nnamespace  | table.bloom.load.threshold ....................................... | 1\r\nnamespace  | table.bloom.size ................................................. | 1048576\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\n```\r\n\r\n```\r\ndave@test> config -t dtest.foo -f bloom\r\n2022-10-11T17:17:06,809 [shell.Shell] WARN : System Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n2022-10-11T17:17:06,810 [shell.Shell] WARN : Site Configuration: Error PERMISSION_DENIED for user dave - User does not have permission to perform this action\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\nSCOPE      | NAME                                                               | VALUE\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\ndefault    | table.bloom.enabled .............................................. | false\r\nnamespace  |    @override ..................................................... | true\r\ntable      |    @override ..................................................... | false\r\nnamespace  | table.bloom.error.rate ........................................... | 0.5%\r\nnamespace  | table.bloom.hash.type ............................................ | murmur\r\nnamespace  | table.bloom.key.functor .......................................... | org.apache.accumulo.core.file.keyfunctor.RowFunctor\r\nnamespace  | table.bloom.load.threshold ....................................... | 1\r\nnamespace  | table.bloom.size ................................................. | 1048576\r\n-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1275021451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1275251184","html_url":"https://github.com/apache/accumulo/pull/3012#issuecomment-1275251184","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3012","id":1275251184,"node_id":"IC_kwDOACaFSM5MAsnw","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T20:40:30Z","updated_at":"2022-10-11T20:40:30Z","author_association":"CONTRIBUTOR","body":"Right, it definitely opened up a can of worms with the permissions stuff when locked down so that's why one of the options was to just revert this entirely. @dlmarion has a PR with #3015 which is a lot less changes that could be another option ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1275251184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1275254461","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1275254461","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1275254461,"node_id":"IC_kwDOACaFSM5MAta9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-11T20:43:40Z","updated_at":"2022-10-11T20:43:40Z","author_association":"CONTRIBUTOR","body":"I'm fine with punting on this post-2.1, but I don't understand why we would give a non-privileged user the ability to see how the instance and the server is configured. For example, paths to keys.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1275254461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1276263331","html_url":"https://github.com/apache/accumulo/pull/3015#issuecomment-1276263331","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3015","id":1276263331,"node_id":"IC_kwDOACaFSM5MEjuj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-12T14:21:33Z","updated_at":"2022-10-12T14:21:33Z","author_association":"CONTRIBUTOR","body":"> If we're going to move forward with this, with warnings, then we can at least ensure that the warning explains to the user what the implications are in the output... like all changes shown might actually be set at a different (unseen) level that the user doesn't have permission. But then, that demonstrates, that at least for the properties that can be set at the table level, having permission on a table, allows you to probe the hidden levels anyway... so what exactly is this protecting?\r\n\r\n\r\nI'm not sure that I understand the concern here. If a user asks for a table configuration, and is shown the actual table configuration, does it matter whether the table property value was inherited from the namespace or system configuration? The user requesting the system, namespace, or table configuration has the ability to change the values if they need to be changed. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1276263331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1276417168","html_url":"https://github.com/apache/accumulo/pull/3012#issuecomment-1276417168","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3012","id":1276417168,"node_id":"IC_kwDOACaFSM5MFJSQ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-12T16:06:49Z","updated_at":"2022-10-12T16:06:49Z","author_association":"CONTRIBUTOR","body":"Closing this as it looks like we will be going with #3015 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1276417168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]