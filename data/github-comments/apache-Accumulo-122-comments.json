[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758336501","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1758336501","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1758336501,"node_id":"IC_kwDOACaFSM5ozhX1","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:01:15Z","updated_at":"2023-10-11T19:01:15Z","author_association":"CONTRIBUTOR","body":"Discussed this issue with @cshannon and @DomGarguilo  and we were not sure if would be best to take an exclusive or inclusive approach when creating the set of working test.  Should we list the test that work or exclude the test that do not work?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758336501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758341134","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1758341134","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1758341134,"node_id":"IC_kwDOACaFSM5ozigO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:04:58Z","updated_at":"2023-10-11T19:04:58Z","author_association":"CONTRIBUTOR","body":"Once all the test in elasticity are working we can remove whatever was added to create this set.  So the set would be be a temporary build addition.  If we create an initial PR to bootstrap this, then we can also create an issue about removing whatever was added.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758341134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758352418","html_url":"https://github.com/apache/accumulo/pull/3833#issuecomment-1758352418","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3833","id":1758352418,"node_id":"IC_kwDOACaFSM5ozlQi","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:10:02Z","updated_at":"2023-10-11T19:11:54Z","author_association":"MEMBER","body":"Did the serialization of these jsons change? This seems to suggest that they are now serialized with the escape characters.\r\n\r\nThe issue with the failing test case is how the test json is being created using `createSelectedFilesJson()`. I can make a PR against your branch to try to change this method to use GSON to construct this json to see if it solves the issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758352418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758353794","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1758353794","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1758353794,"node_id":"IC_kwDOACaFSM5ozlmC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:10:14Z","updated_at":"2023-10-11T19:10:14Z","author_association":"CONTRIBUTOR","body":"> We might need to add some wait/retry logic for the expected states.\r\n\r\nI will  make testTableProps retry.  Also remembered I had left a TODO about a different issue w/ eventual consistency in the test, need to address that also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758353794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758374476","html_url":"https://github.com/apache/accumulo/pull/3833#issuecomment-1758374476","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3833","id":1758374476,"node_id":"IC_kwDOACaFSM5ozqpM","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:16:22Z","updated_at":"2023-10-11T19:17:04Z","author_association":"CONTRIBUTOR","body":"I think the problem is the `SelectedFilesTypeAdapter` is including the json metadata string as part of the new json so it's escaping it. I tried to convert the spot where it was outputting the json to use `out.jsonValue(file);` instead of [out.value(file)](https://github.com/cshannon/accumulo/blob/3d92a635be6f341000899975e0f2129bb884ee6d/core/src/main/java/org/apache/accumulo/core/metadata/schema/SelectedFiles.java#L72) but now it gets a conditional mutation violation error on testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758374476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758384969","html_url":"https://github.com/apache/accumulo/pull/3833#issuecomment-1758384969","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3833","id":1758384969,"node_id":"IC_kwDOACaFSM5oztNJ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:22:47Z","updated_at":"2023-10-11T19:24:10Z","author_association":"CONTRIBUTOR","body":"> Did the serialization of these jsons change? This seems to suggest that they are now serialized with the escape characters.\r\n> \r\n> The issue with the failing test case is how the test json is being created using `createSelectedFilesJson()`. I can make a PR against your branch to try to change this method to use GSON to construct this json to see if it solves the issue.\r\n\r\n@DomGarguilo - Actually I think you are right, i think this is just a test issue. We do want to escape it as it's embedded json and that is fine. The test just needs to account for it. I can make the change real fast.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758384969/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758387375","html_url":"https://github.com/apache/accumulo/pull/3833#issuecomment-1758387375","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3833","id":1758387375,"node_id":"IC_kwDOACaFSM5oztyv","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:24:27Z","updated_at":"2023-10-11T19:24:27Z","author_association":"CONTRIBUTOR","body":"Try the following:\r\n\r\n```\r\npublic static String createSelectedFilesJson(Long txid, boolean selAll,\r\n      Collection<String> paths) {\r\n    String filesJsonArray = GSON.get().toJson(paths);\r\n    String formattedTxid = FateTxId.formatTid(Long.parseLong(Long.toString(txid), 16));\r\n    return (\"{'txid':'\" + formattedTxid + \"','selAll':\" + selAll + \",'files':\" + filesJsonArray\r\n        + \"}\").replace('\\'', '\\\"');\r\n  }\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758387375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758394180","html_url":"https://github.com/apache/accumulo/pull/3833#issuecomment-1758394180","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3833","id":1758394180,"node_id":"IC_kwDOACaFSM5ozvdE","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:27:50Z","updated_at":"2023-10-11T19:27:50Z","author_association":"MEMBER","body":"> Try the following:\r\n> \r\n> ```\r\n> public static String createSelectedFilesJson(Long txid, boolean selAll,\r\n>       Collection<String> paths) {\r\n>     String filesJsonArray = GSON.get().toJson(paths);\r\n>     String formattedTxid = FateTxId.formatTid(Long.parseLong(Long.toString(txid), 16));\r\n>     return (\"{'txid':'\" + formattedTxid + \"','selAll':\" + selAll + \",'files':\" + filesJsonArray\r\n>         + \"}\").replace('\\'', '\\\"');\r\n>   }\r\n> ```\r\n\r\nAt this point we might as well use GSON to construct the whole thing right? But then we might end up rewriting the code that is used in `SelectedFilesTypeAdapter.write()`. Not sure if that would defeat the purpose of the test or if we can factor that out for use in the test and within `SelectedFilesTypeAdapter.write()`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758394180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758415060","html_url":"https://github.com/apache/accumulo/pull/3833#issuecomment-1758415060","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3833","id":1758415060,"node_id":"IC_kwDOACaFSM5oz0jU","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:40:56Z","updated_at":"2023-10-11T19:40:56Z","author_association":"CONTRIBUTOR","body":"> > Try the following:\r\n> > ```\r\n> > public static String createSelectedFilesJson(Long txid, boolean selAll,\r\n> >       Collection<String> paths) {\r\n> >     String filesJsonArray = GSON.get().toJson(paths);\r\n> >     String formattedTxid = FateTxId.formatTid(Long.parseLong(Long.toString(txid), 16));\r\n> >     return (\"{'txid':'\" + formattedTxid + \"','selAll':\" + selAll + \",'files':\" + filesJsonArray\r\n> >         + \"}\").replace('\\'', '\\\"');\r\n> >   }\r\n> > ```\r\n> \r\n> At this point we might as well use GSON to construct the whole thing right? But then we might end up rewriting the code that is used in `SelectedFilesTypeAdapter.write()`. Not sure if that would defeat the purpose of the test or if we can factor that out for use in the test and within `SelectedFilesTypeAdapter.write()`.\r\n\r\nI think this is probably fine because it's just a test. We need to construct the json outside of using the adapter because one of the tests actually does reverse order and the adapter will sort.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758415060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758419620","html_url":"https://github.com/apache/accumulo/pull/3835#issuecomment-1758419620","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3835","id":1758419620,"node_id":"IC_kwDOACaFSM5oz1qk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T19:43:54Z","updated_at":"2023-10-11T19:43:54Z","author_association":"CONTRIBUTOR","body":"Running Sunny locally","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758419620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758458838","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1758458838","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1758458838,"node_id":"IC_kwDOACaFSM5oz_PW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T20:10:07Z","updated_at":"2023-10-11T20:10:07Z","author_association":"CONTRIBUTOR","body":"Do you have thoughts on what we should do with the existing tests that are marked Sunny?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758458838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758477063","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1758477063","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1758477063,"node_id":"IC_kwDOACaFSM5o0DsH","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T20:22:22Z","updated_at":"2023-10-11T20:22:22Z","author_association":"CONTRIBUTOR","body":"> Do you have thoughts on what we should do with the existing tests that are marked Sunny?\r\n\r\nNeed to go through them and see if they can be untagged if they are covering similar things to this.  May also find things we can add to this when reviewing.  I can take a pass at that and either open a follow on issue or make the changes in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758477063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758490532","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1758490532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1758490532,"node_id":"IC_kwDOACaFSM5o0G-k","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T20:32:21Z","updated_at":"2023-10-11T20:32:21Z","author_association":"CONTRIBUTOR","body":"For `main`, I think it might make sense to untag duplicate ITs in this PR. When merging to `elasticity`, would need to re-evaluate as we tagged new tests with Sunny. Also for `elasticity`, the scope of read/write tests have changed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758490532/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758492122","html_url":"https://github.com/apache/accumulo/pull/3835#issuecomment-1758492122","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3835","id":1758492122,"node_id":"IC_kwDOACaFSM5o0HXa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T20:33:42Z","updated_at":"2023-10-11T20:33:42Z","author_association":"CONTRIBUTOR","body":"OnDemandTabletUnloadingIT timed out, but had previously succeeded. All other Sunny ITs passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758492122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758502906","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1758502906","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1758502906,"node_id":"IC_kwDOACaFSM5o0J_6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T20:39:11Z","updated_at":"2023-10-11T20:39:11Z","author_association":"CONTRIBUTOR","body":"> When merging to elasticity, would need to re-evaluate as we tagged new tests with Sunny. Also for elasticity, the scope of read/write tests have changed.\r\n\r\nAlso opened #3834 for elasticity, if something is done for that it will change sunny in elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758502906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758522617","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1758522617","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1758522617,"node_id":"IC_kwDOACaFSM5o0Oz5","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T20:53:45Z","updated_at":"2023-10-11T20:53:45Z","author_association":"CONTRIBUTOR","body":"I wonder if the following should be done instead:\r\n\r\n1. Merge #3832 into `main` and up into `elasticity`\r\n2. Revert #3816\r\n3. Add `@Ignore` to IT classes that are known to be failing.\r\n\r\nThis would:\r\n\r\n1. Enable people to run the Sunny profile if they want\r\n2. Allow us to re-enable the IT build for the elasticity branch (not just the Sunny profile)\r\n3. Enable us to find and fix broken ITs. When working, we just remove the `@Ignore` annotation. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758522617/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758551913","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1758551913","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1758551913,"node_id":"IC_kwDOACaFSM5o0V9p","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T21:13:29Z","updated_at":"2023-10-11T21:13:29Z","author_association":"CONTRIBUTOR","body":"Adding the `@Ignore` tag I think would work too. It seems like the exclusive approach to mark tests as broken/ignored would be better than listing tests that work so I am in favor of whatever makes the most sense to make it easy to exclude broken tests and then quickly bring them back once they are fixed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758551913/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758560173","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1758560173","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1758560173,"node_id":"IC_kwDOACaFSM5o0X-t","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T21:19:42Z","updated_at":"2023-10-11T21:20:09Z","author_association":"CONTRIBUTOR","body":"@dlmarion that approach sounds good.  Could add a 4th step of opening an issue to ensure all the `@Ignore` tags are removed in elasticity.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758560173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758673467","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1758673467","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1758673467,"node_id":"IC_kwDOACaFSM5o0zo7","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-11T23:14:24Z","updated_at":"2023-10-11T23:14:24Z","author_association":"CONTRIBUTOR","body":"I reviewed the ITs tagged for sunny and kept the following. \r\n\r\n * InMemoryMapIT : because its super fast\r\n * NativeMapIT :  because its super fast\r\n * ReadWriteIT : because it test monitor and cluster shutdown\r\n * WALSunnyDayIT : because it test log recovery and has sunny in name\r\n * ThriftBehaviorIT :  because its super fast\r\n * KeywordStartIT :  because its super fast\r\n  \r\nRemoved the sunny tag from the following.\r\n  * PropStoreConfigIT : have basic coverage of setting per table props which exercises the prop store, also added tests setting namespace props\r\n  * ZooPropEditorIT : this seems like a test for a more obscure feature, seems ok to leave it for a full IT run that would be done prior to release\r\n  * BulkIT ... have coverage of bulk import\r\n  *  ScanIteratorIT : improved iterator test coverage in ComprehensiveIT  .. also plan to add test that creates user with auths\r\n  \r\nStill looking at the Shell ITs.  Think if some basic tests of users and table permissions were added to ComprehensiveIT that these could be removed from sunny tag.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1758673467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761365693","html_url":"https://github.com/apache/accumulo/pull/3842#issuecomment-1761365693","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3842","id":1761365693,"node_id":"IC_kwDOACaFSM5o_E69","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T11:33:59Z","updated_at":"2023-10-13T11:33:59Z","author_association":"CONTRIBUTOR","body":"@jmark99 - when this is merged, could you update https://cwiki.apache.org/confluence/display/ACCUMULO/A+More+Cost+Efficient+Accumulo and https://cwiki.apache.org/confluence/display/ACCUMULO/Example+OnDemand+Tablet+Operation?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761365693/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761434242","html_url":"https://github.com/apache/accumulo/issues/3800#issuecomment-1761434242","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3800","id":1761434242,"node_id":"IC_kwDOACaFSM5o_VqC","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T12:27:06Z","updated_at":"2023-10-13T12:27:06Z","author_association":"CONTRIBUTOR","body":"Closed by #3842","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761434242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761722093","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1761722093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1761722093,"node_id":"IC_kwDOACaFSM5pAb7t","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T15:39:13Z","updated_at":"2023-10-13T15:39:13Z","author_association":"CONTRIBUTOR","body":"Wait changes tested again. \r\nAverage IT completion time is now ~60 seconds and the total runtime of `time mvn --color=always clean verify package -Dtest=foo -Dit.test=org.apache.accumulo.test.ComprehensiveIT` is around 7.5 min long.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761722093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761759341","html_url":"https://github.com/apache/accumulo/pull/3832#issuecomment-1761759341","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3832","id":1761759341,"node_id":"IC_kwDOACaFSM5pAlBt","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T16:06:09Z","updated_at":"2023-10-13T16:06:09Z","author_association":"CONTRIBUTOR","body":"I am going to go ahead an merge this since its been approved so many times.  I plan to shortly open another PR to add one more test that covers some basic security operations and remove shell ITs from sunny.  That addition can be looked at in isolation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761759341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761783454","html_url":"https://github.com/apache/accumulo/issues/3811#issuecomment-1761783454","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3811","id":1761783454,"node_id":"IC_kwDOACaFSM5pAq6e","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T16:24:43Z","updated_at":"2023-10-13T16:24:43Z","author_association":"CONTRIBUTOR","body":"In the elasticity branch it may be possible to eventually address this problem by moving compaction commit into FATE.  See #3559.  If its a fate operation, then do not need to worry about failure between rename and addition of the candidate because it will rerun in that case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1761783454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1762204883","html_url":"https://github.com/apache/accumulo/pull/3805#issuecomment-1762204883","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3805","id":1762204883,"node_id":"IC_kwDOACaFSM5pCRzT","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T20:51:22Z","updated_at":"2023-10-13T20:51:22Z","author_association":"CONTRIBUTOR","body":"Added the discussed fix for #3802 and removed the warning statement from the `GC_REMOVE_IN_USE_CANDIDATES` property. \r\n\r\nfixes #3802 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1762204883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1762222351","html_url":"https://github.com/apache/accumulo/issues/3791#issuecomment-1762222351","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3791","id":1762222351,"node_id":"IC_kwDOACaFSM5pCWEP","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T21:06:44Z","updated_at":"2023-10-13T21:06:44Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - should we make this a blocker for 2.1.3?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1762222351/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1762325705","html_url":"https://github.com/apache/accumulo/pull/3843#issuecomment-1762325705","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3843","id":1762325705,"node_id":"IC_kwDOACaFSM5pCvTJ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-13T22:37:52Z","updated_at":"2023-10-13T22:37:52Z","author_association":"CONTRIBUTOR","body":"Running all of the sunny ITs with this changes looks like the following.\r\n\r\n```\r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] Running org.apache.accumulo.test.rpc.ThriftBehaviorIT\r\n[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.544 s -- in org.apache.accumulo.test.rpc.ThriftBehaviorIT\r\n[INFO] Running org.apache.accumulo.test.InMemoryMapIT\r\n[INFO] Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.911 s -- in org.apache.accumulo.test.InMemoryMapIT\r\n[INFO] Running org.apache.accumulo.test.functional.NativeMapIT\r\n[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.737 s -- in org.apache.accumulo.test.functional.NativeMapIT\r\n[INFO] Running org.apache.accumulo.test.functional.ReadWriteIT\r\n[INFO] Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 65.15 s -- in org.apache.accumulo.test.functional.ReadWriteIT\r\n[INFO] Running org.apache.accumulo.test.functional.WALSunnyDayIT\r\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 89.27 s -- in org.apache.accumulo.test.functional.WALSunnyDayIT\r\n[INFO] Running org.apache.accumulo.test.ComprehensiveIT\r\n[INFO] Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 44.19 s -- in org.apache.accumulo.test.ComprehensiveIT\r\n[INFO] Running org.apache.accumulo.test.start.KeywordStartIT\r\n[INFO] Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.436 s -- in org.apache.accumulo.test.start.KeywordStartIT\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 52, Failures: 0, Errors: 0, Skipped: 0\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1762325705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763180572","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1763180572","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1763180572,"node_id":"IC_kwDOACaFSM5pGAAc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-14T21:05:31Z","updated_at":"2023-10-14T21:05:31Z","author_association":"CONTRIBUTOR","body":"@cshannon do you recall if the existing merge code looked for write ahead logs and had and special handling for them?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763180572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763181858","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1763181858","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1763181858,"node_id":"IC_kwDOACaFSM5pGAUi","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-14T21:11:49Z","updated_at":"2023-10-14T21:11:49Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I don't remember seeing anything related to write ahead logs in the existing merge code and I was in there quite a bit so it may not be specifically handled.  I can take a look tomorrow though and double check and see if there is something that would prevent merge but I don't think there is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763181858/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763184139","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1763184139","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1763184139,"node_id":"IC_kwDOACaFSM5pGA4L","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-14T21:22:06Z","updated_at":"2023-10-14T21:22:06Z","author_association":"CONTRIBUTOR","body":">  I can take a look tomorrow though and double check and see if there is something that would prevent merge but I don't think there is.\n\nIf there is not, then may need to  set this as a 2.1.x bug.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763184139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763407085","html_url":"https://github.com/apache/accumulo/pull/3835#issuecomment-1763407085","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3835","id":1763407085,"node_id":"IC_kwDOACaFSM5pG3Tt","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-15T14:29:01Z","updated_at":"2023-10-15T14:29:01Z","author_association":"CONTRIBUTOR","body":"@keith-turner - made some minor changes. MergeStateIT is failing with:\r\n```\r\norg.apache.accumulo.server.manager.state.DistributedStoreException: failed to set tablet location, conditional mutation failed\r\n\tat org.apache.accumulo.server.manager.state.AbstractTabletStateStore.setLocations(AbstractTabletStateStore.java:70)\r\n\tat org.apache.accumulo.server.manager.state.LoggingTabletStateStore.setLocations(LoggingTabletStateStore.java:71)\r\n\tat org.apache.accumulo.test.manager.MergeStateIT.test(MergeStateIT.java:218)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.api.AssertTimeoutPreemptively.lambda$submitTask$3(AssertTimeoutPreemptively.java:95)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nI think the issue is that the test does not set the future location?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763407085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763501081","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1763501081","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1763501081,"node_id":"IC_kwDOACaFSM5pHOQZ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-15T20:52:13Z","updated_at":"2023-10-15T20:52:13Z","author_association":"CONTRIBUTOR","body":"I looked into this some today and the merge code will first make sure that the tablets are hosted before beginning the steps to start the merge to try and prevent any wals from existing as the wals will be processed before the tablet is hosted. After the merge goes into the `started` state it verifies the total tablets equals hosted before going into the waiting for offline state. https://github.com/apache/accumulo/blob/e68fa4ac2243094c64451e06c554653706a37b64/server/manager/src/main/java/org/apache/accumulo/manager/state/MergeStats.java#L101-L110\r\n\r\nAfter talking to @keith-turner , it was pointed out that there is a potential edge case where during the period of time that the manager is waiting for the tablets to be offline to merge (so after the hosted check) wals could exist that need recovery if a tserver dies. To handle the edge case the merge could check to make sure that all the unhosted tablets do not have any wals before beginning the metadata changes and if wals exist throw an exception to abort the merge.\r\n\r\nI can work on a fix for this which would need to also go to 2.1 and main and not just elasticity\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1763501081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1764795101","html_url":"https://github.com/apache/accumulo/pull/3848#issuecomment-1764795101","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3848","id":1764795101,"node_id":"IC_kwDOACaFSM5pMKLd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T15:56:57Z","updated_at":"2023-10-16T15:56:57Z","author_association":"CONTRIBUTOR","body":"I did see this fail this morning. Glad you are working it!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1764795101/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1764948775","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1764948775","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1764948775,"node_id":"IC_kwDOACaFSM5pMvsn","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T17:31:23Z","updated_at":"2023-10-16T17:31:23Z","author_association":"CONTRIBUTOR","body":"@cshannon  I looked around in the code and suspect the following strategy may work to fix this.\n\n * MergeStats tracks the number of wals seen\n * MergeStats.nextMergeState() does not transition out of MergeState.WAITING_FOR_OFFLINE if the wal count >0 for any tablet\n * Manager.getGoalState() will return hosted when a tablet has wals even if merge state is WAITING_FOR_OFFLINE.  May be able to get walog count from the passed in TabletLocationState.\n * When actually merging tablets, if wals are seen then throw an exception as this is not expected (should not get that far with wals).\n\nWas looking at the code in main when making the above comments.  Hoping WAITING_FOR_OFFLINE is common code for both merge and delete rows, did not check that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1764948775/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1764990373","html_url":"https://github.com/apache/accumulo/issues/3844#issuecomment-1764990373","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3844","id":1764990373,"node_id":"IC_kwDOACaFSM5pM52l","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T17:55:28Z","updated_at":"2023-10-16T17:55:28Z","author_association":"CONTRIBUTOR","body":"#3663 is related","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1764990373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765032565","html_url":"https://github.com/apache/accumulo/issues/3849#issuecomment-1765032565","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3849","id":1765032565,"node_id":"IC_kwDOACaFSM5pNEJ1","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T18:12:00Z","updated_at":"2023-10-16T18:12:00Z","author_association":"CONTRIBUTOR","body":"I'll take a look.  I have a first pass at the upgrade sequence working, just need some polish before I submit a PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765032565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765152827","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1765152827","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1765152827,"node_id":"IC_kwDOACaFSM5pNhg7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T19:37:54Z","updated_at":"2023-10-16T19:37:54Z","author_association":"CONTRIBUTOR","body":"This is draft because I want to get early feedback on approach. I'm going to add some tests for some failure conditions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765152827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765178855","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1765178855","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1765178855,"node_id":"IC_kwDOACaFSM5pNn3n","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T19:57:50Z","updated_at":"2023-10-16T19:57:50Z","author_association":"CONTRIBUTOR","body":"This approach will tie up a FATE thread.  Another possible approach is to have a ZooStore.reserve() prefer transactions that are in an IN_PROGRESS state over those that are SUBMITTED (those have never run).  However it seems like scanning for in progress work  could do a lot more ZK reads.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765178855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765183004","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1765183004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1765183004,"node_id":"IC_kwDOACaFSM5pNo4c","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T20:01:03Z","updated_at":"2023-10-16T20:01:23Z","author_association":"CONTRIBUTOR","body":"> This approach will tie up a FATE thread.\r\n\r\nIt will, but only for those transactions that are marked so\r\n\r\n> Another possible approach is to have a ZooStore.reserve() prefer transactions that are in an IN_PROGRESS state over those that are SUBMITTED (those have never run)\r\n\r\nThat would allow transactions to still interleave. When discussing this, I thought you had given me the example of a split task, that you wanted to finish as fast as possible.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765183004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765189548","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1765189548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1765189548,"node_id":"IC_kwDOACaFSM5pNqes","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T20:05:39Z","updated_at":"2023-10-16T20:06:02Z","author_association":"CONTRIBUTOR","body":"> That would allow transactions to still interleave. When discussing this, I thought you had given me the example of a split task, that you wanted to finish as fast as possible.\r\n\r\nThat is not exactly what I was thinking. Was thinking of prioritizing FATEs that have started running over those that have never run when choosing what to run next. \r\n\r\nI like the approach in this PR, except that it ties up a thread and could lead all FATE threads sleeping in the worst case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765189548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765196426","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1765196426","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1765196426,"node_id":"IC_kwDOACaFSM5pNsKK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T20:10:51Z","updated_at":"2023-10-16T20:10:51Z","author_association":"CONTRIBUTOR","body":"> That is not exactly what I was thinking. Was thinking of prioritizing FATEs that have started running over those that have never run when choosing what to run next.\r\n\r\nAh, ok, I didn't get that from our conversation.\r\n\r\n> I like the approach in this PR, except that it ties up a thread and could lead all FATE threads sleeping in the worst case.\r\n\r\nYeah, I'm curious how many FATE ops are going to take advantage of this. I'm assuming SPLIT and MERGE as they require the tablet to be un-hosted, so you want them to run as fast as possible so that the tablets can be re-hosted.  It would be trivial to put in an escape path, say if we have received a non-zero response from `isReady` N times in a row.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765196426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765387914","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1765387914","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1765387914,"node_id":"IC_kwDOACaFSM5pOa6K","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-16T22:47:58Z","updated_at":"2023-10-16T22:47:58Z","author_association":"CONTRIBUTOR","body":"I'll take a look later this week and see if that strategy will work and try and come up with a PR if it will.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1765387914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766280316","html_url":"https://github.com/apache/accumulo/pull/3854#issuecomment-1766280316","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3854","id":1766280316,"node_id":"IC_kwDOACaFSM5pR0x8","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T12:05:16Z","updated_at":"2023-10-17T12:16:21Z","author_association":"CONTRIBUTOR","body":"Edit: Question deleted, I came to the realization that TGW never started the merge process. \r\n\r\nDoes MergeIT pass with these changes?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766280316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766437491","html_url":"https://github.com/apache/accumulo/pull/3805#issuecomment-1766437491","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3805","id":1766437491,"node_id":"IC_kwDOACaFSM5pSbJz","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T13:37:27Z","updated_at":"2023-10-17T13:37:27Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Would it be possible to get a review of these changes? This PR has been sitting for a while and I'd like to close it out for 2.1.3 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766437491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766440613","html_url":"https://github.com/apache/accumulo/pull/3854#issuecomment-1766440613","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3854","id":1766440613,"node_id":"IC_kwDOACaFSM5pSb6l","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T13:39:05Z","updated_at":"2023-10-17T13:39:05Z","author_association":"CONTRIBUTOR","body":"> Does MergeIT pass with these changes?\r\n\r\nYeah, MergeIT and DeleteRowsIT both pass","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766440613/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766486132","html_url":"https://github.com/apache/accumulo/pull/3851#issuecomment-1766486132","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3851","id":1766486132,"node_id":"IC_kwDOACaFSM5pSnB0","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:02:28Z","updated_at":"2023-10-17T14:02:28Z","author_association":"CONTRIBUTOR","body":"Why not have the hosting goal set as part of the import command?  Or at least support overriding the goal on import?\r\n\r\nI guess it depends on usage and what ever is picked will be an inconvenience to someone else.  If I am exporting / importing to transfer files to set up a mirror destination, then having the goal state mirrored as part of the configuration would reduce the amount of \"post configuration\" needed.\r\n\r\nOn the other hand, if I was exporting / importing to a destination it may be because I have different usages in mind and just because it was configured one way on the source, I may want or need a different goal at the destination.\r\n\r\nA third possibility may be to always import into an on-demand (or whatever state has the lowest resource demands) - that way it is a post configuration step to set the imported table as online if that is the desired goal.  That way, the import would have the least resource impact until specifically changed by the user.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766486132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766487690","html_url":"https://github.com/apache/accumulo/pull/3854#issuecomment-1766487690","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3854","id":1766487690,"node_id":"IC_kwDOACaFSM5pSnaK","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:03:16Z","updated_at":"2023-10-17T20:03:34Z","author_association":"CONTRIBUTOR","body":"The original motivation behind this change was to better organize the code in order to make adding conditional mutations cleaner.  While working on it realized there was another benefit.  This change moves merging from the TGW thread to a FATE thread.  Its possible that before this change that a merge operation could prevent the primary functionality of TGW from running, which is assigning tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766487690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766507126","html_url":"https://github.com/apache/accumulo/pull/3851#issuecomment-1766507126","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3851","id":1766507126,"node_id":"IC_kwDOACaFSM5pSsJ2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:13:18Z","updated_at":"2023-10-17T14:13:18Z","author_association":"CONTRIBUTOR","body":"> Why not have the hosting goal set as part of the import command? Or at least support overriding the goal on import?\r\n\r\nThat could be done, I think it would be best done as a follow on issue.  It seems we have  a new [ImportConfiguration](https://github.com/apache/accumulo/blob/4de6087f2739602128bbe22ebb9ee1c020810c7c/core/src/main/java/org/apache/accumulo/core/client/admin/ImportConfiguration.java#L31) interface that was added in 2.1 that would make adding this not disruptive.\r\n\r\nWondering about the following.  Wondering if it will work and if it should work.\r\n\r\n * Import table setting the keep offline setting\r\n * Set the hosting goals on the offline table (does this work, if so should it work?)\r\n * Bring the table online\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766507126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766527505","html_url":"https://github.com/apache/accumulo/pull/3851#issuecomment-1766527505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3851","id":1766527505,"node_id":"IC_kwDOACaFSM5pSxIR","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:24:00Z","updated_at":"2023-10-17T14:24:00Z","author_association":"CONTRIBUTOR","body":"Opened #3856 for setting hosting goals on offline table.  @EdColeman can you open an issue about setting hosting goals on table import?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766527505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766557546","html_url":"https://github.com/apache/accumulo/issues/3310#issuecomment-1766557546","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3310","id":1766557546,"node_id":"IC_kwDOACaFSM5pS4dq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:39:17Z","updated_at":"2023-10-17T14:39:17Z","author_association":"CONTRIBUTOR","body":"#3350 added `TabletServerClientService.refreshTablets`. I assume we just need to add a call to this in the correct places to resolve this issue?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766557546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766569017","html_url":"https://github.com/apache/accumulo/issues/3310#issuecomment-1766569017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3310","id":1766569017,"node_id":"IC_kwDOACaFSM5pS7Q5","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:44:59Z","updated_at":"2023-10-17T14:44:59Z","author_association":"CONTRIBUTOR","body":"> #3350 added TabletServerClientService.refreshTablets. I assume we just need to add a call to this in the correct places to resolve this issue?\r\n\r\nWhen refresh was first added it had race conditions on the tserver side. Those were cleaned up and fixed in #3625 and #3634.  There is still work that could be done to clean up the overall locking in the tserver, which is outlined in #3670.  Cleaning up locking the in the tablet would be good since compactions and bulk import were removed and the tablet code is simpler.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766569017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766573833","html_url":"https://github.com/apache/accumulo/issues/3310#issuecomment-1766573833","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3310","id":1766573833,"node_id":"IC_kwDOACaFSM5pS8cJ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:47:32Z","updated_at":"2023-10-17T14:47:32Z","author_association":"CONTRIBUTOR","body":"Also compaction commit has a customized refresh processes that could be simplified by using FATE as outlined in #3559","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766573833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766597845","html_url":"https://github.com/apache/accumulo/issues/3458#issuecomment-1766597845","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3458","id":1766597845,"node_id":"IC_kwDOACaFSM5pTCTV","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T14:59:18Z","updated_at":"2023-10-17T14:59:18Z","author_association":"CONTRIBUTOR","body":"This is done except for #3526 which has an issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766597845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766601391","html_url":"https://github.com/apache/accumulo/issues/3526#issuecomment-1766601391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3526","id":1766601391,"node_id":"IC_kwDOACaFSM5pTDKv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T15:01:00Z","updated_at":"2023-10-17T15:01:00Z","author_association":"CONTRIBUTOR","body":"One possible way to solve this is via #3822 and #3559 which would allow fate operations that do this examination to run in multiple processes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766601391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766644251","html_url":"https://github.com/apache/accumulo/issues/3856#issuecomment-1766644251","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3856","id":1766644251,"node_id":"IC_kwDOACaFSM5pTNob","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T15:22:53Z","updated_at":"2023-10-17T15:22:53Z","author_association":"CONTRIBUTOR","body":"Need to update or remove https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=247828052","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766644251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766651214","html_url":"https://github.com/apache/accumulo/issues/3310#issuecomment-1766651214","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3310","id":1766651214,"node_id":"IC_kwDOACaFSM5pTPVO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T15:26:20Z","updated_at":"2023-10-17T15:26:20Z","author_association":"CONTRIBUTOR","body":"Closing this issue, the work is done and follow on issue are open for potential improvements.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766651214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766852931","html_url":"https://github.com/apache/accumulo/issues/3406#issuecomment-1766852931","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3406","id":1766852931,"node_id":"IC_kwDOACaFSM5pUAlD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T17:22:05Z","updated_at":"2023-10-17T17:22:05Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I think #3835 resolved this. That PR replaced the hack, and the TODOs referenced above are gone.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766852931/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766885393","html_url":"https://github.com/apache/accumulo/issues/3764#issuecomment-1766885393","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3764","id":1766885393,"node_id":"IC_kwDOACaFSM5pUIgR","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T17:46:09Z","updated_at":"2023-10-17T17:46:09Z","author_association":"CONTRIBUTOR","body":"This has been merged to 2.1, main, and elasticity branches. \r\nClosing issue. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1766885393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1767072965","html_url":"https://github.com/apache/accumulo/issues/3860#issuecomment-1767072965","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3860","id":1767072965,"node_id":"IC_kwDOACaFSM5pU2TF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T19:55:58Z","updated_at":"2023-10-17T19:55:58Z","author_association":"CONTRIBUTOR","body":"This would negate the need for #3856 to be completed. It would also mean that some other draft issues in the Elasticity project could be removed. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1767072965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1767076238","html_url":"https://github.com/apache/accumulo/issues/3860#issuecomment-1767076238","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3860","id":1767076238,"node_id":"IC_kwDOACaFSM5pU3GO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T19:58:13Z","updated_at":"2023-10-17T19:58:13Z","author_association":"CONTRIBUTOR","body":"Also, I believe that Bulk Import v2 supports bulk importing into an offline table in versions 2.x and 3.x. Will need to deprecate and remove this functionality.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1767076238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1767135287","html_url":"https://github.com/apache/accumulo/issues/3352#issuecomment-1767135287","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3352","id":1767135287,"node_id":"IC_kwDOACaFSM5pVFg3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-17T20:38:14Z","updated_at":"2023-10-17T20:38:14Z","author_association":"CONTRIBUTOR","body":"Completed in #3604 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1767135287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1768984432","html_url":"https://github.com/apache/accumulo/issues/3763#issuecomment-1768984432","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3763","id":1768984432,"node_id":"IC_kwDOACaFSM5pcI9w","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T17:08:44Z","updated_at":"2023-10-18T17:08:44Z","author_association":"CONTRIBUTOR","body":"Discussed this issue with @DomGarguilo  and he will not be able to work on it in the short term, so I am going to take a look at it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1768984432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1769234030","html_url":"https://github.com/apache/accumulo/issues/3849#issuecomment-1769234030","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3849","id":1769234030,"node_id":"IC_kwDOACaFSM5pdF5u","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T20:01:23Z","updated_at":"2023-10-18T20:08:03Z","author_association":"CONTRIBUTOR","body":"importtable fails. (But, the files can be imported with importdirectory)\r\n\r\n```\r\n2023-10-18T19:52:20,982 [fate.Fate] WARN : Failed to execute Repo FATE[4c0f82faa60423a2]\r\ncom.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path \r\n```\r\n\r\n<details>\r\n\r\n  <summary>Full trace</summary>\r\n  \r\n2023-10-18T19:52:20,982 [fate.Fate] WARN : Failed to execute Repo FATE[4c0f82faa60423a2]\r\ncom.google.gson.JsonSyntaxException: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:397) ~[gson-2.10.1.jar:?]\r\n\tat com.google.gson.Gson.fromJson(Gson.java:1227) ~[gson-2.10.1.jar:?]\r\n\tat com.google.gson.Gson.fromJson(Gson.java:1137) ~[gson-2.10.1.jar:?]\r\n\tat com.google.gson.Gson.fromJson(Gson.java:1047) ~[gson-2.10.1.jar:?]\r\n\tat com.google.gson.Gson.fromJson(Gson.java:982) ~[gson-2.10.1.jar:?]\r\n\tat org.apache.accumulo.core.metadata.StoredTabletFile.deserialize(StoredTabletFile.java:187) ~[accumulo-core-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.core.metadata.StoredTabletFile.<init>(StoredTabletFile.java:63) ~[accumulo-core-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.core.metadata.StoredTabletFile.of(StoredTabletFile.java:160) ~[accumulo-core-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.manager.tableOps.tableImport.PopulateMetadataTable.call(PopulateMetadataTable.java:132) ~[accumulo-manager-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.manager.tableOps.tableImport.PopulateMetadataTable.call(PopulateMetadataTable.java:60) ~[accumulo-manager-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.manager.tableOps.TraceRepo.call(TraceRepo.java:60) ~[accumulo-manager-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.core.fate.Fate$TransactionRunner.run(Fate.java:100) ~[accumulo-core-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[accumulo-core-3.1.0-SNAPSHOT.jar:3.1.0-SNAPSHOT]\r\n\tat java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 1 path $\r\n\tat com.google.gson.stream.JsonReader.beginObject(JsonReader.java:393) ~[gson-2.10.1.jar:?]\r\n\tat com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:386) ~[gson-2.10.1.jar:?]\r\n\t... 16 more\r\n\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1769234030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1769254707","html_url":"https://github.com/apache/accumulo/issues/3849#issuecomment-1769254707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3849","id":1769254707,"node_id":"IC_kwDOACaFSM5pdK8z","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T20:17:11Z","updated_at":"2023-10-18T20:17:11Z","author_association":"CONTRIBUTOR","body":"> importtable fails.\r\n\r\nWe could actually have ITs excercise importing data from older versions.  Could export a table from an older version and save the data in test resources and import that data in an IT.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1769254707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1769273072","html_url":"https://github.com/apache/accumulo/issues/3849#issuecomment-1769273072","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3849","id":1769273072,"node_id":"IC_kwDOACaFSM5pdPbw","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-18T20:30:07Z","updated_at":"2023-10-18T20:30:07Z","author_association":"CONTRIBUTOR","body":"One way to handle it could be a utility to process the `exportMetadata.zip` to extract the metadata.bin file entries and re-write them into the expected new format.  That could limit the scope of places where we need to handle the conversion.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1769273072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771088502","html_url":"https://github.com/apache/accumulo/pull/3870#issuecomment-1771088502","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3870","id":1771088502,"node_id":"IC_kwDOACaFSM5pkKp2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T14:17:57Z","updated_at":"2023-10-19T14:17:57Z","author_association":"CONTRIBUTOR","body":"Errorprone failure is due to an issue in the `elasticity` branch, not this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771088502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771580704","html_url":"https://github.com/apache/accumulo/issues/3470#issuecomment-1771580704","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3470","id":1771580704,"node_id":"IC_kwDOACaFSM5pmC0g","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T19:25:18Z","updated_at":"2023-10-19T19:25:18Z","author_association":"CONTRIBUTOR","body":"This was completed as part of #3591 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771580704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771604121","html_url":"https://github.com/apache/accumulo/issues/3847#issuecomment-1771604121","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3847","id":1771604121,"node_id":"IC_kwDOACaFSM5pmIiZ","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T19:44:10Z","updated_at":"2023-10-19T19:44:10Z","author_association":"MEMBER","body":"I have been looking into this and have a few point/questions.\r\n\r\n> When making conditional updates to a tablet will need to be able to ensure that wals are the same.\r\n\r\nWhen comparing two `LogEntry` objects to one another, objects constructed with the same initial values will not be equal (using `.equals()`). Looking at the [`LogEntryTest`](https://github.com/apache/accumulo/blob/85b7d3be9f7c8942fe2ecd2c4a97e335cb150c8b/core/src/test/java/org/apache/accumulo/core/tabletserver/log/LogEntryTest.java#L34) this seems to be expected. Given this info, what should be checked within the condition? Should we check each member variable between two `LogEntry` objects for equality?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771604121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771696034","html_url":"https://github.com/apache/accumulo/pull/3873#issuecomment-1771696034","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3873","id":1771696034,"node_id":"IC_kwDOACaFSM5pme-i","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T20:57:38Z","updated_at":"2023-10-19T20:57:38Z","author_association":"CONTRIBUTOR","body":"We might not want to use `Integer.MAX_VALUE` exactly. I know that the limit for `byte[]` is less than that, and I think the exact number might be dependent on things out of our control. We might want to use `Integer.MAX_VALUE - 100` or something.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771696034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771701820","html_url":"https://github.com/apache/accumulo/pull/3874#issuecomment-1771701820","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3874","id":1771701820,"node_id":"IC_kwDOACaFSM5pmgY8","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-19T21:02:30Z","updated_at":"2023-10-19T21:02:30Z","author_association":"CONTRIBUTOR","body":"I know there are some API issues here that I need to address.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771701820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771891478","html_url":"https://github.com/apache/accumulo/pull/3875#issuecomment-1771891478","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3875","id":1771891478,"node_id":"IC_kwDOACaFSM5pnOsW","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T00:37:33Z","updated_at":"2023-10-20T00:37:33Z","author_association":"CONTRIBUTOR","body":"@cshannon this is not fully baked, I outlined the problem I am seeing in the commit message.  I am sill looking into why deleterows is now producing different splits than it used to.  Posting what I have so far in case you had a second to look at it, if not thats fine.  Hopefully I can take this out of draft soon.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1771891478/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772039761","html_url":"https://github.com/apache/accumulo/pull/3876#issuecomment-1772039761","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3876","id":1772039761,"node_id":"IC_kwDOACaFSM5pny5R","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T03:58:24Z","updated_at":"2023-10-20T03:58:24Z","author_association":"MEMBER","body":"> removal of `ExternalCompactionColumnFamily` needs to be implemented\r\n\r\nI don't think that's related to the no-chop merge change, is it? Or is that a separate thing that was removed in 3.1?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772039761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772046213","html_url":"https://github.com/apache/accumulo/pull/3873#issuecomment-1772046213","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3873","id":1772046213,"node_id":"IC_kwDOACaFSM5pn0eF","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T04:07:57Z","updated_at":"2023-10-20T04:07:57Z","author_association":"MEMBER","body":"> We might not want to use `Integer.MAX_VALUE` exactly. I know that the limit for `byte[]` is less than that, and I think the exact number might be dependent on things out of our control. We might want to use `Integer.MAX_VALUE - 100` or something.\r\n\r\nThe max message size is just a count of the number of bytes read from the stream; it doesn't correspond to any particular byte array size. This is related to the max frame size in the TFramedTransport, though, and that may be related to a byte array, if the message is read fully. I'd have to look into the implementation more closely, though. In any case, we use `Integer.MAX_VALUE` elsewhere for client side, and it really doesn't matter if the value here exceeds the maximum array index limit. The point is to make it so impractically large that it won't trigger unnecessary errors for users. If they hit an error because they max out a byte array, or because they hit this limit, it's already kind of catastrophic, and it really doesn't matter which error specifically caused the catastrophe (actually, it'd probably better if it was a JVM one, because that would be clearly distinguishable from the EOFException that Thrift causes, which looks the same as a transient network error; at least the JVM complaining about a byte array being too big would stand out as a distinct problem).\r\n\r\nIn any case, this is still WIP. I need to do more here, but I quickly put something up to demo the end-to-end process of cloning a repo, making a change, and creating a pull request, for the benefit of a newer developer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772046213/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772309614","html_url":"https://github.com/apache/accumulo/issues/3795#issuecomment-1772309614","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3795","id":1772309614,"node_id":"IC_kwDOACaFSM5po0xu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T08:32:08Z","updated_at":"2023-10-20T08:32:08Z","author_association":"MEMBER","body":"The actual fencing is going to follow the tablet split points, unless there's some other source for the fencing ranges that I don't know about... ? If they follow the split points, then there's no reason to believe any problems due to size are going to be more substantial than the normal tablet split point sizes, right?\r\n\r\nOne size optimization is to omit specifying the range when the range is the current tablet's range. If the range is empty, the current tablet is enough to specify its bounds. It only needs to be specified when there is a range that falls within the bounds (from a previous merge). This will make fencing ranges in metadata unnecessary for the vast majority of files. Only files that were previously involved in a merge would actually need to have a fencing range serialized in their metadata.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772309614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772351687","html_url":"https://github.com/apache/accumulo/issues/3871#issuecomment-1772351687","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3871","id":1772351687,"node_id":"IC_kwDOACaFSM5po_DH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T09:01:05Z","updated_at":"2023-10-20T09:01:05Z","author_association":"MEMBER","body":"It seems like this isn't necessary, as this can be handled in the ContextClassLoaderFactory implementation itself with a well-written implementation.\r\n\r\nOur uncaught exception handler is to protect Accumulo itself from unknowable JVM states, often caused by bad user pluggable code that Accumulo cannot safely reason about. Even something that seems as simple as NoClassDefFoundError can be accompanied by serious state changes in the JVM. For example, a NoClassDefFoundError can occur because of an exception in a static initializer block while trying to load a class. One problem is that that static initializer can change some JVM-wide state before it fails, leading to an unknowable state. So, even though the class couldn't load, it doesn't mean the JVM is in a knowable good state. These errors are fatal because they can leave the JVM in a bad, often unknowably bad, state. The NoClassDefFoundError can also be caused by a previous failure to load a class that was cached by the system classloader. The first time it tried to load, it might throw an ExceptionInInitializerError or other LinkageError. Subsequent attempts might simply report NoClassDefFoundError because the classloader is aware that there's no valid class definition available, and this would not be recoverable.\r\n\r\nThese kinds of errors are different from say, ClassNotFoundException, which is a recoverable error that can happen when trying to dynamically load a class with something like Class.forName or similar. This can be recoverable if the reason it failed to load was because an item was missing from the classpath and has been subsequently placed there, or if there was a config typo and that typo was subsequently fixed.\r\n\r\nIn either case, though, most of these situations can be addressed by having a good classloader implementation that behaves the way the user wants it to, or by having good configuration management to ensure their system is deployed properly. I think the least best option is allowing users to muck about with changing how Accumulo protects itself and the user data it is responsible for, as the result of user errors during deployment, and that's one role I think the server-side uncaught exception handler is often doing.\r\n\r\nI think there are better approaches already available to users that have not been exhausted, in particular the use of a robust pluggable ContextClassLoaderFactory implementation that satisfies the user's behavioral requirements, that would be far less risky.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772351687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772357222","html_url":"https://github.com/apache/accumulo/pull/3869#issuecomment-1772357222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3869","id":1772357222,"node_id":"IC_kwDOACaFSM5ppAZm","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T09:04:42Z","updated_at":"2023-10-20T09:04:42Z","author_association":"MEMBER","body":"I think this was closed in favor of #3870, but it's not clear without a comment. If somebody involved can confirm this, I think it would help people who were following this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772357222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772379586","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1772379586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1772379586,"node_id":"IC_kwDOACaFSM5ppF3C","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T09:19:38Z","updated_at":"2023-10-20T09:19:38Z","author_association":"MEMBER","body":"@dlmarion You requested my review on this, but I feel like it's a bit outside my area of expertise. I'd be interested in a discussion sometime, to get a high level understanding of it, though, along with what's motivating it. Right now, I don't have any opinions on the approach one way or another.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772379586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772395251","html_url":"https://github.com/apache/accumulo/issues/3865#issuecomment-1772395251","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3865","id":1772395251,"node_id":"IC_kwDOACaFSM5ppJrz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T09:30:30Z","updated_at":"2023-10-20T09:30:30Z","author_association":"MEMBER","body":"> * Use a immutable \"byte-array\" class instead of Text?\r\n\r\nThis isn't really an option right now, because the reason these are Text is because they're using our client APIs to write rows and column data to the metadata, and those APIs use Text. So until those APIs support a different kind of immutable byte array type, then it doesn't make sense to consider it for these.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772395251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772566056","html_url":"https://github.com/apache/accumulo/pull/3869#issuecomment-1772566056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3869","id":1772566056,"node_id":"IC_kwDOACaFSM5ppzYo","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T11:27:50Z","updated_at":"2023-10-20T11:27:50Z","author_association":"CONTRIBUTOR","body":"Yes, it was closed in favor of #3870 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772566056/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772742172","html_url":"https://github.com/apache/accumulo/pull/3875#issuecomment-1772742172","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3875","id":1772742172,"node_id":"IC_kwDOACaFSM5pqeYc","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T13:28:20Z","updated_at":"2023-10-20T13:28:20Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I modified your original description as you said:\r\n> Modified the delete rows FATE repo to only delete or fence files, but not **merge** tablets \r\n\r\nbut I am pretty sure you mean \r\n\r\n> Modified the delete rows FATE repo to only delete or fence files, but not **delete** tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772742172/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772782205","html_url":"https://github.com/apache/accumulo/pull/3876#issuecomment-1772782205","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3876","id":1772782205,"node_id":"IC_kwDOACaFSM5pqoJ9","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T13:53:05Z","updated_at":"2023-10-20T13:53:05Z","author_association":"CONTRIBUTOR","body":"This has been tested with uno going from 2.1 directly to 3.1 with chopped and external compaction references manually inserted into the metadata table in 2.1 before shutdown.  On upgrade, the removal of those references are reported as:\r\n\r\n```\r\n2023-10-20T13:40:17,350 [upgrade.Upgrader11to12] DEBUG: processing obsolete references for table: accumulo.metadata\r\n2023-10-20T13:40:17,356 [upgrade.Upgrader11to12] WARN : Deleting chopped reference from:accumulo.metadata. Previous split or delete may not have completed cleanly. Ref: mutation: 1;0020\r\n update: chopped:chopped value [delete]\r\n\r\n2023-10-20T13:40:17,356 [upgrade.Upgrader11to12] WARN : Deleting external compaction reference from:accumulo.metadata. Previous compaction may not have completed. Ref: mutation: 1;0020\r\n update: ecomp:ECID:0000001 value [delete]\r\n\r\n2023-10-20T13:40:17,356 [upgrade.Upgrader11to12] WARN : Deleting chopped reference from:accumulo.metadata. Previous split or delete may not have completed cleanly. Ref: mutation: 1;0040\r\n update: chopped:chopped value [delete]\r\n\r\n2023-10-20T13:40:17,356 [upgrade.Upgrader11to12] WARN : Deleting external compaction reference from:accumulo.metadata. Previous compaction may not have completed. Ref: mutation: 1;0040\r\n update: ecomp:ECID:0000001 value [delete]\r\n\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772782205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772985051","html_url":"https://github.com/apache/accumulo/pull/3876#issuecomment-1772985051","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3876","id":1772985051,"node_id":"IC_kwDOACaFSM5prZrb","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T15:48:09Z","updated_at":"2023-10-20T15:48:09Z","author_association":"CONTRIBUTOR","body":"Also verified that a 3.0 --> 3.1 upgrade with an uno instance works.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1772985051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773017530","html_url":"https://github.com/apache/accumulo/pull/3875#issuecomment-1773017530","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3875","id":1773017530,"node_id":"IC_kwDOACaFSM5prhm6","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T16:10:49Z","updated_at":"2023-10-20T16:10:49Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I reviewed the PR in detail and I like it a lot so far with the strategy change. The strategy to only fence/delete files and not tablets and then to just merge away empty tablets definitely simplifies things quite a bit. The switch to use FATE definitely made it a lot easier to do after TGW since you could just append another merge FATE step. The conditional mutation changes I need to look a bit more at but look good to me so far but I am relatively new to looking at conditional mutations. It will be pretty nice that we will be able to concurrently merge/delete at the same time on different ranges in the table.\r\n\r\n**In regards to the test failure:**\r\n\r\nI took a look closely at the test and the changes here will cause the resulting tablets after deletion and also the fencing in some cases to be different, but still correct rows are visible. This is because of the change is strategy with keeping empty tablets and merging. It also leads to a nice side effect of having a bit cleaner metadata as the end result. (i explain more below)\r\n\r\nThe part of the test that is failing is the part that verifies what tablets still exist, it's not checking split points there. With your changes in this PR the resulting tablets are different (as well as fenced files).\r\n\r\nFor example, the first test in DeleteRowsIT under testManyRows() the range used is `(f, h]` so it deletes rows after f and including row h which delete two entire tablets. Under the old deletion strategy this causes the g and h tablets to be deleted and a new tablet is created with f being stretched to i. Because of the stretching we end up with a fenced file that includes (h,i] as that range was not part of the delete range.\r\n\r\nAfter delete we end up with the metadata:\r\n\r\n```\r\nExtent: 1;f;e; File Name: F0000003.rf; Range: (-inf,+inf); Entries: 9, Size: 24\r\nExtent: 1;i;f; File Name: F0000003.rf; Range: [h%00; : [] 9223372036854775807 false,i%00; : [] 9223372036854775807 false); Entries: 9, Size: 25\r\nExtent: 1;j;i; File Name: F0000003.rf; Range: (-inf,+inf); Entries: 9, Size: 24\r\n```\r\n\r\nUnder the new strategy in this PR we don't delete tablets but instead merge empty tablets. After deletion processes we end up with two tablets that still exist but have zero files, (f,g] and (g,h].\r\n\r\nWhen the merge operation runs it removes only the \"g\" empty tablet but keeps the \"h\" tablet even though both of those are empty tablets. We no longer need to fence (h,i] because that tablet still exists as we didn't create a new tablet that stretched from (f,i] so no fencing is required. The end result is we are just left with the following metadata.\r\n\r\n```\r\nExtent: 1;f;e; File Name: F0000036.rf; Range: (-inf,+inf); Entries: 10, Size: 29\r\nExtent: 1;i;h; File Name: F0000036.rf; Range: (-inf,+inf); Entries: 10, Size: 29\r\nExtent: 1;j;i; File Name: F0000036.rf; Range: (-inf,+inf); Entries: 10, Size: 29\r\n```\r\n\r\nRunning the test and the assertion failure it prints out:\r\n\r\n```\r\nExpected :abcdefijklmnopqrstuvwxyz\r\nActual   :abcdefhijklmnopqrstuvwxyz\r\n```\r\nObviously the failure is because the \"h\" split/tablet still exists and only the \"g\" tablet was removed. This is because the merge operation \"includes\" the last row specified when you run it. So in this case the merge Fate Op that is run after Delete includes the \"h\" as the last row so it merges to the tablet that includes that row so in this case \"h\" tablet is kept even though it's empty. I have to think about it more but this is probably just an edge case and may not be a big deal. In order to fix it I think you would need to specify that the merge range goes to the row after the delete range.  As a quick test I tried to just do the following in DeleteRows Fate operation (I had to add a couple getters):\r\n\r\n```java\r\n  @Override\r\n  public Repo<Manager> call(long tid, Manager manager) throws Exception {\r\n    MergeInfo mergeInfo = data.getMergeInfo();\r\n\r\n    // delete or fence files within the deletion range\r\n    deleteTabletFiles(manager, tid, mergeInfo);\r\n\r\n    // merge away empty tablets in the deletion range\r\n   // Merge to the following row\r\n    TableRangeOp d = new TableRangeOp(MergeInfo.Operation.DELETE, data.getNamespaceId(), data.getTableId(),\r\n            mergeInfo.getExtent().prevEndRow(), new Key(mergeInfo.getExtent().endRow()).followingKey(PartialKey.ROW).getRow());\r\n    return new MergeTablets(d.getData());\r\n  }\r\n```\r\n\r\nThis however failed because the \"i\" tablet didn't have the opid, so would need to add that if we wanted to do it:\r\n\r\n```\r\n2023-10-20T11:59:15,960 [merge.MergeTablets] DEBUG: FATE[25e4ddf74c11462b] Merging metadata for 1;h^@;f\r\n2023-10-20T11:59:15,967 [fate.Fate] WARN : Failed to execute Repo FATE[25e4ddf74c11462b]\r\njava.lang.IllegalStateException: FATE[25e4ddf74c11462b] merging tablet 1;i;h had unexpected opid null\r\n        at com.google.common.base.Preconditions.checkState(Preconditions.java:854) ~[guava-32.0.1-jre.jar:?]\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773017530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773208816","html_url":"https://github.com/apache/accumulo/issues/3847#issuecomment-1773208816","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3847","id":1773208816,"node_id":"IC_kwDOACaFSM5psQTw","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T18:31:35Z","updated_at":"2023-10-20T18:31:35Z","author_association":"CONTRIBUTOR","body":"> Given this info, what should be checked within the condition? Given this info, what should be checked within the condition?\r\n\r\n@DomGarguilo I have been looking into this, the LogEntry class is in need of some cleanup and I am going to open an issue about that.  It seems the column qualifer for a walog is a prefix of `-/` followed by a fully qualified URI of a walog.  For this issue we want to ensure the set of column qualifiers for the `log` column family are the same.  This is similar to what we do for the `file` column family.  \r\n\r\nThe LogEntry class does not override equals so can not compare them.  Taking a quick look though the code I did not see LogEntry used as a key in a Set or Map, but could have missed something.  Seems to always be used in List where equals does not matter. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773208816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773234194","html_url":"https://github.com/apache/accumulo/issues/3847#issuecomment-1773234194","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3847","id":1773234194,"node_id":"IC_kwDOACaFSM5psWgS","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T18:51:12Z","updated_at":"2023-10-20T18:51:12Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo  I opened #3878.  LogEntry has so much technical debt that it makes doing anything with it really confusing.  What it is doing is really simple, but the tech debt makes it hard to know what that is.  I spent a while looking around just to see what actually is in the column qualifier.  I even modified some code to print it and ran the Wal sunny test and looked at the print out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773234194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773253138","html_url":"https://github.com/apache/accumulo/issues/3878#issuecomment-1773253138","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3878","id":1773253138,"node_id":"IC_kwDOACaFSM5psbIS","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T18:59:23Z","updated_at":"2023-10-20T18:59:23Z","author_association":"MEMBER","body":"I'll start looking into this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773253138/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773363619","html_url":"https://github.com/apache/accumulo/pull/3876#issuecomment-1773363619","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3876","id":1773363619,"node_id":"IC_kwDOACaFSM5ps2Gj","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-20T20:37:11Z","updated_at":"2023-10-20T20:37:11Z","author_association":"CONTRIBUTOR","body":"@EdColeman - I have started to review this but probably won't finish today however I plan to work this weekend so should finish then. I am going to spend some time testing it myself with Uno, etc to make sure it all looks good. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773363619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773602191","html_url":"https://github.com/apache/accumulo/pull/3875#issuecomment-1773602191","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3875","id":1773602191,"node_id":"IC_kwDOACaFSM5ptwWP","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-21T02:00:40Z","updated_at":"2023-10-21T02:00:40Z","author_association":"CONTRIBUTOR","body":"@cshannon  thanks for the feedback, it was very helpful in fixing the problem.  I pushed 53cd856 based on your feedback.. In that change only tablets that completely fall within the delete range are merged away.  This is almost ready to take out of draft, need to to a bit of cleanup. MergeIT and DeleteRowsIT are passing now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773602191/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773801956","html_url":"https://github.com/apache/accumulo/pull/3875#issuecomment-1773801956","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3875","id":1773801956,"node_id":"IC_kwDOACaFSM5puhHk","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-21T14:06:22Z","updated_at":"2023-10-21T14:06:22Z","author_association":"CONTRIBUTOR","body":"> @cshannon thanks for the feedback, it was very helpful in fixing the problem. I pushed [53cd856](https://github.com/apache/accumulo/commit/53cd8569c44aebc9a36028006970232df6125941) based on your feedback.. In that change only tablets that completely fall within the delete range are merged away. This is almost ready to take out of draft, need to to a bit of cleanup. MergeIT and DeleteRowsIT are passing now.\r\n\r\nGreat, that is good that now the splits and files match so the tests pass and is equivalent. I took a quick peak at the changes and they look good and I can do a final review when it's ready and out of draft. I like the new methods added with `getReserveExtent` and `getMergeExtent` and I think that makes it easier to understand what is going on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773801956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773821219","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1773821219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1773821219,"node_id":"IC_kwDOACaFSM5pul0j","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-21T15:01:29Z","updated_at":"2023-10-21T15:01:29Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I started looking at this and comparing 2.1 and main for what needs to happen for a fix. While looking at 2.1 I realized that the 2.1 branch (with the old chop compactions) does in fact already do the first 3 items on your list but **only on tablets that need to be chopped**, not all tablets as part of the merge. These checks do not exist in main because they were removed with no-chop merge being implemented.\r\n\r\n#### Here is where merge stats is tracking that wals exist with a flag in 2.1 (not a count just that they exist) and then preventing the transition in the verification check for tablets needing to be chopped:\r\n\r\nhttps://github.com/apache/accumulo/blob/324f52b711db908f144c943bcf1bc077af73e39b/server/manager/src/main/java/org/apache/accumulo/manager/state/MergeStats.java#L101-L108\r\n\r\nhttps://github.com/apache/accumulo/blob/324f52b711db908f144c943bcf1bc077af73e39b/server/manager/src/main/java/org/apache/accumulo/manager/state/MergeStats.java#L233-L236\r\n\r\n#### And here is the getGoalState() method verifying wals in 2.1 are empty before setting the goal to UNASSIGNED when waiting for chopped:\r\n\r\nhttps://github.com/apache/accumulo/blob/324f52b711db908f144c943bcf1bc077af73e39b/server/manager/src/main/java/org/apache/accumulo/manager/Manager.java#L650-L659\r\n\r\nI know in #3844 you mentioned that for elasticity things are unique and need to prevent merge/split as you wouldn't be able to find the WALs due to the manager doing the splits. So does that mean that for 2.1 the checks on just for the tablets that need chopping is good enough? This is still new enough to me that I'm not quite sure.\r\n\r\nIf 2.1 is ok than that means the main fix here is to restore the checks for 3.1 (i guess on all tablets still?) and also to add the verification before the actual merge in both 2.1 and 3.1. Otherwise if you think we should still verify no WALs for all tablets, even in 2.1, I can do that as well pretty easily.\r\n\r\nThoughts? \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1773821219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775043110","html_url":"https://github.com/apache/accumulo/pull/3852#issuecomment-1775043110","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3852","id":1775043110,"node_id":"IC_kwDOACaFSM5pzQIm","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T12:03:56Z","updated_at":"2023-10-23T12:03:56Z","author_association":"CONTRIBUTOR","body":"> @dlmarion You requested my review on this, but I feel like it's a bit outside my area of expertise. I'd be interested in a discussion sometime, to get a high level understanding of it, though, along with what's motivating it. Right now, I don't have any opinions on the approach one way or another.\r\n\r\n@ctubbsii - I wasn't sure if you were familiar with the FATE code or not. I figured you may also have some input on the behavior change. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775043110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775050839","html_url":"https://github.com/apache/accumulo/pull/3877#issuecomment-1775050839","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3877","id":1775050839,"node_id":"IC_kwDOACaFSM5pzSBX","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T12:08:42Z","updated_at":"2023-10-23T12:08:42Z","author_association":"CONTRIBUTOR","body":"Is it the case that a `one line reference to a different property` cannot end in a period?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775050839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775409349","html_url":"https://github.com/apache/accumulo/pull/3877#issuecomment-1775409349","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3877","id":1775409349,"node_id":"IC_kwDOACaFSM5p0pjF","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T15:02:53Z","updated_at":"2023-10-23T15:02:53Z","author_association":"CONTRIBUTOR","body":"> Is it the case that a `one line reference to a different property` cannot end in a period?\r\n\r\nNo, it ending with a period is a valid case.\r\nIf the description already ends with a period then it is never compared against the `one line ref` regex.\r\n\r\nThe test checks for the existence of an ending period first. If that check fails, the description is then checked against the `one line ref` regex.\r\n\r\n\r\nIf we don't want the `one line refs` ending with a period we could switch the order of the checks.\r\n```\r\n+      boolean isOneLineRef = prop.getDescription().matches(\"^See \\\\{% jlink -f [\\\\w\\\\.]* %\\\\}$\");\r\n+      if (!isOneLineRef) {\r\n+        assertTrue(prop.getDescription().endsWith(\".\"),\r\n``` \r\n\r\nComparing all the descriptions against the regex first doesn't impact the test completion time as the test still completes in under a second. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775409349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775553113","html_url":"https://github.com/apache/accumulo/pull/3874#issuecomment-1775553113","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3874","id":1775553113,"node_id":"IC_kwDOACaFSM5p1MpZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T16:17:58Z","updated_at":"2023-10-23T16:17:58Z","author_association":"CONTRIBUTOR","body":"> I know you already said there's some API issues, but I just wanted to mention that we should avoid putting the Hadoop type FSDataInputStream into our public API or SPI. I'm not sure if that's the API issue you were talking about or if there's something else.\r\n\r\nYes, that was it. I think I have that resolved now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775553113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775558462","html_url":"https://github.com/apache/accumulo/pull/3877#issuecomment-1775558462","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3877","id":1775558462,"node_id":"IC_kwDOACaFSM5p1N8-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T16:21:13Z","updated_at":"2023-10-23T16:21:13Z","author_association":"CONTRIBUTOR","body":"I'm thinking that we should only have the check that the description ends with a period. Then it doesn't matter what the content is. I'm not sure why we would enforce content in one case and not the other. What if more information is needed before the \"see jlink...\" part?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775558462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775623140","html_url":"https://github.com/apache/accumulo/issues/3825#issuecomment-1775623140","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3825","id":1775623140,"node_id":"IC_kwDOACaFSM5p1dvk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T16:58:11Z","updated_at":"2023-10-23T16:58:11Z","author_association":"CONTRIBUTOR","body":"Closed by #3826 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775623140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775626097","html_url":"https://github.com/apache/accumulo/issues/3834#issuecomment-1775626097","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3834","id":1775626097,"node_id":"IC_kwDOACaFSM5p1edx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T16:59:56Z","updated_at":"2023-10-23T16:59:56Z","author_association":"CONTRIBUTOR","body":"I modified the Jenkins elasticity build to remove the sunny profile so that we can determine which ITs are failing. When that is done I will add the `@Ignore` annotation on the failing tests and create the issue to remove them.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775626097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775661442","html_url":"https://github.com/apache/accumulo/issues/3845#issuecomment-1775661442","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3845","id":1775661442,"node_id":"IC_kwDOACaFSM5p1nGC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T17:20:31Z","updated_at":"2023-10-23T17:21:52Z","author_association":"CONTRIBUTOR","body":"@cshannon I have been looking at the 2.1 and 3.1 code.  As an overall goal for 2.1.x and 3.1, do the following goals seem correct?\r\n\r\n 1. Only transition from WAITING_FOR_OFFLINE to MERGE if all tablets have no locations and no wals.\r\n 2. Throw an exception if a location or wal is seen in the metadata table when in the MERGE state.\r\n\r\nFor goal 1, the 2.1 code does seems mostly correct.  However when a tablet has wals and the merge state is WAITING_FOR_OFFLINE I am not sure 2.1 would host that tablet so it could be recovered.  Seems like [this code](https://github.com/apache/accumulo/blob/9dfa9e3b6489a8dc7e00d9377680bb91ef87b242/server/manager/src/main/java/org/apache/accumulo/manager/Manager.java#L660) may keep the tablet unassigned when it has wals which would prevent recovery so maybe in 2.1 a merge could get stuck if wals come into existence while its in WAITING_FOR_OFFLINE. For 3.1, it does seems that modifications are needed for goal 1 as you mentioned.\r\n\r\nFor goal 1, thinking we could have a check for wals in `MergeStats.verifyMergeConsistency()` that returns false.  This could be done in 2.1 and 3.1.  It may be redundant in 2.1, but would not hurt.   If we have that, then when a tablet has wals and the merge state is WAITING_FOR_OFFLINE then the tablet goal state should be HOSTED so it can be recovered.\r\n\r\nFor goal 2, if we are not doing that validation in the current code then I think it would be good to add it in 2.1 and 3.1\r\n\r\nI tried to think of ways to test this scenario in an IT and could not think of a good way to do it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775661442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775677073","html_url":"https://github.com/apache/accumulo/issues/3844#issuecomment-1775677073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3844","id":1775677073,"node_id":"IC_kwDOACaFSM5p1q6R","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T17:28:17Z","updated_at":"2023-10-23T17:29:28Z","author_association":"CONTRIBUTOR","body":"If a tablet has a hosting goal of NEVER and it has wals, then merge/split would not be able to complete.  It would need to host the tablet to have it recovered.  It should be able to throw an error in this case as it can be detected before merge/split starts.\r\n\r\n@dlmarion you had mentioned making log recovery separate from hosting of a tablet in a conversation we had a while ago.  I can not remember the context as to why you suggested that. Having that capability that would clean up this situation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775677073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775767859","html_url":"https://github.com/apache/accumulo/issues/3844#issuecomment-1775767859","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3844","id":1775767859,"node_id":"IC_kwDOACaFSM5p2BEz","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-10-23T18:23:13Z","updated_at":"2023-10-23T18:23:13Z","author_association":"CONTRIBUTOR","body":"Would it be an issue in general if a tablets with a hosting goal of NEVER having a wal at all?  If the wal can never be processed, then we'd need to keep it around \"forever\" impacting space and recovery?  For recovery, could we end up with lots of files that need to be processed - only to find that there is nothing that can be done?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1775767859/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]