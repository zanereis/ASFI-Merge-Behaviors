[{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1517429666","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1517429666","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1517429666,"node_id":"IC_kwDOAAMmWM5aciOi","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-21T07:58:46Z","updated_at":"2023-04-21T07:58:46Z","author_association":"CONTRIBUTOR","body":"After talking offline we decided the best way forward would be to provide here some feature flag [CASSANDRA-18301](https://issues.apache.org/jira/browse/CASSANDRA-18301) could piggyback upon or replace. Hence I'll add that with the underlying assumption mixed version clusters (5.0 nc <-> 5.0 oa) will always communicate on the lower common MessagingVersion in the cluster keeping things coherent.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1517429666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1517998325","html_url":"https://github.com/apache/cassandra/pull/2121#issuecomment-1517998325","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2121","id":1517998325,"node_id":"IC_kwDOAAMmWM5aetD1","user":{"login":"maxim-chn","id":32020069,"node_id":"MDQ6VXNlcjMyMDIwMDY5","avatar_url":"https://avatars.githubusercontent.com/u/32020069?v=4","gravatar_id":"","url":"https://api.github.com/users/maxim-chn","html_url":"https://github.com/maxim-chn","followers_url":"https://api.github.com/users/maxim-chn/followers","following_url":"https://api.github.com/users/maxim-chn/following{/other_user}","gists_url":"https://api.github.com/users/maxim-chn/gists{/gist_id}","starred_url":"https://api.github.com/users/maxim-chn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxim-chn/subscriptions","organizations_url":"https://api.github.com/users/maxim-chn/orgs","repos_url":"https://api.github.com/users/maxim-chn/repos","events_url":"https://api.github.com/users/maxim-chn/events{/privacy}","received_events_url":"https://api.github.com/users/maxim-chn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-21T15:25:52Z","updated_at":"2023-04-21T15:25:52Z","author_association":"NONE","body":"The ticket has the full explanation why this is rejected.\r\n\r\nIn a couple of words, `superuser privilege` and `permission` are distinct concepts.  \r\nWe should not output data regarding superuser capabilities in a command that is intended to list permissions.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1517998325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1520881142","html_url":"https://github.com/apache/cassandra/pull/2198#issuecomment-1520881142","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2198","id":1520881142,"node_id":"IC_kwDOAAMmWM5aps32","user":{"login":"polandll","id":3915061,"node_id":"MDQ6VXNlcjM5MTUwNjE=","avatar_url":"https://avatars.githubusercontent.com/u/3915061?v=4","gravatar_id":"","url":"https://api.github.com/users/polandll","html_url":"https://github.com/polandll","followers_url":"https://api.github.com/users/polandll/followers","following_url":"https://api.github.com/users/polandll/following{/other_user}","gists_url":"https://api.github.com/users/polandll/gists{/gist_id}","starred_url":"https://api.github.com/users/polandll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/polandll/subscriptions","organizations_url":"https://api.github.com/users/polandll/orgs","repos_url":"https://api.github.com/users/polandll/repos","events_url":"https://api.github.com/users/polandll/events{/privacy}","received_events_url":"https://api.github.com/users/polandll/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-24T21:55:54Z","updated_at":"2023-04-24T21:55:54Z","author_association":"CONTRIBUTOR","body":"CLosing, due to too many conflicts. Opened new PR.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1520881142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1522279681","html_url":"https://github.com/apache/cassandra/pull/2288#issuecomment-1522279681","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2288","id":1522279681,"node_id":"IC_kwDOAAMmWM5avCUB","user":{"login":"jonmeredith","id":64318,"node_id":"MDQ6VXNlcjY0MzE4","avatar_url":"https://avatars.githubusercontent.com/u/64318?v=4","gravatar_id":"","url":"https://api.github.com/users/jonmeredith","html_url":"https://github.com/jonmeredith","followers_url":"https://api.github.com/users/jonmeredith/followers","following_url":"https://api.github.com/users/jonmeredith/following{/other_user}","gists_url":"https://api.github.com/users/jonmeredith/gists{/gist_id}","starred_url":"https://api.github.com/users/jonmeredith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonmeredith/subscriptions","organizations_url":"https://api.github.com/users/jonmeredith/orgs","repos_url":"https://api.github.com/users/jonmeredith/repos","events_url":"https://api.github.com/users/jonmeredith/events{/privacy}","received_events_url":"https://api.github.com/users/jonmeredith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-25T19:06:31Z","updated_at":"2023-04-25T19:06:31Z","author_association":"CONTRIBUTOR","body":"merged","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1522279681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1522878800","html_url":"https://github.com/apache/cassandra/pull/2295#issuecomment-1522878800","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2295","id":1522878800,"node_id":"IC_kwDOAAMmWM5axUlQ","user":{"login":"jacek-lewandowski","id":6516951,"node_id":"MDQ6VXNlcjY1MTY5NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6516951?v=4","gravatar_id":"","url":"https://api.github.com/users/jacek-lewandowski","html_url":"https://github.com/jacek-lewandowski","followers_url":"https://api.github.com/users/jacek-lewandowski/followers","following_url":"https://api.github.com/users/jacek-lewandowski/following{/other_user}","gists_url":"https://api.github.com/users/jacek-lewandowski/gists{/gist_id}","starred_url":"https://api.github.com/users/jacek-lewandowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacek-lewandowski/subscriptions","organizations_url":"https://api.github.com/users/jacek-lewandowski/orgs","repos_url":"https://api.github.com/users/jacek-lewandowski/repos","events_url":"https://api.github.com/users/jacek-lewandowski/events{/privacy}","received_events_url":"https://api.github.com/users/jacek-lewandowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-26T06:51:46Z","updated_at":"2023-04-26T06:51:46Z","author_association":"CONTRIBUTOR","body":"Thank you @dcapwell for quick feedback, really appreciate that!","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1522878800/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1523901392","html_url":"https://github.com/apache/cassandra/pull/2256#issuecomment-1523901392","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2256","id":1523901392,"node_id":"IC_kwDOAAMmWM5a1OPQ","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-26T18:58:24Z","updated_at":"2023-04-26T18:58:24Z","author_association":"CONTRIBUTOR","body":"Rebased feedback onto latest and created one one (keep branches separate) https://github.com/iamaleksey/cassandra/pull/2","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1523901392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1526370699","html_url":"https://github.com/apache/cassandra/pull/2294#issuecomment-1526370699","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2294","id":1526370699,"node_id":"IC_kwDOAAMmWM5a-pGL","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-27T20:21:34Z","updated_at":"2023-04-27T20:21:34Z","author_association":"MEMBER","body":"Ticket is CASSANDRA-18228 (not CASS-18228)\r\nPrevious PR was https://github.com/apache/cassandra/pull/2198 \r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1526370699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1526393263","html_url":"https://github.com/apache/cassandra/pull/2294#issuecomment-1526393263","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2294","id":1526393263,"node_id":"IC_kwDOAAMmWM5a-umv","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-27T20:32:28Z","updated_at":"2023-04-27T20:32:28Z","author_association":"MEMBER","body":"review complete. at minimum two changes required. ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1526393263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1526646834","html_url":"https://github.com/apache/cassandra/pull/2256#issuecomment-1526646834","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2256","id":1526646834,"node_id":"IC_kwDOAAMmWM5a_sgy","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-27T22:34:34Z","updated_at":"2023-04-27T22:34:34Z","author_association":"CONTRIBUTOR","body":"With https://issues.apache.org/jira/browse/CASSANDRA-18485 the concern of breaking simulator may no longer be true","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1526646834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1528821374","html_url":"https://github.com/apache/cassandra/pull/2294#issuecomment-1528821374","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2294","id":1528821374,"node_id":"IC_kwDOAAMmWM5bH_Z-","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T16:12:43Z","updated_at":"2023-04-29T16:12:43Z","author_association":"MEMBER","body":"Committed as 998a98eae8317d85f5ba425cfd33b2ba975a20d9 ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1528821374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1528835719","html_url":"https://github.com/apache/cassandra/pull/2280#issuecomment-1528835719","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2280","id":1528835719,"node_id":"IC_kwDOAAMmWM5bIC6H","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T17:35:58Z","updated_at":"2023-04-29T17:35:58Z","author_association":"MEMBER","body":"Committed with https://github.com/apache/cassandra/commit/90d0857d341a1735edfa9450c4488372b3b44f87 to 3.11, 4.0, and 4.11\r\n\r\n@steve-putala , we will need a separate PR to fix these errors in trunk, if they exist there, since the doc structure has changed.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1528835719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1528835752","html_url":"https://github.com/apache/cassandra/pull/2280#issuecomment-1528835752","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2280","id":1528835752,"node_id":"IC_kwDOAAMmWM5bIC6o","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-04-29T17:36:13Z","updated_at":"2023-04-29T17:36:13Z","author_association":"MEMBER","body":"and thank you for the contribution !","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1528835752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1529988979","html_url":"https://github.com/apache/cassandra/pull/2300#issuecomment-1529988979","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2300","id":1529988979,"node_id":"IC_kwDOAAMmWM5bMcdz","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-01T17:36:11Z","updated_at":"2023-05-01T17:36:11Z","author_association":"CONTRIBUTOR","body":"I wonder why go down this route when we could offer a simpler solution.\r\n\r\nyaml currently handles everything but validation/listeners, so could decorate the `Properties` with a new validation and listener properties\r\n\r\n```\r\npublic interface Listener<A, B>\r\n    {\r\n        default void onPreSet(A object, B value) {}\r\n        default void onPostSet(A object, B value) {}\r\n    }\r\n\r\n    public static class CompositeListener<A, B> implements Listener<A, B>\r\n    {\r\n        private final List<Listener<A, B>> listeners;\r\n\r\n        public CompositeListener(List<Listener<A, B>> listeners)\r\n        {\r\n            this.listeners = listeners;\r\n        }\r\n\r\n        @Override\r\n        public void onPreSet(A object, B value)\r\n        {\r\n            for (Listener<A, B> l : listeners)\r\n                l.onPreSet(object, value);\r\n        }\r\n\r\n        @Override\r\n        public void onPostSet(A object, B value)\r\n        {\r\n            for (Listener<A, B> l : listeners)\r\n                l.onPostSet(object, value);\r\n        }\r\n    }\r\n\r\n    public interface Validator<A, B> extends Listener<A, B>\r\n    {\r\n        void validate(B value);\r\n        default void validate(A object, B value)\r\n        {\r\n            validate(value);\r\n        }\r\n\r\n        @Override\r\n        default void onPreSet(A object, B value)\r\n        {\r\n            validate(object, value);\r\n        }\r\n    }\r\n\r\n    public static class ListenableProperty<A, B> extends ForwardingProperty\r\n    {\r\n        private final Listener<A, B> listener;\r\n        public ListenableProperty(String name, Property property, Listener<A, B> listener)\r\n        {\r\n            super(name, property);\r\n            this.listener = listener;\r\n        }\r\n\r\n        @Override\r\n        public void set(Object o, Object o1) throws Exception\r\n        {\r\n            listener.onPreSet((A) o, (B) o1);\r\n            super.set(o, o1);\r\n            listener.onPostSet((A) o, (B) o1);\r\n        }\r\n    }\r\n```\r\n\r\nWe need something to hold the `Map<String, Property>, so flexible where this is, but feel like `DatabaseDescriptor` is likely the best place.\r\n\r\nWith this you only worry about `Property` and don't need to worry about validation/notification as the property was decorated to add such capabilities (and don't pay the cost to check this if nothing validates or listens)...  We also can set this up in `DatabaseDescriptor` so its immutable (we don't need mutability with this), which mostly solves the mapping problem (as DD knows everything, so can build this).\r\n\r\nWith this, we keep the logic small, 100% align with YAML (can't possibly drift as YAML is what does the string mapping), and solve the \"how does the framework\" know problem as we push this to `DatabaseDescriptor`, the place that actually knows about this.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1529988979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1532093617","html_url":"https://github.com/apache/cassandra/pull/2303#issuecomment-1532093617","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2303","id":1532093617,"node_id":"IC_kwDOAAMmWM5bUeSx","user":{"login":"smiklosovic","id":588603,"node_id":"MDQ6VXNlcjU4ODYwMw==","avatar_url":"https://avatars.githubusercontent.com/u/588603?v=4","gravatar_id":"","url":"https://api.github.com/users/smiklosovic","html_url":"https://github.com/smiklosovic","followers_url":"https://api.github.com/users/smiklosovic/followers","following_url":"https://api.github.com/users/smiklosovic/following{/other_user}","gists_url":"https://api.github.com/users/smiklosovic/gists{/gist_id}","starred_url":"https://api.github.com/users/smiklosovic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/smiklosovic/subscriptions","organizations_url":"https://api.github.com/users/smiklosovic/orgs","repos_url":"https://api.github.com/users/smiklosovic/repos","events_url":"https://api.github.com/users/smiklosovic/events{/privacy}","received_events_url":"https://api.github.com/users/smiklosovic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-02T20:18:08Z","updated_at":"2023-05-02T20:18:08Z","author_association":"CONTRIBUTOR","body":"@adelapena please add this tool into `debian/cassandra-tools.install` file as well as into `redhat/cassandra.spec` ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1532093617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1532595301","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1532595301","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1532595301,"node_id":"IC_kwDOAAMmWM5bWYxl","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T07:52:45Z","updated_at":"2023-05-03T07:52:45Z","author_association":"CONTRIBUTOR","body":"@adelapena I just pushed some commits with a -D feature flag where:\r\n- You can start 5.0 nodes with the nc and 2038y limit\r\n- Those nodes work in a mixed cluster with 4.1nc nodes\r\n- Once you have upgraded all to 5.0nc you can upgrade them then to 5.0oa\r\n- When the last node updates to 5.0oa the new 2106 limit kicks in.\r\n- There are new junit-oa variants in circle and a new jvm upgrade dtest where everything [passes](https://app.circleci.com/pipelines/github/bereng/cassandra/926/workflows/a4bdf7c7-e2c7-43e3-b964-21efad32dfc2)\r\n\r\nwdyt? Thx in advance.\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1532595301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1533397299","html_url":"https://github.com/apache/cassandra/pull/2256#issuecomment-1533397299","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2256","id":1533397299,"node_id":"IC_kwDOAAMmWM5bZckz","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-03T17:02:19Z","updated_at":"2023-05-03T17:02:19Z","author_association":"CONTRIBUTOR","body":"Overall LGTM, think there are just a few small feedback pending.  The biggest issue I think is the shutdown deadlock, this would impact jvm-dtest so should be fixed","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1533397299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1534971213","html_url":"https://github.com/apache/cassandra/pull/2256#issuecomment-1534971213","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2256","id":1534971213,"node_id":"IC_kwDOAAMmWM5bfc1N","user":{"login":"iamaleksey","id":10309,"node_id":"MDQ6VXNlcjEwMzA5","avatar_url":"https://avatars.githubusercontent.com/u/10309?v=4","gravatar_id":"","url":"https://api.github.com/users/iamaleksey","html_url":"https://github.com/iamaleksey","followers_url":"https://api.github.com/users/iamaleksey/followers","following_url":"https://api.github.com/users/iamaleksey/following{/other_user}","gists_url":"https://api.github.com/users/iamaleksey/gists{/gist_id}","starred_url":"https://api.github.com/users/iamaleksey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamaleksey/subscriptions","organizations_url":"https://api.github.com/users/iamaleksey/orgs","repos_url":"https://api.github.com/users/iamaleksey/repos","events_url":"https://api.github.com/users/iamaleksey/events{/privacy}","received_events_url":"https://api.github.com/users/iamaleksey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-04T15:20:47Z","updated_at":"2023-05-04T17:34:10Z","author_association":"MEMBER","body":"> Looks like we can't shutdown and deadlock due to haveWork.tryAcquireUntil(1, wakeUpAt); being in the lock?\r\n\r\nThat was a very obvious oversight. The synchronised block was supposed to be tiny but somehow the closing bracket went on to cover the entire thing. Pushed the fix (half fix).\r\n\r\nEDIT: I think this should be all, shutdown-related deadlocks-wise.\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1534971213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1535831029","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1535831029","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1535831029,"node_id":"IC_kwDOAAMmWM5biuv1","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-05T07:19:26Z","updated_at":"2023-05-05T07:19:44Z","author_association":"CONTRIBUTOR","body":"Just pushed the rename of the FF. Also please let me know if I can resolve all the recent open comments we have. Thx.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1535831029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1539906777","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1539906777","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1539906777,"node_id":"IC_kwDOAAMmWM5byRzZ","user":{"login":"mike-tr-adamson","id":2841496,"node_id":"MDQ6VXNlcjI4NDE0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2841496?v=4","gravatar_id":"","url":"https://api.github.com/users/mike-tr-adamson","html_url":"https://github.com/mike-tr-adamson","followers_url":"https://api.github.com/users/mike-tr-adamson/followers","following_url":"https://api.github.com/users/mike-tr-adamson/following{/other_user}","gists_url":"https://api.github.com/users/mike-tr-adamson/gists{/gist_id}","starred_url":"https://api.github.com/users/mike-tr-adamson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mike-tr-adamson/subscriptions","organizations_url":"https://api.github.com/users/mike-tr-adamson/orgs","repos_url":"https://api.github.com/users/mike-tr-adamson/repos","events_url":"https://api.github.com/users/mike-tr-adamson/events{/privacy}","received_events_url":"https://api.github.com/users/mike-tr-adamson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-09T10:32:29Z","updated_at":"2023-05-09T10:32:29Z","author_association":"CONTRIBUTOR","body":"@dcapwell Is this ready for review or are you still actively working on it?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1539906777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1541352411","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1541352411","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1541352411,"node_id":"IC_kwDOAAMmWM5b3yvb","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T04:57:45Z","updated_at":"2023-05-10T04:57:45Z","author_association":"CONTRIBUTOR","body":"@belliottsmith ,\r\n\r\nwe have added a [feature flag](https://github.com/bereng/cassandra/blob/CASSANDRA-14227-trunk/src/java/org/apache/cassandra/config/CassandraRelevantProperties.java#L379) that defaults to the current behavior, you toggle it at your discretion during the upgrade process. There is an [example test here](https://github.com/bereng/cassandra/blob/CASSANDRA-14227-trunk/test/distributed/org/apache/cassandra/distributed/upgrade/MixedModeTTLOverflowUpgradeTest.java) showing how it works.\r\n\r\nWe have also added new circle 'oa' jobs so the tests run both in 'nc' and 'oa'. Besides some circle loose ends, a rebase and final perf testing we think this is ready. Are you happy with this and I can get ready to merge? are you going to review the full PR and I should wait?\r\n\r\nThanks in advance.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1541352411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1541939140","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1541939140","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1541939140,"node_id":"IC_kwDOAAMmWM5b6B_E","user":{"login":"belliottsmith","id":5220766,"node_id":"MDQ6VXNlcjUyMjA3NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5220766?v=4","gravatar_id":"","url":"https://api.github.com/users/belliottsmith","html_url":"https://github.com/belliottsmith","followers_url":"https://api.github.com/users/belliottsmith/followers","following_url":"https://api.github.com/users/belliottsmith/following{/other_user}","gists_url":"https://api.github.com/users/belliottsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/belliottsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/belliottsmith/subscriptions","organizations_url":"https://api.github.com/users/belliottsmith/orgs","repos_url":"https://api.github.com/users/belliottsmith/repos","events_url":"https://api.github.com/users/belliottsmith/events{/privacy}","received_events_url":"https://api.github.com/users/belliottsmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T10:58:28Z","updated_at":"2023-05-10T10:58:28Z","author_association":"CONTRIBUTOR","body":"Perfect, thanks @bereng. Appreciate you making this change.\r\n\r\nI have only one query really, which is whether it would be better to quickly port this to a yaml property as suggested in the test, as it would simplify matters I think? We could eliminate the UPGRADING enum value?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1541939140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1542064156","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1542064156","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1542064156,"node_id":"IC_kwDOAAMmWM5b6ggc","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T11:49:23Z","updated_at":"2023-05-10T11:49:23Z","author_association":"CONTRIBUTOR","body":"Hi @belliottsmith ,\r\n\r\nyes a yaml property was my first thought. But we have lots of statics and statics depending on other statics. When I tried that approach I quickly got into statics hell on init hence the current approach which was easier. In any case I think it's quite flexible as it stands that come the time sbdy wanted to change it it doesn't impose much.\r\n\r\nThe UPGRADING enum value we have to keep it imo. Here we have to check other node's versions to know how we should behave i.e.. That has a cost, it might even be in a hot path, and future features might rely on CQL, TCM or other costly checks. We want to tell the node he's out of that state and to avoid all that extra load. Also you want to stabilize the cluster in the upgraded state, where accidentally starting a node in an older version i.e., won't make the cluster flap between old/new behaviors accidentally. So yes I agree it'd be prettier and easy to reason with only 2 states but the 3rd one brings good advantages imo.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1542064156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1542936191","html_url":"https://github.com/apache/cassandra/pull/2224#issuecomment-1542936191","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2224","id":1542936191,"node_id":"IC_kwDOAAMmWM5b91Z_","user":{"login":"ivo2d","id":6201250,"node_id":"MDQ6VXNlcjYyMDEyNTA=","avatar_url":"https://avatars.githubusercontent.com/u/6201250?v=4","gravatar_id":"","url":"https://api.github.com/users/ivo2d","html_url":"https://github.com/ivo2d","followers_url":"https://api.github.com/users/ivo2d/followers","following_url":"https://api.github.com/users/ivo2d/following{/other_user}","gists_url":"https://api.github.com/users/ivo2d/gists{/gist_id}","starred_url":"https://api.github.com/users/ivo2d/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivo2d/subscriptions","organizations_url":"https://api.github.com/users/ivo2d/orgs","repos_url":"https://api.github.com/users/ivo2d/repos","events_url":"https://api.github.com/users/ivo2d/events{/privacy}","received_events_url":"https://api.github.com/users/ivo2d/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-10T23:37:42Z","updated_at":"2023-05-10T23:37:42Z","author_association":"NONE","body":"@smiklosovic @bipinprasad any chance this can merge into 3.11 as it is critical and it has been in progress for a couple of months? I know you have stopped security patching a week ago, but if you can please do it, I would appreciate it. :) ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1542936191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1543369595","html_url":"https://github.com/apache/cassandra/pull/2046#issuecomment-1543369595","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2046","id":1543369595,"node_id":"IC_kwDOAAMmWM5b_fN7","user":{"login":"jacek-lewandowski","id":6516951,"node_id":"MDQ6VXNlcjY1MTY5NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6516951?v=4","gravatar_id":"","url":"https://api.github.com/users/jacek-lewandowski","html_url":"https://github.com/jacek-lewandowski","followers_url":"https://api.github.com/users/jacek-lewandowski/followers","following_url":"https://api.github.com/users/jacek-lewandowski/following{/other_user}","gists_url":"https://api.github.com/users/jacek-lewandowski/gists{/gist_id}","starred_url":"https://api.github.com/users/jacek-lewandowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacek-lewandowski/subscriptions","organizations_url":"https://api.github.com/users/jacek-lewandowski/orgs","repos_url":"https://api.github.com/users/jacek-lewandowski/repos","events_url":"https://api.github.com/users/jacek-lewandowski/events{/privacy}","received_events_url":"https://api.github.com/users/jacek-lewandowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T05:42:48Z","updated_at":"2023-05-11T05:42:48Z","author_association":"CONTRIBUTOR","body":"Committed: https://github.com/apache/cassandra/commit/f6509086483983176f82a4b72912927693b6e573\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1543369595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1544059900","html_url":"https://github.com/apache/cassandra/pull/2319#issuecomment-1544059900","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2319","id":1544059900,"node_id":"IC_kwDOAAMmWM5cCHv8","user":{"login":"bschoening","id":5796692,"node_id":"MDQ6VXNlcjU3OTY2OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5796692?v=4","gravatar_id":"","url":"https://api.github.com/users/bschoening","html_url":"https://github.com/bschoening","followers_url":"https://api.github.com/users/bschoening/followers","following_url":"https://api.github.com/users/bschoening/following{/other_user}","gists_url":"https://api.github.com/users/bschoening/gists{/gist_id}","starred_url":"https://api.github.com/users/bschoening/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschoening/subscriptions","organizations_url":"https://api.github.com/users/bschoening/orgs","repos_url":"https://api.github.com/users/bschoening/repos","events_url":"https://api.github.com/users/bschoening/events{/privacy}","received_events_url":"https://api.github.com/users/bschoening/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T14:12:09Z","updated_at":"2023-05-11T14:12:09Z","author_association":"CONTRIBUTOR","body":"+1 LGTM","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1544059900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1544356516","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1544356516","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1544356516,"node_id":"IC_kwDOAAMmWM5cDQKk","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T17:01:06Z","updated_at":"2023-05-11T17:01:06Z","author_association":"CONTRIBUTOR","body":"@mike-tr-adamson \r\n\r\n> Is this ready for review or are you still actively working on it?\r\n\r\nyes, its ready for review... I make tweaks over time as I think about it, but that's mostly to add more tests; the core patch is stable","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1544356516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1544718379","html_url":"https://github.com/apache/cassandra/pull/1466#issuecomment-1544718379","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1466","id":1544718379,"node_id":"IC_kwDOAAMmWM5cEogr","user":{"login":"maedhroz","id":630857,"node_id":"MDQ6VXNlcjYzMDg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/630857?v=4","gravatar_id":"","url":"https://api.github.com/users/maedhroz","html_url":"https://github.com/maedhroz","followers_url":"https://api.github.com/users/maedhroz/followers","following_url":"https://api.github.com/users/maedhroz/following{/other_user}","gists_url":"https://api.github.com/users/maedhroz/gists{/gist_id}","starred_url":"https://api.github.com/users/maedhroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maedhroz/subscriptions","organizations_url":"https://api.github.com/users/maedhroz/orgs","repos_url":"https://api.github.com/users/maedhroz/repos","events_url":"https://api.github.com/users/maedhroz/events{/privacy}","received_events_url":"https://api.github.com/users/maedhroz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-11T21:42:12Z","updated_at":"2023-05-11T21:42:12Z","author_association":"CONTRIBUTOR","body":"Closed in favor of https://github.com/apache/cassandra/pull/2327","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1544718379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1545408898","html_url":"https://github.com/apache/cassandra/pull/2298#issuecomment-1545408898","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2298","id":1545408898,"node_id":"IC_kwDOAAMmWM5cHRGC","user":{"login":"belliottsmith","id":5220766,"node_id":"MDQ6VXNlcjUyMjA3NjY=","avatar_url":"https://avatars.githubusercontent.com/u/5220766?v=4","gravatar_id":"","url":"https://api.github.com/users/belliottsmith","html_url":"https://github.com/belliottsmith","followers_url":"https://api.github.com/users/belliottsmith/followers","following_url":"https://api.github.com/users/belliottsmith/following{/other_user}","gists_url":"https://api.github.com/users/belliottsmith/gists{/gist_id}","starred_url":"https://api.github.com/users/belliottsmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/belliottsmith/subscriptions","organizations_url":"https://api.github.com/users/belliottsmith/orgs","repos_url":"https://api.github.com/users/belliottsmith/repos","events_url":"https://api.github.com/users/belliottsmith/events{/privacy}","received_events_url":"https://api.github.com/users/belliottsmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T08:55:48Z","updated_at":"2023-05-12T08:55:48Z","author_association":"CONTRIBUTOR","body":"Could I get a +1 for this, so we can start working on a shared base? Just realised it hadn't been approved; have merged the corresponding accord PR.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1545408898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1545894308","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1545894308","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1545894308,"node_id":"IC_kwDOAAMmWM5cJHmk","user":{"login":"mike-tr-adamson","id":2841496,"node_id":"MDQ6VXNlcjI4NDE0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2841496?v=4","gravatar_id":"","url":"https://api.github.com/users/mike-tr-adamson","html_url":"https://github.com/mike-tr-adamson","followers_url":"https://api.github.com/users/mike-tr-adamson/followers","following_url":"https://api.github.com/users/mike-tr-adamson/following{/other_user}","gists_url":"https://api.github.com/users/mike-tr-adamson/gists{/gist_id}","starred_url":"https://api.github.com/users/mike-tr-adamson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mike-tr-adamson/subscriptions","organizations_url":"https://api.github.com/users/mike-tr-adamson/orgs","repos_url":"https://api.github.com/users/mike-tr-adamson/repos","events_url":"https://api.github.com/users/mike-tr-adamson/events{/privacy}","received_events_url":"https://api.github.com/users/mike-tr-adamson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T15:08:09Z","updated_at":"2023-05-12T15:08:09Z","author_association":"CONTRIBUTOR","body":"I'd like to put some questions here that are outside of the review and are mainly related to the scope of the ticket and what we are expecting to support at the end.\r\n\r\nThe tickets states that we are producing a fixed-length, frozen array with non-null values. Are we expecting these values to be primitive types? What I mean by this is could we expect something like `INSERT INTO t (pk, vec) VALUES (0, [1.0, sum(1.0, 2.0), 3.0])`? Meaning do we want to support function calls in the creation of the array?\r\n\r\nIf we disallow this (which would be my preference) we could simplify our type support greatly by removing the need for non-terminal support.\r\n\r\n@dcapwell WDYT?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1545894308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1545981782","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1545981782","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1545981782,"node_id":"IC_kwDOAAMmWM5cJc9W","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T16:15:29Z","updated_at":"2023-05-12T16:15:29Z","author_association":"CONTRIBUTOR","body":">  Are we expecting these values to be primitive types\r\n\r\nNope, this limitation was removed in the dev mailing list.  The requirement is support for any type, including stuff like `map` and `text`.  My stance is that the complexity for the type isn't more complex to have such a case, as a `ShortType` is variable length (don't know history on why... its fixed length but the type says its not...), so is `IntegerType`... so by allowing fixed and variable length types, we make sure that all primitive types work, and users can choose to use this type in other, non ML, use cases.\r\n\r\n> INSERT INTO t (pk, vec) VALUES (0, [1.0, sum(1.0, 2.0), 3.0])\r\n\r\nI never remember how functions work in CQL... in most DBs I expect `sum(1, 2)` to be converted to `3` at binding time, but I think we defer these until execution time...  ignoring this detail, conceptually yes, we should allow such behavior as long as the grammar allows (grammar doesn't allow functions in all places).  If the grammar supports, I can work on a test to make sure this is handled.\r\n\r\nI actually created a CQL fuzz tester for Accord, but been debating if I should add to tree or not (there is overlap with what Harry does... which is why I question)... That fuzz tester builds a AST of what is allowed in CQL for each type, so would be a perfect way to make sure this behavior works... I tend to prefer generic/property tests rather than single type tests... which is why this patch is so large <_<...\r\n\r\n> If we disallow this (which would be my preference) we could simplify our type support greatly by removing the need for non-terminal support.\r\n\r\nMy personal stance is that CQL is way too much special casing, so as a user I have a hard time knowing what to expect (I hate frozen vs multi-cell... they define their own semantics, so you have to know implementation details of the db...)... if the grammar allows functions in the value, then `VectorType` *must* allow as well... \r\n\r\nThanks @mike-tr-adamson for the review, ill make a few changes and let you know when I push","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1545981782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1546237333","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1546237333","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1546237333,"node_id":"IC_kwDOAAMmWM5cKbWV","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T20:12:30Z","updated_at":"2023-05-12T20:12:30Z","author_association":"CONTRIBUTOR","body":"> What I mean by this is could we expect something like INSERT INTO t (pk, vec) VALUES (0, [1.0, sum(1.0, 2.0), 3.0])? Meaning do we want to support function calls in the creation of the array?\r\n\r\nI created tests for this, this works just fine.  I can't use `sum` as that is an aggregate function, so switched to `1 + 2`","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1546237333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1546237529","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1546237529","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1546237529,"node_id":"IC_kwDOAAMmWM5cKbZZ","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-12T20:12:44Z","updated_at":"2023-05-12T20:12:44Z","author_association":"CONTRIBUTOR","body":"@mike-tr-adamson believe I fixed or addressed all comments","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1546237529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1547390705","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1547390705","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1547390705,"node_id":"IC_kwDOAAMmWM5cO07x","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-15T08:10:45Z","updated_at":"2023-05-15T08:10:45Z","author_association":"CONTRIBUTOR","body":"@adelapena I just gave it another go at moving the FF to yaml. The problem is when executing junit-oa and similar; junit statics correctly default to nc as many don't read the yaml or extend CQLTester. Hence I had to preserve an env variable just so that in CI we set up statics correctly. Let me know what you think. Thx in advance.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1547390705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1547993431","html_url":"https://github.com/apache/cassandra/pull/2337#issuecomment-1547993431","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2337","id":1547993431,"node_id":"IC_kwDOAAMmWM5cRIFX","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-15T14:35:39Z","updated_at":"2023-05-15T14:35:39Z","author_association":"CONTRIBUTOR","body":"Sent PR to the wrong remote, sorry","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1547993431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1548198355","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1548198355","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1548198355,"node_id":"IC_kwDOAAMmWM5cR6HT","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-15T16:43:37Z","updated_at":"2023-05-15T16:43:37Z","author_association":"CONTRIBUTOR","body":"@mike-tr-adamson @Maxwell-Guo replied to or fixed all feedback","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1548198355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1549752738","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1549752738","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1549752738,"node_id":"IC_kwDOAAMmWM5cX1mi","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T14:08:23Z","updated_at":"2023-05-16T14:08:23Z","author_association":"MEMBER","body":"can you please start with this commit: https://github.com/apache/cassandra/compare/trunk...thelastpickle:cassandra:mck/18506/trunk\r\n\r\nthis fixes the `.contains(..)` bug, and should make things a lot clearer to understand, without having to touch method signatures (which touches all the other classes).  starting off like this will help the review process progress (we can re-evaluate the need to improve method names later on in the review process…)","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1549752738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1550159502","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1550159502","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1550159502,"node_id":"IC_kwDOAAMmWM5cZY6O","user":{"login":"jakubzytka","id":9912906,"node_id":"MDQ6VXNlcjk5MTI5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9912906?v=4","gravatar_id":"","url":"https://api.github.com/users/jakubzytka","html_url":"https://github.com/jakubzytka","followers_url":"https://api.github.com/users/jakubzytka/followers","following_url":"https://api.github.com/users/jakubzytka/following{/other_user}","gists_url":"https://api.github.com/users/jakubzytka/gists{/gist_id}","starred_url":"https://api.github.com/users/jakubzytka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakubzytka/subscriptions","organizations_url":"https://api.github.com/users/jakubzytka/orgs","repos_url":"https://api.github.com/users/jakubzytka/repos","events_url":"https://api.github.com/users/jakubzytka/events{/privacy}","received_events_url":"https://api.github.com/users/jakubzytka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T18:26:23Z","updated_at":"2023-05-16T18:26:39Z","author_association":"CONTRIBUTOR","body":"> can you please start with this commit: trunk...thelastpickle:cassandra:mck/18506/trunk\r\n> this fixes the .contains(..) bug,\r\n\r\nAre you sure this commit fixes the `.contains()` bug?\r\nFirst of all, the `edgeTouchesTarget(Semver from, Semver to, Semver target)` has special handling for patch etc. versions. This behaviour is never explained.\r\nFurthermore, this function may be buggy.\r\nConsider a test which defines its applicability from version `X.Y.Z` to some version `X+1.0.0`. If `CURRENT` is `X.Y.Z-1` then this function returns `true` even though the test author specifically prohibited running it. \r\nPossibly, this function builds on some assumption that is never explicitly stated, like: \"the only valid lower applicability bounds are non-patch etc. versions\"\r\nI'd recommend using an assertion to express assumptions under which the function is valid.\r\n\r\n> should make things a lot clearer to understand,\r\n\r\nthe commit in question adds more complexity to already complex code and doesn't fix existing inconsistencies between javadocs or the code. I don't see it as a step in the right direction, considering that a simpler alternative exists in this PR.\r\n\r\n> without having to touch method signatures (which touches all the other classes)\r\n\r\nwould you kindly elaborate? My PR doesn't change the signatures of the existing public API.\r\n\r\n> starting off like this will help the review process progress \r\n\r\nI don't understand what you mean. As already mentioned, the commit 9e32b906fb2fe822be39005ba40de882407e7848 adds additional code, whereas my PR mostly removes code. I don't see how could these two approaches meet. Unless, obviously, my change is based on some invalid assumptions, or doesn't take into account additional assumptions. \r\nI admit I struggled with that as I was unable to find documentation of these assumptions.\r\n\r\nIs there any particular concern why reviewing this PR would be in any way difficult? If so, that's perhaps a reason to improve it. I tried to simplify the code as much as possible. Specifically, I'm removing complex code and replacing it with a simpler alternative.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1550159502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1550223342","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1550223342","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1550223342,"node_id":"IC_kwDOAAMmWM5cZofu","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-16T19:16:42Z","updated_at":"2023-05-16T19:16:42Z","author_association":"MEMBER","body":"I'm keen to address the `.contains(…)` bug, using the commit provided, before moving forward.  This will ensure all assumptions about the correct code and naming used is understood. ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1550223342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1551883725","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1551883725","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1551883725,"node_id":"IC_kwDOAAMmWM5cf93N","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T18:39:47Z","updated_at":"2023-05-17T18:39:47Z","author_association":"CONTRIBUTOR","body":"> would you kindly elaborate? My PR doesn't change the signatures of the existing public API.\r\n\r\nthis changes public APIs, which increases the scope of this patch.\r\n\r\n* `upgrades` is now `applicableVersionsRange`\r\n* `upgradesToCurrentFrom` is now `minimalApplicableVersion`\r\n\r\nthis adds a lot more noise to the patch, making it hard to see what is a bug fix, and what is a personal style change.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1551883725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1552769451","html_url":"https://github.com/apache/cassandra/pull/2045#issuecomment-1552769451","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2045","id":1552769451,"node_id":"IC_kwDOAAMmWM5cjWGr","user":{"login":"Claudenw","id":2439838,"node_id":"MDQ6VXNlcjI0Mzk4Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/2439838?v=4","gravatar_id":"","url":"https://api.github.com/users/Claudenw","html_url":"https://github.com/Claudenw","followers_url":"https://api.github.com/users/Claudenw/followers","following_url":"https://api.github.com/users/Claudenw/following{/other_user}","gists_url":"https://api.github.com/users/Claudenw/gists{/gist_id}","starred_url":"https://api.github.com/users/Claudenw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Claudenw/subscriptions","organizations_url":"https://api.github.com/users/Claudenw/orgs","repos_url":"https://api.github.com/users/Claudenw/repos","events_url":"https://api.github.com/users/Claudenw/events{/privacy}","received_events_url":"https://api.github.com/users/Claudenw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T09:13:27Z","updated_at":"2023-05-18T09:13:27Z","author_association":"CONTRIBUTOR","body":"@jacek-lewandowski @tjake This code is to downgrade from 4.x to 3.x  So I think it needs to be rebased to a 4.x branch.  However, I think that because it is added functionality it should be a new 4.2 not a 4.1 branch.  In any case I think I need to rebase this to 4.1 (rather than trunk).  Do you agree or should I do this differently?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1552769451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1552816255","html_url":"https://github.com/apache/cassandra/pull/2267#issuecomment-1552816255","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2267","id":1552816255,"node_id":"IC_kwDOAAMmWM5cjhh_","user":{"login":"blambov","id":8417529,"node_id":"MDQ6VXNlcjg0MTc1Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/8417529?v=4","gravatar_id":"","url":"https://api.github.com/users/blambov","html_url":"https://github.com/blambov","followers_url":"https://api.github.com/users/blambov/followers","following_url":"https://api.github.com/users/blambov/following{/other_user}","gists_url":"https://api.github.com/users/blambov/gists{/gist_id}","starred_url":"https://api.github.com/users/blambov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blambov/subscriptions","organizations_url":"https://api.github.com/users/blambov/orgs","repos_url":"https://api.github.com/users/blambov/repos","events_url":"https://api.github.com/users/blambov/events{/privacy}","received_events_url":"https://api.github.com/users/blambov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-18T09:54:39Z","updated_at":"2023-05-18T09:54:39Z","author_association":"CONTRIBUTOR","body":"I believe the above includes all currently requested changes. Additional work to be done in:\r\n- CASSANDRA-18441: changing the format selection mechanism\r\n- CASSANDRA-18533: moving format-specific settings into the format configuration\r\n- CASSANDRA-18534: per-table configuration\r\n- CASSANDRA-18535: index error-detection\r\n- CASSANDRA-18536: index encryption","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1552816255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1554118649","html_url":"https://github.com/apache/cassandra/pull/2295#issuecomment-1554118649","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2295","id":1554118649,"node_id":"IC_kwDOAAMmWM5coff5","user":{"login":"jacek-lewandowski","id":6516951,"node_id":"MDQ6VXNlcjY1MTY5NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6516951?v=4","gravatar_id":"","url":"https://api.github.com/users/jacek-lewandowski","html_url":"https://github.com/jacek-lewandowski","followers_url":"https://api.github.com/users/jacek-lewandowski/followers","following_url":"https://api.github.com/users/jacek-lewandowski/following{/other_user}","gists_url":"https://api.github.com/users/jacek-lewandowski/gists{/gist_id}","starred_url":"https://api.github.com/users/jacek-lewandowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacek-lewandowski/subscriptions","organizations_url":"https://api.github.com/users/jacek-lewandowski/orgs","repos_url":"https://api.github.com/users/jacek-lewandowski/repos","events_url":"https://api.github.com/users/jacek-lewandowski/events{/privacy}","received_events_url":"https://api.github.com/users/jacek-lewandowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T07:05:39Z","updated_at":"2023-05-19T07:05:39Z","author_association":"CONTRIBUTOR","body":"Committed https://github.com/apache/cassandra/commit/fe0e04c2319afab958b3da83e7b54c84bced9dc2\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1554118649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1554752731","html_url":"https://github.com/apache/cassandra/pull/2333#issuecomment-1554752731","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2333","id":1554752731,"node_id":"IC_kwDOAAMmWM5cq6Tb","user":{"login":"Mmuzaf","id":3415046,"node_id":"MDQ6VXNlcjM0MTUwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/3415046?v=4","gravatar_id":"","url":"https://api.github.com/users/Mmuzaf","html_url":"https://github.com/Mmuzaf","followers_url":"https://api.github.com/users/Mmuzaf/followers","following_url":"https://api.github.com/users/Mmuzaf/following{/other_user}","gists_url":"https://api.github.com/users/Mmuzaf/gists{/gist_id}","starred_url":"https://api.github.com/users/Mmuzaf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mmuzaf/subscriptions","organizations_url":"https://api.github.com/users/Mmuzaf/orgs","repos_url":"https://api.github.com/users/Mmuzaf/repos","events_url":"https://api.github.com/users/Mmuzaf/events{/privacy}","received_events_url":"https://api.github.com/users/Mmuzaf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T15:26:05Z","updated_at":"2023-05-19T15:26:05Z","author_association":"CONTRIBUTOR","body":"@driftx @mghildiy \r\n\r\nI noticed that `CompactionStatsTest#testCompactionStats` checks the output of the command. Should we also improve the test coverage to be sure that new metrics are present in the command output?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1554752731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1555079481","html_url":"https://github.com/apache/cassandra/pull/2352#issuecomment-1555079481","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2352","id":1555079481,"node_id":"IC_kwDOAAMmWM5csKE5","user":{"login":"yifan-c","id":52585731,"node_id":"MDQ6VXNlcjUyNTg1NzMx","avatar_url":"https://avatars.githubusercontent.com/u/52585731?v=4","gravatar_id":"","url":"https://api.github.com/users/yifan-c","html_url":"https://github.com/yifan-c","followers_url":"https://api.github.com/users/yifan-c/followers","following_url":"https://api.github.com/users/yifan-c/following{/other_user}","gists_url":"https://api.github.com/users/yifan-c/gists{/gist_id}","starred_url":"https://api.github.com/users/yifan-c/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yifan-c/subscriptions","organizations_url":"https://api.github.com/users/yifan-c/orgs","repos_url":"https://api.github.com/users/yifan-c/repos","events_url":"https://api.github.com/users/yifan-c/events{/privacy}","received_events_url":"https://api.github.com/users/yifan-c/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T18:36:16Z","updated_at":"2023-05-19T18:36:16Z","author_association":"CONTRIBUTOR","body":"Awesome to see the usage of structural search. We talked offline that the template needs to be improves to cover different code structures. ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1555079481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1555290563","html_url":"https://github.com/apache/cassandra/pull/2352#issuecomment-1555290563","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2352","id":1555290563,"node_id":"IC_kwDOAAMmWM5cs9nD","user":{"login":"bbotella","id":775506,"node_id":"MDQ6VXNlcjc3NTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/775506?v=4","gravatar_id":"","url":"https://api.github.com/users/bbotella","html_url":"https://github.com/bbotella","followers_url":"https://api.github.com/users/bbotella/followers","following_url":"https://api.github.com/users/bbotella/following{/other_user}","gists_url":"https://api.github.com/users/bbotella/gists{/gist_id}","starred_url":"https://api.github.com/users/bbotella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbotella/subscriptions","organizations_url":"https://api.github.com/users/bbotella/orgs","repos_url":"https://api.github.com/users/bbotella/repos","events_url":"https://api.github.com/users/bbotella/events{/privacy}","received_events_url":"https://api.github.com/users/bbotella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-19T21:48:00Z","updated_at":"2023-05-19T21:48:00Z","author_association":"CONTRIBUTOR","body":"> Awesome to see the usage of structural search. We talked offline that the template needs to be improves to cover different code structures.\r\n\r\nI ended up going with Stephan's suggestion and spotted a bunch more cases.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1555290563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1555963728","html_url":"https://github.com/apache/cassandra/pull/2326#issuecomment-1555963728","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2326","id":1555963728,"node_id":"IC_kwDOAAMmWM5cvh9Q","user":{"login":"JeetKunDoug","id":682821,"node_id":"MDQ6VXNlcjY4MjgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/682821?v=4","gravatar_id":"","url":"https://api.github.com/users/JeetKunDoug","html_url":"https://github.com/JeetKunDoug","followers_url":"https://api.github.com/users/JeetKunDoug/followers","following_url":"https://api.github.com/users/JeetKunDoug/following{/other_user}","gists_url":"https://api.github.com/users/JeetKunDoug/gists{/gist_id}","starred_url":"https://api.github.com/users/JeetKunDoug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeetKunDoug/subscriptions","organizations_url":"https://api.github.com/users/JeetKunDoug/orgs","repos_url":"https://api.github.com/users/JeetKunDoug/repos","events_url":"https://api.github.com/users/JeetKunDoug/events{/privacy}","received_events_url":"https://api.github.com/users/JeetKunDoug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-20T18:06:26Z","updated_at":"2023-05-20T18:06:26Z","author_association":"CONTRIBUTOR","body":"Thanks for the review(s) @jonmeredith - greatly appreciated. Should be all set now.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1555963728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1556248018","html_url":"https://github.com/apache/cassandra/pull/2351#issuecomment-1556248018","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2351","id":1556248018,"node_id":"IC_kwDOAAMmWM5cwnXS","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-21T18:18:30Z","updated_at":"2023-05-21T18:18:30Z","author_association":"MEMBER","body":"comments are good. i'm still wip on the testing scripts, so will come back to address many of the comments once that stuff it ironed out","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1556248018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1557187249","html_url":"https://github.com/apache/cassandra/pull/2333#issuecomment-1557187249","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2333","id":1557187249,"node_id":"IC_kwDOAAMmWM5c0Mqx","user":{"login":"mghildiy","id":10056406,"node_id":"MDQ6VXNlcjEwMDU2NDA2","avatar_url":"https://avatars.githubusercontent.com/u/10056406?v=4","gravatar_id":"","url":"https://api.github.com/users/mghildiy","html_url":"https://github.com/mghildiy","followers_url":"https://api.github.com/users/mghildiy/followers","following_url":"https://api.github.com/users/mghildiy/following{/other_user}","gists_url":"https://api.github.com/users/mghildiy/gists{/gist_id}","starred_url":"https://api.github.com/users/mghildiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mghildiy/subscriptions","organizations_url":"https://api.github.com/users/mghildiy/orgs","repos_url":"https://api.github.com/users/mghildiy/repos","events_url":"https://api.github.com/users/mghildiy/events{/privacy}","received_events_url":"https://api.github.com/users/mghildiy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T13:05:33Z","updated_at":"2023-05-22T13:05:52Z","author_association":"CONTRIBUTOR","body":"> @driftx @mghildiy\r\n> \r\n> I noticed that `CompactionStatsTest#testCompactionStats` checks the output of the command. Should we also improve the test coverage to be sure that new metrics are present in the command output?\r\n\r\n@Mmuzaf, I would look into it.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1557187249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1557587423","html_url":"https://github.com/apache/cassandra/pull/2352#issuecomment-1557587423","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2352","id":1557587423,"node_id":"IC_kwDOAAMmWM5c1uXf","user":{"login":"Mmuzaf","id":3415046,"node_id":"MDQ6VXNlcjM0MTUwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/3415046?v=4","gravatar_id":"","url":"https://api.github.com/users/Mmuzaf","html_url":"https://github.com/Mmuzaf","followers_url":"https://api.github.com/users/Mmuzaf/followers","following_url":"https://api.github.com/users/Mmuzaf/following{/other_user}","gists_url":"https://api.github.com/users/Mmuzaf/gists{/gist_id}","starred_url":"https://api.github.com/users/Mmuzaf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mmuzaf/subscriptions","organizations_url":"https://api.github.com/users/Mmuzaf/orgs","repos_url":"https://api.github.com/users/Mmuzaf/repos","events_url":"https://api.github.com/users/Mmuzaf/events{/privacy}","received_events_url":"https://api.github.com/users/Mmuzaf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-22T17:04:43Z","updated_at":"2023-05-22T17:04:43Z","author_association":"CONTRIBUTOR","body":"I'm +1 for these changes, leaving a small comment. I think it is common practice to fix something right before committing, so LGMT. @bbotella thank you very much for picking this up!","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1557587423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562375255","html_url":"https://github.com/apache/cassandra/pull/2365#issuecomment-1562375255","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2365","id":1562375255,"node_id":"IC_kwDOAAMmWM5dH_RX","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T06:54:33Z","updated_at":"2023-05-25T06:54:33Z","author_association":"CONTRIBUTOR","body":"CI is [good](https://app.circleci.com/pipelines/github/bereng/cassandra/947/workflows/d9c4ab46-a089-438a-a4c1-af1f14c8c61f)","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562375255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562441358","html_url":"https://github.com/apache/cassandra/pull/2321#issuecomment-1562441358","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2321","id":1562441358,"node_id":"IC_kwDOAAMmWM5dIPaO","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T07:49:38Z","updated_at":"2023-05-25T07:49:38Z","author_association":"CONTRIBUTOR","body":"I don't have further comments so far besides that we're missing a final CI run","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562441358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562666728","html_url":"https://github.com/apache/cassandra/pull/2321#issuecomment-1562666728","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2321","id":1562666728,"node_id":"IC_kwDOAAMmWM5dJGbo","user":{"login":"adelapena","id":5229055,"node_id":"MDQ6VXNlcjUyMjkwNTU=","avatar_url":"https://avatars.githubusercontent.com/u/5229055?v=4","gravatar_id":"","url":"https://api.github.com/users/adelapena","html_url":"https://github.com/adelapena","followers_url":"https://api.github.com/users/adelapena/followers","following_url":"https://api.github.com/users/adelapena/following{/other_user}","gists_url":"https://api.github.com/users/adelapena/gists{/gist_id}","starred_url":"https://api.github.com/users/adelapena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adelapena/subscriptions","organizations_url":"https://api.github.com/users/adelapena/orgs","repos_url":"https://api.github.com/users/adelapena/repos","events_url":"https://api.github.com/users/adelapena/events{/privacy}","received_events_url":"https://api.github.com/users/adelapena/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T10:29:32Z","updated_at":"2023-05-25T10:29:32Z","author_association":"CONTRIBUTOR","body":"CI is running here:\r\n* https://app.circleci.com/pipelines/github/adelapena/cassandra/2906/workflows/e322a36b-b38a-4387-9464-4eeede1edbd9\r\n* https://app.circleci.com/pipelines/github/adelapena/cassandra/2906/workflows/c38b9241-4dd0-4180-b7a8-b006ba52c8cc","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562666728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562781019","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1562781019","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1562781019,"node_id":"IC_kwDOAAMmWM5dJiVb","user":{"login":"mike-tr-adamson","id":2841496,"node_id":"MDQ6VXNlcjI4NDE0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2841496?v=4","gravatar_id":"","url":"https://api.github.com/users/mike-tr-adamson","html_url":"https://github.com/mike-tr-adamson","followers_url":"https://api.github.com/users/mike-tr-adamson/followers","following_url":"https://api.github.com/users/mike-tr-adamson/following{/other_user}","gists_url":"https://api.github.com/users/mike-tr-adamson/gists{/gist_id}","starred_url":"https://api.github.com/users/mike-tr-adamson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mike-tr-adamson/subscriptions","organizations_url":"https://api.github.com/users/mike-tr-adamson/orgs","repos_url":"https://api.github.com/users/mike-tr-adamson/repos","events_url":"https://api.github.com/users/mike-tr-adamson/events{/privacy}","received_events_url":"https://api.github.com/users/mike-tr-adamson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T12:00:47Z","updated_at":"2023-05-25T12:00:47Z","author_association":"CONTRIBUTOR","body":"@dcapwell I have left a few final comments but apart from those this is looking good.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562781019/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562786186","html_url":"https://github.com/apache/cassandra/pull/2321#issuecomment-1562786186","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2321","id":1562786186,"node_id":"IC_kwDOAAMmWM5dJjmK","user":{"login":"Maxwell-Guo","id":4403275,"node_id":"MDQ6VXNlcjQ0MDMyNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4403275?v=4","gravatar_id":"","url":"https://api.github.com/users/Maxwell-Guo","html_url":"https://github.com/Maxwell-Guo","followers_url":"https://api.github.com/users/Maxwell-Guo/followers","following_url":"https://api.github.com/users/Maxwell-Guo/following{/other_user}","gists_url":"https://api.github.com/users/Maxwell-Guo/gists{/gist_id}","starred_url":"https://api.github.com/users/Maxwell-Guo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Maxwell-Guo/subscriptions","organizations_url":"https://api.github.com/users/Maxwell-Guo/orgs","repos_url":"https://api.github.com/users/Maxwell-Guo/repos","events_url":"https://api.github.com/users/Maxwell-Guo/events{/privacy}","received_events_url":"https://api.github.com/users/Maxwell-Guo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T12:04:36Z","updated_at":"2023-05-25T12:04:36Z","author_association":"CONTRIBUTOR","body":"+1 on this patch ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562786186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562872400","html_url":"https://github.com/apache/cassandra/pull/2321#issuecomment-1562872400","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2321","id":1562872400,"node_id":"IC_kwDOAAMmWM5dJ4pQ","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T13:03:20Z","updated_at":"2023-05-25T13:03:20Z","author_association":"CONTRIBUTOR","body":"It seems circle is having issues and the CI runs don't look too nice. Could we re-trigger them please?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562872400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562942316","html_url":"https://github.com/apache/cassandra/pull/2321#issuecomment-1562942316","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2321","id":1562942316,"node_id":"IC_kwDOAAMmWM5dKJts","user":{"login":"adelapena","id":5229055,"node_id":"MDQ6VXNlcjUyMjkwNTU=","avatar_url":"https://avatars.githubusercontent.com/u/5229055?v=4","gravatar_id":"","url":"https://api.github.com/users/adelapena","html_url":"https://github.com/adelapena","followers_url":"https://api.github.com/users/adelapena/followers","following_url":"https://api.github.com/users/adelapena/following{/other_user}","gists_url":"https://api.github.com/users/adelapena/gists{/gist_id}","starred_url":"https://api.github.com/users/adelapena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adelapena/subscriptions","organizations_url":"https://api.github.com/users/adelapena/orgs","repos_url":"https://api.github.com/users/adelapena/repos","events_url":"https://api.github.com/users/adelapena/events{/privacy}","received_events_url":"https://api.github.com/users/adelapena/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T13:47:37Z","updated_at":"2023-05-25T13:47:58Z","author_association":"CONTRIBUTOR","body":"Yes, I've already done it:\r\n* https://app.circleci.com/pipelines/github/adelapena/cassandra/2906/workflows/9ce9fb2a-fe2a-4619-ba1c-ce4d29a1016c\r\n* https://app.circleci.com/pipelines/github/adelapena/cassandra/2906/workflows/d28b205c-1b51-49aa-959a-948be3fa06eb\r\n\r\nAll green except for a consistent failure on `GetFullQueryLogTest` that has just been introduced in trunk by [CASSANDRA-18550](https://issues.apache.org/jira/browse/CASSANDRA-18550)","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562942316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562979863","html_url":"https://github.com/apache/cassandra/pull/2321#issuecomment-1562979863","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2321","id":1562979863,"node_id":"IC_kwDOAAMmWM5dKS4X","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T14:09:50Z","updated_at":"2023-05-25T14:09:50Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1562979863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563122476","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1563122476","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1563122476,"node_id":"IC_kwDOAAMmWM5dK1ss","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T15:39:47Z","updated_at":"2023-05-25T15:39:47Z","author_association":"CONTRIBUTOR","body":"Where will this leave the ability to expose a `similarity_cosine(a, b)` function to CQL?  I believe there are some difficulties around type inference.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563122476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563297122","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1563297122","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1563297122,"node_id":"IC_kwDOAAMmWM5dLgVi","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T17:59:08Z","updated_at":"2023-05-25T17:59:08Z","author_association":"CONTRIBUTOR","body":"> Where will this leave the ability to expose a `similarity_cosine(a, b)` function to CQL? I believe there are some difficulties around type inference.\r\n\r\n@jbellis can you expand on that?  What I see in `org.apache.cassandra.cql3.functions.NativeFunctions#add(org.apache.cassandra.cql3.functions.FunctionFactory)` that we can use a `Factory`, so we can see the arguments given to us.\r\n\r\n```\r\nprivate static boolean isFloatVector(AbstractType<?> type)\r\n    {\r\n        type = type.unwrap();\r\n        return type instanceof VectorType && ((VectorType<?>) type).getElementsType() == FloatType.instance;\r\n    }\r\n\r\n...\r\nfunctions.add(new FunctionFactory(\"similarity_cosine\", FunctionParameter.anyMap())\r\n        {\r\n            @Nullable\r\n            @Override\r\n            protected NativeFunction doGetOrCreateFunction(List<AbstractType<?>> argTypes, AbstractType<?> receiverType)\r\n            {\r\n                if (!(isFloatVector(receiverType) && argTypes.stream().allMatch(CollectionFcts::isFloatVector)))\r\n                    return null;\r\n                if (!argTypes.stream().allMatch(t -> t.equals(receiverType)))\r\n                    return null;\r\n                VectorType<Float> type = (VectorType<Float>) receiverType;\r\n                return makeSimilarityCosine(type);\r\n            }\r\n        });\r\n...\r\n```\r\n\r\nso this should match if-and-only-if args and receiver are float vectors of the same size","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563297122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563317031","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1563317031","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1563317031,"node_id":"IC_kwDOAAMmWM5dLlMn","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T18:15:38Z","updated_at":"2023-05-25T18:15:38Z","author_association":"CONTRIBUTOR","body":"@mike-tr-adamson replied to or fixed all feedback; can you look again?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563317031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563324033","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1563324033","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1563324033,"node_id":"IC_kwDOAAMmWM5dLm6B","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T18:21:46Z","updated_at":"2023-05-25T18:21:46Z","author_association":"CONTRIBUTOR","body":"Here's what I get on my branch w/ the old syntax:\r\n\r\n```\r\norg.apache.cassandra.exceptions.InvalidRequestException: Cannot infer type of argument ? in call to function system.cosine_similarity(float vector, float vector): use type casts to disambiguate\r\n\r\n\tat org.apache.cassandra.cql3.functions.FunctionFactory.getOrCreateFunction(FunctionFactory.java:101)\r\n\tat org.apache.cassandra.cql3.functions.FunctionResolver.lambda$collectCandidates$1(FunctionResolver.java:144)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)\r\n\tat java.base/java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1621)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\r\n\tat java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:913)\r\n\tat java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n\tat java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:578)\r\n\tat org.apache.cassandra.cql3.functions.FunctionResolver.collectCandidates(FunctionResolver.java:146)\r\n\tat org.apache.cassandra.cql3.functions.FunctionResolver.get(FunctionResolver.java:96)\r\n\tat org.apache.cassandra.cql3.functions.FunctionResolver.get(FunctionResolver.java:72)\r\n\tat org.apache.cassandra.cql3.selection.Selectable$WithFunction$Raw.prepare(Selectable.java:415)\r\n\tat org.apache.cassandra.cql3.selection.RawSelector.prepare(RawSelector.java:53)\r\n\tat org.apache.cassandra.cql3.selection.RawSelector.lambda$toSelectables$0(RawSelector.java:48)\r\n\tat com.google.common.collect.Lists$TransformingRandomAccessList.get(Lists.java:603)\r\n\tat org.apache.cassandra.cql3.selection.SelectorFactories.<init>(SelectorFactories.java:99)\r\n\tat org.apache.cassandra.cql3.selection.SelectorFactories.createFactoriesAndCollectColumnDefinitions(SelectorFactories.java:85)\r\n\tat org.apache.cassandra.cql3.selection.Selection.fromSelectors(Selection.java:188)\r\n\tat org.apache.cassandra.cql3.statements.SelectStatement$RawStatement.prepareSelection(SelectStatement.java:1212)\r\n\tat org.apache.cassandra.cql3.statements.SelectStatement$RawStatement.prepare(SelectStatement.java:1142)\r\n\tat org.apache.cassandra.cql3.statements.SelectStatement$RawStatement.prepare(SelectStatement.java:1124)\r\n\tat org.apache.cassandra.cql3.statements.SelectStatement$RawStatement.prepare(SelectStatement.java:1096)\r\n\tat org.apache.cassandra.cql3.QueryProcessor.parseAndPrepare(QueryProcessor.java:435)\r\n\tat org.apache.cassandra.cql3.QueryProcessor.prepareInternal(QueryProcessor.java:413)\r\n\tat org.apache.cassandra.cql3.QueryProcessor.executeInternal(QueryProcessor.java:446)\r\n\tat org.apache.cassandra.cql3.CQLTester.executeFormattedQuery(CQLTester.java:1364)\r\n\tat org.apache.cassandra.index.sai.SAITester.execute(SAITester.java:600)\r\n\tat org.apache.cassandra.index.sai.cql.VectorTypeTest.similarityFunctionTest(VectorTypeTest.java:224)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)\r\n```\r\n\r\ntest running is\r\n```\r\n    @Test\r\n    public void similarityFunctionTest() throws Throwable\r\n    {\r\n        createTable(\"CREATE TABLE %s (pk int, str_val text, val float vector[3], PRIMARY KEY(pk))\");\r\n\r\n        execute(\"INSERT INTO %s (pk, str_val, val) VALUES (0, 'A', ?)\", Lists.newArrayList(1.0, 2.0 ,3.0));\r\n        execute(\"INSERT INTO %s (pk, str_val, val) VALUES (1, 'B', ?)\", Lists.newArrayList(2.0 ,3.0, 4.0));\r\n\r\n        UntypedResultSet result = execute(\"SELECT pk, val, cosine_similarity(val, ?) FROM %s\", Lists.newArrayList(2.5, 3.5, 4.5));\r\n        assertThat(result).hasSize(2);\r\n        System.out.println(makeRowStrings(result));\r\n    }\r\n```\r\n\r\nfull code in the branch at https://github.com/jbellis/cassandra/tree/vector-functions","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563324033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563377307","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1563377307","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1563377307,"node_id":"IC_kwDOAAMmWM5dLz6b","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T19:03:37Z","updated_at":"2023-05-25T19:03:37Z","author_association":"CONTRIBUTOR","body":"@jbellis it works just fine for me...\r\n\r\n```\r\n@Test\r\n    public void selectFloatVectorFunctions()\r\n    {\r\n        createTable(KEYSPACE, \"CREATE TABLE %s (pk int primary key, value vector<float, 2>)\");\r\n\r\n        execute(\"INSERT INTO %s (pk, value) VALUES (0, ?)\", vector(1f, 2f));\r\n        assertRows(execute(\"SELECT similarity_cosine(value, value) FROM %s WHERe pk=0\"), row(vector(1f, 2f)));\r\n    }\r\n```\r\n\r\n\r\n```\r\npublic class VectorFcts\r\n{\r\n    private static boolean isFloatVector(AbstractType<?> type)\r\n    {\r\n        type = type.unwrap();\r\n        return type instanceof VectorType && ((VectorType<?>) type).getElementsType() == FloatType.instance;\r\n    }\r\n\r\n    public static void addFunctionsTo(NativeFunctions functions)\r\n    {\r\n        functions.add(new FunctionFactory(\"similarity_cosine\", FunctionParameter.anyType(true), FunctionParameter.anyType(true))\r\n        {\r\n            @Nullable\r\n            @Override\r\n            protected NativeFunction doGetOrCreateFunction(List<AbstractType<?>> argTypes, AbstractType<?> receiverType)\r\n            {\r\n                if (argTypes.size() != 2)\r\n                    return null;\r\n                AbstractType<?> outputType = receiverType == null ? argTypes.get(0) : receiverType;\r\n                if (!(isFloatVector(outputType) && argTypes.stream().allMatch(VectorFcts::isFloatVector)))\r\n                    return null;\r\n                if (!argTypes.stream().allMatch(t -> t.equals(outputType)))\r\n                    return null;\r\n                VectorType<Float> type = (VectorType<Float>) outputType;\r\n                return makeSimilarityCosine(name.name, type);\r\n            }\r\n        });\r\n    }\r\n\r\n    private static NativeFunction makeSimilarityCosine(String name, VectorType<Float> type)\r\n    {\r\n        return new NativeScalarFunction(name, type, type, type)\r\n        {\r\n            @Override\r\n            public ByteBuffer execute(ProtocolVersion protocolVersion, List<ByteBuffer> parameters) throws InvalidRequestException\r\n            {\r\n                return parameters.get(0);\r\n            }\r\n        };\r\n    }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563377307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563418383","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1563418383","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1563418383,"node_id":"IC_kwDOAAMmWM5dL98P","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-25T19:41:37Z","updated_at":"2023-05-25T19:41:37Z","author_association":"CONTRIBUTOR","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563418383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563846010","html_url":"https://github.com/apache/cassandra/pull/2367#issuecomment-1563846010","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2367","id":1563846010,"node_id":"IC_kwDOAAMmWM5dNmV6","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T05:55:58Z","updated_at":"2023-05-26T05:55:58Z","author_association":"CONTRIBUTOR","body":"Tested manually","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563846010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563957222","html_url":"https://github.com/apache/cassandra/pull/2368#issuecomment-1563957222","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2368","id":1563957222,"node_id":"IC_kwDOAAMmWM5dOBfm","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T07:48:54Z","updated_at":"2023-05-26T07:48:54Z","author_association":"CONTRIBUTOR","body":"We need CI runs and will you port this to 4.0 and 4.1 also?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563957222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563967764","html_url":"https://github.com/apache/cassandra/pull/2368#issuecomment-1563967764","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2368","id":1563967764,"node_id":"IC_kwDOAAMmWM5dOEEU","user":{"login":"jacek-lewandowski","id":6516951,"node_id":"MDQ6VXNlcjY1MTY5NTE=","avatar_url":"https://avatars.githubusercontent.com/u/6516951?v=4","gravatar_id":"","url":"https://api.github.com/users/jacek-lewandowski","html_url":"https://github.com/jacek-lewandowski","followers_url":"https://api.github.com/users/jacek-lewandowski/followers","following_url":"https://api.github.com/users/jacek-lewandowski/following{/other_user}","gists_url":"https://api.github.com/users/jacek-lewandowski/gists{/gist_id}","starred_url":"https://api.github.com/users/jacek-lewandowski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacek-lewandowski/subscriptions","organizations_url":"https://api.github.com/users/jacek-lewandowski/orgs","repos_url":"https://api.github.com/users/jacek-lewandowski/repos","events_url":"https://api.github.com/users/jacek-lewandowski/events{/privacy}","received_events_url":"https://api.github.com/users/jacek-lewandowski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T07:58:10Z","updated_at":"2023-05-26T07:58:10Z","author_association":"CONTRIBUTOR","body":"@bereng thanks for super quick response. I'll provide patches for older branches but probably it will be next week","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1563967764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1565072700","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1565072700","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1565072700,"node_id":"IC_kwDOAAMmWM5dSR08","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-26T23:41:39Z","updated_at":"2023-05-26T23:41:39Z","author_association":"CONTRIBUTOR","body":"... this fails the same way mine did when you try to compare to a bind variable\r\n```\r\n    @Test\r\n    public void selectFloatVectorFunctions()\r\n    {\r\n        createTable(KEYSPACE, \"CREATE TABLE %s (pk int primary key, value vector<float, 2>)\");\r\n\r\n        execute(\"INSERT INTO %s (pk, value) VALUES (0, ?)\", vector(1f, 2f));\r\n        execute(\"SELECT similarity_cosine(value, ?) FROM %s WHERe pk=0\", vector(1f, 2f));\r\n    }\r\n```\r\n\r\n```\r\norg.apache.cassandra.exceptions.InvalidRequestException: Cannot infer type of argument ? in call to function system.similarity_cosine(any, any): use type casts to disambiguate\r\n```\r\n\r\ncommit on top of your branch at https://github.com/jbellis/cassandra/tree/dc-vector","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1565072700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566093290","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1566093290","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1566093290,"node_id":"IC_kwDOAAMmWM5dWK_q","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T11:19:36Z","updated_at":"2023-05-28T11:20:13Z","author_association":"MEMBER","body":"@jakubzytka, as David says, patches require a minimal approach in the project, along with meeting the style.\r\n\r\nI know I led you down the garden path by encouraging improvements to UpgradeTestBase to make it easier to understand. apologies for that.\r\n\r\nThe `.contains(..)` bug is now fixed, it is in the `.edgeTouchesTarget(..)` method.  And the existing `.contains(..)` method is renamed to `.rangeCoversTarget(..)`. \r\n\r\nWith that in place, you can see that I've only then needed to change the parameter names to the method: `upgradesToCurrentFrom(..)`, `upgradesTo(..)`, `upgradesFrom(..)` and `upgrades(..)`.\r\n\r\nThis should help demonstrate my earlier points that \r\n- no existing apidoc or code comments were wrong, and\r\n- upgrade and upgradeVersion needs to be lists.\r\n\r\nTo go into more detail…\r\n\r\n> First of all, the edgeTouchesTarget(Semver from, Semver to, Semver target) has special handling for patch etc. versions.\r\n\r\nThe supported upgrade paths do not go to the granularity of patch versions.\r\n\r\n> Furthermore, this function may be buggy. Consider a test which defines its applicability from version X.Y.Z\r\n\r\nThis is a valid point, but is not a problem today and out-of-scope.  AFAIK no one is passing patch-number explicit versions to these methods.   I agree that an assertion that we don't (yet) support patch-specific bounds would be appropriate.\r\n\r\n--\r\nI've completed the patch for the ticket with an additional commit on my branch.\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566093290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566135497","html_url":"https://github.com/apache/cassandra/pull/2333#issuecomment-1566135497","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2333","id":1566135497,"node_id":"IC_kwDOAAMmWM5dWVTJ","user":{"login":"mghildiy","id":10056406,"node_id":"MDQ6VXNlcjEwMDU2NDA2","avatar_url":"https://avatars.githubusercontent.com/u/10056406?v=4","gravatar_id":"","url":"https://api.github.com/users/mghildiy","html_url":"https://github.com/mghildiy","followers_url":"https://api.github.com/users/mghildiy/followers","following_url":"https://api.github.com/users/mghildiy/following{/other_user}","gists_url":"https://api.github.com/users/mghildiy/gists{/gist_id}","starred_url":"https://api.github.com/users/mghildiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mghildiy/subscriptions","organizations_url":"https://api.github.com/users/mghildiy/orgs","repos_url":"https://api.github.com/users/mghildiy/repos","events_url":"https://api.github.com/users/mghildiy/events{/privacy}","received_events_url":"https://api.github.com/users/mghildiy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-28T13:06:02Z","updated_at":"2023-05-28T13:06:02Z","author_association":"CONTRIBUTOR","body":"Updated test.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566135497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566733664","html_url":"https://github.com/apache/cassandra/pull/2267#issuecomment-1566733664","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2267","id":1566733664,"node_id":"IC_kwDOAAMmWM5dYnVg","user":{"login":"blambov","id":8417529,"node_id":"MDQ6VXNlcjg0MTc1Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/8417529?v=4","gravatar_id":"","url":"https://api.github.com/users/blambov","html_url":"https://github.com/blambov","followers_url":"https://api.github.com/users/blambov/followers","following_url":"https://api.github.com/users/blambov/following{/other_user}","gists_url":"https://api.github.com/users/blambov/gists{/gist_id}","starred_url":"https://api.github.com/users/blambov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blambov/subscriptions","organizations_url":"https://api.github.com/users/blambov/orgs","repos_url":"https://api.github.com/users/blambov/repos","events_url":"https://api.github.com/users/blambov/events{/privacy}","received_events_url":"https://api.github.com/users/blambov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T08:09:42Z","updated_at":"2023-05-29T08:09:42Z","author_association":"CONTRIBUTOR","body":"I don't see anything related to the patch in the test failures, moving ahead with merge.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566733664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566806146","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1566806146","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1566806146,"node_id":"IC_kwDOAAMmWM5dY5CC","user":{"login":"jakubzytka","id":9912906,"node_id":"MDQ6VXNlcjk5MTI5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/9912906?v=4","gravatar_id":"","url":"https://api.github.com/users/jakubzytka","html_url":"https://github.com/jakubzytka","followers_url":"https://api.github.com/users/jakubzytka/followers","following_url":"https://api.github.com/users/jakubzytka/following{/other_user}","gists_url":"https://api.github.com/users/jakubzytka/gists{/gist_id}","starred_url":"https://api.github.com/users/jakubzytka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jakubzytka/subscriptions","organizations_url":"https://api.github.com/users/jakubzytka/orgs","repos_url":"https://api.github.com/users/jakubzytka/repos","events_url":"https://api.github.com/users/jakubzytka/events{/privacy}","received_events_url":"https://api.github.com/users/jakubzytka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T09:10:14Z","updated_at":"2023-05-29T09:10:14Z","author_association":"CONTRIBUTOR","body":"> > would you kindly elaborate? My PR doesn't change the signatures of the existing public API.\r\n> \r\n> this changes public APIs, which increases the scope of this patch.\r\n> \r\n> * `upgrades` is now `applicableVersionsRange`\r\n> * `upgradesToCurrentFrom` is now `minimalApplicableVersion`\r\n> \r\n> this adds a lot more noise to the patch, making it hard to see what is a bug fix, and what is a personal style change.\r\n\r\nThe above statements are not true.\r\nBoth `upgrades` and `upgradesToCurrentFrom` are present and offer the same semantics as previously.\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1566806146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567170863","html_url":"https://github.com/apache/cassandra/pull/2267#issuecomment-1567170863","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2267","id":1567170863,"node_id":"IC_kwDOAAMmWM5daSEv","user":{"login":"blambov","id":8417529,"node_id":"MDQ6VXNlcjg0MTc1Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/8417529?v=4","gravatar_id":"","url":"https://api.github.com/users/blambov","html_url":"https://github.com/blambov","followers_url":"https://api.github.com/users/blambov/followers","following_url":"https://api.github.com/users/blambov/following{/other_user}","gists_url":"https://api.github.com/users/blambov/gists{/gist_id}","starred_url":"https://api.github.com/users/blambov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blambov/subscriptions","organizations_url":"https://api.github.com/users/blambov/orgs","repos_url":"https://api.github.com/users/blambov/repos","events_url":"https://api.github.com/users/blambov/events{/privacy}","received_events_url":"https://api.github.com/users/blambov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T13:57:02Z","updated_at":"2023-05-29T13:57:02Z","author_association":"CONTRIBUTOR","body":"[Latest run](https://app.circleci.com/pipelines/github/blambov/cassandra/457/workflows/1cd1cf09-2c88-45a2-9f3c-8eb30ffb7f31) looks pretty good. Committing.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567170863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567177016","html_url":"https://github.com/apache/cassandra/pull/2267#issuecomment-1567177016","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2267","id":1567177016,"node_id":"IC_kwDOAAMmWM5daTk4","user":{"login":"blambov","id":8417529,"node_id":"MDQ6VXNlcjg0MTc1Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/8417529?v=4","gravatar_id":"","url":"https://api.github.com/users/blambov","html_url":"https://github.com/blambov","followers_url":"https://api.github.com/users/blambov/followers","following_url":"https://api.github.com/users/blambov/following{/other_user}","gists_url":"https://api.github.com/users/blambov/gists{/gist_id}","starred_url":"https://api.github.com/users/blambov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/blambov/subscriptions","organizations_url":"https://api.github.com/users/blambov/orgs","repos_url":"https://api.github.com/users/blambov/repos","events_url":"https://api.github.com/users/blambov/events{/privacy}","received_events_url":"https://api.github.com/users/blambov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T14:01:31Z","updated_at":"2023-05-29T14:13:04Z","author_association":"CONTRIBUTOR","body":"Committed as f16fb6765b8a3ff8f49accf61c908791520c0d6e and fad1f7457032544ab6a7b40c5d38ecb8b25899bb.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567177016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567515180","html_url":"https://github.com/apache/cassandra/pull/2336#issuecomment-1567515180","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2336","id":1567515180,"node_id":"IC_kwDOAAMmWM5dbmIs","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-29T21:04:38Z","updated_at":"2023-05-29T21:04:38Z","author_association":"MEMBER","body":"> This is a valid point, but is not a problem today and out-of-scope. AFAIK no one is passing patch-number explicit versions to these methods. I agree that an assertion that we don't (yet) support patch-specific bounds would be appropriate.\r\n\r\n\r\nInstead of adding an assertion, I've added the apidoc. \r\nIt is ok if patch versions are passed to the the `edgeTouchesTarget(..)` method, it is intentionally only compares majors and minors.\r\n\r\nThe potential bug you describe won't happen, because it is not this method that applies the bounds.  That happens with the `vertices.subSet(..)` call.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567515180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567790450","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1567790450","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1567790450,"node_id":"IC_kwDOAAMmWM5dcpVy","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T05:52:28Z","updated_at":"2023-05-30T06:17:04Z","author_association":"CONTRIBUTOR","body":"@adelapena this is rebased as of yesterday:\r\n\r\n- Perf testing can be found [here](https://issues.apache.org/jira/secure/attachment/13058571/13058571_C14227+Perf+check+2023.05.26.pdf)\r\n\r\nJ8/J11\r\n- I went over all touched tests manually and 90% are just simple int to long changes. The only tests worth repeating are MixedModeTTLOverflowUpgradeTest, CustomNowInSecondsTest, EmptyValuesTest, TTLTest, CellTest, RangeTombstoneListTest, CompactionsCQLTest, LegacySSTableTest, PaxosStateTest and StreamingTombstoneHistogramBuilderTest.\r\n- [j8](https://app.circleci.com/pipelines/github/bereng/cassandra/957/workflows/6a9138af-7950-4f78-937a-51b173197477) seems ok: test_rolling_upgrade_with_internode_ssl is CASSANDRA-18449. test_fql_nodetool_options is a nit mistake of mine with dtests that I fixed before running the j11 which you'll see is all green\r\n- j8 includes 500 repetitions in junit, junit_oa and junit_system_keyspace. That is 1500 repetitions\r\n- [j11](https://app.circleci.com/pipelines/github/bereng/cassandra/957/workflows/a1fa869d-7426-431f-8c49-59ad45fb9431) is green\r\n- 500 repetitions of the new upgrade jvm test [is green](https://app.circleci.com/pipelines/github/bereng/cassandra/958/workflows/784d60b8-71b7-4447-8be4-58c8b7f4e655)\r\n\r\nJ11/J17\r\n- J11 [here](https://app.circleci.com/pipelines/github/bereng/cassandra/959/workflows/9598d280-1121-4a6f-ad4a-3cd96ee20b44). Failures aligned to a baseline trunk [j17 run](https://app.circleci.com/pipelines/github/bereng/cassandra/961/workflows/3e073e0f-c43c-4dea-be51-44e911b41aa9). handleCorruptionOfLargeMessageFrame is CASSANDRA-16949\r\n- We can see the oa job variants in j11 and j17\r\n- J17 [run](https://app.circleci.com/pipelines/github/bereng/cassandra/959/workflows/fdf2aae9-6970-42e1-a8d6-785adc656229) is aligned to J17 baseline\r\n\r\nUnless I am missing sthg this is ready to be merged. I would only discard the commits to add -s to generate.-sh (C18553)","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1567790450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1568557924","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1568557924","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1568557924,"node_id":"IC_kwDOAAMmWM5dfktk","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T14:41:20Z","updated_at":"2023-05-30T14:41:20Z","author_association":"CONTRIBUTOR","body":"Thx for the thorough review @adelapena I pushed the last nits.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1568557924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1568948300","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1568948300","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1568948300,"node_id":"IC_kwDOAAMmWM5dhEBM","user":{"login":"mike-tr-adamson","id":2841496,"node_id":"MDQ6VXNlcjI4NDE0OTY=","avatar_url":"https://avatars.githubusercontent.com/u/2841496?v=4","gravatar_id":"","url":"https://api.github.com/users/mike-tr-adamson","html_url":"https://github.com/mike-tr-adamson","followers_url":"https://api.github.com/users/mike-tr-adamson/followers","following_url":"https://api.github.com/users/mike-tr-adamson/following{/other_user}","gists_url":"https://api.github.com/users/mike-tr-adamson/gists{/gist_id}","starred_url":"https://api.github.com/users/mike-tr-adamson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mike-tr-adamson/subscriptions","organizations_url":"https://api.github.com/users/mike-tr-adamson/orgs","repos_url":"https://api.github.com/users/mike-tr-adamson/repos","events_url":"https://api.github.com/users/mike-tr-adamson/events{/privacy}","received_events_url":"https://api.github.com/users/mike-tr-adamson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-30T19:15:58Z","updated_at":"2023-05-30T19:15:58Z","author_association":"CONTRIBUTOR","body":"@dcapwell We having been playing with this code on our vector graph implementation and have just found that any saved SSTables with `VectorType` in them fail to load at startup because `VectorType` is missing a `public static <T> VectorType<T> getInstance(TypeParser parser)` implementation. Adding this requires support adding to `TypeParser` to pull the abstract type and dimensions from the string representation of the type.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1568948300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1569370339","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1569370339","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1569370339,"node_id":"IC_kwDOAAMmWM5dirDj","user":{"login":"Maxwell-Guo","id":4403275,"node_id":"MDQ6VXNlcjQ0MDMyNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4403275?v=4","gravatar_id":"","url":"https://api.github.com/users/Maxwell-Guo","html_url":"https://github.com/Maxwell-Guo","followers_url":"https://api.github.com/users/Maxwell-Guo/followers","following_url":"https://api.github.com/users/Maxwell-Guo/following{/other_user}","gists_url":"https://api.github.com/users/Maxwell-Guo/gists{/gist_id}","starred_url":"https://api.github.com/users/Maxwell-Guo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Maxwell-Guo/subscriptions","organizations_url":"https://api.github.com/users/Maxwell-Guo/orgs","repos_url":"https://api.github.com/users/Maxwell-Guo/repos","events_url":"https://api.github.com/users/Maxwell-Guo/events{/privacy}","received_events_url":"https://api.github.com/users/Maxwell-Guo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T01:48:00Z","updated_at":"2023-05-31T01:48:00Z","author_association":"CONTRIBUTOR","body":"Do we need to add a new test that can cover the request from client to server with vector type request?\r\nBut in my mind it may be not easy  as we may need to have a client driver which support vector type~~~ ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1569370339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1569406483","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1569406483","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1569406483,"node_id":"IC_kwDOAAMmWM5diz4T","user":{"login":"JeremiahDJordan","id":1037592,"node_id":"MDQ6VXNlcjEwMzc1OTI=","avatar_url":"https://avatars.githubusercontent.com/u/1037592?v=4","gravatar_id":"","url":"https://api.github.com/users/JeremiahDJordan","html_url":"https://github.com/JeremiahDJordan","followers_url":"https://api.github.com/users/JeremiahDJordan/followers","following_url":"https://api.github.com/users/JeremiahDJordan/following{/other_user}","gists_url":"https://api.github.com/users/JeremiahDJordan/gists{/gist_id}","starred_url":"https://api.github.com/users/JeremiahDJordan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeremiahDJordan/subscriptions","organizations_url":"https://api.github.com/users/JeremiahDJordan/orgs","repos_url":"https://api.github.com/users/JeremiahDJordan/repos","events_url":"https://api.github.com/users/JeremiahDJordan/events{/privacy}","received_events_url":"https://api.github.com/users/JeremiahDJordan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T02:29:43Z","updated_at":"2023-05-31T02:29:43Z","author_association":"CONTRIBUTOR","body":"There is a [java driver](https://github.com/datastax/java-driver/tree/cep-vsearch) and [python driver](https://github.com/datastax/python-driver/tree/cep-vsearch) branch supporting vector type","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1569406483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1570208931","html_url":"https://github.com/apache/cassandra/pull/2378#issuecomment-1570208931","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2378","id":1570208931,"node_id":"IC_kwDOAAMmWM5dl3yj","user":{"login":"bschoening","id":5796692,"node_id":"MDQ6VXNlcjU3OTY2OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5796692?v=4","gravatar_id":"","url":"https://api.github.com/users/bschoening","html_url":"https://github.com/bschoening","followers_url":"https://api.github.com/users/bschoening/followers","following_url":"https://api.github.com/users/bschoening/following{/other_user}","gists_url":"https://api.github.com/users/bschoening/gists{/gist_id}","starred_url":"https://api.github.com/users/bschoening/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschoening/subscriptions","organizations_url":"https://api.github.com/users/bschoening/orgs","repos_url":"https://api.github.com/users/bschoening/repos","events_url":"https://api.github.com/users/bschoening/events{/privacy}","received_events_url":"https://api.github.com/users/bschoening/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T13:10:33Z","updated_at":"2023-05-31T13:10:33Z","author_association":"CONTRIBUTOR","body":"Just for general hygiene, since you are updating cqlsh.adoc, could you remove the obsolete line in Compatibility: 'cqlsh is compatible with Python 2.7.'  ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1570208931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1570795482","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1570795482","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1570795482,"node_id":"IC_kwDOAAMmWM5doG_a","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T19:17:24Z","updated_at":"2023-05-31T19:17:24Z","author_association":"CONTRIBUTOR","body":"(Andres helped me get type inference working, I'm good there.)","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1570795482/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1570871544","html_url":"https://github.com/apache/cassandra/pull/2378#issuecomment-1570871544","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2378","id":1570871544,"node_id":"IC_kwDOAAMmWM5doZj4","user":{"login":"lmtrombone","id":10072771,"node_id":"MDQ6VXNlcjEwMDcyNzcx","avatar_url":"https://avatars.githubusercontent.com/u/10072771?v=4","gravatar_id":"","url":"https://api.github.com/users/lmtrombone","html_url":"https://github.com/lmtrombone","followers_url":"https://api.github.com/users/lmtrombone/followers","following_url":"https://api.github.com/users/lmtrombone/following{/other_user}","gists_url":"https://api.github.com/users/lmtrombone/gists{/gist_id}","starred_url":"https://api.github.com/users/lmtrombone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lmtrombone/subscriptions","organizations_url":"https://api.github.com/users/lmtrombone/orgs","repos_url":"https://api.github.com/users/lmtrombone/repos","events_url":"https://api.github.com/users/lmtrombone/events{/privacy}","received_events_url":"https://api.github.com/users/lmtrombone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T20:07:19Z","updated_at":"2023-05-31T20:07:19Z","author_association":"CONTRIBUTOR","body":"> Just for general hygiene, since you are updating cqlsh.adoc, could you remove the obsolete line in Compatibility: 'cqlsh is compatible with Python 2.7.'\r\n\r\nDone","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1570871544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572551075","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572551075","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572551075,"node_id":"IC_kwDOAAMmWM5duzmj","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T18:07:35Z","updated_at":"2023-06-01T18:07:35Z","author_association":"CONTRIBUTOR","body":"> @dcapwell We having been playing with this code on our vector graph implementation and have just found that any saved SSTables with `VectorType` in them fail to load at startup because `VectorType` is missing a `public static <T> VectorType<T> getInstance(TypeParser parser)` implementation. Adding this requires support adding to `TypeParser` to pull the abstract type and dimensions from the string representation of the type.\r\n\r\nAh great reply, I'll try to figure out why the tests do not detect this (is this due to them being Memtable only?); will also add such a check to the type test so we detect this for all types!","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572551075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572560326","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572560326","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572560326,"node_id":"IC_kwDOAAMmWM5du13G","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T18:14:06Z","updated_at":"2023-06-01T18:14:06Z","author_association":"CONTRIBUTOR","body":"> ... this fails the same way mine did when you try to compare to a bind variable\r\n> \r\n> ```\r\n>     @Test\r\n>     public void selectFloatVectorFunctions()\r\n>     {\r\n>         createTable(KEYSPACE, \"CREATE TABLE %s (pk int primary key, value vector<float, 2>)\");\r\n> \r\n>         execute(\"INSERT INTO %s (pk, value) VALUES (0, ?)\", vector(1f, 2f));\r\n>         execute(\"SELECT similarity_cosine(value, ?) FROM %s WHERe pk=0\", vector(1f, 2f));\r\n>     }\r\n> ```\r\n> \r\n> ```\r\n> org.apache.cassandra.exceptions.InvalidRequestException: Cannot infer type of argument ? in call to function system.similarity_cosine(any, any): use type casts to disambiguate\r\n> ```\r\n> \r\n> commit on top of your branch at https://github.com/jbellis/cassandra/tree/dc-vector\r\n\r\nI think that's also the behavior for all functions that have multiple type signatures... we don't know which one due to bind type not being known... so the error I think is correct, you need `(vector<float, 2>) ?`. A float vector of size 2 is different than the float vector of size 4 from a type point of view, so we need that information in order to resolve functions...","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572560326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572564935","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572564935","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572564935,"node_id":"IC_kwDOAAMmWM5du2_H","user":{"login":"jbellis","id":42158,"node_id":"MDQ6VXNlcjQyMTU4","avatar_url":"https://avatars.githubusercontent.com/u/42158?v=4","gravatar_id":"","url":"https://api.github.com/users/jbellis","html_url":"https://github.com/jbellis","followers_url":"https://api.github.com/users/jbellis/followers","following_url":"https://api.github.com/users/jbellis/following{/other_user}","gists_url":"https://api.github.com/users/jbellis/gists{/gist_id}","starred_url":"https://api.github.com/users/jbellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbellis/subscriptions","organizations_url":"https://api.github.com/users/jbellis/orgs","repos_url":"https://api.github.com/users/jbellis/repos","events_url":"https://api.github.com/users/jbellis/events{/privacy}","received_events_url":"https://api.github.com/users/jbellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T18:17:51Z","updated_at":"2023-06-01T18:17:51Z","author_association":"CONTRIBUTOR","body":"Yes, memtable tests will not uncover this and just flushing will not either, you need to try to reopen the sstable which only (?) happens when you restart the server; we found this w/ manual testing","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572564935/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572573531","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572573531","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572573531,"node_id":"IC_kwDOAAMmWM5du5Fb","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T18:24:52Z","updated_at":"2023-06-01T18:24:52Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nLooked at a debugger and it is something we can make better, just need to update `org.apache.cassandra.cql3.functions.FunctionParameter#inferType` for our arg type (we currently use `FunctionParameter.anyType(true)`)\r\n\r\nWe get `null` when doing `arg.getCompatibleTypeIfKnown(keyspace)` as we have no clue what it could be... but we do have access to the other args + receiver type...  so for vectors we could just assume that any of the 2 other variables we have access to are defined... if non are defined we fail with this type cast...\r\n\r\nI am not including this `VectorFct` class in this PR as I don't define any functions... but it doesn't seem bad to get `assertRows(execute(\"SELECT similarity_cosine(value, ?) FROM %s WHERe pk=0\", vector(1f, 2f)), row(vector(1f, 2f)));` working","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572573531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572682988","html_url":"https://github.com/apache/cassandra/pull/2381#issuecomment-1572682988","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2381","id":1572682988,"node_id":"IC_kwDOAAMmWM5dvTzs","user":{"login":"maedhroz","id":630857,"node_id":"MDQ6VXNlcjYzMDg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/630857?v=4","gravatar_id":"","url":"https://api.github.com/users/maedhroz","html_url":"https://github.com/maedhroz","followers_url":"https://api.github.com/users/maedhroz/followers","following_url":"https://api.github.com/users/maedhroz/following{/other_user}","gists_url":"https://api.github.com/users/maedhroz/gists{/gist_id}","starred_url":"https://api.github.com/users/maedhroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maedhroz/subscriptions","organizations_url":"https://api.github.com/users/maedhroz/orgs","repos_url":"https://api.github.com/users/maedhroz/repos","events_url":"https://api.github.com/users/maedhroz/events{/privacy}","received_events_url":"https://api.github.com/users/maedhroz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T19:53:30Z","updated_at":"2023-06-01T19:53:30Z","author_association":"CONTRIBUTOR","body":"CircleCI: https://app.circleci.com/pipelines/github/maedhroz/cassandra?branch=cep-7-sai-5-30-rebase","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572682988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572731130","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572731130","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572731130,"node_id":"IC_kwDOAAMmWM5dvfj6","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T20:26:16Z","updated_at":"2023-06-01T20:28:30Z","author_association":"CONTRIBUTOR","body":"> Yes, memtable tests will not uncover this and just flushing will not either, you need to try to reopen the sstable which only (?) happens when you restart the server; we found this w/ manual testing\r\n\r\nI updated the test to flush to at least hit SSTables, and see in the logs compaction is failing\r\n\r\n```\r\nERROR [CompactionExecutor:1] 2023-06-01 13:24:10,454 JVMStabilityInspector.java:70 - Exception in thread Thread[CompactionExecutor:1,5,CompactionExecutor]\r\norg.apache.cassandra.exceptions.ConfigurationException: Invalid comparator class org.apache.cassandra.db.marshal.VectorType: must define a public static instance field or a public static method getInstance(TypeParser).\r\n```\r\n\r\nStill trying to see if I can get the test to fail\r\n\r\nEDIT:\r\n\r\nUpdated the test to force a compact and hit it there to fail the test.  Now with that covered, I will also add to the abstract type test to do this reflection check","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572731130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572883844","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572883844","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572883844,"node_id":"IC_kwDOAAMmWM5dwE2E","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T22:43:32Z","updated_at":"2023-06-01T22:43:32Z","author_association":"CONTRIBUTOR","body":"> @dcapwell We having been playing with this code on our vector graph implementation and have just found that any saved SSTables with `VectorType` in them fail to load at startup because `VectorType` is missing a `public static <T> VectorType<T> getInstance(TypeParser parser)` implementation. Adding this requires support adding to `TypeParser` to pull the abstract type and dimensions from the string representation of the type.\r\n\r\n@mike-tr-adamson this has been fixed and improved tests to detect this class of error; both `AbstractTypeTest` and `RandomSchemaTest` detect this case now...","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572883844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572916281","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572916281","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572916281,"node_id":"IC_kwDOAAMmWM5dwMw5","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T23:27:35Z","updated_at":"2023-06-01T23:27:35Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nI added a test, but only when the user provides a `ByteBuffer` for all values... which is what the current test already does... aka I have the client avoid serializing.... this is more testing that nothing weird is happening as the type is seen as a custom type to the driver","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572916281/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572918310","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572918310","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572918310,"node_id":"IC_kwDOAAMmWM5dwNQm","user":{"login":"dcapwell","id":1852601,"node_id":"MDQ6VXNlcjE4NTI2MDE=","avatar_url":"https://avatars.githubusercontent.com/u/1852601?v=4","gravatar_id":"","url":"https://api.github.com/users/dcapwell","html_url":"https://github.com/dcapwell","followers_url":"https://api.github.com/users/dcapwell/followers","following_url":"https://api.github.com/users/dcapwell/following{/other_user}","gists_url":"https://api.github.com/users/dcapwell/gists{/gist_id}","starred_url":"https://api.github.com/users/dcapwell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcapwell/subscriptions","organizations_url":"https://api.github.com/users/dcapwell/orgs","repos_url":"https://api.github.com/users/dcapwell/repos","events_url":"https://api.github.com/users/dcapwell/events{/privacy}","received_events_url":"https://api.github.com/users/dcapwell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T23:30:58Z","updated_at":"2023-06-01T23:30:58Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\n@JeremiahDJordan took a look at the java code and was wondering, are you planning to add non-fixed type support later or any validation that the vector provided by the user matches the type?  Looking at https://github.com/datastax/java-driver/compare/4.x...cep-vsearch#diff-c5840185344d92ac3e841b76b2edcfedfa0b3a34b8f03921acb14f130273c825R59-R81 it assumes the element is fixed length (which may not be true) and doesn't look to verify that the client gave the right element size?","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572918310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572924293","html_url":"https://github.com/apache/cassandra/pull/2310#issuecomment-1572924293","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2310","id":1572924293,"node_id":"IC_kwDOAAMmWM5dwOuF","user":{"login":"JeremiahDJordan","id":1037592,"node_id":"MDQ6VXNlcjEwMzc1OTI=","avatar_url":"https://avatars.githubusercontent.com/u/1037592?v=4","gravatar_id":"","url":"https://api.github.com/users/JeremiahDJordan","html_url":"https://github.com/JeremiahDJordan","followers_url":"https://api.github.com/users/JeremiahDJordan/followers","following_url":"https://api.github.com/users/JeremiahDJordan/following{/other_user}","gists_url":"https://api.github.com/users/JeremiahDJordan/gists{/gist_id}","starred_url":"https://api.github.com/users/JeremiahDJordan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JeremiahDJordan/subscriptions","organizations_url":"https://api.github.com/users/JeremiahDJordan/orgs","repos_url":"https://api.github.com/users/JeremiahDJordan/repos","events_url":"https://api.github.com/users/JeremiahDJordan/events{/privacy}","received_events_url":"https://api.github.com/users/JeremiahDJordan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-01T23:41:21Z","updated_at":"2023-06-01T23:41:21Z","author_association":"CONTRIBUTOR","body":"@dcapwell such questions are why @absurdfarce was asking about serialization format on the [JIRA](https://issues.apache.org/jira/browse/CASSANDRA-18504?focusedCommentId=17727613&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17727613)\r\nYes the current implementation only works for fixed width types.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1572924293/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1573458818","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1573458818","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1573458818,"node_id":"IC_kwDOAAMmWM5dyROC","user":{"login":"bereng","id":6973517,"node_id":"MDQ6VXNlcjY5NzM1MTc=","avatar_url":"https://avatars.githubusercontent.com/u/6973517?v=4","gravatar_id":"","url":"https://api.github.com/users/bereng","html_url":"https://github.com/bereng","followers_url":"https://api.github.com/users/bereng/followers","following_url":"https://api.github.com/users/bereng/following{/other_user}","gists_url":"https://api.github.com/users/bereng/gists{/gist_id}","starred_url":"https://api.github.com/users/bereng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bereng/subscriptions","organizations_url":"https://api.github.com/users/bereng/orgs","repos_url":"https://api.github.com/users/bereng/repos","events_url":"https://api.github.com/users/bereng/events{/privacy}","received_events_url":"https://api.github.com/users/bereng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T09:49:08Z","updated_at":"2023-06-02T09:49:08Z","author_association":"CONTRIBUTOR","body":"@adelapena I had to rebase bc of the sstable tries. I had to basically make sure the sstable version was getting to the places the DeletionTime serializer was needing it:\r\n- J8 [here](https://app.circleci.com/pipelines/github/bereng/cassandra/970/workflows/2e949ede-cae5-4ab8-a118-43ec6d722b0d). All good as failures are C18065, c18499 and a timeout that has passed many times before in my tests\r\n- J11 [green](https://app.circleci.com/pipelines/github/bereng/cassandra/970/workflows/b4fa699c-3f6b-4856-9357-67149a560257)\r\n- J11/J17 as [expected](https://app.circleci.com/pipelines/github/bereng/cassandra/971/workflows/1f607fe6-d00d-4609-83e1-48c64ddd3029) J11 is green and j17 with the known failures\r\n- J17/J17 with the [expected](https://app.circleci.com/pipelines/github/bereng/cassandra/971/workflows/ea8da6f9-ed4a-49fc-8bf2-d4a95e3f91a4) failures\r\n\r\nOnce the commit for the BtiFormat rebase is +1 I think we can merge.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1573458818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1573556670","html_url":"https://github.com/apache/cassandra/pull/2383#issuecomment-1573556670","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2383","id":1573556670,"node_id":"IC_kwDOAAMmWM5dypG-","user":{"login":"iamaleksey","id":10309,"node_id":"MDQ6VXNlcjEwMzA5","avatar_url":"https://avatars.githubusercontent.com/u/10309?v=4","gravatar_id":"","url":"https://api.github.com/users/iamaleksey","html_url":"https://github.com/iamaleksey","followers_url":"https://api.github.com/users/iamaleksey/followers","following_url":"https://api.github.com/users/iamaleksey/following{/other_user}","gists_url":"https://api.github.com/users/iamaleksey/gists{/gist_id}","starred_url":"https://api.github.com/users/iamaleksey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamaleksey/subscriptions","organizations_url":"https://api.github.com/users/iamaleksey/orgs","repos_url":"https://api.github.com/users/iamaleksey/repos","events_url":"https://api.github.com/users/iamaleksey/events{/privacy}","received_events_url":"https://api.github.com/users/iamaleksey/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T11:08:41Z","updated_at":"2023-06-02T11:08:41Z","author_association":"MEMBER","body":"Merged manually, cheers.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1573556670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1573945306","html_url":"https://github.com/apache/cassandra/pull/1891#issuecomment-1573945306","issue_url":"https://api.github.com/repos/apache/cassandra/issues/1891","id":1573945306,"node_id":"IC_kwDOAAMmWM5d0H_a","user":{"login":"adelapena","id":5229055,"node_id":"MDQ6VXNlcjUyMjkwNTU=","avatar_url":"https://avatars.githubusercontent.com/u/5229055?v=4","gravatar_id":"","url":"https://api.github.com/users/adelapena","html_url":"https://github.com/adelapena","followers_url":"https://api.github.com/users/adelapena/followers","following_url":"https://api.github.com/users/adelapena/following{/other_user}","gists_url":"https://api.github.com/users/adelapena/gists{/gist_id}","starred_url":"https://api.github.com/users/adelapena/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adelapena/subscriptions","organizations_url":"https://api.github.com/users/adelapena/orgs","repos_url":"https://api.github.com/users/adelapena/repos","events_url":"https://api.github.com/users/adelapena/events{/privacy}","received_events_url":"https://api.github.com/users/adelapena/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T15:42:16Z","updated_at":"2023-06-02T16:08:58Z","author_association":"CONTRIBUTOR","body":"> J8 [here](https://app.circleci.com/pipelines/github/bereng/cassandra/970/workflows/2e949ede-cae5-4ab8-a118-43ec6d722b0d). All good as failures are C18065, c18499 and a timeout that has passed many times before in my tests\r\n\r\nThe upgrade test `MixedModeAvailabilityV3XAllOneTest` is broken on trunk, some ten runs are enough to reproduce the timeout: https://app.circleci.com/pipelines/github/adelapena/cassandra/2927/workflows/fcd1cd60-826b-484a-8e81-d3ba640f7de9/jobs/47659/tests. I have opened CASSANDRA-18564 for it.\r\n\r\nThe rest of the results look good to me. However, there is a missed detail which is that the new `storage_compatibility_mode` should reject a `sstable` yaml config using bti/tries if we are in `CASSANDRA_4` compatibility mode. For example, in `DatabseDescriptor.getAndValidateWriteFormat`. Ideally, it should be part of this ticket, but I guess we can do it in a separate follow-up ticket so we can get this merged.\r\n","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1573945306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574171414","html_url":"https://github.com/apache/cassandra/pull/2327#issuecomment-1574171414","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2327","id":1574171414,"node_id":"IC_kwDOAAMmWM5d0_MW","user":{"login":"maedhroz","id":630857,"node_id":"MDQ6VXNlcjYzMDg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/630857?v=4","gravatar_id":"","url":"https://api.github.com/users/maedhroz","html_url":"https://github.com/maedhroz","followers_url":"https://api.github.com/users/maedhroz/followers","following_url":"https://api.github.com/users/maedhroz/following{/other_user}","gists_url":"https://api.github.com/users/maedhroz/gists{/gist_id}","starred_url":"https://api.github.com/users/maedhroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maedhroz/subscriptions","organizations_url":"https://api.github.com/users/maedhroz/orgs","repos_url":"https://api.github.com/users/maedhroz/repos","events_url":"https://api.github.com/users/maedhroz/events{/privacy}","received_events_url":"https://api.github.com/users/maedhroz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T18:51:24Z","updated_at":"2023-06-02T18:51:24Z","author_association":"CONTRIBUTOR","body":"This is now rebased to trunk as of 6cea0cd448d11dc633237ceb1f73f36c2eafb368","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574171414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574301287","html_url":"https://github.com/apache/cassandra/pull/2327#issuecomment-1574301287","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2327","id":1574301287,"node_id":"IC_kwDOAAMmWM5d1e5n","user":{"login":"maedhroz","id":630857,"node_id":"MDQ6VXNlcjYzMDg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/630857?v=4","gravatar_id":"","url":"https://api.github.com/users/maedhroz","html_url":"https://github.com/maedhroz","followers_url":"https://api.github.com/users/maedhroz/followers","following_url":"https://api.github.com/users/maedhroz/following{/other_user}","gists_url":"https://api.github.com/users/maedhroz/gists{/gist_id}","starred_url":"https://api.github.com/users/maedhroz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maedhroz/subscriptions","organizations_url":"https://api.github.com/users/maedhroz/orgs","repos_url":"https://api.github.com/users/maedhroz/repos","events_url":"https://api.github.com/users/maedhroz/events{/privacy}","received_events_url":"https://api.github.com/users/maedhroz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-02T20:52:08Z","updated_at":"2023-06-02T20:52:08Z","author_association":"CONTRIBUTOR","body":"Current test baseline should roughly correspond to: https://app.circleci.com/pipelines/github/maedhroz/cassandra?branch=cep-7-sai-5-30-rebase","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574301287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574888588","html_url":"https://github.com/apache/cassandra/pull/2351#issuecomment-1574888588","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2351","id":1574888588,"node_id":"IC_kwDOAAMmWM5d3uSM","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-03T11:48:58Z","updated_at":"2023-06-03T11:48:58Z","author_association":"MEMBER","body":"> The amount of duplication between build-*.sh files is worrying.\r\n\r\ncan this be follow-up? i'll be pushed for time to get this tested and working… once in-tree, improving is much easier. ","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574888588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574938358","html_url":"https://github.com/apache/cassandra/pull/2351#issuecomment-1574938358","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2351","id":1574938358,"node_id":"IC_kwDOAAMmWM5d36b2","user":{"login":"jmckenzie-dev","id":6588455,"node_id":"MDQ6VXNlcjY1ODg0NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6588455?v=4","gravatar_id":"","url":"https://api.github.com/users/jmckenzie-dev","html_url":"https://github.com/jmckenzie-dev","followers_url":"https://api.github.com/users/jmckenzie-dev/followers","following_url":"https://api.github.com/users/jmckenzie-dev/following{/other_user}","gists_url":"https://api.github.com/users/jmckenzie-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/jmckenzie-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmckenzie-dev/subscriptions","organizations_url":"https://api.github.com/users/jmckenzie-dev/orgs","repos_url":"https://api.github.com/users/jmckenzie-dev/repos","events_url":"https://api.github.com/users/jmckenzie-dev/events{/privacy}","received_events_url":"https://api.github.com/users/jmckenzie-dev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-03T13:09:25Z","updated_at":"2023-06-03T13:09:25Z","author_association":"CONTRIBUTOR","body":"> > The amount of duplication between build-*.sh files is worrying.\r\n> \r\n> can this be follow-up? i'll be pushed for time to get this tested and working… once in-tree, improving is much easier.\r\n\r\nSure. Let's just make sure we actually capture that debt in a JIRA that follows on from this work so it doesn't fall by the wayside.","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1574938358/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1575564266","html_url":"https://github.com/apache/cassandra/pull/2282#issuecomment-1575564266","issue_url":"https://api.github.com/repos/apache/cassandra/issues/2282","id":1575564266,"node_id":"IC_kwDOAAMmWM5d6TPq","user":{"login":"michaelsembwever","id":559444,"node_id":"MDQ6VXNlcjU1OTQ0NA==","avatar_url":"https://avatars.githubusercontent.com/u/559444?v=4","gravatar_id":"","url":"https://api.github.com/users/michaelsembwever","html_url":"https://github.com/michaelsembwever","followers_url":"https://api.github.com/users/michaelsembwever/followers","following_url":"https://api.github.com/users/michaelsembwever/following{/other_user}","gists_url":"https://api.github.com/users/michaelsembwever/gists{/gist_id}","starred_url":"https://api.github.com/users/michaelsembwever/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/michaelsembwever/subscriptions","organizations_url":"https://api.github.com/users/michaelsembwever/orgs","repos_url":"https://api.github.com/users/michaelsembwever/repos","events_url":"https://api.github.com/users/michaelsembwever/events{/privacy}","received_events_url":"https://api.github.com/users/michaelsembwever/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-04T13:09:19Z","updated_at":"2023-06-05T06:00:38Z","author_association":"MEMBER","body":"why are we changing `sstable_compression` to `class` in the cql table properties? (this is a compatibility break) \r\n\r\nwe need more tests:  \r\n- tests around yaml-to-schema overrides, \r\n- tests around schema compression profiles over upgrade paths with new different yaml profiles,\r\n\r\n[EDIT] thinking about it a bit more, the latter point doesn't need to be about upgrades. Just that these settings are applied only at table creation time, and that changing the yaml settings never interferes (even if you recreate the table from its DDL).","reactions":{"url":"https://api.github.com/repos/apache/cassandra/issues/comments/1575564266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]