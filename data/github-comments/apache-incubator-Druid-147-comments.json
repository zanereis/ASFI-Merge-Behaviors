[{"url":"https://api.github.com/repos/apache/druid/issues/comments/308093863","html_url":"https://github.com/apache/druid/pull/4399#issuecomment-308093863","issue_url":"https://api.github.com/repos/apache/druid/issues/4399","id":308093863,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODA5Mzg2Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T12:00:35Z","updated_at":"2017-06-13T12:00:35Z","author_association":"CONTRIBUTOR","body":"I'm not sure the travis failure relates to this patch. Would you please close and reopen this pr to restart travis ci?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308093863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308115187","html_url":"https://github.com/apache/druid/issues/4400#issuecomment-308115187","issue_url":"https://api.github.com/repos/apache/druid/issues/4400","id":308115187,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODExNTE4Nw==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T13:26:49Z","updated_at":"2017-06-13T13:26:49Z","author_association":"CONTRIBUTOR","body":"@RongZhang828  this is a great proposal looking forward to see more details ! ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308115187/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308142130","html_url":"https://github.com/apache/druid/pull/4399#issuecomment-308142130","issue_url":"https://api.github.com/repos/apache/druid/issues/4399","id":308142130,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODE0MjEzMA==","user":{"login":"freakyzoidberg","id":498078,"node_id":"MDQ6VXNlcjQ5ODA3OA==","avatar_url":"https://avatars.githubusercontent.com/u/498078?v=4","gravatar_id":"","url":"https://api.github.com/users/freakyzoidberg","html_url":"https://github.com/freakyzoidberg","followers_url":"https://api.github.com/users/freakyzoidberg/followers","following_url":"https://api.github.com/users/freakyzoidberg/following{/other_user}","gists_url":"https://api.github.com/users/freakyzoidberg/gists{/gist_id}","starred_url":"https://api.github.com/users/freakyzoidberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freakyzoidberg/subscriptions","organizations_url":"https://api.github.com/users/freakyzoidberg/orgs","repos_url":"https://api.github.com/users/freakyzoidberg/repos","events_url":"https://api.github.com/users/freakyzoidberg/events{/privacy}","received_events_url":"https://api.github.com/users/freakyzoidberg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T14:51:39Z","updated_at":"2017-06-13T14:51:39Z","author_association":"MEMBER","body":"Sure, there was an issue in the test, which was causing the travis run to timeout, should be solved now","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308142130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308143390","html_url":"https://github.com/apache/druid/issues/4400#issuecomment-308143390","issue_url":"https://api.github.com/repos/apache/druid/issues/4400","id":308143390,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODE0MzM5MA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T14:55:25Z","updated_at":"2017-06-13T14:55:25Z","author_association":"CONTRIBUTOR","body":"Just as a general fyi, we run on marathon/mesos using just marathon app definitions.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308143390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308148351","html_url":"https://github.com/apache/druid/issues/4400#issuecomment-308148351","issue_url":"https://api.github.com/repos/apache/druid/issues/4400","id":308148351,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODE0ODM1MQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T15:10:29Z","updated_at":"2017-06-13T15:10:29Z","author_association":"CONTRIBUTOR","body":"Here is a list of challenges coming from someone using druid in a containerized world:\r\n\r\n* How do you handle the indexing service?\r\n* How do you handle live upgrades of an indexing service task?\r\n* How do you handle persistent volumes for historicals?\r\n* How do you make sure your container upgrade strategies are sane?\r\n* How do you properly isolate failure domains?\r\n* How do you minimize the impact of noisy neighbors?\r\n* Lots of thread pools size as some fraction of total system cpu count, did you make sure to set them all correctly?\r\n* With TLS support in the works, how do you manage certs and CAs? \r\n* How do you scale up without having an operator poke a bunch of different settings?\r\n* How do you handle logging?\r\n* How do you look at metrics so you know if 100%  cpu usage is ok or bad?\r\n\r\nA useful solution can certainly be developed that only addresses a subset of these. Hopefully our experience will help ease adoption and maximize utility of such a feature.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308148351/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308153119","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308153119","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308153119,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODE1MzExOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T15:23:38Z","updated_at":"2017-06-13T15:23:38Z","author_association":"CONTRIBUTOR","body":"@leventov, @jihoonson, thanks for reviewing. I pushed a new update.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308153119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308154173","html_url":"https://github.com/apache/druid/pull/4397#issuecomment-308154173","issue_url":"https://api.github.com/repos/apache/druid/issues/4397","id":308154173,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODE1NDE3Mw==","user":{"login":"xanec","id":3969464,"node_id":"MDQ6VXNlcjM5Njk0NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/3969464?v=4","gravatar_id":"","url":"https://api.github.com/users/xanec","html_url":"https://github.com/xanec","followers_url":"https://api.github.com/users/xanec/followers","following_url":"https://api.github.com/users/xanec/following{/other_user}","gists_url":"https://api.github.com/users/xanec/gists{/gist_id}","starred_url":"https://api.github.com/users/xanec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xanec/subscriptions","organizations_url":"https://api.github.com/users/xanec/orgs","repos_url":"https://api.github.com/users/xanec/repos","events_url":"https://api.github.com/users/xanec/events{/privacy}","received_events_url":"https://api.github.com/users/xanec/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T15:26:49Z","updated_at":"2017-06-13T15:26:49Z","author_association":"CONTRIBUTOR","body":"Hi @jihoonson, it's already stated together with `ObjectCachingColumnSelectorFactory`:\r\n```\r\n// Caches references to selector objects for each column instead of creating a new object each time in order to save heap space.\r\n// In general the selectorFactory need not to thread-safe.\r\n// here its made thread safe to support the special case of groupBy where the multiple threads can add concurrently to the IncrementalIndex.\r\n``` \r\nBut I will add in additional remarks/docs together with the declaration of the parameter.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308154173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308168949","html_url":"https://github.com/apache/druid/pull/4374#issuecomment-308168949","issue_url":"https://api.github.com/repos/apache/druid/issues/4374","id":308168949,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODE2ODk0OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T16:13:39Z","updated_at":"2017-06-13T16:13:39Z","author_association":"MEMBER","body":"@b-slim could this PR be merged?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308168949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308234969","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308234969","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308234969,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODIzNDk2OQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T20:15:09Z","updated_at":"2017-06-13T20:15:09Z","author_association":"CONTRIBUTOR","body":"@gianm i think there is some tests that needs some fixes \r\n```java\r\nGroupByQueryRunnerTest.testGroupByWithOutputNameCollisions[config=v2SmallDictionary, runner=noRollupRtIndex] \r\n\r\nExpected: (an instance of java.lang.IllegalArgumentException and exception with message a string containing \"Duplicate output name[alias]\")\r\n\r\n     but: exception with message a string containing \"Duplicate output name[alias]\" message was \"[alias] already defined\"\r\n\r\nStacktrace was: java.lang.IllegalArgumentException: [alias] already defined\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308234969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308251146","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308251146","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308251146,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODI1MTE0Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T21:16:26Z","updated_at":"2017-06-13T21:16:26Z","author_association":"CONTRIBUTOR","body":"@b-slim ah, yeah, one of the error messages changed. I just pushed a fix for that, thanks.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308251146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308259568","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308259568","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308259568,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODI1OTU2OA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T21:51:57Z","updated_at":"2017-06-13T21:51:57Z","author_association":"CONTRIBUTOR","body":"@b-slim any more comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308259568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308261879","html_url":"https://github.com/apache/druid/pull/4399#issuecomment-308261879","issue_url":"https://api.github.com/repos/apache/druid/issues/4399","id":308261879,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODI2MTg3OQ==","user":{"login":"freakyzoidberg","id":498078,"node_id":"MDQ6VXNlcjQ5ODA3OA==","avatar_url":"https://avatars.githubusercontent.com/u/498078?v=4","gravatar_id":"","url":"https://api.github.com/users/freakyzoidberg","html_url":"https://github.com/freakyzoidberg","followers_url":"https://api.github.com/users/freakyzoidberg/followers","following_url":"https://api.github.com/users/freakyzoidberg/following{/other_user}","gists_url":"https://api.github.com/users/freakyzoidberg/gists{/gist_id}","starred_url":"https://api.github.com/users/freakyzoidberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freakyzoidberg/subscriptions","organizations_url":"https://api.github.com/users/freakyzoidberg/orgs","repos_url":"https://api.github.com/users/freakyzoidberg/repos","events_url":"https://api.github.com/users/freakyzoidberg/events{/privacy}","received_events_url":"https://api.github.com/users/freakyzoidberg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T22:02:11Z","updated_at":"2017-06-13T22:02:11Z","author_association":"MEMBER","body":"Closed this PR to cleanup the commits","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308261879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308265592","html_url":"https://github.com/apache/druid/pull/4399#issuecomment-308265592","issue_url":"https://api.github.com/repos/apache/druid/issues/4399","id":308265592,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODI2NTU5Mg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T22:20:40Z","updated_at":"2017-06-13T22:20:40Z","author_association":"MEMBER","body":"@freakyzoidberg please don't close and recreate PR in this situation in the future, just add commits on top.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308265592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308270522","html_url":"https://github.com/apache/druid/pull/4399#issuecomment-308270522","issue_url":"https://api.github.com/repos/apache/druid/issues/4399","id":308270522,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODI3MDUyMg==","user":{"login":"freakyzoidberg","id":498078,"node_id":"MDQ6VXNlcjQ5ODA3OA==","avatar_url":"https://avatars.githubusercontent.com/u/498078?v=4","gravatar_id":"","url":"https://api.github.com/users/freakyzoidberg","html_url":"https://github.com/freakyzoidberg","followers_url":"https://api.github.com/users/freakyzoidberg/followers","following_url":"https://api.github.com/users/freakyzoidberg/following{/other_user}","gists_url":"https://api.github.com/users/freakyzoidberg/gists{/gist_id}","starred_url":"https://api.github.com/users/freakyzoidberg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/freakyzoidberg/subscriptions","organizations_url":"https://api.github.com/users/freakyzoidberg/orgs","repos_url":"https://api.github.com/users/freakyzoidberg/repos","events_url":"https://api.github.com/users/freakyzoidberg/events{/privacy}","received_events_url":"https://api.github.com/users/freakyzoidberg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-13T22:47:49Z","updated_at":"2017-06-13T22:47:49Z","author_association":"MEMBER","body":"Sure, sorry about that","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308270522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308294858","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308294858","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308294858,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODI5NDg1OA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T01:37:41Z","updated_at":"2017-06-14T01:37:41Z","author_association":"CONTRIBUTOR","body":"Thanks for gathering this info, I'm looking into scaling down the unit tests in ByteBufferMinMaxOffsetHeapTest","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308294858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308301137","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308301137","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308301137,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODMwMTEzNw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T02:23:45Z","updated_at":"2017-06-14T02:23:45Z","author_association":"CONTRIBUTOR","body":"@jon-wei thanks for looking into it!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308301137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308355182","html_url":"https://github.com/apache/druid/issues/4375#issuecomment-308355182","issue_url":"https://api.github.com/repos/apache/druid/issues/4375","id":308355182,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODM1NTE4Mg==","user":{"login":"stevenchen3","id":2478428,"node_id":"MDQ6VXNlcjI0Nzg0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/2478428?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenchen3","html_url":"https://github.com/stevenchen3","followers_url":"https://api.github.com/users/stevenchen3/followers","following_url":"https://api.github.com/users/stevenchen3/following{/other_user}","gists_url":"https://api.github.com/users/stevenchen3/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenchen3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenchen3/subscriptions","organizations_url":"https://api.github.com/users/stevenchen3/orgs","repos_url":"https://api.github.com/users/stevenchen3/repos","events_url":"https://api.github.com/users/stevenchen3/events{/privacy}","received_events_url":"https://api.github.com/users/stevenchen3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T08:09:54Z","updated_at":"2017-06-14T08:09:54Z","author_association":"NONE","body":"encountered the same issue here.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308355182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308466773","html_url":"https://github.com/apache/druid/issues/4235#issuecomment-308466773","issue_url":"https://api.github.com/repos/apache/druid/issues/4235","id":308466773,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODQ2Njc3Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T15:24:38Z","updated_at":"2017-06-14T15:24:38Z","author_association":"CONTRIBUTOR","body":"Out of curiosity, what kind of changes would be possible if we removed the ability to write v8?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308466773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308479678","html_url":"https://github.com/apache/druid/issues/4235#issuecomment-308479678","issue_url":"https://api.github.com/repos/apache/druid/issues/4235","id":308479678,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODQ3OTY3OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T16:06:57Z","updated_at":"2017-06-14T16:06:57Z","author_association":"MEMBER","body":"It is explained in the issue body: in-memory merge","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308479678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308480345","html_url":"https://github.com/apache/druid/issues/4235#issuecomment-308480345","issue_url":"https://api.github.com/repos/apache/druid/issues/4235","id":308480345,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODQ4MDM0NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T16:09:26Z","updated_at":"2017-06-14T16:09:26Z","author_association":"CONTRIBUTOR","body":"I meant to ask about some specific classes and methods.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308480345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308482662","html_url":"https://github.com/apache/druid/pull/4238#issuecomment-308482662","issue_url":"https://api.github.com/repos/apache/druid/issues/4238","id":308482662,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODQ4MjY2Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T16:17:55Z","updated_at":"2017-06-14T16:17:55Z","author_association":"CONTRIBUTOR","body":"@gianm @jon-wei would you please review this patch again?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308482662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308543348","html_url":"https://github.com/apache/druid/issues/4235#issuecomment-308543348","issue_url":"https://api.github.com/repos/apache/druid/issues/4235","id":308543348,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU0MzM0OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T20:07:40Z","updated_at":"2017-06-14T20:07:40Z","author_association":"MEMBER","body":"@gianm all classes implementing Serializer interface, *Writers, see https://github.com/metamx/druid/commit/f1eb2c8e7dc97e5e9554231fdaf90c486b2ecb81","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308543348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308556975","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308556975","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308556975,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU1Njk3NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T21:01:19Z","updated_at":"2017-06-14T21:01:19Z","author_association":"CONTRIBUTOR","body":"@fjy are you ok with the design here?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308556975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308558589","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308558589","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308558589,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU1ODU4OQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T21:07:51Z","updated_at":"2017-06-14T21:07:51Z","author_association":"CONTRIBUTOR","body":"yeah +1","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308558589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308568640","html_url":"https://github.com/apache/druid/pull/4394#issuecomment-308568640","issue_url":"https://api.github.com/repos/apache/druid/issues/4394","id":308568640,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU2ODY0MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T21:50:12Z","updated_at":"2017-06-14T21:50:12Z","author_association":"CONTRIBUTOR","body":"Ok, I think it's mergeable then, since we have 3 +1s and one of the reviewers looked at the code. Thanks everyone.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308568640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308571105","html_url":"https://github.com/apache/druid/issues/3645#issuecomment-308571105","issue_url":"https://api.github.com/repos/apache/druid/issues/3645","id":308571105,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU3MTEwNQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T22:02:09Z","updated_at":"2017-06-14T22:02:09Z","author_association":"CONTRIBUTOR","body":"Resolved (for now) by #4394, which implements the following behavior:\r\n\r\n- Missing columns are treated as `null` values.\r\n- `null` values in string context are treated the same as empty strings, so `strlen(x)` is 0 if x is null.\r\n- `null` values in numeric context are treated as zeroes, so `x + y` is 3 if x is null and y is 3.\r\n\r\nThis behavior is generally consistent with basic Druid column selectors, which will treat missing columns as null or 0 (based on the selector type).\r\n\r\nRelated: #4349, which may bring more sweeping changes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308571105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308572528","html_url":"https://github.com/apache/druid/pull/4405#issuecomment-308572528","issue_url":"https://api.github.com/repos/apache/druid/issues/4405","id":308572528,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU3MjUyOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T22:09:25Z","updated_at":"2017-06-14T22:09:25Z","author_association":"CONTRIBUTOR","body":"Broken out from #4360.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308572528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308572712","html_url":"https://github.com/apache/druid/pull/4360#issuecomment-308572712","issue_url":"https://api.github.com/repos/apache/druid/issues/4360","id":308572712,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU3MjcxMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T22:10:18Z","updated_at":"2017-06-14T22:10:18Z","author_association":"CONTRIBUTOR","body":"Broke out #4405.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308572712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308590001","html_url":"https://github.com/apache/druid/issues/4387#issuecomment-308590001","issue_url":"https://api.github.com/repos/apache/druid/issues/4387","id":308590001,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU5MDAwMQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-14T23:53:05Z","updated_at":"2017-06-14T23:53:05Z","author_association":"CONTRIBUTOR","body":"Another failure.\r\n```\r\nTests run: 5, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 7.164 sec <<< FAILURE! - in io.druid.segment.realtime.appenderator.AppenderatorDriverTest\r\ntestMaxRowsPerSegment(io.druid.segment.realtime.appenderator.AppenderatorDriverTest)  Time elapsed: 2.846 sec  <<< ERROR!\r\njava.util.concurrent.TimeoutException\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:205)\r\n\tat io.druid.segment.realtime.appenderator.AppenderatorDriverTest.testMaxRowsPerSegment(AppenderatorDriverTest.java:184)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308590001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308596223","html_url":"https://github.com/apache/druid/issues/4403#issuecomment-308596223","issue_url":"https://api.github.com/repos/apache/druid/issues/4403","id":308596223,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODU5NjIyMw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T00:38:57Z","updated_at":"2017-06-15T00:38:57Z","author_association":"CONTRIBUTOR","body":"I was able to reproduce this issue consistently by making the following change in DruidStatement, to restrict the JDBC frame sizes to 100 rows:\r\n\r\n```\r\n@@ -157,10 +157,13 @@ public class DruidMeta extends MetaImpl\r\n       final PrepareCallback callback\r\n   ) throws NoSuchStatementException\r\n   {\r\n     // Ignore \"callback\", this class is designed for use with LocalService which doesn't use it.\r\n     final DruidStatement druidStatement = getDruidStatement(statement);\r\n     final Signature signature = druidStatement.prepare(plannerFactory, sql, maxRowCount).getSignature();\r\n-    final Frame firstFrame = druidStatement.execute().nextFrame(DruidStatement.START_OFFSET, maxRowsInFirstFrame);\r\n+    final Frame firstFrame = druidStatement.execute().nextFrame(DruidStatement.START_OFFSET, 100);\r\n \r\n     return new ExecuteResult(\r\n         ImmutableList.of(\r\n```\r\n\r\nand then running a JDBC query that would span multiple frames:\r\n\r\n```\r\npackage avatica;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.ResultSet;\r\nimport java.util.Properties;\r\n\r\npublic class AvaticaClient\r\n{\r\n  public static void main(String[] args) {\r\n    // Connect to /druid/v2/sql/avatica/ on your broker.\r\n    String url = \"jdbc:avatica:remote:url=http://localhost:8082/druid/v2/sql/avatica/\";\r\n\r\n// Set any connection context parameters you need here (see \"Connection context\" below).\r\n// Or leave empty for default behavior.\r\n    Properties connectionProperties = new Properties();\r\n\r\n    try {\r\n      Connection connection = DriverManager.getConnection(url, connectionProperties);\r\n      ResultSet resultSet = connection.createStatement().executeQuery(\"SELECT l_partkey, l_shipmode, COUNT(*) FROM tpch_lineitem WHERE __time < TIMESTAMP '1992-01-03 00:00:00' GROUP BY l_partkey, l_shipmode\");\r\n      while (resultSet.next()) {\r\n        System.out.println(resultSet.getString(1) + \", \" + resultSet.getString(2) + \", \" + resultSet.getLong(3));\r\n      }\r\n    } catch (Exception e) {\r\n      System.out.println(e);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308596223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308634096","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308634096","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308634096,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODYzNDA5Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T05:39:42Z","updated_at":"2017-06-15T05:39:42Z","author_association":"MEMBER","body":"@gianm seems like none of Travis build after #4394 succeed, I think there is some problem with this PR","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308634096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308636692","html_url":"https://github.com/apache/druid/pull/4404#issuecomment-308636692","issue_url":"https://api.github.com/repos/apache/druid/issues/4404","id":308636692,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODYzNjY5Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T05:58:35Z","updated_at":"2017-06-15T05:58:35Z","author_association":"CONTRIBUTOR","body":"This patch looks good to me. I don't think the travis failures relate to this patch. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308636692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308774468","html_url":"https://github.com/apache/druid/pull/4411#issuecomment-308774468","issue_url":"https://api.github.com/repos/apache/druid/issues/4411","id":308774468,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODc3NDQ2OA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T15:32:11Z","updated_at":"2017-06-15T15:32:11Z","author_association":"CONTRIBUTOR","body":"Then it's not ISO8601. I don't think we should be supporting non standard timestamps. But there was some talk at one point about doing simple etl in druid that could allow people to specify a transformation like this. \r\n\r\nIMHO this is one of the more compelling use cases for such a feature.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308774468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308792257","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308792257","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308792257,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODc5MjI1Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T16:18:26Z","updated_at":"2017-06-15T16:18:26Z","author_association":"CONTRIBUTOR","body":"@leventov which failures do you think might be related to that PR? Is https://travis-ci.org/druid-io/druid/jobs/242999630 (https://github.com/druid-io/druid/pull/4404) one of them?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308792257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308797755","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308797755","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308797755,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODc5Nzc1NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T16:39:30Z","updated_at":"2017-06-15T16:39:30Z","author_association":"MEMBER","body":"@gianm it also fails","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308797755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308798713","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308798713","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308798713,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODc5ODcxMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T16:43:20Z","updated_at":"2017-06-15T16:43:20Z","author_association":"CONTRIBUTOR","body":"Based on @jihoonson's original comment, and also the failure at https://travis-ci.org/druid-io/druid/jobs/242999630, and also running them locally, seems like the problem is likely in CompressedVSizeIndexedV3WriterTest and/or CompressedVSizeIntsIndexedSupplierTest. Travis fails if there's no output for 10 minutes, and the latter test does take more than 10 minutes to run sometimes. I have no idea why or if it is really related to #4394 or not.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308798713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308799191","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308799191","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308799191,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODc5OTE5MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T16:44:54Z","updated_at":"2017-06-15T16:44:54Z","author_association":"CONTRIBUTOR","body":"I ran CompressedVSizeIntsIndexedSupplierTest on the `druid-0.10.0` tag and it took 15s. So something has changed since then.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308799191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308799913","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308799913","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308799913,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODc5OTkxMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T16:47:54Z","updated_at":"2017-06-15T16:48:06Z","author_association":"CONTRIBUTOR","body":"I ran it again on 976492c18644614fa7d4cf0cd1ad508929579e6c (which doesn't include #4394) and it took at least a few minutes (I stopped it before it finished). So I don't think #4394 is related. But something since druid-0.10.0 hadsome kind of an effect.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308799913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308804029","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308804029","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308804029,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgwNDAyOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:00:54Z","updated_at":"2017-06-15T17:00:54Z","author_association":"CONTRIBUTOR","body":"@leventov I looked into it, and the culprit is #4252, specifically these two changes.\r\n\r\n- https://github.com/druid-io/druid/pull/4252/files#diff-2bed53e52b4912e98a891b1ccff9326eR363\r\n- https://github.com/druid-io/druid/pull/4252/files#diff-fed2dc5ea85516ef128b0a2fdb923c69R192\r\n\r\nFor some reason, the changed version is much slower. Reverting back to Arrays.asList speeds up the tests significantly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308804029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308806950","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308806950","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308806950,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgwNjk1MA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:09:03Z","updated_at":"2017-06-15T17:09:03Z","author_association":"CONTRIBUTOR","body":"@leventov https://github.com/druid-io/druid/pull/4412","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308806950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308809155","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308809155","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308809155,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgwOTE1NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:14:50Z","updated_at":"2017-06-15T17:15:03Z","author_association":"CONTRIBUTOR","body":"See also https://github.com/druid-io/druid/issues/4402#issuecomment-308804029.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308809155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308810191","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308810191","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308810191,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgxMDE5MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:17:33Z","updated_at":"2017-06-15T17:17:33Z","author_association":"CONTRIBUTOR","body":"On my machine JettyQosTest takes 6s. I wonder if the substantially longer time you saw is because it spawns a lot of threads. @jihoonson did those numbers come from travis or one of your own machines?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308810191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308810930","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308810930","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308810930,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgxMDkzMA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:20:25Z","updated_at":"2017-06-15T17:20:25Z","author_association":"MEMBER","body":"This patch cancels shuffle. Arrays.asList(int[]) is a list of a single int[] element, let alone immutable.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308810930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308813862","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308813862","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308813862,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgxMzg2Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:32:01Z","updated_at":"2017-06-15T17:32:01Z","author_association":"CONTRIBUTOR","body":"Ah, I see. I didn't realize your original patch in #4252 was fixing a bug. Nevertheless, the tests now take so long that they are unworkable in travis.\r\n\r\nIs the shuffle important? It wasn't happening before, I guess. I'm not too familiar with these particular tests to know what the best approach here is.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308813862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308815459","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308815459","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308815459,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgxNTQ1OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:38:30Z","updated_at":"2017-06-15T17:38:30Z","author_association":"MEMBER","body":"I don't know either. Effectively not shuffling before was probably not testing something hard enough, and the fact that tests were passing shouldn't mean that not shuffling is ok.\r\n\r\nAlso before https://github.com/druid-io/druid/commit/6edee7f4349b2b657f8406477fe843cf62e1d11d builds were passing as least sometimes, but after this PR I didn't see a single build passing.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308815459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308819059","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308819059","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308819059,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODgxOTA1OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T17:52:14Z","updated_at":"2017-06-15T17:52:14Z","author_association":"CONTRIBUTOR","body":"> I don't know either. Effectively not shuffling before was probably not testing something hard enough, and the fact that tests were passing shouldn't mean that not shuffling is ok.\r\n\r\nYeah, okay, I looked at the code more closely and I guess it was trying to verify consistency both for sequential and random access, but really only sequential was being verified. I bet we can optimize the shuffle to do better than `Collections.shuffle(Ints.asList(indices))` but there will still be some speed hit, since it wasn't doing it at all before as you pointed out.\r\n\r\n> Also before 6edee7f builds were passing as least sometimes, but after this PR I didn't see a single build passing.\r\n\r\nTravis did pass at least once on that patch, namely, on the original run before the PR was merged: https://travis-ci.org/druid-io/druid/builds/242675086\r\n\r\nI wonder if it's a coincidence? It seems like a lot of recent travis builds are failing on timeouts during CompressedVSizeIntsIndexedSupplierTest, and I tried running that on my laptop before and after 6edee7f and didn't see much difference (about 5.5 minutes both ways). I haven't tried running the entire test suite before and after though. I checked some older runs on master and it looks like the runtime is very close to Travis's limit of 10 minutes with no output before failing (in some cases, it's over 10 minutes -- maybe Travis timeouts are enforced loosely):\r\n\r\n- https://travis-ci.org/druid-io/druid/jobs/240053478\r\n- https://travis-ci.org/druid-io/druid/jobs/240189328\r\n\r\nIt seems likely that the runtime of the test was very close to the limit for a while, and maybe Travis is slightly slower now than it used to be, putting it over the limit.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308819059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308843054","html_url":"https://github.com/apache/druid/issues/4384#issuecomment-308843054","issue_url":"https://api.github.com/repos/apache/druid/issues/4384","id":308843054,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg0MzA1NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T19:29:22Z","updated_at":"2017-06-15T19:29:22Z","author_association":"CONTRIBUTOR","body":"@himanshug Do we need to resolve https://github.com/druid-io/druid/pull/4281 before releasing 0.10.1?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308843054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308843442","html_url":"https://github.com/apache/druid/issues/4384#issuecomment-308843442","issue_url":"https://api.github.com/repos/apache/druid/issues/4384","id":308843442,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg0MzQ0Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T19:31:07Z","updated_at":"2017-06-15T19:31:07Z","author_association":"CONTRIBUTOR","body":"Also, @himanshug, is this bit from the draft release notes correct (with regard to QTL)\r\n\r\n> The standard Druid update process described by http://druid.io/docs/0.10.1/operations/rolling-updates.html should be followed for rolling updates.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308843442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308845328","html_url":"https://github.com/apache/druid/pull/4360#issuecomment-308845328","issue_url":"https://api.github.com/repos/apache/druid/issues/4360","id":308845328,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg0NTMyOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T19:39:22Z","updated_at":"2017-06-15T19:39:22Z","author_association":"CONTRIBUTOR","body":"Broke out #4406.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308845328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308852639","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308852639","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308852639,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg1MjYzOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T20:10:56Z","updated_at":"2017-06-15T20:12:07Z","author_association":"CONTRIBUTOR","body":"I changed the approach in this patch to limit the number of random accesses. It's still better than the situation before #4252, since then, there was no random access at all (due to the bug @leventov pointed out). And it's much faster than the situation post #4252, where randomly accessing every single element of a large column made the tests take forever.\r\n\r\nThe reason the test was slow is that random access leads to lots of occasions where an entire block is decompressed in order to read just a single element, which is time prohibitive for the large compressed column tests.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308852639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308853208","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308853208","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308853208,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg1MzIwOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T20:13:20Z","updated_at":"2017-06-15T20:13:20Z","author_association":"CONTRIBUTOR","body":"Actually, I'll close this PR and reopen it, since the approach is totally different.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308853208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308853647","html_url":"https://github.com/apache/druid/pull/4412#issuecomment-308853647","issue_url":"https://api.github.com/repos/apache/druid/issues/4412","id":308853647,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg1MzY0Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T20:15:08Z","updated_at":"2017-06-15T20:15:08Z","author_association":"CONTRIBUTOR","body":"New patch in #4414","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308853647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308853967","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308853967","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308853967,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg1Mzk2Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T20:16:38Z","updated_at":"2017-06-15T21:30:42Z","author_association":"CONTRIBUTOR","body":"#4414 is meant to help with CompressedVSizeIntsIndexedSupplierTest.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308853967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308854533","html_url":"https://github.com/apache/druid/pull/4406#issuecomment-308854533","issue_url":"https://api.github.com/repos/apache/druid/issues/4406","id":308854533,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg1NDUzMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T20:19:00Z","updated_at":"2017-06-15T20:19:00Z","author_association":"CONTRIBUTOR","body":"The failure was a bad \"un-merge\", will fix it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308854533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308857076","html_url":"https://github.com/apache/druid/issues/4403#issuecomment-308857076","issue_url":"https://api.github.com/repos/apache/druid/issues/4403","id":308857076,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg1NzA3Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T20:29:44Z","updated_at":"2017-06-15T20:29:44Z","author_association":"CONTRIBUTOR","body":"Any suggestions on a fix @jon-wei?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308857076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308881266","html_url":"https://github.com/apache/druid/issues/4403#issuecomment-308881266","issue_url":"https://api.github.com/repos/apache/druid/issues/4403","id":308881266,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg4MTI2Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T22:19:15Z","updated_at":"2017-06-15T22:19:15Z","author_association":"MEMBER","body":"Could it be related to #4408?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308881266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308882665","html_url":"https://github.com/apache/druid/issues/4403#issuecomment-308882665","issue_url":"https://api.github.com/repos/apache/druid/issues/4403","id":308882665,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg4MjY2NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T22:26:56Z","updated_at":"2017-06-15T22:26:56Z","author_association":"CONTRIBUTOR","body":"Hmm, yes, it could be. It's possible the statement is created in a different thread than it's closed in.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308882665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308886534","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308886534","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308886534,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg4NjUzNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T22:49:22Z","updated_at":"2017-06-15T22:49:22Z","author_association":"CONTRIBUTOR","body":"Might be fixed by #4415.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308886534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308894030","html_url":"https://github.com/apache/druid/pull/4415#issuecomment-308894030","issue_url":"https://api.github.com/repos/apache/druid/issues/4415","id":308894030,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5NDAzMA==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T23:39:35Z","updated_at":"2017-06-15T23:39:35Z","author_association":"CONTRIBUTOR","body":"Addressed comments","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308894030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308894966","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308894966","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308894966,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5NDk2Ng==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T23:46:17Z","updated_at":"2017-06-15T23:46:17Z","author_association":"CONTRIBUTOR","body":"I think this is a separate issue from #4403, when I run `DruidAvaticaHandlerTest.testConcurrentQueries`,  I see all of the individual query results being returned in a single JDBC frame (all the DruidStatement.nextFrame() calls have fetchOffset=0).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308894966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308895043","html_url":"https://github.com/apache/druid/issues/4403#issuecomment-308895043","issue_url":"https://api.github.com/repos/apache/druid/issues/4403","id":308895043,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5NTA0Mw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T23:46:47Z","updated_at":"2017-06-15T23:46:47Z","author_association":"CONTRIBUTOR","body":"I think this is a separate issue from #4408 , when I run DruidAvaticaHandlerTest.testConcurrentQueries, I see all of the individual query results being returned in a single JDBC frame (all the DruidStatement.nextFrame() calls have fetchOffset=0).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308895043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308895397","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308895397","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308895397,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5NTM5Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-15T23:49:38Z","updated_at":"2017-06-15T23:49:38Z","author_association":"CONTRIBUTOR","body":"Do you also see the yielder being created in the same thread? I think that depends on whether `execute` or `prepareAndExecute` is being used. If it's `execute`, then even if all results are returned in one frame, the yielder could still have been created in a different thread (on an earlier call to `prepare`).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308895397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308896757","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308896757","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308896757,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5Njc1Nw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:00:06Z","updated_at":"2017-06-16T00:00:06Z","author_association":"CONTRIBUTOR","body":"For that unit test, the yielders are being created and closed in the same thread (the test also uses `prepareAndExecute` only).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308896757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308896806","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308896806","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308896806,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5NjgwNg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:00:24Z","updated_at":"2017-06-16T00:00:24Z","author_association":"CONTRIBUTOR","body":"Okay, yeah, probably not related then.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308896806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308899133","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308899133","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308899133,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5OTEzMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:18:07Z","updated_at":"2017-06-16T00:18:07Z","author_association":"CONTRIBUTOR","body":"I looked at a few successful travis jobs, and found that even in those successful jobs, the test often takes 15-20 seconds. So it's believable that when travis is being extra-slow, it could take 30 seconds and timeout. So this might just be a timeout issue.\r\n\r\nI raised #4416 to increase the timeout.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308899133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308899299","html_url":"https://github.com/apache/druid/issues/4408#issuecomment-308899299","issue_url":"https://api.github.com/repos/apache/druid/issues/4408","id":308899299,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODg5OTI5OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:19:23Z","updated_at":"2017-06-16T00:19:23Z","author_association":"CONTRIBUTOR","body":"The test only takes 8s on my machine, but I guess travis uses slower machines. It seems to take extra-long for the concurrency tests, not just in this file but also in others.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308899299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308900335","html_url":"https://github.com/apache/druid/pull/4416#issuecomment-308900335","issue_url":"https://api.github.com/repos/apache/druid/issues/4416","id":308900335,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkwMDMzNQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:28:01Z","updated_at":"2017-06-16T00:28:01Z","author_association":"CONTRIBUTOR","body":"Extended the timeout for jettyQosTest too.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308900335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308903017","html_url":"https://github.com/apache/druid/issues/4387#issuecomment-308903017","issue_url":"https://api.github.com/repos/apache/druid/issues/4387","id":308903017,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkwMzAxNw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:48:47Z","updated_at":"2017-06-16T00:48:47Z","author_association":"MEMBER","body":"@jihoonson doesn't seem to be fixed, https://travis-ci.org/druid-io/druid/jobs/243476564 just failed with\r\n\r\n```\r\nio.druid.segment.realtime.appenderator.AppenderatorDriverTest\r\ntestPublishPerRow(io.druid.segment.realtime.appenderator.AppenderatorDriverTest)  Time elapsed: 5.526 sec  <<< ERROR!\r\njava.util.concurrent.TimeoutException\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:205)\r\n\tat io.druid.segment.realtime.appenderator.AppenderatorDriverTest.testPublishPerRow(AppenderatorDriverTest.java:250)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:309)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:367)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:274)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:161)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:290)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:242)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:121)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308903017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308903709","html_url":"https://github.com/apache/druid/issues/4387#issuecomment-308903709","issue_url":"https://api.github.com/repos/apache/druid/issues/4387","id":308903709,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkwMzcwOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T00:54:10Z","updated_at":"2017-06-16T00:54:46Z","author_association":"CONTRIBUTOR","body":"Travis seems to be slow beyond belief recently. Even tests that succeed seem to be taking longer than normal. I wonder if this is related.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308903709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308906153","html_url":"https://github.com/apache/druid/pull/4415#issuecomment-308906153","issue_url":"https://api.github.com/repos/apache/druid/issues/4415","id":308906153,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkwNjE1Mw==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T01:13:05Z","updated_at":"2017-06-16T01:13:05Z","author_association":"CONTRIBUTOR","body":"Updated patch, I've kept the Throwables.propagate usages in DruidStatement as-is for now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308906153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308906686","html_url":"https://github.com/apache/druid/issues/4402#issuecomment-308906686","issue_url":"https://api.github.com/repos/apache/druid/issues/4402","id":308906686,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkwNjY4Ng==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T01:17:16Z","updated_at":"2017-06-16T03:24:28Z","author_association":"CONTRIBUTOR","body":"@gianm these numbers come from travis, especially originally linked in the description (here, https://travis-ci.org/druid-io/druid/jobs/242596693).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308906686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308907992","html_url":"https://github.com/apache/druid/issues/4387#issuecomment-308907992","issue_url":"https://api.github.com/repos/apache/druid/issues/4387","id":308907992,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkwNzk5Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T01:27:17Z","updated_at":"2017-06-16T01:27:17Z","author_association":"CONTRIBUTOR","body":"@leventov hmm I'm looking into it.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308907992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308917043","html_url":"https://github.com/apache/druid/issues/4387#issuecomment-308917043","issue_url":"https://api.github.com/repos/apache/druid/issues/4387","id":308917043,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkxNzA0Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T02:37:05Z","updated_at":"2017-06-16T02:37:05Z","author_association":"CONTRIBUTOR","body":"@gianm I can see the below error which looks to relate to #4365 when running AppenderatorDriverTest.\r\n```\r\n2017-06-16T02:28:09,453 WARN [foo-incremental-persist] io.druid.segment.IndexIO - Failed to load metadata for segment [/tmp/1497580089435-0/foo_2000-01-01T00:00:00.000Z_2000-01-01T01:00:00.000Z_abc123/0]\r\ncom.fasterxml.jackson.databind.JsonMappingException: No 'injectableValues' configured, can not inject value with id [io.druid.math.expr.ExprMacroTable] (through reference chain: io.druid.segment.Metadata[\"aggregators\"]->Object[][0])\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:210) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:189) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:160) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:17) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:538) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:99) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:238) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:118) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3066) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2230) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat io.druid.segment.IndexIO$V9IndexLoader.load(IndexIO.java:1006) [classes/:?]\r\n\tat io.druid.segment.IndexIO.loadIndex(IndexIO.java:220) [classes/:?]\r\n\tat io.druid.segment.realtime.appenderator.AppenderatorImpl.persistHydrant(AppenderatorImpl.java:1020) [classes/:?]\r\n\tat io.druid.segment.realtime.appenderator.AppenderatorImpl.access$200(AppenderatorImpl.java:96) [classes/:?]\r\n\tat io.druid.segment.realtime.appenderator.AppenderatorImpl$2.doCall(AppenderatorImpl.java:387) [classes/:?]\r\n\tat io.druid.common.guava.ThreadRenamingCallable.call(ThreadRenamingCallable.java:44) [classes/:?]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_131]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_131]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_131]\r\n\tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\r\nCaused by: java.lang.IllegalStateException: No 'injectableValues' configured, can not inject value with id [io.druid.math.expr.ExprMacroTable]\r\n\tat com.fasterxml.jackson.databind.DeserializationContext.findInjectableValue(DeserializationContext.java:291) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyValueBuffer.inject(PropertyValueBuffer.java:66) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.startBuilding(PropertyBasedCreator.java:160) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:331) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1064) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:264) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:156) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:126) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:113) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:84) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserializeWithType(AbstractDeserializer.java:132) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:151) ~[jackson-databind-2.4.6.jar:2.4.6]\r\n\t... 17 more\r\n```\r\nDo you think this might be a reason for slowing down tests?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308917043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308917588","html_url":"https://github.com/apache/druid/issues/4387#issuecomment-308917588","issue_url":"https://api.github.com/repos/apache/druid/issues/4387","id":308917588,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkxNzU4OA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T02:41:31Z","updated_at":"2017-06-16T02:41:31Z","author_association":"CONTRIBUTOR","body":"Hmm, I wouldn't think so, but could still check the before and after times to be sure.\n\nGian\n\n> On Jun 15, 2017, at 19:37, Jihoon Son <notifications@github.com> wrote:\n> \n> @gianm I can see the below error which looks to relate to #4365 when running AppenderatorDriverTest.\n> \n> 2017-06-16T02:28:09,453 WARN [foo-incremental-persist] io.druid.segment.IndexIO - Failed to load metadata for segment [/tmp/1497580089435-0/foo_2000-01-01T00:00:00.000Z_2000-01-01T01:00:00.000Z_abc123/0]\n> com.fasterxml.jackson.databind.JsonMappingException: No 'injectableValues' configured, can not inject value with id [io.druid.math.expr.ExprMacroTable] (through reference chain: io.druid.segment.Metadata[\"aggregators\"]->Object[][0])\n> \tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:210) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:189) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:160) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:17) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.SettableBeanProperty.deserialize(SettableBeanProperty.java:538) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:99) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:238) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:118) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3066) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2230) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat io.druid.segment.IndexIO$V9IndexLoader.load(IndexIO.java:1006) [classes/:?]\n> \tat io.druid.segment.IndexIO.loadIndex(IndexIO.java:220) [classes/:?]\n> \tat io.druid.segment.realtime.appenderator.AppenderatorImpl.persistHydrant(AppenderatorImpl.java:1020) [classes/:?]\n> \tat io.druid.segment.realtime.appenderator.AppenderatorImpl.access$200(AppenderatorImpl.java:96) [classes/:?]\n> \tat io.druid.segment.realtime.appenderator.AppenderatorImpl$2.doCall(AppenderatorImpl.java:387) [classes/:?]\n> \tat io.druid.common.guava.ThreadRenamingCallable.call(ThreadRenamingCallable.java:44) [classes/:?]\n> \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_131]\n> \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_131]\n> \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_131]\n> \tat java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]\n> Caused by: java.lang.IllegalStateException: No 'injectableValues' configured, can not inject value with id [io.druid.math.expr.ExprMacroTable]\n> \tat com.fasterxml.jackson.databind.DeserializationContext.findInjectableValue(DeserializationContext.java:291) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.impl.PropertyValueBuffer.inject(PropertyValueBuffer.java:66) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.impl.PropertyBasedCreator.startBuilding(PropertyBasedCreator.java:160) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeUsingPropertyBased(BeanDeserializer.java:331) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1064) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:264) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:156) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:126) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:113) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:84) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.AbstractDeserializer.deserializeWithType(AbstractDeserializer.java:132) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \tat com.fasterxml.jackson.databind.deser.std.ObjectArrayDeserializer.deserialize(ObjectArrayDeserializer.java:151) ~[jackson-databind-2.4.6.jar:2.4.6]\n> \t... 17 more\n> Do you think this might be a reason for slowing down tests?\n> \n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308917588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308929378","html_url":"https://github.com/apache/druid/pull/4411#issuecomment-308929378","issue_url":"https://api.github.com/repos/apache/druid/issues/4411","id":308929378,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkyOTM3OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T04:22:11Z","updated_at":"2017-06-16T04:22:11Z","author_association":"MEMBER","body":"@warmbreeze please clean up you branch (cherry-pick your change https://github.com/druid-io/druid/pull/4411/commits/4b80862bb17a68fc3ceb74dd05ffee36acc49762 on top of druid-io/druid/master) and force push it in this branch. In the future, use those steps on conflicts: https://github.com/druid-io/druid/blob/8efa89af416c0efd86808e66f1b67f6462ecc7de/CONTRIBUTING.md#if-your-pull-request-shows-conflicts-with-master","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308929378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308931180","html_url":"https://github.com/apache/druid/pull/4410#issuecomment-308931180","issue_url":"https://api.github.com/repos/apache/druid/issues/4410","id":308931180,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkzMTE4MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T04:37:55Z","updated_at":"2017-06-16T04:37:55Z","author_association":"MEMBER","body":"@gianm could you review this? It would be nice if it goes to 0.10.1. I don't know how people are able to run brokers and routers with Druid 0.10.0 and without this patch.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308931180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308938139","html_url":"https://github.com/apache/druid/pull/4410#issuecomment-308938139","issue_url":"https://api.github.com/repos/apache/druid/issues/4410","id":308938139,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODkzODEzOQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T05:40:28Z","updated_at":"2017-06-16T05:40:28Z","author_association":"CONTRIBUTOR","body":"LGTM!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308938139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308945591","html_url":"https://github.com/apache/druid/pull/4411#issuecomment-308945591","issue_url":"https://api.github.com/repos/apache/druid/issues/4411","id":308945591,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODk0NTU5MQ==","user":{"login":"warmbreeze","id":4353307,"node_id":"MDQ6VXNlcjQzNTMzMDc=","avatar_url":"https://avatars.githubusercontent.com/u/4353307?v=4","gravatar_id":"","url":"https://api.github.com/users/warmbreeze","html_url":"https://github.com/warmbreeze","followers_url":"https://api.github.com/users/warmbreeze/followers","following_url":"https://api.github.com/users/warmbreeze/following{/other_user}","gists_url":"https://api.github.com/users/warmbreeze/gists{/gist_id}","starred_url":"https://api.github.com/users/warmbreeze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/warmbreeze/subscriptions","organizations_url":"https://api.github.com/users/warmbreeze/orgs","repos_url":"https://api.github.com/users/warmbreeze/repos","events_url":"https://api.github.com/users/warmbreeze/events{/privacy}","received_events_url":"https://api.github.com/users/warmbreeze/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T06:35:03Z","updated_at":"2017-06-16T06:35:03Z","author_association":"NONE","body":"@leventov ok","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308945591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/308956993","html_url":"https://github.com/apache/druid/pull/4411#issuecomment-308956993","issue_url":"https://api.github.com/repos/apache/druid/issues/4411","id":308956993,"node_id":"MDEyOklzc3VlQ29tbWVudDMwODk1Njk5Mw==","user":{"login":"warmbreeze","id":4353307,"node_id":"MDQ6VXNlcjQzNTMzMDc=","avatar_url":"https://avatars.githubusercontent.com/u/4353307?v=4","gravatar_id":"","url":"https://api.github.com/users/warmbreeze","html_url":"https://github.com/warmbreeze","followers_url":"https://api.github.com/users/warmbreeze/followers","following_url":"https://api.github.com/users/warmbreeze/following{/other_user}","gists_url":"https://api.github.com/users/warmbreeze/gists{/gist_id}","starred_url":"https://api.github.com/users/warmbreeze/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/warmbreeze/subscriptions","organizations_url":"https://api.github.com/users/warmbreeze/orgs","repos_url":"https://api.github.com/users/warmbreeze/repos","events_url":"https://api.github.com/users/warmbreeze/events{/privacy}","received_events_url":"https://api.github.com/users/warmbreeze/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T07:41:37Z","updated_at":"2017-06-16T07:41:37Z","author_association":"NONE","body":"because of the rebase is not suitable, I will have a new push request","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/308956993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309080024","html_url":"https://github.com/apache/druid/pull/4418#issuecomment-309080024","issue_url":"https://api.github.com/repos/apache/druid/issues/4418","id":309080024,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTA4MDAyNA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T17:01:54Z","updated_at":"2017-06-16T17:01:54Z","author_association":"CONTRIBUTOR","body":" ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309080024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309105796","html_url":"https://github.com/apache/druid/pull/4417#issuecomment-309105796","issue_url":"https://api.github.com/repos/apache/druid/issues/4417","id":309105796,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTEwNTc5Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T18:49:23Z","updated_at":"2017-06-16T18:49:23Z","author_association":"CONTRIBUTOR","body":" ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309105796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309142791","html_url":"https://github.com/apache/druid/issues/4385#issuecomment-309142791","issue_url":"https://api.github.com/repos/apache/druid/issues/4385","id":309142791,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE0Mjc5MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T21:52:22Z","updated_at":"2017-06-16T21:52:22Z","author_association":"MEMBER","body":"@jihoonson default max direct memory is not 64K, it's the amount of memory available on the system, via Runtime.getRuntime().maxMemory().\r\n\r\n@rahulsingh303 why do you need so large `druid.processing.buffer.sizeBytes`? Try to reduce it to 256 MB","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309142791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309144549","html_url":"https://github.com/apache/druid/pull/4406#issuecomment-309144549","issue_url":"https://api.github.com/repos/apache/druid/issues/4406","id":309144549,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE0NDU0OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T22:01:27Z","updated_at":"2017-06-16T22:01:27Z","author_association":"CONTRIBUTOR","body":"@leventov, thanks for review, pushed some changes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309144549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309154206","html_url":"https://github.com/apache/druid/pull/4376#issuecomment-309154206","issue_url":"https://api.github.com/repos/apache/druid/issues/4376","id":309154206,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE1NDIwNg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-16T22:42:20Z","updated_at":"2017-06-16T22:42:20Z","author_association":"CONTRIBUTOR","body":"@gianm fyi: `org.apache.curator.framework.recipes.cache.PathChildrenCache#PathChildrenCache(org.apache.curator.framework.CuratorFramework, java.lang.String, boolean, boolean, java.util.concurrent.ExecutorService)` states ```\r\nExecutorService to use for the PathChildrenCache's background thread. This service should be single threaded, otherwise the cache may see inconsistent results.```\r\n\r\nSo the recommended value for `numLoadingThreads` should be 1.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309154206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309188093","html_url":"https://github.com/apache/druid/pull/4410#issuecomment-309188093","issue_url":"https://api.github.com/repos/apache/druid/issues/4410","id":309188093,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE4ODA5Mw==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T02:42:28Z","updated_at":"2017-06-17T02:42:28Z","author_association":"CONTRIBUTOR","body":"+1 for 0.10.1 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309188093/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309189075","html_url":"https://github.com/apache/druid/pull/4405#issuecomment-309189075","issue_url":"https://api.github.com/repos/apache/druid/issues/4405","id":309189075,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE4OTA3NQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T03:04:13Z","updated_at":"2017-06-17T03:04:13Z","author_association":"CONTRIBUTOR","body":"Generally looks good to me.\r\n> One potentially interesting thing about the expression filter is that it treats multi-valued columns as if they were just null. \r\n\r\nWhat do you think about treating multi-valued columns as arrays when evaluating expressions in the future? If so, we can handle expressions evaluating multi-valued columns in the same way as we handle columns of different types. For example, an \"value filter\" expression like ```multi_valued_column = 1``` would be false due to the different types of two operands of ```=```.\r\n\r\nAlso, this can be extended to be more useful by supporting more functions like ```array_contains()``` or ```explode()``` which is a UDTF in Hive. In the above example, we can expect ```array_contains(multi_valued_column, 1)``` will have the same effect with our current \"value filter\".","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309189075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309189291","html_url":"https://github.com/apache/druid/pull/4410#issuecomment-309189291","issue_url":"https://api.github.com/repos/apache/druid/issues/4410","id":309189291,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE4OTI5MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T03:08:46Z","updated_at":"2017-06-17T03:08:46Z","author_association":"MEMBER","body":"Also it seems wasteful to have separate merge buffer pool and intermediate results buffer pool. Resources should be shared.  As far as I can understand the justification is [here](https://github.com/druid-io/druid/issues/2987):\r\n\r\n> DruidProcessingModule provides a new `@Merged` BlockingPool<ByteBuffer> that can be used for merging. It has a fixed maximum size and it's blocking, so jetty threads can request one when they want to do a query that will require a merge buffer, and then wait in line if one is not available (without submitting tasks to the processing thread pool). Queries that don't need merging buffers don't have to wait.\r\n\r\nBut it is still not clear to me why a separate pool was needed. If it is a matter of blocking vs non-blocking, `StupidPool` could have a blocking mode method to request a buffer only if available and wait for availability if it is not. @gianm could you comment?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309189291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309191629","html_url":"https://github.com/apache/druid/issues/4422#issuecomment-309191629","issue_url":"https://api.github.com/repos/apache/druid/issues/4422","id":309191629,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE5MTYyOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T04:03:24Z","updated_at":"2017-06-17T04:03:24Z","author_association":"MEMBER","body":"The new approach could be combined with experiments on off-heap space pre-allocation for dimension values. Currently off-heap space is allocated on-demand, right during query processing, that plagues the processing loop with branches. Even more branches are required with the new approach.\r\n\r\nAlso, off-heap space could be pre-allocated based on popularity of dimension values, from most popular to least popular, that would improve memory and page cache usage.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309191629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309191980","html_url":"https://github.com/apache/druid/issues/4422#issuecomment-309191980","issue_url":"https://api.github.com/repos/apache/druid/issues/4422","id":309191980,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE5MTk4MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T04:11:45Z","updated_at":"2017-06-17T04:11:45Z","author_association":"MEMBER","body":"Also, this approach may not work well if `numBytesPerRecord` is comparable with the chunk size, e. g. for sketches. In this case, as large as possible area of continuous memory could be allocated in the new-style pool, and then the processing uses the old approach with multiple runs over the data.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309191980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309193794","html_url":"https://github.com/apache/druid/pull/4405#issuecomment-309193794","issue_url":"https://api.github.com/repos/apache/druid/issues/4405","id":309193794,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTE5Mzc5NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T05:02:06Z","updated_at":"2017-06-17T05:02:06Z","author_association":"CONTRIBUTOR","body":"> One possible solution is to treat multi-value columns as arrays when running them through the expression filter, but, the expression runtime doesn't have an array type or any functions for dealing with arrays.\r\n\r\nAh this is the same idea with my comment. +1 for this idea. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309193794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309210798","html_url":"https://github.com/apache/druid/issues/4385#issuecomment-309210798","issue_url":"https://api.github.com/repos/apache/druid/issues/4385","id":309210798,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIxMDc5OA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T11:57:28Z","updated_at":"2017-06-17T11:58:20Z","author_association":"CONTRIBUTOR","body":"@rahulsingh303 did you solve the issue ? if am getting this  right it is the peon jvm that is failing.\r\n Can you try to set the value of max direct memory via this property \r\n`druid.indexer.runner.javaOpts=-server -Xmx3g -XX:MaxDirectMemorySize=10G` or/and decrease the value of `druid.indexer.fork.property.druid.processing.buffer.sizeBytes=536870912`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309210798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309217448","html_url":"https://github.com/apache/druid/issues/4180#issuecomment-309217448","issue_url":"https://api.github.com/repos/apache/druid/issues/4180","id":309217448,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIxNzQ0OA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T14:12:36Z","updated_at":"2017-06-17T14:12:36Z","author_association":"CONTRIBUTOR","body":"Fixed in #4116 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309217448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309218418","html_url":"https://github.com/apache/druid/pull/4424#issuecomment-309218418","issue_url":"https://api.github.com/repos/apache/druid/issues/4424","id":309218418,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIxODQxOA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T14:30:15Z","updated_at":"2017-06-17T14:30:15Z","author_association":"CONTRIBUTOR","body":"@jon-wei can you please review this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309218418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309235738","html_url":"https://github.com/apache/druid/pull/4410#issuecomment-309235738","issue_url":"https://api.github.com/repos/apache/druid/issues/4410","id":309235738,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzNTczOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T19:39:51Z","updated_at":"2017-06-17T19:53:29Z","author_association":"CONTRIBUTOR","body":"> But it is still not clear to me why a separate pool was needed. If it is a matter of blocking vs non-blocking, StupidPool could have a blocking mode method to request a buffer only if available and wait for availability if it is not. @gianm could you comment?\r\n\r\nThe idea is that processing buffers are \"owned\" by a processing thread (that's why there's one allocated per thread) and merge buffers are \"owned\" by a query.\r\n\r\nIf they used a shared pool, we would have to be careful to avoid situations where one processing thread can't get a buffer and it can't do any work, hobbling the processing thread pool. An extreme case of this would be if all buffers in the pool were allocated as query merge buffers, and there were none left for processing threads. Then none of the queries could proceed at all, and the system would be un-responsive, since all processing threads would be blocked trying to allocate processing buffers.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309235738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309236028","html_url":"https://github.com/apache/druid/pull/4405#issuecomment-309236028","issue_url":"https://api.github.com/repos/apache/druid/issues/4405","id":309236028,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzNjAyOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T19:45:18Z","updated_at":"2017-06-17T19:46:03Z","author_association":"CONTRIBUTOR","body":"> Ah this is the same idea with my comment. +1 for this idea.\r\n\r\nYeah, I think it makes sense to add array types to expressions in a future patch. I don't see another way of making them useful on multi-value columns. When we do that, some care is needed to make the behavior consistent with how multi-value columns are treated in the rest of Druid.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309236028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309236485","html_url":"https://github.com/apache/druid/issues/4422#issuecomment-309236485","issue_url":"https://api.github.com/repos/apache/druid/issues/4422","id":309236485,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzNjQ4NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T19:53:46Z","updated_at":"2017-06-17T19:53:46Z","author_association":"CONTRIBUTOR","body":"> What problems it solves:\r\n> \r\n> - Only a single config needed, that is much easier to get right: the total amount of memory, that user dedicates for off-heap processing on the Druid instance.\r\n> - On heterogeneous query loads, resources are used more effectively.\r\n\r\nI agree these are problems worth solving. The current memory allocation system does have too many configs and it's difficult to size them optimally (and, like you pointed out, can be impossible to achieve really optimal behavior for heterogenous workloads).\r\n\r\nDespite the weaknesses of the current system, it does have one good feature: once a query starts it doesn't ever need to block waiting to allocate more memory. The memory is all reserved up front, and then the query proceeds until complete. If queries allocated memory more dynamically, we need some way of dealing with a situation where two queries both want to allocate the \"last chunk\" of available memory.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309236485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309237622","html_url":"https://github.com/apache/druid/issues/4421#issuecomment-309237622","issue_url":"https://api.github.com/repos/apache/druid/issues/4421","id":309237622,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzNzYyMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T20:15:55Z","updated_at":"2017-06-17T20:15:55Z","author_association":"CONTRIBUTOR","body":"Removing the config sounds good to me, non-default values seem to be in clear violation of the PathChildrenCache contract.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309237622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309237732","html_url":"https://github.com/apache/druid/pull/4376#issuecomment-309237732","issue_url":"https://api.github.com/repos/apache/druid/issues/4376","id":309237732,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzNzczMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T20:17:49Z","updated_at":"2017-06-17T20:18:16Z","author_association":"CONTRIBUTOR","body":"In that case, it sounds like the config should be removed, as #4421 suggests. There's no point exposing a config that breaks contracts of our dependencies.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309237732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309237959","html_url":"https://github.com/apache/druid/pull/4396#issuecomment-309237959","issue_url":"https://api.github.com/repos/apache/druid/issues/4396","id":309237959,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzNzk1OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T20:21:34Z","updated_at":"2017-06-17T20:21:34Z","author_association":"CONTRIBUTOR","body":" ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309237959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/309238124","html_url":"https://github.com/apache/druid/pull/4405#issuecomment-309238124","issue_url":"https://api.github.com/repos/apache/druid/issues/4405","id":309238124,"node_id":"MDEyOklzc3VlQ29tbWVudDMwOTIzODEyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-06-17T20:24:50Z","updated_at":"2017-06-17T20:24:50Z","author_association":"CONTRIBUTOR","body":"@jon-wei @leventov I've pushed changes addressing your comments & fixing the tests","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/309238124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]