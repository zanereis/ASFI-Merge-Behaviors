[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363475551","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363475551","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363475551,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQ3NTU1MQ==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T16:17:58Z","updated_at":"2018-02-06T16:17:58Z","author_association":"NONE","body":"I think it doesn't matter much from a client side implementation perspective. I do think however that `_all_docs_query` etc may be preferable in that they avoid giving the impression that `_query` is an element of an `_all_docs` collection as it would be represented in a more typical REST style URI.\r\n\r\nAs an aside I do think a name like `_all_docs_query` is a confusing from the user perspective of potentially thinking it is related to the mango queries, but I can't really think of anything better, especially given the `queries` object that is sent in the `POST` body.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363475551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363476535","html_url":"https://github.com/apache/couchdb/pull/1141#issuecomment-363476535","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1141","id":363476535,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQ3NjUzNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T16:20:20Z","updated_at":"2018-02-06T16:20:20Z","author_association":"MEMBER","body":"Why did you close this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363476535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363477514","html_url":"https://github.com/apache/couchdb/pull/1143#issuecomment-363477514","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1143","id":363477514,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQ3NzUxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T16:22:56Z","updated_at":"2018-02-06T16:22:56Z","author_association":"MEMBER","body":"Can you describe what the new endpoints are?\r\n\r\nOther than the new endpoint moving, are you making backwards-incompatible changes to endpoints other than the new one introduced?\r\n\r\nIf so we need to be careful about this landing in 2.x.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363477514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363490585","html_url":"https://github.com/apache/couchdb/pull/958#issuecomment-363490585","issue_url":"https://api.github.com/repos/apache/couchdb/issues/958","id":363490585,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQ5MDU4NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T16:59:38Z","updated_at":"2018-02-06T16:59:38Z","author_association":"CONTRIBUTOR","body":"I looked into adding property tests for key tree module: https://github.com/apache/couchdb/pull/1144","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363490585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363490832","html_url":"https://github.com/apache/couchdb/pull/1141#issuecomment-363490832","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1141","id":363490832,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzQ5MDgzMg==","user":{"login":"abc3","id":1172600,"node_id":"MDQ6VXNlcjExNzI2MDA=","avatar_url":"https://avatars.githubusercontent.com/u/1172600?v=4","gravatar_id":"","url":"https://api.github.com/users/abc3","html_url":"https://github.com/abc3","followers_url":"https://api.github.com/users/abc3/followers","following_url":"https://api.github.com/users/abc3/following{/other_user}","gists_url":"https://api.github.com/users/abc3/gists{/gist_id}","starred_url":"https://api.github.com/users/abc3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abc3/subscriptions","organizations_url":"https://api.github.com/users/abc3/orgs","repos_url":"https://api.github.com/users/abc3/repos","events_url":"https://api.github.com/users/abc3/events{/privacy}","received_events_url":"https://api.github.com/users/abc3/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T17:00:20Z","updated_at":"2018-02-06T17:00:20Z","author_association":"NONE","body":"Pulled to old 2.1.x branch, I will make new pr to master with description for testing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363490832/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363501024","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363501024","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363501024,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUwMTAyNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T17:32:22Z","updated_at":"2018-02-06T17:32:22Z","author_association":"MEMBER","body":"@ricellis I agree that `_all_docs_query` is confusing. `_all_docs/_query` is closer to how design documents work right now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363501024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363511307","html_url":"https://github.com/apache/couchdb/issues/1145#issuecomment-363511307","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1145","id":363511307,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUxMTMwNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:04:12Z","updated_at":"2018-02-06T18:04:18Z","author_association":"MEMBER","body":"Documentation was wrong in 2.0.0, follow the 2.1.1 instructions:\r\n\r\nhttp://docs.couchdb.org/en/2.1.1/config/http.html#ssl\r\n\r\nThe error is indeed obscure, native SSL support is terrible in Erlang. There's nothing we can do here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363511307/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363511841","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-363511841","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":363511841,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzUxMTg0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T18:06:06Z","updated_at":"2018-02-06T18:06:06Z","author_association":"MEMBER","body":"HI @ReeceStevens , from my knowledge of your deployment, you are running on eCryptFS, right?\r\n\r\nCan you try the same test again on the same hardware, but using a faster filesystem like `ext4` or `xfs`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363511841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363568339","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363568339","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363568339,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU2ODMzOQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T21:20:45Z","updated_at":"2018-02-06T21:20:45Z","author_association":"CONTRIBUTOR","body":"@wohali: This issue originally was about `_all_docs` only. I have an implementation of new endpoints `_all_docs_view_query` / `_desing_docs_view_query` / `_local_docs_view_query` already.\r\nHowever I am contemplating with the idea to remove `_desing_docs_view_query` and `_local_docs_view_query`. On the grounds that:\r\n1. The issue was originally about `_all_docs` only. Which indicates that there is probably no immediate need for `_design_docs` and `_local_docs`\r\n2. Adding 3 new endpoints is more verbose. Although the difference is 8 lines or so.\r\n3. There are probably very few `_design` docs and user can use `_design_docs` endpoint directly to get them all and filter on client side. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363568339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363581886","html_url":"https://github.com/apache/couchdb/pull/1143#issuecomment-363581886","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1143","id":363581886,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU4MTg4Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T22:10:05Z","updated_at":"2018-02-06T22:10:05Z","author_association":"MEMBER","body":"As @rnewson just said on IRC, and as I asked above, this should not have landed without discussion.\r\n\r\nYou can't just remove pre-existing features (not the new one that was merged post 2.1.1) without a discussion. We have customers depending on this.\r\n\r\nPlease revert ASAP!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363581886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363584256","html_url":"https://github.com/apache/couchdb/pull/1148#issuecomment-363584256","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1148","id":363584256,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU4NDI1Ng==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T22:19:02Z","updated_at":"2018-02-06T22:19:02Z","author_association":"MEMBER","body":"https://couchdb.apache.org/bylaws.html section 3.5 for those following along.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363584256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363586202","html_url":"https://github.com/apache/couchdb/pull/1148#issuecomment-363586202","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1148","id":363586202,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU4NjIwMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T22:26:00Z","updated_at":"2018-02-06T22:26:00Z","author_association":"MEMBER","body":"@iilyak My comment was for changing ONLY the newly introduced endpoint, not changing the other endpoints.\r\n\r\nWe need a more detailed discussion here. Perhaps we should take this to the dev@ mailing list? PR/Issues aren't the best place to discuss this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363586202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363586220","html_url":"https://github.com/apache/couchdb/pull/1148#issuecomment-363586220","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1148","id":363586220,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU4NjIyMA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T22:26:04Z","updated_at":"2018-02-06T22:26:44Z","author_association":"CONTRIBUTOR","body":"I did it based on the conversation here https://github.com/apache/couchdb/issues/820#issuecomment-363307312. I apologize again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363586220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363593547","html_url":"https://github.com/apache/couchdb/pull/1148#issuecomment-363593547","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1148","id":363593547,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU5MzU0Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T22:55:09Z","updated_at":"2018-02-06T22:55:09Z","author_association":"MEMBER","body":"this was confusing but couchdb-dev chat concluded that we'll leave the removal in place. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363593547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363596935","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363596935","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363596935,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU5NjkzNQ==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T23:08:22Z","updated_at":"2018-02-06T23:08:35Z","author_association":"CONTRIBUTOR","body":"Bubbling up some thoughts from an irc discussion about this with @wohali, @rnewson, and myself. It's worth noting that we already support the multi-queries approach in the `_view` API, so the functionality reverted in #1143 was actually consistent with existing API precedent. If folks feel strongly enough about separating out the multi query logic into dedicated API endpoints, I think it makes sense to do the same for views as well for consistency.\r\n\r\n@rnewson pointed out an alternative option would be to use the `Content-Type` response header to declare the response body format. This would provide a deterministic way for static languages to understand the response body by what's declared in the headers. It could be ` x-vnd.couchdb.view vs x-vnd.couchdb.multi-query` or whatever.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363596935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363599636","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363599636","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363599636,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzU5OTYzNg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-06T23:19:54Z","updated_at":"2018-02-06T23:19:54Z","author_association":"MEMBER","body":"The (purported) problem with the _all_docs response is that the format of the response body requires knowledge of the request (whether the body had a {\"queries\": [...]} format or not). \r\n\r\nThe mooted solution is to have different endpoints, but that has exactly the same problem. You have to know the associated request url.\r\n\r\nWhy is one better than the other?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363599636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363618280","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363618280","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363618280,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzYxODI4MA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T00:54:24Z","updated_at":"2018-02-07T00:54:24Z","author_association":"CONTRIBUTOR","body":"> Why is one better than the other?\r\n1. With one to one mapping between request and response the client library for static language wouldn't need a factory pattern. For example `com.google.gson.JsonParser` for Java requires passing a POJO class to the `gson.fromJson` method. The call look like `gson.fromJson(entry.getValue(), MyPOJO.class);`. It is more complex when response mutate.\r\n2. The API becoming expressible using OpenAPI Specification if the response structure is independent from:\r\n  - posted content \r\n  - query parameters\r\n\r\nThere are quite a few interesting possibilities if we can express our API with OpenAPI Specification:\r\n - we can generate tests to check our input validation automatically\r\n - there are testing tools to ensure that there are no API changes (they work as MITM proxy). We can use this to make sure that:\r\n   1) All APIs are documented in docs\r\n   2) The API specification is in sync with implementation\r\n   3) We are aware of incompatibilities between different versions of spec\r\n - we can generate some parts of libraries for different languages automatically\r\n - we can generate code to validate input data passed to endpoints\r\n - we can embed required access roles into spec in order to generate rules for `chttpd_auth_request`. Which simplifies security audit of the code. \r\n - we can generate boilerplate code for endpoints if decide to switch to another http server.\r\n\r\nHowever this is off topic and should be discussed in ML.\r\n\r\nI am aware that there are few precedents in CouchDB which return different responses based on either posted data or query parameters. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363618280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363752134","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-363752134","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":363752134,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzc1MjEzNA==","user":{"login":"igorski89","id":56879,"node_id":"MDQ6VXNlcjU2ODc5","avatar_url":"https://avatars.githubusercontent.com/u/56879?v=4","gravatar_id":"","url":"https://api.github.com/users/igorski89","html_url":"https://github.com/igorski89","followers_url":"https://api.github.com/users/igorski89/followers","following_url":"https://api.github.com/users/igorski89/following{/other_user}","gists_url":"https://api.github.com/users/igorski89/gists{/gist_id}","starred_url":"https://api.github.com/users/igorski89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igorski89/subscriptions","organizations_url":"https://api.github.com/users/igorski89/orgs","repos_url":"https://api.github.com/users/igorski89/repos","events_url":"https://api.github.com/users/igorski89/events{/privacy}","received_events_url":"https://api.github.com/users/igorski89/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T12:19:53Z","updated_at":"2018-02-07T12:19:53Z","author_association":"NONE","body":"@nickva I guess i know the answer: to build `_changes` feed the changes themselves have to be indexed somewhere, meaning a similar to `seq_indexed` option must be implemented for selectors, which pretty much brings us to point 1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363752134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363763529","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363763529","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363763529,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzc2MzUyOQ==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T13:08:31Z","updated_at":"2018-02-07T13:08:31Z","author_association":"NONE","body":"@chewbranca \r\nYes, I'm aware of the support already existing in the `_view` API and if people want to match that behaviour I can live with it. I just thought it might be better to stem the flow of APIs not describable by OpenAPI if we can.\r\n\r\n@rnewson \r\nThe difference is in making something that *could* be described by the OpenAPI specification where the response schema is limited to being varied by the `path` or by the `content-type` - not other headers, query parameters, or body content.\r\n\r\nWhilst a custom `Content-type` like `x-vnd.couchdb.view` would allow for different response schemas the downside would be missing out on automatic handling provided by using `application/json` (e.g. in auto-generated documentation with HTTP examples).\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363763529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363776079","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-363776079","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":363776079,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzc3NjA3OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T13:56:08Z","updated_at":"2018-02-07T13:56:08Z","author_association":"CONTRIBUTOR","body":"@evsukov89 Yes, you are exactly right!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363776079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363792162","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363792162","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363792162,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzc5MjE2Mg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T14:50:21Z","updated_at":"2018-02-07T14:50:21Z","author_association":"MEMBER","body":"Makes sense. \n\nIf we do this, let’s add it for _view also. We can leave the dual support for _view itself for backward compatibility. \n\nSent from my iPhone\n\n> On 7 Feb 2018, at 13:08, Rich Ellis <notifications@github.com> wrote:\n> \n> @chewbranca\n> Yes, I'm aware of the support already existing in the _view API and if people want to match that behaviour I can live with it. I just thought it might be better to stem the flow of APIs not describable by OpenAPI if we can.\n> \n> @rnewson\n> The difference is in making something that could be described by the OpenAPI specification where the response schema is limited to being varied by the path or by the content-type - not other headers, query parameters, or body content.\n> \n> Whilst a custom Content-type like x-vnd.couchdb.view would allow for different response schemas the downside would be missing out on automatic handling provided by using application/json (e.g. in auto-generated documentation with HTTP examples).\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363792162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363809564","html_url":"https://github.com/apache/couchdb/issues/1150#issuecomment-363809564","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1150","id":363809564,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzgwOTU2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T15:43:03Z","updated_at":"2018-02-07T15:43:03Z","author_association":"MEMBER","body":"Known issue - you have a vulnerable version of CouchDB and need to upgrade.\r\n\r\nSee: #1074 #1088 for duplicates\r\n\r\nSee: https://blog.couchdb.org/2017/11/14/apache-couchdb-cve-2017-12635-and-cve-2017-12636/ for the security announcement.\r\n\r\nUpgrade to CouchDB 1.7.1 or 2.1.1 and reinstall your server.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363809564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363838017","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-363838017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":363838017,"node_id":"MDEyOklzc3VlQ29tbWVudDM2MzgzODAxNw==","user":{"login":"ReeceStevens","id":5847947,"node_id":"MDQ6VXNlcjU4NDc5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5847947?v=4","gravatar_id":"","url":"https://api.github.com/users/ReeceStevens","html_url":"https://github.com/ReeceStevens","followers_url":"https://api.github.com/users/ReeceStevens/followers","following_url":"https://api.github.com/users/ReeceStevens/following{/other_user}","gists_url":"https://api.github.com/users/ReeceStevens/gists{/gist_id}","starred_url":"https://api.github.com/users/ReeceStevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReeceStevens/subscriptions","organizations_url":"https://api.github.com/users/ReeceStevens/orgs","repos_url":"https://api.github.com/users/ReeceStevens/repos","events_url":"https://api.github.com/users/ReeceStevens/events{/privacy}","received_events_url":"https://api.github.com/users/ReeceStevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T17:04:13Z","updated_at":"2018-02-07T17:04:13Z","author_association":"NONE","body":"Hi @wohali -- unfortunately, resting encryption is a hard requirement of our application so we need to use eCryptFS. Is there anything else we can try?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363838017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363885014","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-363885014","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":363885014,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg4NTAxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:35:54Z","updated_at":"2018-02-07T19:35:54Z","author_association":"MEMBER","body":"@ReeceStevens Yup, I'm aware, I just mean for testing. I haven't been able to reproduce the bug, so I was hoping you might have a test system on the same hardware you can test against that doesn't use eCryptFS. There's another bug filed on here that I still believe might be disk latency related, and I'm trying to eliminate possibilities.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363885014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363885774","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-363885774","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":363885774,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg4NTc3NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:38:25Z","updated_at":"2018-02-07T19:38:25Z","author_association":"MEMBER","body":"+1. Note that this might reduce or eliminate the need to implement #959 as well.\r\n\r\n@janl also wants this, I'm pretty sure.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363885774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363886118","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-363886118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":363886118,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg4NjExOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:39:42Z","updated_at":"2018-02-07T19:39:42Z","author_association":"CONTRIBUTOR","body":"@wohali Good point! Even more reason to have it","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363886118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363886731","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-363886731","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":363886731,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg4NjczMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:41:53Z","updated_at":"2018-02-07T19:41:53Z","author_association":"MEMBER","body":"Just re-read your proposal.\r\n\r\nOAuth 1.0 support was removed from CouchDB in 2.1.0, see https://github.com/apache/couchdb/commit/34b803a35531f305e05080c35c3e9af9e3b9dbf2 .\r\n\r\nThe stubs for OAuth support were left in the replicator code in the hopes we'd move towards a future implementation of something better. I do know that @rnewson was looking at JWT-like token support, and there is of course the current proxy auth implementation that we recommend as a first choice for people who don't like the current options.\r\n\r\nFinally, be aware of this issue #844 in which there is at least one request for the ability to \"revoke\" a session token. By design this isn't possible right now. Just something to consider as we look at new implementation ideas.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363886731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363890625","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-363890625","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":363890625,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg5MDYyNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:55:01Z","updated_at":"2018-02-07T19:55:01Z","author_association":"CONTRIBUTOR","body":"Hmm wonder what we should do about OAuth 1.0 support in the replicator then.  Really not sure how much it is used.  Maybe there is someone is still using it to replicate to / from a CouchDB instance which supports it (to migrate data) or with some service. Or using it together with proxy auth and their proxy handles OAuth 1.0. If the community feels like it is not needed could remove. Shoving all those bits in a plugin module would at least make it easier to disable.\r\n\r\nThanks for pointing out #844. Yeah that would good to consider. If we can return an unambiguous reply that the token has been revoked we can even re-use the new replication feature and mark that replication as \"failed\" so the job doesn't keep retrying.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363890625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363891180","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-363891180","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":363891180,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg5MTE4MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T19:56:46Z","updated_at":"2018-02-07T19:56:46Z","author_association":"MEMBER","body":"I'm really unhappy with the naming convention chosen here, but I acknowledge this is a bike-shedding point.\r\n\r\nAre we really dead-set against this being a level down, i.e. `/{db}/_all_docs/_queries` or `/{db}/_design/{ddoc}/_view/{viewname}/_queries` ?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363891180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363892999","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-363892999","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":363892999,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzg5Mjk5OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T20:02:59Z","updated_at":"2018-02-07T20:02:59Z","author_association":"MEMBER","body":"I'm fairly certain that no one is actively using OAuth 1.0 support in 2.x except to connect to a 1.x cluster that has OAuth 1.0 activated. I doubt very much that anyone is putting an OAuth 1.0-enabled proxy in front of CouchDB 2.x, but who knows?\r\n\r\nThe issue, of course, is that session tokens can't be revoked right now. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363892999/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363948102","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-363948102","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":363948102,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk0ODEwMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-07T23:31:52Z","updated_at":"2018-02-07T23:31:52Z","author_association":"CONTRIBUTOR","body":"Well it looks like when we remove OAuth 1.0 we removed the `oauth` app which replicator would need to use OAuth. At this point we might as well remove it the whole thing it seems.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363948102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363994377","html_url":"https://github.com/apache/couchdb/issues/1154#issuecomment-363994377","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1154","id":363994377,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Mzk5NDM3Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T03:51:05Z","updated_at":"2018-02-08T03:51:05Z","author_association":"MEMBER","body":"False positive - we use NSSM legitimately.\r\n\r\nPlease report this to Kaspersky Labs, not us.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/363994377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364054583","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-364054583","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":364054583,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDA1NDU4Mw==","user":{"login":"ricellis","id":10698320,"node_id":"MDQ6VXNlcjEwNjk4MzIw","avatar_url":"https://avatars.githubusercontent.com/u/10698320?v=4","gravatar_id":"","url":"https://api.github.com/users/ricellis","html_url":"https://github.com/ricellis","followers_url":"https://api.github.com/users/ricellis/followers","following_url":"https://api.github.com/users/ricellis/following{/other_user}","gists_url":"https://api.github.com/users/ricellis/gists{/gist_id}","starred_url":"https://api.github.com/users/ricellis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ricellis/subscriptions","organizations_url":"https://api.github.com/users/ricellis/orgs","repos_url":"https://api.github.com/users/ricellis/repos","events_url":"https://api.github.com/users/ricellis/events{/privacy}","received_events_url":"https://api.github.com/users/ricellis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T09:36:01Z","updated_at":"2018-02-08T09:36:01Z","author_association":"NONE","body":"If people generally prefer the `.../_queries` I'm fine with that because it still provides a unique path for the queries `POST` that returns the different response object schema.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364054583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364080929","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364080929","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364080929,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDA4MDkyOQ==","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T11:15:26Z","updated_at":"2018-02-08T11:19:52Z","author_association":"NONE","body":"I did additional tests, and found out that this behaviour is due to sharding, even for a single node setup. For single node with one shard this works as expected.\r\n\r\nI don't know why it is working in Cloudant though, which is multi-node... Did they change the way aggregates work?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364080929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364135037","html_url":"https://github.com/apache/couchdb/issues/1088#issuecomment-364135037","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1088","id":364135037,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDEzNTAzNw==","user":{"login":"wotaen","id":715052,"node_id":"MDQ6VXNlcjcxNTA1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/715052?v=4","gravatar_id":"","url":"https://api.github.com/users/wotaen","html_url":"https://github.com/wotaen","followers_url":"https://api.github.com/users/wotaen/followers","following_url":"https://api.github.com/users/wotaen/following{/other_user}","gists_url":"https://api.github.com/users/wotaen/gists{/gist_id}","starred_url":"https://api.github.com/users/wotaen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wotaen/subscriptions","organizations_url":"https://api.github.com/users/wotaen/orgs","repos_url":"https://api.github.com/users/wotaen/repos","events_url":"https://api.github.com/users/wotaen/events{/privacy}","received_events_url":"https://api.github.com/users/wotaen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T14:51:20Z","updated_at":"2018-02-08T14:51:33Z","author_association":"NONE","body":"Just for reference if anyone is looking for the process name. It's `supsplk` in my case. It's stored in `/var/tmp/`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364135037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364142882","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-364142882","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":364142882,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE0Mjg4Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T15:16:00Z","updated_at":"2018-02-08T15:16:00Z","author_association":"MEMBER","body":"I’m very +1 on this. Just a few notes.\r\n\r\nImplementation idea: I like the adapter implementation plan.\r\n\r\nOAuth 1 : as seems to be consensus here already, nuke to appropriate orbit.\r\n\r\n> A list of replicator client authentication handler modules is specified in the config file\r\n\r\nI know this is how we’ve done this in the past, and that this makes it relatively easy for Cloudant to customise things, but I think we want to move away from having too many code-level config items. The ini files are unwieldy as is, and we should think about moving this to a separate, source-level config file (like we’ve done for the stats cfg).\r\n\r\n```\r\nupdate_headers(#httpdb{}, Headers) -> {ok, UpdatedHeaders} | {error, Error}\r\n\r\nhandle_response(#httpdb{}, ResponseCode, ResponseMessage) -> ok | retry | {error, Error}\r\n```\r\n\r\nI’m just wondering about symmetry here, could `update_headers` also be `handle_request`? Just seems more what the intent of this function is, rather than an implementation detail. // imagine an auth format that messes with the body (not that that one should have such a format, bear with me) as well as the headers, that’d be awkward to finagle into this signature. // just a question :)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364142882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364176699","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-364176699","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":364176699,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDE3NjY5OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T16:56:26Z","updated_at":"2018-02-08T16:56:26Z","author_association":"CONTRIBUTOR","body":"Thank for the comments, @janl \r\n\r\nIn case of the config ini / cfg files. I think there won't be many more config settings besides the plugin list. And even there it would not be the full on mfa format (like in the server side auth plugins list), just a list of modules separated commas.\r\n\r\nIni files are not perfect, but I don't hate them, they allow overrides, loading from a *.d directory, stuff is put into an ets table optimized for concurrent reads,  we have a documentation section for it etc. The source config for stats work well because they are relatively static (change with code), it's more structured data, and there are a ton of them (that would bloat the ini file if it were there).\r\n\r\nWith `update_headers` initially I started with something that took the whole request, body and headers, however thinking about it seemed the API was too broad. All use cases I could think of we only update headers, so restricted it back down.\r\n\r\nThe `handle_response` is more broad because various plugins might want to inspect error response to make decisions how to proceed, say get a new token or has it be been revoked and it will never be valid again. So Basically the API is inherently not symmetric. The more specific name  is also helpful when reading the the section in the code where it is called, as it explain what it will do, as opposed to passing in the whole request body and wondering how much was really modified or what it does behind the scenes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364176699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364231338","html_url":"https://github.com/apache/couchdb/issues/1008#issuecomment-364231338","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1008","id":364231338,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDIzMTMzOA==","user":{"login":"gregoryjgarcia0","id":27730410,"node_id":"MDQ6VXNlcjI3NzMwNDEw","avatar_url":"https://avatars.githubusercontent.com/u/27730410?v=4","gravatar_id":"","url":"https://api.github.com/users/gregoryjgarcia0","html_url":"https://github.com/gregoryjgarcia0","followers_url":"https://api.github.com/users/gregoryjgarcia0/followers","following_url":"https://api.github.com/users/gregoryjgarcia0/following{/other_user}","gists_url":"https://api.github.com/users/gregoryjgarcia0/gists{/gist_id}","starred_url":"https://api.github.com/users/gregoryjgarcia0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gregoryjgarcia0/subscriptions","organizations_url":"https://api.github.com/users/gregoryjgarcia0/orgs","repos_url":"https://api.github.com/users/gregoryjgarcia0/repos","events_url":"https://api.github.com/users/gregoryjgarcia0/events{/privacy}","received_events_url":"https://api.github.com/users/gregoryjgarcia0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T20:02:09Z","updated_at":"2018-02-08T20:02:09Z","author_association":"NONE","body":"I have that same error message in my log. Is your CPU usage getting spiked really hard by the erlang process too? That's the problem I'm trying to solve. I'm using 2.1.1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364231338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364240558","html_url":"https://github.com/apache/couchdb/issues/1153#issuecomment-364240558","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1153","id":364240558,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI0MDU1OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T20:37:04Z","updated_at":"2018-02-08T20:37:04Z","author_association":"MEMBER","body":"Thanks for the explanation!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364240558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364242248","html_url":"https://github.com/apache/couchdb/issues/1155#issuecomment-364242248","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1155","id":364242248,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI0MjI0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T20:43:28Z","updated_at":"2018-02-08T20:43:28Z","author_association":"MEMBER","body":"Discussion with @rnewson and @chewbranca on IRC lead to the realization that we don't, strictly speaking, need the current `localhost:5986` `/_dbs` `/_nodes` experience over on the public port. Exposing the weirdness that are these two system databases as a \"standard\" CouchDB database API can lead to confusion over what it really is, which is an auto-magically internally replicating un0sharded local database.\r\n\r\nWhat we need to be able to do is all the things admins typically do with these databases. Here's a partial list off the top of my head:\r\n* the equivalent of `GET _all_docs`\r\n* the equivalent of `GET {doc}`\r\n* the equivalent of `PUT {doc}` (for new docs, or for changed docs)\r\n* the equivalent of SOMETHING like `_changes`:\r\n  - to be notified when a node is added or changed\r\n  - to be notified when a db is added, or its shard map is changed\r\n    - can we get some/all of this from `_global_changes`?\r\n* make sure neither `_dbs` nor `_nodes` have any document conflicts (BAD!!!) as a health check\r\n* shard-level monkeying stuff that needs deeper thought\r\n\r\nThe ultimate end user goal is to support nice \"DBA\" scenarios, things like renaming a database in-place without the weight of replication.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364242248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364245018","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364245018","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364245018,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI0NTAxOA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T20:53:48Z","updated_at":"2018-02-08T20:53:48Z","author_association":"MEMBER","body":"clustered map/reduce definitely works in couchdb 2.x so there's something curious here. Can you retry with integers just in case we're in some funky IEEE 754 area?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364245018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364258099","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364258099","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364258099,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI1ODA5OQ==","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T21:43:30Z","updated_at":"2018-02-08T21:43:30Z","author_association":"NONE","body":"Integers work ok in CouchDB 2.1.1 (single node with 8 shards).\r\n\r\nOut of curiosity I did some tests in JS engine used by Chrome:\r\n-0.1-0.2+0.1+0.2 = -2.7755575615628914e-17\r\n0.1+0.2-0.1-0.2 = 2.7755575615628914e-17\r\nother combinations = 0\r\n\r\nwhich are exact results from my test case.\r\n\r\nI don't really know how CouchDB internally works, but I think it reads aggregates from shards and then calculates final aggregate. That would explain this issue, if shards results are returned in random order. But it looks that in Cloudant they are always returned in the same order, making the result the same across multiple requests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364258099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364268192","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364268192","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364268192,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI2ODE5Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T22:19:58Z","updated_at":"2018-02-08T22:25:15Z","author_association":"CONTRIBUTOR","body":"Floating point numbers, as most languages implement them, are not associative. That is a+(b+c) doesn't equal to (a+b)+c. \r\n\r\nPrinting the number is not enough, it's best to do the comparison:\r\n\r\nPython\r\n```\r\n>>> x = 0.1 + (0.2 + 0.3)\r\n>>> y = (0.1 + 0.2) + 0.3\r\n>>> x == y\r\n<<< False\r\n```\r\n\r\nJS\r\n```\r\nx = (0.1 + 0.2) + 0.3\r\n0.6000000000000001\r\ny = 0.1 + (0.2 + 0.3)\r\n0.6\r\nx == y\r\nfalse\r\n```\r\n\r\nThe sum is a reducer in this case. For it to work properly the operation has to be associative, such that it doesn't matter what order the keys are presented to it, it will produce the same result. Or, alternatively, the keys always have to be presented in the same order.\r\n\r\nNotice that with q=1,n=1 or in CouchDB 1.x the second part is true, the keys are processed in the same order (but you don't get any benefits of sharding).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364268192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364278203","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364278203","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364278203,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI3ODIwMw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T22:59:43Z","updated_at":"2018-02-08T22:59:43Z","author_association":"MEMBER","body":"cloudant's clustered reduce is line for line the same as couchdb's. I suspect you got lucky and that each copy of the shard has the same ordering. plausible given how few documents are in play.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364278203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364289105","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364289105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364289105,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDI4OTEwNQ==","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-08T23:54:30Z","updated_at":"2018-02-08T23:54:30Z","author_association":"NONE","body":"That might be the case. I'll do some additional tests tomorrow, with more documents and will post the results.\r\n\r\nOut of curiosity. Under this link:\r\nhttps://quabase.sei.cmu.edu/mediawiki/index.php/CouchDB_Data_Distribution_Features\r\nI found out the following info:\r\n\r\n> Merging Query Results from Multiple Shards: When a query returns multiple data objects from multiple shards, the query coordinator in the database must somehow merge the results and return them to the requesting clients. Different databases offer different capabilities to clients when performing this result set merge, including options for sorting of results and returning the complete results in pages or as a whole. In CouchDB, the following options are available: sorted order, not supported.\r\n\r\nIs this info valid? If yes, then is there any official doc I can read about these options?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364289105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364327373","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364327373","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364327373,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDMyNzM3Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T03:49:01Z","updated_at":"2018-02-09T03:49:01Z","author_association":"MEMBER","body":"No clue what they're on about there, sorry.\r\n\r\nAll options for view result sorting/etc are [here](http://docs.couchdb.org/en/latest/api/ddoc/views.html#db-design-design-doc-view-view-name). It doesn't matter if you have 1 shard or 192, the options are the same.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364327373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364379733","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-364379733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":364379733,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDM3OTczMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T09:22:02Z","updated_at":"2018-02-09T09:22:02Z","author_association":"MEMBER","body":"First stab at a patch that avoids having infinitely blocking `receive`s in the multipart code: https://github.com/janl/couchdb/commit/2434140e4b06942b41336bfcb590e20dc1990f5f","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364379733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364415283","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364415283","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364415283,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDQxNTI4Mw==","user":{"login":"arekdygas","id":6494612,"node_id":"MDQ6VXNlcjY0OTQ2MTI=","avatar_url":"https://avatars.githubusercontent.com/u/6494612?v=4","gravatar_id":"","url":"https://api.github.com/users/arekdygas","html_url":"https://github.com/arekdygas","followers_url":"https://api.github.com/users/arekdygas/followers","following_url":"https://api.github.com/users/arekdygas/following{/other_user}","gists_url":"https://api.github.com/users/arekdygas/gists{/gist_id}","starred_url":"https://api.github.com/users/arekdygas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arekdygas/subscriptions","organizations_url":"https://api.github.com/users/arekdygas/orgs","repos_url":"https://api.github.com/users/arekdygas/repos","events_url":"https://api.github.com/users/arekdygas/events{/privacy}","received_events_url":"https://api.github.com/users/arekdygas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T12:00:13Z","updated_at":"2018-02-09T12:00:13Z","author_association":"NONE","body":"After additional tests I was able to reproduce this in Cloudant, so I can confirm this is related to reading data from shards in random order. Switching to q=1 is perfectly ok for me, so that's my workaround.\r\n\r\nI'm leaving the issue open, because I don't know if the shards random read order is intended or not. If yes, then please close it.\r\n\r\nThank you all for your insights!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364415283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364481465","html_url":"https://github.com/apache/couchdb/issues/1152#issuecomment-364481465","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1152","id":364481465,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDQ4MTQ2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-09T16:21:40Z","updated_at":"2018-02-09T16:35:27Z","author_association":"MEMBER","body":"Shard read order is never guaranteed. This is ~intentional.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364481465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364989670","html_url":"https://github.com/apache/couchdb/issues/1093#issuecomment-364989670","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1093","id":364989670,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NDk4OTY3MA==","user":{"login":"ReeceStevens","id":5847947,"node_id":"MDQ6VXNlcjU4NDc5NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5847947?v=4","gravatar_id":"","url":"https://api.github.com/users/ReeceStevens","html_url":"https://github.com/ReeceStevens","followers_url":"https://api.github.com/users/ReeceStevens/followers","following_url":"https://api.github.com/users/ReeceStevens/following{/other_user}","gists_url":"https://api.github.com/users/ReeceStevens/gists{/gist_id}","starred_url":"https://api.github.com/users/ReeceStevens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReeceStevens/subscriptions","organizations_url":"https://api.github.com/users/ReeceStevens/orgs","repos_url":"https://api.github.com/users/ReeceStevens/repos","events_url":"https://api.github.com/users/ReeceStevens/events{/privacy}","received_events_url":"https://api.github.com/users/ReeceStevens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-12T17:01:23Z","updated_at":"2018-02-12T17:01:23Z","author_association":"NONE","body":"@wohali sorry for silence, I've been trying to get a test environment together for you where I can replicate the issue. I'm testing on a linux machine with a slow spinning disk, filesystem `ext4`, and stressing the CPU to see if I can generate the error. So far, I have *not* been able to reproduce the error I saw in our testing system. I will run the tests for a bit longer and then try the same thing setting up an eCryptFS partition, and I will let you know how that goes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/364989670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365130428","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-365130428","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":365130428,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTEzMDQyOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T02:23:12Z","updated_at":"2018-02-13T02:23:12Z","author_association":"MEMBER","body":"For Apache CouchDB to accept this code, we will need to import the erlangpack/bcrypt repo and perform due diligence on the [LICENSE](https://github.com/erlangpack/bcrypt/blob/master/LICENSE) file. At a glance, it looks OK - just saying that this won't hit `master` with a non-Apache hosted repo in `rebar.config`. This likely means your code would need to be merged to a feature branch, and have the stated concern worked there, before it would be merged to `master`.\r\n\r\nI can't speak to the desirability or the technical efficacy of the patch; someone else will need to comment. I know there have been arguments on bcrypt vs. pbkdf2 in the past, but I can't remember where they went.\r\n\r\nWhat motivated this work?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365130428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365190833","html_url":"https://github.com/apache/couchdb/issues/1119#issuecomment-365190833","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1119","id":365190833,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTE5MDgzMw==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T08:50:11Z","updated_at":"2018-02-13T08:50:11Z","author_association":"NONE","body":"Hello Joan (@wohali)\r\nTicket is marked as `waiting for user`.\r\nCould you write what is need to do from my side?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365190833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365265915","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-365265915","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":365265915,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTI2NTkxNQ==","user":{"login":"pierrekilly","id":1321703,"node_id":"MDQ6VXNlcjEzMjE3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/1321703?v=4","gravatar_id":"","url":"https://api.github.com/users/pierrekilly","html_url":"https://github.com/pierrekilly","followers_url":"https://api.github.com/users/pierrekilly/followers","following_url":"https://api.github.com/users/pierrekilly/following{/other_user}","gists_url":"https://api.github.com/users/pierrekilly/gists{/gist_id}","starred_url":"https://api.github.com/users/pierrekilly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pierrekilly/subscriptions","organizations_url":"https://api.github.com/users/pierrekilly/orgs","repos_url":"https://api.github.com/users/pierrekilly/repos","events_url":"https://api.github.com/users/pierrekilly/events{/privacy}","received_events_url":"https://api.github.com/users/pierrekilly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T13:26:28Z","updated_at":"2018-02-13T13:26:28Z","author_association":"NONE","body":"Thanks @wohali for your review! I have to say this is the first time I contribute to a big opensource project, and the first time I work with Erlang!\r\n\r\nSo If I understand well, I should at least do the following:\r\n- not use the default `iterations` that is used for PBKDF2 but create a new `log_rounds` config entry with its own default\r\n- rollback my change in pbkdf2's default iterations (if something should be fixed there, it should be fixed in a dedicated branch / commit / PR)\r\n\r\nOnce this is done, **how should I proceed to work on a feature branch**? I've followed [the given instructions](https://github.com/apache/couchdb/blob/master/CONTRIBUTING.md#for-new-contributors) but maybe I made something wrong?\r\n\r\nI don't have a strong opinion about bcrypt vs. pbkdf2. I know both are great with there pros and cons. I happened to use Bcrypt so far and I have several dozens of thousands of user accounts who's passwords are stored in my MySQL database and as I want to migrate to CouchDB (because it's awesome!), the best for me is to have it support Bcrypt, so I can just import my user accounts without requiring any actions from them.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365265915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365280884","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-365280884","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":365280884,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTI4MDg4NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T14:22:46Z","updated_at":"2018-02-13T14:22:46Z","author_association":"MEMBER","body":"Some news. I now have a test setup that I’m happy to give people ssh access to, that simulates the problem well enough and allows us to observe CouchDB a little closer while this happens. Please get in touch, if anyone here would like access to such a setup.\r\n\r\nSecondly, [@davisp’s patch](https://github.com/apache/couchdb/issues/745#issuecomment-361979990) appears to solve the problem of piling up processes stuck in `{couch_httpd_multipart,maybe_send_data,1}`.\r\n\r\nWe’re now looking at testing this patch in a production environment that exhibits this issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365280884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365290431","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-365290431","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":365290431,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTI5MDQzMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T14:54:39Z","updated_at":"2018-02-13T14:54:39Z","author_association":"MEMBER","body":"Quick update, the patch fails `make check`:\r\n\r\n```\r\nmodule 'couch_replicator_missing_stubs_tests'\r\n  Replicate docs with missing stubs (COUCHDB-1365)\r\n…\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    remote -> remote\r\n      couch_replicator_missing_stubs_tests:84: should_populate_source...[0.029 s] ok\r\n      couch_replicator_missing_stubs_tests:96: should_set_target_revs_limit...[0.017 s] ok\r\n      couch_replicator_missing_stubs_tests:91: should_replicate...*timed out*\r\n```\r\n\r\nSee https://travis-ci.org/janl/couchdb/builds/340972450 for more instances.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365290431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365291491","html_url":"https://github.com/apache/couchdb/pull/1161#issuecomment-365291491","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1161","id":365291491,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTI5MTQ5MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T14:58:04Z","updated_at":"2018-02-13T14:58:04Z","author_association":"MEMBER","body":"+1, me too","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365291491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365297966","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-365297966","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":365297966,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTI5Nzk2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T15:19:19Z","updated_at":"2018-02-13T15:19:19Z","author_association":"MEMBER","body":"Hi @pierrekilly ,\r\n\r\nOops, I wasn't clear in my comments, sorry about that.\r\n\r\nYou *should* use the same value for iterations for `bcrypt` and `pbkdf2`. \r\n\r\nYou should *not* change the default in the same commit. I see the advice that recommends not using less than 10 for the iterations value online, so I understand your going with 12, but since this will affect both algorithms, we need to be sure this will not cause undue concern for users of `pbkdf2` which should remain the default.\r\n\r\nIf you change the default value you **must** update `rel/overlay/etc/default.ini` with the new default value as well. This file must always match the default values as specified in the code.\r\n\r\nSomeone else more focused on this section of the code will have to help this PR along further, I'm afraid. That may take some time. If it stalls out too long, you should subscribe to `dev@couchdb.apache.org` and send an email asking for someone to look over your contribution.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365297966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365303878","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-365303878","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":365303878,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTMwMzg3OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-13T15:37:29Z","updated_at":"2018-02-13T15:37:29Z","author_association":"MEMBER","body":"And because this is your first contribution - THANK YOU for contributing to CouchDB! We're always happy to have new collaborators on our project. :D","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365303878/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365642477","html_url":"https://github.com/apache/couchdb/pull/1162#issuecomment-365642477","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1162","id":365642477,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTY0MjQ3Nw==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-14T15:29:03Z","updated_at":"2018-02-14T15:29:03Z","author_association":"CONTRIBUTOR","body":"I decided to close this one and send each of the changes/fixes I did as a separate fine-grained PR. I believe this will help to track changes better","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365642477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365660592","html_url":"https://github.com/apache/couchdb/issues/1163#issuecomment-365660592","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1163","id":365660592,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTY2MDU5Mg==","user":{"login":"cwmichi","id":11738910,"node_id":"MDQ6VXNlcjExNzM4OTEw","avatar_url":"https://avatars.githubusercontent.com/u/11738910?v=4","gravatar_id":"","url":"https://api.github.com/users/cwmichi","html_url":"https://github.com/cwmichi","followers_url":"https://api.github.com/users/cwmichi/followers","following_url":"https://api.github.com/users/cwmichi/following{/other_user}","gists_url":"https://api.github.com/users/cwmichi/gists{/gist_id}","starred_url":"https://api.github.com/users/cwmichi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwmichi/subscriptions","organizations_url":"https://api.github.com/users/cwmichi/orgs","repos_url":"https://api.github.com/users/cwmichi/repos","events_url":"https://api.github.com/users/cwmichi/events{/privacy}","received_events_url":"https://api.github.com/users/cwmichi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-14T16:22:19Z","updated_at":"2018-02-14T16:22:19Z","author_association":"NONE","body":"Also i receive an timeout:\r\n\r\n\r\n[error] 2018-02-14T15:16:50.763000Z couchdb@localhost <0.24433.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream_last,2,[{file,\"src/rexi.erl\"},{line,224}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,86}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-02-14T15:16:50.763000Z couchdb@localhost <0.24436.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream_last,2,[{file,\"src/rexi.erl\"},{line,224}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,86}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-02-14T15:16:50.763000Z couchdb@localhost <0.24438.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,changes_enumerator,2,[{file,\"src/fabric_rpc.erl\"},{line,378}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,changes_since,5,[{file,\"src/couch_db.erl\"},{line,1400}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,85}]}]\r\n[error] 2018-02-14T15:16:50.763000Z couchdb@localhost <0.24435.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,changes_enumerator,2,[{file,\"src/fabric_rpc.erl\"},{line,378}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,changes_since,5,[{file,\"src/couch_db.erl\"},{line,1400}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,85}]}]\r\n[error] 2018-02-14T15:16:50.785000Z couchdb@localhost <0.24437.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream_last,2,[{file,\"src/rexi.erl\"},{line,224}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,86}]},{rexi_server,init_p,3,[{file,\"src/rexi_server.erl\"},{line,139}]}]\r\n[error] 2018-02-14T15:16:50.816000Z couchdb@localhost <0.24442.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,changes_enumerator,2,[{file,\"src/fabric_rpc.erl\"},{line,378}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,changes_since,5,[{file,\"src/couch_db.erl\"},{line,1400}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,85}]}]\r\n[error] 2018-02-14T15:16:50.856000Z couchdb@localhost <0.24441.1> eda9216a18 rexi_server: from: couchdb@localhost(<0.23660.1>) mfa: fabric_rpc:changes/3 exit:timeout [{rexi,init_stream,1,[{file,\"src/rexi.erl\"},{line,256}]},{rexi,stream2,3,[{file,\"src/rexi.erl\"},{line,204}]},{fabric_rpc,changes_enumerator,2,[{file,\"src/fabric_rpc.erl\"},{line,378}]},{couch_btree,stream_kv_node2,8,[{file,\"src/couch_btree.erl\"},{line,848}]},{couch_btree,stream_kp_node,8,[{file,\"src/couch_btree.erl\"},{line,819}]},{couch_btree,fold,4,[{file,\"src/couch_btree.erl\"},{line,222}]},{couch_db,changes_since,5,[{file,\"src/couch_db.erl\"},{line,1400}]},{fabric_rpc,changes,4,[{file,\"src/fabric_rpc.erl\"},{line,85}]}]\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365660592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365840314","html_url":"https://github.com/apache/couchdb/pull/1167#issuecomment-365840314","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1167","id":365840314,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg0MDMxNA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T06:52:35Z","updated_at":"2018-02-15T06:52:35Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365840314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365878154","html_url":"https://github.com/apache/couchdb/pull/1166#issuecomment-365878154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1166","id":365878154,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTg3ODE1NA==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T09:58:36Z","updated_at":"2018-02-15T10:01:50Z","author_association":"CONTRIBUTOR","body":"UPD: \r\nToday on vanilla CouchDB 2.1 without this fix ^ encountered this error again:\r\n\r\n> Error opening view group `index` from database `shards/60000000-7fffffff/db1.1518688351`:  {'EXIT',{{{case_clause,{ok,0}},[{couch_mrview_util,reduced_external_size,1,[{file,\"src/couch_mrview_util.erl\"},{line,800}]},\r\n\r\nSo as I said instead of a general clause `_ -> 0` I can insert `{ok, _} -> 0`, this will fix the error and crash as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365878154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365906709","html_url":"https://github.com/apache/couchdb/issues/666#issuecomment-365906709","issue_url":"https://api.github.com/repos/apache/couchdb/issues/666","id":365906709,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTkwNjcwOQ==","user":{"login":"igorski89","id":56879,"node_id":"MDQ6VXNlcjU2ODc5","avatar_url":"https://avatars.githubusercontent.com/u/56879?v=4","gravatar_id":"","url":"https://api.github.com/users/igorski89","html_url":"https://github.com/igorski89","followers_url":"https://api.github.com/users/igorski89/followers","following_url":"https://api.github.com/users/igorski89/following{/other_user}","gists_url":"https://api.github.com/users/igorski89/gists{/gist_id}","starred_url":"https://api.github.com/users/igorski89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igorski89/subscriptions","organizations_url":"https://api.github.com/users/igorski89/orgs","repos_url":"https://api.github.com/users/igorski89/repos","events_url":"https://api.github.com/users/igorski89/events{/privacy}","received_events_url":"https://api.github.com/users/igorski89/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T11:59:44Z","updated_at":"2018-02-15T11:59:44Z","author_association":"NONE","body":"I understand the same will have to be done for `_design/_replicator` in the `_replicator` db?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365906709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365972546","html_url":"https://github.com/apache/couchdb/pull/1167#issuecomment-365972546","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1167","id":365972546,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTk3MjU0Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T16:00:26Z","updated_at":"2018-02-15T16:00:26Z","author_association":"CONTRIBUTOR","body":"Thanks, @wohali !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365972546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365973116","html_url":"https://github.com/apache/couchdb/issues/666#issuecomment-365973116","issue_url":"https://api.github.com/repos/apache/couchdb/issues/666","id":365973116,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NTk3MzExNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T16:02:07Z","updated_at":"2018-02-15T16:02:07Z","author_association":"CONTRIBUTOR","body":"@evsukov89 yes, that would be great to get _design/_replicator into Erlang and not it as a \"system\" _design doc.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/365973116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366027083","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366027083","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366027083,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjAyNzA4Mw==","user":{"login":"Nanonid","id":1835820,"node_id":"MDQ6VXNlcjE4MzU4MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1835820?v=4","gravatar_id":"","url":"https://api.github.com/users/Nanonid","html_url":"https://github.com/Nanonid","followers_url":"https://api.github.com/users/Nanonid/followers","following_url":"https://api.github.com/users/Nanonid/following{/other_user}","gists_url":"https://api.github.com/users/Nanonid/gists{/gist_id}","starred_url":"https://api.github.com/users/Nanonid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nanonid/subscriptions","organizations_url":"https://api.github.com/users/Nanonid/orgs","repos_url":"https://api.github.com/users/Nanonid/repos","events_url":"https://api.github.com/users/Nanonid/events{/privacy}","received_events_url":"https://api.github.com/users/Nanonid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T18:59:07Z","updated_at":"2018-02-15T19:02:18Z","author_association":"NONE","body":" Error message:\r\n\r\n> [user@centos69 couchdb]$ rel/couchdb/bin/couchdb\r\n> [os_mon] memory supervisor port (memsup): Erlang has closed\r\n> [os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n\r\n> {\"Kernel pid terminated\",application_controller,\"{application_start_failure,couch_epi,{{shutdown,{failed_to_start_child,\\\"couch_epi|chttpd_auth|keeper\\\",{notsup,[{crypto,notsup_to_error,1,[{file,\\\"crypto.erl\\\"},{line,831}]},{couch_epi_util,hash,1,[{file,\\\"src/couch_epi_util.erl\\\"},{line,25}]},{couch_epi_functions,data,1,[{file,\\\"src/couch_epi_functions.erl\\\"},{line,33}]},{couch_epi_module_keeper,do_reload_if_updated,1,[{file,\\\"src/couch_epi_module_keeper.erl\\\"},{line,116}]},{gen_server,init_it,2,[{file,\\\"gen_server.erl\\\"},{line,365}]},{gen_server,init_it,6,[{file,\\\"gen_server.erl\\\"},{line,333}]},{proc_lib,init_p_do_apply,3,[{file,\\\"proc_lib.erl\\\"},{line,247}]}]}}},{couch_epi_app,start,[normal,[]]}}}\"}\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366027083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366028487","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366028487","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366028487,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjAyODQ4Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T19:04:04Z","updated_at":"2018-02-15T19:04:04Z","author_association":"MEMBER","body":"Thanks @Nanonid .\r\n\r\nAs mentioned on IRC, CouchDB relies on MD5 hashes of documents for consistency guarantees. MD5 is not a FIPS-compliant hash algorithm, so technically CouchDB is not FIPS-compliant.\r\n\r\nYou may be able to work around this by using erlang's built in md5 function `erlang:md5` instead of our call to `crypto:hash(md5, ...)` which calls out to openssl, causing the failure that you see. However, this is only a workaround that FIPS-mode RHEL doesn't know about - it doesn't actually make CouchDB FIPS-compliant. Only you can know if this is acceptable for your needs! :)\r\n\r\nYou could similarly do a search-and-replace on the md5 algorithm in the code and substitute one of the FIPS-compliant algorithms, such as `SHA-512` or `SHA-256` (with `SHA-512` testing fastest on modern hardware, due to processor acceleration). However, this will break replication with other CouchDBs, as the `_rev` tokens and the `Content-MD5` header will no longer match.\r\n\r\nImproving our hash algorithm is something we'd like to do long-term, but obviously backwards compatibility needs to be thought out in greater detail. We'd probably need to add support for alternate hashing algorithms in a minor release, then move to a new default in a major release.\r\n\r\nBig thanks to @rnewson for his brainstorming on this as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366028487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366031442","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366031442","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366031442,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjAzMTQ0Mg==","user":{"login":"Nanonid","id":1835820,"node_id":"MDQ6VXNlcjE4MzU4MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1835820?v=4","gravatar_id":"","url":"https://api.github.com/users/Nanonid","html_url":"https://github.com/Nanonid","followers_url":"https://api.github.com/users/Nanonid/followers","following_url":"https://api.github.com/users/Nanonid/following{/other_user}","gists_url":"https://api.github.com/users/Nanonid/gists{/gist_id}","starred_url":"https://api.github.com/users/Nanonid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nanonid/subscriptions","organizations_url":"https://api.github.com/users/Nanonid/orgs","repos_url":"https://api.github.com/users/Nanonid/repos","events_url":"https://api.github.com/users/Nanonid/events{/privacy}","received_events_url":"https://api.github.com/users/Nanonid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T19:14:39Z","updated_at":"2018-02-15T19:14:39Z","author_association":"NONE","body":"It seems the best path is to reference an internal couchdb hash function which enables a message digest internal function via configuration.\r\nSince CouchDB is not using MD5 for authentication or authorization, it's not addressed by FIPS compliance requirements (AFAICT).\r\nThe issues is merely the direct linking to the OpenSSL MD5 hash, which could be worked around and not move off of MD5 for the time being.\r\n\r\nReplacing the direct crypto:hash with a \"digest\" function which calls erlang:md5 perhaps based on compiler option would provide a work around for this situation without compatibility issues.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366031442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366033479","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366033479","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366033479,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjAzMzQ3OQ==","user":{"login":"Nanonid","id":1835820,"node_id":"MDQ6VXNlcjE4MzU4MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1835820?v=4","gravatar_id":"","url":"https://api.github.com/users/Nanonid","html_url":"https://github.com/Nanonid","followers_url":"https://api.github.com/users/Nanonid/followers","following_url":"https://api.github.com/users/Nanonid/following{/other_user}","gists_url":"https://api.github.com/users/Nanonid/gists{/gist_id}","starred_url":"https://api.github.com/users/Nanonid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nanonid/subscriptions","organizations_url":"https://api.github.com/users/Nanonid/orgs","repos_url":"https://api.github.com/users/Nanonid/repos","events_url":"https://api.github.com/users/Nanonid/events{/privacy}","received_events_url":"https://api.github.com/users/Nanonid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T19:21:34Z","updated_at":"2018-02-15T19:21:34Z","author_association":"NONE","body":"Of course, replacing explicitly with a non-cryptographic hash such as [FarmHash](https://github.com/google/farmhash) would make good stable alternative.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366033479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366061343","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366061343","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366061343,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA2MTM0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T21:05:32Z","updated_at":"2018-02-15T21:05:32Z","author_association":"MEMBER","body":"@rnewson mentioned that there are (may be?) places where we still use md5 for security stuff, so the code needs a full audit before making a wholesale change to a non-cryptographic hash function. I'd also like to see performance measurements for FarmHash vs. SHA-256/512 since there is explicit processor acceleration for the latter; those benefits could outweigh those of a non-cryptographic solution.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366061343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366066445","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-366066445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":366066445,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA2NjQ0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T21:24:37Z","updated_at":"2018-02-15T21:24:37Z","author_association":"MEMBER","body":"FYI, we have been notified by another client today that they are unable to replicate databases off of Cloudant because of this bug. They have attachments, but no attachment is larger than 2MB. It may be that multiple attachments are being batched up and still running into the `max_http_request_size` being small, but it's unclear.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366066445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366073668","html_url":"https://github.com/apache/couchdb/issues/1099#issuecomment-366073668","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1099","id":366073668,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA3MzY2OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T21:52:18Z","updated_at":"2018-02-15T21:52:18Z","author_association":"MEMBER","body":"Since there has been no response from the requester in 30 days, I'm closing this out. Feel free to request a re-open should more information become available.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366073668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366075429","html_url":"https://github.com/apache/couchdb/issues/1096#issuecomment-366075429","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1096","id":366075429,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA3NTQyOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T21:58:44Z","updated_at":"2018-02-15T21:58:44Z","author_association":"MEMBER","body":"@jvegaseg can you confirm that the `?w=3` workaround provided by @davisp was insufficient to solve the problem?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366075429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366079831","html_url":"https://github.com/apache/couchdb/issues/1063#issuecomment-366079831","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1063","id":366079831,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA3OTgzMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T22:15:24Z","updated_at":"2018-02-15T22:15:24Z","author_association":"MEMBER","body":"@redgeoff I had a thought - can you try the fix in #1117 ? Just patch your local couchdb mochiweb with the patch from upstream and let me know if this works for you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366079831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366081261","html_url":"https://github.com/apache/couchdb/issues/1117#issuecomment-366081261","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1117","id":366081261,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA4MTI2MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T22:21:19Z","updated_at":"2018-02-15T22:21:30Z","author_association":"MEMBER","body":"Workaround for this issue: `remsh` to the node and run `application:stop(chttpd), application:ensure_all_started(chttpd).` To automate this you'll need an expect script:\r\n\r\n```\r\n#!/usr/bin/env expect\r\nspawn bin/remsh\r\nexpect \"(couchdb@127.0.0.1)1> \"\r\nsend \"application:stop(chttpd).\\r\"\r\nexpect \"(couchdb@127.0.0.1)2> \"\r\nsend \"application:ensure_all_started(chttpd).\\r\"\r\nexpect \"(couchdb@127.0.0.1)3> \"\r\nsend \"\\007q\\r\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366081261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366081676","html_url":"https://github.com/apache/couchdb/issues/1063#issuecomment-366081676","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1063","id":366081676,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA4MTY3Ng==","user":{"login":"redgeoff","id":3378986,"node_id":"MDQ6VXNlcjMzNzg5ODY=","avatar_url":"https://avatars.githubusercontent.com/u/3378986?v=4","gravatar_id":"","url":"https://api.github.com/users/redgeoff","html_url":"https://github.com/redgeoff","followers_url":"https://api.github.com/users/redgeoff/followers","following_url":"https://api.github.com/users/redgeoff/following{/other_user}","gists_url":"https://api.github.com/users/redgeoff/gists{/gist_id}","starred_url":"https://api.github.com/users/redgeoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redgeoff/subscriptions","organizations_url":"https://api.github.com/users/redgeoff/orgs","repos_url":"https://api.github.com/users/redgeoff/repos","events_url":"https://api.github.com/users/redgeoff/events{/privacy}","received_events_url":"https://api.github.com/users/redgeoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T22:22:57Z","updated_at":"2018-02-15T22:22:57Z","author_association":"CONTRIBUTOR","body":"Sorry, I'm not sure I have the bandwidth to test this right now as it requires setting up a new test environment and it takes a bit of work. If I find some time I'll let you know.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366081676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366086057","html_url":"https://github.com/apache/couchdb/issues/745#issuecomment-366086057","issue_url":"https://api.github.com/repos/apache/couchdb/issues/745","id":366086057,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjA4NjA1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-15T22:40:25Z","updated_at":"2018-02-15T22:40:25Z","author_association":"MEMBER","body":"Can anyone who is watching this bug tell me: If you stand up a CouchDB 2.0.0 instance separately, and use it to do the replication, do you still see the problem?\r\n\r\nA little explanation: the machine doing the actual replication doesn't have to be the source *or* the target database. It can be a third party. So, the idea is that your temporary CouchDB 2.0.0 instance would take the `/_replicate` or `/_replicator` `PUT / POST` request, and your source and target servers/databases would remain untouched.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366086057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366191355","html_url":"https://github.com/apache/couchdb/issues/666#issuecomment-366191355","issue_url":"https://api.github.com/repos/apache/couchdb/issues/666","id":366191355,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjE5MTM1NQ==","user":{"login":"igorski89","id":56879,"node_id":"MDQ6VXNlcjU2ODc5","avatar_url":"https://avatars.githubusercontent.com/u/56879?v=4","gravatar_id":"","url":"https://api.github.com/users/igorski89","html_url":"https://github.com/igorski89","followers_url":"https://api.github.com/users/igorski89/followers","following_url":"https://api.github.com/users/igorski89/following{/other_user}","gists_url":"https://api.github.com/users/igorski89/gists{/gist_id}","starred_url":"https://api.github.com/users/igorski89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/igorski89/subscriptions","organizations_url":"https://api.github.com/users/igorski89/orgs","repos_url":"https://api.github.com/users/igorski89/repos","events_url":"https://api.github.com/users/igorski89/events{/privacy}","received_events_url":"https://api.github.com/users/igorski89/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T09:57:02Z","updated_at":"2018-02-16T09:57:02Z","author_association":"NONE","body":"@nickva but wouldn't this not be enough? porting the validation functions to Erlang is only half the job, the rest is to integrate them directly into couch code that already handles `_users`, `_replicator`, etc. Otherwise erlang query server has to be enabled by default, which is a security concern as I understand","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366191355/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366229506","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366229506","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366229506,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjIyOTUwNg==","user":{"login":"Nanonid","id":1835820,"node_id":"MDQ6VXNlcjE4MzU4MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1835820?v=4","gravatar_id":"","url":"https://api.github.com/users/Nanonid","html_url":"https://github.com/Nanonid","followers_url":"https://api.github.com/users/Nanonid/followers","following_url":"https://api.github.com/users/Nanonid/following{/other_user}","gists_url":"https://api.github.com/users/Nanonid/gists{/gist_id}","starred_url":"https://api.github.com/users/Nanonid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nanonid/subscriptions","organizations_url":"https://api.github.com/users/Nanonid/orgs","repos_url":"https://api.github.com/users/Nanonid/repos","events_url":"https://api.github.com/users/Nanonid/events{/privacy}","received_events_url":"https://api.github.com/users/Nanonid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T13:02:21Z","updated_at":"2018-02-16T13:02:21Z","author_association":"NONE","body":"Ideally there would be a benchmark for how erlang would call the routine, just in case there are OTP specific issues.\r\n\r\nAcceleration could also vary across chips, and shouldn't necessarily be Intel only acceleration. Many different hashes can take advantage of AVX(1/2) on other CPU like [Ryzen](http://www.sisoftware.eu/2017/04/05/amd-ryzen-review-and-benchmarks-cpu/).\r\n\r\nOne of the benchmarks makes a good point that parallel hashing may also be more performant. This would then also change the calling semantics.\r\n\r\n1. [Parallel XXHash](https://www.snellman.net/blog/archive/2017-03-19-parallel-hashing-with-avx2/)\r\n2. [Google HighwayHash Project](https://github.com/google/highwayhash)\r\n3. [Node.js HighwayHash](https://github.com/lovell/highwayhash)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366229506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366231807","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366231807","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366231807,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjIzMTgwNw==","user":{"login":"Nanonid","id":1835820,"node_id":"MDQ6VXNlcjE4MzU4MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1835820?v=4","gravatar_id":"","url":"https://api.github.com/users/Nanonid","html_url":"https://github.com/Nanonid","followers_url":"https://api.github.com/users/Nanonid/followers","following_url":"https://api.github.com/users/Nanonid/following{/other_user}","gists_url":"https://api.github.com/users/Nanonid/gists{/gist_id}","starred_url":"https://api.github.com/users/Nanonid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Nanonid/subscriptions","organizations_url":"https://api.github.com/users/Nanonid/orgs","repos_url":"https://api.github.com/users/Nanonid/repos","events_url":"https://api.github.com/users/Nanonid/events{/privacy}","received_events_url":"https://api.github.com/users/Nanonid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T13:14:12Z","updated_at":"2018-02-16T13:14:12Z","author_association":"NONE","body":"[t1ha hash](https://github.com/leo-yuriev/t1ha) seems very portable.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366231807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366288899","html_url":"https://github.com/apache/couchdb/issues/603#issuecomment-366288899","issue_url":"https://api.github.com/repos/apache/couchdb/issues/603","id":366288899,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjI4ODg5OQ==","user":{"login":"marcinrozanski","id":3663562,"node_id":"MDQ6VXNlcjM2NjM1NjI=","avatar_url":"https://avatars.githubusercontent.com/u/3663562?v=4","gravatar_id":"","url":"https://api.github.com/users/marcinrozanski","html_url":"https://github.com/marcinrozanski","followers_url":"https://api.github.com/users/marcinrozanski/followers","following_url":"https://api.github.com/users/marcinrozanski/following{/other_user}","gists_url":"https://api.github.com/users/marcinrozanski/gists{/gist_id}","starred_url":"https://api.github.com/users/marcinrozanski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcinrozanski/subscriptions","organizations_url":"https://api.github.com/users/marcinrozanski/orgs","repos_url":"https://api.github.com/users/marcinrozanski/repos","events_url":"https://api.github.com/users/marcinrozanski/events{/privacy}","received_events_url":"https://api.github.com/users/marcinrozanski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T16:41:30Z","updated_at":"2018-02-16T16:41:30Z","author_association":"NONE","body":"Same question as @ChiragMoradiya : \"When will this fix make it to a Debian package?\" Asking here as I was not able to find info about CouchDB release cycle.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366288899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366308959","html_url":"https://github.com/apache/couchdb/issues/666#issuecomment-366308959","issue_url":"https://api.github.com/repos/apache/couchdb/issues/666","id":366308959,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjMwODk1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T17:51:27Z","updated_at":"2018-02-16T17:51:27Z","author_association":"MEMBER","body":"There is already a pull request for this ticket:\r\n\r\nhttps://github.com/apache/couchdb/pull/1146\r\n\r\n@nickva any chance to review?\r\n\r\n@evsukov89 feel free to open a new issue to track moving `_design/_replicator`'s VDU.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366308959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366309861","html_url":"https://github.com/apache/couchdb/issues/1171#issuecomment-366309861","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1171","id":366309861,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjMwOTg2MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T17:54:49Z","updated_at":"2018-02-16T17:54:49Z","author_association":"MEMBER","body":"It also seems rather obscure...and I don't see any papers validating the algorithm, whereas obviously those exist for the hashes I listed.\r\n\r\nBecause of the linear nature of CouchDB operations on databases within the context of a single node, I don't think there is much opportunity for parallelization in our calling of hashing algorithms.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366309861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366311075","html_url":"https://github.com/apache/couchdb/issues/603#issuecomment-366311075","issue_url":"https://api.github.com/repos/apache/couchdb/issues/603","id":366311075,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjMxMTA3NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T17:59:25Z","updated_at":"2018-02-16T17:59:25Z","author_association":"MEMBER","body":"@jjrodrig thanks for the fix, closing this issue.\r\n\r\nAs to when it will be available in a package, the answer is \"with the next release of CouchDB.\" Our intention is to release CouchDB approximately twice a year.\r\n\r\nThe last release of CouchDB was November 7, 2017.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366311075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366312418","html_url":"https://github.com/apache/couchdb/pull/1139#issuecomment-366312418","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1139","id":366312418,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjMxMjQxOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-16T18:04:44Z","updated_at":"2018-02-16T18:04:44Z","author_association":"MEMBER","body":"@rnewson can you review this? You may also want to have a glance at the already merged companion PR, #1127","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366312418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366513983","html_url":"https://github.com/apache/couchdb/pull/1173#issuecomment-366513983","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1173","id":366513983,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjUxMzk4Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-18T12:52:06Z","updated_at":"2018-02-18T12:52:06Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366513983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366514587","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-366514587","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":366514587,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjUxNDU4Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-18T13:02:16Z","updated_at":"2018-02-18T13:02:16Z","author_association":"MEMBER","body":"+1 from me though I made one style comment.\r\n\r\nBefore this merges though;\r\n\r\n1) appropriate squashing \r\n2) we'll need to create an apache mirror of the bcrypt repo and point to that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366514587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366522421","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-366522421","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":366522421,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjUyMjQyMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-18T15:05:53Z","updated_at":"2018-02-18T15:05:53Z","author_association":"MEMBER","body":">  just saying that this won't hit master with a non-Apache hosted repo in rebar.config. \r\n\r\nQuick expanding on this. We only include sources that we have a copy of, so we can ensure that we can make releases with all features in perpetuity.\r\n\r\nThat means if/when we accept this PR, we’ll keep a copy of erlang-bcrypt on ASF git infrastructure and this GitHub mirror.\r\n\r\nThis is something team is going to handle, so no additional requirement for you, @pierrekilly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366522421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366532459","html_url":"https://github.com/apache/couchdb/pull/1173#issuecomment-366532459","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1173","id":366532459,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjUzMjQ1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-18T17:34:27Z","updated_at":"2018-02-18T17:34:27Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366532459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366532533","html_url":"https://github.com/apache/couchdb/pull/1172#issuecomment-366532533","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1172","id":366532533,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjUzMjUzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-18T17:35:22Z","updated_at":"2018-02-18T17:35:22Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366532533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366648300","html_url":"https://github.com/apache/couchdb/issues/1168#issuecomment-366648300","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1168","id":366648300,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjY0ODMwMA==","user":{"login":"ashirvadgupta","id":9796336,"node_id":"MDQ6VXNlcjk3OTYzMzY=","avatar_url":"https://avatars.githubusercontent.com/u/9796336?v=4","gravatar_id":"","url":"https://api.github.com/users/ashirvadgupta","html_url":"https://github.com/ashirvadgupta","followers_url":"https://api.github.com/users/ashirvadgupta/followers","following_url":"https://api.github.com/users/ashirvadgupta/following{/other_user}","gists_url":"https://api.github.com/users/ashirvadgupta/gists{/gist_id}","starred_url":"https://api.github.com/users/ashirvadgupta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashirvadgupta/subscriptions","organizations_url":"https://api.github.com/users/ashirvadgupta/orgs","repos_url":"https://api.github.com/users/ashirvadgupta/repos","events_url":"https://api.github.com/users/ashirvadgupta/events{/privacy}","received_events_url":"https://api.github.com/users/ashirvadgupta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T10:29:28Z","updated_at":"2018-02-19T10:29:28Z","author_association":"NONE","body":"I think I got the solution:\r\n\r\nIf we are making any changes to either node name or IP address or hostname, we will get database corruption issue.\r\n\r\nTo overcome the issue, one used to remember what exactly nodename or IPaddress or hostname was earlier given.\r\n\r\nFor example, We will get this issue in following scenarios:\r\n1)\tIf it is earlier couchdb@docker-validation-3, and we change it to couchdb@<IP address of docker-validation-3>, we will get this issue. And if we change it back, we will be able to see all databases with data.\r\n2)\tIf it is earlier couchdb@docker-validation-3, and we change it to ashirvad@docker-validation-3, we will get this issue. And if we change it back, we will be able to see all databases with data.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366648300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366729232","html_url":"https://github.com/apache/couchdb/issues/1174#issuecomment-366729232","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1174","id":366729232,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NjcyOTIzMg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T15:40:13Z","updated_at":"2018-02-19T15:40:13Z","author_association":"MEMBER","body":"Are you working on a pull request?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366729232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366751801","html_url":"https://github.com/apache/couchdb/pull/1173#issuecomment-366751801","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1173","id":366751801,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc1MTgwMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T17:02:51Z","updated_at":"2018-02-19T17:02:51Z","author_association":"MEMBER","body":"This will close #1117 but not necessarily fix the out-of-memory problem.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366751801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366753360","html_url":"https://github.com/apache/couchdb/issues/1174#issuecomment-366753360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1174","id":366753360,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc1MzM2MA==","user":{"login":"gramsa49","id":5377545,"node_id":"MDQ6VXNlcjUzNzc1NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5377545?v=4","gravatar_id":"","url":"https://api.github.com/users/gramsa49","html_url":"https://github.com/gramsa49","followers_url":"https://api.github.com/users/gramsa49/followers","following_url":"https://api.github.com/users/gramsa49/following{/other_user}","gists_url":"https://api.github.com/users/gramsa49/gists{/gist_id}","starred_url":"https://api.github.com/users/gramsa49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gramsa49/subscriptions","organizations_url":"https://api.github.com/users/gramsa49/orgs","repos_url":"https://api.github.com/users/gramsa49/repos","events_url":"https://api.github.com/users/gramsa49/events{/privacy}","received_events_url":"https://api.github.com/users/gramsa49/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T17:08:58Z","updated_at":"2018-02-19T17:08:58Z","author_association":"NONE","body":"I have not started a pull request.  My energy is focused on building a solution using CouchDB, but I can if that's needed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366753360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366757230","html_url":"https://github.com/apache/couchdb/issues/1174#issuecomment-366757230","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1174","id":366757230,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc1NzIzMA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T17:23:25Z","updated_at":"2018-02-19T17:23:25Z","author_association":"MEMBER","body":"I'm just saying that creating an issue here is unlikely to make this appear unless you do the work, though you'll also need to be clearer as to why the existing proxy authentication handler in CouchDB is unsuitable to your needs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366757230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366758522","html_url":"https://github.com/apache/couchdb/issues/1174#issuecomment-366758522","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1174","id":366758522,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc1ODUyMg==","user":{"login":"gramsa49","id":5377545,"node_id":"MDQ6VXNlcjUzNzc1NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5377545?v=4","gravatar_id":"","url":"https://api.github.com/users/gramsa49","html_url":"https://github.com/gramsa49","followers_url":"https://api.github.com/users/gramsa49/followers","following_url":"https://api.github.com/users/gramsa49/following{/other_user}","gists_url":"https://api.github.com/users/gramsa49/gists{/gist_id}","starred_url":"https://api.github.com/users/gramsa49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gramsa49/subscriptions","organizations_url":"https://api.github.com/users/gramsa49/orgs","repos_url":"https://api.github.com/users/gramsa49/repos","events_url":"https://api.github.com/users/gramsa49/events{/privacy}","received_events_url":"https://api.github.com/users/gramsa49/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T17:28:14Z","updated_at":"2018-02-19T17:28:14Z","author_association":"NONE","body":"Thanks for the guidance.  I'll work on a pull request and refine the details.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366758522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366763816","html_url":"https://github.com/apache/couchdb/issues/1154#issuecomment-366763816","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1154","id":366763816,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc2MzgxNg==","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T17:50:22Z","updated_at":"2018-02-19T17:50:22Z","author_association":"CONTRIBUTOR","body":"On Thu, 8 Feb 2018, at 04:51, Joan Touzet wrote:\n> Closed #1154.\n\nFWIW I submitted this as a false positive to Kapersky, and now we come up clean again:\n\nThe link https://dl.bintray.com/apache/couchdb/win/2.1.1/couchdb-2.1.1.msi is safe according to the reputation data of Kaspersky VirusDesk.\n—\n  Dave Cottlehuber\n  dch@apache.org\n  Sent from my Couch\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366763816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366766338","html_url":"https://github.com/apache/couchdb/issues/1174#issuecomment-366766338","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1174","id":366766338,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc2NjMzOA==","user":{"login":"gramsa49","id":5377545,"node_id":"MDQ6VXNlcjUzNzc1NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5377545?v=4","gravatar_id":"","url":"https://api.github.com/users/gramsa49","html_url":"https://github.com/gramsa49","followers_url":"https://api.github.com/users/gramsa49/followers","following_url":"https://api.github.com/users/gramsa49/following{/other_user}","gists_url":"https://api.github.com/users/gramsa49/gists{/gist_id}","starred_url":"https://api.github.com/users/gramsa49/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gramsa49/subscriptions","organizations_url":"https://api.github.com/users/gramsa49/orgs","repos_url":"https://api.github.com/users/gramsa49/repos","events_url":"https://api.github.com/users/gramsa49/events{/privacy}","received_events_url":"https://api.github.com/users/gramsa49/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T18:01:11Z","updated_at":"2018-02-19T18:01:11Z","author_association":"NONE","body":"I updated the description.  Let me know if this looks ok and is a useful enhancement.  If all looks good, I wills start on a pull request.  Thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366766338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366781960","html_url":"https://github.com/apache/couchdb/pull/1160#issuecomment-366781960","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1160","id":366781960,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njc4MTk2MA==","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-19T19:17:48Z","updated_at":"2018-02-19T19:17:48Z","author_association":"CONTRIBUTOR","body":"@pierrekilly welcome & nice work on your first PR!\r\n\r\nSome background info which may be useful to help you understand what happens next, \r\nas your PR requires the project to include a 3rd party library. We already have quite a few\r\nof these, so it's fine to do this but we need to take a few precautions.\r\n\r\nYour tidy changes require a NIF (C code) addition to the CouchDB distribution, so\r\nwe need to make sure of 3 things:\r\n\r\n1. that this runs on all our common platforms, from linux, windows and BSDs\r\n2. the NIF interface doesn't adversely impact the VM's behaviour\r\n3. that the licensing of that code, and its provenance, meets our standards\r\n\r\nThe Apache Software Foundation, as policy, releases sources artefact that contains\r\n*only* ALv2 licensed components, or those that fall under a sufficiently \"free\"\r\nlicence that we can include it in a release -- there's a pre-approved list https://apache.org/legal/resolved.html#category-a here\r\n\r\n@dch is happy to do the IP clearance dance assuming we're OK on the NIF side of things. Can anybody look into that? the NIF is an R13B04 era style, does this need any changes?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366781960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366881239","html_url":"https://github.com/apache/couchdb/pull/1176#issuecomment-366881239","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1176","id":366881239,"node_id":"MDEyOklzc3VlQ29tbWVudDM2Njg4MTIzOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-02-20T06:38:42Z","updated_at":"2018-02-20T06:38:42Z","author_association":"CONTRIBUTOR","body":"Conducted a simple benchmark using couchdyno https://github.com/cloudant-labs/couchdyno\r\n\r\nTimed replicating 100k docs with PBKDF2 iterations set to 10k.\r\n\r\n```\r\n[couch_http_auth]\r\niterations = 10000\r\n```\r\n\r\n\r\n```\r\nrep.replicate_1_to_n_and_compare(1, normal=True, num=100000)\r\n```\r\n\r\nMaster took **1133** seconds and this PR took **574** seconds.\r\n\r\nThis should allow increasing the work factor to improve security without sacrificing replication performance.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/366881239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]